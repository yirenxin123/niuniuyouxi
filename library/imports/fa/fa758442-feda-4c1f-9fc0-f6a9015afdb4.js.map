{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "ToastView",
    "MessageFactory",
    "MusicMgr",
    "Audio_Common",
    "GamePlayer",
    "GameSystem",
    "cc",
    "Class",
    "extends",
    "properties",
    "ClubAddView",
    "Prefab",
    "ClubCreateView",
    "initNode",
    "Node",
    "scrollView",
    "ScrollView",
    "ClubCell",
    "ClubJoinView",
    "ClubFindPopView",
    "ClubRoomView",
    "onLoad",
    "_super",
    "getInstance",
    "SelfClubId",
    "CurClubInfo",
    "CurClubMemList",
    "sendGetClubList",
    "createMessageReq",
    "window",
    "US_REQ_CLUB_LIST_CMD_ID",
    "send",
    "callBackBtn",
    "event",
    "CustomEventData",
    "BtnName",
    "target",
    "getName",
    "log",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "dismiss",
    "createAddView",
    "createClubCreateView",
    "createSearchPop",
    "instantiate",
    "node",
    "addChild",
    "setPosition",
    "p",
    "winSize",
    "director",
    "getWinSize",
    "onMessage",
    "msg",
    "data",
    "cmd",
    "US_RESP_CREATE_CLUB_CMD_ID",
    "onCreateClubMsg",
    "US_RESP_CLUB_LIST_CMD_ID",
    "onClubListMsg",
    "US_RESP_SEARCH_CLUB_CMD_ID",
    "onSearchClubMsg",
    "US_RESP_FIND_TABLE_CMD_ID",
    "onFindRoom",
    "CLUB_RESP_DISMISS_CLUB_CMD_ID",
    "onDismissClubMsg",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "param",
    "role",
    "ClubRole",
    "E_CLUB_OWNER_ROLE",
    "show",
    "name",
    "clubname",
    "uid",
    "setInitNodeVisible",
    "iCount",
    "content",
    "getChildrenCount",
    "getContentSize",
    "height",
    "self",
    "on",
    "EventType",
    "TOUCH_END",
    "getComponent",
    "info",
    "createClubOtherView",
    "bind",
    "setClubCellInfo",
    "bVisible",
    "active",
    "createClubRoomView",
    "ClubOtherView",
    "list",
    "length",
    "removeAllChildren",
    "index",
    "onSceneMsg",
    "popView",
    "btn"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop        = require('BasePop');\r\nvar ToastView      = require('ToastView');\r\nvar MessageFactory = require('MessageFactory');\r\nvar MusicMgr       = require('MusicMgr');\r\nvar Audio_Common     = require('Audio_Common');\r\nvar GamePlayer     = require('GamePlayer');\r\nvar GameSystem = require(\"GameSystem\");\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        ClubAddView     : cc.Prefab,\r\n        ClubCreateView  : cc.Prefab,\r\n        initNode        : cc.Node,\r\n        scrollView      : cc.ScrollView,\r\n        ClubCell        : cc.Prefab,\r\n        ClubJoinView    : cc.Prefab,\r\n        ClubFindPopView : cc.Prefab,\r\n        ClubRoomView    : cc.Prefab,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        GamePlayer.getInstance().SelfClubId = 0;\r\n        GamePlayer.getInstance().CurClubInfo = null;\r\n        GamePlayer.getInstance().CurClubMemList = null;\r\n        this.sendGetClubList();\r\n    },\r\n    \r\n    sendGetClubList : function () {\r\n        MessageFactory.createMessageReq(window.US_REQ_CLUB_LIST_CMD_ID).send();\r\n    },\r\n\r\n    callBackBtn : function (event , CustomEventData) {\r\n        var BtnName = event.target.getName();\r\n        cc.log(\"ClubView.callBackBtn,BtnName = \" + BtnName);\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        if(BtnName == \"BtnClose\")\r\n        {\r\n            this.dismiss();\r\n        }\r\n        else if(BtnName == \"BtnAdd\")\r\n        {\r\n            this.createAddView();\r\n        }\r\n        else if(BtnName == \"BtnNewClub\")\r\n        {\r\n            this.createClubCreateView();\r\n        }\r\n        else if(BtnName == \"BtnAddClub\")\r\n        {\r\n            this.createSearchPop();\r\n        }\r\n    },\r\n\r\n    createSearchPop : function () {\r\n        var ClubFindPopView = cc.instantiate(this.ClubFindPopView);\r\n        this.node.addChild(ClubFindPopView);\r\n        ClubFindPopView.setPosition(cc.p(0,0));\r\n    },\r\n\r\n    createAddView : function () {\r\n\r\n        var ClubAddView = cc.instantiate(this.ClubAddView);\r\n        this.node.addChild(ClubAddView);\r\n        var winSize = cc.director.getWinSize();\r\n        ClubAddView.setPosition(cc.p(0,0));\r\n    },\r\n    \r\n    createClubCreateView : function () {\r\n        var ClubCreateView = cc.instantiate(this.ClubCreateView);\r\n        this.node.addChild(ClubCreateView);\r\n        var winSize = cc.director.getWinSize();\r\n        ClubCreateView.setPosition(cc.p(0,0));\r\n    },\r\n\r\n    onMessage : function (event) {\r\n        cc.log(\"ClubView.onMessage\");\r\n        //this._super(event);\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        switch (cmd) {\r\n            case US_RESP_CREATE_CLUB_CMD_ID:\r\n                this.onCreateClubMsg(msg);\r\n                break;\r\n\r\n            case US_RESP_CLUB_LIST_CMD_ID:\r\n                this.onClubListMsg(msg);\r\n                break;\r\n\r\n            case US_RESP_SEARCH_CLUB_CMD_ID:\r\n                this.onSearchClubMsg(msg);\r\n                break;\r\n\r\n            // case CLUB_REQ_JOIN_CLUB_CMD_ID:\r\n            //     this.onJoinClubMsg(msg);\r\n            //     break;\r\n\r\n            case window.US_RESP_FIND_TABLE_CMD_ID:\r\n                this.onFindRoom(msg);\r\n                break;\r\n\r\n            case window.CLUB_RESP_DISMISS_CLUB_CMD_ID:\r\n                this.onDismissClubMsg(msg);\r\n                break;\r\n\r\n        }\r\n    },\r\n\r\n    onFindRoom : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            this.dismiss();\r\n        }\r\n    },\r\n\r\n    onDismissClubMsg : function (msg)\r\n    {\r\n        cc.log(\"ClubInfoView.onDismissClubMsg msg=\", msg);\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n            if (msg.param.role == window.ClubRole.E_CLUB_OWNER_ROLE) {\r\n                ToastView.show(\"群主\" + msg.param.name + \"解散了\" + msg.param.clubname) + \"俱乐部\";\r\n                this.sendGetClubList();\r\n            } else if (msg.param.uid == GamePlayer.getInstance().uid) { //如果是我自己\r\n                ToastView.show(\"您退出俱乐部\" + msg.param.clubname + \"成功\");\r\n                this.sendGetClubList();\r\n            }\r\n        }\r\n    },\r\n\r\n    onSearchClubMsg : function (msg) {\r\n        if (msg.code  == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            cc.log(\"ClubView.onSearchClubMsg\");\r\n            this.setInitNodeVisible(false);\r\n\r\n            var iCount = this.scrollView.content.getChildrenCount() - (this.initNode == null ? 0 : 1);\r\n            var ClubCell = cc.instantiate(this.ClubCell);\r\n            this.scrollView.content.addChild(ClubCell);\r\n            ClubCell.setPosition(cc.p(0,0 - ClubCell.getContentSize().height*(iCount + 0.5)));\r\n\r\n            var self = this;\r\n            ClubCell.on(cc.Node.EventType.TOUCH_END, function(event){\r\n                cc.log(\"ClubView.onSearchClubMsg TOUCH_END.\");\r\n\r\n                GamePlayer.getInstance().CurClubInfo = event.target.getComponent(\"ClubCell\").info;\r\n\r\n                self.createClubOtherView(event.target.getComponent(\"ClubCell\").info);\r\n            }.bind(this));\r\n\r\n            ClubCell.getComponent(\"ClubCell\").setClubCellInfo(msg.param);\r\n        }\r\n    },\r\n    \r\n    setInitNodeVisible : function (bVisible) {\r\n        if (this.initNode)\r\n        {\r\n            this.initNode.active = bVisible;\r\n            cc.log(\"ClubView initNode=\", bVisible);\r\n        }\r\n    },\r\n\r\n    onCreateClubMsg : function (msg) {\r\n        cc.log(\"ClubView.onCreateClubMsg\");\r\n        if(msg.code  == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            ToastView.show(\"俱乐部创建成功\");\r\n            this.sendGetClubList();\r\n        }\r\n    },\r\n    \r\n    createClubRoomView : function () {\r\n        cc.log(\"ClubView.createClubRoomView\");\r\n        var ClubRoomView = cc.instantiate(this.ClubRoomView);\r\n        this.node.addChild(ClubRoomView);\r\n        ClubRoomView.setPosition(cc.p(0,0));\r\n    },\r\n    \r\n    createClubOtherView : function () {\r\n        cc.log(\"ClubView.createClubOtherView\");\r\n        var ClubOtherView = cc.instantiate(this.ClubJoinView);\r\n        this.node.addChild(ClubOtherView);\r\n        ClubOtherView.setPosition(cc.p(0,0));\r\n    },\r\n\r\n    onClubListMsg : function (msg) {\r\n        if (msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            cc.log(\"ClubView.onClubListMsg length=\", msg.list.length);\r\n            if (msg.list.length == 0) {\r\n                return;\r\n            }\r\n\r\n            this.setInitNodeVisible(false);\r\n            this.scrollView.content.removeAllChildren(true);\r\n            var height = 0;\r\n            for(var index = 0; msg.list != null && index < msg.list.length; index++)\r\n            {\r\n                var ClubCell = cc.instantiate(this.ClubCell);\r\n                this.scrollView.content.addChild(ClubCell);\r\n                ClubCell.setPosition(cc.p(0,0 -\r\n                    ClubCell.getContentSize().height*(index + 0.5)));\r\n                var self = this;\r\n\r\n                ClubCell.on(cc.Node.EventType.TOUCH_END, function(event){\r\n                    GamePlayer.getInstance().CurClubInfo = event.target.getComponent(\"ClubCell\").info;\r\n\r\n                    self.createClubRoomView();\r\n                }.bind(this));\r\n                height = ClubCell.getContentSize().height;\r\n                ClubCell.getComponent(\"ClubCell\").setClubCellInfo(msg.list[index]);\r\n            }\r\n            if ( height * (msg.list.length) > this.scrollView.content.height)\r\n            {\r\n                this.scrollView.content.height = height * (msg.list.length);\r\n            }\r\n        }\r\n    },\r\n\r\n    onSceneMsg : function (event) {\r\n        var msg = event.data;\r\n        if (msg.popView == \"ClubAddView\") {\r\n            if (msg.btn == \"NewClub\") {\r\n                this.createClubCreateView();\r\n            } else if(msg.btn == \"AddClub\") {\r\n                this.createSearchPop();\r\n            }\r\n        } else if (msg.popView == \"ClubRoomView\") {\r\n            if (msg.btn == \"BtnClose\") {\r\n                cc.log(\"ClubView.onSceneMsg ClubRoomView BtnClose.\");\r\n                GamePlayer.getInstance().SelfClubId = 0;\r\n                GamePlayer.getInstance().CurClubInfo = null;\r\n                GamePlayer.getInstance().CurClubMemList = null;\r\n                this.scrollView.content.removeAllChildren(true);\r\n                this.scrollView.content.addChild(this.initNode);\r\n                this.setInitNodeVisible(true);\r\n                this.sendGetClubList();\r\n            }\r\n        } else if (msg.popView == \"ClubJoinView\") {\r\n            if (msg.btn == \"RespJoin\") {\r\n                cc.log(\"ClubView.onSceneMsg ClubJoinView RespJoin\");\r\n                GamePlayer.getInstance().SelfClubId = 0;\r\n                GamePlayer.getInstance().CurClubInfo = null;\r\n                GamePlayer.getInstance().CurClubMemList = null;\r\n                this.scrollView.content.removeAllChildren(true);\r\n                this.scrollView.content.addChild(this.initNode);\r\n                this.setInitNodeVisible(true);\r\n                this.sendGetClubList();\r\n            }\r\n        }\r\n    },\r\n});\r\n"
  ]
}