{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "ToastView",
    "require",
    "LoadingView",
    "curView",
    "tipText",
    "timeoutTag",
    "callClose",
    "callLoadPrefabs",
    "m_tips",
    "m_allowCLose",
    "show",
    "tips",
    "parent",
    "allowClose",
    "cc",
    "log",
    "dismiss",
    "self",
    "undefined",
    "window",
    "loadPrefabs",
    "newNode",
    "updateView",
    "node",
    "on",
    "Node",
    "EventType",
    "TOUCH_START",
    "event",
    "stopPropagation",
    "find",
    "getComponent",
    "Label",
    "setText",
    "showClose",
    "setTimeOut",
    "time",
    "setTimeout",
    "onTimeOut",
    "string",
    "clearTimeout",
    "removeFromParent",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var ToastView = require(\"ToastView\");\r\nvar LoadingView = require('LoadingView');\r\n\r\n\r\nvar LoadingView = {};\r\n\r\nLoadingView.curView = null ;\r\nLoadingView.tipText = null ;\r\nLoadingView.timeoutTag = 0;//超时回调句柄\r\n\r\n//预防未加载完成 调用关闭\r\nLoadingView.callClose = false ;\r\nLoadingView.callLoadPrefabs = false ;\r\nLoadingView.m_tips = \"\" ;\r\nLoadingView.m_allowCLose = false ;\r\n\r\n\r\nLoadingView.show = function (tips,parent, allowClose) {\r\n    cc.log(\"LoadingView.show,tips = \" + tips);\r\n    if(tips == \"\")\r\n    {\r\n        return;\r\n    }\r\n    this.dismiss();\r\n    var self = this ;\r\n    this.m_tips = tips;\r\n    this.m_allowCLose = allowClose === undefined ? false : allowClose ;\r\n\r\n    if(!self.callLoadPrefabs){\r\n        this.callLoadPrefabs = true ;\r\n        window.loadPrefabs(\"prefabs/LoadingView/LoadingView\", function (newNode) {\r\n            self.callLoadPrefabs = false ;\r\n            self.curView = newNode ;\r\n            if(self.callClose){\r\n                self.dismiss() ;\r\n            }else{\r\n                cc.log(\"LoadingView.show,111\");\r\n                self.updateView(newNode,self.m_tips,parent ,self.m_allowCLose);\r\n            }\r\n        },parent);\r\n    }else{\r\n        self.callClose = false ;\r\n    }\r\n}\r\n\r\nLoadingView.updateView = function (node, tips,parent ,allowClose) {\r\n\r\n    cc.log(\"LoadingView.updateView\");\r\n    node.on(cc.Node.EventType.TOUCH_START,function (event) {\r\n        event.stopPropagation() ;\r\n    });\r\n\r\n    this.tipText = cc.find(\"Bg/LabelText\",node).getComponent(cc.Label) ;\r\n    if(tips){\r\n        this.setText(tips);\r\n    }\r\n\r\n    // var clodeBt = cc.find(\"close\",node);\r\n    //\r\n    // var self = this ;\r\n    // clodeBt.on(cc.Node.EventType.TOUCH_START,function () {\r\n    //     self.dismiss() ;\r\n    // });\r\n\r\n    //屏蔽关闭 YUNG ADD\r\n    var showClose = false;//allowClose === undefined? true : false ;\r\n\r\n    //clodeBt.active = showClose;\r\n    //\r\n    // var aniLoading = cc.find(\"ani\",node).getComponent(cc.Animation) ;\r\n    //\r\n    // var animState = aniLoading.play(\"loadingani\");\r\n    // animState.wrapeMode = cc.WrapMode.Loop;\r\n    // animState.repeatCount = Infinity;\r\n}\r\n\r\nLoadingView.setTimeOut = function (time) {\r\n    cc.log(\"LoadingView.setTimeOut,time = \" + time);\r\n    if(time && time >0){\r\n        var self = this ;\r\n        this.timeoutTag = window.setTimeout(\"require('LoadingView').onTimeOut()\",time*1000);\r\n        // this.scheduleOnce(function () {//component组件使用\r\n        //     self.onTimeOut();\r\n        // },time) ;\r\n    }\r\n}\r\n\r\nLoadingView.onTimeOut = function () {\r\n    cc.log(\"LoadingView.onTimeOut\");\r\n    // this.unschedule(this.onTimeOut);\r\n    ToastView.show(\"网络请求超时\");\r\n    this.dismiss();\r\n} ,\r\n\r\nLoadingView.setText = function (tips) {\r\n    cc.log(\"LoadingView.setText,tips = \" + tips);\r\n    if(this.tipText){\r\n        this.tipText.string = tips ;\r\n    }else{\r\n        this.show(tips) ;\r\n    }\r\n},\r\n\r\nLoadingView.dismiss = function () {\r\n    cc.log(\"LoadingView.dismiss\");\r\n    if(this.timeoutTag)\r\n        window.clearTimeout(this.timeoutTag);\r\n    \r\n    if(this.curView){\r\n        this.curView.removeFromParent(true) ;\r\n        this.curView = null ;\r\n        this.tipText = null ;\r\n        this.callClose = false ;\r\n        this.callLoadPrefabs = false ;\r\n        this.m_tips  = \"\" ;\r\n        this.m_allowCLose = false ;\r\n    }else {\r\n        // if( this.callLoadPrefabs){\r\n        //     this.callClose = true ;\r\n        // }\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = LoadingView ;"
  ]
}