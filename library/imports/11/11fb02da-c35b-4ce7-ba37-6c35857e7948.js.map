{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "MessageFactory",
    "MusicMgr",
    "Audio_Common",
    "GamePlayer",
    "ToastView",
    "GameSystem",
    "window",
    "ClubRole",
    "E_CLUB_OWNER_ROLE",
    "E_CLUB_MANAGER_ROLE",
    "E_CLUB_NORMAL_ROLE",
    "cc",
    "Class",
    "extends",
    "properties",
    "TitleLabel",
    "Label",
    "UpgradeLabel",
    "EditName",
    "EditBox",
    "ClubPersonsCell",
    "Prefab",
    "ScrollView",
    "ClubUpgradView",
    "ClubMemberPermissionView",
    "onLoad",
    "_super",
    "showTitle",
    "showMemberList",
    "string",
    "getInstance",
    "CurClubInfo",
    "members",
    "maxmember",
    "uid",
    "owneruid",
    "node",
    "active",
    "list",
    "CurClubMemList",
    "content",
    "removeAllChildren",
    "height",
    "index",
    "length",
    "createClubPersonCell",
    "searchOneMember",
    "name",
    "log",
    "show",
    "instantiate",
    "addChild",
    "getContentSize",
    "setPosition",
    "p",
    "getComponent",
    "setPersonInfo",
    "role",
    "BtnSet",
    "on",
    "Node",
    "EventType",
    "TOUCH_END",
    "event",
    "self",
    "cell",
    "target",
    "getParent",
    "setData",
    "info",
    "bind",
    "onMessage",
    "msg",
    "data",
    "cmd",
    "CLUB_RESP_OWNER_RM_MEMBER_CMD_ID",
    "onDelMemberMsg",
    "CLUB_RESP_GET_MEMBER_LIST_CMD_ID",
    "onGetClubMember",
    "CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID",
    "onModifyMemberRole",
    "onClubRmMem",
    "param",
    "clubname",
    "clubid",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "createMessageReq",
    "CLUB_REQ_GET_MEMBER_LIST_CMD_ID",
    "send",
    "callBackBtn",
    "CustomEventData",
    "BtnName",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "dismiss",
    "message",
    "popView",
    "btn",
    "GlobalEventManager",
    "emitEvent",
    "SocketMessage",
    "tag",
    "MessageType",
    "SCENE_MSG",
    "callBackEditNameBegin",
    "callBackEditNameEnd",
    "onSceneMsg"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar MessageFactory = require('MessageFactory');\r\nvar MusicMgr   = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GamePlayer = require('GamePlayer');\r\nvar ToastView  = require('ToastView');\r\nvar GameSystem = require(\"GameSystem\");\r\n\r\nwindow.ClubRole = {\r\n    E_CLUB_OWNER_ROLE   : 1, //群主\r\n    E_CLUB_MANAGER_ROLE : 2, //管理员\r\n    E_CLUB_NORMAL_ROLE  : 3, //普通成员\r\n};\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        TitleLabel      : cc.Label,\r\n        UpgradeLabel    : cc.Label,\r\n        EditName        : cc.EditBox,\r\n        ClubPersonsCell : cc.Prefab,\r\n        ScrollView      : cc.ScrollView,\r\n        ClubUpgradView  : cc.Prefab,\r\n        ClubMemberPermissionView : cc.Prefab,\r\n    },\r\n\r\n    onLoad: function () {\r\n        this._super();\r\n        this.showTitle();\r\n        this.showMemberList();\r\n    },\r\n\r\n    showTitle : function () {\r\n        this.TitleLabel.string = \"会员管理(\" + GamePlayer.getInstance().CurClubInfo.members + \"/\" +\r\n            GamePlayer.getInstance().CurClubInfo.maxmember + \")\";\r\n        if (GamePlayer.getInstance().uid != GamePlayer.getInstance().CurClubInfo.owneruid) {\r\n            this.UpgradeLabel.node.active = false;\r\n        }\r\n    },\r\n\r\n    showMemberList : function () {\r\n        var list = GamePlayer.getInstance().CurClubMemList;\r\n        this.ScrollView.content.removeAllChildren(true);\r\n        var height = 0;\r\n        for(var index = 0; list != null && index < list.length; index++) {\r\n            height = this.createClubPersonCell(list, index);\r\n        }\r\n\r\n        if ( height * (list.length) > this.ScrollView.content.height)\r\n        {\r\n            this.ScrollView.content.height = height * (list.length);\r\n        }\r\n    },\r\n\r\n    searchOneMember : function (name) {\r\n        var list = GamePlayer.getInstance().CurClubMemList;\r\n\r\n        for(var index = 0; list != null && index < list.length; index++) {\r\n            if (list[index].name != name) {\r\n                cc.log(\"searchOneMember : not found list.name=\", list[index].name);\r\n                continue;\r\n            }\r\n            cc.log(\"searchOneMember : success found name=\", name);\r\n            this.ScrollView.content.removeAllChildren();\r\n            this.createClubPersonCell(list, index);\r\n            return;\r\n        }\r\n\r\n        ToastView.show(\"未搜索到会员: \" + name);\r\n    },\r\n\r\n    createClubPersonCell : function (list, index) {\r\n        var ClubPersonsCell = cc.instantiate(this.ClubPersonsCell);\r\n\r\n        this.ScrollView.content.addChild(ClubPersonsCell);\r\n        var height = ClubPersonsCell.getContentSize().height;\r\n        ClubPersonsCell.setPosition(cc.p(0, 0 - height*(index + 0.5)));\r\n\r\n        ClubPersonsCell.getComponent(\"ClubPersonsCell\").setPersonInfo(list[index]);\r\n\r\n        //不是这个俱乐部的群主没有权限修改会员\r\n        if (GamePlayer.getInstance().CurClubInfo.owneruid != GamePlayer.getInstance().uid) {\r\n            cc.log(\"ClubMemberView.createClubPersonCell not Owner\");\r\n            return height;\r\n        }\r\n\r\n        if (list[index].role == window.ClubRole.E_CLUB_OWNER_ROLE) {\r\n            cc.log(\"ClubMemberView.createClubPersonCell owner role=\", list[index].role);\r\n            return height;\r\n        }\r\n        ClubPersonsCell.getComponent(\"ClubPersonsCell\").BtnSet.node.active = true;\r\n        ClubPersonsCell.getComponent(\"ClubPersonsCell\").BtnSet.node.on(cc.Node.EventType.TOUCH_END, function(event){\r\n            var self = this;\r\n            var cell = event.target.getParent().getComponent('ClubPersonsCell');\r\n            var ClubMemberPermissionView = cc.instantiate(this.ClubMemberPermissionView);\r\n            self.node.addChild(ClubMemberPermissionView);\r\n            ClubMemberPermissionView.setPosition(cc.p(0,0));\r\n            ClubMemberPermissionView.getComponent('ClubMemberPermissionView').setData(cell.info);\r\n        }.bind(this));\r\n        cc.log(\"createClubPersonCell.height = \" + height);\r\n        return height;\r\n\r\n    },\r\n\r\n    ////////////////////////////////////////////////////////////////////\r\n    onMessage : function (event) {\r\n        cc.log(\"ClubMemberView.onMessage\");\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        switch (cmd) {\r\n            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:\r\n                this.onDelMemberMsg(msg);\r\n                break;\r\n\r\n            case window.CLUB_RESP_GET_MEMBER_LIST_CMD_ID:\r\n                this.onGetClubMember(msg);\r\n                break;\r\n\r\n            case window.CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID:\r\n                this.onModifyMemberRole(msg);\r\n                break;\r\n        }\r\n    },\r\n\r\n    onClubRmMem : function (msg) {\r\n        //param\r\n        // ClubId   int    `json:\"clubid\"`\r\n        // ClubName string `json:\"clubname\"`\r\n        // Uid      uint32 `json:\"uid\"`\r\n        // Name     string `json:\"name\"`\r\n        if (msg.param.uid == GamePlayer.getInstance().uid) {\r\n            ToastView.show(\"您被移除俱乐部\" + msg.param.clubname + \"(\" +  msg.param.clubid + \")\");\r\n        } else {\r\n            ToastView.show( msg.param.name + \"被移除俱乐部\" + msg.param.clubname + \"(\" +  msg.param.clubid + \")\");\r\n        }\r\n    },\r\n\r\n    // type CLUB_RESP_OWNER_MODIFY_ROLE_T struct {\r\n    //     JsonHead\r\n    //     RespHead\r\n    //     Param PARAM_RESP_OWNER_MODIFY_ROLE_T `json:\"param\"`\r\n    // }\r\n    //\r\n    // type PARAM_RESP_OWNER_MODIFY_ROLE_T struct {\r\n    //     ClubId int    `json:\"clubid\"`\r\n    //     Uid    uint32 `json:\"uid\"`\r\n    //     Role   uint8  `json:\"role\"`\r\n    // }\r\n    onModifyMemberRole: function (msg) {\r\n        //param : { clubid, uid, role\r\n        //        }\r\n        if (msg.param.clubid != GamePlayer.getInstance().CurClubInfo.clubid) {\r\n            cc.log(\"ClubMemberView.onModifyMemberRole recv clubid=\", msg.param.clubid,\r\n                \" != curClubid=\", GamePlayer.getInstance().CurClubInfo.clubid);\r\n            return;\r\n        }\r\n\r\n        var list = GamePlayer.getInstance().CurClubMemList;\r\n        for(var index = 0; list != null && index < list.length; index++) {\r\n            if (list[index].uid == msg.param.uid) {\r\n                GamePlayer.getInstance().CurClubMemList[index].role = msg.param.role;\r\n            }\r\n        }\r\n        this.showMemberList();\r\n    },\r\n\r\n    onDelMemberMsg : function (msg) {\r\n        cc.log(\"ClubMemberView.onDelMemberMsg\");\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            var data = {\r\n                clubid : GamePlayer.getInstance().CurClubInfo.clubid,\r\n            };\r\n            MessageFactory.createMessageReq(window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID).send(data);\r\n        }\r\n    },\r\n\r\n    onGetClubMember : function (msg) {\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            GamePlayer.getInstance().CurClubMemList = msg.list;\r\n            this.showMemberList();\r\n        }\r\n    },\r\n\r\n    callBackBtn : function (event , CustomEventData) {\r\n        var BtnName = event.target.getName();\r\n\r\n        cc.log('ClubMemberView.callBackBtn, BtnName=' + BtnName);\r\n\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n\r\n        if (BtnName == \"BtnClose\") {\r\n            this.dismiss();\r\n            this.dismiss();\r\n            var message = {\r\n                popView : \"ClubMemberView\",\r\n                btn     : \"BtnClose\",\r\n            };\r\n\r\n            GlobalEventManager.getInstance().emitEvent(window.SocketMessage,\r\n                            {tag:window.MessageType.SCENE_MSG, data:message});\r\n\r\n        } else if(BtnName == \"BtnUpgrade\") {\r\n            var ClubUpgradView = cc.instantiate(this.ClubUpgradView);\r\n            this.node.addChild(ClubUpgradView);\r\n            ClubUpgradView.setPosition(cc.p(0,0));\r\n        } else if (BtnName == \"BtnSearch\") {\r\n            var name = this.EditName.string;\r\n            cc.log(\"ClubMemberView.callBackBtn, name=\", name);\r\n            this.searchOneMember(name);\r\n        }\r\n    },\r\n\r\n    callBackEditNameBegin : function (event, CustomEventData) {\r\n        cc.log(\"ClubMemberView.callBackEditNameBegin\");\r\n        this.EditName.string = \"\";\r\n    },\r\n\r\n    callBackEditNameEnd : function (event, CustomEventData) {\r\n        var name = this.EditName.string;\r\n        cc.log(\"ClubMemberView.callBackEditNameEnd, name=\", name);\r\n        this.searchOneMember(name);\r\n    },\r\n\r\n    onSceneMsg : function (event) {\r\n        var msg = event.data;\r\n        if (msg.popView == \"ClubUpdradeView\") {\r\n            if (msg.btn == \"BtnClose\") {\r\n                this.showTitle();\r\n                this.showMemberList();\r\n            }\r\n        }\r\n    },\r\n\r\n});\r\n"
  ]
}