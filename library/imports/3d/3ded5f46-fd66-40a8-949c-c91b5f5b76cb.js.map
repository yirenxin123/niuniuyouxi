{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "ClubLevelCell",
    "GamePlayer",
    "UtilTool",
    "GameSystem",
    "ToastView",
    "cc",
    "Class",
    "extends",
    "properties",
    "ClubLvFlag",
    "Sprite",
    "ClubLvFlagFrame",
    "SpriteFrame",
    "FontCurLevel",
    "Label",
    "TimeLabel",
    "CurDiamond",
    "clubLevelCell",
    "Prefab",
    "Content",
    "Node",
    "onLoad",
    "_super",
    "start",
    "initBaseData",
    "initCurClubInfo",
    "height",
    "index",
    "getInstance",
    "ClubUpgradeCost",
    "length",
    "levelItem",
    "instantiate",
    "getContentSize",
    "setPosition",
    "p",
    "addChild",
    "getComponent",
    "setCellInfo",
    "string",
    "getClubLevelName",
    "CurClubInfo",
    "level",
    "spriteFrame",
    "getFormatData",
    "endtime",
    "diamond",
    "onMessage",
    "event",
    "msg",
    "data",
    "cmd",
    "log",
    "window",
    "CLUB_RESP_MODIFY_INFO_CMD_ID",
    "onModifyInfoMsg",
    "US_RESP_USER_DETAIL_CMD_ID",
    "updateUserDiamond",
    "gold",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "param",
    "Number",
    "info",
    "getCurLevelInfo",
    "maxmember",
    "maxpeople",
    "show",
    "getFormatDataDetail",
    "getUserDetail",
    "desc",
    "list",
    "i"
  ],
  "mappings": ";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,gBAAgBD,QAAQ,eAAR,CAApB;AACA,IAAIE,aAAaF,QAAQ,YAAR,CAAjB;AACA,IAAIG,WAAWH,QAAQ,UAAR,CAAf;AACA,IAAII,aAAaJ,QAAQ,YAAR,CAAjB;AACA,IAAIK,YAAYL,QAAQ,WAAR,CAAhB;;AAEAM,GAAGC,KAAH,CAAS;AACLC,aAAST,OADJ;;AAGLU,gBAAY;AACRC,oBAAaJ,GAAGK,MADR;AAERC,yBAAkB,CAACN,GAAGO,WAAJ,CAFV;AAGRC,sBAAeR,GAAGS,KAHV;AAIRC,mBAAYV,GAAGS,KAJP;AAKRE,oBAAaX,GAAGS,KALR;;AAORG,uBAAgBZ,GAAGa,MAPX;AAQRC,iBAAUd,GAAGe;AARL,KAHP;;AAcL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,MAAL;AACA;AACH,KAlBI;;AAoBLC,WAAQ,iBAAY;AAChB,aAAKC,YAAL;AACH,KAtBI;;AAwBL;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACAA,kBAAe,wBAAY;;AAEvB,aAAKC,eAAL;AACA,YAAIC,SAAS,CAAb;AACA,aAAI,IAAIC,QAAQ,CAAhB,EAAkBA,QAAQxB,WAAWyB,WAAX,GAAyBC,eAAzB,CAAyCC,MAAnE,EAA0EH,OAA1E,EACA;AACI,gBAAII,YAAY1B,GAAG2B,WAAH,CAAe,KAAKf,aAApB,CAAhB;AACAS,qBAASK,UAAUE,cAAV,GAA2BP,MAApC;AACAK,sBAAUG,WAAV,CAAsB7B,GAAG8B,CAAH,CAAK,CAAL,EAAO,IAAI,GAAJ,GAAUT,SAAOC,KAAxB,CAAtB;AACA,iBAAKR,OAAL,CAAaiB,QAAb,CAAsBL,SAAtB;AACAA,sBAAUM,YAAV,CAAuB,eAAvB,EAAwCC,WAAxC,CAAoDnC,WAAWyB,WAAX,GAAyBC,eAAzB,CAAyCF,KAAzC,CAApD;AACH;AACJ,KA9CI;;AAgDLF,qBAAkB,2BAAY;AAC1B,aAAKZ,YAAL,CAAkB0B,MAAlB,GAA2BrC,SAASsC,gBAAT,CAA0BvC,WAAW2B,WAAX,GAAyBa,WAAzB,CAAqCC,KAA/D,CAA3B;AACA,aAAKjC,UAAL,CAAgBkC,WAAhB,GAA8B,KAAKhC,eAAL,CAAqBV,WAAW2B,WAAX,GAAyBa,WAAzB,CAAqCC,KAArC,GAA6C,CAAlE,CAA9B;AACA,aAAK3B,SAAL,CAAewB,MAAf,GAAwBrC,SAAS0C,aAAT,CAAuB3C,WAAW2B,WAAX,GAAyBa,WAAzB,CAAqCI,OAA5D,CAAxB;AACA,aAAK7B,UAAL,CAAgBuB,MAAhB,GAAyBtC,WAAW2B,WAAX,GAAyBkB,OAAlD;AACH,KArDI;;AAuDLC,eAAY,mBAAUC,KAAV,EAAiB;AACzB,YAAIC,MAAMD,MAAME,IAAhB;AACA,YAAIC,MAAMF,IAAIE,GAAd;AACA9C,WAAG+C,GAAH,CAAO,8BAAP,EAAuCH,IAAIE,GAA3C,EAAgD,uCAAhD,EAAyFE,OAAOC,4BAAhG;AACA,gBAAQH,GAAR;AACI,iBAAKE,OAAOC,4BAAZ;AACI,qBAAKC,eAAL,CAAqBN,GAArB;AACA;;AAEJ,iBAAKI,OAAOG,0BAAZ;AACI,qBAAKC,iBAAL,CAAuBR,GAAvB;AACA;AAPR;AASH,KApEI;;AAsELQ,uBAAmB,2BAAUR,GAAV,EAAe;AAC9B5C,WAAG+C,GAAH,CAAO,iCAAP;AACAnD,mBAAW2B,WAAX,GAAyB8B,IAAzB,GAAmCT,IAAIS,IAAvC;AACAzD,mBAAW2B,WAAX,GAAyBkB,OAAzB,GAAmCG,IAAIH,OAAvC;AACA,aAAKrB,eAAL;AACH,KA3EI;;AA6EL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA8B,qBAAkB,yBAAUN,GAAV,EAAe;AAC7B,YAAIA,IAAIU,IAAJ,IAAYC,cAAcC,WAA9B,EAA4C;AACxCxD,eAAG+C,GAAH,CAAO,qCAAP,EAA8CH,IAAIU,IAAlD,EAAwD,WAAxD,EAAqEV,IAAIa,KAAJ,CAAUjB,OAA/E;AACA5C,uBAAW2B,WAAX,GAAyBa,WAAzB,CAAqCC,KAArC,GAAiDqB,OAAOd,IAAIa,KAAJ,CAAUpB,KAAjB,CAAjD;AACAzC,uBAAW2B,WAAX,GAAyBa,WAAzB,CAAqCI,OAArC,GAAiDI,IAAIa,KAAJ,CAAUjB,OAA3D;AACA,gBAAImB,OAAO,KAAKC,eAAL,CAAqBhB,IAAIa,KAAJ,CAAUpB,KAA/B,CAAX;AACArC,eAAG+C,GAAH,CAAO,sCAAP,EAA+CY,IAA/C;;AAEA/D,uBAAW2B,WAAX,GAAyBa,WAAzB,CAAqCyB,SAArC,GAAiDF,KAAKG,SAAtD;;AAEA/D,sBAAUgE,IAAV,CAAe,WAAWlE,SAASmE,mBAAT,CAA6BpE,WAAW2B,WAAX,GAAyBa,WAAzB,CAAqCI,OAAlE,CAAX,GAAwF,IAAvG,EAA6G,CAA7G;AACA,iBAAKyB,aAAL;AACA,iBAAK7C,eAAL;AAEH,SAbD,MAaO;AACHrB,sBAAUgE,IAAV,CAAenB,IAAIsB,IAAnB;AACH;AACJ,KAtGI;;AAwGLN,qBAAkB,yBAAUvB,KAAV,EAAiB;AAC/B,YAAI8B,OAAOrE,WAAWyB,WAAX,GAAyBC,eAApC;AACA,aAAK,IAAI4C,IAAI,CAAb,EAAgBA,IAAID,KAAK1C,MAAzB,EAAiC2C,GAAjC,EAAsC;AAClC,gBAAI/B,SAAS8B,KAAKC,CAAL,EAAQ/B,KAArB,EAA4B;AACxB,uBAAO8B,KAAKC,CAAL,CAAP;AACH;AACJ;AACD,eAAOD,KAAK,CAAL,CAAP;AACH;;AAhHI,CAAT",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar ClubLevelCell = require('ClubLevelCell');\r\nvar GamePlayer = require('GamePlayer');\r\nvar UtilTool = require('UtilTool');\r\nvar GameSystem = require('GameSystem');\r\nvar ToastView = require('ToastView');\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        ClubLvFlag : cc.Sprite,\r\n        ClubLvFlagFrame : [cc.SpriteFrame],\r\n        FontCurLevel : cc.Label,\r\n        TimeLabel : cc.Label,\r\n        CurDiamond : cc.Label,\r\n\r\n        clubLevelCell : cc.Prefab,\r\n        Content : cc.Node,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        //this.initBaseData();\r\n    },\r\n    \r\n    start : function () {\r\n        this.initBaseData();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n\r\n\r\n    // {\"level\":1,\"livetime\":30,\"diamond\":0,    \"maxpeople\":10, \"maxtable\":2},\r\n    // {\"level\":2,\"livetime\":30,\"diamond\":1000, \"maxpeople\":50, \"maxtable\":3},\r\n    // {\"level\":3,\"livetime\":30,\"diamond\":4000, \"maxpeople\":100,\"maxtable\":4},\r\n    // {\"level\":4,\"livetime\":30,\"diamond\":10000,\"maxpeople\":200,\"maxtable\":9}\r\n    initBaseData : function () {\r\n\r\n        this.initCurClubInfo();\r\n        var height = 0;\r\n        for(var index = 0;index < GameSystem.getInstance().ClubUpgradeCost.length;index++)\r\n        {\r\n            var levelItem = cc.instantiate(this.clubLevelCell);\r\n            height = levelItem.getContentSize().height;\r\n            levelItem.setPosition(cc.p(0,0 - 620 - height*index));\r\n            this.Content.addChild(levelItem);\r\n            levelItem.getComponent('ClubLevelCell').setCellInfo(GameSystem.getInstance().ClubUpgradeCost[index]);\r\n        }\r\n    },\r\n    \r\n    initCurClubInfo : function () {\r\n        this.FontCurLevel.string = UtilTool.getClubLevelName(GamePlayer.getInstance().CurClubInfo.level);\r\n        this.ClubLvFlag.spriteFrame = this.ClubLvFlagFrame[GamePlayer.getInstance().CurClubInfo.level - 1];\r\n        this.TimeLabel.string = UtilTool.getFormatData(GamePlayer.getInstance().CurClubInfo.endtime);\r\n        this.CurDiamond.string = GamePlayer.getInstance().diamond;\r\n    },\r\n\r\n    onMessage : function (event) {\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        cc.log(\"ClubLevelCell.onMessage cmd=\", msg.cmd, \" window.CLUB_RESP_MODIFY_INFO_CMD_ID=\", window.CLUB_RESP_MODIFY_INFO_CMD_ID);\r\n        switch (cmd) {\r\n            case window.CLUB_RESP_MODIFY_INFO_CMD_ID:\r\n                this.onModifyInfoMsg(msg);\r\n                break;\r\n\r\n            case window.US_RESP_USER_DETAIL_CMD_ID:\r\n                this.updateUserDiamond(msg);\r\n                break;\r\n        }\r\n    },\r\n\r\n    updateUserDiamond: function (msg) {\r\n        cc.log(\"ClubLevelCell.updateUserDiamond\");\r\n        GamePlayer.getInstance().gold    = msg.gold;\r\n        GamePlayer.getInstance().diamond = msg.diamond;\r\n        this.initCurClubInfo();\r\n    },\r\n\r\n    // ClubId  int    `json:\"clubid\"`\r\n    // Status  int    `json:\"status\"`\r\n    // Name    string `json:\"name\"`\r\n    // HeadUrl string `json:\"headurl\"`\r\n    // Address string `json:\"address\"`\r\n    // Intro   string `json:\"intro\"`\r\n    // Level   int    `json:\"level\"`\r\n    // EndTime int64  `json:\"endtime\"`\r\n    onModifyInfoMsg : function (msg) {\r\n        if (msg.code == SocketRetCode.RET_SUCCESS ) {\r\n            cc.log(\"ClubLevelCell.onModifyInfoMsg code=\", msg.code, \" endtime=\", msg.param.endtime);\r\n            GamePlayer.getInstance().CurClubInfo.level     = Number(msg.param.level);\r\n            GamePlayer.getInstance().CurClubInfo.endtime   = msg.param.endtime;\r\n            var info = this.getCurLevelInfo(msg.param.level);\r\n            cc.log(\"ClubLevelCell.onModifyInfoMsg  info=\", info);\r\n\r\n            GamePlayer.getInstance().CurClubInfo.maxmember = info.maxpeople;\r\n\r\n            ToastView.show(\"升级成功: \" + UtilTool.getFormatDataDetail(GamePlayer.getInstance().CurClubInfo.endtime) + \"到期\", 2);\r\n            this.getUserDetail();\r\n            this.initCurClubInfo();\r\n\r\n        } else {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    getCurLevelInfo : function (level) {\r\n        var list = GameSystem.getInstance().ClubUpgradeCost;\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (level == list[i].level) {\r\n                return list[i];\r\n            }\r\n        }\r\n        return list[0];\r\n    },\r\n\r\n});\r\n"
  ]
}