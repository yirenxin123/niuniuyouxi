{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "MessageFactory",
    "MusicMgr",
    "Audio_Common",
    "GameSystem",
    "cc",
    "Class",
    "extends",
    "properties",
    "SuccessCell",
    "Prefab",
    "scrollView",
    "ScrollView",
    "RoomInfoView",
    "onLoad",
    "_super",
    "data",
    "iscreate",
    "start",
    "total",
    "createMessageReq",
    "window",
    "US_REQ_SCORE_LIST_CMD_ID",
    "send",
    "onMessage",
    "event",
    "log",
    "msg",
    "cmd",
    "US_RESP_SCORE_LIST_CMD_ID",
    "onScoreListMsg",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "cellHeight",
    "index",
    "list",
    "length",
    "instantiate",
    "content",
    "addChild",
    "getContentSize",
    "height",
    "setPosition",
    "p",
    "getComponent",
    "setCellInfo",
    "self",
    "on",
    "Node",
    "EventType",
    "TOUCH_END",
    "createSuccessCellView",
    "target",
    "bind",
    "childCount",
    "getChildrenCount",
    "director",
    "getScene",
    "winSize",
    "getWinSize",
    "width",
    "sendGetSuccessDetail",
    "callbackBtn",
    "CustomEventData",
    "btnName",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "dismiss",
    "callbackToggle",
    "toggle",
    "removeAllChildren",
    "Number"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar MessageFactory = require('MessageFactory');\r\nvar MusicMgr = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GameSystem = require(\"GameSystem\");\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        SuccessCell  : cc.Prefab,\r\n        scrollView   : cc.ScrollView,\r\n        RoomInfoView : cc.Prefab,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        var data = {\r\n            iscreate : 0,\r\n            start : 0,\r\n            total : 50,\r\n        };\r\n        MessageFactory.createMessageReq(window.US_REQ_SCORE_LIST_CMD_ID).send(data);\r\n    },\r\n\r\n    /*********************Network***************************/\r\n    onMessage : function (event) {\r\n        cc.log(\"SuccessView.onMessage\");\r\n        //this._super(event);\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        switch (cmd) {\r\n            case US_RESP_SCORE_LIST_CMD_ID:\r\n                this.onScoreListMsg(msg);\r\n                break;\r\n        }\r\n    },\r\n\r\n    onScoreListMsg : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            let cellHeight = 0;\r\n            for (var index = 0; msg.list != null && index < msg.list.length; index++)\r\n            {\r\n                var SuccessCell = cc.instantiate(this.SuccessCell);\r\n                this.scrollView.content.addChild(SuccessCell);\r\n\r\n                cellHeight = SuccessCell.getContentSize().height;\r\n\r\n                SuccessCell.setPosition(cc.p(0,0 - SuccessCell.getContentSize().height*(index + 0.5)));\r\n                SuccessCell.getComponent(\"SuccessCell\").setCellInfo(msg.list[index]);\r\n\r\n                var self = this;\r\n                SuccessCell.on(cc.Node.EventType.TOUCH_END, function(event){\r\n                    self.createSuccessCellView(event.target.getComponent(\"SuccessCell\").msg);\r\n                }.bind(this));\r\n            }\r\n\r\n            let childCount = this.scrollView.content.getChildrenCount() + 1;\r\n            if (cellHeight * childCount > this.scrollView.content.height) {\r\n                this.scrollView.content.height = cellHeight * childCount;\r\n            }\r\n        }\r\n    },\r\n\r\n    createSuccessCellView : function (msg) {\r\n        var RoomInfoView = cc.instantiate(this.RoomInfoView);\r\n        cc.director.getScene().addChild(RoomInfoView);\r\n        var winSize = cc.director.getWinSize();\r\n        RoomInfoView.setPosition(cc.p(winSize.width/2,winSize.height/2));\r\n        RoomInfoView.getComponent('RoomInfoView').sendGetSuccessDetail(msg);\r\n    },\r\n    \r\n    \r\n    callbackBtn : function(event,CustomEventData)\r\n    {\r\n        var btnName = event.target.getName();\r\n        cc.log(\"SuccessView.callbackBtn,btnName = \" + btnName);\r\n        var winSize = cc.director.getWinSize();\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        if(btnName == \"BtnClose\")\r\n        {\r\n            this.dismiss();\r\n        }\r\n    },\r\n    \r\n    callbackToggle : function (toggle,CustomEventData) {\r\n    \tMusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        this.scrollView.content.removeAllChildren(true);\r\n        var data = {\r\n            iscreate : Number(CustomEventData),\r\n            start : 0,\r\n            total : 20,\r\n        };\r\n        MessageFactory.createMessageReq(window.US_REQ_SCORE_LIST_CMD_ID).send(data);\r\n    },\r\n});\r\n"
  ]
}