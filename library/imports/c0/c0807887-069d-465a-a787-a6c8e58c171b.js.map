{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "UtilTool",
    "require",
    "ToastView",
    "AlertView",
    "LoadingView",
    "MessageFactory",
    "MusicMgr",
    "Audio_Common",
    "GameSystem",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "Head",
    "Sprite",
    "RoomName",
    "Label",
    "PrivateCode",
    "CreatorName",
    "MinBet",
    "timeLabel",
    "bankerMode",
    "ClubFlag",
    "onLoad",
    "initBaseData",
    "roomInfo",
    "time",
    "updateTime",
    "string",
    "getTime",
    "unschedule",
    "strLength",
    "str",
    "l",
    "length",
    "blen",
    "i",
    "charCodeAt",
    "subName",
    "name",
    "len",
    "substr",
    "updateRoomInfo",
    "cellMsg",
    "log",
    "tablename",
    "ownername",
    "privateid",
    "minante",
    "remaintime",
    "starttime",
    "schedule",
    "UpdateWXHeadIcon",
    "headurl",
    "gametype",
    "Number",
    "clubid",
    "node",
    "active",
    "callBackBtn",
    "event",
    "CustomEventData",
    "btnName",
    "target",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "show",
    "self",
    "alertExit",
    "create",
    "setPositiveButton",
    "enterRoom",
    "showOne",
    "AlertViewBtnType",
    "E_BTN_CLOSE",
    "callBackGameMode",
    "message",
    "popView",
    "btn",
    "GlobalEventManager",
    "getInstance",
    "emitEvent",
    "window",
    "SocketMessage",
    "tag",
    "MessageType",
    "SCENE_MSG",
    "data",
    "findRoomReq",
    "createMessageReq",
    "US_REQ_FIND_TABLE_CMD_ID",
    "send"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var UtilTool = require('UtilTool');\r\nvar ToastView = require('ToastView');\r\nvar AlertView = require('AlertView');\r\nvar LoadingView = require('LoadingView');\r\nvar MessageFactory = require('MessageFactory');\r\nvar MusicMgr = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GameSystem = require(\"GameSystem\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Head : cc.Sprite,\r\n        RoomName : cc.Label,\r\n        PrivateCode: cc.Label,\r\n        CreatorName : cc.Label,\r\n        MinBet : cc.Label,\r\n        timeLabel : cc.Label,\r\n        bankerMode : cc.Label,\r\n        ClubFlag : cc.Sprite,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.initBaseData();\r\n    },\r\n\r\n    initBaseData : function () {\r\n        this.roomInfo = null;\r\n        this.time = 0;\r\n    },\r\n    \r\n    //\"list\":[\r\n    // {\"ownername\":\"游客10688\",\"tablename\":\"游客10688\",\"headurl\":\"\",\r\n    // \"minante\":1,\"remaintime\":1800,\"gametype\":1,\"gameid\":101,\"gamesvcid\":5,\"tableid\":0},\r\n    // {\"ownername\":\"游客10688\",\"tablename\":\"游客10688\",\"headurl\":\"\",\"minante\":1,\"remaintime\":1800,\r\n    // \"gametype\":1,\"gameid\":101,\"gamesvcid\":5,\"tableid\":0}]}\r\n\r\n    //called every frame, uncomment this function to activate update callback\r\n    updateTime: function () {\r\n        this.time--;\r\n        this.timeLabel.string = UtilTool.getTime(this.time);\r\n        if(this.time < 0)\r\n        {\r\n            this.timeLabel.string = \"已结束\";\r\n            this.unschedule(this.updateTime);\r\n        }\r\n    },\r\n\r\n    strLength: function (str) {\r\n        var l = str.length;\r\n        var blen = 0;\r\n        for(var i=0; i<l; i++) {\r\n            if ((str.charCodeAt(i) & 0xff00) != 0) {\r\n                blen ++;\r\n            }\r\n            blen ++;\r\n        }\r\n        return blen;\r\n    },\r\n\r\n    subName : function (name) {\r\n        var len = this.strLength(name);\r\n        if (len > 8) {\r\n           name = name.substr(0,8);\r\n           name += \"..\";\r\n        }\r\n        return name;\r\n    },\r\n\r\n    updateRoomInfo : function (cellMsg) {\r\n        this.roomInfo = cellMsg;\r\n\r\n        cc.log(\"GamblingHouseCell.updateRoomInfo,cellMsg = \" + cellMsg);\r\n        this.RoomName.string    = this.subName(cellMsg.tablename);\r\n        cc.log(\"GamblingHouseCell.updateRoomInfo name=\", this.subName(cellMsg.tablename));\r\n\r\n\r\n        this.CreatorName.string = cellMsg.ownername;\r\n        this.PrivateCode.string = cellMsg.privateid;\r\n        this.MinBet.string      = cellMsg.minante;\r\n        this.time               = cellMsg.remaintime;\r\n        this.timeLabel.string   = UtilTool.getTime(cellMsg.remaintime);\r\n\r\n        if (cellMsg.starttime > 0 ) {\r\n            this.schedule(this.updateTime, 1);\r\n        }\r\n        this.MinBet.string = cellMsg.minante;\r\n        this.time = cellMsg.remaintime;\r\n        this.timeLabel.string = UtilTool.getTime(cellMsg.remaintime);\r\n        UpdateWXHeadIcon(cellMsg.headurl,this.Head);\r\n\r\n        if(cellMsg.gametype == 1)\r\n        {\r\n            this.bankerMode.string = \"闭牌抢庄\";\r\n        }\r\n        else\r\n        {\r\n            this.bankerMode.string = \"三张抢庄\";\r\n        }\r\n\r\n        if (Number(cellMsg.clubid) > 0 ) {\r\n            this.ClubFlag.node.active = true\r\n        } else {\r\n            this.ClubFlag.node.active = false\r\n        }\r\n    },\r\n    \r\n    callBackBtn : function (event,CustomEventData) {\r\n        cc.log(\"GamblingHouseCell.callbackBtn,CustomEventData = \" + CustomEventData);\r\n        var btnName = event.target.getName();\r\n        cc.log(\"GamblingHouseCell.callbackBtn,btnName = \" + btnName);\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        if (btnName == \"GamblingHouseCell\")\r\n        {\r\n            //{\"ownername\":\"游客10688\",\"tablename\":\"游客10688\",\"headurl\":\"\",\"minante\":1,\"remaintime\":144,\r\n            // \"gametype\":1,\"gameid\":101,\"gamesvcid\":5,\"tableid\":0}]\r\n\r\n            if (this.time < 0)\r\n            {\r\n                ToastView.show(\"游戏已结束\");\r\n            }\r\n            else\r\n            {\r\n                var self = this;\r\n                var alertExit = AlertView.create();\r\n                alertExit.setPositiveButton(function () {\r\n                    self.enterRoom();\r\n                });\r\n                alertExit.showOne(\"是否进入游戏？\", AlertViewBtnType.E_BTN_CLOSE);\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    callBackGameMode : function (event, CustomEventData) {\r\n        cc.log(\"GamblingHouseCell.callBackGameMode, btnName = \" + event.target.getName());\r\n        cc.log(\"GamblingHouseCell.callBackGameMode, CustomEventData = \" + CustomEventData);\r\n        if (Number(CustomEventData) == 1) {\r\n            var message = {\r\n                popView: \"GamblingHouseCell\",\r\n                btn: \"winxinShared\"\r\n            };\r\n            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });\r\n        }\r\n    },\r\n\r\n    enterRoom : function () {\r\n        var message = {\r\n            popView: \"GamblingHouseCell\",\r\n            btn: \"enterRoom\"\r\n        };\r\n        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });\r\n\r\n        LoadingView.show(\"正在进入...\");\r\n\r\n        var findRoomReq = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);\r\n        var data = {\r\n            privateid : this.roomInfo.privateid,\r\n        };\r\n\r\n        if (findRoomReq) {\r\n            findRoomReq.send(data);\r\n        }\r\n    },\r\n});\r\n"
  ]
}