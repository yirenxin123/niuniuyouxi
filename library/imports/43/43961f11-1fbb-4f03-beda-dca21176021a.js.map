{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "GamePlayer",
    "MessageFactory",
    "ToastView",
    "MusicMgr",
    "Audio_Common",
    "GameSystem",
    "cc",
    "Class",
    "extends",
    "properties",
    "m_iMinCarry",
    "m_iMaxCarry",
    "CurCoin",
    "Label",
    "MyGold",
    "CarryRange",
    "TotalCoin",
    "curCarry",
    "EditBox",
    "m_iTimeOut",
    "TimeLabel",
    "onLoad",
    "setMinAndMax",
    "min",
    "max",
    "total",
    "log",
    "m_iMinGold",
    "m_iMaxGold",
    "string",
    "getInstance",
    "TotalCarry",
    "gold",
    "callbackBtn",
    "event",
    "CustomEventData",
    "btnName",
    "target",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "dismiss",
    "coin",
    "parseInt",
    "show",
    "data",
    "createMessageReq",
    "window",
    "US_REQ_CARRY_COIN_CMD_ID",
    "send",
    "setCarryTime",
    "time",
    "node",
    "runAction",
    "sequence",
    "delayTime",
    "removeSelf",
    "schedule",
    "updateTimeOut",
    "unschedule"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar GamePlayer = require('GamePlayer');\r\nvar MessageFactory = require('MessageFactory');\r\nvar ToastView = require('ToastView');\r\nvar MusicMgr = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GameSystem = require(\"GameSystem\");\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        m_iMinCarry : 100,\r\n        m_iMaxCarry : 1000,\r\n        CurCoin     : cc.Label,  //已经带入\r\n        MyGold      : cc.Label,  //身上金币\r\n        CarryRange  : cc.Label,  //最高带入\r\n        TotalCoin    : cc.Label,  //总带入上线\r\n        curCarry    : cc.EditBox,\r\n\r\n        m_iTimeOut  : 0,\r\n        TimeLabel   : cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n    },\r\n\r\n    setMinAndMax : function (min, max, total) {\r\n        cc.log(\"Bullfight_CarryView.setMinAndMax,min = \" + min + \",max = \" + max, \" total=\", total);\r\n        this.m_iMinGold        = min;\r\n        this.m_iMaxGold        = max;\r\n        this.TotalCoin.string  = total;\r\n        this.CurCoin.string    = GamePlayer.getInstance().TotalCarry;\r\n        this.MyGold.string     = GamePlayer.getInstance().gold;\r\n        this.CarryRange.string = \"(\" + min + \"~\" + max + \")\";\r\n    },\r\n\r\n    callbackBtn : function (event , CustomEventData) {\r\n        var btnName = event.target.getName();\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        \r\n        cc.log(\"Bullfight_CarryView.callbackBtn,btnName = \" + btnName);\r\n        if(btnName == \"BtnClose\")\r\n        {\r\n            this.dismiss();\r\n        }\r\n        else if(btnName == \"BtnSure\")\r\n        {\r\n            var coin = parseInt(this.curCarry.string);\r\n            if (coin < this.m_iMinGold)\r\n            {\r\n                ToastView.show(\"您携带的牛友币不能小于\" + this.m_iMinGold);\r\n                return;\r\n            }\r\n            if (coin > this.m_iMaxGold)\r\n            {\r\n                ToastView.show(\"您携带的牛友币不能大于\" + this.m_iMaxGold);\r\n                return;\r\n            }\r\n            if (coin > GamePlayer.getInstance().gold) {\r\n                ToastView.show(\"您拥有的牛友币不足，请前往商城购买\");\r\n                return;\r\n            }\r\n            var data = {\r\n                coin : parseInt(this.curCarry.string),\r\n            };\r\n            MessageFactory.createMessageReq(window.US_REQ_CARRY_COIN_CMD_ID).send(data);\r\n\r\n            this.dismiss();\r\n        }\r\n    },\r\n\r\n    setCarryTime : function (time) {\r\n        this.m_iTimeOut = time;\r\n        this.node.runAction(cc.sequence(cc.delayTime(time),cc.removeSelf()));\r\n        this.schedule(this.updateTimeOut,1.0);\r\n    },\r\n\r\n    updateTimeOut : function () {\r\n\r\n        this.m_iTimeOut-- ;\r\n        if(this.m_iTimeOut < 0)\r\n        {\r\n            this.unschedule(this.updateTimeOut);\r\n            this.dismiss();\r\n        }\r\n        this.TimeLabel.string = this.m_iTimeOut + \"s\";\r\n    },\r\n});\r\n"
  ]
}