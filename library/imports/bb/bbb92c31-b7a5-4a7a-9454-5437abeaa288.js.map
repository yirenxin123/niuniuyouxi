{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "MessageFactory",
    "require",
    "MusicMgr",
    "Audio_Comm",
    "GamePlayer",
    "GameSystem",
    "Bullfight_AudioConfig",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "seatFlag",
    "seatId",
    "userHead",
    "Sprite",
    "userNick",
    "Label",
    "userGold",
    "winScoreBg",
    "winScore",
    "bankerFlag",
    "bankerLight",
    "TimeBar",
    "ProgressBar",
    "win_animation",
    "UserInfoView",
    "Prefab",
    "YouWin",
    "DefaultHead",
    "SpriteFrame",
    "onLoad",
    "initBaseData",
    "BankerFlagPos",
    "node",
    "getPosition",
    "winScoreBgPos",
    "setUserHead",
    "Spriteframe",
    "spriteFrame",
    "setUserNick",
    "nick",
    "string",
    "setUserGold",
    "gold",
    "color",
    "Color",
    "WHITE",
    "setUserWaitCarry",
    "setUserWinScore",
    "score",
    "active",
    "getComponent",
    "Animation",
    "play",
    "clearUserWinScore",
    "getSeatIdByViewId",
    "viewId",
    "selfViewId",
    "window",
    "BULLFIGHT_MAX_PLAYER",
    "getInstance",
    "seatid",
    "log",
    "callbackBtn",
    "event",
    "CustomEventData",
    "btnName",
    "target",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "data",
    "status",
    "createMessageReq",
    "US_REQ_SIT_DOWN_CMD_ID",
    "send",
    "AUDIO_SIT",
    "instantiate",
    "director",
    "getScene",
    "addChild",
    "setPosition",
    "p",
    "getVisibleSize",
    "width",
    "height",
    "setPlayerInfo",
    "player",
    "setPlayerBanker",
    "clearPlayerBanker",
    "clearPlayerInfo",
    "updatePlayerInfo",
    "name",
    "coin",
    "UpdateWXHeadIcon",
    "headurl",
    "getPointByAngle",
    "startpoint",
    "angle",
    "radius",
    "x",
    "Math",
    "sin",
    "y",
    "cos"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var MessageFactory = require(\"MessageFactory\");\r\nvar MusicMgr = require('MusicMgr');\r\nvar Audio_Comm = require('Audio_Common');\r\nvar GamePlayer = require('GamePlayer');\r\nvar GameSystem = require(\"GameSystem\");\r\nvar Bullfight_AudioConfig = require('Bullfight_AudioConfig');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        seatFlag : 0,    //0:没有玩家坐下，1:已经有玩家坐下\r\n        seatId : 0,\r\n        userHead : cc.Sprite,\r\n        userNick : cc.Label,\r\n        userGold : cc.Label,\r\n        winScoreBg : cc.Sprite,\r\n        winScore : cc.Label,\r\n        bankerFlag : cc.Sprite,\r\n        bankerLight : cc.Sprite,\r\n        TimeBar : cc.ProgressBar,\r\n        win_animation : cc.Sprite,\r\n        UserInfoView : cc.Prefab,\r\n        YouWin : cc.Sprite,\r\n        DefaultHead : cc.SpriteFrame,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.initBaseData();\r\n    },\r\n    \r\n    initBaseData : function () {\r\n        this.BankerFlagPos = this.bankerFlag.node.getPosition();\r\n        this.winScoreBgPos = this.bankerFlag.node.getPosition();\r\n        //this.player = null;\r\n    },\r\n    \r\n    setUserHead : function (Spriteframe) {\r\n        //cc.log('Bullfight_PlayerItem.setUserHead')\r\n        this.userHead.spriteFrame = Spriteframe;\r\n    },\r\n\r\n    setUserNick : function (nick) {\r\n        //cc.log('Bullfight_PlayerItem.setUserHead, nick = ' + nick);\r\n        this.userNick.string = nick;\r\n    },\r\n\r\n    setUserGold : function (gold) {\r\n        //cc.log('Bullfight_PlayerItem.setUserGold, gold = ' + gold);\r\n        this.userGold.string     = gold;\r\n        this.userGold.node.color = cc.Color.WHITE;\r\n    },\r\n    \r\n    setUserWaitCarry : function () {\r\n        this.userGold.string     = \"携带中..\";\r\n        this.userGold.node.color = new cc.Color(204, 160, 41, 255);\r\n    },\r\n\r\n    setUserWinScore : function (score) {\r\n        this.winScore.string = score;\r\n        this.winScoreBg.node.active = true;\r\n        this.winScoreBg.getComponent(cc.Animation).play(\"WinScoreAni\");\r\n    },\r\n\r\n    clearUserWinScore : function () {\r\n        //cc.log(\"Bullfight_PlayerItem.clearUserWinScore\");\r\n        this.winScoreBg.node.active = false;\r\n    },\r\n\r\n    getSeatIdByViewId : function(viewId) {\r\n        let selfViewId = window.BULLFIGHT_MAX_PLAYER - 1;\r\n        let seatId     = viewId;\r\n\r\n        if (GamePlayer.getInstance().seatid  >= 0) {\r\n            seatId =  ((viewId -selfViewId) + GamePlayer.getInstance().seatid + window.BULLFIGHT_MAX_PLAYER)%window.BULLFIGHT_MAX_PLAYER\r\n        }\r\n        cc.log(\"********getSeatIdByViewId viewId=\", viewId, \" seatId=\", seatId);\r\n        return seatId;\r\n    },\r\n    \r\n    callbackBtn : function (event,CustomEventData) {\r\n        var btnName = event.target.getName();\r\n        cc.log(\"Bullfight_PlayerItem.callbackBtn,btnName = \" + btnName);\r\n        \r\n        MusicMgr.playEffect(Audio_Comm.AUDIO_BTN_CLICK);\r\n        \r\n        if (btnName = \"Bg\")\r\n        {\r\n            if (this.seatFlag == 0)\r\n            {\r\n                var seatid = this.getSeatIdByViewId(this.seatId);\r\n                cc.log(\"Bullfight_PlayerItem.callbackBtn,this.seatId = \" + seatid);\r\n                var data = {\r\n                    status : 1,\r\n                    seatid : seatid,\r\n                };\r\n                MessageFactory.createMessageReq(window.US_REQ_SIT_DOWN_CMD_ID).send(data);\r\n                MusicMgr.playEffect(Audio_Comm.AUDIO_SIT);\r\n               \r\n            }\r\n            else\r\n            {\r\n                //显示玩家信息\r\n                var UserInfoView = cc.instantiate(this.UserInfoView);\r\n                cc.director.getScene().addChild(UserInfoView);\r\n                UserInfoView.setPosition(cc.p(cc.director.getVisibleSize().width/2,\r\n                    cc.director.getVisibleSize().height/2));\r\n                UserInfoView.getComponent(\"Bullfight_UserInfo\").setPlayerInfo(this.player);\r\n            }\r\n        }\r\n    },\r\n\r\n    setPlayerBanker : function () {\r\n        this.bankerFlag.node.active = true;\r\n        this.bankerLight.node.active = true;\r\n    },\r\n\r\n    clearPlayerBanker : function () {\r\n        this.bankerFlag.node.active = false;\r\n        this.bankerLight.node.active = false;\r\n    },\r\n\r\n    clearPlayerInfo : function () {\r\n        //cc.log(\"Bullfight_GameScene.clearPlayerInfo, seatId= \" + this.seatId);\r\n        this.setUserNick(\"\");\r\n        this.setUserGold(0);\r\n        this.clearUserWinScore();\r\n        this.userHead.node.active = false;\r\n        this.seatFlag = 0;\r\n        this.bankerFlag.node.active = false;\r\n        this.userHead.spriteFrame = this.DefaultHead;\r\n    },\r\n\r\n    updatePlayerInfo : function (player) {\r\n\r\n        this.player = player;\r\n\r\n        this.userHead.node.active = true;\r\n\r\n        this.setUserNick(player.name);\r\n\r\n        if (player.coin > 0 ) {\r\n            this.setUserGold(player.coin);\r\n        } else  {\r\n            this.setUserWaitCarry();\r\n        }\r\n\r\n        UpdateWXHeadIcon(player.headurl,this.userHead);\r\n\r\n        this.seatFlag = 1;\r\n    },\r\n    \r\n    getPointByAngle : function (startpoint,angle,radius)\r\n    {\r\n\r\n        if (angle <= 90 && angle >= 0)\r\n        {\r\n            return cc.p(startpoint.x + Math.sin(angle)*radius,startpoint.y - (radius - Math.cos(angle)*radius));\r\n        }\r\n        else if(angle > 90 && angle <= 180)\r\n        {\r\n            cc.p(startpoint.x + Math.sin(180 - angle)*radius,startpoint.y - (radius - Math.cos(180 - angle)*radius - radius));\r\n        }\r\n        else if(angle > 180 && angle <= 270)\r\n        {\r\n            cc.p(startpoint.x - Math.sin(270 - angle)*radius,startpoint.y - (radius - Math.cos(270 - angle)*radius - radius));\r\n        }\r\n        else if(angle > 270 && angle < 360)\r\n        {\r\n            return cc.p(startpoint.x - Math.sin(360-angle)*radius,startpoint.y - (radius - Math.cos(360-angle)*radius));\r\n        }\r\n    },\r\n});\r\n"
  ]
}