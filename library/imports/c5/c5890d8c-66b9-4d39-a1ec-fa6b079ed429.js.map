{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "GameSystem",
    "require",
    "MusicMgr",
    "_audioVolume",
    "_musicVolume",
    "_isShake",
    "_bgmid",
    "m_isAudioOn",
    "m_isMusicOn",
    "initAudio",
    "cc",
    "sys",
    "localStorage",
    "hasOwnProperty",
    "getItem",
    "log",
    "parseFloat",
    "playBackgroundMusic",
    "path",
    "onjs",
    "audioID",
    "audioEngine",
    "play",
    "bgm",
    "url",
    "raw",
    "resumeBackgroundMusic",
    "stopEffect",
    "stop",
    "setVolumeQuite",
    "setEffectsVolume",
    "stopBackgroundMusic",
    "state",
    "getState",
    "AudioState",
    "ERROR",
    "pauseBackgroundMusic",
    "pause",
    "resume",
    "setMusicVolume",
    "value",
    "_saveMusicValue",
    "setVolume",
    "getMusicVolume",
    "setItem",
    "saveMusicON",
    "playEffect",
    "loadOnjs",
    "getInstance",
    "VolumeState",
    "clip",
    "_saveEffectValue",
    "getEffectVolume",
    "saveAudioON",
    "playShake",
    "isShakeOn",
    "isShakeOpen",
    "setShakeOn",
    "bEnable",
    "preload",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var GameSystem = require(\"GameSystem\");\r\n\r\nvar MusicMgr = {\r\n    _audioVolume : 1.0,\r\n    _musicVolume : 1.0,\r\n    _isShake : true,\r\n    _bgmid : -1 ,\r\n    m_isAudioOn : true,\r\n    m_isMusicOn : true,\r\n\r\n\r\n    initAudio : function () {\r\n        // init\r\n        if ( cc.sys.localStorage.hasOwnProperty(\"SHAKE_OPEN\")){\r\n            this._isShake = cc.sys.localStorage.getItem(\"SHAKE_OPEN\")\r\n            this._isShake = this._isShake==\"true\"?true:false ;\r\n            cc.log(\"MusicMgr.initAudio,this._isShake = \" + this._isShake);\r\n        }\r\n        if(cc.sys.localStorage.hasOwnProperty(\"AUDIO_VOLUME\")){\r\n            this._audioVolume = cc.sys.localStorage.getItem(\"AUDIO_VOLUME\");\r\n            this._audioVolume = parseFloat(this._audioVolume);\r\n            cc.log(\"MusicMgr.initAudio,this._audioVolume = \" + this._audioVolume);\r\n        }\r\n        if(cc.sys.localStorage.hasOwnProperty(\"MUSIC_VOLUME\")){\r\n            this._musicVolume = cc.sys.localStorage.getItem(\"MUSIC_VOLUME\");\r\n            this._musicVolume = parseFloat(this._musicVolume);\r\n            cc.log(\"MusicMgr.initAudio,this._musicVolume = \" + this._musicVolume);\r\n        }\r\n        if(cc.sys.localStorage.hasOwnProperty(\"m_isAudioOn\")){\r\n\r\n            this.m_isAudioOn = cc.sys.localStorage.getItem(\"m_isAudioOn\");\r\n            this.m_isAudioOn = this.m_isAudioOn==\"true\"?true:false ;\r\n            cc.log(\"MusicMgr.initAudio,this.m_isAudioOn = \" + this.m_isAudioOn);\r\n\r\n        }\r\n        if(cc.sys.localStorage.hasOwnProperty(\"m_isMusicOn\")){\r\n            this.m_isMusicOn = cc.sys.localStorage.getItem(\"m_isMusicOn\");\r\n            this.m_isMusicOn = this.m_isMusicOn==\"true\"?true:false ;\r\n            cc.log(\"MusicMgr.initAudio,this.m_isMusicOn = \" + this.m_isMusicOn);\r\n        }\r\n\r\n\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param path\r\n     * @param onjs  是否挂在脚本上\r\n     */\r\n    playBackgroundMusic : function (path, onjs) {\r\n        cc.log(\"MusicMgr.playBackgroundMusic,path = \" + path);\r\n        if(this.m_isMusicOn ){\r\n\r\n            if(this._bgmid == -1){\r\n                var audioID = -1 ;\r\n                if(onjs){\r\n                    audioID = cc.audioEngine.play( path, true ,this._musicVolume);\r\n                }else{\r\n                    var bgm = cc.url.raw(path);\r\n                    audioID = cc.audioEngine.play( bgm, true ,this._musicVolume);\r\n                }\r\n\r\n                this._bgmid = audioID;\r\n            }else{\r\n                this.resumeBackgroundMusic() ;\r\n            }\r\n        }\r\n    },\r\n\r\n    stopEffect : function (audioID) {\r\n        cc.audioEngine.stop(audioID);\r\n    },\r\n\r\n    // add by jackyu\r\n    setVolumeQuite : function () {\r\n        cc.audioEngine.setEffectsVolume(0.1);\r\n    },\r\n    \r\n    \r\n    stopBackgroundMusic : function( ){\r\n        let state = cc.audioEngine.getState( this._bgmid)\r\n        if( state != cc.audioEngine.AudioState.ERROR) {\r\n            cc.audioEngine.stop(this._bgmid)\r\n            this._bgmid  = -1\r\n        }\r\n    },\r\n\r\n    pauseBackgroundMusic : function() {\r\n        if( this._bgmid != -1){\r\n            cc.audioEngine.pause( this._bgmid)\r\n        }\r\n    },\r\n\r\n    resumeBackgroundMusic : function() {\r\n    \t\r\n        if( this._bgmid != -1 && this.m_isMusicOn){\r\n            cc.audioEngine.resume( this._bgmid)\r\n        }\r\n    },\r\n\r\n    setMusicVolume : function( value) {\r\n        this._musicVolume = value\r\n        this.m_isMusicOn = this._musicVolume > 0;\r\n        this._saveMusicValue();\r\n\r\n\r\n        if( this._bgmid != -1){\r\n            cc.audioEngine.setVolume( this._bgmid, this._musicVolume);\r\n        }\r\n    },\r\n\r\n    getMusicVolume : function() {\r\n        return this._musicVolume\r\n    },\r\n\r\n    _saveMusicValue : function() {\r\n        cc.sys.localStorage.setItem(\"MUSIC_VOLUME\", this._musicVolume);\r\n        this.saveMusicON() ;\r\n    },\r\n\r\n\r\n    /**this\r\n     *\r\n     * @param path\r\n     * @param loadOnjs  是否挂在 脚本上的资源\r\n     */\r\n    playEffect : function (path,loadOnjs)\r\n    {\r\n    \tif(GameSystem.getInstance().VolumeState == 0)\r\n        {\r\n    \t\tif(this.m_isAudioOn){\r\n                if(loadOnjs){\r\n                    cc.audioEngine.play(path,false ,this._audioVolume);\r\n                }else{\r\n                    var clip = cc.url.raw(path);\r\n                    cc.audioEngine.play(clip,false ,this._audioVolume);\r\n                }\r\n\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    setEffectsVolume : function( value) {\r\n        this._audioVolume = value;\r\n        this.m_isAudioOn = this._audioVolume>0;\r\n        this._saveEffectValue();\r\n    },\r\n\r\n\r\n    getEffectVolume : function() {\r\n        return this._audioVolume;\r\n    },\r\n\r\n    _saveEffectValue : function( ) {\r\n\r\n\r\n        cc.sys.localStorage.setItem(\"AUDIO_VOLUME\", this._audioVolume);\r\n        this.saveAudioON() ;\r\n    },\r\n\r\n    playShake : function( ){\r\n        cc.log( \"震动还未实现！\")\r\n    },\r\n\r\n    isShakeOn : function( ){\r\n        return this._isShake\r\n    },\r\n\r\n    isShakeOpen : function( ){\r\n        return this._isShake\r\n    },\r\n    setShakeOn : function( bEnable) {\r\n        this._isShake = bEnable\r\n        cc.sys.localStorage.setItem(\"SHAKE_OPEN\", this._audioVolume);\r\n    },\r\n\r\n    preload : function( path) {\r\n        cc.audioEngine.preload(path,function (){})\r\n    },\r\n\r\n    saveMusicON : function () {\r\n        cc.sys.localStorage.setItem(\"m_isMusicOn\", this.m_isMusicOn);\r\n    },\r\n    saveAudioON : function () {\r\n        cc.sys.localStorage.setItem(\"m_isAudioOn\", this.m_isAudioOn);\r\n    },\r\n\r\n};\r\n\r\n\r\nmodule.exports = MusicMgr;"
  ]
}