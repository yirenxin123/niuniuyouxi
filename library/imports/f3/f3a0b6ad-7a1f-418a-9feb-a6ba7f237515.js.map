{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BaseScene",
    "require",
    "GameSystem",
    "MessageFactory",
    "GamePlayer",
    "Cmd_Bullfight",
    "ToastView",
    "LoadingView",
    "AlertView",
    "Bullfight_Clock",
    "Player",
    "Bullfight_PlayerItem",
    "Bullfight_CardItem",
    "Bullfight_GiftAnimation",
    "MusicMgr",
    "Bullfight_AudioConfig",
    "Audio_Common",
    "GameCallOC",
    "UtilTool",
    "window",
    "Bullfight_TableStatus",
    "cc",
    "Enum",
    "E_TABLE_CLOSE_STATUS",
    "E_TABLE_NOT_START_STATUS",
    "E_TABLE_READY_STATUS",
    "E_TABLE_CALL_STATUS",
    "E_TABLE_BET_STATUS",
    "E_TABLE_OPEN_STATUS",
    "E_TABLE_OVER_STATUS",
    "E_TABLE_IDLE_STATUS",
    "Bullfight_PlayerStatus",
    "E_PLAYER_UNKONW_STATUS",
    "E_PLAYER_WATCH_STATUS",
    "E_PLAYER_SIT_STATUS",
    "E_PLAYER_READY_STATUS",
    "E_PLAYER_ACTIVE_STATUS",
    "E_PLAYER_OVER_STATUS",
    "Bullfight_CallType",
    "E_QUIT_CALL_BANKER",
    "E_NOT_CALL_BANKER",
    "E_NORMAL_CALL_BANKER",
    "E_SUPER_CALL_BANKER",
    "Class",
    "extends",
    "properties",
    "Menu",
    "Prefab",
    "MenuRoomCard",
    "CarryView",
    "PlayerItemPos",
    "CardItem",
    "m_iMaxPlayers",
    "BtnStart",
    "Button",
    "BtnReady",
    "BtnCallBankerNode",
    "Node",
    "BetCoinNode",
    "OpenCardNode",
    "clock",
    "RoomId",
    "Label",
    "RoomName",
    "RoundNum",
    "PlayersList",
    "CallBankerFlag",
    "Sprite",
    "CallBankerFlagFrame",
    "SpriteFrame",
    "GiftAnimation",
    "GameTotalResult",
    "ExpressionView",
    "RoomInfoView",
    "BetLabel",
    "BtnMusicOn",
    "BtnMusicOff",
    "VoiceView",
    "VoicePlayView",
    "BtnVoice",
    "GameScene",
    "Canvas",
    "ShareView",
    "Tips",
    "BtnControl",
    "SuperCostLabel",
    "PlayNode",
    "DismissTableView",
    "BtnRoomInfo",
    "BtnSuccess",
    "BtnBetNode",
    "BtnBetRoomCardNode",
    "statics",
    "Instance",
    "onLoad",
    "_super",
    "getInstance",
    "CurGameType",
    "GameType",
    "GAME_TYPE_BULLFIGHT",
    "EnterRoom",
    "createMessageReq",
    "US_REQ_ENTER_GAME_CMD_ID",
    "send",
    "initData",
    "updateRoomViewByLevel",
    "update",
    "dt",
    "Poll",
    "onDestroy",
    "stopBackgroundMusic",
    "roomLevel",
    "node",
    "active",
    "updateBet",
    "minAnte",
    "string",
    "seatid",
    "tableStatus",
    "sitPlayers",
    "Map",
    "m_iMyBetCoin",
    "m_iMaxBet",
    "tableRuleInfo",
    "bankerUid",
    "roundnum",
    "BetArray",
    "privateid",
    "VoiceViewNode",
    "VoicePlayerViewNode",
    "removeAllPlayerInTable",
    "log",
    "self",
    "on",
    "EventType",
    "TOUCH_START",
    "event",
    "show",
    "instantiate",
    "addChild",
    "setPosition",
    "p",
    "TOUCH_END",
    "getComponent",
    "dismiss",
    "playVoiceContinue",
    "TOUCH_CANCEL",
    "VolumeState",
    "VoiceArray",
    "Array",
    "clearTable",
    "clearCallBankerFlag",
    "callBackBtnShare",
    "ShareImagePath",
    "screenShotAction",
    "shareView",
    "setShareTyep",
    "ShareType",
    "E_SHARETYPE_IMAGE",
    "clienturl",
    "removeFromParent",
    "msg",
    "pop",
    "JSON",
    "stringify",
    "fromViewId",
    "getPlayerViewIdBySeatId",
    "findPlayer",
    "fromuid",
    "position",
    "text",
    "parse",
    "BASE64",
    "decoder",
    "DownloadRecordedFile",
    "fileID",
    "filePath",
    "onSceneMsg",
    "data",
    "popView",
    "btn",
    "showShareView",
    "onMessage",
    "cmd",
    "US_RESP_LOGIN_CMD_ID",
    "onLoginMsg",
    "US_RESP_ENTER_GAME_CMD_ID",
    "onEnterRoom",
    "US_RESP_SIT_DOWN_CMD_ID",
    "onSitDown",
    "US_RESP_LEAVE_GAME_CMD_ID",
    "onLeaveGame",
    "US_NOTIFY_GAME_SWITCH_CMD_ID",
    "onNotifyGameSwitch",
    "SBF_RESP_READY_CMD_ID",
    "onReady",
    "SBF_NOTIFY_GAME_START_CMD_ID",
    "onNotifyGameStart",
    "SBF_RESP_CALL_BANKER_CMD_ID",
    "onCallBanker",
    "SBF_NOTIFY_CONFIRM_BANKER_CMD_ID",
    "onNotifySureBanker",
    "US_RESP_GAME_SWITCH_CMD_ID",
    "onGameSwitch",
    "SBF_RESP_BET_COIN_CMD_ID",
    "onBetCoin",
    "SBF_NOTIFY_OPEN_CARD_CMD_ID",
    "onNotifyOpenCard",
    "SBF_RESP_OPEN_CARD_CMD_ID",
    "onOpenCard",
    "SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID",
    "onNotifyOneGameResult",
    "US_RESP_CARRY_COIN_CMD_ID",
    "onCarryCoin",
    "SBF_NOTIFY_KICKOUT_CMD_ID",
    "doKickOut",
    "SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID",
    "onNotifyNotCallbanker",
    "SBF_NOTIFY_NOT_BET_COIN_CMD_ID",
    "onNotifyNotBet",
    "SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID",
    "NotifyTotalGameResult",
    "US_RESP_TABLE_DETAIL_CMD_ID",
    "onGetTableDetail",
    "US_RESP_GAME_CHAT_CMD_ID",
    "onChatMsg",
    "US_RSP_DISMISS_TABLE_CMD_ID",
    "onDismissTable",
    "US_NOTIFY_DISMISS_TABLE_CMD_ID",
    "onNotifyDismissTable",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "dismissuid",
    "name",
    "timeout",
    "DismissTable",
    "setSendInfo",
    "desc",
    "kind",
    "ChatType",
    "E_CHAT_FACE_KIND",
    "viewId",
    "pos",
    "playFaceAnimation",
    "type",
    "E_CHAT_GIFT_KIND",
    "toViewId",
    "touid",
    "start",
    "end",
    "playGiftAnimation",
    "E_CHAT_VOICE_KIND",
    "push",
    "length",
    "E_CHAT_WORD_KIND",
    "delAllPlayer",
    "US_REQ_TABLE_DETAIL_CMD_ID",
    "getAppName",
    "E_SHARETYPE_LINK",
    "param",
    "tstatus",
    "seats",
    "bowner",
    "status",
    "ustatus",
    "superCost",
    "supercost",
    "giftCost",
    "giftcosts",
    "minante",
    "showTableStatusBtn",
    "VerStatus",
    "VerStatusType",
    "VERSION_TYPE_AUDIT",
    "index",
    "seaters",
    "player",
    "uid",
    "headurl",
    "sex",
    "gold",
    "diamond",
    "coin",
    "winGold",
    "win",
    "TotalCarry",
    "total",
    "TotalRound",
    "totalround",
    "TotalTable",
    "totaltable",
    "addPlayer",
    "refreshAllPlayerOnTable",
    "SitDown",
    "US_REQ_SIT_DOWN_CMD_ID",
    "playEffect",
    "AUDIO_SIT",
    "switch",
    "seatuid",
    "showOnePlayerInTable",
    "iscarry",
    "createCarryView",
    "carrytime",
    "delPlayer",
    "carryuid",
    "carrycoin",
    "viewid",
    "setUserGold",
    "gamesvcid",
    "tableid",
    "director",
    "loadScene",
    "isStart",
    "size",
    "startClockTime",
    "readyTime",
    "clearAllPlayerCardItem",
    "clearUserWinScore",
    "clearUserHeadBanker",
    "clearReadyFlag",
    "calltime",
    "sendCardsToPlayer",
    "cards",
    "item",
    "finalcoin",
    "bulltype",
    "calltype",
    "bBanker",
    "betcoinmul",
    "bOpenCard",
    "refreshLookFlag",
    "readyuid",
    "updatePlayerStatus",
    "refreshReadyFlag",
    "calluid",
    "updatePlayerCallType",
    "refreshCallBankerFlag",
    "bettime",
    "bankeruid",
    "maxbetmul",
    "setPlayerBanker",
    "isstart",
    "betuid",
    "get",
    "setPlayerBetCount",
    "opentime",
    "openplayerCards",
    "setCustomCardType",
    "openuid",
    "setCardType",
    "index1",
    "index2",
    "overtime",
    "setUserWinScore",
    "playWinAnimation",
    "AUDIO_WIN",
    "AUDIO_LOSE",
    "createTotalGameResult",
    "gameEnd",
    "setGameData",
    "gametype",
    "mincarry",
    "maxcarry",
    "livetime",
    "bullmul",
    "totalcarry",
    "minmincarry",
    "updateClockTime",
    "betmul",
    "bopencard",
    "sendReady",
    "SBF_REQ_READY_CMD_ID",
    "sendCallBanker",
    "callType",
    "SBF_REQ_CALL_BANKER_CMD_ID",
    "sendSwitchGame",
    "US_REQ_GAME_SWITCH_CMD_ID",
    "sendBetCoinReq",
    "betcoin",
    "SBF_REQ_BET_COIN_CMD_ID",
    "sendOpenCard",
    "SBF_REQ_OPEN_CARD_CMD_ID",
    "callbackBtnMusic",
    "toggle",
    "CustomEventData",
    "isCheck",
    "isChecked",
    "resumeBackgroundMusic",
    "pauseBackgroundMusic",
    "callBackBetBtnRoomCard",
    "target",
    "getName",
    "AUDIO_BTN_CLICK",
    "updateMaxBet",
    "callbackBtn",
    "createMenu",
    "playerList",
    "bet",
    "warn",
    "createExpression",
    "createRoomInfoView",
    "bigBet",
    "lastPush",
    "diffBet",
    "AUDIO_BTN_BET",
    "menuPop",
    "setCallBackCarry",
    "setRuleInfo",
    "setRoomInfo",
    "time",
    "carryPop",
    "setCarryTime",
    "setMinAndMax",
    "callUid",
    "bMusic",
    "spriteFrame",
    "AUDIO_MAN_NOCALLBANKER",
    "AUDIO_MAN_CALLBANKER",
    "readyUid",
    "BULLFIGHT_MAX_PLAYER",
    "clearPlayerBanker",
    "updateTimeLabel",
    "schedule",
    "tableStatusTimeOut",
    "unschedule",
    "cardlist",
    "sendCardAnimation",
    "openCardAnimation",
    "clearCardItem",
    "Bullfight_CardType",
    "E_BULL_ZERO",
    "AUDIO_MAN_BULL0",
    "E_BULL_ONE",
    "AUDIO_MAN_BULL1",
    "E_BULL_TWO",
    "AUDIO_MAN_BULL2",
    "E_BULL_THREE",
    "AUDIO_MAN_BULL3",
    "E_BULL_FOUR",
    "AUDIO_MAN_BULL4",
    "E_BULL_FIVE",
    "AUDIO_MAN_BULL5",
    "E_BULL_SIX",
    "AUDIO_MAN_BULL6",
    "E_BULL_SEVEN",
    "AUDIO_MAN_BULL7",
    "E_BULL_EIGHT",
    "AUDIO_MAN_BULL8",
    "E_BULL_NINE",
    "AUDIO_MAN_BULL9",
    "E_BULL_PAIR",
    "E_BULL_BULL",
    "AUDIO_MAN_BULL10",
    "E_BULL_LINE",
    "AUDIO_MAN_LINE",
    "E_BULL_THREE_TWO",
    "AUDIO_MAN_3AND2",
    "E_BULL_BOMB",
    "AUDIO_MAN_BOMB",
    "E_BULL_FIVE_KING",
    "AUDIO_MAN_5FLOWER",
    "E_BULL_SMALL_FIVE",
    "AUDIO_MAN_5LITTLEBULL",
    "E_BULL_MAX",
    "count",
    "it",
    "removeOnePlayerInTable",
    "containsKey",
    "delete",
    "forEach",
    "ud",
    "clear",
    "playerinfo",
    "Copy",
    "set",
    "bShowDetail",
    "action",
    "sequence",
    "fadeOut",
    "fadeIn",
    "speed",
    "runAction",
    "element",
    "value",
    "undefined",
    "error",
    "updatePlayerInfo",
    "playerStandUpOrDown",
    "clearPlayerInfo",
    "seatId",
    "selfViewId",
    "findPlayerBySeatid",
    "onPause",
    "onResume"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BaseScene = require('BaseScene');\r\nvar GameSystem = require(\"GameSystem\");\r\nvar MessageFactory = require(\"MessageFactory\");\r\nvar GamePlayer = require('GamePlayer');\r\nvar Cmd_Bullfight = require('Cmd_Bullfight');\r\nvar ToastView = require('ToastView');\r\nvar LoadingView = require('LoadingView');\r\nvar AlertView = require('AlertView');\r\nvar Bullfight_Clock = require('Bullfight_Clock');\r\nvar Player = require(\"Player\");\r\nvar Bullfight_PlayerItem = require(\"Bullfight_PlayerItem\");\r\nvar Bullfight_CardItem = require(\"Bullfight_CardItem\");\r\nvar Bullfight_GiftAnimation = require('Bullfight_GiftAnimation');\r\nvar MusicMgr = require('MusicMgr');\r\nvar Bullfight_AudioConfig = require('Bullfight_AudioConfig');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GameCallOC = require('GameCallOC');\r\nvar UtilTool = require('UtilTool');\r\n\r\nwindow.Bullfight_TableStatus = cc.Enum({\r\n    E_TABLE_CLOSE_STATUS     : -2, //桌子关闭\r\n    E_TABLE_NOT_START_STATUS : 0,  //桌子未开始\r\n    E_TABLE_READY_STATUS     : 1,  //桌子准备\r\n    E_TABLE_CALL_STATUS      : 2,  //叫庄\r\n    E_TABLE_BET_STATUS       : 3,  //下注\r\n    E_TABLE_OPEN_STATUS      : 4,  //开牌\r\n    E_TABLE_OVER_STATUS      : 5,  //游戏结束\r\n    E_TABLE_IDLE_STATUS      : 6,  //空闲\r\n});\r\n\r\nwindow.Bullfight_PlayerStatus = cc.Enum({\r\n    E_PLAYER_UNKONW_STATUS : -2,\r\n    E_PLAYER_WATCH_STATUS  : 0, //观察状态(可能是玩过的,也可能是没有玩过的)\r\n    // E_PLAYER_APPLY_STATUS  : 1, //申请入座           //这2个状态废弃\r\n    // E_PLAYER_COIN_STATUS   : 2, //向群主确认携带金币\r\n    E_PLAYER_SIT_STATUS    : 3, //已入座,等待状态\r\n    E_PLAYER_READY_STATUS  : 4, //玩家进入准备状态\r\n    E_PLAYER_ACTIVE_STATUS : 5, //正在玩牌\r\n    E_PLAYER_OVER_STATUS   : 6, //本局游戏结束\r\n});\r\n\r\nwindow.Bullfight_CallType = cc.Enum({\r\n    E_QUIT_CALL_BANKER   : 0, //未操作\r\n    E_NOT_CALL_BANKER    : 1, //不抢\r\n    E_NORMAL_CALL_BANKER : 2, //抢庄\r\n    E_SUPER_CALL_BANKER  : 3, //超级抢庄\r\n});\r\n\r\ncc.Class({\r\n    extends: BaseScene,\r\n\r\n    properties: {\r\n        Menu            : cc.Prefab,\r\n        MenuRoomCard    : cc.Prefab,\r\n        CarryView       : cc.Prefab,\r\n        PlayerItemPos   : [Bullfight_PlayerItem],\r\n        CardItem        : [Bullfight_CardItem],\r\n        m_iMaxPlayers   : 0,\r\n        BtnStart        : cc.Button,\r\n        BtnReady        : cc.Button,\r\n        BtnCallBankerNode : cc.Node,\r\n        BetCoinNode     : cc.Node,\r\n        OpenCardNode    : cc.Node,\r\n        clock           : Bullfight_Clock,\r\n        RoomId          : cc.Label,\r\n        RoomName        : cc.Label,\r\n        RoundNum        : cc.Label,\r\n        PlayersList     : cc.Prefab,\r\n        CallBankerFlag  : [cc.Sprite],\r\n        CallBankerFlagFrame : [cc.SpriteFrame],\r\n        GiftAnimation   : Bullfight_GiftAnimation,\r\n        GameTotalResult : cc.Prefab,\r\n        ExpressionView  : cc.Prefab,\r\n        RoomInfoView    : cc.Prefab,\r\n        BetLabel        : [cc.Label],\r\n        BtnMusicOn      : cc.Button,\r\n        BtnMusicOff     : cc.Button,\r\n        VoiceView       : cc.Prefab,\r\n        VoicePlayView   : cc.Prefab,\r\n        BtnVoice        : cc.Button,\r\n        GameScene       : cc.Canvas,\r\n        ShareView       : cc.Prefab,\r\n        Tips            : cc.Label,\r\n        BtnControl      : cc.Sprite,\r\n        SuperCostLabel  : cc.Label,\r\n        PlayNode        : cc.Node,\r\n        DismissTableView : cc.Prefab,\r\n        BtnRoomInfo     : cc.Button,\r\n        BtnSuccess      : cc.Button,\r\n\r\n        BtnBetNode : cc.Node,\r\n        BtnBetRoomCardNode : cc.Node,\r\n    },\r\n\r\n    statics :{\r\n        Instance : null,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n\r\n\r\n        GameSystem.getInstance().CurGameType = GameSystem.getInstance().GameType.GAME_TYPE_BULLFIGHT;\r\n        if (GameSystem.getInstance().EnterRoom)\r\n        {\r\n            MessageFactory.createMessageReq(window.US_REQ_ENTER_GAME_CMD_ID).send();\r\n        }\r\n        this.initData();\r\n        this.Instance = this;\r\n        this.updateRoomViewByLevel();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        GameCallOC.getInstance().Poll();\r\n    },\r\n\r\n    onDestroy : function () {\r\n        this._super();\r\n        this.Instance = null;\r\n        MusicMgr.stopBackgroundMusic();\r\n    },\r\n\r\n    updateRoomViewByLevel : function () {\r\n        if(GameSystem.getInstance().roomLevel == 2)\r\n        {\r\n            this.BtnRoomInfo.node.active = false;\r\n            this.BtnSuccess.node.active = false;\r\n        }\r\n    },\r\n    \r\n    updateBet : function (minAnte) {\r\n        this.BetLabel[0].string = 1*minAnte;\r\n        this.BetLabel[1].string = 2*minAnte;\r\n        this.BetLabel[2].string = 5*minAnte;\r\n        this.BetLabel[3].string = 10*minAnte;\r\n    },\r\n\r\n    initData : function () {\r\n        GamePlayer.getInstance().seatid = -1;\r\n        this.tableStatus   = Bullfight_TableStatus.E_TABLE_CLOSE_STATUS;\r\n        this.sitPlayers    = new Map();\r\n        this.m_iMyBetCoin  = 0;\r\n        this.m_iMaxBet     = 0;\r\n        this.tableRuleInfo = null;\r\n        this.bankerUid     = 0;\r\n        this.roundnum      = 0;\r\n        this.BetArray = [];\r\n        this.RoomId.string = \"ID:\" + GameSystem.getInstance().privateid;\r\n        this.VoiceViewNode = null;\r\n        this.VoicePlayerViewNode = null;\r\n        this.removeAllPlayerInTable();\r\n        cc.log(\"Bullfight_GameScene.clearTable,privateid = \" + GameSystem.getInstance().privateid);\r\n\r\n        var self = this;\r\n        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            if (GamePlayer.getInstance().seatid == -1)\r\n            {\r\n                ToastView.show(\"您没有坐下不能发送语音\");\r\n                return\r\n            }\r\n            //显示录音界面\r\n            self.VoiceViewNode = cc.instantiate(self.VoiceView);\r\n            self.node.addChild(self.VoiceViewNode);\r\n            self.VoiceViewNode.setPosition(cc.p(0,0));\r\n        });\r\n        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_END, function(event){\r\n            //取消录音界面\r\n            if(self.VoiceViewNode)\r\n            {\r\n                self.VoiceViewNode.getComponent(\"VoiceView\").dismiss();\r\n                self.VoiceViewNode = null;\r\n            }\r\n            self.playVoiceContinue();\r\n\r\n        });\r\n        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_CANCEL, function(event){\r\n            //取消录音界面\r\n            if(self.VoiceViewNode)\r\n            {\r\n                self.VoiceViewNode.getComponent(\"VoiceView\").dismiss();\r\n                self.VoiceViewNode = null;\r\n            }\r\n        });\r\n        \r\n        \r\n        if(GameSystem.getInstance().VolumeState == 1)\r\n        {\r\n        \tthis.BtnMusicOn.node.active = false;\r\n            this.BtnMusicOff.node.active = true;\r\n        }\r\n        \r\n        this.VoiceArray = new Array();\r\n    },\r\n\r\n    clearTable : function () {\r\n        this.m_iMyBetCoin = 0;\r\n        this.m_iMaxBet    = 0;\r\n        this.bankerUid    = 0;\r\n        this.BtnStart.node.active = false;\r\n        this.BtnReady.node.active = false;\r\n        this.clock.node.active    = false;\r\n        this.BtnCallBankerNode.active = false;\r\n        //this.BetCoinNode.active = false;\r\n        if(GameSystem.getInstance().roomLevel == 2)\r\n        {\r\n            this.BtnBetRoomCardNode.active = false;\r\n        }\r\n        else\r\n        {\r\n            this.BtnBetNode.active = false;\r\n        }\r\n\r\n        this.OpenCardNode.active = false;\r\n        this.BetArray = [];\r\n        this.clearCallBankerFlag();\r\n    },\r\n\r\n    /*********************Network***************************/\r\n    callBackBtnShare : function () {\r\n\r\n        var ShareImagePath = GameCallOC.getInstance().screenShotAction();\r\n        var shareView = cc.instantiate(this.ShareView);\r\n        this.node.addChild(shareView);\r\n        shareView.setPosition(cc.p(0,0));\r\n        var string = \"游戏结算分享\";\r\n        shareView.getComponent(\"ShareView\").setShareTyep(ShareType.E_SHARETYPE_IMAGE,ShareImagePath,GameSystem.getInstance().clienturl);\r\n\r\n    },\r\n\r\n    playVoiceContinue : function () {\r\n        if (this.VoicePlayerViewNode != null) {\r\n            cc.log(\"this.VoicePlayerViewNode  removeFromParent\");\r\n            this.VoicePlayerViewNode.removeFromParent(true);\r\n            this.VoicePlayerViewNode = null;\r\n        }\r\n        var msg = this.VoiceArray.pop();\r\n        cc.log(\"onSceneMsg,msg = \" + JSON.stringify(msg));\r\n        if(msg) {\r\n            var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);\r\n            if(this.VoicePlayerViewNode == null && this.VoiceViewNode == null) {\r\n                cc.log(\"this.VoicePlayerViewNode  create1\");\r\n                this.VoicePlayerViewNode = cc.instantiate(this.VoicePlayView);\r\n                this.GiftAnimation.node.addChild(this.VoicePlayerViewNode);\r\n                this.VoicePlayerViewNode.setPosition(this.CallBankerFlag[fromViewId].node.position);\r\n                var text = JSON.parse(BASE64.decoder(msg.text));\r\n                GameCallOC.getInstance().DownloadRecordedFile(text.fileID,text.filePath);\r\n            }\r\n        }\r\n    },\r\n\r\n    onSceneMsg: function onSceneMsg(event) {\r\n        var msg = event.data;\r\n        cc.log(\"onSceneMsg,msg.popView = \" + msg.popView);\r\n        if (msg.popView == \"GloudVoice\") {\r\n            if (msg.btn == \"OnPlayRecordedFile\") {\r\n                this.playVoiceContinue();\r\n            }\r\n        } else if (msg.popView == \"Bullfight_TotalResult\") {\r\n            if (msg.btn == \"BtnShare\") {\r\n                this.callBackBtnShare();\r\n            }\r\n        } else if (msg.popView == \"Bullfight_Menu\") {\r\n            if (msg.btn == \"BtnShare\") {\r\n                this.showShareView();\r\n                //this.callBackBtnShare();\r\n            }\r\n        } else if(msg.popView == \"VoicePlayView\")\r\n        {\r\n            if(msg.btn = \"dismiss\")\r\n            {\r\n                cc.log(\"this.VoicePlayerViewNode  null\");\r\n                this.VoicePlayerViewNode = null;\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    onMessage : function (event) {\r\n        cc.log(\"Bullfight_GameScene.onMessage\");\r\n        this._super(event);\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        switch (cmd)\r\n        {\r\n            case window.US_RESP_LOGIN_CMD_ID:\r\n                this.onLoginMsg(msg);\r\n                break;\r\n\r\n            case window.US_RESP_ENTER_GAME_CMD_ID:\r\n                this.onEnterRoom(msg);\r\n                break;\r\n\r\n            case window.US_RESP_SIT_DOWN_CMD_ID:\r\n                this.onSitDown(msg);\r\n                break;\r\n\r\n            case window.US_RESP_LEAVE_GAME_CMD_ID:\r\n                this.onLeaveGame(msg);\r\n                break;\r\n\r\n            case window.US_NOTIFY_GAME_SWITCH_CMD_ID:\r\n                this.onNotifyGameSwitch(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_RESP_READY_CMD_ID:\r\n                this.onReady(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_GAME_START_CMD_ID:\r\n                this.onNotifyGameStart(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_RESP_CALL_BANKER_CMD_ID:\r\n                this.onCallBanker(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_CONFIRM_BANKER_CMD_ID:\r\n                this.onNotifySureBanker(msg);\r\n                break;\r\n\r\n            case window.US_RESP_GAME_SWITCH_CMD_ID:\r\n                this.onGameSwitch(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_RESP_BET_COIN_CMD_ID:\r\n                this.onBetCoin(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_OPEN_CARD_CMD_ID:\r\n                this.onNotifyOpenCard(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_RESP_OPEN_CARD_CMD_ID:\r\n                this.onOpenCard(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID:\r\n                this.onNotifyOneGameResult(msg);\r\n                break;\r\n\r\n            case window.US_RESP_CARRY_COIN_CMD_ID:\r\n                this.onCarryCoin(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_KICKOUT_CMD_ID:\r\n                this.doKickOut(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID:\r\n                this.onNotifyNotCallbanker(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_NOT_BET_COIN_CMD_ID:\r\n                this.onNotifyNotBet(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID:\r\n                this.NotifyTotalGameResult(msg);\r\n                break;\r\n\r\n            case Cmd_Bullfight.US_RESP_TABLE_DETAIL_CMD_ID:\r\n                this.onGetTableDetail(msg);\r\n                break;\r\n\r\n            case US_RESP_GAME_CHAT_CMD_ID:\r\n                this.onChatMsg(msg);\r\n                break;\r\n\r\n            case window.US_RSP_DISMISS_TABLE_CMD_ID:\r\n                this.onDismissTable(msg);\r\n                break;\r\n            case window.US_NOTIFY_DISMISS_TABLE_CMD_ID:\r\n                this.onNotifyDismissTable(msg);\r\n                break;\r\n        };\r\n    },\r\n\r\n    onNotifyDismissTable: function (msg) {\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            cc.log(\"onNotifyDismissTable dismissuid=\", msg.dismissuid, \" name=\", msg.name, \" timeout=\", msg.timeout);\r\n            var DismissTable = cc.instantiate(this.DismissTableView);\r\n            this.node.addChild(DismissTable);\r\n            DismissTable.setPosition(cc.p(0,0));\r\n            DismissTable.getComponent(\"Bullfight_DismissTable\").setSendInfo(msg.name, msg.dismissuid, msg.timeout);\r\n        }\r\n    },\r\n\r\n    onDismissTable : function (msg) {\r\n        if(msg.code != SocketRetCode.RET_SUCCESS) {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onChatMsg : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            if(msg.kind == ChatType.E_CHAT_FACE_KIND) {\r\n                var viewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);\r\n                var pos    = this.CallBankerFlag[viewId].node.position;\r\n                this.GiftAnimation.playFaceAnimation(msg.type, pos);\r\n            } else if(msg.kind == ChatType.E_CHAT_GIFT_KIND) {\r\n                var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);\r\n                var toViewId   = this.getPlayerViewIdBySeatId(this.findPlayer(msg.touid).seatid);\r\n                var start      = this.PlayerItemPos[fromViewId].node.position;\r\n                var end        = this.PlayerItemPos[toViewId].node.position;\r\n                this.GiftAnimation.playGiftAnimation(msg.type, start,end);\r\n            } else if(msg.kind == ChatType.E_CHAT_VOICE_KIND) {\r\n                var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);\r\n                if(this.VoicePlayerViewNode == null && this.VoiceViewNode == null) {\r\n                    cc.log(\"this.VoicePlayerViewNode  create\");\r\n                    this.VoicePlayerViewNode = cc.instantiate(this.VoicePlayView);\r\n                    this.GiftAnimation.node.addChild(this.VoicePlayerViewNode);\r\n                    this.VoicePlayerViewNode.setPosition(this.CallBankerFlag[fromViewId].node.position);\r\n                    var text = JSON.parse(BASE64.decoder(msg.text));\r\n                    cc.log(\"Bullfight_GameScene.onChatMsg,fileID = \" + text.fileID);\r\n                    cc.log(\"Bullfight_GameScene.onChatMsg,downloadFilePath = \" + text.filePath);\r\n                    GameCallOC.getInstance().DownloadRecordedFile(text.fileID,text.filePath);\r\n                } else {\r\n                    //语音一次只能播放一个，如果当前有播放的先保存，等播放玩了继续播放\r\n                    cc.log(\"onChatMsg,msg = \" + JSON.stringify(msg));\r\n                    this.VoiceArray.push(msg);\r\n                    cc.log(\"onChatMsg,VoiceArray = \" + this.VoiceArray.length);\r\n                }\r\n            } else if(msg.kind == ChatType.E_CHAT_WORD_KIND) {\r\n\r\n            }\r\n        } else {\r\n\r\n        }\r\n    },\r\n\r\n    onLoginMsg : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onLoginMsg\");\r\n        if (msg.code >= SocketRetCode.RET_SUCCESS) {\r\n            this.clearTable();\r\n            this.delAllPlayer();\r\n            MessageFactory.createMessageReq(Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID).send();\r\n        }\r\n    },\r\n\r\n    showShareView : function () {\r\n        var shareView = cc.instantiate(this.ShareView);\r\n        this.node.addChild(shareView);\r\n        shareView.setPosition(cc.p(0,0));\r\n        var string = \"我在游戏［\" + GameCallOC.getInstance().getAppName() +\"］里创建了房间(\" + GameSystem.getInstance().privateid+ \"),快点一起来玩吧！！！\";\r\n        shareView.getComponent(\"ShareView\").setShareTyep(ShareType.E_SHARETYPE_LINK,string,GameSystem.getInstance().clienturl);\r\n    },\r\n\r\n    onEnterRoom : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onEnterRoom\");\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            this.tableRuleInfo   = JSON.parse(BASE64.decoder(msg.param));\r\n            this.tableStatus     = msg.tstatus;\r\n            this.m_iMaxPlayers   = msg.seats;\r\n            this.RoomName.string = msg.name;\r\n            GamePlayer.getInstance().bowner    = msg.bowner;\r\n            GamePlayer.getInstance().status    = msg.ustatus;\r\n            GameSystem.getInstance().superCost = msg.supercost;\r\n            GameSystem.getInstance().giftCost  = msg.giftcosts;\r\n            this.SuperCostLabel.string = GameSystem.getInstance().superCost;\r\n            this.updateBet(this.tableRuleInfo.minante);\r\n\r\n            // if (msg.bowner == 1) {\r\n            //     this.BtnControl.node.active = true\r\n            // } else {\r\n            //     this.BtnControl.node.active = false\r\n            // }\r\n\r\n            cc.log(\"onEnterRoom: tstatus=\", this.tableStatus, \" status=\", GamePlayer.getInstance().status);\r\n\r\n            //本局游戏没有开始，并且自己是桌主\r\n            if ((this.tableStatus == Bullfight_TableStatus.E_TABLE_NOT_START_STATUS) && GamePlayer.getInstance().bowner == 1) {\r\n                cc.log(\"onEnterRoom: bowner=\" + GamePlayer.getInstance().bowner);\r\n                this.showTableStatusBtn(); //显示游戏开始按钮\r\n                if(GameSystem.getInstance().VerStatus != GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT)\r\n                {\r\n                    this.showShareView();\r\n                }\r\n\r\n            } else if (this.tableStatus > Bullfight_TableStatus.E_TABLE_NOT_START_STATUS) {\r\n                cc.log(\"Bullfight_GameScene.onEnterRoom, get table detail.\");\r\n                MessageFactory.createMessageReq(Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID).send();\r\n\r\n                switch (this.tableStatus) {\r\n                    case Bullfight_TableStatus.E_TABLE_READY_STATUS:\r\n                        this.Tips.string = \"准备中\";\r\n                        break;\r\n\r\n                    case Bullfight_TableStatus.E_TABLE_CALL_STATUS:\r\n                        this.Tips.string = \"抢庄中\";\r\n                        break;\r\n\r\n                    case Bullfight_TableStatus.E_TABLE_BET_STATUS:\r\n                        this.Tips.string = \"下注中\";\r\n                        break;\r\n\r\n                    case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:\r\n                        this.Tips.string = \"开牌中\";\r\n                        break;\r\n\r\n                    case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:\r\n                        this.Tips.string = \"本局结束\";\r\n                        break;\r\n                }\r\n            } else {\r\n                this.Tips.string = \"游戏未开始\";\r\n            }\r\n\r\n            //显示在自己之前进入的玩家\r\n            for (var index = 0; msg.seaters != null && index < msg.seaters.length;index++) {\r\n                var player        = new Player;\r\n                player.uid        = msg.seaters[index].uid;\r\n                player.name       = msg.seaters[index].name;\r\n                player.headurl    = msg.seaters[index].headurl;\r\n                player.sex        = msg.seaters[index].sex;\r\n                player.gold       = msg.seaters[index].gold;\r\n                player.diamond    = msg.seaters[index].diamond;\r\n                player.coin       = msg.seaters[index].coin;\r\n                player.seatid     = msg.seaters[index].seatid;\r\n                player.status     = msg.seaters[index].status;\r\n                player.winGold    = msg.seaters[index].win;\r\n                player.TotalCarry = msg.seaters[index].total;\r\n                player.TotalRound = msg.seaters[index].totalround; //总手数\r\n                player.TotalTable = msg.seaters[index].totaltable; //总局数\r\n                this.addPlayer(player);\r\n            }\r\n            this.refreshAllPlayerOnTable(false);\r\n\r\n            if (GamePlayer.getInstance().seatid == -1) {\r\n                this.SitDown();\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    SitDown: function () {\r\n        var data = {\r\n            status : 1,\r\n        };\r\n        MessageFactory.createMessageReq(window.US_REQ_SIT_DOWN_CMD_ID).send(data);\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_SIT);\r\n    },\r\n\r\n    onSitDown : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onSitDown\");\r\n        LoadingView.dismiss();\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n            this.tableStatus = msg.tstatus;\r\n            if (msg.switch == 1) {\r\n                var player = new Player();\r\n                cc.log(\"player.seatid = \" + msg.seatid);\r\n                player.uid        = msg.seatuid;\r\n                player.name       = msg.name;\r\n                player.headurl    = msg.headurl;\r\n                player.sex        = msg.sex;\r\n                player.gold       = msg.gold;\r\n                player.diamond    = msg.diamond;\r\n                player.coin       = msg.coin;\r\n                player.status     = msg.status;\r\n                player.seatid     = msg.seatid;\r\n                player.winGold    = msg.win;\r\n                player.TotalCarry = msg.total;\r\n                player.TotalRound = msg.totalround; //总手数\r\n                player.TotalTable = msg.totaltable; //总局数\r\n                cc.log(\"onSitDown player.TotalRound=\", player.TotalRound, \" player.TotalTable=\", player.TotalTable)\r\n                this.addPlayer(player);\r\n\r\n                if (player.uid == GamePlayer.getInstance().uid) {\r\n                    this.refreshAllPlayerOnTable(true);\r\n                } else {\r\n                    this.showOnePlayerInTable(player);\r\n                }\r\n\r\n                if (msg.seatuid == GamePlayer.getInstance().uid) {\r\n                    if (msg.iscarry > 0) { //需要携带金币\r\n                        this.createCarryView(msg.carrytime);\r\n                    } else {\r\n                        this.showTableStatusBtn();\r\n                    }\r\n                }\r\n            } else {\r\n                this.delPlayer(msg.seatuid);\r\n                if (msg.seatuid == GamePlayer.getInstance().uid) { //如果是自己，则需要清理按键\r\n                    this.refreshAllPlayerOnTable(true);\r\n                    this.showTableStatusBtn();\r\n                }\r\n            }\r\n        } else if(msg.code > SocketRetCode.RET_SUCCESS) {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onCarryCoin : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n            cc.log(\"[%d,%d]\", msg.carryuid, GamePlayer.getInstance().uid);\r\n            this.tableStatus = msg.tstatus;\r\n            if (GamePlayer.getInstance().bowner != 1 && msg.carryuid == GamePlayer.getInstance().uid) {\r\n                ToastView.show(\"桌主已同意您的请求\");\r\n            }\r\n\r\n            var player = this.findPlayer(msg.carryuid);\r\n            if (player) {\r\n                cc.log(\"Bullfight_GameScene.onCarryCoin,carrycoin = \" + msg.carrycoin, \" coin=\", msg.coin);\r\n                player.status     = msg.ustatus;\r\n                player.TotalCarry = msg.carrycoin;\r\n                player.coin       = msg.coin;\r\n                player.gold       = msg.gold;\r\n                player.diamond    = msg.diamond;\r\n                var viewid = this.getPlayerViewIdBySeatId(player.seatid);\r\n                this.PlayerItemPos[viewid].setUserGold(player.coin);\r\n            }\r\n\r\n            if (msg.carryuid == GamePlayer.getInstance().uid) {\r\n                GamePlayer.getInstance().status = msg.ustatus;\r\n                this.showTableStatusBtn();\r\n            }\r\n        } else {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onLeaveGame : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onLeaveGame\");\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            GameSystem.getInstance().gamesvcid = 0;\r\n            GameSystem.getInstance().tableid   = 0;\r\n            cc.director.loadScene('HallScene');\r\n        }\r\n    },\r\n\r\n    onNotifyGameSwitch : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onNotifyGameSwitch\");\r\n        if (msg.isStart == 1)  {\r\n            this.tableStatus                = msg.tstatus;\r\n            GamePlayer.getInstance().status = msg.ustatus;\r\n\r\n            cc.log(\"Bullfight_GameScene.onNotifyGameSwitch,this.tableStatus = \" + this.tableStatus);\r\n\r\n            this.showTableStatusBtn();\r\n\r\n            if (this.sitPlayers.size() > 0 ) {\r\n                this.startClockTime(msg.readyTime);\r\n                this.Tips.string = \"准备中\";\r\n            } else {\r\n                this.Tips.string = \"请入座\";\r\n            }\r\n\r\n            this.clearAllPlayerCardItem();\r\n            this.clearCallBankerFlag();\r\n            this.clearUserWinScore();\r\n            this.clearUserHeadBanker();\r\n        }\r\n        else\r\n        {\r\n            //弹框提示玩家游戏解散\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onNotifyGameStart : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onNotifyGameStart\");\r\n\r\n        this.clearReadyFlag();\r\n        GamePlayer.getInstance().status = msg.ustatus;\r\n        this.tableStatus = msg.tstatus;\r\n        this.roundnum = msg.roundnum;\r\n        this.RoundNum.string = \"第\" + this.roundnum + \"局\";\r\n        this.Tips.string     = \"抢庄中\";\r\n\r\n        this.startClockTime(msg.calltime);\r\n\r\n        //在座位上\r\n        if (GamePlayer.getInstance().seatid >= 0) {\r\n            if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);\r\n                this.sendCardsToPlayer(viewId, msg.cards);\r\n            }\r\n        }\r\n\r\n        this.showTableStatusBtn();\r\n\r\n        //其他玩家\r\n        // Uid     uint32 `json:\"uid\"`\r\n        // UStatus int    `json:\"ustatus\"`\r\n        // SeatId  int    `json:\"seatid\"`\r\n        for (var index = 0;index < msg.seaters.length; index++) {\r\n            var item = msg.seaters[index];\r\n\r\n            var player = this.findPlayer(item.uid);\r\n            player.status = item.ustatus;\r\n            player.finalcoin  = 0;\r\n            player.bulltype   = 0;\r\n            player.cards      = [];\r\n            player.calltype   = 0;  //叫庄类型\r\n            player.bBanker    = 0;  //是否是庄家\r\n            player.betcoinmul = 0;  //下注倍数\r\n            player.bOpenCard  = 0;  //是否看牌\r\n\r\n            if (item.ustatus == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                var viewId = this.getPlayerViewIdBySeatId(item.seatid);\r\n                var cards = [0,0,0,0,0];\r\n                this.sendCardsToPlayer(viewId, cards);\r\n            } else {\r\n                //旁观\r\n                this.refreshLookFlag(item.uid);\r\n            }\r\n        }\r\n    },\r\n\r\n    onReady : function(msg) {\r\n        cc.log(\"Bullfight_GameScene.onReady readuid=\", msg.readyuid, \" ustatus=\", msg.ustatus);\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n\r\n            if (msg.readyuid == GamePlayer.getInstance().uid) {\r\n                GamePlayer.getInstance().status = msg.ustatus;\r\n                this.BtnReady.node.active = false;\r\n                this.clearTable();\r\n                this.Tips.string = \"等待其他玩家准备\";\r\n            }\r\n\r\n            this.updatePlayerStatus(msg.readyuid, msg.ustatus);\r\n\r\n            this.refreshReadyFlag(msg.readyuid);\r\n        }\r\n    },\r\n\r\n    onCallBanker : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onCallBanker\");\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            this.tableStatus = msg.tstatus;\r\n            if (msg.calluid == GamePlayer.getInstance().uid)\r\n            {\r\n                this.BtnCallBankerNode.active = false;\r\n                this.Tips.string = \"等带其他玩家抢庄\";\r\n            }\r\n\r\n            this.updatePlayerCallType(msg.calluid, msg.calltype);\r\n            this.refreshCallBankerFlag(msg.calluid, true);\r\n        } else {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onNotifySureBanker : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onNotifySureBanker\");\r\n        this.clearCallBankerFlag();\r\n        this.startClockTime(msg.bettime);\r\n        this.bankerUid   = msg.bankeruid;\r\n        this.m_iMaxBet   = msg.maxbetmul;\r\n        this.tableStatus = msg.tstatus;\r\n        GamePlayer.getInstance().status = msg.ustatus;\r\n\r\n        var player = this.findPlayer(msg.bankeruid);\r\n        player.bBanker = 1;\r\n        var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        this.PlayerItemPos[viewId].setPlayerBanker();\r\n\r\n        this.showTableStatusBtn();\r\n        this.Tips.string = \"下注中\";\r\n    },\r\n\r\n    onGameSwitch : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onGameSwitch\");\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            if (msg.isstart == 1)\r\n            {\r\n                this.BtnStart.node.active = false;\r\n                this.Tips.string = \"游戏开始\";\r\n            }\r\n            else\r\n            {\r\n                ToastView.show(\"房间解散成功，本局结束后将解散\");\r\n            }\r\n        } else if (msg.code == 14) {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    onBetCoin : function (msg) {\r\n        cc.log(\"Bullfight_GameScene.onBetCoin\");\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            this.tableStatus                = msg.tstatus;\r\n            GamePlayer.getInstance().status = msg.ustatus;\r\n\r\n            if ((msg.betuid == GamePlayer.getInstance().uid) &&\r\n                (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS))\r\n            {\r\n                //this.BetCoinNode.active = false;\r\n                if(GameSystem.getInstance().roomLevel == 2)\r\n                {\r\n                    this.BtnBetRoomCardNode.active = false;\r\n                }\r\n                else\r\n                {\r\n                    this.BtnBetNode.active = false;\r\n                }\r\n                this.Tips.string = \"等待其他玩家下注\";\r\n            }\r\n            var player = this.sitPlayers.get(msg.betuid);\r\n            player.betcoinmul = msg.betcoinmul;\r\n            var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);\r\n        }\r\n    },\r\n\r\n    onNotifyOpenCard : function (msg)\r\n    {\r\n        cc.log(\"onNotifyOpenCard...\");\r\n        GamePlayer.getInstance().status = msg.ustatus;\r\n        this.tableStatus = msg.tstatus;\r\n        this.startClockTime(msg.opentime);\r\n        this.Tips.string = \"看牌中\";\r\n\r\n        if (GamePlayer.getInstance().status != Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS)\r\n            return;\r\n\r\n        GamePlayer.getInstance().cards = msg.cards;\r\n        var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);\r\n        cc.log(\"Bullfight_GameScene.onNotifyOpenCard,viewId = \" + viewId);\r\n        this.openplayerCards(viewId, msg.cards, -1, -1);\r\n        this.showTableStatusBtn();\r\n        this.setCustomCardType(true);\r\n    },\r\n\r\n    onOpenCard : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n            this.tableStatus = msg.tstatus;\r\n\r\n            var player = this.findPlayer(msg.openuid);\r\n            player.bulltype  = msg.bulltype;\r\n            player.cards     = msg.cards;\r\n            player.bOpenCard = 1;\r\n            cc.log(\"Bullfight_GameScene.onOpenCard,player = \" + player);\r\n            var viewId = this.getPlayerViewIdBySeatId(msg.seatid);\r\n            this.setCardType(viewId, player.bulltype, true);\r\n            this.openplayerCards(viewId, player.cards, msg.index1, msg.index2);\r\n\r\n            if (msg.openuid == GamePlayer.getInstance().uid) {\r\n                this.setCustomCardType(false);\r\n                this.OpenCardNode.active = false;\r\n                this.Tips.string = \"等待其他玩家看牌\";\r\n            }\r\n        }\r\n    },\r\n\r\n    onNotifyOneGameResult : function (msg) {\r\n        this.tableStatus                = msg.tstatus;\r\n        GamePlayer.getInstance().status = msg.ustatus;\r\n\r\n        cc.log(\"onNotifyOneGameResult msg.ustatus=\", msg.ustatus, \" status=\", GamePlayer.getInstance().status);\r\n\r\n        this.OpenCardNode.active = false;\r\n        this.setCustomCardType(false);\r\n        // this.clearAllPlayerCardItem();\r\n        // this.showTableStatusBtn();\r\n        // this.clearCallBankerFlag();\r\n        this.startClockTime(msg.overtime);\r\n        this.Tips.string = \"本局结算\";\r\n\r\n        for (var index = 0;index < msg.seaters.length;index++) {\r\n            if (msg.seaters[index].ustatus == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS) {\r\n                var player = this.findPlayer(msg.seaters[index].uid);\r\n                player.status = msg.seaters[index].ustatus;\r\n                player.coin   = msg.seaters[index].coin;\r\n\r\n                var viewid = this.getPlayerViewIdBySeatId(msg.seaters[index].seatid);\r\n                this.PlayerItemPos[viewid].setUserWinScore(msg.seaters[index].finalcoin);\r\n                this.PlayerItemPos[viewid].setUserGold(msg.seaters[index].coin);\r\n\r\n                if (msg.seaters[index].uid == GamePlayer.getInstance().uid) {\r\n                    if (msg.seaters[index].finalcoin > 0)\r\n                    {\r\n                        var pos = this.CallBankerFlag[viewid].node.position;\r\n                        this.GiftAnimation.playWinAnimation(pos);\r\n\r\n                        MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_WIN);\r\n                    } else {\r\n                        MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_LOSE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    doKickOut : function (msg) {\r\n        if (msg.code != SocketRetCode.RET_SUCCESS) //选择携带金币超时\r\n        {\r\n            this.delPlayer(msg.seatuid);\r\n            cc.log(\"Bullfight_GameScene.doKickOut,uid = \" + GamePlayer.getInstance().uid);\r\n            if (msg.seatuid == GamePlayer.getInstance().uid) {\r\n                cc.log(\"Bullfight_GameScene.doKickOut, my be kickout.\");\r\n                GamePlayer.getInstance().status = 0;\r\n                GamePlayer.getInstance().seatid = -1;\r\n                this.refreshAllPlayerOnTable(true);\r\n                this.showTableStatusBtn();\r\n                if (msg.code != SocketRetCode.RET_SUCCESS) {\r\n                    ToastView.show(msg.desc);\r\n                }\r\n\r\n            }\r\n        }\r\n    },\r\n\r\n    onNotifyNotCallbanker : function (msg) {\r\n        \r\n    },\r\n\r\n    onNotifyNotBet : function (msg) {\r\n        \r\n    },\r\n\r\n    NotifyTotalGameResult : function (msg) {\r\n        this.createTotalGameResult(msg);\r\n    },\r\n    \r\n    createTotalGameResult : function (msg) {\r\n        var gameEnd = cc.instantiate(this.GameTotalResult);\r\n        this.node.addChild(gameEnd);\r\n        gameEnd.setPosition(cc.p(0,0));\r\n        gameEnd.getComponent(\"Bullfight_TotalResult\").setGameData(msg,this.GameScene);\r\n    },\r\n    \r\n    onGetTableDetail : function (msg) {\r\n        if(msg.code < SocketRetCode.RET_SUCCESS)\r\n            return ;\r\n\r\n        this.tableRuleInfo = {\r\n            gametype   : msg.gametype,\r\n            minante    : msg.minante,\r\n            mincarry   : msg.mincarry,\r\n            maxcarry   : msg.maxcarry,\r\n            livetime   : msg.livetime,\r\n            seats      : msg.seats,\r\n            bullmul    : msg.bullmul,\r\n            totalcarry : msg.totalcarry,\r\n        };\r\n\r\n        cc.log(\"onGetTableDetail mincarry=\", msg.minmincarry, \" maxcarry=\", msg.maxcarry);\r\n\r\n        this.roundnum = msg.roundnum;\r\n        this.RoundNum.string = \"第\" + this.roundnum + \"局\";\r\n        GameSystem.getInstance().privateid = msg.privateid;\r\n        this.RoomId.string   = \"ID:\" + GameSystem.getInstance().privateid ;\r\n\r\n        cc.log(\"onGetTableDetail roundnum=\", this.roundnum, \" privateid=\", GameSystem.getInstance().privateid);\r\n\r\n        GamePlayer.getInstance().TotalCarry = msg.carrycoin;\r\n        GamePlayer.getInstance().bowner     = msg.bowner;\r\n\r\n        // if (msg.bowner == 1) {\r\n        //     this.BtnControl.node.active = true\r\n        // } else {\r\n        //     this.BtnControl.node.active = false\r\n        // }\r\n\r\n        this.m_iMaxPlayers = msg.seats;\r\n        this.tableStatus   = msg.tstatus;\r\n        this.bankerUid     = msg.bankeruid;\r\n        this.updateClockTime(msg.timeout);\r\n\r\n        for(var index = 0;index < msg.seaters.length;index++)\r\n        {\r\n            var player        = new Player;\r\n            player.uid        = msg.seaters[index].uid;\r\n            player.name       = msg.seaters[index].name;\r\n            player.headurl    = msg.seaters[index].headurl;\r\n            player.sex        = msg.seaters[index].sex;\r\n            player.gold       = msg.seaters[index].gold;\r\n            player.diamond    = msg.seaters[index].diamond;\r\n            player.coin       = msg.seaters[index].coin;\r\n            player.status     = msg.seaters[index].status;\r\n            player.seatid     = msg.seaters[index].seatid;\r\n            player.TotalCarry = msg.seaters[index].total;\r\n            player.winGold    = msg.seaters[index].win;\r\n            player.calltype   = msg.seaters[index].calltype;\r\n            player.betcoinmul = msg.seaters[index].betmul;\r\n            player.cards      = msg.seaters[index].cards;\r\n            player.bulltype   = msg.seaters[index].bulltype;\r\n            player.finalcoin  = msg.seaters[index].finalcoin;\r\n            player.TotalRound = msg.seaters[index].totalround; //总手数\r\n            player.TotalTable = msg.seaters[index].totaltable; //总局数\r\n            player.bOpenCard  = msg.seaters[index].bopencard;  //\r\n\r\n            if (player.uid == GamePlayer.getInstance().uid) {\r\n                this.m_iMaxBet   = msg.seaters[index].maxbetmul;\r\n            }\r\n\r\n            if (this.bankerUid == player.uid) {\r\n                player.bBanker = 1;\r\n            } else {\r\n                player.bBanker = 0;\r\n            }\r\n            cc.log(\"onGetTableDetail uid=\", player.uid, \" isbanker=\", player.bBanker);\r\n\r\n            this.addPlayer(player);\r\n        }\r\n        this.refreshAllPlayerOnTable(true);\r\n    },\r\n\r\n    /***********send Message ********************/\r\n\r\n    sendReady : function () {\r\n        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_READY_CMD_ID).send();\r\n    },\r\n\r\n    sendCallBanker : function (callType) {\r\n        var data = {\r\n            calltype : callType,\r\n        };\r\n        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_CALL_BANKER_CMD_ID).send(data);\r\n    },\r\n    \r\n    sendSwitchGame : function (isStart) {\r\n        var data = {\r\n            isstart : isStart,\r\n        };\r\n        MessageFactory.createMessageReq(US_REQ_GAME_SWITCH_CMD_ID).send(data);\r\n    },\r\n\r\n    sendBetCoinReq : function (betcoin) {\r\n        var data = {\r\n            betcoinmul : this.m_iMyBetCoin,\r\n        };\r\n        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_BET_COIN_CMD_ID).send(data);\r\n    },\r\n    \r\n    sendOpenCard : function () {\r\n        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_OPEN_CARD_CMD_ID).send();\r\n    },\r\n    \r\n    /***********************BtnCallback*************************/\r\n\r\n    callbackBtnMusic : function (toggle,CustomEventData) {\r\n        var isCheck = toggle.isChecked;\r\n        if (isCheck)\r\n        {\r\n            MusicMgr.resumeBackgroundMusic();\r\n        }\r\n        else\r\n        {\r\n            MusicMgr.pauseBackgroundMusic();\r\n        }\r\n    },\r\n    \r\n    callBackBetBtnRoomCard : function (event,CustomEventData) {\r\n        var node = event.target;\r\n        var btn = node.getName();\r\n\r\n\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n\r\n\r\n        cc.log(\"Bullfight_GameScene.callBackBetBtnRoomCard,btn = \" + btn);\r\n\r\n        if(btn == \"BtnBet1\")\r\n        {\r\n            this.m_iMyBetCoin = 1;\r\n            cc.log(\"[BtnBet1] m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n            this.sendBetCoinReq();\r\n        }\r\n        else if(btn == \"BtnBet3\")\r\n        {\r\n            this.m_iMyBetCoin = 3;\r\n            cc.log(\"[BtnBet2] m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n            this.sendBetCoinReq();\r\n        }\r\n        else if(btn == \"BtnBet5\")\r\n        {\r\n            this.m_iMyBetCoin = 5;\r\n            this.BetArray.push(5);\r\n            cc.log(\"[BtnBet5]  m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n            this.sendBetCoinReq();\r\n        }\r\n    },\r\n\r\n    callbackBtn : function (event,CustomEventData) {\r\n        var node = event.target;\r\n        var btn = node.getName();\r\n        \r\n\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        \r\n        \r\n        cc.log(\"Bullfight_GameScene.callbackBtn,btn = \" + btn);\r\n\r\n        if (btn == \"BtnMenu\")\r\n        {\r\n            this.createMenu();\r\n        }\r\n        else if (btn == \"BtnSuccess\")\r\n        {\r\n            var playerList = cc.instantiate(this.PlayersList);\r\n            this.node.addChild(playerList);\r\n            playerList.setPosition(cc.p(0,0));\r\n        }\r\n        else if (btn == \"BtnSpeech\")\r\n        {\r\n            //this.createTotalGameResult();\r\n            //this.GiftAnimation.playGiftAnimation(1);\r\n        }\r\n        else if (btn == \"BtnMusicOn\")\r\n        {\r\n            this.BtnMusicOff.node.active = true;\r\n            this.BtnMusicOn.node.active = false;\r\n            \r\n            GameSystem.getInstance().VolumeState = 1;\r\n            \r\n            MusicMgr.pauseBackgroundMusic();\r\n        }\r\n        else if (btn == \"BtnMusicOff\")\r\n        {\r\n            this.BtnMusicOff.node.active = false;\r\n            this.BtnMusicOn.node.active = true;\r\n            \r\n            GameSystem.getInstance().VolumeState = 0;\r\n            \r\n            MusicMgr.resumeBackgroundMusic();\r\n        }\r\n        else if(btn == \"BtnStart\")\r\n        {\r\n            this.sendSwitchGame(1);\r\n        }\r\n        else if(btn == \"BtnReady\")\r\n        {\r\n            this.sendReady();\r\n        }\r\n        else if(btn == \"BtnNotCall\")\r\n        {\r\n            this.sendCallBanker(1);\r\n        }\r\n        else if(btn == \"BtnCall\")\r\n        {\r\n            this.sendCallBanker(2);\r\n        }\r\n        else if(btn == \"BtnSuperCall\")\r\n        {\r\n            this.sendCallBanker(3);\r\n        }\r\n        else if(btn == \"BtnBet1\")\r\n        {\r\n            this.m_iMyBetCoin += 1;\r\n            this.BetArray.push(1);\r\n            cc.log(\"[BtnBet1] this.BetArray = \", this.BetArray, \" m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n        }\r\n        else if(btn == \"BtnBet2\")\r\n        {\r\n            this.m_iMyBetCoin += 2;\r\n            this.BetArray.push(2);\r\n            cc.log(\"[BtnBet2] this.BetArray = \", this.BetArray,  \" m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n        }\r\n        else if(btn == \"BtnBet5\")\r\n        {\r\n            this.m_iMyBetCoin +=5;\r\n            this.BetArray.push(5);\r\n            cc.log(\"[BtnBet5] this.BetArray = \", this.BetArray,  \" m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n        }\r\n        else if(btn == \"BtnBet10\")\r\n        {\r\n            this.m_iMyBetCoin += 10;\r\n            this.BetArray.push(10);\r\n            cc.log(\"[BtnBet10] this.BetArray = \", this.BetArray,  \" m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            this.updateMaxBet();\r\n        }\r\n        else if(btn == \"BtnBetSure\")\r\n        {\r\n            this.sendBetCoinReq();\r\n        }\r\n        else if(btn == \"BtnBetCancle\")\r\n        {\r\n            if (this.BetArray.length > 0) {\r\n                var bet = this.BetArray.pop();\r\n                this.m_iMyBetCoin -= bet;\r\n                cc.log(\"[BtnBetCancle] this.BetArray = \", this.BetArray,  \" m_iMyBetCoin=\", this.m_iMyBetCoin, \" bet=\" + bet);\r\n                if (this.m_iMyBetCoin <= 0) {\r\n                    this.m_iMyBetCoin = 1;\r\n                }\r\n                this.updateMaxBet();\r\n            } else {\r\n                cc.warn(\"[BtnBetCancle] not this.BetArray = \", this.BetArray,  \" m_iMyBetCoin=\", this.m_iMyBetCoin);\r\n            }\r\n        }\r\n        else if(btn == \"BtnNoBullfight\")\r\n        {\r\n            this.sendOpenCard();\r\n        }\r\n        else if(btn == \"BtnBullfight\")\r\n        {\r\n            this.sendOpenCard();\r\n        }\r\n        else if(btn == \"BtnExpression\")\r\n        {\r\n            this.createExpression();\r\n        }\r\n        else if(btn == \"BtnRoomInfo\")\r\n        {\r\n            this.createRoomInfoView();\r\n        }\r\n    },\r\n\r\n    createExpression : function () {\r\n        var ExpressionView = cc.instantiate(this.ExpressionView);\r\n        this.node.addChild(ExpressionView);\r\n        ExpressionView.setPosition(cc.p(0,0));\r\n    },\r\n\r\n    updateMaxBet : function () {\r\n        if (this.m_iMaxBet != 0 && this.m_iMyBetCoin > this.m_iMaxBet)\r\n        {\r\n            ToastView.show(\"本局最大下注为：\" + this.m_iMaxBet*this.tableRuleInfo.minante);\r\n            var bigBet        = this.m_iMyBetCoin - this.m_iMaxBet;\r\n            var lastPush      = this.BetArray.pop();\r\n            var diffBet       = lastPush - bigBet;\r\n            this.m_iMyBetCoin = this.m_iMaxBet;\r\n            if (diffBet <= 0) {\r\n                cc.warn(\"updateMaxBet ignore diffBet=\", diffBet);\r\n                return;\r\n            }\r\n            this.BetArray.push(diffBet);\r\n            cc.log(\"updateMaxBet diffBet=\", diffBet);\r\n        }\r\n\r\n        var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);\r\n        this.setPlayerBetCount(viewId, this.m_iMyBetCoin * this.tableRuleInfo.minante);\r\n\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_BET);\r\n        \r\n    },\r\n\r\n    createMenu : function () {\r\n        cc.log(\"Bullfight_GameScene.createMenu\");\r\n        var self = this;\r\n        var menuPop  = null;\r\n        if(GameSystem.getInstance().roomLevel == 2)\r\n        {\r\n            var menuPop  = cc.instantiate(this.MenuRoomCard);\r\n            this.node.addChild(menuPop);\r\n            menuPop.setPosition(cc.p(0,0));\r\n            menuPop.getComponent(\"Bullfighgt_Menu\").setCallBackCarry(function () {\r\n                cc.log(\"Bullfight_GameScene, Bullfighgt_Menu\");\r\n                self.createCarryView(20);\r\n            });\r\n            menuPop.getComponent(\"Bullfighgt_Menu\").setRuleInfo(this.tableRuleInfo);\r\n        }\r\n        else\r\n        {\r\n            var menuPop  = cc.instantiate(this.Menu);\r\n            this.node.addChild(menuPop);\r\n            menuPop.setPosition(cc.p(0,0));\r\n            menuPop.getComponent(\"Bullfighgt_Menu\").setCallBackCarry(function () {\r\n                cc.log(\"Bullfight_GameScene, Bullfighgt_Menu\");\r\n                self.createCarryView(20);\r\n            });\r\n            menuPop.getComponent(\"Bullfighgt_Menu\").setRuleInfo(this.tableRuleInfo);\r\n        }\r\n\r\n    },\r\n    \r\n    createRoomInfoView : function () {\r\n        cc.log(\"Bullfight_GameScene.createMenu\");\r\n        var RoomInfoView = cc.instantiate(this.RoomInfoView);\r\n        this.node.addChild(RoomInfoView);\r\n        RoomInfoView.setPosition(cc.p(0,0));\r\n        RoomInfoView.getComponent(\"Bullfight_RoomInfo\").setRoomInfo(this.tableRuleInfo);\r\n    },\r\n    \r\n    createCarryView : function (time) {\r\n        var carryPop = cc.instantiate(this.CarryView);\r\n        this.node.addChild(carryPop);\r\n        carryPop.setPosition(cc.p(0,0));\r\n        carryPop.getComponent(\"Bullfight_CarryView\").setCarryTime(time);\r\n        cc.log(\"Bullfight_GameScene.createCarryView mincarry=\", this.tableRuleInfo.mincarry,\r\n                                                \" maxcarry=\", this.tableRuleInfo.maxcarry,\r\n                                                \" totalcarry=\", this.tableRuleInfo.totalcarry);\r\n\r\n        carryPop.getComponent(\"Bullfight_CarryView\").setMinAndMax(this.tableRuleInfo.mincarry,\r\n            this.tableRuleInfo.maxcarry, this.tableRuleInfo.totalcarry);\r\n    },\r\n\r\n    updatePlayerCallType : function(uid, callType) {\r\n        var player = this.sitPlayers.get(uid);\r\n        player.calltype = callType;\r\n    },\r\n\r\n    refreshCallBankerFlag : function(callUid, bMusic)\r\n    {\r\n        cc.log(\"refreshCallBankerFlag uid=\", callUid);\r\n        var player = this.findPlayer(callUid);\r\n        var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        this.CallBankerFlag[viewId].node.active = true;\r\n        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[(player.calltype - 1) < 0 ? 0 : (player.calltype - 1)];\r\n\r\n        if (bMusic) {\r\n        \tMusicMgr.playEffect((player.calltype - 1) == 0 ?  Bullfight_AudioConfig.AUDIO_MAN_NOCALLBANKER : Bullfight_AudioConfig.AUDIO_MAN_CALLBANKER);\r\n        }\r\n    },\r\n\r\n    refreshReadyFlag : function(readyUid) {\r\n        var player = this.findPlayer(readyUid);\r\n        var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        cc.log(\"refreshReadyFlag, uid=\", readyUid, \" seatid=\", player.seatid, \" viewid=\", viewId);\r\n        this.CallBankerFlag[viewId].node.active = true;\r\n        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[3];\r\n    },\r\n\r\n    refreshLookFlag : function(uid) {\r\n        var player = this.findPlayer(uid);\r\n        var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        cc.log(\"refreshLookFlag, uid=\", uid, \" seatid=\", player.seatid, \" viewid=\", viewId);\r\n        this.CallBankerFlag[viewId].node.active = true;\r\n        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[4];\r\n    },\r\n    \r\n    clearCallBankerFlag : function () {\r\n        cc.log(\"clearCallBankerFlag\");\r\n        for (var index = 0; index < BULLFIGHT_MAX_PLAYER; index++)\r\n        {\r\n            this.CallBankerFlag[index].node.active = false;\r\n        }\r\n    },\r\n    \r\n    clearReadyFlag : function () {\r\n        this.clearCallBankerFlag();\r\n    },\r\n\r\n    clearUserHeadBanker : function () {\r\n        for(var index = 0;index < 6;index++)\r\n        {\r\n            this.PlayerItemPos[index].clearPlayerBanker();\r\n        }\r\n    },\r\n\r\n    clearUserWinScore: function () {\r\n        for (var index = 0;index < this.PlayerItemPos.length; index++)\r\n        {\r\n            this.PlayerItemPos[index].clearUserWinScore();\r\n        }\r\n    },\r\n\r\n    /**************Clock********************/\r\n\r\n    startClockTime : function (time) {\r\n        this.time = time;\r\n        this.clock.node.active = true;\r\n        this.clock.updateTimeLabel(this.time);\r\n        this.schedule(this.updateClockTime, 1);\r\n    },\r\n\r\n    updateClockTime : function () {\r\n        this.clock.updateTimeLabel(this.time);\r\n        this.time--;\r\n        if (this.time < 0)\r\n        {\r\n            this.clock.node.active = false;\r\n            this.tableStatusTimeOut();\r\n            this.unschedule(this.updateClockTime);\r\n        }\r\n    },\r\n    \r\n    tableStatusTimeOut : function () {\r\n        switch (this.tableStatus)\r\n        {\r\n           case Bullfight_TableStatus.E_TABLE_CLOSE_STATUS : //-2, //桌子关闭\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_NOT_START_STATUS : //0,  //桌子为NULL\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_READY_STATUS : //1,  //桌子准备\r\n                //this.sendReady();\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_CALL_STATUS  : //2,  //叫庄\r\n                //this.sendCallBanker(1);\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_BET_STATUS   : //3,  //下注\r\n               //this.sendBetCoinReq(this.m_iMyBetCoin);\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_OPEN_STATUS  : //4,  //开牌\r\n               //this.sendOpenCard();\r\n                break;\r\n           case Bullfight_TableStatus.E_TABLE_OVER_STATUS  : //5,  //游戏结束\r\n                break;\r\n        }\r\n    },\r\n\r\n    showTableStatusBtn : function () {\r\n        this.BtnStart.node.active     = false;\r\n        this.BtnReady.node.active     = false;\r\n        this.BtnCallBankerNode.active = false;\r\n        //this.BetCoinNode.active  = false;\r\n        if(GameSystem.getInstance().roomLevel == 2)\r\n        {\r\n            this.BtnBetRoomCardNode.active = false;\r\n        }\r\n        else\r\n        {\r\n            this.BtnBetNode.active = false;\r\n        }\r\n        this.OpenCardNode.active = false;\r\n        this.clearCallBankerFlag();\r\n\r\n        if ((GamePlayer.getInstance().bowner == 1) && (this.tableStatus == Bullfight_TableStatus.E_TABLE_NOT_START_STATUS)) {\r\n            cc.log(\"showTableStatusBtn bowner=\", GamePlayer.getInstance().bowner);\r\n            this.BtnStart.node.active = true;\r\n            this.Tips.node.string = \"\";\r\n        }\r\n\r\n        if (GamePlayer.getInstance().seatid == -1) {\r\n            cc.log(\"showTableStatusBtn seatid=\", GamePlayer.getInstance().seatid);\r\n            return;\r\n        }\r\n\r\n        cc.log(\"showTableStatusBtn, this.tableStatus  = \" + this.tableStatus);\r\n        cc.log(\"showTableStatusBtn, this.playerStatus = \" + GamePlayer.getInstance().status);\r\n\r\n        switch (this.tableStatus) {\r\n            case Bullfight_TableStatus.E_TABLE_CLOSE_STATUS : //-2, //桌子关闭\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_NOT_START_STATUS : //0,  //桌子为NULL\r\n                if (GamePlayer.getInstance().bowner == 1) {\r\n                    this.BtnStart.node.active = true;\r\n                }\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_READY_STATUS : //1,  //桌子准备\r\n                //坐下or结束\r\n                if ((GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_SIT_STATUS) ||\r\n                    (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS)) {\r\n                    this.BtnReady.node.active = true;\r\n                }\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_CALL_STATUS  : //2,  //叫庄\r\n                // 在游戏\r\n                if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                    this.BtnCallBankerNode.active = true;\r\n                }\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_BET_STATUS   : //3,  //下注\r\n                //不是庄,且在游戏\r\n                if ((this.bankerUid != GamePlayer.getInstance().uid) &&\r\n                    (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS)) {\r\n                    //this.BetCoinNode.active = true;\r\n                    if(GameSystem.getInstance().roomLevel == 2)\r\n                    {\r\n                        this.BtnBetRoomCardNode.active = true;\r\n                    }\r\n                    else\r\n                    {\r\n                        this.BtnBetNode.active = true;\r\n                    }\r\n                }\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_OPEN_STATUS  : //4,  //开牌\r\n                if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                    this.OpenCardNode.active = true;\r\n                }\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_OVER_STATUS  : //5,  //游戏结束\r\n                break;\r\n\r\n            case Bullfight_TableStatus.E_TABLE_IDLE_STATUS:\r\n                break;\r\n        }\r\n    },\r\n\r\n    /************   CardItem  ************************/\r\n    \r\n    sendCardsToPlayer : function (viewId, cardlist) {\r\n        this.CardItem[viewId].sendCardAnimation(cardlist);\r\n    },\r\n    \r\n    openplayerCards : function (viewId, cardlist, index1, index2) {\r\n        this.CardItem[viewId].openCardAnimation(cardlist, index1, index2);\r\n    },\r\n\r\n    clearAllPlayerCardItem : function () {\r\n        for(var index = 0;index < BULLFIGHT_MAX_PLAYER;index++)\r\n        {\r\n            this.CardItem[index].clearCardItem();\r\n        }\r\n    },\r\n    \r\n    setCardType : function (viewId, type, bMusic) {\r\n        this.CardItem[viewId].setCardType(type);\r\n\r\n        if (!bMusic) {\r\n            return;\r\n        }\r\n\r\n        switch (type)\r\n        {\r\n            case Bullfight_CardType.E_BULL_ZERO:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL0);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_ONE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL1);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_TWO:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL2);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_THREE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL3);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_FOUR:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL4);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_FIVE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL5);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_SIX:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL6);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_SEVEN:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL7);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_EIGHT:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL8);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_NINE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL9);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_PAIR:\r\n            \t// MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL10);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_BULL:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL10);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_LINE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_LINE);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_THREE_TWO:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_3AND2);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_BOMB:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BOMB);\r\n                break;\r\n\r\n            case Bullfight_CardType.E_BULL_FIVE_KING:\r\n                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_5FLOWER);\r\n                break;\r\n\r\n            case Bullfight_CardType.E_BULL_SMALL_FIVE:\r\n            \tMusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_5LITTLEBULL);\r\n                break;\r\n            case Bullfight_CardType.E_BULL_MAX:\r\n                break;\r\n        }\r\n    },\r\n    \r\n    setPlayerBetCount : function (viewId, count) {\r\n        this.CardItem[viewId].setPlayerBetCount(count);\r\n    },\r\n    \r\n    setCustomCardType : function (active) {\r\n        this.CardItem[5].setCustomCardType(active);\r\n    },\r\n    \r\n\r\n    /********** PLayer   ***************/\r\n    delPlayer : function( uid) {\r\n        let it = this.findPlayer(uid);\r\n        cc.log(\"Bullfight_GameScene.delPlayer,uid = \" + uid + \" it = \" + it);\r\n        if (it != null) {\r\n            this.removeOnePlayerInTable(it);\r\n            if (this.sitPlayers.containsKey(uid)) {\r\n                cc.log(\"Bullfight_GameScene.delPlayer, delete uid= \" + uid + \" by sitPlayers\");\r\n                this.sitPlayers.delete(uid);\r\n                if(uid == GamePlayer.getInstance().uid) {\r\n                    cc.log(\"Bullfight_GameScene.delPlayer, uid= \" + uid + \" seatid=-1\");\r\n                    GamePlayer.getInstance().seatid = -1;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    delAllPlayer : function ()\r\n    {\r\n        var self = this ;\r\n\r\n        this.sitPlayers.forEach(function (ud) {\r\n            self.removeOnePlayerInTable(ud);\r\n        });\r\n        GamePlayer.getInstance().seatid = -1;\r\n\r\n        this.sitPlayers.clear();\r\n        this.sitPlayers = new Map();\r\n    },\r\n\r\n    addPlayer : function(playerinfo)\r\n    {\r\n        this.delPlayer(playerinfo.uid);\r\n        if (this.sitPlayers.size() < this.m_iMaxPlayers) {\r\n            if (playerinfo.uid == GamePlayer.getInstance().uid) {\r\n                GamePlayer.getInstance().Copy(playerinfo);\r\n                this.sitPlayers.set(GamePlayer.getInstance().uid, GamePlayer.getInstance());\r\n                // this.refreshAllPlayerOnTable();\r\n            } else {\r\n                this.sitPlayers.set(playerinfo.uid, playerinfo);\r\n                // this.showOnePlayerInTable(playerinfo);\r\n            }\r\n        }\r\n    },\r\n\r\n    refreshAllPlayerOnTable : function (bShowDetail) {\r\n        this.clearAllPlayerCardItem();\r\n        this.removeAllPlayerInTable();\r\n\r\n        this.showTableStatusBtn();\r\n\r\n    \r\n        var action = cc.sequence(cc.fadeOut(0), cc.fadeIn(0.5)).speed(0.4);\r\n        this.PlayNode.runAction(action);\r\n    \r\n        cc.log(\"Bullfight_GameScene.this.sitPlayers = \" + this.sitPlayers.size());\r\n        for(var index = 0; index < this.sitPlayers.size(); index++)\r\n        {\r\n            var player = this.sitPlayers.element(index).value;\r\n            if (player == undefined) {\r\n                cc.log(\"refreshAllPlayerOnTable player is undefined.\");\r\n                continue;\r\n            }\r\n\r\n            this.showOnePlayerInTable(player);\r\n\r\n            if (!bShowDetail)\r\n                continue;\r\n\r\n            var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n\r\n            switch (this.tableStatus) {\r\n                case Bullfight_TableStatus.E_TABLE_READY_STATUS:\r\n                    cc.log(\"E_TABLE_READY_STATUS, uid=\", player.uid, \" player.status=\", player.status);\r\n                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_READY_STATUS) {\r\n                        this.refreshReadyFlag(player.uid);\r\n                    }\r\n                    break;\r\n\r\n                case Bullfight_TableStatus.E_TABLE_CALL_STATUS:\r\n                    cc.log(\"E_TABLE_CALL_STATUS, uid=\", player.uid, \" player.status=\", player.status);\r\n                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                        if (player.calltype > 0) {\r\n                            this.refreshCallBankerFlag(player.uid, false);\r\n                        }\r\n\r\n                        if (player.uid == GamePlayer.getInstance().uid) {\r\n                            this.sendCardsToPlayer(viewId, player.cards);\r\n                        } else {\r\n                            var cards = [0,0,0,0,0];\r\n                            this.sendCardsToPlayer(viewId, cards);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case Bullfight_TableStatus.E_TABLE_BET_STATUS   : //3,  //下注\r\n                    cc.log(\"E_TABLE_BET_STATUS, uid=\", player.uid, \" player.status=\", player.status, \" isbanker=\",player.bBanker);\r\n                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                        if (player.bBanker == 1) {\r\n                            cc.log(\"E_TABLE_BET_STATUS, uid=\", player.uid, \" setbanker\");\r\n                            var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n                            this.PlayerItemPos[viewId].setPlayerBanker();\r\n                        } else if (player.betcoinmul > 0) {\r\n                            cc.log(\"E_TABLE_BET_STATUS, uid=\", player.uid, \" betcoinmul=\", player.betcoinmul);\r\n                            var viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n                            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);\r\n                        }\r\n\r\n                        if (player.uid == GamePlayer.getInstance().uid) {\r\n                            this.sendCardsToPlayer(viewId, player.cards);\r\n                            if (player.bBanker == 0) {\r\n                                this.showTableStatusBtn();\r\n                            }\r\n                        } else {\r\n                            var cards = [0,0,0,0,0];\r\n                            this.sendCardsToPlayer(viewId, cards);\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case  Bullfight_TableStatus.E_TABLE_OPEN_STATUS: //4,  //开牌\r\n                    cc.log(\"E_TABLE_OPEN_STATUS, uid=\", player.uid, \" player.status=\", player.status);\r\n\r\n                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {\r\n                        if (player.bBanker == 1) {\r\n                            cc.log(\"E_TABLE_OPEN_STATUS, uid=\", player.uid, \" setbanker\");\r\n                            this.PlayerItemPos[viewId].setPlayerBanker();\r\n\r\n                        } else if (player.betcoinmul > 0) {\r\n                            cc.log(\"E_TABLE_OPEN_STATUS, uid=\", player.uid, \" betcoinmul=\", player.betcoinmul);\r\n                            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);\r\n                        }\r\n\r\n                        if (player.uid == GamePlayer.getInstance().uid) {\r\n                            if (player.bOpenCard == 1) {\r\n                                this.setCardType(viewId, player.bulltype, false);\r\n                                this.openplayerCards(viewId, player.cards, -1, -1);\r\n                                this.setCustomCardType(false);\r\n                                this.OpenCardNode.active = false;\r\n                                this.Tips.string = \"等待其他玩家看牌\";\r\n                            } else {\r\n                                this.openplayerCards(viewId, player.cards, -1, -1);\r\n                                this.showTableStatusBtn();\r\n                                this.setCustomCardType(true);\r\n                            }\r\n                        } else {\r\n                            if (player.bOpenCard ==  1) {\r\n                                this.setCardType(viewId, player.bulltype, false);\r\n                                this.openplayerCards(viewId, player.cards, -1, -1);\r\n                            } else {\r\n                                var cards = [0,0,0,0,0];\r\n                                this.sendCardsToPlayer(viewId, cards);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n\r\n                case Bullfight_TableStatus.E_TABLE_OVER_STATUS  : //5,  //游戏结束\r\n                    cc.log(\"E_TABLE_OVER_STATUS, uid=\", player.uid, \" player.status=\", player.status);\r\n                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS) {\r\n\r\n                        this.PlayerItemPos[viewId].setUserWinScore(player.finalcoin);\r\n\r\n                        if (player.uid == GamePlayer.getInstance().uid && msg.seaters[index].finalcoin > 0) {\r\n                            var pos = this.CallBankerFlag[viewid].node.position;\r\n                            this.GiftAnimation.playWinAnimation(pos);\r\n                        }\r\n                    }\r\n\r\n                case Bullfight_TableStatus.E_TABLE_IDLE_STATUS:\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n\r\n    showOnePlayerInTable : function (player) {\r\n        if (player == undefined) {\r\n            cc.error(\"Bullfight_GameScene.showOnePlayerInTable , player == undefined\");\r\n            return;\r\n        }\r\n        let viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        cc.log(\"Bullfight_GameScene.showOnePlayerInTable, seatid = \" + player.seatid, \" viewId = \" + viewId)\r\n        this.PlayerItemPos[viewId].updatePlayerInfo(player);\r\n    },\r\n\r\n    playerStandUpOrDown : function (player,action) {\r\n    },\r\n\r\n    removeOnePlayerInTable : function(player)\r\n    {\r\n        cc.log(\"Bullfight_GameScene.removeOnePlayerInTable,status = \" + player.status);\r\n        let viewId = this.getPlayerViewIdBySeatId(player.seatid);\r\n        cc.log(\"Bullfight_GameScene.removeOnePlayerInTable, viewId = \" + viewId + \",player.seatid = \" + player.seatid);\r\n        this.PlayerItemPos[viewId].clearPlayerInfo();\r\n\r\n    },\r\n\r\n    removeAllPlayerInTable : function () {\r\n        for(var index = 0;index < 6;index++)\r\n        {\r\n            this.PlayerItemPos[index].clearPlayerInfo();\r\n        }\r\n    },\r\n\r\n    getPlayerViewIdBySeatId : function (seatId)\r\n    {\r\n        let selfViewId = window.BULLFIGHT_MAX_PLAYER - 1;\r\n        let viewId     = seatId;\r\n\r\n        if (GamePlayer.getInstance().seatid  >= 0) {\r\n            viewId =  (seatId - (GamePlayer.getInstance().seatid - selfViewId) + window.BULLFIGHT_MAX_PLAYER)%window.BULLFIGHT_MAX_PLAYER;\r\n            cc.log(\"Bullfight_GameScene.getPlayerViewIdBySeatId, seatId = %d,viewId = %d\",seatId,viewId, \" myseatid=\", GamePlayer.getInstance().seatid);\r\n        } else {\r\n            cc.log(\"Bullfight_GameScene.getPlayerViewIdBySeatId, seatId = %d,viewId = %d\",seatId,viewId);\r\n        }\r\n        return viewId;\r\n    },\r\n\r\n    updatePlayerStatus : function(uid, status) {\r\n        var player = this.sitPlayers.get(uid);\r\n        player.status = status;\r\n    },\r\n\r\n    findPlayer : function( uid)\r\n    {\r\n        var player = this.sitPlayers.get(uid);\r\n        return player;\r\n    },\r\n\r\n    findPlayerBySeatid : function(seatid)\r\n    {\r\n        let player = null ;\r\n        this.sitPlayers.forEach(function (value) {\r\n            if (value.seatid == seatid){\r\n                player = value;\r\n            }\r\n        });\r\n        return player ;\r\n    },\r\n\r\n\r\n    onPause : function () {\r\n        this._super();\r\n\r\n    },\r\n\r\n    onResume : function()\r\n    {\r\n        this._super();\r\n    },\r\n\r\n});\r\n"
  ]
}