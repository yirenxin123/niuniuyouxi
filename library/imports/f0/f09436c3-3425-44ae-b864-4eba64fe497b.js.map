{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "MusicMgr",
    "require",
    "Audio_Common",
    "GameCallOC",
    "GamePlayer",
    "MessageFactory",
    "AlertView",
    "HttpManager",
    "WeChatApi",
    "GameSystem",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "ProduceImg",
    "Sprite",
    "ProduceName",
    "Label",
    "ProducePrice",
    "ProduceDesc",
    "MoneyLabel",
    "ProducePriceImg",
    "ProduceGoldFrame",
    "SpriteFrame",
    "ProduceDiamondFrame",
    "PropFrame",
    "Diamond",
    "ReferralCodeView",
    "Prefab",
    "ActivityFlag",
    "ActivityFlagFrame",
    "onLoad",
    "initData",
    "ProduceType",
    "Price",
    "Name",
    "id",
    "msg",
    "setProduceData",
    "type",
    "setProduceName",
    "name",
    "setProducePrice",
    "cost",
    "setProduceTypeAndImg",
    "string",
    "desc",
    "node",
    "active",
    "setProduceDataDiamond",
    "getInstance",
    "VerStatus",
    "VerStatusType",
    "VERSION_TYPE_AUDIT",
    "checkIsAble",
    "price",
    "index",
    "spriteFrame",
    "activity",
    "setActivityFlag",
    "createReferralCodeView",
    "winSize",
    "director",
    "getWinSize",
    "referralCodeView",
    "instantiate",
    "getScene",
    "addChild",
    "setPosition",
    "p",
    "width",
    "height",
    "callBtnBuy",
    "log",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "productid",
    "self",
    "alert",
    "create",
    "setPositiveButton",
    "str",
    "weixincs",
    "show",
    "AlertViewBtnType",
    "E_BTN_CLOSE",
    "payAppstore",
    "uid",
    "referralCode",
    "weChatPay",
    "data",
    "createMessageReq",
    "US_REQ_EXCHANGE_GOLD_CMD_ID",
    "send",
    "setNegativeButton",
    "E_BTN_CANCLE"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var MusicMgr = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GameCallOC = require('GameCallOC');\r\nvar GamePlayer = require('GamePlayer');\r\nvar MessageFactory = require('MessageFactory');\r\nvar AlertView = require('AlertView');\r\nvar HttpManager = require('HttpManager');\r\nvar WeChatApi = require('WeChatApi');\r\nvar GameSystem = require('GameSystem');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n\r\n        ProduceImg : cc.Sprite,\r\n        ProduceName : cc.Label,\r\n        ProducePrice : cc.Label,\r\n        ProduceDesc : cc.Label,\r\n        MoneyLabel  : cc.Label,\r\n        ProducePriceImg : cc.Sprite,\r\n        ProduceGoldFrame : [cc.SpriteFrame],\r\n        ProduceDiamondFrame : [cc.SpriteFrame],\r\n        PropFrame : [cc.SpriteFrame],\r\n        Diamond : cc.Sprite,\r\n        ReferralCodeView : cc.Prefab,\r\n        ActivityFlag : cc.Sprite,\r\n        ActivityFlagFrame : [cc.SpriteFrame],\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        //this.initData();\r\n    },\r\n\r\n    initData :function () {\r\n        this.ProduceType = 0;  //0 gold 1 diamond\r\n        this.Price = 0;\r\n        this.Name = \"\";\r\n        this.id = 0;\r\n        this.msg = null;\r\n    },\r\n    \r\n    setProduceData : function (type,msg) {\r\n        this.msg = msg;\r\n        this.ProduceType = type;\r\n        this.setProduceName(msg.name);\r\n        this.setProducePrice(msg.cost);\r\n        this.setProduceTypeAndImg(type,msg.type);\r\n        this.ProduceDesc.string = msg.desc;\r\n        this.MoneyLabel.node.active = false;\r\n    },\r\n\r\n    setProduceDataDiamond : function (type, msg) {\r\n        this.msg = msg;\r\n        this.ProduceType = type;\r\n        this.setProduceName(msg.name);\r\n        this.MoneyLabel.node.active = true;\r\n        this.MoneyLabel.string = \"售价：¥\" + msg.cost;\r\n        this.Price = msg.cost;\r\n        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT\r\n            && GameCallOC.getInstance().checkIsAble())\r\n        {\r\n            this.ProduceDesc.node.active  = false;\r\n        }\r\n        else\r\n        {\r\n            this.ProduceDesc.node.active  = true;\r\n            this.ProduceDesc.string = msg.desc;\r\n        }\r\n\r\n        this.ProducePrice.node.active = false;\r\n        this.Diamond.node.active      = false;\r\n        this.setProduceTypeAndImg(type, msg.type);\r\n        this.id = msg.id;\r\n    },\r\n\r\n    setProduceName : function (name) {\r\n        this.Name = name;\r\n        this.ProduceName.string = name;\r\n    },\r\n\r\n    setProducePrice :function (price) {\r\n        this.Price = price;\r\n        this.ProducePrice.string = price;\r\n    },\r\n    \r\n    setProduceTypeAndImg :function (type,index) {\r\n\r\n        if(type == 0)\r\n        {\r\n            this.ProduceImg.spriteFrame = this.PropFrame[index-1];\r\n        }\r\n        else\r\n        {\r\n            this.ProduceImg.spriteFrame = this.ProduceDiamondFrame[index-1];\r\n        }\r\n\r\n        var activity = 0;\r\n        if(type == 1 && (index == 4 || index == 5))\r\n            activity = 1;\r\n        this.setActivityFlag(type,activity);\r\n    },\r\n    \r\n    setActivityFlag : function (type,activity) {\r\n        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT\r\n            && GameCallOC.getInstance().checkIsAble())\r\n        {\r\n            this.ActivityFlag.node.active = false;\r\n            return;\r\n        }\r\n\r\n        if(activity > 0)\r\n        {\r\n            this.ActivityFlag.node.active = true;\r\n        }\r\n        else\r\n        {\r\n            this.ActivityFlag.node.active = false;\r\n        }\r\n\r\n    },\r\n    \r\n    createReferralCodeView : function () {\r\n        var winSize = cc.director.getWinSize();\r\n        var referralCodeView = cc.instantiate(this.ReferralCodeView);\r\n        cc.director.getScene().addChild(referralCodeView);\r\n        referralCodeView.setPosition(cc.p(winSize.width/2, winSize.height/2));\r\n    },\r\n    \r\n    callBtnBuy : function () {\r\n        cc.log(\"ProductCell.callBtnBuy\");\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        if(this.ProduceType == 1)\r\n        {\r\n            if(GameSystem.getInstance().productid == 2)\r\n            {\r\n                var self = this;\r\n                var alert = AlertView.create();\r\n                alert.setPositiveButton(function () {\r\n                },\"确定\");\r\n\r\n                var str = \"请联系微信客服：[\"  + GameSystem.getInstance().weixincs + \"]充值\";\r\n                alert.show(str ,AlertViewBtnType.E_BTN_CLOSE);\r\n            }\r\n            else\r\n            {\r\n                if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT\r\n                    && GameCallOC.getInstance().checkIsAble()) {\r\n                    GameCallOC.getInstance().payAppstore(this.msg.id,GamePlayer.getInstance().uid);\r\n                }\r\n                else\r\n                {\r\n                    if(GameSystem.getInstance().referralCode == 0)\r\n                    {\r\n\r\n                        var self = this;\r\n                        var alert = AlertView.create();\r\n                        alert.setPositiveButton(function () {\r\n                            self.createReferralCodeView();\r\n                        },\"绑定\");\r\n\r\n                        var str = \"首次购买钻石请绑定推广人\";\r\n                        alert.show(str ,AlertViewBtnType.E_BTN_CLOSE);\r\n                        return ;\r\n                    }\r\n                    else\r\n                    {\r\n                        WeChatApi.getInstance().weChatPay(this.msg.id,GamePlayer.getInstance().uid);\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        else\r\n        {\r\n            var self = this;\r\n            var alert = AlertView.create();\r\n            alert.setPositiveButton(function () {\r\n                var data = {\r\n                    type : self.msg.type\r\n                };\r\n                MessageFactory.createMessageReq(US_REQ_EXCHANGE_GOLD_CMD_ID).send(data);\r\n            },\"兑换\");\r\n            alert.setNegativeButton(function () {\r\n\r\n            },\"取消\");\r\n\r\n            var str = \"您是否确定消耗\" + this.msg.cost + \"个钻石兑换\" + this.msg.name + \"(\" + this.msg.desc + \")\";\r\n            alert.show(str ,AlertViewBtnType.E_BTN_CANCLE);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}