{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "MessageFactory",
    "ToastView",
    "GameSystem",
    "LoadingView",
    "MusicMgr",
    "Audio_Common",
    "GamePlayer",
    "cc",
    "Class",
    "extends",
    "properties",
    "ClubName",
    "Label",
    "ClubInfo",
    "Prefab",
    "TableNum",
    "CreateRoom",
    "Sprite",
    "Bullfight_CreateRoom",
    "scrollview",
    "ScrollView",
    "TableCell",
    "onLoad",
    "_super",
    "setClubInfo",
    "onMessage",
    "event",
    "log",
    "msg",
    "data",
    "cmd",
    "window",
    "US_RESP_CLUB_TABLE_CMD_ID",
    "onGetClubTableMsg",
    "US_RESP_ENTER_GAME_CMD_ID",
    "onEnterRoom",
    "CLUB_RESP_OWNER_RM_MEMBER_CMD_ID",
    "onDelMemberMsg",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "param",
    "uid",
    "getInstance",
    "dismiss",
    "message",
    "popView",
    "btn",
    "GlobalEventManager",
    "emitEvent",
    "SocketMessage",
    "tag",
    "MessageType",
    "SCENE_MSG",
    "onSceneMsg",
    "name",
    "list",
    "length",
    "show",
    "string",
    "height",
    "index",
    "instantiate",
    "content",
    "addChild",
    "getContentSize",
    "setPosition",
    "p",
    "getComponent",
    "updateRoomInfo",
    "callBackBtn",
    "CustomEventData",
    "BtnName",
    "target",
    "getName",
    "playEffect",
    "AUDIO_BTN_CLICK",
    "node",
    "createRoom",
    "setClubId",
    "CurClubInfo",
    "clubid",
    "level",
    "info",
    "role",
    "ClubRole",
    "E_CLUB_NORMAL_ROLE",
    "active",
    "createMessageReq",
    "US_REQ_CLUB_TABLE_CMD_ID",
    "send"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar MessageFactory = require('MessageFactory');\r\nvar ToastView = require('ToastView');\r\nvar GameSystem = require('GameSystem');\r\nvar LoadingView = require('LoadingView');\r\nvar MusicMgr = require('MusicMgr');\r\nvar Audio_Common = require('Audio_Common');\r\nvar GamePlayer = require('GamePlayer');\r\n\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        ClubName  : cc.Label,\r\n        ClubInfo  : cc.Prefab,\r\n        TableNum  : cc.Label,\r\n        CreateRoom: cc.Sprite,\r\n        Bullfight_CreateRoom : cc.Prefab,\r\n        scrollview : cc.ScrollView,\r\n        TableCell  : cc.Prefab,\r\n    },\r\n\r\n    onLoad: function () {\r\n        this._super();\r\n        this.setClubInfo();\r\n    },\r\n\r\n    onMessage : function (event) {\r\n        cc.log(\"ClubRoomView.onMessage\");\r\n        //this._super(event);\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n        switch (cmd) {\r\n            case window.US_RESP_CLUB_TABLE_CMD_ID:\r\n                this.onGetClubTableMsg(msg);\r\n                break;\r\n\r\n            case window.US_RESP_ENTER_GAME_CMD_ID:\r\n                this.onEnterRoom(msg);\r\n                break;\r\n\r\n            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:\r\n                this.onDelMemberMsg(msg);\r\n                break;\r\n        }\r\n    },\r\n\r\n    onDelMemberMsg : function (msg) {\r\n        cc.log(\"ClubInfoView.onDelMemberMsg\");\r\n        if (msg.code == SocketRetCode.RET_SUCCESS) {\r\n            if (msg.param.uid == GamePlayer.getInstance().uid) { //如果是我自己\r\n                this.dismiss();\r\n                var message = {\r\n                    popView : \"ClubRoomView\",\r\n                    btn     : \"BtnClose\",\r\n                };\r\n                GlobalEventManager.getInstance().emitEvent(window.SocketMessage,\r\n                    {tag:window.MessageType.SCENE_MSG, data:message});\r\n            }\r\n        }\r\n    },\r\n\r\n    onSceneMsg : function (event) {\r\n        cc.log(\"ClubRoomView.onSceneMsg\");\r\n        var msg = event.data;\r\n        if (msg.popView == \"ClubInfoView\") {\r\n            if (msg.btn == \"BtnClose\") {\r\n                this.setClubInfo();\r\n\r\n            } else if (msg.btn == \"onDismissClubMsg\") {\r\n                cc.log(\"ClubRoomView.onSceneMsg ClubInfoView onDismissClubMsg.\");\r\n                this.dismiss();\r\n                var message = {\r\n                    popView : \"ClubRoomView\",\r\n                    btn     : \"BtnClose\",\r\n                };\r\n                GlobalEventManager.getInstance().emitEvent(window.SocketMessage,\r\n                    {tag:window.MessageType.SCENE_MSG, data:message});\r\n            }\r\n        }\r\n    },\r\n\r\n    onEnterRoom : function(msg)\r\n    {\r\n        cc.log(\"HallScene.onEnterRoom,tableid = \" + msg.name);\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n\r\n        }\r\n    },\r\n\r\n    onGetClubTableMsg : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            if(msg.list == null ||  msg.list.length == 0)\r\n            {\r\n                ToastView.show(\"暂未发现俱乐部房间\");\r\n                return ;\r\n            }\r\n\r\n            this.TableNum.string = \"牌局(\" + msg.list.length + \")\";\r\n\r\n            let height = 0;\r\n            for (var index = 0;msg.list != null && index < msg.list.length ;index++)\r\n            {\r\n                var TableCell = cc.instantiate(this.TableCell);\r\n                this.scrollview.content.addChild(TableCell);\r\n                height = TableCell.getContentSize().height;\r\n                TableCell.setPosition(cc.p(0,-TableCell.getContentSize().height/2 - TableCell.getContentSize().height*index));\r\n                TableCell.getComponent(\"GamblingHouseCell\").updateRoomInfo(msg.list[index]);\r\n            }\r\n\r\n            if(TableCell.getContentSize().height*msg.list.length > this.scrollview.content.height)\r\n            {\r\n                this.scrollview.content.height = height *msg.list.length\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    callBackBtn : function (event , CustomEventData) {\r\n        var BtnName = event.target.getName();\r\n        cc.log(\"ClubRoomView.callBackBtn,BtnName = \" + BtnName);\r\n        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);\r\n        if(BtnName == \"BtnClose\")\r\n        {\r\n            this.dismiss();\r\n            var message = {\r\n                popView : \"ClubRoomView\",\r\n                btn     : \"BtnClose\",\r\n            };\r\n            GlobalEventManager.getInstance().emitEvent(window.SocketMessage,\r\n                {tag:window.MessageType.SCENE_MSG, data:message});\r\n        }\r\n        else if(BtnName == \"BtnClubInfo\")\r\n        {\r\n            var ClubInfo = cc.instantiate(this.ClubInfo);\r\n            this.node.addChild(ClubInfo);\r\n            ClubInfo.setPosition(cc.p(0,0));\r\n\r\n            ClubInfo.getComponent(\"ClubInfoView\").setClubInfo();\r\n        }\r\n        else if(BtnName == \"CreateRoom\")\r\n        {\r\n            var createRoom = cc.instantiate(this.Bullfight_CreateRoom);\r\n            this.node.addChild(createRoom);\r\n            createRoom.setPosition(cc.p(0,0));\r\n            createRoom.getComponent(\"Bullfight_CreateRoom\").setClubId(\r\n                                    GamePlayer.getInstance().CurClubInfo.clubid,\r\n                                    GamePlayer.getInstance().CurClubInfo.level);\r\n        }\r\n    },\r\n\r\n    //{\"clubid\":10000019,\"role\":1,\"owneruid\":10688,\"level\":1,\"name\":\"as\",\r\n    // \"headurl\":\"\",\"address\":\"广西 百色市\",\"intro\":\"\",\"endtime\":1494324197,\"status\":1,\r\n    // \"members\":1,\"maxmember\":10}\r\n\r\n    setClubInfo : function () {\r\n\r\n        var info = GamePlayer.getInstance().CurClubInfo;\r\n\r\n        cc.log(\"ClubRoomView.setClubInfo Clubid=\", info.clubid, \" role=\", info.role, \" name=\", info.name);\r\n\r\n        this.ClubName.string = info.name;\r\n\r\n        if (info.role == window.ClubRole.E_CLUB_NORMAL_ROLE) {\r\n            this.CreateRoom.node.active = false;\r\n        }\r\n\r\n        var data = {\r\n            clubid : info.clubid,\r\n        };\r\n        MessageFactory.createMessageReq(window.US_REQ_CLUB_TABLE_CMD_ID).send(data);\r\n    },\r\n});\r\n"
  ]
}