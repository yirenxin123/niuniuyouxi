{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "GameSystem",
    "require",
    "HttpMessage",
    "isSucceed",
    "tag",
    "data",
    "code",
    "error",
    "flag",
    "HttpMessageGetDoman",
    "apply",
    "strUcenterUrl",
    "HttpMessageGetWlanIP",
    "ImageHolder",
    "img",
    "HttpRequest",
    "url",
    "type",
    "callback",
    "cc",
    "log",
    "callBack",
    "self",
    "sendRequest",
    "xhr",
    "XMLHttpRequest",
    "onreadystatechange",
    "readyState",
    "status",
    "response",
    "responseText",
    "success_jsonpCallback",
    "JSON",
    "parse",
    "message",
    "GlobalEventManager",
    "getInstance",
    "emitEvent",
    "window",
    "HttpMessageType",
    "HTTP_NOTIFICATION",
    "msg",
    "open",
    "setRequestHeader",
    "result",
    "send",
    "fail_jsonpCallback",
    "HttpCode",
    "HTTP_SUCCESS",
    "stringify",
    "warn",
    "HttpControl",
    "prototype",
    "sendCommonRequest",
    "undefined",
    "weburl",
    "sendData",
    "sendCommonRequestGet",
    "base64EncodeData",
    "encodedData",
    "BASE64",
    "encoder",
    "md5str",
    "hex_md5",
    "encodedData2",
    "base64DecodeData",
    "decoder",
    "length",
    "substr",
    "sendUploadImg",
    "HttpManager",
    "instance",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "/**\r\n * Created by shrimp on 17/2/19.\r\n */\r\n\r\n/**\r\n * 模拟 C++ 工程架构\r\n *\r\n * 使用的XMLHttpRequest  需要解决跨域问题\r\n * 服务器加上head\r\n *\r\n * jQuery 网页可以  但是不能上手机\r\n *\r\n */\r\nvar GameSystem = require('GameSystem');\r\n\r\nfunction HttpMessage ()\r\n{\r\n    this.isSucceed = false;\r\n    this.tag = \"\";\r\n    this.data = null;\r\n    this.code = -1;\r\n    this.error = \"\";\r\n    this.flag = -1 ;\r\n}\r\n\r\nfunction HttpMessageGetDoman()\r\n{\r\n    HttpMessage.apply(this,[]);  //集成父类数据\r\n    this.strUcenterUrl;\r\n}\r\n\r\nfunction HttpMessageGetWlanIP()\r\n{\r\n    HttpMessage.apply(this,[]);  //集成父类数据\r\n}\r\n\r\nfunction ImageHolder(){\r\n\r\n    this.img = null;\r\n    this.tag = \"\";\r\n}\r\n\r\nfunction HttpRequest(tag ,data,url,type,callback){\r\n    cc.log(\"HttpManager.HttpRequest,url = \" + url);\r\n    this.tag = tag;\r\n    this.url = url;\r\n    this.callBack = callback;\r\n\r\n    var self = this ;\r\n\r\n    this.sendRequest = function(){\r\n        var self = this ;\r\n        var xhr = new XMLHttpRequest() ;\r\n        var url = this.url ;\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4 ) {\r\n                if((xhr.status >= 200 && xhr.status < 400)){\r\n                    var response = xhr.responseText ;\r\n                    if(self.callBack){\r\n                        self.callBack(this,response);\r\n                    }else{\r\n                        self.success_jsonpCallback(JSON.parse(response)) ;\r\n                    }\r\n\r\n                }else{\r\n                    var response = xhr.responseText ;\r\n                    cc.log(\"HttpManager.sendRequest,xhr.status = %d,response = %s\",xhr.status,response);\r\n                    var message = new HttpMessage() ;\r\n                    message.data = null;\r\n                    message.isSucceed = false ;\r\n\r\n                    GlobalEventManager.getInstance().emitEvent(window.HttpMessage,{tag:window.HttpMessageType.HTTP_NOTIFICATION,msg:message});\r\n                }\r\n            }\r\n            cc.log(\"HttpManager.sendRequest,xhr.readyState = %d\",xhr.readyState);\r\n        };\r\n\r\n        xhr.open(type, url + tag, true);\r\n        // xhr.setRequestHeader(\"Access-Control-Allow-Origin\",\"*\");\r\n        xhr.setRequestHeader(\"CONTENT-TYPE\", \"application/x-www-form-urlencoded\");\r\n        var result  = xhr.send(data) ;\r\n        cc.log(\"HttpManager.sendRequest,result = \" + result);\r\n    };\r\n    \r\n    this.fail_jsonpCallback = function () {\r\n        \r\n    },\r\n\r\n    //成功回调\r\n    this.success_jsonpCallback = function(data)\r\n    {\r\n        var message = new HttpMessage() ;\r\n        message.tag = tag ;\r\n        message.code = data.code;\r\n        if(data.code == window.HttpCode.HTTP_SUCCESS)\r\n        {\r\n            message.data = data;\r\n            message.isSucceed = true ;\r\n            cc.log(\"http 请求成功 : %s = %s\",tag,JSON.stringify(data));\r\n        }\r\n        else\r\n        {\r\n            message.data = data;\r\n            message.isSucceed = false ;\r\n            cc.warn(\"http 请求返回异常 非success flag : %s = %s\",tag,JSON.stringify(data) );\r\n        }\r\n\r\n        GlobalEventManager.getInstance().emitEvent(window.HttpMessage,{tag:window.HttpMessageType.HTTP_NOTIFICATION,msg:message});\r\n    }\r\n}\r\n\r\nfunction HttpControl(callback){\r\n    this.callBack = callback;\r\n}\r\n\r\n//发送普通消息\r\nHttpControl.prototype.sendCommonRequest = function(tag, data, url){\r\n    if(url === undefined){\r\n        url =  GameSystem.getInstance().weburl + \"/\";\r\n    }\r\n\r\n    var sendData = JSON.stringify(data);//encodeURI(JSON.stringify(test));\r\n    new HttpRequest(tag, sendData, url, \"post\").sendRequest();\r\n    cc.log(\"发送http请求 = %s  : %s : %s\", tag, JSON.stringify(data),sendData);\r\n}\r\n\r\nHttpControl.prototype.sendCommonRequestGet = function(tag, data, url){\r\n    if(url === undefined){\r\n        url =  GameSystem.getInstance().weburl + \"/\";\r\n    }\r\n\r\n    var sendData = JSON.stringify(data);//encodeURI(JSON.stringify(test));\r\n    new HttpRequest(tag, sendData, url, \"get\").sendRequest();\r\n    cc.log(\"发送http请求 = %s  : %s : %s\", tag, JSON.stringify(data),sendData);\r\n}\r\n\r\n//数据加密\r\nHttpControl.prototype.base64EncodeData = function (data) {\r\n    let encodedData = BASE64.encoder(data);\r\n\r\n    let md5str  = hex_md5(encodedData);\r\n\r\n    let encodedData2 = BASE64.encoder(encodedData + md5str);\r\n    return encodedData2;\r\n}\r\n\r\n\r\nHttpControl.prototype.base64DecodeData = function (data) {\r\n    let encodedData = BASE64.decoder(data);\r\n\r\n    if(encodedData.length > 32)\r\n    {\r\n        encodedData = encodedData.substr(0, encodedData.length - 32);\r\n        let encodedData2 = BASE64.decoder(encodedData);\r\n        return encodedData2;\r\n    }\r\n    return \"\";\r\n}\r\n\r\nHttpControl.prototype.sendUploadImg = function (tag,url,data) {\r\n    if(url = undefined)\r\n    {\r\n        url = \"http://manage.aqddp.cn/Home/Picupload/upload\";\r\n    }\r\n    //var sendData = JSON.stringify(data);//encodeURI(JSON.stringify(test));\r\n    new HttpRequest(tag, data, url, \"post\").sendRequest();\r\n    cc.log(\"发送http请求 = %s  : %s \", tag, data);\r\n}\r\n\r\n/**\r\n * 创建HttpManager接口\r\n * @method getInstance\r\n */\r\nvar HttpManager = (function(){\r\n    var instance ;\r\n    function getInstance(){\r\n        if( instance === undefined ){\r\n            instance = new HttpControl();\r\n        }\r\n        return instance;\r\n    };\r\n\r\n    return {\r\n        getInstance : getInstance,\r\n    }\r\n})();\r\n\r\nmodule.exports = HttpManager;\r\n\r\n\r\n\r\n"
  ]
}