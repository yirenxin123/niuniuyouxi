{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BasePop",
    "require",
    "MessageFactory",
    "ToastView",
    "GamblingHouseCell",
    "AdvertItem",
    "cc",
    "Class",
    "extends",
    "properties",
    "TableCell",
    "Prefab",
    "ScrollView",
    "initNode",
    "Node",
    "ShareView",
    "Page1",
    "Sprite",
    "Page2",
    "Page3",
    "advertItem",
    "pageView",
    "PageView",
    "pageViewContent",
    "onLoad",
    "log",
    "_super",
    "onSendReqFoundTable",
    "nStart",
    "nTotal",
    "data",
    "start",
    "total",
    "createMessageReq",
    "window",
    "US_REQ_FOUND_TABLE_CMD_ID",
    "send",
    "onSceneMsg",
    "event",
    "msg",
    "popView",
    "btn",
    "dismiss",
    "shareView",
    "instantiate",
    "director",
    "getScene",
    "addChild",
    "winSize",
    "getWinSize",
    "setPosition",
    "p",
    "width",
    "height",
    "onMessage",
    "cmd",
    "US_RESP_FOUND_TABLE_CMD_ID",
    "onFoundTableMsg",
    "US_RESP_BANNER_LIST_CMD_ID",
    "onShopListMsg",
    "addAdvertItem",
    "info",
    "index",
    "addPage",
    "getComponent",
    "updateAdverItem",
    "updateBannerList",
    "bannerlist",
    "removeAllPages",
    "length",
    "getSpriteFrame2",
    "url",
    "successCb",
    "failureCb",
    "target",
    "otherSender",
    "xhr",
    "XMLHttpRequest",
    "self",
    "onreadystatechange",
    "readyState",
    "status",
    "response",
    "responseText",
    "img",
    "BASE64",
    "decoder",
    "text",
    "Uint8Array",
    "Image",
    "src",
    "texture",
    "Texture2D",
    "initWithImage",
    "handleLoadedTexture",
    "newframe",
    "SpriteFrame",
    "spriteFrame",
    "timeout",
    "open",
    "list",
    "show",
    "undefined",
    "active",
    "content",
    "getContentSize",
    "updateRoomInfo",
    "callbackScrollView",
    "scrollview",
    "eventType",
    "customEventData",
    "EventType",
    "SCROLL_TO_TOP",
    "SCROLL_TO_BOTTOM"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BasePop = require('BasePop');\r\nvar MessageFactory = require('MessageFactory');\r\nvar ToastView = require('ToastView');\r\nvar GamblingHouseCell = require('GamblingHouseCell');\r\nvar AdvertItem = require('AdvertItem');\r\ncc.Class({\r\n    extends: BasePop,\r\n\r\n    properties: {\r\n        TableCell  : cc.Prefab,\r\n        ScrollView : cc.ScrollView,\r\n        initNode   : cc.Node,\r\n        ShareView  : cc.Prefab,\r\n\r\n        Page1  : cc.Sprite,\r\n        Page2  : cc.Sprite,\r\n        Page3  : cc.Sprite,\r\n\r\n        advertItem : cc.Prefab,\r\n        pageView : cc.PageView,\r\n        pageViewContent : cc.Node,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.log(\"FindView.OnLoad2\");\r\n\r\n        this._super();\r\n        this.onSendReqFoundTable(0, 50);\r\n\r\n        //cc.log(window.US_REQ_BANNER_LIST_CMD_ID);\r\n        //MessageFactory.createMessageReq(window.US_REQ_BANNER_LIST_CMD_ID).send();\r\n\r\n    },\r\n\r\n    onSendReqFoundTable : function(nStart, nTotal) {\r\n        var data = {\r\n            start : nStart,\r\n            total : nTotal,\r\n        };\r\n        MessageFactory.createMessageReq(window.US_REQ_FOUND_TABLE_CMD_ID).send(data);\r\n    },\r\n\r\n    onSceneMsg : function (event) {\r\n        var msg = event.data;\r\n\r\n        if (msg.popView == \"GamblingHouseCell\") {\r\n            if(msg.btn == \"enterRoom\") {\r\n                this.dismiss();\r\n            } else if (msg.btn == \"winxinShared\") {\r\n\r\n                cc.log(\"FindView.onSceneMsg but=\" + msg.btn);\r\n\r\n                var shareView = cc.instantiate(this.ShareView);\r\n                cc.director.getScene().addChild(shareView);\r\n                var winSize = cc.director.getWinSize();\r\n                shareView.setPosition(cc.p(winSize.width/2, winSize.height/2));\r\n            }\r\n        }\r\n    },\r\n\r\n    /*********************Network***************************/\r\n    onMessage : function (event) {\r\n        cc.log(\"FindView.onMessage\");\r\n        //this._super(event);\r\n        var msg = event.data;\r\n        var cmd = msg.cmd;\r\n\r\n        switch (cmd) {\r\n            case US_RESP_FOUND_TABLE_CMD_ID:\r\n                this.onFoundTableMsg(msg);\r\n                break;\r\n\r\n            case US_RESP_BANNER_LIST_CMD_ID:\r\n                this.onShopListMsg(msg);\r\n                break;\r\n        }\r\n    },\r\n\r\n\r\n    onShopListMsg : function (msg) {\r\n\r\n    \tcc.log(\"onShopListMsg2\");\r\n\r\n    \t/*\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            //cc.log(msg.bannerlist);\r\n\r\n            //this.updateBannerList(msg.bannerlist);\r\n        }\r\n        */\r\n    },\r\n    \r\n    addAdvertItem : function (info,index) {\r\n        //jumpurl pic\r\n        var winSize = cc.director.getWinSize();\r\n        var advertItem = cc.instantiate(this.advertItem);\r\n        this.pageView.addPage(advertItem);\r\n        var winSize = cc.director.getWinSize();\r\n        advertItem.setPosition(cc.p(winSize.width/2 + winSize.width*index,0));\r\n        advertItem.getComponent('AdvertItem').updateAdverItem(info);\r\n    },\r\n\r\n    updateBannerList : function (bannerlist) {\r\n        this.pageView.removeAllPages();\r\n\r\n        for(var index = 0;index < bannerlist.length;index++)\r\n        {\r\n            this.addAdvertItem(bannerlist[index],index);\r\n        }\r\n\r\n        //this.getSpriteFrame2(\"http://manage.aqddp.cn/getpic.php?url=http://manage.aqddp.cn/files/banner1.jpg\");\r\n    },\r\n\r\n\r\n\r\n    getSpriteFrame2:function (url,successCb,failureCb,target,otherSender) {\r\n        //url = this.kyHelper + url;\r\n\r\n\r\n\r\n        //cc.log(page1);\r\n\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        var self = this;\r\n\r\n        xhr.onreadystatechange = function () {\r\n            if( xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {\r\n                var response = xhr.responseText;\r\n\r\n               var img = BASE64.decoder(response);\r\n\r\n\r\n               //cc.log(\"img=\", img);\r\n\r\n                var text = new Uint8Array(response, 0, response.length);\r\n\r\n\r\n                var img = new Image();\r\n                img.src = BASE64.decoder(response);\r\n\r\n                var texture = new cc.Texture2D();\r\n                texture.initWithImage(img); //cc.Texture2D.SRC_ALPHA, 1, 1, cc.size(1080, 300));\r\n                texture.handleLoadedTexture();\r\n\r\n                var newframe = new cc.SpriteFrame(texture);\r\n                self.Page1.spriteFrame = newframe;\r\n\r\n\r\n                // if (successCb != null) {\r\n                //     successCb.apply(target, [newframe, otherSender]);\r\n                // }\r\n            }\r\n            else\r\n            {\r\n                // if(failureCb != null)\r\n                // {\r\n                //     failureCb.apply(target);\r\n                // }\r\n            }\r\n        };\r\n\r\n        xhr.timeout = 5000;\r\n        xhr.open(\"GET\", url,true);\r\n        xhr.send();\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    onFoundTableMsg : function(msg)\r\n    {\r\n        if(msg.list.length === 0)\r\n        {\r\n            ToastView.show(\"暂未发现房间\");\r\n            return ;\r\n        }\r\n\r\n        if(this.initNode != null && this.initNode != undefined)\r\n            this.initNode.active = false;\r\n\r\n        let height = 0;\r\n        for (var index = 0;index < msg.list.length ;index++)\r\n        {\r\n            var TableCell = cc.instantiate(this.TableCell);\r\n            this.ScrollView.content.addChild(TableCell);\r\n            height = TableCell.getContentSize().height;\r\n            TableCell.setPosition(cc.p(0,-TableCell.getContentSize().height/2 - TableCell.getContentSize().height*index));\r\n            TableCell.getComponent(\"GamblingHouseCell\").updateRoomInfo(msg.list[index]);\r\n        }\r\n\r\n        if ( height * (msg.list.length + 1) > this.ScrollView.content.height)\r\n        {\r\n            this.ScrollView.content.height = height * (msg.list.length + 1);\r\n        }\r\n    },\r\n\r\n    callbackScrollView: function (scrollview, eventType, customEventData)\r\n    {\r\n        cc.log(\"FindView ,\" + eventType + \",\" + customEventData);\r\n        if (eventType === cc.ScrollView.EventType.SCROLL_TO_TOP)\r\n        {\r\n\r\n        }\r\n        else if(eventType === cc.ScrollView.EventType.SCROLL_TO_BOTTOM)\r\n        {\r\n\r\n        }\r\n    }\r\n});\r\n"
  ]
}