{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BaseView",
    "require",
    "MessageFactory",
    "SocketManager",
    "ToastView",
    "AlertView",
    "GameSystem",
    "GamePlayer",
    "LoadingView",
    "cc",
    "Class",
    "extends",
    "Component",
    "initBaseInfo",
    "pToastView",
    "m_pNetAlert",
    "changeHouTai",
    "bBeginHeart",
    "NowReconnect",
    "isGaming",
    "netReStartCnt",
    "netCount",
    "netTimeTotal",
    "disNetTime",
    "netStrength",
    "m_llSendTime",
    "localMessageListenerID",
    "httpMessageListenerID",
    "socketMessageListenerID",
    "GameInfoListenerID",
    "m_isNetConnecting",
    "isOnLine",
    "onGameBack",
    "onLoad",
    "log",
    "addSocketListener",
    "addHttpListener",
    "addLocalMessageListener",
    "addGameInfoListener",
    "getInstance",
    "isConnected",
    "startHeartBeat",
    "onDestroy",
    "unschedule",
    "sendHeartBeat",
    "GlobalEventManager",
    "removeListener",
    "self",
    "window",
    "addEventListener",
    "GameEngineInfo",
    "event",
    "tag",
    "GameInfo",
    "GameHide",
    "onPause",
    "GameShow",
    "onResume",
    "NetOnline",
    "onNetOnline",
    "NetOffline",
    "onNetOffline",
    "warn",
    "audioEngine",
    "pauseAll",
    "game",
    "pause",
    "disconnect",
    "resumeAll",
    "resume",
    "bLogin",
    "reStartSocket",
    "update",
    "dt",
    "SocketMessage",
    "undefined",
    "type",
    "MessageType",
    "SOCKET_CONNECTED",
    "onSocketConnected",
    "SOCKET_DISCONNECTED",
    "onSocketDisconnected",
    "SOCKET_CONNECTING",
    "onSocketConnecting",
    "MSG_NETWORK_FAILURE",
    "SOCKET_MESSAGE",
    "onMessage",
    "SCENE_MSG",
    "onSceneMsg",
    "HttpMessage",
    "HttpMessageType",
    "HTTP_NOTIFICATION",
    "onHttpResponse",
    "msg",
    "NOTIFY_HTTP_RSP_ERROR",
    "LocalMessage",
    "onLocalMessage",
    "data",
    "cmd",
    "US_RESP_LOGIN_CMD_ID",
    "US_KICK_OUT_CMD_ID",
    "createAlertView",
    "desc",
    "US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID",
    "notifyOwnerConfirmSit",
    "US_RESP_OWNER_CONFIRM_CMD_ID",
    "OwnerConfirmSit",
    "US_NOTFIY_OWNER_TABLEINFO_CMD_ID",
    "onNotifyOwnerTableOver",
    "US_RESP_FIND_TABLE_CMD_ID",
    "onFindRoom",
    "CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID",
    "onClubAddMsg",
    "CLUB_RESP_OWNER_RM_MEMBER_CMD_ID",
    "onClubRmMem",
    "US_RESP_EXCHANGE_GOLD_CMD_ID",
    "onExchangeGoldMsg",
    "US_RESP_USER_DETAIL_CMD_ID",
    "onUserDetail",
    "US_NOTIFY_PAY_OPERATE_CMD_ID",
    "onPayResult",
    "US_NOTIFY_IN_GAME_CMD_ID",
    "notifyInGame",
    "US_RESP_CREATE_COST_CMD_ID",
    "onCreateTableCost",
    "US_RESP_CLUB_UPGRADE_COST_CMD_ID",
    "onClubUpgradeCost",
    "US_RESP_NEW_MSG_NUM_CMD_ID",
    "onMimeMsgNum",
    "US_RESP_BIND_REFERRAL_CMD_ID",
    "onBingReferral",
    "code",
    "SocketRetCode",
    "RET_SUCCESS",
    "RET_NOT_FIND_GAME_SERVER",
    "RET_NOT_FIND_TABLE",
    "RET_PARAM_ERROR",
    "director",
    "loadScene",
    "RET_ILLEGAL_REQ",
    "RET_SERVER_ABNORMAL",
    "alert",
    "create",
    "setPositiveButton",
    "show",
    "AlertViewBtnType",
    "E_BTN_CLOSE",
    "RET_USERKEY_ERROR",
    "RET_USER_REPEAT_LOGIN",
    "dismiss",
    "referralCode",
    "referralid",
    "param",
    "getUserDetail",
    "BullFightTableCost",
    "list",
    "ClubUpgradeCost",
    "NewMsgNum",
    "sysnum",
    "clubnum",
    "mailnum",
    "gold",
    "diamond",
    "tips",
    "uid",
    "name",
    "clubname",
    "sendClubOwnerConfirm",
    "clubid",
    "setNegativeButton",
    "E_BTN_CANCLE",
    "result",
    "isallow",
    "JSON",
    "stringify",
    "createMessageReq",
    "CLUB_REQ_OWNER_CONFIRM_CMD_ID",
    "send",
    "gamesvcid",
    "tableid",
    "privateid",
    "sendFindTable",
    "tablename",
    "remaintime",
    "createRoom",
    "US_REQ_FIND_TABLE_CMD_ID",
    "playeruid",
    "sitUid",
    "sendOwnerConfirm",
    "coin",
    "US_REQ_OWNER_CONFIRM_CMD_ID",
    "LocalMsgType",
    "SENDMSG_TIMEOUT",
    "msgSendTimeOut",
    "UPDATE_USERINFO",
    "isSucceed",
    "schedule",
    "HEART_BEAT_TIME",
    "US_REQ_HEARTBEAT_CMD_ID",
    "Date",
    "getTime",
    "onCheckNetReStart",
    "emitEvent",
    "reconnect_times",
    "text",
    "_dNetCount",
    "reDisConTime",
    "removeFromParent",
    "replyReConnectYes",
    "replyReConnectNo",
    "sendLoginHall",
    "login",
    "US_REQ_LOGIN_CMD_ID",
    "detail",
    "US_REQ_USER_DETAIL_CMD_ID",
    "scheduleOnce",
    "callLoginServer",
    "waitReConnect",
    "reAllDisConTime",
    "gotoHallUpdate",
    "bCheckConnect",
    "onUpdateUserInfo",
    "UpdateDeviceStatus",
    "updatePlayerMoney",
    "updateHeartBeat",
    "netDelta",
    "updateOfflineReult",
    "callUpdateMoney",
    "startSocket"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BaseView = require(\"BaseView\");\r\nvar MessageFactory = require('MessageFactory');\r\nvar SocketManager = require('SocketManager');\r\nvar ToastView = require('ToastView');\r\nvar AlertView = require('AlertView');\r\nvar GameSystem = require('GameSystem');\r\nvar GamePlayer = require('GamePlayer');\r\nvar LoadingView = require('LoadingView');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    \r\n    // properties:\r\n    // {\r\n    //     m_sendHeartBeat        : true ,\r\n    // },\r\n    \r\n    initBaseInfo : function () {\r\n        this.pToastView          = null ;\r\n        this.m_pNetAlert         = null;\r\n        this.changeHouTai        =  false ;\r\n\r\n        this.bBeginHeart         = false ;\r\n        this.NowReconnect        = false;\r\n        this.isGaming            = false;\r\n\r\n        this.netReStartCnt       = 0 ;\r\n        this.netCount            = 0;\r\n        this.netTimeTotal        = 0 ;\r\n        this.disNetTime          = 0;\r\n        this.netStrength         = 0 ;\r\n        this.m_llSendTime        = 0 ,\r\n\r\n        this.localMessageListenerID  =  0 ;\r\n        this.httpMessageListenerID  =  0 ;\r\n        this.socketMessageListenerID  =  0 ;\r\n        this.GameInfoListenerID  =  0 ;\r\n\r\n        this.m_isNetConnecting = true ;\r\n\r\n        this.isOnLine = true ;\r\n        this.onGameBack = false ;\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.log(\"BaseScene.onLoad\");\r\n        this.initBaseInfo();\r\n        //socket消息\r\n        this.addSocketListener() ;\r\n        //http消息\r\n        this.addHttpListener();\r\n        //本地消息监听\r\n        this.addLocalMessageListener();\r\n        //引擎信息\r\n        this.addGameInfoListener();\r\n\r\n        //场景切换需要重新设置心跳\r\n        if (SocketManager.getInstance().isConnected()) {\r\n            this.startHeartBeat();\r\n        }\r\n    },\r\n\r\n    onDestroy : function () {\r\n        cc.log(\"BaseScene.onDestroy\");\r\n        this.unschedule(this.sendHeartBeat);\r\n\r\n        GlobalEventManager.getInstance().removeListener(this.httpMessageListenerID);\r\n        GlobalEventManager.getInstance().removeListener(this.localMessageListenerID);\r\n        GlobalEventManager.getInstance().removeListener(this.socketMessageListenerID);\r\n        GlobalEventManager.getInstance().removeListener(this.GameInfoListenerID);\r\n\r\n    },\r\n\r\n    addGameInfoListener: function () {\r\n        cc.log(\"BaseScene.addGameInfoListener\");\r\n        var self = this ;\r\n        this.GameInfoListenerID = window.GlobalEventManager.getInstance().addEventListener(window.GameEngineInfo,\r\n            function (event) {\r\n                if(event){\r\n                    var tag = event.tag ;\r\n                    if(tag == window.GameInfo.GameHide){\r\n                        self.onPause() ;\r\n                    }\r\n                    else if(tag == window.GameInfo.GameShow){\r\n                        self.onResume();\r\n                    }\r\n                    else if(tag == window.GameInfo.NetOnline){\r\n                        self.onNetOnline() ;\r\n                    }\r\n                    else if(tag == window.GameInfo.NetOffline){\r\n                        self.onNetOffline();\r\n                    }\r\n                }\r\n\r\n        },this);\r\n    },\r\n\r\n    onPause : function () {\r\n        cc.warn(\"游戏暂停\")\r\n        this.onGameBack = true ;\r\n        cc.audioEngine.pauseAll() ;\r\n        cc.game.pause();\r\n        SocketManager.getInstance().disconnect();\r\n\r\n    },\r\n\r\n    onResume : function()\r\n    {\r\n        cc.warn(\"游戏恢复\")\r\n        this.onGameBack = false ;\r\n        cc.audioEngine.resumeAll() ;\r\n        cc.game.resume();\r\n        if (GameSystem.getInstance().bLogin)\r\n        {\r\n            if (!SocketManager.getInstance().isConnected())\r\n            {\r\n                this.changeHouTai = true;\r\n                SocketManager.getInstance().reStartSocket();\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n\r\n    onNetOffline : function () {\r\n\r\n        cc.warn(\"网络断开\")\r\n        this.isOnLine = false ;\r\n        // SocketManager.getInstance().disconnect();\r\n        // ToastView.show(\"网络连接中断，请检查网络!\")\r\n    },\r\n\r\n    onNetOnline : function()\r\n    {\r\n        cc.warn(\"网络恢复\")\r\n        this.isOnLine = true ;\r\n        if (GameSystem.getInstance().bLogin)\r\n        {\r\n            if (!SocketManager.getInstance().isConnected())\r\n            {\r\n                this.changeHouTai = true;\r\n                SocketManager.getInstance().reStartSocket();\r\n                // ToastView.show(\"网络恢复，重新连接服务器\")\r\n            }\r\n            //ShopModel.getInstance().updateUserInfo();\r\n        }\r\n        // ToastView.show(\"网络恢复\")\r\n    },\r\n\r\n\r\n    update: function (dt) {\r\n    },\r\n\r\n\r\n    //socket消息\r\n    addSocketListener: function(){\r\n        cc.log(\"BaseScene.addSocketListener\");\r\n        var self = this;\r\n        this.socketMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.SocketMessage,\r\n            function( event) {\r\n\r\n                if(event == undefined)\r\n                {\r\n                    return ;\r\n                }\r\n                var type = event.tag ;\r\n                //连接服务器成功\r\n                if(type == window.MessageType.SOCKET_CONNECTED)\r\n                {\r\n                    self.onSocketConnected();\r\n                }\r\n                //断开连接\r\n                else if(type == window.MessageType.SOCKET_DISCONNECTED)\r\n                {\r\n                    self.onSocketDisconnected();\r\n                }\r\n                //连接中\r\n                else if(type == window.MessageType.SOCKET_CONNECTING)\r\n                {\r\n                    self.onSocketConnecting();\r\n                }\r\n                //连接失败\r\n                else if(type == window.MessageType.MSG_NETWORK_FAILURE)\r\n                {\r\n                }\r\n                //收到消息\r\n                else if(type == window.MessageType.SOCKET_MESSAGE)\r\n                {\r\n                    self.onMessage(event) ;\r\n                }\r\n                else if(type == window.MessageType.SCENE_MSG)\r\n                {\r\n                    self.onSceneMsg(event);\r\n                }\r\n            },this);\r\n\r\n    },\r\n\r\n\r\n    //http消息监听\r\n    addHttpListener:function()\r\n    {\r\n        cc.log(\"BaseScene.addHttpListener\");\r\n        var self = this;\r\n\r\n        this.httpMessageListenerID =  GlobalEventManager.getInstance().addEventListener(window.HttpMessage,function (event) {\r\n            if(event == undefined)\r\n            {\r\n                return ;\r\n            }\r\n\r\n            var tag = event.tag ;\r\n\r\n            if(tag == window.HttpMessageType.HTTP_NOTIFICATION){\r\n                self.onHttpResponse(event.msg);\r\n            }else if(tag == window.HttpMessageType.NOTIFY_HTTP_RSP_ERROR){\r\n\r\n            }\r\n        }, this);\r\n    },\r\n\r\n    //本地消息监听\r\n    addLocalMessageListener : function()\r\n    {\r\n        cc.log(\"BaseScene.addLocalMessageListener\");\r\n        var self = this ;\r\n        this.localMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.LocalMessage,\r\n            function( event) {\r\n                if(event){\r\n                    self.onLocalMessage(event);\r\n                }\r\n\r\n            },this);\r\n\r\n    },\r\n\r\n    onSceneMsg : function (event) {\r\n        var msg = event.data;\r\n\r\n    },\r\n\r\n    onMessage : function (event) {\r\n        var msg = event.data;\r\n        var cmd = msg.cmd ;\r\n        //cc.log()\r\n        switch(cmd) {\r\n            case window.US_RESP_LOGIN_CMD_ID:\r\n                //this.callUpdateMoney();\r\n                break;\r\n\r\n            case window.US_KICK_OUT_CMD_ID:\r\n                this.createAlertView(msg.desc);\r\n                break;\r\n\r\n            case window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID:\r\n                this.notifyOwnerConfirmSit(msg);\r\n                break;\r\n\r\n            case window.US_RESP_OWNER_CONFIRM_CMD_ID:\r\n                this.OwnerConfirmSit(msg);\r\n                break;\r\n\r\n            case window.US_NOTFIY_OWNER_TABLEINFO_CMD_ID:\r\n                this.onNotifyOwnerTableOver(msg);\r\n                break;\r\n\r\n            case window.US_RESP_FIND_TABLE_CMD_ID:\r\n                this.onFindRoom(msg);\r\n                break;\r\n\r\n            case window.CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID:\r\n                this.onClubAddMsg(msg);\r\n                break;\r\n\r\n            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:\r\n                this.onClubRmMem(msg);\r\n                break;\r\n\r\n            case window.US_RESP_EXCHANGE_GOLD_CMD_ID:\r\n                this.onExchangeGoldMsg(msg);\r\n                break;\r\n\r\n            case window.US_RESP_USER_DETAIL_CMD_ID:\r\n                this.onUserDetail(msg);\r\n                break;\r\n\r\n            case US_NOTIFY_PAY_OPERATE_CMD_ID:\r\n                this.onPayResult(msg);\r\n                break;\r\n\r\n            case window.US_NOTIFY_IN_GAME_CMD_ID:\r\n                this.notifyInGame(msg);\r\n                break;\r\n\r\n            case window.US_RESP_CREATE_COST_CMD_ID:\r\n                this.onCreateTableCost(msg);\r\n                break;\r\n\r\n            case window.US_RESP_CLUB_UPGRADE_COST_CMD_ID:\r\n                this.onClubUpgradeCost(msg);\r\n                break;\r\n\r\n            case US_RESP_NEW_MSG_NUM_CMD_ID:\r\n                this.onMimeMsgNum(msg);\r\n                break;\r\n            case US_RESP_BIND_REFERRAL_CMD_ID:\r\n                this.onBingReferral(msg);\r\n                break;\r\n        }\r\n        /*\r\n        * RET_REPEAT_REGISTER         : -1000, //服务器重复注册(服务器内部消息)\r\n         RET_NOT_CALL_BANKER         : -19,   //非抢庄状态\r\n         RET_USER_OFFLINE            : -18,   //玩家离线\r\n         RET_NOT_CLICK_AGAIN         : -17,   //请勿频繁点击\r\n         RET_SEAT_HAVE_PLAYER        : -16,   //您选择的座位已经被占领,请从新选择\r\n         RET_SEAT_NOT_EXIST          : -15,   //您选择的座位不存在\r\n         RET_PLAYER_ACTIVE           : -14,   //您正在游戏中,不能离开\r\n         RET_PLAYER_HAVE_LEAVE       : -13,   //您已经离开\r\n         RET_PARAM_ERROR             : -12,   //参数错误\r\n         RET_DESTROYED_PRIVATE_TBALE : -11,   //牌局已销毁\r\n         RET_TABLE_FULL              : -10,   //私人房爆满\r\n         RET_GAME_PLAYER_FULL        : -9,    //桌子里面的玩家已满\r\n         RET_GAME_TABLE_FULL         : -8,    //游戏服务器桌子爆满\r\n         RET_DB_ERROR                : -7,    //数据库错误\r\n         RET_NOT_FIND_TABLE          : -6,    //桌子不存在\r\n         RET_NOT_FIND_GAME_SERVER    : -5,    //未找到匹配服务器\r\n         RET_SERVER_ABNORMAL         : -4,    //服务异常\r\n         RET_USER_REPEAT_LOGIN       : -3,    //您的账号已经在其他地点登录\r\n         RET_USERKEY_ERROR           : -2,    //用户验证失败,请重新登录\r\n         RET_ILLEGAL_REQ             : -1,    //非法请求(如:如果头部uid,不是自己的socket链接的uid就直接返回,反漏洞)\r\n        * */\r\n\r\n        if (msg.code < SocketRetCode.RET_SUCCESS)\r\n        {\r\n            if (msg.code ==  SocketRetCode.RET_NOT_FIND_GAME_SERVER ||\r\n                msg.code == SocketRetCode.RET_NOT_FIND_TABLE ||\r\n                msg.code == SocketRetCode.RET_PARAM_ERROR) {\r\n                cc.director.loadScene('HallScene');\r\n            }\r\n            else if (msg.code == SocketRetCode.RET_ILLEGAL_REQ ||\r\n                msg.code == SocketRetCode.RET_SERVER_ABNORMAL)\r\n            {\r\n                var alert = AlertView.create();\r\n                alert.setPositiveButton(function () {\r\n                    cc.director.loadScene('LoadingScene');\r\n                }, \"退出游戏\");\r\n                this.unschedule(this.sendHeartBeat);\r\n                SocketManager.getInstance().disconnect();\r\n                alert.show(msg.desc + \",请退出游戏重新进入！\",AlertViewBtnType.E_BTN_CLOSE);\r\n            }\r\n            else if (msg.code == SocketRetCode.RET_USERKEY_ERROR ||\r\n                     msg.code == SocketRetCode.RET_USER_REPEAT_LOGIN)\r\n            {\r\n                var alert = AlertView.create();\r\n                alert.setPositiveButton(function () {\r\n                    cc.director.loadScene('LoadingScene');\r\n                },\"退出游戏\");\r\n                this.unschedule(this.sendHeartBeat);\r\n                SocketManager.getInstance().disconnect();\r\n                alert.show(msg.desc + \",请退出游戏重新进入！\",AlertViewBtnType.E_BTN_CLOSE);\r\n            }\r\n            else\r\n            {\r\n                this.createAlertView(msg.desc);\r\n            }\r\n            LoadingView.dismiss();\r\n        }\r\n    },\r\n\r\n    onBingReferral : function (msg) {\r\n\r\n        if (msg.code < SocketRetCode.RET_SUCCESS)\r\n            return;\r\n        GameSystem.getInstance().referralCode = msg.referralid;\r\n        ToastView.show(\"绑定成功\");\r\n    },\r\n\r\n    onPayResult : function (msg) {\r\n        var alert = AlertView.create();\r\n        // alert.show(\"您花费了¥\" + msg.param.cost + \"购买了\" + msg.param.opdiamond + \"个钻石，已成功到账\", AlertViewBtnType.E_BTN_CLOSE);\r\n        alert.show(msg.param.desc);\r\n        this.getUserDetail();\r\n    },\r\n\r\n    onCreateTableCost : function (msg) {\r\n        cc.log(\"HallScene.onCreateTableCost code=\", msg.code);\r\n        if (msg.code != SocketRetCode.RET_SUCCESS)\r\n            return;\r\n        GameSystem.getInstance().BullFightTableCost = msg.list;\r\n    },\r\n\r\n    onClubUpgradeCost : function (msg) {\r\n        cc.log(\"HallScene.onClubUpgradeCost code=\", msg.code);\r\n        if (msg.code = SocketRetCode.RET_SUCCESS)\r\n            return;\r\n\r\n        GameSystem.getInstance().ClubUpgradeCost = msg.list;\r\n        cc.log(\"HallScene.onClubUpgradeCost list=\", msg.list);\r\n    },\r\n\r\n    onMimeMsgNum : function (msg) {\r\n        GameSystem.getInstance().NewMsgNum = false;\r\n        if(msg.code == SocketRetCode.RET_SUCCESS) {\r\n            if ((msg.sysnum > 0) || (msg.clubnum > 0) || (msg.mailnum > 0)) {\r\n                GameSystem.getInstance().NewMsgNum = true;\r\n            }\r\n        }\r\n        cc.log(\"onMimeMsgNum sysnum=\", msg.sysnum, \" clubnum=\", msg.clubnum, \" mailnum=\", msg.mailnum);\r\n    },\r\n\r\n    onUserDetail: function (msg) {\r\n        cc.log(\"HallScene.onUserDetail\");\r\n        GamePlayer.getInstance().gold    = msg.gold;\r\n        GamePlayer.getInstance().diamond = msg.diamond;\r\n    },\r\n\r\n    onExchangeGoldMsg : function (msg) {\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            var alert = AlertView.create();\r\n            alert.show(msg.tips ,AlertViewBtnType.E_BTN_CLOSE);\r\n            this.getUserDetail();\r\n        }\r\n    },\r\n\r\n    onClubAddMsg : function (msg) {\r\n        var self = this;\r\n\r\n        var uid  = msg.param.uid;\r\n        var name = msg.param.name;\r\n        var clubname = msg.param.clubname;\r\n        var alert = AlertView.create();\r\n        alert.setPositiveButton(function () {\r\n            self.sendClubOwnerConfirm(1,uid,msg.clubid);\r\n        },\"同意\");\r\n        alert.setNegativeButton(function () {\r\n            self.sendClubOwnerConfirm(0,uid,msg.clubid);\r\n        },\"拒绝\");\r\n\r\n        alert.show(name + \"(\" + msg.param.uid + \")\" + \"申请加入您的'\" + clubname + \"'俱乐部，是否同意？\", AlertViewBtnType.E_BTN_CANCLE);\r\n    },\r\n\r\n    onClubRmMem : function (msg) {\r\n        if (msg.param.uid == GamePlayer.getInstance().uid) {\r\n            ToastView.show(\"您被移除俱乐部\" + msg.param.clubname + \"(\" +  msg.param.clubid + \")\");\r\n        } else {\r\n            ToastView.show( msg.param.name + \"被移除俱乐部\" + msg.param.clubname + \"(\" +  msg.param.clubid + \")\");\r\n        }\r\n    },\r\n\r\n    sendClubOwnerConfirm : function (result,uid,clubid) {\r\n        var data = {\r\n            uid : uid,\r\n            isallow : result,   // 1:同意，2:拒绝\r\n        };\r\n        cc.log(\"BaseScene.notifyOwnerConfirmSit.data = \",JSON.stringify(data));\r\n        MessageFactory.createMessageReq(window.CLUB_REQ_OWNER_CONFIRM_CMD_ID).send(data,clubid);\r\n    },\r\n\r\n    notifyInGame : function (msg) {\r\n        cc.log(\"BaseScene.notifyInGame, msg\" + msg.gamesvcid + \",tableid\" + msg.tableid);\r\n        if(msg.code > 0)\r\n        {\r\n            GameSystem.getInstance().gamesvcid = msg.gamesvcid;\r\n            GameSystem.getInstance().tableid   = msg.tableid;\r\n            cc.director.loadScene('Bullfight_GameScene');\r\n        }\r\n    },\r\n\r\n    onFindRoom : function (msg) {\r\n        cc.log(\"HallScene.onFindRoom,msg\" + msg.gamesvcid + \",tableid\" + msg.tableid);\r\n        LoadingView.dismiss();\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            GameSystem.getInstance().gamesvcid = msg.gamesvcid;\r\n            GameSystem.getInstance().tableid = msg.tableid;\r\n\r\n            cc.director.loadScene('Bullfight_GameScene');\r\n        }\r\n\r\n    },\r\n\r\n    onNotifyOwnerTableOver : function (msg) {\r\n        cc.log(\"BaseScene.onNotifyOwnerTableOver\") ;\r\n\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            var data = {\r\n                gamesvcid : msg.gamesvcid,\r\n                tableid : msg.tableid,\r\n                privateid : msg.privateid,\r\n            };\r\n\r\n            var alert = AlertView.create();\r\n            alert.setPositiveButton(function () {\r\n                self.sendFindTable(1,data);\r\n            },\"进入游戏\");\r\n            alert.setNegativeButton(function () {\r\n\r\n            },\"取消\");\r\n\r\n\r\n            alert.show(\"房间：\" + msg.tableid + \"(\"+ msg.tablename + \"),剩余\" + msg.remaintime + \"秒就要结束了，是否立刻进入房间？\" ,AlertViewBtnType.E_BTN_CANCLE);\r\n        }\r\n\r\n    },\r\n\r\n    sendFindTable : function (data) {\r\n        cc.log(\"BaseScene.sendFindTable,roomId = \" + data.privateid);\r\n        var createRoom = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);\r\n        var data = {\r\n            privateid : data.privateid,\r\n        };\r\n        if(createRoom) {\r\n            createRoom.send(data);\r\n        }\r\n    },\r\n\r\n    notifyOwnerConfirmSit : function(msg)\r\n    {\r\n        cc.log(\"BaseScene.notifyOwnerConfirmSit,msg = \" + msg.gamesvcid);\r\n\r\n        var self = this;\r\n\r\n        var data = {\r\n            gamesvcid : msg.gamesvcid,\r\n            tableid : msg.tableid,\r\n            playeruid : msg.sitUid,\r\n            privateid : msg.privateid,\r\n        };\r\n\r\n        var alert = AlertView.create();\r\n        alert.setPositiveButton(function () {\r\n            self.sendOwnerConfirm(1,data);\r\n        },\"同意\");\r\n        alert.setNegativeButton(function () {\r\n            self.sendOwnerConfirm(2,data);\r\n        },\"拒绝\");\r\n        \r\n        var show = msg.name + \"(\" + msg.sitUid + \")申请携带\"  + msg.coin+ \"牛友币进入您\"\r\n                    + msg.privateid + \"(\"+ msg.tablename + \")牌局,是否同意?\";\r\n\r\n        alert.show(show, AlertViewBtnType.E_BTN_CANCLE);\r\n    },\r\n\r\n    sendOwnerConfirm : function (result, data) {\r\n        var data = {\r\n            gamesvcid : data.gamesvcid,\r\n            tableid   : data.tableid,\r\n            playeruid : data.playeruid,\r\n            privateid : data.privateid,\r\n            result    : result,   // 1:同意，2:拒绝\r\n        };\r\n\r\n        cc.log(\"BaseScene.sendOwnerConfirm.data = \",JSON.stringify(data));\r\n        MessageFactory.createMessageReq(window.US_REQ_OWNER_CONFIRM_CMD_ID).send(data);\r\n    },\r\n\r\n    OwnerConfirmSit : function (msg) {\r\n        cc.log(\"BaseScene.OwnerConfirmSit\");\r\n        if(msg.code == SocketRetCode.RET_SUCCESS)\r\n        {\r\n            ToastView.show(msg.desc);\r\n        }\r\n    },\r\n\r\n    createAlertView : function (desc) {\r\n        cc.log(\"BaseScene.createAlertView,desc = \" + desc);\r\n        ToastView.show(desc,2);\r\n    },\r\n\r\n    onLocalMessage : function (event) {\r\n        cc.log(\"BaseScene.onLocalMessage\");\r\n        if(event == undefined)\r\n        {\r\n            return ;\r\n        }\r\n        var tag = event.tag ;\r\n\r\n        if(tag == window.LocalMsgType.SENDMSG_TIMEOUT)\r\n        {\r\n            this.msgSendTimeOut();\r\n        }\r\n        else if(tag == window.LocalMsgType.UPDATE_USERINFO){\r\n\r\n        }\r\n\r\n    } ,\r\n\r\n\r\n    onHttpResponse : function (event) {\r\n        cc.log(\"BaseScene.onHttpResponse\");\r\n        if(!event.isSucceed){\r\n            return ;\r\n        }\r\n\r\n    },\r\n\r\n\r\n    reStartSocket : function()\r\n    {\r\n        cc.log(\"BaseScene.reStartSocket\");\r\n        this.m_llSendTime = -1;\r\n        SocketManager.getInstance().reStartSocket();\r\n    },\r\n\r\n    startHeartBeat : function () {\r\n        cc.log(\"BaseScene.startHeartBeat\");\r\n        this.schedule(this.sendHeartBeat, window.HEART_BEAT_TIME);\r\n    },\r\n\r\n    sendHeartBeat : function () {\r\n        cc.log(\"BaseScene.sendHeartBeat\");\r\n        if (SocketManager.getInstance().isConnected()){\r\n            var msg = MessageFactory.createMessageReq(window.US_REQ_HEARTBEAT_CMD_ID);\r\n            if(msg)\r\n            {\r\n                this.m_llSendTime = new Date().getTime();;\r\n                msg.send();\r\n                this.bBeginHeart = true;\r\n            }\r\n            else\r\n            {\r\n                cc.log(\"BaseScene.sendHeartBeat,msg = null\");\r\n            }\r\n        }else{\r\n            cc.warn(\"BaseScene.sendHeartBeat,服务器尚未连接，心跳发送失败\")\r\n        }\r\n\r\n    },\r\n\r\n    onCheckNetReStart : function(){\r\n        cc.log(\"BaseScene.onCheckNetReStart\");\r\n        this.netReStartCnt ++;\r\n        if(this.netReStartCnt % 6 == 0)\r\n        {\r\n            this.reStartSocket();\r\n        }\r\n\r\n        if(this.netReStartCnt == 18)\r\n        {\r\n            this.netReStartCnt= 0;\r\n            GlobalEventManager.getInstance().emitEvent(window.LocalMessage, {tag: window.LocalMsgType.SENDMSG_TIMEOUT});\r\n            this.unschedule(this.onCheckNetReStart);\r\n        }\r\n    },\r\n\r\n    msgSendTimeOut : function () {\r\n        cc.log(\"BaseScene.msgSendTimeOut\");\r\n        this.reconnect_times = 5;\r\n        this.reStartSocket();\r\n\r\n        this.unschedule(this.sendHeartBeat);\r\n\r\n        this.NowReconnect = true;\r\n        var text = \"您的网络连接超时，正在疯狂尝试恢复\"+ 6;\r\n        this.pToastView  = ToastView.show(text, 6)\r\n\r\n        this.disNetTime = 6;\r\n        this._dNetCount = 0;\r\n        this.schedule(this.reDisConTime,1);\r\n    },\r\n\r\n    reDisConTime : function () {\r\n        cc.log(\"BaseScene.reDisConTime\");\r\n        if(this.pToastView)\r\n        {\r\n            this.disNetTime -= 1;\r\n            var text = \"您的网络连接超时，正在疯狂尝试恢复 \" + this.disNetTime;\r\n            //this.pToastView.setTips(text);\r\n            this._dNetCount++;\r\n\r\n            if(this.disNetTime <= 0)\r\n            {\r\n                this.unschedule(this.reDisConTime);\r\n                this.pToastView.removeFromParent(true);\r\n                this.pToastView = null;\r\n                this.reconnect_times = 5;\r\n\r\n                this.m_pNetAlert = AlertView.create();\r\n\r\n\r\n                this.m_pNetAlert.setPositiveButton(this.replyReConnectYes);\r\n                this.m_pNetAlert.setNegativeButton(this.replyReConnectNo);\r\n                this.m_pNetAlert.show(\"网络连接超时，您需要继续恢复游戏吗？\",AlertViewBtnType.E_BTN_CANCLE, this);\r\n\r\n            }\r\n        }\r\n    },\r\n\r\n    replyReConnectYes : function () {\r\n        cc.log(\"BaseScene.replyReConnectYes\");\r\n        this.m_pNetAlert = null ;\r\n        GlobalEventManager.getInstance().emitEvent(window.LocalMessage,{tag:window.LocalMsgType.SENDMSG_TIMEOUT});\r\n    },\r\n\r\n    replyReConnectNo : function () {\r\n        cc.log(\"BaseScene.replyReConnectNo\");\r\n        cc.director.loadScene('hall');\r\n    },\r\n\r\n    sendLoginHall : function () {\r\n        cc.log(\"BaseScene.sendLoginHall\");\r\n        var login = MessageFactory.createMessageReq(window.US_REQ_LOGIN_CMD_ID);\r\n        if(login)\r\n        {\r\n            login.send();\r\n        }\r\n    },\r\n\r\n    getUserDetail : function () {\r\n        cc.log(\"BaseScene.getUserDetail\");\r\n        var detail = MessageFactory.createMessageReq(window.US_REQ_USER_DETAIL_CMD_ID);\r\n        if (detail)\r\n        {\r\n            detail.send();\r\n        }\r\n    },\r\n\r\n    onSocketDisconnected : function () {\r\n        cc.log(\"BaseScene.onSocketDisconnected\");\r\n        this.unschedule(this.sendHeartBeat);\r\n\r\n        if(!this.onGameBack){\r\n            this.scheduleOnce(this.callLoginServer, 1);\r\n        }\r\n    },\r\n\r\n    onSocketConnecting : function () {\r\n        cc.log(\"BaseScene.onSocketConnecting\");\r\n        this.unschedule(this.sendHeartBeat);\r\n        ToastView.show(\"连接中...\");//\r\n    },\r\n\r\n    onSocketConnected : function () {\r\n        cc.log(\"BaseScene.onSocketConnected\");\r\n        this.unschedule(this.callLoginServer);\r\n        this.reconnect_times = 5;\r\n        this.NowReconnect = false;\r\n\r\n        this.sendLoginHall();\r\n\r\n        this.startHeartBeat();\r\n\r\n        this.unschedule(this.waitReConnect);\r\n        this.unschedule(this.reDisConTime);\r\n        this.unschedule(this.onCheckNetReStart);\r\n        this.unschedule(this.reAllDisConTime);\r\n\r\n        if(this.pToastView)\r\n        {\r\n            this.pToastView.removeFromParent(true);\r\n            this.pToastView = null;\r\n\r\n            ToastView.show(\"连接成功，正在回到游戏\");\r\n        }\r\n        else\r\n        {\r\n            if(this.changeHouTai)\r\n            {\r\n                this.changeHouTai = false;\r\n                ToastView.show(\"连接成功\");\r\n            }\r\n        }\r\n\r\n        if(this.m_pNetAlert)\r\n        {\r\n            this.m_pNetAlert.removeFromParent(true);\r\n            this.m_pNetAlert = null;\r\n        }\r\n    },\r\n\r\n    waitReConnect : function () {\r\n        \r\n    },\r\n\r\n    reAllDisConTime : function () {\r\n        cc.log(\"BaseScene.reAllDisConTime\");\r\n        if(this.m_pNetAlert)\r\n        {\r\n            this.m_pNetAlert.removeFromParent(true);\r\n            this.m_pNetAlert = null;\r\n        }\r\n\r\n        // var pAlert = AlertView.create();\r\n        // pAlert.setPositiveButton(this.replyReConnectNo);\r\n        // pAlert.show(\"您的游戏由于短线而中断，无法重新连接到游戏？\", this);\r\n        // this.scheduleOnce(this.gotoHallUpdate, 2);\r\n    },\r\n\r\n    gotoHallUpdate : function () {\r\n        cc.log(\"BaseScene.gotoHallUpdate\");\r\n        this.unschedule(this.gotoHallUpdate);\r\n        this.NowReconnect = false;\r\n        cc.director.loadScene(\"hall\")\r\n        this.bCheckConnect = true;\r\n\r\n\r\n    },\r\n    onUpdateUserInfo : function () {\r\n        // var money = GamePlayer.getInstance().Money() ;\r\n        // GamePlayer.getInstance().SetMoney(money);\r\n\r\n    },\r\n\r\n\r\n    UpdateDeviceStatus : function () {\r\n        \r\n    },\r\n\r\n    updatePlayerMoney : function (msg) {\r\n        // if (msg.ret.retCode >= window.RET_OK)\r\n        // {\r\n        //     if(msg.uid == GamePlayer.getInstance().uid)\r\n        //     {\r\n        //         if(msg.type == 1)\r\n        //         {\r\n        //             GamePlayer.getInstance().SetMoney(msg.money);\r\n        //         }\r\n        //         else if(msg.type == 2)\r\n        //         {\r\n        //             GamePlayer.getInstance().freezemoney = msg.money;\r\n        //         }\r\n\r\n        //         GlobalEventManager.getInstance().emitEvent(window.LocalMessage,{tag:window.LocalMsgType.UPDATE_USERINFO});\r\n        //     }\r\n\r\n        // }\r\n    },\r\n    updateHeartBeat : function (msg) {\r\n        var netDelta = new Date().getTime - this.m_llSendTime;\r\n        this.netTimeTotal += netDelta;\r\n        this.netCount++;\r\n\r\n        if(this.netCount > 5)\r\n        {\r\n          //  this.sendNetStrength(this.netTimeTotal);\r\n            this.netTimeTotal = 0;\r\n            this.netCount = 0;\r\n        }\r\n\r\n        this.bBeginHeart = false;\r\n    },\r\n\r\n    updateOfflineReult : function (msg) {\r\n        // OfflineResultPacket* packet = (OfflineResultPacket*)msg;\r\n        // if (msg.ret.retCode == window.RET_OK)\r\n        // {\r\n        //     if(0 != msg.isWin)\r\n        //     {\r\n\r\n        //         var strMsg = msg.strInfo.msg;\r\n\r\n        //         var alert = AlertView.create();\r\n        //         alert.setPositiveButton();\r\n        //         alert.show(strMsg,\"txz.png\",false,null,true, packet.isWin);\r\n\r\n        //     }\r\n        // }\r\n    },\r\n\r\n    callUpdateMoney : function () {\r\n        //update money\r\n        // var msg = MessageFactory.createCommonMessage(window.UPDATE_PLAYER_MONEY);\r\n        // if(msg){\r\n        //     msg.send(1);\r\n        // }\r\n    },\r\n\r\n\r\n    callLoginServer : function() {\r\n\r\n        if (GameSystem.getInstance().bLogin)\r\n        {\r\n            if (!SocketManager.getInstance().isConnected())\r\n            {\r\n                cc.log(\"LoadingView.callbackBtnLogin callLoginServer\");\r\n                SocketManager.getInstance().startSocket();\r\n            }\r\n        }\r\n    } ,\r\n\r\n});\r\n"
  ]
}