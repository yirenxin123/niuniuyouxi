require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"AdvertItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '13a7dle1ehOG75EMd3e7liz', 'AdvertItem');
// Script\ComScene\PopView\AdvertItem.js

'use strict';

var CusWebView = require('CusWebView');

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        AdvertSprite: cc.Sprite,
        Url: '',
        webViewPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    updateAdverItem: function updateAdverItem(info) {
        this.Url = info.jumpurl;
        //this.getSpriteFrame2(info.pic)

        UpdateWXHeadIcon(info.pic, this.AdvertSprite);
        //UpdateWXHeadIcon("http://wx.qlogo.cn/mmopen/Po9mkm3Z42tolYpxUVpY6mvCmqalibOpcJ2jG3Qza5qgtibO1NLFNUF7icwCibxPicbGmkoiciaqKEIdvvveIBfEQqal8vkiavHIeqFT/0.png",this.AdvertSprite);
    },

    callBackBtn: function callBackBtn() {

        var message = {
            popView: "FindView",
            btn: "CallBackBtn",
            url: this.Url
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        return;

        var WebView = cc.instantiate(this.webViewPrefab);
        cc.director.getScene().addChild(WebView);
        var winSize = cc.director.getWinSize();
        WebView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        WebView.getComponent('CusWebView').setWebViewUrl(this.Url);
    },

    getSpriteFrame2: function getSpriteFrame2(url, successCb, failureCb, target, otherSender) {
        //url = this.kyHelper + url;


        //cc.log(page1);

        var xhr = new XMLHttpRequest();

        var self = this;

        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
                var response = xhr.responseText;

                var img = BASE64.decoder(response);

                //cc.log("img=", img);

                var text = new Uint8Array(response, 0, response.length);
                cc.log("text = " + text);

                var img = new Image();
                img.src = BASE64.decoder(response);
                cc.log("img.src = " + img.src);

                var texture = new cc.Texture2D();
                texture.initWithImage(img); //cc.Texture2D.SRC_ALPHA, 1, 1, cc.size(1080, 300));
                texture.handleLoadedTexture();

                var newframe = new cc.SpriteFrame(texture);
                self.AdvertSprite.spriteFrame = newframe;

                // if (successCb != null) {
                //     successCb.apply(target, [newframe, otherSender]);
                // }
            } else {
                    // if(failureCb != null)
                    // {
                    //     failureCb.apply(target);
                    // }
                }
        };

        xhr.timeout = 5000;
        xhr.open("GET", url, true);
        xhr.send();
    }
});

cc._RFpop();
},{"CusWebView":"CusWebView"}],"AlertView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9956eOLEABEHpZjZtGtXhv0', 'AlertView');
// Script\ComScene\PopView\AlertView.js

'use strict';

window.AlertViewBtnType = cc.Enum({
    E_BTN_CLOSE: 0, //关闭和确定按钮
    E_BTN_CANCLE: 1 });

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

function AView() {

    this.rootNode = null;
    this.btnTypeFlag = AlertViewBtnType.E_BTN_CLOSE;
    this._positiveFlag = false;
    this._negativeFlag = false;
    this._callbackPositive = null;
    this._callbackNegative = null;
    this.positive = null;
    this.negative = null;
    this.positive_single = null;
    this.btnclose = null;
    this.positiveName = "";
    this.negativeName = "";

    this.positiveBtResNormal = null;

    this.reSet = function () {
        this.btnTypeFlag = AlertViewBtnType.E_BTN_CLOSE;
        this._positiveFlag = false;
        this._negativeFlag = false;
        this._callbackPositive = null;
        this._callbackNegative = null;
        this.positive = null;
        this.negative = null;
        this.positive_single = null;
        this.btnclose = null;
        this.positiveName = "";
        this.negativeName = "";
    };

    this.dismiss = function () {

        if (this.rootNode) {
            this.reSet();
            this.rootNode.removeFromParent(true);
            this.rootNode = null;
        }
    };

    this.show = function (tips, btnType, parent, tag) {
        this.dismiss();
        var self = this;

        window.loadPrefabs("prefabs/alertView", function (view) {

            self.rootNode = view;
            self.updateView(view, tips, btnType, parent);
            if (tag != undefined) {
                self.rootNode.tag = tag;
            }
        }, parent);
    };

    this.showOne = function (tips, btnType, parent) {
        if (parent) {
            parent.removeChildByTag(-100);
        } else {
            cc.director.getScene().removeChildByTag(-100);
        }
        this.show(tips, btnType, parent, -100);
    };

    this.updateView = function (node, tips, btnType, parent) {
        var self = this;
        node.on(cc.Node.EventType.TOUCH_START, function (event) {
            event.stopPropagation();
            return;
        });

        this.btnTypeFlag = btnType;

        if (tips == "" || tips === undefined) {
            tips = "未知错误";
        }

        var desTxt = cc.find("Bg/Content", node).getComponent(cc.Label);

        desTxt.string = tips;
        this.positive_single = cc.find("Bg/BtnSureSingle", node);
        this.negative = cc.find("Bg/BtnCancle", node);
        this.positive = cc.find("Bg/BtnSure", node);
        this.btnclose = cc.find("Bg/BtnClose", node);
        if (this.btnTypeFlag == AlertViewBtnType.E_BTN_CLOSE) {
            this.negative.active = false;
            this.positive.active = false;
            this.positive_single.active = true;
            this.btnclose.active = true;
        } else {
            this.negative.active = true;
            this.positive.active = true;
            this.positive_single.active = false;
            this.btnclose.active = false;
        }

        if (this.positiveName != "" && this.positiveName != undefined) {
            if (this.btnTypeFlag == AlertViewBtnType.E_BTN_CLOSE) {
                this.setPositiveSingleName(this.positiveName);
            } else {
                this.setPositiveButtonName(this.positiveName);
            }
        }

        if (this.negativeName != "" && this.negativeName != undefined) {
            this.setNegativeButtonName(this.negativeName);
        }

        this.addButtonListenner();

        // //var positiveText = cc.find("Image_10_0",this.positive);
        //
        // if(this.positiveBtResNormal){
        //     window.loadImg(this.positiveBtResNormal,function(spriteFrame){
        //         // var buttom = positiveText.getComponent(cc.Sprite) ;
        //         // buttom.spriteFrame = spriteFrame;
        //     });
        // }


        window.scaleTo(node);
    };

    this.addButtonListenner = function () {
        var self = this;
        if (this.negative.active) {
            this.negative.on(cc.Node.EventType.TOUCH_END, function () {
                cc.log("AlertView.addButtonListenner,negative");
                if (self.btnTypeFlag != AlertViewBtnType.E_BTN_CLOSE) {

                    MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

                    if (self._callbackNegative) {
                        self._callbackNegative();
                    }
                    self.dismiss();
                }
            });
        }

        if (this.btnclose.active) {
            this.btnclose.on(cc.Node.EventType.TOUCH_END, function () {
                cc.log("AlertView.addButtonListenner,btnclose");
                if (self.btnTypeFlag == AlertViewBtnType.E_BTN_CLOSE) {
                    MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
                    if (self._callbackNegative) {
                        self._callbackNegative();
                    }
                    self.dismiss();
                }
            });
        }

        if (this.positive.active) {
            this.positive.on(cc.Node.EventType.TOUCH_END, function () {
                cc.log("AlertView.addButtonListenner,positive");
                if (self.btnTypeFlag != AlertViewBtnType.E_BTN_CLOSE) {
                    MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
                    if (self._callbackPositive) {
                        self._callbackPositive();
                    }
                    self.dismiss();
                }
            });
        }

        if (this.positive_single.active) {

            this.positive_single.on(cc.Node.EventType.TOUCH_END, function () {
                cc.log("AlertView.addButtonListenner,positive_single");
                if (self.btnTypeFlag == AlertViewBtnType.E_BTN_CLOSE) {
                    MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
                    if (self._callbackPositive) {
                        self._callbackPositive();
                    }
                    self.dismiss();
                }
            });
        } else {
            this.positive_single.removeFromParent();
            //this.positive_single.getComponent(cc.Button).interactable = false;
        }
    }, this.setPositiveButton = function (callback, name) {
        //this._positiveFlag = true;
        this._callbackPositive = callback;
        this.positiveName = name;
    };

    this.setNegativeButton = function (callback, name) {
        //this._negativeFlag = true;
        this._callbackNegative = callback;
        this.negativeName = name;
    };

    this.setPositiveButtonName = function (name) {
        var lable = cc.find("label", this.positive);
        lable.getComponent(cc.Label).string = name;
    };

    this.setPositiveSingleName = function (name) {
        var lable = cc.find("label", this.positive_single);
        lable.getComponent(cc.Label).string = name;
    };

    this.setNegativeButtonName = function (name) {
        var lable = cc.find("label", this.negative);
        lable.getComponent(cc.Label).string = name;
    };

    this.removeFromParent = function () {
        this.dismiss();
    };
};

var AlertView = {

    create: function create() {
        return new AView();
    }

};

module.exports = AlertView;

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"AssetsDownload":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd9b3fw2WYxJNpA/aNHohDhH', 'AssetsDownload');
// Script\Hotupdate\AssetsDownload.js

"use strict";

/** 
 * 队列加载资源
 * Author      : donggang
 * Create Time : 2016.12.15
 * 
 * 事件：
 * this.onProgress      更新进度
 * this.onNoNetwork     断网
 * this.onComplete      更新完成
 */

module.exports = cc.Class({
    /** 分析并获取需要更新的资源 */
    download: function download(storagePath, localManifest, remoteManifest) {
        this._storagePath = storagePath;
        this._localManifest = localManifest;
        this._remoteManifest = remoteManifest;

        this._nocache = new Date().getTime();

        this._downloadUnits = []; // 下载文件对象集合
        this._completeUnits = []; // 已下载完成对象集合
        this._failedUnits = []; // 下载失败文件对象集合
        this._deleteUnits = []; // 需要删除文件对象集合

        this._downloadComplete = 0; // 下载完成的文件数量
        this._downloadFailed = 0; // 下载失败的文件数量
        this._failCount = 0; // 下载失败的次数
        this._concurrentCurrent = 0; // 并发数量当前值

        this._analysisDownloadUnits();
        this._analysisDeleteUnits();

        // 当前总更新单位数量 = 更新完成文件数量 + 待更新文件数量
        this._totalUnits = this._downloadComplete + this._downloadUnits.length;

        cc.log("【更新】共有{0}个文件需要更新".format(this._downloadUnits.length));
        cc.log("【更新】共有{0}个文件需要删除".format(this._deleteUnits.length));

        this._items = this._downloadUnits.slice(0);

        if (this._items.length > 0) {
            this._downloadAsset();
        } else {
            cc.log("【更新】无更新文件，更新完成");
            if (this.onComplete) this.onComplete();
        }
    },

    /** 对比本地项目清单数据和服务器清单数据，找出本地缺少的以及和服务器不一样的资源 */
    _analysisDownloadUnits: function _analysisDownloadUnits() {
        for (var key in this._remoteManifest.assets) {
            if (this._localManifest.assets.hasOwnProperty(key)) {
                if (game.AssetConfig.debugRes || this._remoteManifest.assets[key].md5 != this._localManifest.assets[key].md5) {
                    // cc.log("【更新】准备下载更新的资源 {0}".format(key));
                    this._addDownloadUnits(key);
                }
            } else {
                // cc.log("【更新】准备下载本是不存在的资源 {0}".format(key));
                this._addDownloadUnits(key);
            }
        }
    },

    /** 对比本地项目清单数据和服务器清单数据，找出本地多出的资源 */
    _analysisDeleteUnits: function _analysisDeleteUnits() {
        for (var key in this._localManifest.assets) {
            if (this._remoteManifest.assets.hasOwnProperty(key) == false) {
                // cc.log("【更新】准备删除的资源{0}".format(key)); 
                this._deleteUnits.push(key);
            }
        }
    },

    /** 添加下载单位 */
    _addDownloadUnits: function _addDownloadUnits(key) {
        if (this._remoteManifest.assets[key].state != true) {
            this._downloadUnits.push(key); // 远程版本的文件 MD5 值和本地不同时文件需要下载
        } else {
            this._downloadComplete++; // 恢复状态时的下载完成数量
        }
    },

    /** 断网后恢复更新状态 */
    recovery: function recovery() {
        this._downloadAsset();
    },

    /** 下载资源 */
    _downloadAsset: function _downloadAsset() {
        if (game.config.textUpdate) this._remoteManifest.server = game.AssetConfig.testCdn;

        var relativePath = this._items.shift();
        var url = cc.path.join(this._remoteManifest.server, game.AssetConfig.line, relativePath);

        // 下载成功
        var complete = function (asset) {
            // 文件保存到本地
            this._saveAsset(relativePath, asset);

            // 记录更新完成的文件
            this._completeUnits.push(relativePath);

            // 下载完成的文件数量加 1
            this._downloadComplete++;

            if (game.AssetConfig.debugProgress) cc.log("【更新】进度 {0}/{1}，当前有 {2} 个资源并行下载".format(this._downloadComplete, this._totalUnits, this._concurrentCurrent));

            // 还原并发数量
            this._concurrentCurrent--;

            // 更新进度事件
            if (this.onProgress) {
                this.onProgress(relativePath, this._downloadComplete / this._totalUnits);
            }

            // 判断是否下载完成
            this._isUpdateCompleted();
        }.bind(this);

        // 下载失败
        var error = function (error) {
            this._failedUnits.push(relativePath);
            this._concurrentCurrent--;
            this._downloadFailed++;

            if (game.HttpEvent.NO_NETWORK) {
                // 触发断网事件
                if (this._concurrentCurrent == 0) {
                    if (this.onNoNetwork) this.onNoNetwork();
                }
            } else {
                cc.log("【更新】下载远程路径为 {0} 的文件失败，错误码为 {1}".format(url, error));
                cc.log("【更新】进度 {0}/{1}, 总处理文件数据为 {2}".format(this._downloadComplete, this._totalUnits, this._downloadComplete + this._downloadFailed));

                this._isUpdateCompleted();
            }
        }.bind(this);

        game.http.getByArraybuffer(this._noCache(url), complete, error);

        // 开启一个并行下载队列
        this._concurrentCurrent++;
        if (this._concurrentCurrent < game.AssetConfig.concurrent) {
            this._downloadAsset();
        }
    },

    /** 下载失败的资源 */
    _downloadFailedAssets: function _downloadFailedAssets() {
        // 下载失败的文件数量重置
        this._downloadFailed = 0;
        this._downloadUnits = this._failedUnits;
        this._failedUnits = [];
        this._items = this._downloadUnits.slice(0);

        if (this._items.length > 0) {
            this._downloadAsset();
        }
    },

    /** 判断是否全部更新完成 */
    _isUpdateCompleted: function _isUpdateCompleted() {
        var handleCount = this._downloadComplete + this._downloadFailed; // 处理完成数量

        if (this._totalUnits == this._downloadComplete) {
            // 全下载完成
            cc.log("【更新】更新完成");

            // 触发热更完成事件
            if (this.onComplete) this.onComplete();

            // 删除本地比服务器多出的文件
            this._deleteAssets();
        } else if (this._totalUnits == handleCount) {
            // 全处理完成，有下载失败的文件，需要重试
            cc.log("【更新】下载文件总数量　　：", this._totalUnits);
            cc.log("【更新】下载成功的文件数量：", this._downloadComplete);
            cc.log("【更新】下载失败的文件数量：", this._downloadFailed);

            // 更新失败的次数加 1
            this._failCount++;

            if (this._failCount < 3) {
                cc.log("【更新】更新重试第 {0} 次".format(this._failCount));

                this._downloadFailedAssets();
            } else {
                cc.log("【更新】更新失败");

                // 触发热更失败事件
                if (this.onFaild) this.onFaild();
            }
        } else if (this._items.length > 0 && this._concurrentCurrent < game.AssetConfig.concurrent) {
            // 队列下载
            this._downloadAsset();
        }
    },

    /** 删除本地比服务器多出的文件 */
    _deleteAssets: function _deleteAssets() {
        for (var i = 0; i < this._deleteUnits.length; i++) {
            var relativePath = this._deleteUnits[i];
            var filePath = cc.path.join(this._storagePath, relativePath);
            if (jsb.fileUtils.removeFile(filePath)) {
                cc.log("【更新】版本多余资源 {0} 删除成功".format(filePath));
            } else {
                cc.log("【更新】版本多余资源 {0} 删除失败".format(filePath));
            };
        }
    },

    /** 文件保存到本地 */
    _saveAsset: function _saveAsset(relativePath, asset) {
        if (cc.sys.isNative) {
            var storeDirectory = cc.path.join(this._storagePath, relativePath.substr(0, relativePath.lastIndexOf("/")));
            var storePath = cc.path.join(this._storagePath, relativePath);

            // 存储目录
            if (jsb.fileUtils.isDirectoryExist(storeDirectory) == false) {
                jsb.fileUtils.createDirectory(storeDirectory);
            }

            // 存储文件
            jsb.fileUtils.writeDataToFile(new Uint8Array(asset), storePath);
        }
    },

    /** 规避 HTTP 缓存问题 */
    _noCache: function _noCache(url) {
        return url + "?t=" + this._nocache;
    }
});

cc._RFpop();
},{}],"AssetsManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ce2a5ImqPBDf4CPEBOQUoet', 'AssetsManager');
// Script\Hotupdate\AssetsManager.js

"use strict";

/** 
 * 资源管理
 * Author      : donggang
 * Create Time : 2016.11.26
 * 
 * 需求：
 * 1、版本配置文件对比，提示有新版本
 * 2、版本清单文件对比，分析需要更新的资源文件
 * 3、批量下载更新的资源文件保存到系统本地存储目录
 * 4、批量删除服务器清单文件中没有的资源文件
 * 5、更新失败或异常中断时，记录更新状态，下次触发更新时恢复更新进度，不下载已更新的文件
 * 6、智能队列更新资源文件，以游戏 fps 数据做为动态计算更新速度（手机性能不够，暂时没必要做）
 * 7、版本回退功能，通过查询目录的顺序，把版本版本的更新文件放到查询目录中（思考）
 * 8、版本文件摘要验证功能（思考）
 * 9、配置文件的数据内存是没有删除的（思考是否需要做处理）
 */

// 本地缓存关键字
var LOCAL_STORAGE_FOLDER = "game-remote-asset"; // 版本资源目录
var LOCAL_STORAGE_KEY_PROJECT = "update_project"; // 本地缓存清单数据
var LOCAL_STORAGE_KEY_UPDATE_STATE = "update_state"; // 本地缓存更新状态数据（每完成一个资源下载会记录完成数据队列)
var MODULE_PROJECT_MANIFEST_PATH = "version/{0}_project"; // 模块清单路径

window.game = window.game || {};

// 事件
game.AssetEvent = {};
game.AssetEvent.NEW_VERSION = "asset_new_version"; // 已是最新版本
game.AssetEvent.NEW_VERSION_FOUND = "asset_new_version_found"; // 找到新版本
game.AssetEvent.SUCCESS = "asset_success"; // 更新成功
game.AssetEvent.FAILD = "asset_failed"; // 更新失败
game.AssetEvent.PROGRESS = "asset_progress"; // 更新进度
game.AssetEvent.LOCAL_PROJECT_MANIFEST_LOAD_FAIL = "asset_local_project_manifest_load_fail"; // 获取游戏中路安装包中资源清单文件失败
game.AssetEvent.REMOTE_VERSION_MANIFEST_LOAD_FAILD = "asset_remote_version_manifest_load_faild"; // 获取远程版本配置文件失败
game.AssetEvent.REMOTE_PROJECT_MANIFEST_LOAD_FAILD = "asset_remote_project_manifest_load_faild"; // 获取远程更新单清文件失败
game.AssetEvent.NO_NETWORK = "asset_no_network"; // 断网

// 配置
game.AssetConfig = {};
game.AssetConfig.debugVersion = false; // 无视版本号测试
game.AssetConfig.debugRes = false; // 无视资源版本对比测试
game.AssetConfig.debugProgress = false; // 打印进度日志
game.AssetConfig.testIp = "172.18.254.56"; // 测试服务器地址
game.AssetConfig.testCdn = "http://" + game.AssetConfig.testIp + "/update/"; // 测试 CDN 服务器地址

game.AssetConfig.concurrent = 1; // 最大并发更新文件数量（有网络IO和文件IO并载数量在边玩游戏边下载时建议不超过2）
game.AssetConfig.line = "line1"; // 版本线路文件夹，用于更新时优先更新没有用的线路，测试成功后切换热更

var AssetsDownload = require("AssetsDownload");
var AssetsManager = cc.Class({
    extends: cc.EventTarget,

    /** 更新进度 */
    getProgress: function getProgress() {
        return this._progress;
    },

    /**
     * 对比服务器版本信息
     * @param appManifestPath(string)       本地清单文件路径
     */
    check: function check(moduleName) {
        if (this._isUpdate == true) {
            cc.log("【更新】模块{0}正在更新中".format(moduleName));
            return;
        }

        if (cc.sys.isNative) {
            this._storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + LOCAL_STORAGE_FOLDER;

            if (jsb.fileUtils.isDirectoryExist(this._storagePath) == false) {
                jsb.fileUtils.createDirectory(this._storagePath);
            }

            cc.log("【更新】版本本地存储路径 {0}".format(this._storagePath));
        } else {
            this._storagePath = "";
        }

        this._nocache = game.getLocalTime();
        this._ad = new AssetsDownload();

        this._moduleName = moduleName; // 模块名
        this._moduleManifest = LOCAL_STORAGE_KEY_PROJECT + "_" + moduleName;
        this._moduleState = LOCAL_STORAGE_KEY_UPDATE_STATE + "_" + moduleName;

        this._appManifest; // 安装里的清单数据（JSON)
        this._localManifest; // 本地存储里的清单数据（JSON)
        this._remoteManifest; // 远程更新服务器的清单数据（JSON)

        this._progress = 0; // 更新进度
        this._isUpdate = true; // 是否正在更新中

        this._loadLocalManifest(MODULE_PROJECT_MANIFEST_PATH.format(moduleName));
    },

    /** 开始更新版本 */
    update: function update() {
        // 获取本地存储更新状态数据，如果有则继续上次的更新，无则下载远程服务器版本清单数据
        var tempManifest = cc.sys.localStorage.getItem(this._moduleState);
        if (tempManifest == null) {
            var complete = function (content) {
                // 解析远程资源清单数据
                try {
                    this._remoteManifest = JSON.parse(content);
                } catch (e) {
                    cc.error("【更新】远程路版本清单数据解析错误");
                }

                // 分析并下载资源
                this._downloadAssets();
            }.bind(this);

            var error = function (error) {
                cc.log("【更新】获取远程路径为 {0} 的版本清单文件失败".format(this._remoteManifest.remoteManifest));

                this._isUpdate = false;

                this._dispatchEvent(game.AssetEvent.REMOTE_PROJECT_MANIFEST_LOAD_FAILD);
            }.bind(this);

            if (game.config.textUpdate) this._localManifest.server = game.AssetConfig.testCdn;

            var url = this._localManifest.server + game.AssetConfig.line + "/" + this._localManifest.remoteManifest;
            game.http.get(this._noCache(url), complete, error);
        } else {
            cc.log("【更新】获取上次没更新完的版本清单更新状态");

            this._remoteManifest = JSON.parse(tempManifest);

            // 分析并下载资源
            this._downloadAssets();
        }
    },

    /** 加载本地项目中资源清单数据 */
    _loadLocalManifest: function _loadLocalManifest(appManifestPath) {
        // 加载本地项目中资源清单数据
        cc.loader.loadRes(appManifestPath, function (error, content) {
            if (error) {
                cc.log("【更新】获取游戏中路安装包中路径为 {0} 的资源清单文件失败".format(appManifestPath));
                this._dispatchEvent(game.AssetEvent.LOCAL_PROJECT_MANIFEST_LOAD_FAIL);
                return;
            }

            // 安装包中版本清单数据解析
            try {
                this._appManifest = JSON.parse(content);
            } catch (e) {
                cc.error("【更新】安装包中的版本清单数据解析错误");
            }

            // 获取本地存储中版本清单数据（上次更新成功后的远程清单数据）
            var data = cc.sys.localStorage.getItem(this._moduleManifest);
            if (data) {
                try {
                    this._localManifest = JSON.parse(data);
                } catch (e) {
                    cc.error("【更新】本地版本清单数据解析错误");
                }

                // 安装包中的版本高于本地存储版本，则替换本地存储版本数据
                if (this._localManifest.version < this._appManifest.version) {
                    // 删除本地存储中的当前模块的旧的资源
                    for (var key in this._localManifest.assets) {
                        var filePath = cc.path.join(this._storagePath, key);
                        if (jsb.fileUtils.isFileExist(filePath)) {
                            jsb.fileUtils.removeFile(filePath);
                        }
                    }

                    cc.log("【更新】安装包的版本号为{0}，本地存储版本号为{1}，替换本地存储版本数据".format(this._appManifest.version, this._localManifest.version));
                    this._localManifest = this._appManifest;
                }
            } else {
                cc.log("【更新】第一次安装，获取安装版中的版本清单数据");
                this._localManifest = this._appManifest;
            }

            // 检查版本号
            this._checkVersion();
        }.bind(this));
    },

    /** 检查版本号 */
    _checkVersion: function _checkVersion() {
        var complete = function (content) {
            /** 远程版本数据解析 */
            try {
                var remoteVersion = JSON.parse(content);

                // 游戏中路资源版本小于远程版本时，提示有更新
                if (game.AssetConfig.debugVersion || this._localManifest.version < remoteVersion.version) {
                    cc.log("【更新】当前版本号为 {0}，服务器版本号为 {1}, 有新版本可更新".format(this._appManifest.version, remoteVersion.version));
                    this._dispatchEvent(game.AssetEvent.NEW_VERSION_FOUND); // 触发有新版本事件
                } else {
                    cc.log("【更新】当前为最新版本");
                    this._isUpdate = false;
                    this._dispatchEvent(game.AssetEvent.NEW_VERSION); // 触发已是最新版本事件
                }
            } catch (e) {
                cc.error("【更新】远程路版本数据解析错误");
            }
        }.bind(this);

        var error = function (error) {
            cc.log("【更新】获取远程路径为 {0} 的版本文件失败".format(this._localManifest.remoteVersion));
            this._isUpdate = false;
            this._dispatchEvent(game.AssetEvent.REMOTE_VERSION_MANIFEST_LOAD_FAILD);
        }.bind(this);

        if (game.config.textUpdate) this._localManifest.server = game.AssetConfig.testCdn;

        // 获取远程版本数据
        var url = this._localManifest.server + game.AssetConfig.line + "/" + this._localManifest.remoteVersion;
        game.http.get(this._noCache(url), complete, error);
    },

    /** 开始下载资源 */
    _downloadAssets: function _downloadAssets() {
        // 触发热更进度事件
        this._ad.onProgress = function (relativePath, percent) {
            this._progress = percent;

            // 记录当前更新状态，更新失败时做为恢复状态使用
            this._remoteManifest.assets[relativePath].state = true;
            cc.sys.localStorage.setItem(this._moduleState, JSON.stringify(this._remoteManifest));

            this._dispatchEvent(game.AssetEvent.PROGRESS);
        }.bind(this);

        // 触发热更完成事件
        this._ad.onComplete = function () {
            this._isUpdate = false;

            // 删除更新状态数据 
            cc.sys.localStorage.removeItem(this._moduleState);

            // 更新本地版本清单数据，用于下次更新时做版本对比
            for (var key in this._remoteManifest.assets) {
                var asset = this._remoteManifest.assets[key];
                if (asset.state) delete asset.state;
            }
            cc.sys.localStorage.setItem(this._moduleManifest, JSON.stringify(this._remoteManifest));

            // 触发热更完成事件
            this._dispatchEvent(game.AssetEvent.SUCCESS);
        }.bind(this);

        // 触发热更失败事件
        this._ad.onFaild = function () {
            this._isUpdate = false;
            this._dispatchEvent(game.AssetEvent.FAILD);
        }.bind(this);

        // 触发断网事件
        this._ad.onNoNetwork = function () {
            this._isUpdate = false;
            this._dispatchEvent(game.AssetEvent.NO_NETWORK);
        }.bind(this);

        this._ad.download(this._storagePath, this._localManifest, this._remoteManifest);
    },

    /** 断网后恢复状态 */
    recovery: function recovery() {
        this._ad.recovery();
    },

    /**
     * 触发事件
     * @param type(string)      事件类型
     * @param args(object)      事件参数
     */
    _dispatchEvent: function _dispatchEvent(type, args) {
        var event = new cc.Event.EventCustom();
        event.type = type;
        event.bubbles = false;
        event.target = this;
        event.currentTarget = this;
        this.dispatchEvent(event);
    },

    /** 规避 HTTP 缓存问题 */
    _noCache: function _noCache(url) {
        return url + "?t=" + this._nocache;
    }
});

/** 验证是否有覆盖安装，安装包中版本高于本地资源时，删除本地资源的模块资源 */
AssetsManager.check = function (remoteVersion) {
    var moduleTotal = 0;
    var moduleCurrent = 0;

    // 加载安装包中的版本清单文件
    var loadAppManifest = function loadAppManifest(moduleName, modules, versions, remoteVersion) {
        var appManifestPath = MODULE_PROJECT_MANIFEST_PATH.format(moduleName);
        cc.loader.loadRes(appManifestPath, function (error, content) {
            if (error) {
                cc.error("【更新】验证是否有覆盖安装时，获取游戏中路安装包中路径为 {0} 的资源清单文件失败".format(appManifestPath));
                return;
            }

            var storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + LOCAL_STORAGE_FOLDER;
            var appManifest = JSON.parse(content);
            var appVersion = appManifest.version;

            // 获取本地版本清单信息
            var moduleManifest = LOCAL_STORAGE_KEY_PROJECT + "_" + moduleName;
            var manifest = cc.sys.localStorage.getItem(moduleManifest);
            if (manifest) {
                var localManifest = JSON.parse(manifest);
                var localVersion = localManifest.version;

                // 安装包中的版本高于本地存储版本，则替换本地存储版本数据
                if (localVersion < appVersion) {
                    // 删除本地存储中的当前模块的旧的资源
                    for (var key in localManifest.assets) {
                        var filePath = cc.path.join(storagePath, key);
                        if (jsb.fileUtils.isFileExist(filePath)) {
                            jsb.fileUtils.removeFile(filePath);
                        }
                    }

                    versions[moduleName] = appVersion; // 有本地清单数据时，当前版本号为安装包版本号
                    modules[moduleName] = modules[moduleName] > appVersion; // 有本地清单数据时，安卓包版本号小于远程版本号
                } else {
                    versions[moduleName] = localVersion; // 有本地清单数据时，当前版本号为本地版本号
                    modules[moduleName] = modules[moduleName] > localVersion; // 有本地清单数据时，本地清单版本号小于远程版本号
                }
            } else {
                versions[moduleName] = appVersion; // 没有本地清单数据时，当前版本号为安装包版本号
                modules[moduleName] = modules[moduleName] > appVersion; // 没有本地清单数据时，安卓包版本号小于远程版本号
            }

            moduleCurrent++;

            if (moduleCurrent == moduleTotal) {
                if (remoteVersion) remoteVersion(modules, versions);
            }
        });
    };

    // 游戏所有模块的配置文件
    var url = "";

    if (game.config.useSSL) {
        url = "https://{0}:3001/constinfo/version?t={1}".format(game.config.gateSocketIp, game.getLocalTime());
    } else {
        url = "http://{0}:3001/constinfo/version?t={1}".format(game.config.gateSocketIp, game.getLocalTime());
    }

    if (game.config.textUpdate) url = "http://{0}:3001/constinfo/version.json?t={1}".format(game.AssetConfig.testIp, game.getLocalTime());

    // 加载游戏模块当前最前版本号数据
    game.http.get(url, function (version_json) {
        var json = JSON.parse(version_json);
        var modules = json.modules;
        var versions = {};
        game.AssetConfig.line = json.line;

        // 计算游戏共有多少个模块
        for (var moduleName in modules) {
            moduleTotal++;
        }

        // 载入游戏所有安装包中的模块版本数据
        for (var moduleName in modules) {
            loadAppManifest(moduleName, modules, versions, remoteVersion);
        }
    }.bind(this));
};

/** 
 * 删除模块 
 * @param moduleName(string)    模块名
 */
AssetsManager.delete = function (moduleName) {
    var storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + LOCAL_STORAGE_FOLDER;
    var data = cc.sys.localStorage.getItem(LOCAL_STORAGE_KEY_PROJECT + "_" + moduleName);
    if (data) {
        try {
            var localManifest = JSON.parse(data);

            for (var key in localManifest.assets) {
                var filePath = cc.path.join(storagePath, key);
                if (jsb.fileUtils.isFileExist(filePath)) {
                    jsb.fileUtils.removeFile(filePath);
                }
            }
        } catch (e) {
            cc.error("【更新】删除模块时,本地版本清单数据解析错误");
        }

        cc.sys.localStorage.removeItem(LOCAL_STORAGE_KEY_PROJECT + "_" + moduleName);
        cc.sys.localStorage.removeItem(LOCAL_STORAGE_KEY_UPDATE_STATE + "_" + moduleName);
    }
};

game.asset = module.exports = AssetsManager;

cc._RFpop();
},{"AssetsDownload":"AssetsDownload"}],"Audio_Common":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3800flTmyRCkYWQLFp2fH8z', 'Audio_Common');
// Script\Comm\Audio_Common.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */
module.exports = {
    AUDIO_BTN_CLICK: "resources/Texture/ComScene/Sound/btnclick.mp3",
    AUDIO_BTN_BET: "resources/Texture/ComScene/Sound/coinsfly.mp3",
    AUDIO_TIME: "resources/Texture/ComScene/Sound/daojishi.mp3",
    AUDIO_SIT: "resources/Texture/ComScene/Sound/sit.mp3"
};

cc._RFpop();
},{}],"BannerListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '12645cLro9HIIkjrJWXYEvu', 'BannerListReqPacket');
// Script\Network\Cmd\Cmd_Req\BannerListReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
var MessageReq = require("MessageReq");
/*
 * type US_REQ_SCORE_LIST_T struct {
 JsonHead
 Param PARAM_REQ_SCORE_LIST_T `json:"param"`
 }
 type PARAM_REQ_SCORE_LIST_T struct {
 IsCreate int8 `json:"iscreate` //0：参与的牌局, 1: 创建的牌局
 Start    int  `json:"start"`   //从哪里开始
 Total    int  `json:"total"`   //多少个
 }
 }

 * */

function BannerListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_BANNER_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("BannerListReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = BannerListReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"BannerListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '04e70mKDuhNNIQZ7rfL/dwt', 'BannerListRespPacket');
// Script\Network\Cmd\Cmd_Resp\BannerListRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */

var MessageResp = require("MessageResp");

/*
 * 
 * 
type US_RESP_BANNER_LIST_T struct {
   JsonHead
   RespHead
   List []BANNER_INFO_T `json:"list"`
}
type BANNER_INFO_T struct {
   Title   string `json:"title"`
   Pic     string `json:"pic"`
   JumpUrl string `json:"jumpurl"`
}

 */

function BannerListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_BANNER_LIST_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.bannerlist = msg.list;
        //var json = JSON.parse(BASE64.decoder(msg.param));
    };
}

module.exports = BannerListRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"BasePop":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0b1c6oqQyFPI7nx8EtQF8o6', 'BasePop');
// Script\ComScene\PopView\BasePop.js

'use strict';

var BaseView = require("BaseView");
var SocketManager = require('SocketManager');
var MessageFactory = require('MessageFactory');

cc.Class({
    extends: cc.Component,

    properties: {
        bg: {
            default: null,
            type: cc.Node
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log("BasePop");
        this.localMessageListenerID = -1;
        this.httpMessageListenerID = -1;
        this.socketMessageListenerID = -1;

        // socket消息
        this.addSocketListener();

        // http消息
        this.addHttpListener();

        // 本地消息监听
        this.addLocalMessageListener();

        cc.log('BasePop:onLoad');

        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            cc.log("stop event");
            event.stopPropagation();
        }.bind(this));
    },

    onDestroy: function onDestroy() {
        cc.log('BasePop:onDestroy');

        cc.log("BasePop.socketMessageListenerID=", this.httpMessageListenerID);
        if (this.httpMessageListenerID != -1) {
            GlobalEventManager.getInstance().removeListener(this.httpMessageListenerID);
            this.httpMessageListenerID = -1;
        }

        cc.log("BasePop.localMessageListenerID=", this.localMessageListenerID);
        if (this.localMessageListenerID != -1) {
            GlobalEventManager.getInstance().removeListener(this.localMessageListenerID);
            this.localMessageListenerID = -1;
        }

        cc.log("BasePop.socketMessageListenerID=", this.socketMessageListenerID);
        if (this.socketMessageListenerID != -1) {
            GlobalEventManager.getInstance().removeListener(this.socketMessageListenerID);
            this.socketMessageListenerID = -1;
        }
    },

    //socket消息
    addSocketListener: function addSocketListener() {
        var self = this;
        this.socketMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.SocketMessage, function (event) {
            if (event == undefined) {
                return;
            }
            var type = event.tag;
            //连接服务器成功
            if (type == window.MessageType.SOCKET_CONNECTED) {}
            //断开连接
            else if (type == window.MessageType.SOCKET_DISCONNECTED) {}
                //连接中
                else if (type == window.MessageType.SOCKET_CONNECTING) {}
                    //连接失败
                    else if (type == window.MessageType.MSG_NETWORK_FAILURE) {}
                        //收到消息
                        else if (type == window.MessageType.SOCKET_MESSAGE) {
                                self.onMessage(event);
                            } else if (type == window.MessageType.SCENE_MSG) {
                                self.onSceneMsg(event);
                            }
        }, this);
        cc.log("BasePop.socketMessageListenerID=", this.socketMessageListenerID);
    },

    //http消息监听
    addHttpListener: function addHttpListener() {
        var self = this;
        this.httpMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.HttpMessage, function (event) {
            if (event == undefined) {
                return;
            }

            var tag = event.tag;

            if (tag == window.HttpMessageType.HTTP_NOTIFICATION) {
                self.onHttpResponse(event.msg);
            } else if (tag == window.HttpMessageType.NOTIFY_HTTP_RSP_ERROR) {}
        }, this);
        cc.log("BasePop.socketMessageListenerID=", this.httpMessageListenerID);
    },

    //本地消息监听
    addLocalMessageListener: function addLocalMessageListener() {
        var self = this;
        this.localMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.LocalMessage, function (event) {
            self.onLocalMessage(event);
        }, this);
        cc.log("BasePop.localMessageListenerID=", this.localMessageListenerID);
    },

    onMessage: function onMessage(event) {},

    onLocalMessage: function onLocalMessage(event) {
        if (event == undefined) {
            return;
        }
        var tag = event.tag;

        if (tag == window.LocalMsgType.SENDMSG_TIMEOUT) {
            this.msgSendTimeOut();
        } else if (tag == window.LocalMsgType.UPDATE_USERINFO) {}
    },

    onHttpResponse: function onHttpResponse(event) {
        if (event == undefined) {
            return;
        }
        if (!event.isSucceed) {
            return;
        }
    },

    onSceneMsg: function onSceneMsg(event) {},

    scaleTo: function scaleTo(node, flag) {
        node.setScale(0);
        var scaleT0 = null;
        if (flag) {
            scaleT0 = cc.scaleTo(0.1, 1.0).easing(cc.easeBackOut());
        } else {
            scaleT0 = cc.scaleTo(0.1, 0.8).easing(cc.easeBackOut());
        }

        node.runAction(scaleT0);
    },

    getUserDetail: function getUserDetail() {
        cc.log("BaseScene.getUserDetail");
        var detail = MessageFactory.createMessageReq(window.US_REQ_USER_DETAIL_CMD_ID);
        if (detail) {
            detail.send();
        }
    },

    LeftInTo: function LeftInTo(node) {
        var winSize = cc.director.getWinSize();
        //node.position.x = node.position.x - winSize.width;
        //node.setPositionX(node.position.x - winSize.width);
        node.runAction(cc.moveTo(0.1, cc.p(node.position.x + winSize.width, node.position.y)));
    },

    dismiss: function dismiss() {
        cc.log('BasePop:dismiss');
        this.node.removeFromParent(true);
        this.destroy();
    }
});

cc._RFpop();
},{"BaseView":"BaseView","MessageFactory":"MessageFactory","SocketManager":"SocketManager"}],"BaseScene":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c4f9aydep5Aj6D+iI/Nl3xV', 'BaseScene');
// Script\ComScene\SceneView\BaseScene.js

'use strict';

var BaseView = require("BaseView");
var MessageFactory = require('MessageFactory');
var SocketManager = require('SocketManager');
var ToastView = require('ToastView');
var AlertView = require('AlertView');
var GameSystem = require('GameSystem');
var GamePlayer = require('GamePlayer');
var LoadingView = require('LoadingView');

cc.Class({
    extends: cc.Component,

    // properties:
    // {
    //     m_sendHeartBeat        : true ,
    // },

    initBaseInfo: function initBaseInfo() {
        this.pToastView = null;
        this.m_pNetAlert = null;
        this.changeHouTai = false;

        this.bBeginHeart = false;
        this.NowReconnect = false;
        this.isGaming = false;

        this.netReStartCnt = 0;
        this.netCount = 0;
        this.netTimeTotal = 0;
        this.disNetTime = 0;
        this.netStrength = 0;
        this.m_llSendTime = 0, this.localMessageListenerID = 0;
        this.httpMessageListenerID = 0;
        this.socketMessageListenerID = 0;
        this.GameInfoListenerID = 0;

        this.m_isNetConnecting = true;

        this.isOnLine = true;
        this.onGameBack = false;
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log("BaseScene.onLoad");
        this.initBaseInfo();
        //socket消息
        this.addSocketListener();
        //http消息
        this.addHttpListener();
        //本地消息监听
        this.addLocalMessageListener();
        //引擎信息
        this.addGameInfoListener();

        //场景切换需要重新设置心跳
        if (SocketManager.getInstance().isConnected()) {
            this.startHeartBeat();
        }
    },

    onDestroy: function onDestroy() {
        cc.log("BaseScene.onDestroy");
        this.unschedule(this.sendHeartBeat);

        GlobalEventManager.getInstance().removeListener(this.httpMessageListenerID);
        GlobalEventManager.getInstance().removeListener(this.localMessageListenerID);
        GlobalEventManager.getInstance().removeListener(this.socketMessageListenerID);
        GlobalEventManager.getInstance().removeListener(this.GameInfoListenerID);
    },

    addGameInfoListener: function addGameInfoListener() {
        cc.log("BaseScene.addGameInfoListener");
        var self = this;
        this.GameInfoListenerID = window.GlobalEventManager.getInstance().addEventListener(window.GameEngineInfo, function (event) {
            if (event) {
                var tag = event.tag;
                if (tag == window.GameInfo.GameHide) {
                    self.onPause();
                } else if (tag == window.GameInfo.GameShow) {
                    self.onResume();
                } else if (tag == window.GameInfo.NetOnline) {
                    self.onNetOnline();
                } else if (tag == window.GameInfo.NetOffline) {
                    self.onNetOffline();
                }
            }
        }, this);
    },

    onPause: function onPause() {
        cc.warn("游戏暂停");
        this.onGameBack = true;
        cc.audioEngine.pauseAll();
        cc.game.pause();
        SocketManager.getInstance().disconnect();
    },

    onResume: function onResume() {
        cc.warn("游戏恢复");
        this.onGameBack = false;
        cc.audioEngine.resumeAll();
        cc.game.resume();
        if (GameSystem.getInstance().bLogin) {
            if (!SocketManager.getInstance().isConnected()) {
                this.changeHouTai = true;
                SocketManager.getInstance().reStartSocket();
            }
        }
    },

    onNetOffline: function onNetOffline() {

        cc.warn("网络断开");
        this.isOnLine = false;
        // SocketManager.getInstance().disconnect();
        // ToastView.show("网络连接中断，请检查网络!")
    },

    onNetOnline: function onNetOnline() {
        cc.warn("网络恢复");
        this.isOnLine = true;
        if (GameSystem.getInstance().bLogin) {
            if (!SocketManager.getInstance().isConnected()) {
                this.changeHouTai = true;
                SocketManager.getInstance().reStartSocket();
                // ToastView.show("网络恢复，重新连接服务器")
            }
            //ShopModel.getInstance().updateUserInfo();
        }
        // ToastView.show("网络恢复")
    },

    update: function update(dt) {},

    //socket消息
    addSocketListener: function addSocketListener() {
        cc.log("BaseScene.addSocketListener");
        var self = this;
        this.socketMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.SocketMessage, function (event) {

            if (event == undefined) {
                return;
            }
            var type = event.tag;
            //连接服务器成功
            if (type == window.MessageType.SOCKET_CONNECTED) {
                self.onSocketConnected();
            }
            //断开连接
            else if (type == window.MessageType.SOCKET_DISCONNECTED) {
                    self.onSocketDisconnected();
                }
                //连接中
                else if (type == window.MessageType.SOCKET_CONNECTING) {
                        self.onSocketConnecting();
                    }
                    //连接失败
                    else if (type == window.MessageType.MSG_NETWORK_FAILURE) {}
                        //收到消息
                        else if (type == window.MessageType.SOCKET_MESSAGE) {
                                self.onMessage(event);
                            } else if (type == window.MessageType.SCENE_MSG) {
                                self.onSceneMsg(event);
                            }
        }, this);
    },

    //http消息监听
    addHttpListener: function addHttpListener() {
        cc.log("BaseScene.addHttpListener");
        var self = this;

        this.httpMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.HttpMessage, function (event) {
            if (event == undefined) {
                return;
            }

            var tag = event.tag;

            if (tag == window.HttpMessageType.HTTP_NOTIFICATION) {
                self.onHttpResponse(event.msg);
            } else if (tag == window.HttpMessageType.NOTIFY_HTTP_RSP_ERROR) {}
        }, this);
    },

    //本地消息监听
    addLocalMessageListener: function addLocalMessageListener() {
        cc.log("BaseScene.addLocalMessageListener");
        var self = this;
        this.localMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.LocalMessage, function (event) {
            if (event) {
                self.onLocalMessage(event);
            }
        }, this);
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
    },

    onMessage: function onMessage(event) {
        var msg = event.data;
        var cmd = msg.cmd;
        //cc.log()
        switch (cmd) {
            case window.US_RESP_LOGIN_CMD_ID:
                //this.callUpdateMoney();
                break;

            case window.US_KICK_OUT_CMD_ID:
                this.createAlertView(msg.desc);
                break;

            case window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID:
                this.notifyOwnerConfirmSit(msg);
                break;

            case window.US_RESP_OWNER_CONFIRM_CMD_ID:
                this.OwnerConfirmSit(msg);
                break;

            case window.US_NOTFIY_OWNER_TABLEINFO_CMD_ID:
                this.onNotifyOwnerTableOver(msg);
                break;

            case window.US_RESP_FIND_TABLE_CMD_ID:
                this.onFindRoom(msg);
                break;

            case window.CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID:
                this.onClubAddMsg(msg);
                break;

            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:
                this.onClubRmMem(msg);
                break;

            case window.US_RESP_EXCHANGE_GOLD_CMD_ID:
                this.onExchangeGoldMsg(msg);
                break;

            case window.US_RESP_USER_DETAIL_CMD_ID:
                this.onUserDetail(msg);
                break;

            case US_NOTIFY_PAY_OPERATE_CMD_ID:
                this.onPayResult(msg);
                break;

            case window.US_NOTIFY_IN_GAME_CMD_ID:
                this.notifyInGame(msg);
                break;

            case window.US_RESP_CREATE_COST_CMD_ID:
                this.onCreateTableCost(msg);
                break;

            case window.US_RESP_CLUB_UPGRADE_COST_CMD_ID:
                this.onClubUpgradeCost(msg);
                break;

            case US_RESP_NEW_MSG_NUM_CMD_ID:
                this.onMimeMsgNum(msg);
                break;
            case US_RESP_BIND_REFERRAL_CMD_ID:
                this.onBingReferral(msg);
                break;
        }
        /*
        * RET_REPEAT_REGISTER         : -1000, //服务器重复注册(服务器内部消息)
         RET_NOT_CALL_BANKER         : -19,   //非抢庄状态
         RET_USER_OFFLINE            : -18,   //玩家离线
         RET_NOT_CLICK_AGAIN         : -17,   //请勿频繁点击
         RET_SEAT_HAVE_PLAYER        : -16,   //您选择的座位已经被占领,请从新选择
         RET_SEAT_NOT_EXIST          : -15,   //您选择的座位不存在
         RET_PLAYER_ACTIVE           : -14,   //您正在游戏中,不能离开
         RET_PLAYER_HAVE_LEAVE       : -13,   //您已经离开
         RET_PARAM_ERROR             : -12,   //参数错误
         RET_DESTROYED_PRIVATE_TBALE : -11,   //牌局已销毁
         RET_TABLE_FULL              : -10,   //私人房爆满
         RET_GAME_PLAYER_FULL        : -9,    //桌子里面的玩家已满
         RET_GAME_TABLE_FULL         : -8,    //游戏服务器桌子爆满
         RET_DB_ERROR                : -7,    //数据库错误
         RET_NOT_FIND_TABLE          : -6,    //桌子不存在
         RET_NOT_FIND_GAME_SERVER    : -5,    //未找到匹配服务器
         RET_SERVER_ABNORMAL         : -4,    //服务异常
         RET_USER_REPEAT_LOGIN       : -3,    //您的账号已经在其他地点登录
         RET_USERKEY_ERROR           : -2,    //用户验证失败,请重新登录
         RET_ILLEGAL_REQ             : -1,    //非法请求(如:如果头部uid,不是自己的socket链接的uid就直接返回,反漏洞)
        * */

        if (msg.code < SocketRetCode.RET_SUCCESS) {
            if (msg.code == SocketRetCode.RET_NOT_FIND_GAME_SERVER || msg.code == SocketRetCode.RET_NOT_FIND_TABLE || msg.code == SocketRetCode.RET_PARAM_ERROR) {
                cc.director.loadScene('HallScene');
            } else if (msg.code == SocketRetCode.RET_ILLEGAL_REQ || msg.code == SocketRetCode.RET_SERVER_ABNORMAL) {
                var alert = AlertView.create();
                alert.setPositiveButton(function () {
                    cc.director.loadScene('LoadingScene');
                }, "退出游戏");
                this.unschedule(this.sendHeartBeat);
                SocketManager.getInstance().disconnect();
                alert.show(msg.desc + ",请退出游戏重新进入！", AlertViewBtnType.E_BTN_CLOSE);
            } else if (msg.code == SocketRetCode.RET_USERKEY_ERROR || msg.code == SocketRetCode.RET_USER_REPEAT_LOGIN) {
                var alert = AlertView.create();
                alert.setPositiveButton(function () {
                    cc.director.loadScene('LoadingScene');
                }, "退出游戏");
                this.unschedule(this.sendHeartBeat);
                SocketManager.getInstance().disconnect();
                alert.show(msg.desc + ",请退出游戏重新进入！", AlertViewBtnType.E_BTN_CLOSE);
            } else {
                this.createAlertView(msg.desc);
            }
            LoadingView.dismiss();
        }
    },

    onBingReferral: function onBingReferral(msg) {

        if (msg.code < SocketRetCode.RET_SUCCESS) return;
        GameSystem.getInstance().referralCode = msg.referralid;
        ToastView.show("绑定成功");
    },

    onPayResult: function onPayResult(msg) {
        var alert = AlertView.create();
        // alert.show("您花费了¥" + msg.param.cost + "购买了" + msg.param.opdiamond + "个钻石，已成功到账", AlertViewBtnType.E_BTN_CLOSE);
        alert.show(msg.param.desc);
        this.getUserDetail();
    },

    onCreateTableCost: function onCreateTableCost(msg) {
        cc.log("HallScene.onCreateTableCost code=", msg.code);
        if (msg.code != SocketRetCode.RET_SUCCESS) return;
        GameSystem.getInstance().BullFightTableCost = msg.list;
    },

    onClubUpgradeCost: function onClubUpgradeCost(msg) {
        cc.log("HallScene.onClubUpgradeCost code=", msg.code);
        if (msg.code = SocketRetCode.RET_SUCCESS) return;

        GameSystem.getInstance().ClubUpgradeCost = msg.list;
        cc.log("HallScene.onClubUpgradeCost list=", msg.list);
    },

    onMimeMsgNum: function onMimeMsgNum(msg) {
        GameSystem.getInstance().NewMsgNum = false;
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.sysnum > 0 || msg.clubnum > 0 || msg.mailnum > 0) {
                GameSystem.getInstance().NewMsgNum = true;
            }
        }
        cc.log("onMimeMsgNum sysnum=", msg.sysnum, " clubnum=", msg.clubnum, " mailnum=", msg.mailnum);
    },

    onUserDetail: function onUserDetail(msg) {
        cc.log("HallScene.onUserDetail");
        GamePlayer.getInstance().gold = msg.gold;
        GamePlayer.getInstance().diamond = msg.diamond;
    },

    onExchangeGoldMsg: function onExchangeGoldMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            var alert = AlertView.create();
            alert.show(msg.tips, AlertViewBtnType.E_BTN_CLOSE);
            this.getUserDetail();
        }
    },

    onClubAddMsg: function onClubAddMsg(msg) {
        var self = this;

        var uid = msg.param.uid;
        var name = msg.param.name;
        var clubname = msg.param.clubname;
        var alert = AlertView.create();
        alert.setPositiveButton(function () {
            self.sendClubOwnerConfirm(1, uid, msg.clubid);
        }, "同意");
        alert.setNegativeButton(function () {
            self.sendClubOwnerConfirm(0, uid, msg.clubid);
        }, "拒绝");

        alert.show(name + "(" + msg.param.uid + ")" + "申请加入您的'" + clubname + "'俱乐部，是否同意？", AlertViewBtnType.E_BTN_CANCLE);
    },

    onClubRmMem: function onClubRmMem(msg) {
        if (msg.param.uid == GamePlayer.getInstance().uid) {
            ToastView.show("您被移除俱乐部" + msg.param.clubname + "(" + msg.param.clubid + ")");
        } else {
            ToastView.show(msg.param.name + "被移除俱乐部" + msg.param.clubname + "(" + msg.param.clubid + ")");
        }
    },

    sendClubOwnerConfirm: function sendClubOwnerConfirm(result, uid, clubid) {
        var data = {
            uid: uid,
            isallow: result };
        cc.log("BaseScene.notifyOwnerConfirmSit.data = ", JSON.stringify(data));
        MessageFactory.createMessageReq(window.CLUB_REQ_OWNER_CONFIRM_CMD_ID).send(data, clubid);
    },

    notifyInGame: function notifyInGame(msg) {
        cc.log("BaseScene.notifyInGame, msg" + msg.gamesvcid + ",tableid" + msg.tableid);
        if (msg.code > 0) {
            GameSystem.getInstance().gamesvcid = msg.gamesvcid;
            GameSystem.getInstance().tableid = msg.tableid;
            cc.director.loadScene('Bullfight_GameScene');
        }
    },

    onFindRoom: function onFindRoom(msg) {
        cc.log("HallScene.onFindRoom,msg" + msg.gamesvcid + ",tableid" + msg.tableid);
        LoadingView.dismiss();
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            GameSystem.getInstance().gamesvcid = msg.gamesvcid;
            GameSystem.getInstance().tableid = msg.tableid;

            cc.director.loadScene('Bullfight_GameScene');
        }
    },

    onNotifyOwnerTableOver: function onNotifyOwnerTableOver(msg) {
        cc.log("BaseScene.onNotifyOwnerTableOver");

        if (msg.code == SocketRetCode.RET_SUCCESS) {
            var data = {
                gamesvcid: msg.gamesvcid,
                tableid: msg.tableid,
                privateid: msg.privateid
            };

            var alert = AlertView.create();
            alert.setPositiveButton(function () {
                self.sendFindTable(1, data);
            }, "进入游戏");
            alert.setNegativeButton(function () {}, "取消");

            alert.show("房间：" + msg.tableid + "(" + msg.tablename + "),剩余" + msg.remaintime + "秒就要结束了，是否立刻进入房间？", AlertViewBtnType.E_BTN_CANCLE);
        }
    },

    sendFindTable: function sendFindTable(data) {
        cc.log("BaseScene.sendFindTable,roomId = " + data.privateid);
        var createRoom = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);
        var data = {
            privateid: data.privateid
        };
        if (createRoom) {
            createRoom.send(data);
        }
    },

    notifyOwnerConfirmSit: function notifyOwnerConfirmSit(msg) {
        cc.log("BaseScene.notifyOwnerConfirmSit,msg = " + msg.gamesvcid);

        var self = this;

        var data = {
            gamesvcid: msg.gamesvcid,
            tableid: msg.tableid,
            playeruid: msg.sitUid,
            privateid: msg.privateid
        };

        var alert = AlertView.create();
        alert.setPositiveButton(function () {
            self.sendOwnerConfirm(1, data);
        }, "同意");
        alert.setNegativeButton(function () {
            self.sendOwnerConfirm(2, data);
        }, "拒绝");

        var show = msg.name + "(" + msg.sitUid + ")申请携带" + msg.coin + "牛友币进入您" + msg.privateid + "(" + msg.tablename + ")牌局,是否同意?";

        alert.show(show, AlertViewBtnType.E_BTN_CANCLE);
    },

    sendOwnerConfirm: function sendOwnerConfirm(result, data) {
        var data = {
            gamesvcid: data.gamesvcid,
            tableid: data.tableid,
            playeruid: data.playeruid,
            privateid: data.privateid,
            result: result };

        cc.log("BaseScene.sendOwnerConfirm.data = ", JSON.stringify(data));
        MessageFactory.createMessageReq(window.US_REQ_OWNER_CONFIRM_CMD_ID).send(data);
    },

    OwnerConfirmSit: function OwnerConfirmSit(msg) {
        cc.log("BaseScene.OwnerConfirmSit");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            ToastView.show(msg.desc);
        }
    },

    createAlertView: function createAlertView(desc) {
        cc.log("BaseScene.createAlertView,desc = " + desc);
        ToastView.show(desc, 2);
    },

    onLocalMessage: function onLocalMessage(event) {
        cc.log("BaseScene.onLocalMessage");
        if (event == undefined) {
            return;
        }
        var tag = event.tag;

        if (tag == window.LocalMsgType.SENDMSG_TIMEOUT) {
            this.msgSendTimeOut();
        } else if (tag == window.LocalMsgType.UPDATE_USERINFO) {}
    },

    onHttpResponse: function onHttpResponse(event) {
        cc.log("BaseScene.onHttpResponse");
        if (!event.isSucceed) {
            return;
        }
    },

    reStartSocket: function reStartSocket() {
        cc.log("BaseScene.reStartSocket");
        this.m_llSendTime = -1;
        SocketManager.getInstance().reStartSocket();
    },

    startHeartBeat: function startHeartBeat() {
        cc.log("BaseScene.startHeartBeat");
        this.schedule(this.sendHeartBeat, window.HEART_BEAT_TIME);
    },

    sendHeartBeat: function sendHeartBeat() {
        cc.log("BaseScene.sendHeartBeat");
        if (SocketManager.getInstance().isConnected()) {
            var msg = MessageFactory.createMessageReq(window.US_REQ_HEARTBEAT_CMD_ID);
            if (msg) {
                this.m_llSendTime = new Date().getTime();;
                msg.send();
                this.bBeginHeart = true;
            } else {
                cc.log("BaseScene.sendHeartBeat,msg = null");
            }
        } else {
            cc.warn("BaseScene.sendHeartBeat,服务器尚未连接，心跳发送失败");
        }
    },

    onCheckNetReStart: function onCheckNetReStart() {
        cc.log("BaseScene.onCheckNetReStart");
        this.netReStartCnt++;
        if (this.netReStartCnt % 6 == 0) {
            this.reStartSocket();
        }

        if (this.netReStartCnt == 18) {
            this.netReStartCnt = 0;
            GlobalEventManager.getInstance().emitEvent(window.LocalMessage, { tag: window.LocalMsgType.SENDMSG_TIMEOUT });
            this.unschedule(this.onCheckNetReStart);
        }
    },

    msgSendTimeOut: function msgSendTimeOut() {
        cc.log("BaseScene.msgSendTimeOut");
        this.reconnect_times = 5;
        this.reStartSocket();

        this.unschedule(this.sendHeartBeat);

        this.NowReconnect = true;
        var text = "您的网络连接超时，正在疯狂尝试恢复" + 6;
        this.pToastView = ToastView.show(text, 6);

        this.disNetTime = 6;
        this._dNetCount = 0;
        this.schedule(this.reDisConTime, 1);
    },

    reDisConTime: function reDisConTime() {
        cc.log("BaseScene.reDisConTime");
        if (this.pToastView) {
            this.disNetTime -= 1;
            var text = "您的网络连接超时，正在疯狂尝试恢复 " + this.disNetTime;
            //this.pToastView.setTips(text);
            this._dNetCount++;

            if (this.disNetTime <= 0) {
                this.unschedule(this.reDisConTime);
                this.pToastView.removeFromParent(true);
                this.pToastView = null;
                this.reconnect_times = 5;

                this.m_pNetAlert = AlertView.create();

                this.m_pNetAlert.setPositiveButton(this.replyReConnectYes);
                this.m_pNetAlert.setNegativeButton(this.replyReConnectNo);
                this.m_pNetAlert.show("网络连接超时，您需要继续恢复游戏吗？", AlertViewBtnType.E_BTN_CANCLE, this);
            }
        }
    },

    replyReConnectYes: function replyReConnectYes() {
        cc.log("BaseScene.replyReConnectYes");
        this.m_pNetAlert = null;
        GlobalEventManager.getInstance().emitEvent(window.LocalMessage, { tag: window.LocalMsgType.SENDMSG_TIMEOUT });
    },

    replyReConnectNo: function replyReConnectNo() {
        cc.log("BaseScene.replyReConnectNo");
        cc.director.loadScene('hall');
    },

    sendLoginHall: function sendLoginHall() {
        cc.log("BaseScene.sendLoginHall");
        var login = MessageFactory.createMessageReq(window.US_REQ_LOGIN_CMD_ID);
        if (login) {
            login.send();
        }
    },

    getUserDetail: function getUserDetail() {
        cc.log("BaseScene.getUserDetail");
        var detail = MessageFactory.createMessageReq(window.US_REQ_USER_DETAIL_CMD_ID);
        if (detail) {
            detail.send();
        }
    },

    onSocketDisconnected: function onSocketDisconnected() {
        cc.log("BaseScene.onSocketDisconnected");
        this.unschedule(this.sendHeartBeat);

        if (!this.onGameBack) {
            this.scheduleOnce(this.callLoginServer, 1);
        }
    },

    onSocketConnecting: function onSocketConnecting() {
        cc.log("BaseScene.onSocketConnecting");
        this.unschedule(this.sendHeartBeat);
        ToastView.show("连接中..."); //
    },

    onSocketConnected: function onSocketConnected() {
        cc.log("BaseScene.onSocketConnected");
        this.unschedule(this.callLoginServer);
        this.reconnect_times = 5;
        this.NowReconnect = false;

        this.sendLoginHall();

        this.startHeartBeat();

        this.unschedule(this.waitReConnect);
        this.unschedule(this.reDisConTime);
        this.unschedule(this.onCheckNetReStart);
        this.unschedule(this.reAllDisConTime);

        if (this.pToastView) {
            this.pToastView.removeFromParent(true);
            this.pToastView = null;

            ToastView.show("连接成功，正在回到游戏");
        } else {
            if (this.changeHouTai) {
                this.changeHouTai = false;
                ToastView.show("连接成功");
            }
        }

        if (this.m_pNetAlert) {
            this.m_pNetAlert.removeFromParent(true);
            this.m_pNetAlert = null;
        }
    },

    waitReConnect: function waitReConnect() {},

    reAllDisConTime: function reAllDisConTime() {
        cc.log("BaseScene.reAllDisConTime");
        if (this.m_pNetAlert) {
            this.m_pNetAlert.removeFromParent(true);
            this.m_pNetAlert = null;
        }

        // var pAlert = AlertView.create();
        // pAlert.setPositiveButton(this.replyReConnectNo);
        // pAlert.show("您的游戏由于短线而中断，无法重新连接到游戏？", this);
        // this.scheduleOnce(this.gotoHallUpdate, 2);
    },

    gotoHallUpdate: function gotoHallUpdate() {
        cc.log("BaseScene.gotoHallUpdate");
        this.unschedule(this.gotoHallUpdate);
        this.NowReconnect = false;
        cc.director.loadScene("hall");
        this.bCheckConnect = true;
    },
    onUpdateUserInfo: function onUpdateUserInfo() {
        // var money = GamePlayer.getInstance().Money() ;
        // GamePlayer.getInstance().SetMoney(money);

    },

    UpdateDeviceStatus: function UpdateDeviceStatus() {},

    updatePlayerMoney: function updatePlayerMoney(msg) {
        // if (msg.ret.retCode >= window.RET_OK)
        // {
        //     if(msg.uid == GamePlayer.getInstance().uid)
        //     {
        //         if(msg.type == 1)
        //         {
        //             GamePlayer.getInstance().SetMoney(msg.money);
        //         }
        //         else if(msg.type == 2)
        //         {
        //             GamePlayer.getInstance().freezemoney = msg.money;
        //         }

        //         GlobalEventManager.getInstance().emitEvent(window.LocalMessage,{tag:window.LocalMsgType.UPDATE_USERINFO});
        //     }

        // }
    },
    updateHeartBeat: function updateHeartBeat(msg) {
        var netDelta = new Date().getTime - this.m_llSendTime;
        this.netTimeTotal += netDelta;
        this.netCount++;

        if (this.netCount > 5) {
            //  this.sendNetStrength(this.netTimeTotal);
            this.netTimeTotal = 0;
            this.netCount = 0;
        }

        this.bBeginHeart = false;
    },

    updateOfflineReult: function updateOfflineReult(msg) {
        // OfflineResultPacket* packet = (OfflineResultPacket*)msg;
        // if (msg.ret.retCode == window.RET_OK)
        // {
        //     if(0 != msg.isWin)
        //     {

        //         var strMsg = msg.strInfo.msg;

        //         var alert = AlertView.create();
        //         alert.setPositiveButton();
        //         alert.show(strMsg,"txz.png",false,null,true, packet.isWin);

        //     }
        // }
    },

    callUpdateMoney: function callUpdateMoney() {
        //update money
        // var msg = MessageFactory.createCommonMessage(window.UPDATE_PLAYER_MONEY);
        // if(msg){
        //     msg.send(1);
        // }
    },

    callLoginServer: function callLoginServer() {

        if (GameSystem.getInstance().bLogin) {
            if (!SocketManager.getInstance().isConnected()) {
                cc.log("LoadingView.callbackBtnLogin callLoginServer");
                SocketManager.getInstance().startSocket();
            }
        }
    }

});

cc._RFpop();
},{"AlertView":"AlertView","BaseView":"BaseView","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","SocketManager":"SocketManager","ToastView":"ToastView"}],"BaseView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '86c1a+Knj5JqoxwJvVsEgr2', 'BaseView');
// Script\ComScene\BaseView.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"BindReferralReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'dc0936vqG5Htqp/w4QcQ8zd', 'BindReferralReqPacket');
// Script\Network\Cmd\Cmd_Req\BindReferralReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
var MessageReq = require("MessageReq");

// // 推荐人
// type US_REQ_BIND_REFERRAL_T struct {
//     JsonHead
//     ReferralId int `json:"referralid"`
// }

function BindReferralReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_BIND_REFERRAL_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("BindReferralReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            referralid: msg.referralid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = BindReferralReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"BindReferralRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '23f55pytb9Kz6akQUi7DBCT', 'BindReferralRespPacket');
// Script\Network\Cmd\Cmd_Resp\BindReferralRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */

var MessageResp = require("MessageResp");

function BindReferralRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_BIND_REFERRAL_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        this.referralid = msg.referralid;
    };
}
module.exports = BindReferralRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"Bullfighgt_Menu":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b9935YPx3dCHr1d2Knaw/Yr', 'Bullfighgt_Menu');
// Script\GameScene\Bullfight\PopView\Bullfighgt_Menu.js

'use strict';

var BasePop = require("BasePop");
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');
var Bullfight_GameScene = require('Bullfight_GameScene');
var LoadingView = require('LoadingView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {
        RuleView: cc.Prefab,
        OwnerView: cc.Prefab,
        OwnerIcon: cc.Sprite,
        OwnerText: cc.Label,
        BtnShare: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {

        this._super();
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("stop event");
            self.runOut();
        }.bind(this));
        this.initBaseData();

        cc.log("Bullfigth_Menu.onLoad bowner=" + GamePlayer.getInstance().bowner);
        if (GamePlayer.getInstance().bowner == 1 || GameSystem.getInstance().roomLevel == 2) {
            this.OwnerIcon.node.active = true;
            this.OwnerText.node.active = true;
        } else {
            this.OwnerIcon.node.active = false;
            this.OwnerText.node.active = false;
        }
        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
            this.BtnShare.active = false;
            return;
        }
    },

    initBaseData: function initBaseData() {
        this.callBackCarry = null;
        this.tableRuleInfo = "";
    },

    setRuleInfo: function setRuleInfo(ruleInfo) {
        this.tableRuleInfo = ruleInfo;
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        var btnName = event.target.getName();
        cc.log("Bullfight_Menu.callBackBtn,btnName = " + btnName);
        if (btnName == "BtnExit") {
            MessageFactory.createMessageReq(window.US_REQ_LEAVE_GAME_CMD_ID).send();
        } else if (btnName == "BtnStandUp") {
            LoadingView.show("正在站起...");
            var data = {
                status: 2,
                seatid: GamePlayer.getInstance().seatId
            };
            MessageFactory.createMessageReq(window.US_REQ_SIT_DOWN_CMD_ID).send(data);
        } else if (btnName == "BtnSupplement") {
            this.onCallBackCarry();
        } else if (btnName == "BtnOwner") {
            var OwnerView = cc.instantiate(this.OwnerView);
            cc.director.getScene().addChild(OwnerView);
            OwnerView.setPosition(cc.p(cc.director.getVisibleSize().width / 2, cc.director.getVisibleSize().height / 2));
        } else if (btnName == "BtnRule") {
            var ruleView = cc.instantiate(this.RuleView);
            cc.director.getScene().addChild(ruleView);
            ruleView.setPosition(cc.p(cc.director.getVisibleSize().width / 2, cc.director.getVisibleSize().height / 2));
        } else if (btnName == "BtnShare") {
            cc.log("Bullfight_Menu : BtnShare");
            var message = {
                popView: "Bullfight_Menu",
                btn: "BtnShare"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (btnName == "BtnKickGame") {
            MessageFactory.createMessageReq(window.US_REQ_DISMISS_TABLE_CMD_ID).send();
        }
        this.dismiss();
    },

    setCallBackCarry: function setCallBackCarry(callback) {
        this.callBackCarry = callback;
    },

    onCallBackCarry: function onCallBackCarry() {

        if (this.callBackCarry) {
            this.callBackCarry();
            return;
        }
    },

    runOut: function runOut() {
        var callFunc = cc.callFunc(this.dismiss, this);
        this.node.runAction(cc.sequence(cc.moveBy(0.2, cc.p(0, 697)), callFunc));
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","Bullfight_GameScene":"Bullfight_GameScene","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"Bullfight_AudioConfig":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fd0d3wnwW5K3aVSTxfrPtzv', 'Bullfight_AudioConfig');
// Script\GameScene\Bullfight\Common\Bullfight_AudioConfig.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

module.exports = {
    AUDIO_SEND_CARD: "resources/Texture/GameSscene/Bullfight/Sound/SendCard.mp3",
    AUDIO_MAN_CALLBANKER: "resources/Texture/GameSscene/Bullfight/Sound/manCallbanker.mp3",
    AUDIO_MAN_NOCALLBANKER: "resources/Texture/GameSscene/Bullfight/Sound/manNoCallbanker.mp3",
    AUDIO_MAN_BOMB: "resources/Texture/GameSscene/Bullfight/Sound/man4bomb.mp3",
    AUDIO_MAN_5FLOWER: "resources/Texture/GameSscene/Bullfight/Sound/man5flowerbull.mp3",
    AUDIO_MAN_5LITTLEBULL: "resources/Texture/GameSscene/Bullfight/Sound/man5littlebull.mp3",
    AUDIO_MAN_3AND2: "resources/Texture/GameSscene/Bullfight/Sound/manThreeWithTwo.mp3",
    AUDIO_MAN_LINE: "resources/Texture/GameSscene/Bullfight/Sound/manStraight.mp3",
    AUDIO_MAN_BULL0: "resources/Texture/GameSscene/Bullfight/Sound/manbull0.mp3",
    AUDIO_MAN_BULL1: "resources/Texture/GameSscene/Bullfight/Sound/manbull1.mp3",
    AUDIO_MAN_BULL2: "resources/Texture/GameSscene/Bullfight/Sound/manbull2.mp3",
    AUDIO_MAN_BULL3: "resources/Texture/GameSscene/Bullfight/Sound/manbull3.mp3",
    AUDIO_MAN_BULL4: "resources/Texture/GameSscene/Bullfight/Sound/manbull4.mp3",
    AUDIO_MAN_BULL5: "resources/Texture/GameSscene/Bullfight/Sound/manbull5.mp3",
    AUDIO_MAN_BULL6: "resources/Texture/GameSscene/Bullfight/Sound/manbull6.mp3",
    AUDIO_MAN_BULL7: "resources/Texture/GameSscene/Bullfight/Sound/manbull7.mp3",
    AUDIO_MAN_BULL8: "resources/Texture/GameSscene/Bullfight/Sound/manbull8.mp3",
    AUDIO_MAN_BULL9: "resources/Texture/GameSscene/Bullfight/Sound/manbull9.mp3",
    AUDIO_MAN_BULL10: "resources/Texture/GameSscene/Bullfight/Sound/manbull10.mp3",

    AUDIO_WOMAN_CALLBANKER: "resources/Texture/GameSscene/Bullfight/Sound/womanCallbanker.mp3",
    AUDIO_WOMAN_NOCALLBANKER: "resources/Texture/GameSscene/Bullfight/Sound/womanNoCallbanker.mp3",
    AUDIO_WOMAN_BOMB: "resources/Texture/GameSscene/Bullfight/Sound/woman4bomb.mp3",
    AUDIO_WOMAN_5FLOWER: "resources/Texture/GameSscene/Bullfight/Sound/woman5flowerbull.mp3",
    AUDIO_WOMAN_5LITTLEBULL: "resources/Texture/GameSscene/Bullfight/Sound/woman5littlebull.mp3",
    AUDIO_WOMAN_3AND2: "resources/Texture/GameSscene/Bullfight/Sound/womanThreeWithTwo.mp3",
    AUDIO_WOMAN_LINE: "resources/Texture/GameSscene/Bullfight/Sound/womanStraight.mp3",
    AUDIO_WOMAN_BULL0: "resources/Texture/GameSscene/Bullfight/Sound/womanbull0.mp3",
    AUDIO_WOMAN_BULL1: "resources/Texture/GameSscene/Bullfight/Sound/womanbull1.mp3",
    AUDIO_WOMAN_BULL2: "resources/Texture/GameSscene/Bullfight/Sound/womanbull2.mp3",
    AUDIO_WOMAN_BULL3: "resources/Texture/GameSscene/Bullfight/Sound/womanbull3.mp3",
    AUDIO_WOMAN_BULL4: "resources/Texture/GameSscene/Bullfight/Sound/womanbull4.mp3",
    AUDIO_WOMAN_BULL5: "resources/Texture/GameSscene/Bullfight/Sound/womanbull5.mp3",
    AUDIO_WOMAN_BULL6: "resources/Texture/GameSscene/Bullfight/Sound/womanbull6.mp3",
    AUDIO_WOMAN_BULL7: "resources/Texture/GameSscene/Bullfight/Sound/womanbull7.mp3",
    AUDIO_WOMAN_BULL8: "resources/Texture/GameSscene/Bullfight/Sound/womanbull8.mp3",
    AUDIO_WOMAN_BULL9: "resources/Texture/GameSscene/Bullfight/Sound/womanbull9.mp3",
    AUDIO_WOMAN_BULL10: "resources/Texture/GameSscene/Bullfight/Sound/womanbull10.mp3",
    AUDIO_WIN: "resources/Texture/GameSscene/Bullfight/Sound/win.mp3",
    AUDIO_LOSE: "resources/Texture/GameSscene/Bullfight/Sound/lose.mp3",
    AUDIO_GROUND_MUSIC: "resources/Texture/GameSscene/Bullfight/Sound/GameGroundMusic.mp3"
};

cc._RFpop();
},{}],"Bullfight_BetCoinReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0489cDdUs5JkqoayQIeT34b', 'Bullfight_BetCoinReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_BetCoinReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');

/*
* // 下注
 type SBF_REQ_BET_COIN_T struct {
 GameHead
 BetCoinMul int `json:"betcoinmul"`
 }
* */

function Bullfight_BetCoinReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_REQ_BET_COIN_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            betcoinmul: msg.betcoinmul
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_BetCoinReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_BetCoinRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '832c54cihhGf4h9RpvZh33y', 'Bullfight_BetCoinRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_BetCoinRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
* type SBF_RESP_BET_COIN_T struct {
 JsonHead
 RespHead
 BetUid     uint32 `json:"betuid"`
 BetCoinMul int `json:"betcoinmul"`
 }
* */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_BetCoinRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_RESP_BET_COIN_CMD_ID;
    this.betuid = 0;
    this.betcoinmul = 0;
    //{"cmd":6619146,"seq":0,"uid":10010,"code":0,"desc":"执行成功","betuid":10011,"betcoinmul":10}
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.betuid = msg.betuid;
        this.betcoinmul = msg.betcoinmul;
        this.tstatus = msg.tstatus;
        this.ustatus = msg.ustatus;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_BetCoinRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_CallBankerReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a3538VLEztD84ylV8uO1jcq', 'Bullfight_CallBankerReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_CallBankerReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
* / 抢庄SBF_REQ_CALL_BANKER_CMD_ID
 const (
 E_UNSEND_CALL_BANKER = 0    //未操作
 E_NOT_CALL_BANKER    = 1    //不抢
 E_NORMAL_CALL_BANKER = 2    //抢庄
 E_SUPER_CALL_BANKER  = 3    //超级抢庄
 )

 type SBF_REQ_CALL_BANKER_T struct {
 GameHead
 CallType int `json:"calltype"`
 }
* */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');

function Bullfight_CallBankerReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_REQ_CALL_BANKER_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            calltype: msg.calltype
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_CallBankerReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_CallBankerRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '10c0bFjIsZBzLAj9awyKnZv', 'Bullfight_CallBankerRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_CallBankerRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
* type SBF_RESP_CALL_BANKER_T struct {
 JsonHead
 RespHead
 TableId  int `json:"tableid"`   //桌子id
 TStatus  int `json:"tstatus"`   //桌子状态
 CallUid  uint32 `json:"calluid"`   //哪一个玩家
 SeatId   int `json:"seatid"`    //哪一个座位
 CallType int `json:"calltype"`  //抢庄类型
 IsLast   int `json:"islast"`    //是否是最后一个, 1:是, 0:不是
 }
* **/

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_CallBankerRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_RESP_CALL_BANKER_CMD_ID;
    this.tableid = 0;
    this.tstatus = 0;
    this.calluid = 0;
    this.seatid = 0;
    this.calltype = 0;
    this.islast = 0;
    //{"cmd":6619142,"seq":0,"uid":10010,"code":0,"desc":"","tableid":0,
    // "tstatus":0,"calluid":10011,"seatid":1,"calltype":3,"islast":1}

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        this.calluid = msg.calluid;
        this.seatid = msg.seatid;
        this.calltype = msg.calltype;
        this.islast = msg.islast;
    };
}

module.exports = Bullfight_CallBankerRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_CardItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2caa2DahaBMnLmKjNuGOWa+', 'Bullfight_CardItem');
// Script\GameScene\Bullfight\SceneView\Bullfight_CardItem.js

'use strict';

/**
 * Created by shrimp on 17/3/1.
 */

window.BULLFIGHT_MAX_PLAYER = 6;

var Poker = require("Poker");
var Bullfight_CostomCardType = require('Bullfight_CostomCardType');
var GameScene = require('Bullfight_GameScene');

cc.Class({
    extends: cc.Component,

    properties: {
        CardNode: cc.Node,
        CardTypeNode: cc.Node,
        CardTypeBg: cc.Sprite,
        CardTypeBgFrame: [cc.SpriteFrame],
        CardTypeFlag: cc.Sprite,
        CardTypeFlagFrame: [cc.SpriteFrame],
        AllCard: [Poker],
        BetCountBg: cc.Sprite,
        BetCount: cc.Label,
        CustomCardType: Bullfight_CostomCardType
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.CardPos = new Array();
        for (var index = 0; index < this.AllCard.length; index++) {
            this.CardPos[index] = this.AllCard[index].node.position;
        }
    },

    sendCardAnimation: function sendCardAnimation(cardlist) {
        cc.log("Bullfight_CardLayout.sendCardAnimation,cardlist = " + cardlist);
        this.node.active = true;
        this.CardNode.active = true;

        for (var cardcount = 0; cardcount < 5 && !cc.game.isPaused(); cardcount++) {
            this.AllCard[cardcount].node.stopAllActions();
            this.AllCard[cardcount].position = this.CardPos[cardcount];
            this.AllCard[cardcount].initCard(cardlist[cardcount]);
            var winSize = cc.director.getWinSize();
            var endPos = this.CardPos[cardcount];
            var startPos = new cc.p(endPos.x - (endPos.x + this.CardNode.position.x + this.node.position.x), endPos.y - (endPos.y + this.CardNode.position.y + this.node.position.y));
            cc.log("startPos = " + startPos + ",endPos = " + endPos);
            this.AllCard[cardcount].node.runAction(cc.sequence(cc.moveTo(0, startPos), cc.delayTime(0.05 * cardcount), cc.moveTo(0.5, endPos)));
        }
    },

    openCardAnimation: function openCardAnimation(cardlist, index1, index2) {
        cc.log("Bullfight_CardLayout.openCardAnimation,cardlist = " + cardlist, " index1=", index1, " index2=", index2);
        this.node.active = true;
        this.CardNode.active = true;
        for (var cardcount = 0; cardcount < 5; cardcount++) {
            this.AllCard[cardcount].initCard(cardlist[cardcount]);
            this.AllCard[cardcount].runCardSelect(0);
            if (index1 != -1 && index2 != -1) {
                if (cardcount == index1 || cardcount == index2) {
                    cc.log("Bullfight_CardLayout.openCardAnimation, cardcount=", cardcount);
                    this.AllCard[cardcount].runCardSelect(1);
                }
            }
        }
    },

    setCardType: function setCardType(cardType) {
        cc.log("Bullfight_CardLayout.setCardType,cardType = " + cardType);
        this.node.active = true;
        this.CardTypeNode.active = true;
        // if (cardType == Bullfight_CardType.E_BULL_ZERO)
        // {
        //     this.CardTypeBg.spriteFrame = this.CardTypeBgFrame[0];
        // }
        // else
        // {
        //     this.CardTypeBg.spriteFrame = this.CardTypeBgFrame[1];
        // }
        this.CardTypeFlag.spriteFrame = this.CardTypeFlagFrame[cardType];
        this.CardTypeBg.spriteFrame = this.CardTypeBgFrame[1];
    },

    clearCardItem: function clearCardItem() {
        this.CardNode.active = false;
        this.CardTypeNode.active = false;
        this.node.active = false;
        this.BetCountBg.node.active = false;
        for (var cardcount = 0; cardcount < 5; cardcount++) {
            this.AllCard[cardcount].runCardSelect(false);
        }
        if (this.CustomCardType != null) {
            this.CustomCardType.clearCustomCardType();
        }
    },

    setPlayerBetCount: function setPlayerBetCount(count) {
        this.node.active = true;
        this.BetCountBg.node.active = true;
        this.BetCount.string = count;
    },

    setCustomCardType: function setCustomCardType(active) {
        this.CustomCardType.node.active = active;
        if (active) {
            this.CustomCardType.initData();
        } else {
            this.CustomCardType.clearCustomCardType();
            // for(var cardcount = 0;cardcount < 5;cardcount++)
            // {
            //     this.AllCard[cardcount].runCardSelect(false);
            // }
        }
    }
});

cc._RFpop();
},{"Bullfight_CostomCardType":"Bullfight_CostomCardType","Bullfight_GameScene":"Bullfight_GameScene","Poker":"Poker"}],"Bullfight_CardLayout":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5d2979YT+hGAIFy//Y4TNTm', 'Bullfight_CardLayout');
// Script\GameScene\Bullfight\SceneView\Bullfight_CardLayout.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */

cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {
    // },


    sendCardAnimation: function sendCardAnimation() {
        cc.log("Bullfight_CardLayout.sendCardAnimation");
    }

});

cc._RFpop();
},{}],"Bullfight_CardType":[function(require,module,exports){
"use strict";
cc._RFpush(module, '160f0hqmHdPqLbtjZH8kM2X', 'Bullfight_CardType');
// Script\GameScene\Bullfight\Common\Bullfight_CardType.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

window.Bullfight_CardType = cc.Enum({
    E_BULL_ZERO: 0, //没牛
    E_BULL_ONE: 1, //牛1
    E_BULL_TWO: 2,
    E_BULL_THREE: 3,
    E_BULL_FOUR: 4,
    E_BULL_FIVE: 5,
    E_BULL_SIX: 6,
    E_BULL_SEVEN: 7,
    E_BULL_EIGHT: 8,
    E_BULL_NINE: 9,
    E_BULL_PAIR: 10, //牛对子
    E_BULL_BULL: 11, //牛牛
    E_BULL_LINE: 12, //牛顺子
    E_BULL_THREE_TWO: 13, //三带二
    E_BULL_BOMB: 14, //炸弹
    E_BULL_FIVE_KING: 15, //五花牛
    E_BULL_SMALL_FIVE: 16, //五小牛
    E_BULL_MAX: 17

});

window.Bullfight_CardTypeName = ["没牛", "牛一", "牛二", "牛三", "牛四", "牛五", "牛六", "牛七", "牛八", "牛九", "牛对子", "牛牛", "牛顺子", "三带二", "炸弹", "五花牛", "五小牛"];

cc._RFpop();
},{}],"Bullfight_CarryView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '439618RH7tPA77a3KIRdgIa', 'Bullfight_CarryView');
// Script\GameScene\Bullfight\PopView\Bullfight_CarryView.js

'use strict';

var BasePop = require('BasePop');
var GamePlayer = require('GamePlayer');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        m_iMinCarry: 100,
        m_iMaxCarry: 1000,
        CurCoin: cc.Label, //已经带入
        MyGold: cc.Label, //身上金币
        CarryRange: cc.Label, //最高带入
        TotalCoin: cc.Label, //总带入上线
        curCarry: cc.EditBox,

        m_iTimeOut: 0,
        TimeLabel: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setMinAndMax: function setMinAndMax(min, max, total) {
        cc.log("Bullfight_CarryView.setMinAndMax,min = " + min + ",max = " + max, " total=", total);
        this.m_iMinGold = min;
        this.m_iMaxGold = max;
        this.TotalCoin.string = total;
        this.CurCoin.string = GamePlayer.getInstance().TotalCarry;
        this.MyGold.string = GamePlayer.getInstance().gold;
        this.CarryRange.string = "(" + min + "~" + max + ")";
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        var btnName = event.target.getName();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        cc.log("Bullfight_CarryView.callbackBtn,btnName = " + btnName);
        if (btnName == "BtnClose") {
            this.dismiss();
        } else if (btnName == "BtnSure") {
            var coin = parseInt(this.curCarry.string);
            if (coin < this.m_iMinGold) {
                ToastView.show("您携带的牛友币不能小于" + this.m_iMinGold);
                return;
            }
            if (coin > this.m_iMaxGold) {
                ToastView.show("您携带的牛友币不能大于" + this.m_iMaxGold);
                return;
            }
            if (coin > GamePlayer.getInstance().gold) {
                ToastView.show("您拥有的牛友币不足，请前往商城购买");
                return;
            }
            var data = {
                coin: parseInt(this.curCarry.string)
            };
            MessageFactory.createMessageReq(window.US_REQ_CARRY_COIN_CMD_ID).send(data);

            this.dismiss();
        }
    },

    setCarryTime: function setCarryTime(time) {
        this.m_iTimeOut = time;
        this.node.runAction(cc.sequence(cc.delayTime(time), cc.removeSelf()));
        this.schedule(this.updateTimeOut, 1.0);
    },

    updateTimeOut: function updateTimeOut() {

        this.m_iTimeOut--;
        if (this.m_iTimeOut < 0) {
            this.unschedule(this.updateTimeOut);
            this.dismiss();
        }
        this.TimeLabel.string = this.m_iTimeOut + "s";
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"Bullfight_Clock":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0ffd6xdXF1Ck5DtvfgS7R75', 'Bullfight_Clock');
// Script\GameScene\Bullfight\SceneView\Bullfight_Clock.js

'use strict';

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({

    extends: cc.Component,

    properties: {
        time: 0,
        timeLabel: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},

    updateTimeLabel: function updateTimeLabel(label) {
        this.timeLabel.string = label;
        if (Number(label) <= 3 && this.node.active) {
            MusicMgr.playEffect(Audio_Common.AUDIO_TIME);
        }
    },

    setActive: function setActive(active) {
        this.node.active = active;
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"Bullfight_CostomCardType":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4b6b2GFBalCfIzYJrRlgUyL', 'Bullfight_CostomCardType');
// Script\GameScene\Bullfight\SceneView\Bullfight_CostomCardType.js

'use strict';

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({
    extends: cc.Component,

    properties: {
        CardValue: [cc.Label]
    },

    onLoad: function onLoad() {
        cc.log("Bullfight_CustomCardType.OnLoad");
    },

    initData: function initData() {
        cc.log("Bullfight_CustomCardType.initData.");
        this.m_iCardValue = new Array();
    },

    callBackBtnCard: function callBackBtnCard(event, CustonEventData) {
        if (this.node.active == false) {
            cc.log("Bullfight_CustomCardType.callBackBtnCard this.node.active=", this.node.active);
            return;
        }

        var card = event.target.getComponent("Poker");
        if (this.m_iCardValue.length >= 3 && card.cardSelected == 0) {
            cc.log("Bullfight_CustomCardType.callBackBtnCard length=", this.m_iCardValue.length, " cardSelected=", card.cardSelected);
            return;
        }
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        card.setBtnCard();

        cc.log("Bullfight_CustomCardType.callBackBtnCard,value = " + card.cardValue);

        var value = card.cardValue > 10 ? 10 : card.cardValue;
        if (card.cardSelected == 1) {
            this.m_iCardValue.push(value);
        } else {
            this.removeByValue(value);
        }
        this.updataCustomCardType();
        this.logAllCardValue();
    },

    removeByValue: function removeByValue(value) {
        for (var index = 0; index < this.m_iCardValue.length; index++) {
            if (this.m_iCardValue[index] == value) {
                this.m_iCardValue.splice(index, 1);
                break;
            }
        }
    },

    clearCustomCardType: function clearCustomCardType() {
        this.CardValue[0].string = "";
        this.CardValue[1].string = "";
        this.CardValue[2].string = "";
        this.CardValue[3].string = "";
    },

    updataCustomCardType: function updataCustomCardType() {
        this.CardValue[0].string = "";
        this.CardValue[1].string = "";
        this.CardValue[2].string = "";
        this.CardValue[3].string = "";

        var value = 0;
        for (var index = 0; index < this.m_iCardValue.length && index < 3; index++) {
            value += this.m_iCardValue[index];
            if (index == 3) {
                this.CardValue[index].string = value;
            } else {
                this.CardValue[index].string = this.m_iCardValue[index];
            }
        }
        this.CardValue[3].string = value;
    },

    logAllCardValue: function logAllCardValue() {
        for (var index = 0; index < this.m_iCardValue.length; index++) {
            cc.log("logAllCardValue.value = " + this.m_iCardValue[index]);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"Bullfight_CreateRoom":[function(require,module,exports){
"use strict";
cc._RFpush(module, '240e8HhsstAwa/KwzMRbnXj', 'Bullfight_CreateRoom');
// Script\GameScene\Bullfight\PopView\Bullfight_CreateRoom.js

'use strict';

var MessageFactory = require('MessageFactory');
var Bullfight_MultCell = require('Bullfight_MultCell');
var BasePop = require('BasePop');
var ToastView = require('ToastView');
var GamePlayer = require('GamePlayer');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');
var ProgressSlider = require('ProgressSlider');

cc.Class({
    extends: BasePop,

    properties: {

        scrollViewRule: cc.ScrollView,
        scrollViewMult: cc.ScrollView,
        MultCell: [Bullfight_MultCell],
        TitleName: cc.Label,
        RoomName: cc.EditBox,
        BtnDiamondOn: cc.Sprite,
        BtnDiamondOff: cc.Sprite,
        BtnDiamondOnNum: cc.Label,
        BtnDiamondOffNum: cc.Label,
        CarryData: [ProgressSlider],
        minBetNode: cc.Node,
        timeNode: [cc.Node],
        ClubCreateNode: cc.Node,
        RoomCardSetting: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.initPopData();
    },

    initPopData: function initPopData() {
        this.gameMode = 101;
        this.ownerControl = 1;
        this.bankerMode = 1;
        this.minBet = 1;
        this.time = 10;
        this.persons = 6;
        this.CardTypeMult = [1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 0, 4, 0, 0, 0, 0, 0];
        this.scrollViewMult.node.active = false;
        this.RoomName.string = GamePlayer.getInstance().name;
        this.createType = 0; //默认私人创建  1: 俱乐部创建
        this.clubid = 0;
        this.clublevel = 0; //个人level=0
        this.RoomLevel = 1;

        this.gameround = 10;
        this.specCard = 0;
    },

    setRoomCardView: function setRoomCardView() {
        this.ClubCreateNode.active = false;
        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            cc.log("stop event");
            event.stopPropagation();
        }.bind(this));
        this.RoomCardSetting.active = true;
        this.RoomLevel = 2;
    },

    switchBtnGoldDiamond: function switchBtnGoldDiamond() {
        var liveTime = 60 * Number(this.time);
        // var goldCost    = GameSystem.getInstance().calcGoldCost(liveTime, this.minBet);
        var goldDiamond = GameSystem.getInstance().calcDiamondCost(liveTime, Number(this.clublevel));

        if (goldDiamond <= GamePlayer.getInstance().diamond) {
            this.BtnDiamondOn.node.active = true;
            this.BtnDiamondOnNum.string = goldDiamond;
            this.BtnDiamondOff.node.active = false;
        } else {
            this.BtnDiamondOn.node.active = false;
            this.BtnDiamondOff.node.active = true;
            this.BtnDiamondOffNum.string = goldDiamond;
        }
    },

    setClubId: function setClubId(clubid, clublevel) {
        this.clubid = clubid;
        this.clublevel = clublevel;
        if (this.clubid > 0) {
            this.TitleName.string = "俱乐部开局";
            this.time = 30;
            this.CarryData[0].setMinAndMax(100, 1000);
            this.CarryData[1].setMinAndMax(200, 2000);
            if (clublevel == 0) {
                clublevel = 1;
            }
            this.CarryData[2].setMinAndMax(600, 2000 * 2 * clublevel);
        } else {
            this.CarryData[0].setMinAndMax(100, 300);
            this.CarryData[1].setMinAndMax(200, 600);
            this.CarryData[2].setMinAndMax(600, 1200);
        }

        for (var index = 0; index < this.MultCell.length; index++) {
            this.MultCell[index].setClubCreate(this.clubid != 0);
        }

        this.minBetNode.active = this.clubid != 0;
        this.timeNode[0].active = this.clubid == 0;
        this.timeNode[1].active = this.clubid != 0;

        this.switchBtnGoldDiamond();
    },

    callbackBtnLabel: function callbackBtnLabel(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackBtnLabel,CustomEventData =" + CustomEventData);

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (CustomEventData == 1) {
            for (var index = 0; index < this.MultCell.length; index++) {
                this.CardTypeMult[index] = Number(this.MultCell[index].getCurMult());
            }
            this.scrollViewRule.node.active = true;
            this.scrollViewMult.node.active = false;
        } else {
            if (this.clubid == 0) ToastView.show("非俱乐部创建牌局无法修改倍率");
            this.scrollViewRule.node.active = false;
            this.scrollViewMult.node.active = true;
        }
    },

    callbackBtnMode: function callbackBtnMode(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackBtnLabel,CustomEventData =" + CustomEventData);

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (CustomEventData == 1) {
            this.bankerMode = 1;
        } else if (CustomEventData == 2) {
            this.bankerMode = 2;
        } else {
            ToastView.show("敬请期待...");
        }
    },

    callbackGameRound: function callbackGameRound(event, CustomEventData) {
        // if (CustomEventData == 1) {
        //     this.gameround = 10;
        // } else if (CustomEventData == 2) {
        //     this.gameround = 20;
        // } else if (CustomEventData == 3) {
        //     this.gameround = 30;
        // }
        this.gameround = Number(CustomEventData);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        cc.log("callbackGameRound, CustomEventData=", CustomEventData, " gameround=", this.gameround);
    },

    callbackSpecCardType: function callbackSpecCardType(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackSpecCardType, this.specCard =" + this.specCard);
        if (this.specCard == 0) {
            this.specCard = 0;
            this.CardTypeMult = [1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 0, 4, 0, 0, 0, 0, 0];
        } else {
            this.specCard = 1;
            this.CardTypeMult = [1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 0, 4, 5, 5, 5, 5, 5];
        }
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackFlowerCard: function callbackFlowerCard(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackFlowerCard, CustomEventData =" + CustomEventData);
        if (CustomEventData == 1) {
            this.FlowerCard = 1;
        } else if (CustomEventData == 2) {
            this.FlowerCard = 0;
        }
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackOwnerControl: function callbackOwnerControl(event) {
        cc.log("Bullfight_CreateRoom.callbackGameMode");
        if (this.ownerControl == 1) {
            this.ownerControl = 0;
        } else {
            this.ownerControl = 1;
        }
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackBankerMode: function callbackBankerMode(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackBankerMode,CustomEventData =" + CustomEventData);
        this.bankerMode = CustomEventData;
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackMinBet: function callbackMinBet(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackMinBet,CustomEventData =" + CustomEventData);
        this.minBet = CustomEventData;
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackTime: function callbackTime(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackTime,CustomEventData =" + CustomEventData);
        this.time = CustomEventData;
        this.switchBtnGoldDiamond();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackPersons: function callbackPersons(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackPersons,CustomEventData =" + CustomEventData);
        this.persons = CustomEventData;
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callbackCreateRoom: function callbackCreateRoom(event, CustomEventData) {

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (this.RoomLevel == 2) {
            MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

            var data = {
                control: Number(this.ownerControl),
                paymode: 1, //付费模式 (默认房卡)
                gametype: Number(this.bankerMode), //闭牌抢庄,四张抢庄(二选一)
                name: GamePlayer.getInstance().name,
                mixante: 1, //最小下注
                gameround: this.gameround,
                flowercard: this.FlowerCard, //是否有花牌
                seats: 6, //座位数
                bullmul: this.CardTypeMult };

            cc.log("callbackCreateRoom : data=", data);

            var createRoom = MessageFactory.createMessageReq(window.US_REQ_CREATE_TABLE_CMD_ID);
            var type = {
                clubid: 0,
                clublevel: 0,
                gameid: Number(this.gameMode),
                gamelevel: 2
            };

            if (createRoom) {
                createRoom.send(data, type);
            }

            this.dismiss();
            return;
        }

        if (this.scrollViewMult.node.active) {
            for (var index = 0; index < this.MultCell.length; index++) {
                this.CardTypeMult[index] = Number(this.MultCell[index].getCurMult());
            }
        }
        if (this.RoomName.string == "") {
            ToastView.show("房间名不能为空！");
            return;
        }

        cc.log("callbackCreateRoom : CustomEventData=", CustomEventData);
        var eventData = Number(CustomEventData);
        if (eventData == 3) {
            ToastView.show("您的钻石不够,请去商城购买");
            return;
        } else if (eventData == 4) {
            ToastView.show("您的金币不够,请去商城购买");
            return;
        }

        var data = {
            control: Number(this.ownerControl),
            paymode: eventData, //付费模式 (默认钻石)
            gametype: Number(this.bankerMode), //闭牌抢庄,四张抢庄(二选一)
            mixante: Number(this.minBet), //最小下注
            livetime: 60 * Number(this.time), //桌子使用时间(秒)
            name: this.RoomName.string, //桌子名称
            seats: Number(this.persons), //座位数
            bullmul: this.CardTypeMult, //从无牛开始，传一个数组
            mincarry: this.CarryData[0].CurCarryNum,
            maxcarry: this.CarryData[1].CurCarryNum,
            totalcarry: this.CarryData[2].CurCarryNum
        };

        if (data.mincarry > data.maxcarry) {
            data.maxcarry = data.mincarry;
        }

        if (data.maxcarry > data.totalcarry) {
            data.totalcarry = data.maxcarry;
        }

        cc.log("callbackCreateRoom : seats=", data.seats);

        if (this.clubid === 0) {
            var createRoom = MessageFactory.createMessageReq(window.US_REQ_CREATE_TABLE_CMD_ID);
            var type = {
                clubid: this.clubid === 0 ? 0 : this.clubid,
                clublevel: this.clubid === 0 ? 0 : this.clublevel,
                gameid: Number(this.gameMode),
                gamelevel: 1
            };
            if (createRoom) {
                createRoom.send(data, type);
            }
        } else {
            var createRoom = MessageFactory.createMessageReq(window.CLUB_REQ_CREATE_TABLE_CMD_ID);
            var type = {
                clubid: this.clubid === 0 ? 0 : this.clubid,
                clublevel: this.clubid === 0 ? 0 : this.clublevel,
                gameid: Number(this.gameMode),
                gamelevel: 1
            };
            if (createRoom) {
                createRoom.send(data, type);
            }
        }
        this.dismiss();
    },
    callbackBtnClose: function callbackBtnClose(event, CustomEventData) {
        cc.log("Bullfight_CreateRoom.callbackBtnClose,CustomEventData =" + CustomEventData);
        this.dismiss();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","Bullfight_MultCell":"Bullfight_MultCell","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ProgressSlider":"ProgressSlider","ToastView":"ToastView"}],"Bullfight_ExpressionView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5c028k2O/hM4ZGfODgoVJzd', 'Bullfight_ExpressionView');
// Script\GameScene\Bullfight\PopView\Bullfight_ExpressionView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');
var ToastView = require('ToastView');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        GrayLayer: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("onLoad : stop event");
            self.dismiss();
        }.bind(this));
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        cc.log("Bullfight_ExpressionView.callBackBtn,BtnName = " + BtnName);
        if (GamePlayer.getInstance().seatid == -1) {
            ToastView.show("您没有坐下不能发送表情");
            return;
        }

        if (BtnName.indexOf("Btn") >= 0) {

            var data = {
                touid: GamePlayer.getInstance().uid,
                kind: ChatType.E_CHAT_FACE_KIND,
                type: Number(CustomEventData),
                text: ""
            };
            MessageFactory.createMessageReq(US_REQ_GAME_CHAT_CMD_ID).send(data);
        }
        this.dismiss();
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"Bullfight_GameScene":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f3a0bateh9Bip/rprp/I3UV', 'Bullfight_GameScene');
// Script\GameScene\Bullfight\SceneView\Bullfight_GameScene.js

"use strict";

var BaseScene = require('BaseScene');
var GameSystem = require("GameSystem");
var MessageFactory = require("MessageFactory");
var GamePlayer = require('GamePlayer');
var Cmd_Bullfight = require('Cmd_Bullfight');
var ToastView = require('ToastView');
var LoadingView = require('LoadingView');
var AlertView = require('AlertView');
var Bullfight_Clock = require('Bullfight_Clock');
var Player = require("Player");
var Bullfight_PlayerItem = require("Bullfight_PlayerItem");
var Bullfight_CardItem = require("Bullfight_CardItem");
var Bullfight_GiftAnimation = require('Bullfight_GiftAnimation');
var MusicMgr = require('MusicMgr');
var Bullfight_AudioConfig = require('Bullfight_AudioConfig');
var Audio_Common = require('Audio_Common');
var GameCallOC = require('GameCallOC');
var UtilTool = require('UtilTool');

window.Bullfight_TableStatus = cc.Enum({
    E_TABLE_CLOSE_STATUS: -2, //桌子关闭
    E_TABLE_NOT_START_STATUS: 0, //桌子未开始
    E_TABLE_READY_STATUS: 1, //桌子准备
    E_TABLE_CALL_STATUS: 2, //叫庄
    E_TABLE_BET_STATUS: 3, //下注
    E_TABLE_OPEN_STATUS: 4, //开牌
    E_TABLE_OVER_STATUS: 5, //游戏结束
    E_TABLE_IDLE_STATUS: 6 });

window.Bullfight_PlayerStatus = cc.Enum({
    E_PLAYER_UNKONW_STATUS: -2,
    E_PLAYER_WATCH_STATUS: 0, //观察状态(可能是玩过的,也可能是没有玩过的)
    // E_PLAYER_APPLY_STATUS  : 1, //申请入座           //这2个状态废弃
    // E_PLAYER_COIN_STATUS   : 2, //向群主确认携带金币
    E_PLAYER_SIT_STATUS: 3, //已入座,等待状态
    E_PLAYER_READY_STATUS: 4, //玩家进入准备状态
    E_PLAYER_ACTIVE_STATUS: 5, //正在玩牌
    E_PLAYER_OVER_STATUS: 6 });

window.Bullfight_CallType = cc.Enum({
    E_QUIT_CALL_BANKER: 0, //未操作
    E_NOT_CALL_BANKER: 1, //不抢
    E_NORMAL_CALL_BANKER: 2, //抢庄
    E_SUPER_CALL_BANKER: 3 });

cc.Class({
    extends: BaseScene,

    properties: {
        Menu: cc.Prefab,
        MenuRoomCard: cc.Prefab,
        CarryView: cc.Prefab,
        PlayerItemPos: [Bullfight_PlayerItem],
        CardItem: [Bullfight_CardItem],
        m_iMaxPlayers: 0,
        BtnStart: cc.Button,
        BtnReady: cc.Button,
        BtnCallBankerNode: cc.Node,
        BetCoinNode: cc.Node,
        OpenCardNode: cc.Node,
        clock: Bullfight_Clock,
        RoomId: cc.Label,
        RoomName: cc.Label,
        RoundNum: cc.Label,
        PlayersList: cc.Prefab,
        CallBankerFlag: [cc.Sprite],
        CallBankerFlagFrame: [cc.SpriteFrame],
        GiftAnimation: Bullfight_GiftAnimation,
        GameTotalResult: cc.Prefab,
        ExpressionView: cc.Prefab,
        RoomInfoView: cc.Prefab,
        BetLabel: [cc.Label],
        BtnMusicOn: cc.Button,
        BtnMusicOff: cc.Button,
        VoiceView: cc.Prefab,
        VoicePlayView: cc.Prefab,
        BtnVoice: cc.Button,
        GameScene: cc.Canvas,
        ShareView: cc.Prefab,
        Tips: cc.Label,
        BtnControl: cc.Sprite,
        SuperCostLabel: cc.Label,
        PlayNode: cc.Node,
        DismissTableView: cc.Prefab,
        BtnRoomInfo: cc.Button,
        BtnSuccess: cc.Button,

        BtnBetNode: cc.Node,
        BtnBetRoomCardNode: cc.Node
    },

    statics: {
        Instance: null
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        GameSystem.getInstance().CurGameType = GameSystem.getInstance().GameType.GAME_TYPE_BULLFIGHT;
        if (GameSystem.getInstance().EnterRoom) {
            MessageFactory.createMessageReq(window.US_REQ_ENTER_GAME_CMD_ID).send();
        }
        this.initData();
        this.Instance = this;
        this.updateRoomViewByLevel();
    },

    // called every frame, uncomment this function to activate update callback
    update: function update(dt) {
        GameCallOC.getInstance().Poll();
    },

    onDestroy: function onDestroy() {
        this._super();
        this.Instance = null;
        MusicMgr.stopBackgroundMusic();
    },

    updateRoomViewByLevel: function updateRoomViewByLevel() {
        if (GameSystem.getInstance().roomLevel == 2) {
            this.BtnRoomInfo.node.active = false;
            this.BtnSuccess.node.active = false;
        }
    },

    updateBet: function updateBet(minAnte) {
        this.BetLabel[0].string = 1 * minAnte;
        this.BetLabel[1].string = 2 * minAnte;
        this.BetLabel[2].string = 5 * minAnte;
        this.BetLabel[3].string = 10 * minAnte;
    },

    initData: function initData() {
        GamePlayer.getInstance().seatid = -1;
        this.tableStatus = Bullfight_TableStatus.E_TABLE_CLOSE_STATUS;
        this.sitPlayers = new Map();
        this.m_iMyBetCoin = 0;
        this.m_iMaxBet = 0;
        this.tableRuleInfo = null;
        this.bankerUid = 0;
        this.roundnum = 0;
        this.BetArray = [];
        this.RoomId.string = "ID:" + GameSystem.getInstance().privateid;
        this.VoiceViewNode = null;
        this.VoicePlayerViewNode = null;
        this.removeAllPlayerInTable();
        cc.log("Bullfight_GameScene.clearTable,privateid = " + GameSystem.getInstance().privateid);

        var self = this;
        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            if (GamePlayer.getInstance().seatid == -1) {
                ToastView.show("您没有坐下不能发送语音");
                return;
            }
            //显示录音界面
            self.VoiceViewNode = cc.instantiate(self.VoiceView);
            self.node.addChild(self.VoiceViewNode);
            self.VoiceViewNode.setPosition(cc.p(0, 0));
        });
        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            //取消录音界面
            if (self.VoiceViewNode) {
                self.VoiceViewNode.getComponent("VoiceView").dismiss();
                self.VoiceViewNode = null;
            }
            self.playVoiceContinue();
        });
        this.BtnVoice.node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
            //取消录音界面
            if (self.VoiceViewNode) {
                self.VoiceViewNode.getComponent("VoiceView").dismiss();
                self.VoiceViewNode = null;
            }
        });

        if (GameSystem.getInstance().VolumeState == 1) {
            this.BtnMusicOn.node.active = false;
            this.BtnMusicOff.node.active = true;
        }

        this.VoiceArray = new Array();
    },

    clearTable: function clearTable() {
        this.m_iMyBetCoin = 0;
        this.m_iMaxBet = 0;
        this.bankerUid = 0;
        this.BtnStart.node.active = false;
        this.BtnReady.node.active = false;
        this.clock.node.active = false;
        this.BtnCallBankerNode.active = false;
        //this.BetCoinNode.active = false;
        if (GameSystem.getInstance().roomLevel == 2) {
            this.BtnBetRoomCardNode.active = false;
        } else {
            this.BtnBetNode.active = false;
        }

        this.OpenCardNode.active = false;
        this.BetArray = [];
        this.clearCallBankerFlag();
    },

    /*********************Network***************************/
    callBackBtnShare: function callBackBtnShare() {

        var ShareImagePath = GameCallOC.getInstance().screenShotAction();
        var shareView = cc.instantiate(this.ShareView);
        this.node.addChild(shareView);
        shareView.setPosition(cc.p(0, 0));
        var string = "游戏结算分享";
        shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_IMAGE, ShareImagePath, GameSystem.getInstance().clienturl);
    },

    playVoiceContinue: function playVoiceContinue() {
        if (this.VoicePlayerViewNode != null) {
            cc.log("this.VoicePlayerViewNode  removeFromParent");
            this.VoicePlayerViewNode.removeFromParent(true);
            this.VoicePlayerViewNode = null;
        }
        var msg = this.VoiceArray.pop();
        cc.log("onSceneMsg,msg = " + JSON.stringify(msg));
        if (msg) {
            var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);
            if (this.VoicePlayerViewNode == null && this.VoiceViewNode == null) {
                cc.log("this.VoicePlayerViewNode  create1");
                this.VoicePlayerViewNode = cc.instantiate(this.VoicePlayView);
                this.GiftAnimation.node.addChild(this.VoicePlayerViewNode);
                this.VoicePlayerViewNode.setPosition(this.CallBankerFlag[fromViewId].node.position);
                var text = JSON.parse(BASE64.decoder(msg.text));
                GameCallOC.getInstance().DownloadRecordedFile(text.fileID, text.filePath);
            }
        }
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        cc.log("onSceneMsg,msg.popView = " + msg.popView);
        if (msg.popView == "GloudVoice") {
            if (msg.btn == "OnPlayRecordedFile") {
                this.playVoiceContinue();
            }
        } else if (msg.popView == "Bullfight_TotalResult") {
            if (msg.btn == "BtnShare") {
                this.callBackBtnShare();
            }
        } else if (msg.popView == "Bullfight_Menu") {
            if (msg.btn == "BtnShare") {
                this.showShareView();
                //this.callBackBtnShare();
            }
        } else if (msg.popView == "VoicePlayView") {
            if (msg.btn = "dismiss") {
                cc.log("this.VoicePlayerViewNode  null");
                this.VoicePlayerViewNode = null;
            }
        }
    },

    onMessage: function onMessage(event) {
        cc.log("Bullfight_GameScene.onMessage");
        this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.US_RESP_LOGIN_CMD_ID:
                this.onLoginMsg(msg);
                break;

            case window.US_RESP_ENTER_GAME_CMD_ID:
                this.onEnterRoom(msg);
                break;

            case window.US_RESP_SIT_DOWN_CMD_ID:
                this.onSitDown(msg);
                break;

            case window.US_RESP_LEAVE_GAME_CMD_ID:
                this.onLeaveGame(msg);
                break;

            case window.US_NOTIFY_GAME_SWITCH_CMD_ID:
                this.onNotifyGameSwitch(msg);
                break;

            case Cmd_Bullfight.SBF_RESP_READY_CMD_ID:
                this.onReady(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_GAME_START_CMD_ID:
                this.onNotifyGameStart(msg);
                break;

            case Cmd_Bullfight.SBF_RESP_CALL_BANKER_CMD_ID:
                this.onCallBanker(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_CONFIRM_BANKER_CMD_ID:
                this.onNotifySureBanker(msg);
                break;

            case window.US_RESP_GAME_SWITCH_CMD_ID:
                this.onGameSwitch(msg);
                break;

            case Cmd_Bullfight.SBF_RESP_BET_COIN_CMD_ID:
                this.onBetCoin(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_OPEN_CARD_CMD_ID:
                this.onNotifyOpenCard(msg);
                break;

            case Cmd_Bullfight.SBF_RESP_OPEN_CARD_CMD_ID:
                this.onOpenCard(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID:
                this.onNotifyOneGameResult(msg);
                break;

            case window.US_RESP_CARRY_COIN_CMD_ID:
                this.onCarryCoin(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_KICKOUT_CMD_ID:
                this.doKickOut(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID:
                this.onNotifyNotCallbanker(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_NOT_BET_COIN_CMD_ID:
                this.onNotifyNotBet(msg);
                break;

            case Cmd_Bullfight.SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID:
                this.NotifyTotalGameResult(msg);
                break;

            case Cmd_Bullfight.US_RESP_TABLE_DETAIL_CMD_ID:
                this.onGetTableDetail(msg);
                break;

            case US_RESP_GAME_CHAT_CMD_ID:
                this.onChatMsg(msg);
                break;

            case window.US_RSP_DISMISS_TABLE_CMD_ID:
                this.onDismissTable(msg);
                break;
            case window.US_NOTIFY_DISMISS_TABLE_CMD_ID:
                this.onNotifyDismissTable(msg);
                break;
        };
    },

    onNotifyDismissTable: function onNotifyDismissTable(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("onNotifyDismissTable dismissuid=", msg.dismissuid, " name=", msg.name, " timeout=", msg.timeout);
            var DismissTable = cc.instantiate(this.DismissTableView);
            this.node.addChild(DismissTable);
            DismissTable.setPosition(cc.p(0, 0));
            DismissTable.getComponent("Bullfight_DismissTable").setSendInfo(msg.name, msg.dismissuid, msg.timeout);
        }
    },

    onDismissTable: function onDismissTable(msg) {
        if (msg.code != SocketRetCode.RET_SUCCESS) {
            ToastView.show(msg.desc);
        }
    },

    onChatMsg: function onChatMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.kind == ChatType.E_CHAT_FACE_KIND) {
                var viewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);
                var pos = this.CallBankerFlag[viewId].node.position;
                this.GiftAnimation.playFaceAnimation(msg.type, pos);
            } else if (msg.kind == ChatType.E_CHAT_GIFT_KIND) {
                var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);
                var toViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.touid).seatid);
                var start = this.PlayerItemPos[fromViewId].node.position;
                var end = this.PlayerItemPos[toViewId].node.position;
                this.GiftAnimation.playGiftAnimation(msg.type, start, end);
            } else if (msg.kind == ChatType.E_CHAT_VOICE_KIND) {
                var fromViewId = this.getPlayerViewIdBySeatId(this.findPlayer(msg.fromuid).seatid);
                if (this.VoicePlayerViewNode == null && this.VoiceViewNode == null) {
                    cc.log("this.VoicePlayerViewNode  create");
                    this.VoicePlayerViewNode = cc.instantiate(this.VoicePlayView);
                    this.GiftAnimation.node.addChild(this.VoicePlayerViewNode);
                    this.VoicePlayerViewNode.setPosition(this.CallBankerFlag[fromViewId].node.position);
                    var text = JSON.parse(BASE64.decoder(msg.text));
                    cc.log("Bullfight_GameScene.onChatMsg,fileID = " + text.fileID);
                    cc.log("Bullfight_GameScene.onChatMsg,downloadFilePath = " + text.filePath);
                    GameCallOC.getInstance().DownloadRecordedFile(text.fileID, text.filePath);
                } else {
                    //语音一次只能播放一个，如果当前有播放的先保存，等播放玩了继续播放
                    cc.log("onChatMsg,msg = " + JSON.stringify(msg));
                    this.VoiceArray.push(msg);
                    cc.log("onChatMsg,VoiceArray = " + this.VoiceArray.length);
                }
            } else if (msg.kind == ChatType.E_CHAT_WORD_KIND) {}
        } else {}
    },

    onLoginMsg: function onLoginMsg(msg) {
        cc.log("Bullfight_GameScene.onLoginMsg");
        if (msg.code >= SocketRetCode.RET_SUCCESS) {
            this.clearTable();
            this.delAllPlayer();
            MessageFactory.createMessageReq(Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID).send();
        }
    },

    showShareView: function showShareView() {
        var shareView = cc.instantiate(this.ShareView);
        this.node.addChild(shareView);
        shareView.setPosition(cc.p(0, 0));
        var string = "我在游戏［" + GameCallOC.getInstance().getAppName() + "］里创建了房间(" + GameSystem.getInstance().privateid + "),快点一起来玩吧！！！";
        shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_LINK, string, GameSystem.getInstance().clienturl);
    },

    onEnterRoom: function onEnterRoom(msg) {
        cc.log("Bullfight_GameScene.onEnterRoom");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.tableRuleInfo = JSON.parse(BASE64.decoder(msg.param));
            this.tableStatus = msg.tstatus;
            this.m_iMaxPlayers = msg.seats;
            this.RoomName.string = msg.name;
            GamePlayer.getInstance().bowner = msg.bowner;
            GamePlayer.getInstance().status = msg.ustatus;
            GameSystem.getInstance().superCost = msg.supercost;
            GameSystem.getInstance().giftCost = msg.giftcosts;
            this.SuperCostLabel.string = GameSystem.getInstance().superCost;
            this.updateBet(this.tableRuleInfo.minante);

            // if (msg.bowner == 1) {
            //     this.BtnControl.node.active = true
            // } else {
            //     this.BtnControl.node.active = false
            // }

            cc.log("onEnterRoom: tstatus=", this.tableStatus, " status=", GamePlayer.getInstance().status);

            //本局游戏没有开始，并且自己是桌主
            if (this.tableStatus == Bullfight_TableStatus.E_TABLE_NOT_START_STATUS && GamePlayer.getInstance().bowner == 1) {
                cc.log("onEnterRoom: bowner=" + GamePlayer.getInstance().bowner);
                this.showTableStatusBtn(); //显示游戏开始按钮
                if (GameSystem.getInstance().VerStatus != GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
                    this.showShareView();
                }
            } else if (this.tableStatus > Bullfight_TableStatus.E_TABLE_NOT_START_STATUS) {
                cc.log("Bullfight_GameScene.onEnterRoom, get table detail.");
                MessageFactory.createMessageReq(Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID).send();

                switch (this.tableStatus) {
                    case Bullfight_TableStatus.E_TABLE_READY_STATUS:
                        this.Tips.string = "准备中";
                        break;

                    case Bullfight_TableStatus.E_TABLE_CALL_STATUS:
                        this.Tips.string = "抢庄中";
                        break;

                    case Bullfight_TableStatus.E_TABLE_BET_STATUS:
                        this.Tips.string = "下注中";
                        break;

                    case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:
                        this.Tips.string = "开牌中";
                        break;

                    case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:
                        this.Tips.string = "本局结束";
                        break;
                }
            } else {
                this.Tips.string = "游戏未开始";
            }

            //显示在自己之前进入的玩家
            for (var index = 0; msg.seaters != null && index < msg.seaters.length; index++) {
                var player = new Player();
                player.uid = msg.seaters[index].uid;
                player.name = msg.seaters[index].name;
                player.headurl = msg.seaters[index].headurl;
                player.sex = msg.seaters[index].sex;
                player.gold = msg.seaters[index].gold;
                player.diamond = msg.seaters[index].diamond;
                player.coin = msg.seaters[index].coin;
                player.seatid = msg.seaters[index].seatid;
                player.status = msg.seaters[index].status;
                player.winGold = msg.seaters[index].win;
                player.TotalCarry = msg.seaters[index].total;
                player.TotalRound = msg.seaters[index].totalround; //总手数
                player.TotalTable = msg.seaters[index].totaltable; //总局数
                this.addPlayer(player);
            }
            this.refreshAllPlayerOnTable(false);

            if (GamePlayer.getInstance().seatid == -1) {
                this.SitDown();
            }
        }
    },

    SitDown: function SitDown() {
        var data = {
            status: 1
        };
        MessageFactory.createMessageReq(window.US_REQ_SIT_DOWN_CMD_ID).send(data);
        MusicMgr.playEffect(Audio_Common.AUDIO_SIT);
    },

    onSitDown: function onSitDown(msg) {
        cc.log("Bullfight_GameScene.onSitDown");
        LoadingView.dismiss();
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.tableStatus = msg.tstatus;
            if (msg.switch == 1) {
                var player = new Player();
                cc.log("player.seatid = " + msg.seatid);
                player.uid = msg.seatuid;
                player.name = msg.name;
                player.headurl = msg.headurl;
                player.sex = msg.sex;
                player.gold = msg.gold;
                player.diamond = msg.diamond;
                player.coin = msg.coin;
                player.status = msg.status;
                player.seatid = msg.seatid;
                player.winGold = msg.win;
                player.TotalCarry = msg.total;
                player.TotalRound = msg.totalround; //总手数
                player.TotalTable = msg.totaltable; //总局数
                cc.log("onSitDown player.TotalRound=", player.TotalRound, " player.TotalTable=", player.TotalTable);
                this.addPlayer(player);

                if (player.uid == GamePlayer.getInstance().uid) {
                    this.refreshAllPlayerOnTable(true);
                } else {
                    this.showOnePlayerInTable(player);
                }

                if (msg.seatuid == GamePlayer.getInstance().uid) {
                    if (msg.iscarry > 0) {
                        //需要携带金币
                        this.createCarryView(msg.carrytime);
                    } else {
                        this.showTableStatusBtn();
                    }
                }
            } else {
                this.delPlayer(msg.seatuid);
                if (msg.seatuid == GamePlayer.getInstance().uid) {
                    //如果是自己，则需要清理按键
                    this.refreshAllPlayerOnTable(true);
                    this.showTableStatusBtn();
                }
            }
        } else if (msg.code > SocketRetCode.RET_SUCCESS) {
            ToastView.show(msg.desc);
        }
    },

    onCarryCoin: function onCarryCoin(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("[%d,%d]", msg.carryuid, GamePlayer.getInstance().uid);
            this.tableStatus = msg.tstatus;
            if (GamePlayer.getInstance().bowner != 1 && msg.carryuid == GamePlayer.getInstance().uid) {
                ToastView.show("桌主已同意您的请求");
            }

            var player = this.findPlayer(msg.carryuid);
            if (player) {
                cc.log("Bullfight_GameScene.onCarryCoin,carrycoin = " + msg.carrycoin, " coin=", msg.coin);
                player.status = msg.ustatus;
                player.TotalCarry = msg.carrycoin;
                player.coin = msg.coin;
                player.gold = msg.gold;
                player.diamond = msg.diamond;
                var viewid = this.getPlayerViewIdBySeatId(player.seatid);
                this.PlayerItemPos[viewid].setUserGold(player.coin);
            }

            if (msg.carryuid == GamePlayer.getInstance().uid) {
                GamePlayer.getInstance().status = msg.ustatus;
                this.showTableStatusBtn();
            }
        } else {
            ToastView.show(msg.desc);
        }
    },

    onLeaveGame: function onLeaveGame(msg) {
        cc.log("Bullfight_GameScene.onLeaveGame");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            GameSystem.getInstance().gamesvcid = 0;
            GameSystem.getInstance().tableid = 0;
            cc.director.loadScene('HallScene');
        }
    },

    onNotifyGameSwitch: function onNotifyGameSwitch(msg) {
        cc.log("Bullfight_GameScene.onNotifyGameSwitch");
        if (msg.isStart == 1) {
            this.tableStatus = msg.tstatus;
            GamePlayer.getInstance().status = msg.ustatus;

            cc.log("Bullfight_GameScene.onNotifyGameSwitch,this.tableStatus = " + this.tableStatus);

            this.showTableStatusBtn();

            if (this.sitPlayers.size() > 0) {
                this.startClockTime(msg.readyTime);
                this.Tips.string = "准备中";
            } else {
                this.Tips.string = "请入座";
            }

            this.clearAllPlayerCardItem();
            this.clearCallBankerFlag();
            this.clearUserWinScore();
            this.clearUserHeadBanker();
        } else {
            //弹框提示玩家游戏解散
            ToastView.show(msg.desc);
        }
    },

    onNotifyGameStart: function onNotifyGameStart(msg) {
        cc.log("Bullfight_GameScene.onNotifyGameStart");

        this.clearReadyFlag();
        GamePlayer.getInstance().status = msg.ustatus;
        this.tableStatus = msg.tstatus;
        this.roundnum = msg.roundnum;
        this.RoundNum.string = "第" + this.roundnum + "局";
        this.Tips.string = "抢庄中";

        this.startClockTime(msg.calltime);

        //在座位上
        if (GamePlayer.getInstance().seatid >= 0) {
            if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);
                this.sendCardsToPlayer(viewId, msg.cards);
            }
        }

        this.showTableStatusBtn();

        //其他玩家
        // Uid     uint32 `json:"uid"`
        // UStatus int    `json:"ustatus"`
        // SeatId  int    `json:"seatid"`
        for (var index = 0; index < msg.seaters.length; index++) {
            var item = msg.seaters[index];

            var player = this.findPlayer(item.uid);
            player.status = item.ustatus;
            player.finalcoin = 0;
            player.bulltype = 0;
            player.cards = [];
            player.calltype = 0; //叫庄类型
            player.bBanker = 0; //是否是庄家
            player.betcoinmul = 0; //下注倍数
            player.bOpenCard = 0; //是否看牌

            if (item.ustatus == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                var viewId = this.getPlayerViewIdBySeatId(item.seatid);
                var cards = [0, 0, 0, 0, 0];
                this.sendCardsToPlayer(viewId, cards);
            } else {
                //旁观
                this.refreshLookFlag(item.uid);
            }
        }
    },

    onReady: function onReady(msg) {
        cc.log("Bullfight_GameScene.onReady readuid=", msg.readyuid, " ustatus=", msg.ustatus);
        if (msg.code == SocketRetCode.RET_SUCCESS) {

            if (msg.readyuid == GamePlayer.getInstance().uid) {
                GamePlayer.getInstance().status = msg.ustatus;
                this.BtnReady.node.active = false;
                this.clearTable();
                this.Tips.string = "等待其他玩家准备";
            }

            this.updatePlayerStatus(msg.readyuid, msg.ustatus);

            this.refreshReadyFlag(msg.readyuid);
        }
    },

    onCallBanker: function onCallBanker(msg) {
        cc.log("Bullfight_GameScene.onCallBanker");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.tableStatus = msg.tstatus;
            if (msg.calluid == GamePlayer.getInstance().uid) {
                this.BtnCallBankerNode.active = false;
                this.Tips.string = "等带其他玩家抢庄";
            }

            this.updatePlayerCallType(msg.calluid, msg.calltype);
            this.refreshCallBankerFlag(msg.calluid, true);
        } else {
            ToastView.show(msg.desc);
        }
    },

    onNotifySureBanker: function onNotifySureBanker(msg) {
        cc.log("Bullfight_GameScene.onNotifySureBanker");
        this.clearCallBankerFlag();
        this.startClockTime(msg.bettime);
        this.bankerUid = msg.bankeruid;
        this.m_iMaxBet = msg.maxbetmul;
        this.tableStatus = msg.tstatus;
        GamePlayer.getInstance().status = msg.ustatus;

        var player = this.findPlayer(msg.bankeruid);
        player.bBanker = 1;
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        this.PlayerItemPos[viewId].setPlayerBanker();

        this.showTableStatusBtn();
        this.Tips.string = "下注中";
    },

    onGameSwitch: function onGameSwitch(msg) {
        cc.log("Bullfight_GameScene.onGameSwitch");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.isstart == 1) {
                this.BtnStart.node.active = false;
                this.Tips.string = "游戏开始";
            } else {
                ToastView.show("房间解散成功，本局结束后将解散");
            }
        } else if (msg.code == 14) {
            ToastView.show(msg.desc);
        }
    },

    onBetCoin: function onBetCoin(msg) {
        cc.log("Bullfight_GameScene.onBetCoin");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.tableStatus = msg.tstatus;
            GamePlayer.getInstance().status = msg.ustatus;

            if (msg.betuid == GamePlayer.getInstance().uid && GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                //this.BetCoinNode.active = false;
                if (GameSystem.getInstance().roomLevel == 2) {
                    this.BtnBetRoomCardNode.active = false;
                } else {
                    this.BtnBetNode.active = false;
                }
                this.Tips.string = "等待其他玩家下注";
            }
            var player = this.sitPlayers.get(msg.betuid);
            player.betcoinmul = msg.betcoinmul;
            var viewId = this.getPlayerViewIdBySeatId(player.seatid);
            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);
        }
    },

    onNotifyOpenCard: function onNotifyOpenCard(msg) {
        cc.log("onNotifyOpenCard...");
        GamePlayer.getInstance().status = msg.ustatus;
        this.tableStatus = msg.tstatus;
        this.startClockTime(msg.opentime);
        this.Tips.string = "看牌中";

        if (GamePlayer.getInstance().status != Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) return;

        GamePlayer.getInstance().cards = msg.cards;
        var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);
        cc.log("Bullfight_GameScene.onNotifyOpenCard,viewId = " + viewId);
        this.openplayerCards(viewId, msg.cards, -1, -1);
        this.showTableStatusBtn();
        this.setCustomCardType(true);
    },

    onOpenCard: function onOpenCard(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.tableStatus = msg.tstatus;

            var player = this.findPlayer(msg.openuid);
            player.bulltype = msg.bulltype;
            player.cards = msg.cards;
            player.bOpenCard = 1;
            cc.log("Bullfight_GameScene.onOpenCard,player = " + player);
            var viewId = this.getPlayerViewIdBySeatId(msg.seatid);
            this.setCardType(viewId, player.bulltype, true);
            this.openplayerCards(viewId, player.cards, msg.index1, msg.index2);

            if (msg.openuid == GamePlayer.getInstance().uid) {
                this.setCustomCardType(false);
                this.OpenCardNode.active = false;
                this.Tips.string = "等待其他玩家看牌";
            }
        }
    },

    onNotifyOneGameResult: function onNotifyOneGameResult(msg) {
        this.tableStatus = msg.tstatus;
        GamePlayer.getInstance().status = msg.ustatus;

        cc.log("onNotifyOneGameResult msg.ustatus=", msg.ustatus, " status=", GamePlayer.getInstance().status);

        this.OpenCardNode.active = false;
        this.setCustomCardType(false);
        // this.clearAllPlayerCardItem();
        // this.showTableStatusBtn();
        // this.clearCallBankerFlag();
        this.startClockTime(msg.overtime);
        this.Tips.string = "本局结算";

        for (var index = 0; index < msg.seaters.length; index++) {
            if (msg.seaters[index].ustatus == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS) {
                var player = this.findPlayer(msg.seaters[index].uid);
                player.status = msg.seaters[index].ustatus;
                player.coin = msg.seaters[index].coin;

                var viewid = this.getPlayerViewIdBySeatId(msg.seaters[index].seatid);
                this.PlayerItemPos[viewid].setUserWinScore(msg.seaters[index].finalcoin);
                this.PlayerItemPos[viewid].setUserGold(msg.seaters[index].coin);

                if (msg.seaters[index].uid == GamePlayer.getInstance().uid) {
                    if (msg.seaters[index].finalcoin > 0) {
                        var pos = this.CallBankerFlag[viewid].node.position;
                        this.GiftAnimation.playWinAnimation(pos);

                        MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_WIN);
                    } else {
                        MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_LOSE);
                    }
                }
            }
        }
    },

    doKickOut: function doKickOut(msg) {
        if (msg.code != SocketRetCode.RET_SUCCESS) //选择携带金币超时
            {
                this.delPlayer(msg.seatuid);
                cc.log("Bullfight_GameScene.doKickOut,uid = " + GamePlayer.getInstance().uid);
                if (msg.seatuid == GamePlayer.getInstance().uid) {
                    cc.log("Bullfight_GameScene.doKickOut, my be kickout.");
                    GamePlayer.getInstance().status = 0;
                    GamePlayer.getInstance().seatid = -1;
                    this.refreshAllPlayerOnTable(true);
                    this.showTableStatusBtn();
                    if (msg.code != SocketRetCode.RET_SUCCESS) {
                        ToastView.show(msg.desc);
                    }
                }
            }
    },

    onNotifyNotCallbanker: function onNotifyNotCallbanker(msg) {},

    onNotifyNotBet: function onNotifyNotBet(msg) {},

    NotifyTotalGameResult: function NotifyTotalGameResult(msg) {
        this.createTotalGameResult(msg);
    },

    createTotalGameResult: function createTotalGameResult(msg) {
        var gameEnd = cc.instantiate(this.GameTotalResult);
        this.node.addChild(gameEnd);
        gameEnd.setPosition(cc.p(0, 0));
        gameEnd.getComponent("Bullfight_TotalResult").setGameData(msg, this.GameScene);
    },

    onGetTableDetail: function onGetTableDetail(msg) {
        if (msg.code < SocketRetCode.RET_SUCCESS) return;

        this.tableRuleInfo = {
            gametype: msg.gametype,
            minante: msg.minante,
            mincarry: msg.mincarry,
            maxcarry: msg.maxcarry,
            livetime: msg.livetime,
            seats: msg.seats,
            bullmul: msg.bullmul,
            totalcarry: msg.totalcarry
        };

        cc.log("onGetTableDetail mincarry=", msg.minmincarry, " maxcarry=", msg.maxcarry);

        this.roundnum = msg.roundnum;
        this.RoundNum.string = "第" + this.roundnum + "局";
        GameSystem.getInstance().privateid = msg.privateid;
        this.RoomId.string = "ID:" + GameSystem.getInstance().privateid;

        cc.log("onGetTableDetail roundnum=", this.roundnum, " privateid=", GameSystem.getInstance().privateid);

        GamePlayer.getInstance().TotalCarry = msg.carrycoin;
        GamePlayer.getInstance().bowner = msg.bowner;

        // if (msg.bowner == 1) {
        //     this.BtnControl.node.active = true
        // } else {
        //     this.BtnControl.node.active = false
        // }

        this.m_iMaxPlayers = msg.seats;
        this.tableStatus = msg.tstatus;
        this.bankerUid = msg.bankeruid;
        this.updateClockTime(msg.timeout);

        for (var index = 0; index < msg.seaters.length; index++) {
            var player = new Player();
            player.uid = msg.seaters[index].uid;
            player.name = msg.seaters[index].name;
            player.headurl = msg.seaters[index].headurl;
            player.sex = msg.seaters[index].sex;
            player.gold = msg.seaters[index].gold;
            player.diamond = msg.seaters[index].diamond;
            player.coin = msg.seaters[index].coin;
            player.status = msg.seaters[index].status;
            player.seatid = msg.seaters[index].seatid;
            player.TotalCarry = msg.seaters[index].total;
            player.winGold = msg.seaters[index].win;
            player.calltype = msg.seaters[index].calltype;
            player.betcoinmul = msg.seaters[index].betmul;
            player.cards = msg.seaters[index].cards;
            player.bulltype = msg.seaters[index].bulltype;
            player.finalcoin = msg.seaters[index].finalcoin;
            player.TotalRound = msg.seaters[index].totalround; //总手数
            player.TotalTable = msg.seaters[index].totaltable; //总局数
            player.bOpenCard = msg.seaters[index].bopencard; //

            if (player.uid == GamePlayer.getInstance().uid) {
                this.m_iMaxBet = msg.seaters[index].maxbetmul;
            }

            if (this.bankerUid == player.uid) {
                player.bBanker = 1;
            } else {
                player.bBanker = 0;
            }
            cc.log("onGetTableDetail uid=", player.uid, " isbanker=", player.bBanker);

            this.addPlayer(player);
        }
        this.refreshAllPlayerOnTable(true);
    },

    /***********send Message ********************/

    sendReady: function sendReady() {
        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_READY_CMD_ID).send();
    },

    sendCallBanker: function sendCallBanker(callType) {
        var data = {
            calltype: callType
        };
        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_CALL_BANKER_CMD_ID).send(data);
    },

    sendSwitchGame: function sendSwitchGame(isStart) {
        var data = {
            isstart: isStart
        };
        MessageFactory.createMessageReq(US_REQ_GAME_SWITCH_CMD_ID).send(data);
    },

    sendBetCoinReq: function sendBetCoinReq(betcoin) {
        var data = {
            betcoinmul: this.m_iMyBetCoin
        };
        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_BET_COIN_CMD_ID).send(data);
    },

    sendOpenCard: function sendOpenCard() {
        MessageFactory.createMessageReq(Cmd_Bullfight.SBF_REQ_OPEN_CARD_CMD_ID).send();
    },

    /***********************BtnCallback*************************/

    callbackBtnMusic: function callbackBtnMusic(toggle, CustomEventData) {
        var isCheck = toggle.isChecked;
        if (isCheck) {
            MusicMgr.resumeBackgroundMusic();
        } else {
            MusicMgr.pauseBackgroundMusic();
        }
    },

    callBackBetBtnRoomCard: function callBackBetBtnRoomCard(event, CustomEventData) {
        var node = event.target;
        var btn = node.getName();

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        cc.log("Bullfight_GameScene.callBackBetBtnRoomCard,btn = " + btn);

        if (btn == "BtnBet1") {
            this.m_iMyBetCoin = 1;
            cc.log("[BtnBet1] m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
            this.sendBetCoinReq();
        } else if (btn == "BtnBet3") {
            this.m_iMyBetCoin = 3;
            cc.log("[BtnBet2] m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
            this.sendBetCoinReq();
        } else if (btn == "BtnBet5") {
            this.m_iMyBetCoin = 5;
            this.BetArray.push(5);
            cc.log("[BtnBet5]  m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
            this.sendBetCoinReq();
        }
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        var node = event.target;
        var btn = node.getName();

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        cc.log("Bullfight_GameScene.callbackBtn,btn = " + btn);

        if (btn == "BtnMenu") {
            this.createMenu();
        } else if (btn == "BtnSuccess") {
            var playerList = cc.instantiate(this.PlayersList);
            this.node.addChild(playerList);
            playerList.setPosition(cc.p(0, 0));
        } else if (btn == "BtnSpeech") {
            //this.createTotalGameResult();
            //this.GiftAnimation.playGiftAnimation(1);
        } else if (btn == "BtnMusicOn") {
            this.BtnMusicOff.node.active = true;
            this.BtnMusicOn.node.active = false;

            GameSystem.getInstance().VolumeState = 1;

            MusicMgr.pauseBackgroundMusic();
        } else if (btn == "BtnMusicOff") {
            this.BtnMusicOff.node.active = false;
            this.BtnMusicOn.node.active = true;

            GameSystem.getInstance().VolumeState = 0;

            MusicMgr.resumeBackgroundMusic();
        } else if (btn == "BtnStart") {
            this.sendSwitchGame(1);
        } else if (btn == "BtnReady") {
            this.sendReady();
        } else if (btn == "BtnNotCall") {
            this.sendCallBanker(1);
        } else if (btn == "BtnCall") {
            this.sendCallBanker(2);
        } else if (btn == "BtnSuperCall") {
            this.sendCallBanker(3);
        } else if (btn == "BtnBet1") {
            this.m_iMyBetCoin += 1;
            this.BetArray.push(1);
            cc.log("[BtnBet1] this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
        } else if (btn == "BtnBet2") {
            this.m_iMyBetCoin += 2;
            this.BetArray.push(2);
            cc.log("[BtnBet2] this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
        } else if (btn == "BtnBet5") {
            this.m_iMyBetCoin += 5;
            this.BetArray.push(5);
            cc.log("[BtnBet5] this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
        } else if (btn == "BtnBet10") {
            this.m_iMyBetCoin += 10;
            this.BetArray.push(10);
            cc.log("[BtnBet10] this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin);
            this.updateMaxBet();
        } else if (btn == "BtnBetSure") {
            this.sendBetCoinReq();
        } else if (btn == "BtnBetCancle") {
            if (this.BetArray.length > 0) {
                var bet = this.BetArray.pop();
                this.m_iMyBetCoin -= bet;
                cc.log("[BtnBetCancle] this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin, " bet=" + bet);
                if (this.m_iMyBetCoin <= 0) {
                    this.m_iMyBetCoin = 1;
                }
                this.updateMaxBet();
            } else {
                cc.warn("[BtnBetCancle] not this.BetArray = ", this.BetArray, " m_iMyBetCoin=", this.m_iMyBetCoin);
            }
        } else if (btn == "BtnNoBullfight") {
            this.sendOpenCard();
        } else if (btn == "BtnBullfight") {
            this.sendOpenCard();
        } else if (btn == "BtnExpression") {
            this.createExpression();
        } else if (btn == "BtnRoomInfo") {
            this.createRoomInfoView();
        }
    },

    createExpression: function createExpression() {
        var ExpressionView = cc.instantiate(this.ExpressionView);
        this.node.addChild(ExpressionView);
        ExpressionView.setPosition(cc.p(0, 0));
    },

    updateMaxBet: function updateMaxBet() {
        if (this.m_iMaxBet != 0 && this.m_iMyBetCoin > this.m_iMaxBet) {
            ToastView.show("本局最大下注为：" + this.m_iMaxBet * this.tableRuleInfo.minante);
            var bigBet = this.m_iMyBetCoin - this.m_iMaxBet;
            var lastPush = this.BetArray.pop();
            var diffBet = lastPush - bigBet;
            this.m_iMyBetCoin = this.m_iMaxBet;
            if (diffBet <= 0) {
                cc.warn("updateMaxBet ignore diffBet=", diffBet);
                return;
            }
            this.BetArray.push(diffBet);
            cc.log("updateMaxBet diffBet=", diffBet);
        }

        var viewId = this.getPlayerViewIdBySeatId(GamePlayer.getInstance().seatid);
        this.setPlayerBetCount(viewId, this.m_iMyBetCoin * this.tableRuleInfo.minante);

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_BET);
    },

    createMenu: function createMenu() {
        cc.log("Bullfight_GameScene.createMenu");
        var self = this;
        var menuPop = null;
        if (GameSystem.getInstance().roomLevel == 2) {
            var menuPop = cc.instantiate(this.MenuRoomCard);
            this.node.addChild(menuPop);
            menuPop.setPosition(cc.p(0, 0));
            menuPop.getComponent("Bullfighgt_Menu").setCallBackCarry(function () {
                cc.log("Bullfight_GameScene, Bullfighgt_Menu");
                self.createCarryView(20);
            });
            menuPop.getComponent("Bullfighgt_Menu").setRuleInfo(this.tableRuleInfo);
        } else {
            var menuPop = cc.instantiate(this.Menu);
            this.node.addChild(menuPop);
            menuPop.setPosition(cc.p(0, 0));
            menuPop.getComponent("Bullfighgt_Menu").setCallBackCarry(function () {
                cc.log("Bullfight_GameScene, Bullfighgt_Menu");
                self.createCarryView(20);
            });
            menuPop.getComponent("Bullfighgt_Menu").setRuleInfo(this.tableRuleInfo);
        }
    },

    createRoomInfoView: function createRoomInfoView() {
        cc.log("Bullfight_GameScene.createMenu");
        var RoomInfoView = cc.instantiate(this.RoomInfoView);
        this.node.addChild(RoomInfoView);
        RoomInfoView.setPosition(cc.p(0, 0));
        RoomInfoView.getComponent("Bullfight_RoomInfo").setRoomInfo(this.tableRuleInfo);
    },

    createCarryView: function createCarryView(time) {
        var carryPop = cc.instantiate(this.CarryView);
        this.node.addChild(carryPop);
        carryPop.setPosition(cc.p(0, 0));
        carryPop.getComponent("Bullfight_CarryView").setCarryTime(time);
        cc.log("Bullfight_GameScene.createCarryView mincarry=", this.tableRuleInfo.mincarry, " maxcarry=", this.tableRuleInfo.maxcarry, " totalcarry=", this.tableRuleInfo.totalcarry);

        carryPop.getComponent("Bullfight_CarryView").setMinAndMax(this.tableRuleInfo.mincarry, this.tableRuleInfo.maxcarry, this.tableRuleInfo.totalcarry);
    },

    updatePlayerCallType: function updatePlayerCallType(uid, callType) {
        var player = this.sitPlayers.get(uid);
        player.calltype = callType;
    },

    refreshCallBankerFlag: function refreshCallBankerFlag(callUid, bMusic) {
        cc.log("refreshCallBankerFlag uid=", callUid);
        var player = this.findPlayer(callUid);
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        this.CallBankerFlag[viewId].node.active = true;
        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[player.calltype - 1 < 0 ? 0 : player.calltype - 1];

        if (bMusic) {
            MusicMgr.playEffect(player.calltype - 1 == 0 ? Bullfight_AudioConfig.AUDIO_MAN_NOCALLBANKER : Bullfight_AudioConfig.AUDIO_MAN_CALLBANKER);
        }
    },

    refreshReadyFlag: function refreshReadyFlag(readyUid) {
        var player = this.findPlayer(readyUid);
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        cc.log("refreshReadyFlag, uid=", readyUid, " seatid=", player.seatid, " viewid=", viewId);
        this.CallBankerFlag[viewId].node.active = true;
        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[3];
    },

    refreshLookFlag: function refreshLookFlag(uid) {
        var player = this.findPlayer(uid);
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        cc.log("refreshLookFlag, uid=", uid, " seatid=", player.seatid, " viewid=", viewId);
        this.CallBankerFlag[viewId].node.active = true;
        this.CallBankerFlag[viewId].spriteFrame = this.CallBankerFlagFrame[4];
    },

    clearCallBankerFlag: function clearCallBankerFlag() {
        cc.log("clearCallBankerFlag");
        for (var index = 0; index < BULLFIGHT_MAX_PLAYER; index++) {
            this.CallBankerFlag[index].node.active = false;
        }
    },

    clearReadyFlag: function clearReadyFlag() {
        this.clearCallBankerFlag();
    },

    clearUserHeadBanker: function clearUserHeadBanker() {
        for (var index = 0; index < 6; index++) {
            this.PlayerItemPos[index].clearPlayerBanker();
        }
    },

    clearUserWinScore: function clearUserWinScore() {
        for (var index = 0; index < this.PlayerItemPos.length; index++) {
            this.PlayerItemPos[index].clearUserWinScore();
        }
    },

    /**************Clock********************/

    startClockTime: function startClockTime(time) {
        this.time = time;
        this.clock.node.active = true;
        this.clock.updateTimeLabel(this.time);
        this.schedule(this.updateClockTime, 1);
    },

    updateClockTime: function updateClockTime() {
        this.clock.updateTimeLabel(this.time);
        this.time--;
        if (this.time < 0) {
            this.clock.node.active = false;
            this.tableStatusTimeOut();
            this.unschedule(this.updateClockTime);
        }
    },

    tableStatusTimeOut: function tableStatusTimeOut() {
        switch (this.tableStatus) {
            case Bullfight_TableStatus.E_TABLE_CLOSE_STATUS:
                //-2, //桌子关闭
                break;
            case Bullfight_TableStatus.E_TABLE_NOT_START_STATUS:
                //0,  //桌子为NULL
                break;
            case Bullfight_TableStatus.E_TABLE_READY_STATUS:
                //1,  //桌子准备
                //this.sendReady();
                break;
            case Bullfight_TableStatus.E_TABLE_CALL_STATUS:
                //2,  //叫庄
                //this.sendCallBanker(1);
                break;
            case Bullfight_TableStatus.E_TABLE_BET_STATUS:
                //3,  //下注
                //this.sendBetCoinReq(this.m_iMyBetCoin);
                break;
            case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:
                //4,  //开牌
                //this.sendOpenCard();
                break;
            case Bullfight_TableStatus.E_TABLE_OVER_STATUS:
                //5,  //游戏结束
                break;
        }
    },

    showTableStatusBtn: function showTableStatusBtn() {
        this.BtnStart.node.active = false;
        this.BtnReady.node.active = false;
        this.BtnCallBankerNode.active = false;
        //this.BetCoinNode.active  = false;
        if (GameSystem.getInstance().roomLevel == 2) {
            this.BtnBetRoomCardNode.active = false;
        } else {
            this.BtnBetNode.active = false;
        }
        this.OpenCardNode.active = false;
        this.clearCallBankerFlag();

        if (GamePlayer.getInstance().bowner == 1 && this.tableStatus == Bullfight_TableStatus.E_TABLE_NOT_START_STATUS) {
            cc.log("showTableStatusBtn bowner=", GamePlayer.getInstance().bowner);
            this.BtnStart.node.active = true;
            this.Tips.node.string = "";
        }

        if (GamePlayer.getInstance().seatid == -1) {
            cc.log("showTableStatusBtn seatid=", GamePlayer.getInstance().seatid);
            return;
        }

        cc.log("showTableStatusBtn, this.tableStatus  = " + this.tableStatus);
        cc.log("showTableStatusBtn, this.playerStatus = " + GamePlayer.getInstance().status);

        switch (this.tableStatus) {
            case Bullfight_TableStatus.E_TABLE_CLOSE_STATUS:
                //-2, //桌子关闭
                break;

            case Bullfight_TableStatus.E_TABLE_NOT_START_STATUS:
                //0,  //桌子为NULL
                if (GamePlayer.getInstance().bowner == 1) {
                    this.BtnStart.node.active = true;
                }
                break;

            case Bullfight_TableStatus.E_TABLE_READY_STATUS:
                //1,  //桌子准备
                //坐下or结束
                if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_SIT_STATUS || GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS) {
                    this.BtnReady.node.active = true;
                }
                break;

            case Bullfight_TableStatus.E_TABLE_CALL_STATUS:
                //2,  //叫庄
                // 在游戏
                if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                    this.BtnCallBankerNode.active = true;
                }
                break;

            case Bullfight_TableStatus.E_TABLE_BET_STATUS:
                //3,  //下注
                //不是庄,且在游戏
                if (this.bankerUid != GamePlayer.getInstance().uid && GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                    //this.BetCoinNode.active = true;
                    if (GameSystem.getInstance().roomLevel == 2) {
                        this.BtnBetRoomCardNode.active = true;
                    } else {
                        this.BtnBetNode.active = true;
                    }
                }
                break;

            case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:
                //4,  //开牌
                if (GamePlayer.getInstance().status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                    this.OpenCardNode.active = true;
                }
                break;

            case Bullfight_TableStatus.E_TABLE_OVER_STATUS:
                //5,  //游戏结束
                break;

            case Bullfight_TableStatus.E_TABLE_IDLE_STATUS:
                break;
        }
    },

    /************   CardItem  ************************/

    sendCardsToPlayer: function sendCardsToPlayer(viewId, cardlist) {
        this.CardItem[viewId].sendCardAnimation(cardlist);
    },

    openplayerCards: function openplayerCards(viewId, cardlist, index1, index2) {
        this.CardItem[viewId].openCardAnimation(cardlist, index1, index2);
    },

    clearAllPlayerCardItem: function clearAllPlayerCardItem() {
        for (var index = 0; index < BULLFIGHT_MAX_PLAYER; index++) {
            this.CardItem[index].clearCardItem();
        }
    },

    setCardType: function setCardType(viewId, type, bMusic) {
        this.CardItem[viewId].setCardType(type);

        if (!bMusic) {
            return;
        }

        switch (type) {
            case Bullfight_CardType.E_BULL_ZERO:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL0);
                break;
            case Bullfight_CardType.E_BULL_ONE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL1);
                break;
            case Bullfight_CardType.E_BULL_TWO:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL2);
                break;
            case Bullfight_CardType.E_BULL_THREE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL3);
                break;
            case Bullfight_CardType.E_BULL_FOUR:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL4);
                break;
            case Bullfight_CardType.E_BULL_FIVE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL5);
                break;
            case Bullfight_CardType.E_BULL_SIX:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL6);
                break;
            case Bullfight_CardType.E_BULL_SEVEN:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL7);
                break;
            case Bullfight_CardType.E_BULL_EIGHT:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL8);
                break;
            case Bullfight_CardType.E_BULL_NINE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL9);
                break;
            case Bullfight_CardType.E_BULL_PAIR:
                // MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL10);
                break;
            case Bullfight_CardType.E_BULL_BULL:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BULL10);
                break;
            case Bullfight_CardType.E_BULL_LINE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_LINE);
                break;
            case Bullfight_CardType.E_BULL_THREE_TWO:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_3AND2);
                break;
            case Bullfight_CardType.E_BULL_BOMB:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_BOMB);
                break;

            case Bullfight_CardType.E_BULL_FIVE_KING:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_5FLOWER);
                break;

            case Bullfight_CardType.E_BULL_SMALL_FIVE:
                MusicMgr.playEffect(Bullfight_AudioConfig.AUDIO_MAN_5LITTLEBULL);
                break;
            case Bullfight_CardType.E_BULL_MAX:
                break;
        }
    },

    setPlayerBetCount: function setPlayerBetCount(viewId, count) {
        this.CardItem[viewId].setPlayerBetCount(count);
    },

    setCustomCardType: function setCustomCardType(active) {
        this.CardItem[5].setCustomCardType(active);
    },

    /********** PLayer   ***************/
    delPlayer: function delPlayer(uid) {
        var it = this.findPlayer(uid);
        cc.log("Bullfight_GameScene.delPlayer,uid = " + uid + " it = " + it);
        if (it != null) {
            this.removeOnePlayerInTable(it);
            if (this.sitPlayers.containsKey(uid)) {
                cc.log("Bullfight_GameScene.delPlayer, delete uid= " + uid + " by sitPlayers");
                this.sitPlayers.delete(uid);
                if (uid == GamePlayer.getInstance().uid) {
                    cc.log("Bullfight_GameScene.delPlayer, uid= " + uid + " seatid=-1");
                    GamePlayer.getInstance().seatid = -1;
                }
            }
        }
    },

    delAllPlayer: function delAllPlayer() {
        var self = this;

        this.sitPlayers.forEach(function (ud) {
            self.removeOnePlayerInTable(ud);
        });
        GamePlayer.getInstance().seatid = -1;

        this.sitPlayers.clear();
        this.sitPlayers = new Map();
    },

    addPlayer: function addPlayer(playerinfo) {
        this.delPlayer(playerinfo.uid);
        if (this.sitPlayers.size() < this.m_iMaxPlayers) {
            if (playerinfo.uid == GamePlayer.getInstance().uid) {
                GamePlayer.getInstance().Copy(playerinfo);
                this.sitPlayers.set(GamePlayer.getInstance().uid, GamePlayer.getInstance());
                // this.refreshAllPlayerOnTable();
            } else {
                this.sitPlayers.set(playerinfo.uid, playerinfo);
                // this.showOnePlayerInTable(playerinfo);
            }
        }
    },

    refreshAllPlayerOnTable: function refreshAllPlayerOnTable(bShowDetail) {
        this.clearAllPlayerCardItem();
        this.removeAllPlayerInTable();

        this.showTableStatusBtn();

        var action = cc.sequence(cc.fadeOut(0), cc.fadeIn(0.5)).speed(0.4);
        this.PlayNode.runAction(action);

        cc.log("Bullfight_GameScene.this.sitPlayers = " + this.sitPlayers.size());
        for (var index = 0; index < this.sitPlayers.size(); index++) {
            var player = this.sitPlayers.element(index).value;
            if (player == undefined) {
                cc.log("refreshAllPlayerOnTable player is undefined.");
                continue;
            }

            this.showOnePlayerInTable(player);

            if (!bShowDetail) continue;

            var viewId = this.getPlayerViewIdBySeatId(player.seatid);

            switch (this.tableStatus) {
                case Bullfight_TableStatus.E_TABLE_READY_STATUS:
                    cc.log("E_TABLE_READY_STATUS, uid=", player.uid, " player.status=", player.status);
                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_READY_STATUS) {
                        this.refreshReadyFlag(player.uid);
                    }
                    break;

                case Bullfight_TableStatus.E_TABLE_CALL_STATUS:
                    cc.log("E_TABLE_CALL_STATUS, uid=", player.uid, " player.status=", player.status);
                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                        if (player.calltype > 0) {
                            this.refreshCallBankerFlag(player.uid, false);
                        }

                        if (player.uid == GamePlayer.getInstance().uid) {
                            this.sendCardsToPlayer(viewId, player.cards);
                        } else {
                            var cards = [0, 0, 0, 0, 0];
                            this.sendCardsToPlayer(viewId, cards);
                        }
                    }
                    break;

                case Bullfight_TableStatus.E_TABLE_BET_STATUS:
                    //3,  //下注
                    cc.log("E_TABLE_BET_STATUS, uid=", player.uid, " player.status=", player.status, " isbanker=", player.bBanker);
                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                        if (player.bBanker == 1) {
                            cc.log("E_TABLE_BET_STATUS, uid=", player.uid, " setbanker");
                            var viewId = this.getPlayerViewIdBySeatId(player.seatid);
                            this.PlayerItemPos[viewId].setPlayerBanker();
                        } else if (player.betcoinmul > 0) {
                            cc.log("E_TABLE_BET_STATUS, uid=", player.uid, " betcoinmul=", player.betcoinmul);
                            var viewId = this.getPlayerViewIdBySeatId(player.seatid);
                            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);
                        }

                        if (player.uid == GamePlayer.getInstance().uid) {
                            this.sendCardsToPlayer(viewId, player.cards);
                            if (player.bBanker == 0) {
                                this.showTableStatusBtn();
                            }
                        } else {
                            var cards = [0, 0, 0, 0, 0];
                            this.sendCardsToPlayer(viewId, cards);
                        }
                    }
                    break;

                case Bullfight_TableStatus.E_TABLE_OPEN_STATUS:
                    //4,  //开牌
                    cc.log("E_TABLE_OPEN_STATUS, uid=", player.uid, " player.status=", player.status);

                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_ACTIVE_STATUS) {
                        if (player.bBanker == 1) {
                            cc.log("E_TABLE_OPEN_STATUS, uid=", player.uid, " setbanker");
                            this.PlayerItemPos[viewId].setPlayerBanker();
                        } else if (player.betcoinmul > 0) {
                            cc.log("E_TABLE_OPEN_STATUS, uid=", player.uid, " betcoinmul=", player.betcoinmul);
                            this.setPlayerBetCount(viewId, player.betcoinmul * this.tableRuleInfo.minante);
                        }

                        if (player.uid == GamePlayer.getInstance().uid) {
                            if (player.bOpenCard == 1) {
                                this.setCardType(viewId, player.bulltype, false);
                                this.openplayerCards(viewId, player.cards, -1, -1);
                                this.setCustomCardType(false);
                                this.OpenCardNode.active = false;
                                this.Tips.string = "等待其他玩家看牌";
                            } else {
                                this.openplayerCards(viewId, player.cards, -1, -1);
                                this.showTableStatusBtn();
                                this.setCustomCardType(true);
                            }
                        } else {
                            if (player.bOpenCard == 1) {
                                this.setCardType(viewId, player.bulltype, false);
                                this.openplayerCards(viewId, player.cards, -1, -1);
                            } else {
                                var cards = [0, 0, 0, 0, 0];
                                this.sendCardsToPlayer(viewId, cards);
                            }
                        }
                    }
                    break;

                case Bullfight_TableStatus.E_TABLE_OVER_STATUS:
                    //5,  //游戏结束
                    cc.log("E_TABLE_OVER_STATUS, uid=", player.uid, " player.status=", player.status);
                    if (player.status == Bullfight_PlayerStatus.E_PLAYER_OVER_STATUS) {

                        this.PlayerItemPos[viewId].setUserWinScore(player.finalcoin);

                        if (player.uid == GamePlayer.getInstance().uid && msg.seaters[index].finalcoin > 0) {
                            var pos = this.CallBankerFlag[viewid].node.position;
                            this.GiftAnimation.playWinAnimation(pos);
                        }
                    }

                case Bullfight_TableStatus.E_TABLE_IDLE_STATUS:
                    break;
            }
        }
    },

    showOnePlayerInTable: function showOnePlayerInTable(player) {
        if (player == undefined) {
            cc.error("Bullfight_GameScene.showOnePlayerInTable , player == undefined");
            return;
        }
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        cc.log("Bullfight_GameScene.showOnePlayerInTable, seatid = " + player.seatid, " viewId = " + viewId);
        this.PlayerItemPos[viewId].updatePlayerInfo(player);
    },

    playerStandUpOrDown: function playerStandUpOrDown(player, action) {},

    removeOnePlayerInTable: function removeOnePlayerInTable(player) {
        cc.log("Bullfight_GameScene.removeOnePlayerInTable,status = " + player.status);
        var viewId = this.getPlayerViewIdBySeatId(player.seatid);
        cc.log("Bullfight_GameScene.removeOnePlayerInTable, viewId = " + viewId + ",player.seatid = " + player.seatid);
        this.PlayerItemPos[viewId].clearPlayerInfo();
    },

    removeAllPlayerInTable: function removeAllPlayerInTable() {
        for (var index = 0; index < 6; index++) {
            this.PlayerItemPos[index].clearPlayerInfo();
        }
    },

    getPlayerViewIdBySeatId: function getPlayerViewIdBySeatId(seatId) {
        var selfViewId = window.BULLFIGHT_MAX_PLAYER - 1;
        var viewId = seatId;

        if (GamePlayer.getInstance().seatid >= 0) {
            viewId = (seatId - (GamePlayer.getInstance().seatid - selfViewId) + window.BULLFIGHT_MAX_PLAYER) % window.BULLFIGHT_MAX_PLAYER;
            cc.log("Bullfight_GameScene.getPlayerViewIdBySeatId, seatId = %d,viewId = %d", seatId, viewId, " myseatid=", GamePlayer.getInstance().seatid);
        } else {
            cc.log("Bullfight_GameScene.getPlayerViewIdBySeatId, seatId = %d,viewId = %d", seatId, viewId);
        }
        return viewId;
    },

    updatePlayerStatus: function updatePlayerStatus(uid, status) {
        var player = this.sitPlayers.get(uid);
        player.status = status;
    },

    findPlayer: function findPlayer(uid) {
        var player = this.sitPlayers.get(uid);
        return player;
    },

    findPlayerBySeatid: function findPlayerBySeatid(seatid) {
        var player = null;
        this.sitPlayers.forEach(function (value) {
            if (value.seatid == seatid) {
                player = value;
            }
        });
        return player;
    },

    onPause: function onPause() {
        this._super();
    },

    onResume: function onResume() {
        this._super();
    }

});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","BaseScene":"BaseScene","Bullfight_AudioConfig":"Bullfight_AudioConfig","Bullfight_CardItem":"Bullfight_CardItem","Bullfight_Clock":"Bullfight_Clock","Bullfight_GiftAnimation":"Bullfight_GiftAnimation","Bullfight_PlayerItem":"Bullfight_PlayerItem","Cmd_Bullfight":"Cmd_Bullfight","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","Player":"Player","ToastView":"ToastView","UtilTool":"UtilTool"}],"Bullfight_GetPlayersListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2e6cclqN4tE6o/yi5AAccNS', 'Bullfight_GetPlayersListReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_GetPlayersListReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/17.
 */
var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');
function Bullfight_GetPlayersListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.US_REQ_PLAYER_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_GetPlayersListReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_GetPlayersListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e5e359nA/FDKJd6DAISco4T', 'Bullfight_GetPlayersListRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_GetPlayersListRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/17.
 */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
/*
* type US_RESP_PLAYER_LIST_T struct {
 JsonHead
 RespHead
 Actors   []ACTOR_T `json:"actors"`
 Watchers []WATCHER_T `json:"watchers"`
 }

 //参与者信息
 type ACTOR_T struct {
 Uid       uint32 `json:"uid"`
 Name      string `json:"name"`
 HeadUrl   string `json:"headurl"`
 TotalCoin int64  `json:"total"` //总带入金币
 WinCoin   int64  `json:"win"`   //输赢多少金币
 }

 //看客信息
 type WATCHER_T struct {
 Uid     uint32 `json:"uid"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 }
* */
function Bullfight_GetPlayersListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.US_RESP_PLAYER_LIST_CMD_ID;

    this.remainTime = 0;
    this.roundNum = 0;
    this.actors = [];
    this.watchers = [];
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.remainTime = msg.remaintime;
        this.roundNum = msg.roundnum;
        this.actors = msg.actors;
        this.watchers = msg.watchers;
    };
}

module.exports = Bullfight_GetPlayersListRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_GiftAnimation":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8e8d2YIHBZPLrdVn/DK/tZZ', 'Bullfight_GiftAnimation');
// Script\GameScene\Bullfight\SceneView\Bullfight_GiftAnimation.js

"use strict";

window.GiftType = cc.Enum({
    E_ROSE_GIFT: 1, //玫瑰
    E_LOVE_GIFT: 2, //爱心
    E_FOAM_GIFT: 3, //泡沫
    E_BIG_ROSE_GIFT: 4, //大朵玫瑰
    E_KETCHUP_GIFT: 5 });

cc.Class({
    extends: cc.Component,

    properties: {
        // ...
        GiftIcon: [cc.SpriteFrame],
        GiftFrame1: [cc.SpriteFrame],
        GiftFrame2: [cc.SpriteFrame],
        GiftFrame3: [cc.SpriteFrame],
        GiftFrame4: [cc.SpriteFrame],
        GiftFrame5: [cc.SpriteFrame],
        FaceFrame1: [cc.SpriteFrame],
        FaceFrame2: [cc.SpriteFrame],
        FaceFrame3: [cc.SpriteFrame],
        FaceFrame4: [cc.SpriteFrame],
        FaceFrame5: [cc.SpriteFrame],
        FaceFrame6: [cc.SpriteFrame],
        FaceFrame7: [cc.SpriteFrame],
        FaceFrame8: [cc.SpriteFrame],
        FaceFrame9: [cc.SpriteFrame],
        FaceFrame10: [cc.SpriteFrame],
        FaceFrame11: [cc.SpriteFrame],
        FaceFrame12: [cc.SpriteFrame],
        WinFrame: [cc.SpriteFrame]
    },

    // use this for initialization
    onLoad: function onLoad() {},

    playWinAnimation: function playWinAnimation(pos) {
        var node = new cc.Node();
        node.setPosition(pos);
        node.y += 200;
        var sprite = node.addComponent(cc.Sprite);
        sprite.spriteFrame = this.WinFrame[0];
        //node.position = cc.p(540,960);
        this.node.addChild(node);
        var animation = node.addComponent(cc.Animation);
        var clip = cc.AnimationClip.createWithSpriteFrames(this.WinFrame, this.WinFrame.length);
        animation.playTimes = -1;
        animation.addClip(clip, "anim");
        animation.play("anim");

        node.runAction(cc.sequence(cc.delayTime(1.5), cc.removeSelf(true)).speed(0.4));
    },

    playFaceAnimation: function playFaceAnimation(type, pos) {
        var animationFrames = [];
        if (type == 1) {
            animationFrames = this.FaceFrame1;
        } else if (type == 2) {
            animationFrames = this.FaceFrame2;
        } else if (type == 3) {
            animationFrames = this.FaceFrame3;
        } else if (type == 4) {
            animationFrames = this.FaceFrame4;
        } else if (type == 5) {
            animationFrames = this.FaceFrame5;
        } else if (type == 6) {
            animationFrames = this.FaceFrame6;
        } else if (type == 7) {
            animationFrames = this.FaceFrame7;
        } else if (type == 8) {
            animationFrames = this.FaceFrame8;
        } else if (type == 9) {
            animationFrames = this.FaceFrame9;
        } else if (type == 10) {
            animationFrames = this.FaceFrame10;
        } else if (type == 11) {
            animationFrames = this.FaceFrame11;
        } else if (type == 12) {
            animationFrames = this.FaceFrame12;
        }
        this.playAnimationByType(animationFrames, pos);
    },

    playGiftAnimation: function playGiftAnimation(giftType, start, end) {
        var animationFrames = [];
        if (giftType == 1) {
            animationFrames = this.GiftFrame1;
        } else if (giftType == 2) {
            animationFrames = this.GiftFrame2;
        } else if (giftType == 3) {
            animationFrames = this.GiftFrame3;
        } else if (giftType == 4) {
            animationFrames = this.GiftFrame4;
        } else if (giftType == 5) {
            animationFrames = this.GiftFrame5;
        }
        this.playGiftAnimationByType(animationFrames, start, end);
    },

    playAnimationByType: function playAnimationByType(Frames, pos) {
        var node = new cc.Node();
        node.setPosition(pos);
        var sprite = node.addComponent(cc.Sprite);
        sprite.spriteFrame = Frames[0];
        this.node.addChild(node);
        var animation = node.addComponent(cc.Animation);
        var clip = cc.AnimationClip.createWithSpriteFrames(Frames, Frames.length);
        animation.addClip(clip, "anim");
        animation.play("anim");

        node.runAction(cc.sequence(cc.delayTime(Frames.length * 0.2), cc.removeSelf(true)).speed(0.4));
    },

    playGiftAnimationByType: function playGiftAnimationByType(Frames, start, end) {
        var node = new cc.Node();
        node.setPosition(start);
        var sprite = node.addComponent(cc.Sprite);
        sprite.spriteFrame = Frames[0];
        this.node.addChild(node);

        var finished = cc.callFunc(function (node, Frames) {
            var animation = node.addComponent(cc.Animation);
            var clip = cc.AnimationClip.createWithSpriteFrames(Frames, Frames.length);
            animation.addClip(clip, "anim");
            animation.play("anim");
            node.runAction(cc.sequence(cc.delayTime(Frames.length * 0.4), cc.removeSelf(true)));
        }, node, Frames);

        node.runAction(cc.sequence(cc.moveTo(0.5, end), finished).speed(0.4));
    }
});

cc._RFpop();
},{}],"Bullfight_HelpReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '57983gMbEFBpprDmSIO1rnW', 'Bullfight_HelpReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_HelpReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');
function Bullfight_HelpReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_REQ_HELP_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_HelpReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_HelpRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'edf89MECARN9JzrQdnu+/3r', 'Bullfight_HelpRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_HelpRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_HelpRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_RESP_HELP_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_HelpRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_MultCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4c82fhbEGZMGbAfEsK4SESM', 'Bullfight_MultCell');
// Script\GameScene\Bullfight\PopView\Bullfight_MultCell.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');
cc.Class({
    extends: cc.Component,

    properties: {
        CardType: 0,
        CurMult: 1,
        CurPos: 0,
        FontName: cc.Label,
        Number: cc.Label,
        BtnAdd: cc.Button,
        BtnSub: cc.Button,
        BtnSpriteFrame: [cc.SpriteFrame], // 0 : 按钮用白色背景 ， 1: 按钮用黄色背景
        bClubCreate: false
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.initData();
    },

    // E_BULL_ZERO       = 0 //没牛
    // E_BULL_ONE        = 1 //牛1
    // E_BULL_TWO        = 2
    // E_BULL_THREE      = 3
    // E_BULL_FOUR       = 4
    // E_BULL_FIVE       = 5
    // E_BULL_SIX        = 6
    // E_BULL_SEVEN      = 7
    // E_BULL_EIGHT      = 8
    // E_BULL_NINE       = 9
    // E_BULL_PAIR       = 10 //牛对子
    // E_BULL_BULL       = 11 //牛牛
    // E_BULL_LINE       = 12 //牛顺子
    // E_BULL_THREE_TWO  = 13 //三带二
    // E_BULL_BOMB       = 14 //炸弹
    // E_BULL_SMALL_FIVE = 15 //五小牛
    // E_BULL_FIVE_KING  = 16 //五花牛
    // E_BULL_MAX        = 17
    initData: function initData() {
        this.CardTypeMult = [[1], [1], [1], [1], [1], [1], [1], //0~6
        [1, 2], //7
        [2, 3], //8
        [2, 3], //9
        [0], //牛对子
        [3, 4, 5], //牛牛
        [0, 4, 5, 6, 7, 8], //牛顺子
        [0, 4, 5, 6, 7, 8], //三带二
        [0, 4, 5, 6, 7, 8], //炸弹
        [0, 4, 5, 6, 7, 8], //五花牛
        [0, 4, 5, 6, 7, 8]];

        this.length = this.CardTypeMult[this.CardType].length;
        this.CurMult = this.CardTypeMult[this.CardType][0];
        this.setNumber(this.CurMult);
        this.setFontName(window.Bullfight_CardTypeName[this.CardType]);
        this.setBtnBgFrame();
    },

    getCurMult: function getCurMult() {
        return this.CurMult;
    },

    setCardType: function setCardType(cardtype) {
        this.CardType = cardtype;
        this.initData();
    },

    setFontName: function setFontName(name) {
        cc.log("Bullfight_MultCell.setFontName,name = " + name);
        this.FontName.string = name;
    },

    setNumber: function setNumber(number) {
        cc.log("Bullfight_MultCell.setNumber,number = " + number);
        this.Number.string = number;
        this.setBtnBgFrameByCurMult();
    },

    setClubCreate: function setClubCreate(bClubCreate) {
        this.bClubCreate = bClubCreate;
        cc.log("Bullfight_MultCell.setClubCreate,bClubCreate = " + bClubCreate);
        if (this.bClubCreate == false) {
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[0];
            this.BtnSub.interactable = false;
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[0];
            this.BtnAdd.interactable = false;
        }
        // else
        // {
        //     this.setBtnBgFrameByCurMult();
        // }
    },

    setBtnBgFrame: function setBtnBgFrame() {
        if (this.CardType >= window.Bullfight_CardType.E_BULL_SEVEN) {
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
        } else {
            this.BtnAdd.interactable = false;
            this.BtnSub.interactable = false;
        }

        this.setBtnBgFrameByCurMult();
    },

    setBtnBgFrameByCurMult: function setBtnBgFrameByCurMult() {
        cc.log("Bullfight_MultCell.setBtnBgFrameByCurMult,this.CurMult = " + this.CurMult);
        if (this.length <= 1) return;

        if (this.bClubCreate == false) {
            var mult = [1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 0, 3, 4, 4, 5, 5, 5];
            this.CurMult = mult[this.CardType];
            this.Number.string = mult[this.CardType];
            this.setClubCreate(this.bClubCreate);
        } else if (this.CurMult > this.CardTypeMult[this.CardType][0] && this.CurMult < this.CardTypeMult[this.CardType][this.length - 1]) {
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
            this.BtnSub.interactable = true;
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
            this.BtnAdd.interactable = true;
        } else if (this.CurMult <= this.CardTypeMult[this.CardType][0]) {
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[0];
            this.BtnSub.interactable = false;
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
            this.BtnAdd.interactable = true;
        } else {
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
            this.BtnSub.interactable = true;
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[0];
            this.BtnAdd.interactable = false;
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var btnName = event.target.getName();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        cc.log("Bullfight_Menu.callBackBtn,btnName = " + btnName);
        if (btnName == "Btn_Add") {
            this.CurPos++;
            if (this.CurPos >= this.length) {
                this.CurPos = this.length - 1;
            }
            this.CurMult = this.CardTypeMult[this.CardType][this.CurPos];
            this.setNumber(this.CurMult);
        } else if (btnName == "Btn_Sub") {
            this.CurPos--;
            if (this.CurPos < 0) {
                this.CurPos = 0;
            }
            this.CurMult = this.CardTypeMult[this.CardType][this.CurPos];
            this.setNumber(this.CurMult);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"Bullfight_NotifyGameOverOncePacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '76c1aORj9dBaZUT68d+nAx0', 'Bullfight_NotifyGameOverOncePacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyGameOverOncePacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
* //通知玩家，一局游戏结束
 type GAME_OVER_SEATERS_T struct {
 Uid       uint32 `json:"uid"`
 FinalCoin int64  `json:"finalcoin"`
 Coin      int64    `json:"coin"`
 }

 type SBF_NOTIFY_ONE_GAME_RESULT_T struct {
 JsonHead
 RespHead
 TableId  int32    `json:"tableid"`
 TStatus  int      `json:"tstatus"`
 Seaters	 []GAME_OVER_SEATERS_T  `json:"seaters"`
 }
* */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');

function Bullfight_NotifyGameOverOncePacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID;

    this.tableid = 0;
    this.tstatus = 0;
    this.overtime = 5;
    this.seaters = [];

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        this.seaters = msg.seaters;
        this.ustatus = msg.ustatus;
        this.overtime = msg.overtime;
    };
}

module.exports = Bullfight_NotifyGameOverOncePacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyGameOverTotalPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2764ajusJ9Ev400SCq2MjO3', 'Bullfight_NotifyGameOverTotalPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyGameOverTotalPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');

/*
* type SBF_NOTIFY_LAST_GAME_RESULT_T struct {
 JsonHead
 RespHead
 TableId int32                `json:"tableid"`
 Scores  []SBF_PLAYER_SCORE_T `json:"scores"`
 }

 type SBF_PLAYER_SCORE_T struct {
 Uid        int32 `json:"uid"`
 Coin       int64 `json:"coin"`
 PlayNum    int   `json:"playnum"`
 MaxWin     int   `json:"maxwin"`
 TotalCarry int64 `json:"totalcarry"`
 }
* */
function Bullfight_NotifyGameOverTotalPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID;

    this.privateid = 0;
    this.TableId = 0;
    this.Scores = [];
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.privateid = msg.privateid;
        this.TableId = msg.tableid;
        this.Scores = msg.scores;
    };
}

module.exports = Bullfight_NotifyGameOverTotalPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyGameStartPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '62877fK95FCtLemb1CNplCj', 'Bullfight_NotifyGameStartPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyGameStartPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/5.
 */

/*
* // 通知玩家游戏开始
 type GAME_START_SEATERS_T struct {
 Uid     uint32 `json:"uid"`
 UStatus int `json:"ustatus"`
 SeatId  int `json:"seatid"`
 }

 type SBF_NOTIFY_GAME_START_T struct {
 JsonHead
 UStatus  int                    `json:"ustatus"`  //自己的状态
 SeatId   int                    `json:"seatid"`
 TableId  int32                  `json:"tableid"`  //桌子ID
 TStatus  int                    `json:"tstatus"`  //桌子状态
 CallTime int                    `json:"calltime"` //抢庄时间
 Cards    []byte                 `json:"cards"`    //自己的5张牌
 Seaters  []GAME_START_SEATERS_T `json:"seaters"`
 }
 */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_NotifyGameStartPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_NOTIFY_GAME_START_CMD_ID;
    this.ustatus = 0;
    this.seatid = -1;
    this.tableid = 0;
    this.tstatus = 0;
    this.calltime = 0;
    this.cards = [];
    this.seaters = [];
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.ustatus = msg.ustatus;
        this.seatid = msg.seatid;
        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        this.calltime = msg.calltime;
        this.cards = msg.cards;
        this.seaters = msg.seaters;
        this.roundnum = msg.roundnum;
    };
}

module.exports = Bullfight_NotifyGameStartPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyKickOutPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b86ffAq4jxGpKbf6Vepu+S9', 'Bullfight_NotifyKickOutPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyKickOutPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/11.
 */

/*
* type SBF_NOTIFY_KICKOUT_T struct {
 JsonHead
 RespHead
 TableId int32   `json:"tableid"`
 SeatUid uint32  `json:"seatuid"`
 SeatId  int     `json:"seatid"`
 }

 触发场景： 1.  带入金币超时
 2. 玩家携带金币不足*/
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');

function Bullfight_NotifyKickOutPacket() {
  MessageResp.apply(this, []); //集成父类数据

  this.cmd = Cmd_Bullfight.SBF_NOTIFY_KICKOUT_CMD_ID;
  this.tableid = 0;
  this.seatuid = 0;
  this.seatid = -1;
  //接收的数据
  this.onMessage = function (msg) {

    this.seq = msg.seq;
    this.uid = msg.uid;
    this.code = msg.code;
    this.desc = msg.desc;
    this.tableid = msg.tableid;
    this.seatuid = msg.seatuid;
    this.seatid = msg.seatid;
    this.status = msg.status;
  };
}

module.exports = Bullfight_NotifyKickOutPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyNotBetPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '77ec7Y23EJG7oKc0j1GA50b', 'Bullfight_NotifyNotBetPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyNotBetPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/16.
 */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');

/*
* type SBF_NOT_BET_COIN_T struct {
 Uid        uint32  `json:"uid"`
 SeatId     int     `json:"seatid"`
 BetCoinMul int     `json:"betcoinmul"`
 }

 type SBF_NOTIFY_NOT_BET_COIN_T struct {             //没有下注的玩家
 JsonHead
 RespHead
 TableId   int32                `json:"tableid"` //桌子id
 TStatus   int                  `json:"tstatus"` //桌子状态
 Seaters   []SBF_NOT_BET_COIN_T `json:"seaters"`
 }

 * */
function Bullfight_NotifyNotBetPacket() {
  MessageResp.apply(this, []); //集成父类数据

  this.cmd = Cmd_Bullfight.SBF_NOTIFY_NOT_BET_COIN_CMD_ID;
  this.tableid = 0;
  this.tstatus = 0;
  this.seaters = [];
  //接收的数据
  this.onMessage = function (msg) {

    this.seq = msg.seq;
    this.uid = msg.uid;
    this.code = msg.code;
    this.desc = msg.desc;
    // if(this.code < SocketRetCode.RET_SUCCESS)
    //     return;
    this.tableid = msg.tableid;
    this.tstatus = msg.tstatus;
    this.seaters = msg.seaters;
  };
}

module.exports = Bullfight_NotifyNotBetPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyNotCallBankerPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b3f9cLcOARMJKX0hdXALPzi', 'Bullfight_NotifyNotCallBankerPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyNotCallBankerPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/16.
 */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');

/*
 //通知放弃操作的玩家
 type NOT_CALL_SEATER_T struct {
 Uid       uint32 `json:"uid"`
 SeatId    int    `json:"seatid"`
 }

 type SBF_NOTIFY_NOT_CALL_BANKER_T struct{
 JsonHead
 RespHead
 TableId  int32  `json:"tableid"`      //桌子id
 TStatus  int    `json:"tstatus"`      //桌子状态
 Seaters  []NOT_CALL_SEATER_T `json:"seaters"`
 }
* */
function Bullfight_NotifyNotCallBankerPacket() {
  MessageResp.apply(this, []); //集成父类数据

  this.cmd = Cmd_Bullfight.SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID;
  this.tableid = 0;
  this.tstatus = 0;
  this.Seaters = [];
  //接收的数据
  this.onMessage = function (msg) {

    this.seq = msg.seq;
    this.uid = msg.uid;
    this.code = msg.code;
    this.desc = msg.desc;
    // if(this.code < SocketRetCode.RET_SUCCESS)
    //     return;
    this.tableid = msg.tableid;
    this.tstatus = msg.tstatus;
    this.Seaters = msg.Seaters;
  };
}

module.exports = Bullfight_NotifyNotCallBankerPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifyOpenCardPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6e406wh9K5DooAJmgO5K/zp', 'Bullfight_NotifyOpenCardPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifyOpenCardPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/7.
 */

/*
* // 通知玩家开始开牌
 type SBF_NOTIFY_OPEN_CARD_T struct {
 JsonHead
 RespHead
 TableId  int32    `json:"tableid"`
 TStatus  int      `json:"tstatus"`
 UStatus  int      `json:"ustatus"`
 OpenTime int      `json:"opentime"`
 Cards    []uint16 `json:"cards"`    //自己的5张牌
 }
* */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_NotifyOpenCardPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_NOTIFY_OPEN_CARD_CMD_ID;
    //{"cmd":6619148,"seq":0,"uid":10010,"code":0,"desc":"","tableid":1,
    // "tstatus":4,"ustatus":5,"seatid":0,"opentime":20,"cards":[26,9,53,36,2]}

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        this.ustatus = msg.ustatus;
        this.opentime = msg.opentime;
        this.cards = msg.cards;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_NotifyOpenCardPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_NotifySureBankerPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '99624HjF+pLdb8cNBnK46Fx', 'Bullfight_NotifySureBankerPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_NotifySureBankerPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/5.
 */
/*
 type SBF_NOTIFY_CONFIRM_BANKER_T struct {
 JsonHead
 RespHead
 TableId  int32 `json:"tableid"`   //桌子id
 TStatus  int `json:"tstatus"`   //桌子状态
 BankerSeatId int `json:"bankerseatid"` //庄家座位id
 UStatus      int `json:"ustatus"`      //玩家自己的状态
 MaxBetMul    int `json:"maxbetmul"`    //玩家最大下注倍数
 BetTime      int `json:"bettime"`      //下注时间
 }
* */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_NotifySureBankerPacket() {
    MessageResp.apply(this, []); //集成父类数据
    //{"cmd":6619144,"seq":0,"uid":10010,"code":0,"desc":"","tableid":2,"tstatus":3,
    // "bankerseatid":1,"bankeruid":10011,"ustatus":5,"maxbetmul":25,"bettime":10}

    this.cmd = Cmd_Bullfight.SBF_NOTIFY_CONFIRM_BANKER_CMD_ID;
    this.tableid = 0;
    this.tstatus = 0;
    this.bankeruid = 0;
    this.bankerseatid = -1;
    this.ustatus = 0;
    this.maxbetmul = 0;
    this.bettime = 0;
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        this.bankeruid = msg.bankeruid;
        this.bankerseatid = msg.bankerseatid;
        this.ustatus = msg.ustatus;
        this.maxbetmul = msg.maxbetmul;
        this.bettime = msg.bettime;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_NotifySureBankerPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_OpenCardReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c107cSTQWpCZ4GXpTy0rHxs', 'Bullfight_OpenCardReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_OpenCardReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');

/*
* //看牌
 type SBF_REQ_OPEN_CARD_T struct {
 GameHead
 HasBull int      `json:"hasbull"`
 Cards   []uint16 `json:"cards"`
 }
* */

function Bullfight_OpenCardReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_REQ_OPEN_CARD_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_OpenCardReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_OpenCardRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '526a43jKadKgIiIVVTlVA94', 'Bullfight_OpenCardRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_OpenCardRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
*
* type SBF_RESP_OPEN_CARD_T struct {
 JsonHead
 RespHead
 OpenUid  int      `json:"openuid"`
 BullType int      `json:"bulltype"`
 Cards    []uint16 `json:"cards"`
 }
* */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_OpenCardRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_RESP_OPEN_CARD_CMD_ID;
    //{"cmd":6619150,"seq":10,"uid":10010,"code":0,"desc":"",
    // "openuid":10010,"bulltype":0,"cards":[12,36,19,50,33]}
    this.openuid = 0;
    this.bulltype = 0;
    this.seatid = -1;
    this.cards = [];
    this.index1 = -1;
    this.index2 = -1;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.openuid = msg.openuid;
        this.bulltype = msg.bulltype;
        this.cards = msg.cards;
        this.seatid = msg.seatid;
        this.tstatus = msg.tstatus;
        this.index1 = msg.index1;
        this.index2 = msg.index2;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_OpenCardRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_OwnerView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a5a0c1q0NNI8JWZHFoyMRe+', 'Bullfight_OwnerView');
// Script\GameScene\Bullfight\PopView\Bullfight_OwnerView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    /*********************Network***************************/

    onMessage: function onMessage(event) {
        cc.log("Bullfight_GameScene.onMessage");
        this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.US_RESP_GAME_SWITCH_CMD_ID:
                this.onDismissGame(msg);
                break;
        }
    },

    onDismissGame: function onDismissGame(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.isstart == 1) {} else {
                ToastView.show("房间解散成功，本局结束后将解散");
            }
        }
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        cc.log("Bullfight_OwnerView.callbackBtn,BtnName = " + BtnName);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnDismiss") {
            var data = {
                isstart: 0
            };
            MessageFactory.createMessageReq(US_REQ_GAME_SWITCH_CMD_ID).send(data);
            this.dismiss();
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"Bullfight_PlayerCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'dd03e3wx+RPqKzhivLGvZQN', 'Bullfight_PlayerCell');
// Script\GameScene\Bullfight\PopView\Bullfight_PlayerCell.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        InfoLabel: [cc.Label]
    },

    // use this for initialization
    onLoad: function onLoad() {},

    updatePlayerScore: function updatePlayerScore(text0, text1, text2, text3, size) {
        this.InfoLabel[0].string = text0;
        this.InfoLabel[1].string = text1;
        this.InfoLabel[2].string = text2;

        var winCoin = Number(text3);
        if (winCoin > 0) {
            this.InfoLabel[3].string = "+" + winCoin;
            this.InfoLabel[3].node.color = cc.Color.RED;
        } else if (winCoin == 0) {
            this.InfoLabel[3].string = winCoin;
            this.InfoLabel[3].node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.InfoLabel[3].string = winCoin;
            this.InfoLabel[3].node.color = cc.Color.GREEN;
        }
    },

    updatePlayerScoreCell: function updatePlayerScoreCell(text1, text2, text3, size) {
        this.InfoLabel[0].string = text1;
        this.InfoLabel[1].string = text2;

        var winCoin = Number(text3);
        if (winCoin > 0) {
            this.InfoLabel[2].string = "+" + winCoin;
            this.InfoLabel[2].node.color = cc.Color.RED;
        } else if (winCoin == 0) {
            this.InfoLabel[2].string = winCoin;
            this.InfoLabel[2].node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.InfoLabel[2].string = winCoin;
            this.InfoLabel[2].node.color = cc.Color.GREEN;
        }

        this.InfoLabel[3].string = Number(text2) + Number(text3);

        for (var i = 0; i <= this.InfoLabel.length; i++) {
            this.InfoLabel[i].fontSize = size;
        }
    }
});

cc._RFpop();
},{}],"Bullfight_PlayerItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bbb92wxt6VKepRUVDer6qKI', 'Bullfight_PlayerItem');
// Script\GameScene\Bullfight\SceneView\Bullfight_PlayerItem.js

'use strict';

var MessageFactory = require("MessageFactory");
var MusicMgr = require('MusicMgr');
var Audio_Comm = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var GameSystem = require("GameSystem");
var Bullfight_AudioConfig = require('Bullfight_AudioConfig');

cc.Class({
    extends: cc.Component,

    properties: {
        seatFlag: 0, //0:没有玩家坐下，1:已经有玩家坐下
        seatId: 0,
        userHead: cc.Sprite,
        userNick: cc.Label,
        userGold: cc.Label,
        winScoreBg: cc.Sprite,
        winScore: cc.Label,
        bankerFlag: cc.Sprite,
        bankerLight: cc.Sprite,
        TimeBar: cc.ProgressBar,
        win_animation: cc.Sprite,
        UserInfoView: cc.Prefab,
        YouWin: cc.Sprite,
        DefaultHead: cc.SpriteFrame
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.initBaseData();
    },

    initBaseData: function initBaseData() {
        this.BankerFlagPos = this.bankerFlag.node.getPosition();
        this.winScoreBgPos = this.bankerFlag.node.getPosition();
        //this.player = null;
    },

    setUserHead: function setUserHead(Spriteframe) {
        //cc.log('Bullfight_PlayerItem.setUserHead')
        this.userHead.spriteFrame = Spriteframe;
    },

    setUserNick: function setUserNick(nick) {
        //cc.log('Bullfight_PlayerItem.setUserHead, nick = ' + nick);
        this.userNick.string = nick;
    },

    setUserGold: function setUserGold(gold) {
        //cc.log('Bullfight_PlayerItem.setUserGold, gold = ' + gold);
        this.userGold.string = gold;
        this.userGold.node.color = cc.Color.WHITE;
    },

    setUserWaitCarry: function setUserWaitCarry() {
        this.userGold.string = "携带中..";
        this.userGold.node.color = new cc.Color(204, 160, 41, 255);
    },

    setUserWinScore: function setUserWinScore(score) {
        this.winScore.string = score;
        this.winScoreBg.node.active = true;
        this.winScoreBg.getComponent(cc.Animation).play("WinScoreAni");
    },

    clearUserWinScore: function clearUserWinScore() {
        //cc.log("Bullfight_PlayerItem.clearUserWinScore");
        this.winScoreBg.node.active = false;
    },

    getSeatIdByViewId: function getSeatIdByViewId(viewId) {
        var selfViewId = window.BULLFIGHT_MAX_PLAYER - 1;
        var seatId = viewId;

        if (GamePlayer.getInstance().seatid >= 0) {
            seatId = (viewId - selfViewId + GamePlayer.getInstance().seatid + window.BULLFIGHT_MAX_PLAYER) % window.BULLFIGHT_MAX_PLAYER;
        }
        cc.log("********getSeatIdByViewId viewId=", viewId, " seatId=", seatId);
        return seatId;
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        var btnName = event.target.getName();
        cc.log("Bullfight_PlayerItem.callbackBtn,btnName = " + btnName);

        MusicMgr.playEffect(Audio_Comm.AUDIO_BTN_CLICK);

        if (btnName = "Bg") {
            if (this.seatFlag == 0) {
                var seatid = this.getSeatIdByViewId(this.seatId);
                cc.log("Bullfight_PlayerItem.callbackBtn,this.seatId = " + seatid);
                var data = {
                    status: 1,
                    seatid: seatid
                };
                MessageFactory.createMessageReq(window.US_REQ_SIT_DOWN_CMD_ID).send(data);
                MusicMgr.playEffect(Audio_Comm.AUDIO_SIT);
            } else {
                //显示玩家信息
                var UserInfoView = cc.instantiate(this.UserInfoView);
                cc.director.getScene().addChild(UserInfoView);
                UserInfoView.setPosition(cc.p(cc.director.getVisibleSize().width / 2, cc.director.getVisibleSize().height / 2));
                UserInfoView.getComponent("Bullfight_UserInfo").setPlayerInfo(this.player);
            }
        }
    },

    setPlayerBanker: function setPlayerBanker() {
        this.bankerFlag.node.active = true;
        this.bankerLight.node.active = true;
    },

    clearPlayerBanker: function clearPlayerBanker() {
        this.bankerFlag.node.active = false;
        this.bankerLight.node.active = false;
    },

    clearPlayerInfo: function clearPlayerInfo() {
        //cc.log("Bullfight_GameScene.clearPlayerInfo, seatId= " + this.seatId);
        this.setUserNick("");
        this.setUserGold(0);
        this.clearUserWinScore();
        this.userHead.node.active = false;
        this.seatFlag = 0;
        this.bankerFlag.node.active = false;
        this.userHead.spriteFrame = this.DefaultHead;
    },

    updatePlayerInfo: function updatePlayerInfo(player) {

        this.player = player;

        this.userHead.node.active = true;

        this.setUserNick(player.name);

        if (player.coin > 0) {
            this.setUserGold(player.coin);
        } else {
            this.setUserWaitCarry();
        }

        UpdateWXHeadIcon(player.headurl, this.userHead);

        this.seatFlag = 1;
    },

    getPointByAngle: function getPointByAngle(startpoint, angle, radius) {

        if (angle <= 90 && angle >= 0) {
            return cc.p(startpoint.x + Math.sin(angle) * radius, startpoint.y - (radius - Math.cos(angle) * radius));
        } else if (angle > 90 && angle <= 180) {
            cc.p(startpoint.x + Math.sin(180 - angle) * radius, startpoint.y - (radius - Math.cos(180 - angle) * radius - radius));
        } else if (angle > 180 && angle <= 270) {
            cc.p(startpoint.x - Math.sin(270 - angle) * radius, startpoint.y - (radius - Math.cos(270 - angle) * radius - radius));
        } else if (angle > 270 && angle < 360) {
            return cc.p(startpoint.x - Math.sin(360 - angle) * radius, startpoint.y - (radius - Math.cos(360 - angle) * radius));
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","Bullfight_AudioConfig":"Bullfight_AudioConfig","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"Bullfight_Playerlist":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3e36eFRKRdBILdZUXMidzMX', 'Bullfight_Playerlist');
// Script\GameScene\Bullfight\PopView\Bullfight_Playerlist.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var Cmd_Bullfight = require('Cmd_Bullfight');
var GamePlayer = require('GamePlayer');

cc.Class({
    extends: BasePop,

    properties: {

        ScrollActors: cc.ScrollView,
        //ScrollWatchers : cc.ScrollView,

        PlayerCell: cc.Prefab,
        TouristCell: cc.Prefab,
        WatcherTitle: cc.Node,
        ActorTitle: cc.Node,
        WatcherCount: cc.Label,
        RoundNum: cc.Label,
        timeLabel: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        this._super();
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("stop event");
            self.dismiss();
        }.bind(this));
        this.runIn();
        MessageFactory.createMessageReq(Cmd_Bullfight.US_REQ_PLAYER_LIST_CMD_ID).send();
    },

    /*********************Network***************************/

    onMessage: function onMessage(event) {
        cc.log("Bullfight_PlayerList.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case Cmd_Bullfight.US_RESP_PLAYER_LIST_CMD_ID:
                this.onGetPlayersList(msg);
                break;
        }
    },

    onGetPlayersList: function onGetPlayersList(msg) {
        cc.log("Bullfight_PlayerList.onGetPlayersList");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.setTableInfo(msg.remainTime, msg.roundNum);
            var height = 0;

            height = this.refreshActors(msg.actors);
            height = this.refreshWatchers(msg.watchers, height);

            if (height > this.ScrollActors.content.height) {
                this.ScrollActors.content.height = height;
            }
        }
    },

    /*
    * //参与者信息
     type ACTOR_T struct {
     Uid       uint32 `json:"uid"`
     Name      string `json:"name"`
     HeadUrl   string `json:"headurl"`
     TotalCoin int64  `json:"total"` //总带入金币
     WinCoin   int64  `json:"win"`   //输赢多少金币
     }
    * */
    refreshActors: function refreshActors(actors) {

        cc.log("Bullfight_PlayerList.refreshActors");
        var totalHeight = 100;

        this.ActorTitle.active = true;

        if (actors) {
            var actorsHeight = 0;
            for (var index = 0; actors && index < actors.length; index++) {
                var item = cc.instantiate(this.PlayerCell);
                actorsHeight = item.getContentSize().height;
                item.setPosition(cc.p(0, -index * item.getContentSize().height - item.getContentSize().height * 1.5));
                this.ScrollActors.content.addChild(item);

                var coin = actors[index].total + actors[index].win;
                item.getComponent("Bullfight_PlayerCell").updatePlayerScore(actors[index].name, actors[index].total, coin, actors[index].win);
            }

            totalHeight += (actors && actors.length > 0 ? this.ActorTitle.getContentSize(true).height : 0) + actors.length * actorsHeight;
        }

        return totalHeight;
    },

    /*
    *  //看客信息
     type WATCHER_T struct {
     Uid     uint32 `json:"uid"`
     Name    string `json:"name"`
     HeadUrl string `json:"headurl"`
     }
    * */
    refreshWatchers: function refreshWatchers(watchers, totalHeight) {
        cc.log("Bullfight_PlayerList.refreshWatchers,totalHeight = " + totalHeight);
        this.WatcherTitle.position = cc.p(this.WatcherTitle.position.x, this.WatcherTitle.position.y - totalHeight);
        this.WatcherTitle.active = true;
        this.WatcherCount.string = watchers.length;

        var watcherHeight = 0;
        for (var index = 0; watchers && index < watchers.length; index++) {
            var item = cc.instantiate(this.TouristCell);
            watcherHeight = item.getContentSize().height;

            item.setPosition(cc.p(item.getContentSize().width / 2 + index % 3 * item.getContentSize().width - this.ScrollActors.content.getContentSize(true).width / 2, -totalHeight - item.getContentSize().height * parseInt(index / 3) - item.getContentSize().height / 2 - (this.WatcherTitle.getContentSize().height + 5)));

            this.ScrollActors.content.addChild(item);
            item.getComponent("Bullfight_Tourist").updateInfo(watchers[index].headurl, watchers[index].name);
        }

        totalHeight += this.WatcherTitle.getContentSize().height;
        if (watchers) {
            totalHeight += (watchers.length + 1) * watcherHeight;
        }
        return totalHeight;
    },

    setTableInfo: function setTableInfo(time, roundNum) {

        this.RoundNum.string = "第" + roundNum + "手";
        this.timeLabel.string = this.getTime(time);
    },

    getTime: function getTime(vTime) {
        var time = Number(vTime);
        var hour = parseInt(time / 60 / 60);
        var min = parseInt((time - 3600 * hour) / 60);
        var second = time - 3600 * hour - 60 * min;

        cc.log("getTime hour=", hour, " min=", min, " second=", second);

        return this.getTimeData(hour) + ":" + this.getTimeData(min) + ":" + this.getTimeData(second);
    },

    getTimeData: function getTimeData(time) {
        return (Array(2).join(0) + time).slice(-2);
    },

    runIn: function runIn() {
        this.bg.runAction(cc.moveBy(0.4, cc.p(this.bg.getContentSize().width, 0)));
    }
});

cc._RFpop();
},{"BasePop":"BasePop","Cmd_Bullfight":"Cmd_Bullfight","GamePlayer":"GamePlayer","MessageFactory":"MessageFactory"}],"Bullfight_ReadyReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '238b3wQJyROQr67m4gxG72J', 'Bullfight_ReadyReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_ReadyReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/5.
 */

/*
* //准备游戏 (SBF_REQ_READY_CMD_ID)
 type SBF_REQ_READY_T struct {
 GameHead
 }
 */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');
function Bullfight_ReadyReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_REQ_READY_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid

        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_ReadyReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_ReadyRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '88cedZ9oBlC/alSJKwZCP6E', 'Bullfight_ReadyRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_ReadyRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/5.
 */

/*
* type SBF_RESP_READY_T struct {
 JsonHead
 RespHead
 SeatId  int    `json:"seatid"`
 Uid     uint32 `json:"uid"`
 UStatus int    `json:"ustatus"`
 TableId int    `json:"tableid"`
 TStatus int    `json:"tstatus"`
 }
* */
var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_ReadyRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.SBF_RESP_READY_CMD_ID;
    this.seatid = -1;
    this.readyuid = 0;
    this.ustatus = 0;
    this.tableid = 0;
    this.tstatus = 0;
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.seatid = msg.seatid;
        this.readyuid = msg.readyuid;
        this.ustatus = msg.ustatus;
        this.tableid = msg.tableid;
        this.tstatus = msg.tstatus;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_ReadyRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_RoomInfo":[function(require,module,exports){
"use strict";
cc._RFpush(module, '097ccsalOFAfa4idcXcTS0e', 'Bullfight_RoomInfo');
// Script\GameScene\Bullfight\PopView\Bullfight_RoomInfo.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        RoomInfo: [cc.Label],
        RoomMult: [cc.Label],
        RootNode: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("stop event");
            self.dismiss();
            MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        }.bind(this));
        this.runIn();
    },

    runIn: function runIn() {
        this.bg.runAction(cc.moveBy(0.4, cc.p(this.bg.getContentSize().width, 0)));
    },

    setRoomInfo: function setRoomInfo(tableRuleInfo) {
        if (tableRuleInfo.gametype == 1) {
            this.RoomInfo[1].string = "闭牌抢庄";
        } else {
            this.RoomInfo[1].string = "三张抢庄";
        }

        this.RoomInfo[2].string = tableRuleInfo.minante;
        if (tableRuleInfo.livetime < 1800) {
            this.RoomInfo[3].string = tableRuleInfo.livetime / 60 + "分钟";
        } else {
            this.RoomInfo[3].string = tableRuleInfo.livetime / 3600 + "小时";
        }

        this.RoomInfo[4].string = tableRuleInfo.seats;

        for (var index = 0; index < this.RoomMult.length; index++) {
            this.RoomMult[index].string = tableRuleInfo.bullmul[index];
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"Bullfight_RuleView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0150cRmGrpKpabvcGdsi+vY', 'Bullfight_RuleView');
// Script\GameScene\Bullfight\PopView\Bullfight_RuleView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    onLoad: function onLoad() {
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("stop event");
            MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
            self.dismiss();
        }.bind(this));
        this.runIn();
    },

    callBackBtn: function callBackBtn() {
        this.dismiss();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    runIn: function runIn() {
        cc.log(this.bg.getContentSize().width);
        this.bg.runAction(cc.moveBy(0.4, cc.p(this.bg.getContentSize().width, 0)));
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"Bullfight_TableDetailReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4dad3d6295KMqyi02ugo2UJ', 'Bullfight_TableDetailReqPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Req\Bullfight_TableDetailReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

var MessageReq = require("MessageReq");
var Cmd_Bullfight = require('Cmd_Bullfight');
var GameSystem = require('GameSystem');

function Bullfight_TableDetailReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = Bullfight_TableDetailReqPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"Bullfight_TableDetailRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e085cRy+i1KKZBRTGgGrk/H', 'Bullfight_TableDetailRespPacket');
// Script\GameScene\Bullfight\Cmd\Cmd_Resp\Bullfight_TableDetailRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */

/*
*
* /桌子详情
 type US_RESP_TABLE_DETAIL_T struct {
 JsonHead
 RespHead
 Param string `json:"param"` //base64
 }
 type DETAIL_SEATER_T struct {
 Uid            uint32   `json:"uid"`
 Name           string   `json:"name"`
 HeadUrl        string   `json:"headurl"`
 Sex            int      `json:"sex"`
 Gold           int      `json:"gold"`
 Diamond        int      `json:"diamond"`
 Coin           int      `json:"coin"`      //现在身上带入的金币
 TotalCarryCoin int      `json:"total"`     //总带入金币
 WinCoin        int      `json:"win"`       //输赢多少金币
 SeatId         int8     `json:"seatid"`    //座位id
 Status         int      `json:"status"`    //桌上玩家状态
 CallType       int8     `json:"calltype"`  //抢庄类型
 MaxBetMul      int      `json:"maxbetmul"` //最大下注倍数
 BetMul         int      `json:"betmul"`    //下注倍数
 BhaveCard      bool     `json:"bhavecard"` //是否有牌
 BopenCard      bool     `json:"bopencard"` //是否开牌
 Cards          []uint16 `json:"cards"`     //牌数据
 BullType       int      `json::bulltype:`  //牛牛类型
 FinalCoin      int      `json:"finalcoin"` //这一局输赢结果
 }

 //进入桌子返回
 type SBF_DETAIL_TABLE_T struct {
 TableId    int32             `json:"tableid"`    //桌子ID
 TableName  string            `json:"name"`       //桌子名称
 GameType   int32             `json:"gametype"`   //桌子类型(闭牌抢庄,四张抢庄)
 MinAnte    int               `json:"minante"`    //最小下注
 MinCarry   int               `json:"mincarry"`   //最小带入
 LiveTime   int64             `json:"livetime"`   //桌子总时间
 RemainTime int64             `json:"remaintime"` //剩余时间
 Bstart     int8              `json:"bstart"`     //桌子是否开始
 Seats      int               `json:"seats"`      //座位数
 BullMul    []int32           `json:"bullmul"`    //倍率
 Bowner     int8              `json:"bowner"`     //是否是桌主
 Bsitdown   int8              `json:"bsitdown"`   //是否入座
 Tstatus    int               `json:"tstatus"`    //桌子状态
 Timeout    int               `json:"timeout"`    //桌子处于某个状态下的剩余时间
 RoundNum   int               `json:"roundnum"`   //当前第几手牌
 BankerUid  uint32            `json:"bankeruid"`  //庄家UID
 Seaters    []DETAIL_SEATER_T `json:"seaters"`    //桌位上的玩家信息
 }
* */

var MessageResp = require('MessageResp');
var Cmd_Bullfight = require('Cmd_Bullfight');
function Bullfight_TableDetailRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = Cmd_Bullfight.US_RESP_TABLE_DETAIL_CMD_ID;
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        cc.log("Bullfight_TableDetailRespPacket,param = " + BASE64.decoder(msg.param));
        var json = JSON.parse(BASE64.decoder(msg.param));
        this.privateid = json.privateid;
        this.tableid = json.tableid;
        this.name = json.name;
        this.gametype = json.gametype;
        this.carrycoin = json.carrycoin;
        this.minante = json.minante;
        this.mincarry = json.mincarry;
        this.maxcarry = json.maxcarry;
        this.livetime = json.livetime;
        this.remaintime = json.remaintime;
        this.bstart = json.bstart;
        this.seats = json.seats;
        this.bullmul = json.bullmul;
        this.bowner = json.bowner;
        this.bsitdown = json.bsitdown;
        this.tstatus = json.tstatus;
        this.timeout = json.timeout;
        this.roundnum = json.roundnum;
        this.bankeruid = json.bankeruid;
        this.seaters = json.seaters;
        this.totalcarry = json.totalcarry;
    };
}

module.exports = Bullfight_TableDetailRespPacket;

cc._RFpop();
},{"Cmd_Bullfight":"Cmd_Bullfight","MessageResp":"MessageResp"}],"Bullfight_TotalResultCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6e7d1457/tJRLcthclLXM/5', 'Bullfight_TotalResultCell');
// Script\GameScene\Bullfight\PopView\Bullfight_TotalResultCell.js

"use strict";

/**
 * Created by lixiaofei on 17/6/4.
 */
cc.Class({
    extends: cc.Component,

    properties: {
        InfoLabel: [cc.Label]
    },

    // use this for initialization
    onLoad: function onLoad() {},

    updatePlayerScoreCell: function updatePlayerScoreCell(text1, text2, text3, size) {
        this.InfoLabel[0].string = text1;
        this.InfoLabel[1].string = text2;

        var winCoin = Number(text3);
        if (winCoin > 0) {
            this.InfoLabel[2].string = "+" + winCoin;
            this.InfoLabel[2].node.color = cc.Color.RED;
        } else if (winCoin == 0) {
            this.InfoLabel[2].string = winCoin;
            this.InfoLabel[2].node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.InfoLabel[2].string = winCoin;
            this.InfoLabel[2].node.color = cc.Color.GREEN;
        }

        this.InfoLabel[3].string = Number(text2) + Number(text3);

        for (var i = 0; i <= 3; i++) {
            this.InfoLabel[i].fontSize = size;
        }
    }
});

cc._RFpop();
},{}],"Bullfight_TotalResult":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b5eaciE36xFN5RbJEMVUiIc', 'Bullfight_TotalResult');
// Script\GameScene\Bullfight\PopView\Bullfight_TotalResult.js

'use strict';

var Bullfight_PlayerCell = require('Bullfight_PlayerCell');
var BasePop = require('BasePop');
var GamePlayer = require('GamePlayer');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var UtilTool = require('UtilTool');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        LabelTitle: cc.Label,
        LabelCoin: cc.Label,
        LabelRoundnum: cc.Label,
        LabelwinMax: cc.Label,
        LabelallCarry: cc.Label,
        scrollView: cc.ScrollView,
        PlayerCell: cc.Prefab,
        Head: cc.Sprite,
        BtnShare: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {
        this.initBaseData();
        //this.setGameData();
        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
            this.BtnShare.active = false;
        }
    },

    initBaseData: function initBaseData() {
        this.coin = 0;
        this.roundnum = 0;
        this.winMax = 0;
        this.allCarry = 0;
        this.roomId = 0;
        this.ShareImagePath = "";
        this.Canvas = null;
    },

    callBackBtnClose: function callBackBtnClose() {
        this.dismiss();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        cc.director.loadScene('HallScene');
    },

    callBackBtnShare: function callBackBtnShare() {
        var message = {
            popView: "Bullfight_TotalResult",
            btn: "BtnShare"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });

        // var self = this;
        // this.ShareImagePath = UtilTool.captureScreen("TotalResult.png",this.Canvas,function(filePath){
        //     var shareView = cc.instantiate(self.ShareView);
        //     self.node.addChild(shareView);
        //     shareView.setPosition(cc.p(0,0));
        //     var string = "游戏结算分享";
        //     shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_IMAGE,filePath,"www.baidu.com");
        // });
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    /**
     *  Uid        int32 `json:"uid"`
     Coin       int64 `json:"coin"`
     PlayNum    int   `json:"playnum"`
     MaxWin     int   `json:"maxwin"`
     TotalCarry int64 `json:"totalcarry"`
     * */
    setGameData: function setGameData(msg, canvas) {
        this.Canvas = canvas;

        this.LabelTitle.string = "总结算(" + msg.privateid + ")";
        var scores = msg.Scores;
        var cellheight = 0;
        for (var index = 0; index < scores.length; index++) {
            var item = cc.instantiate(this.PlayerCell);
            item.setPosition(cc.p(0, -index * item.getContentSize().height - item.getContentSize().height / 2));
            this.scrollView.content.addChild(item);

            if (scores[index].uid == GamePlayer.getInstance().uid) {
                this.coin = scores[index].wincoin;
                this.roundnum = scores[index].playnum;
                this.winMax = scores[index].maxwin;
                this.allCarry = scores[index].totalcarry;
            }

            cellheight = item.getContentSize().height;
            item.getComponent("Bullfight_TotalResultCell").updatePlayerScoreCell(scores[index].name, scores[index].totalcarry, scores[index].wincoin, 50);
        }

        if (scores.length * cellheight > this.scrollView.content.height) {
            this.scrollView.content.height = scores.length * cellheight;
        }
        this.updateMySelfInfo();

        //this.node.runAction(cc.sequence(cc.delayTime(1.0),cc.callFunc(this.ShootScreen,this)));
    },

    updateMySelfInfo: function updateMySelfInfo() {
        var winCoin = Number(this.coin);
        if (winCoin > 0) {
            this.LabelCoin.string = "+" + winCoin;
            this.LabelCoin.node.color = cc.Color.RED;
        } else if (winCoin == 0) {
            this.LabelCoin.string = winCoin;
            this.LabelCoin.node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.LabelCoin.string = winCoin;
            this.LabelCoin.node.color = cc.Color.GREEN;
        }
        this.LabelRoundnum.string = this.roundnum;
        this.LabelwinMax.string = this.winMax;
        this.LabelallCarry.string = this.allCarry;
        UpdateWXHeadIcon(GamePlayer.getInstance().headurl, this.Head);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","Bullfight_PlayerCell":"Bullfight_PlayerCell","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"Bullfight_Tourist":[function(require,module,exports){
"use strict";
cc._RFpush(module, '05f54XRBfFHJY01Unx8J+r3', 'Bullfight_Tourist');
// Script\GameScene\Bullfight\PopView\Bullfight_Tourist.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        Head: cc.Sprite,
        Name: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    updateInfo: function updateInfo(url, name) {
        if (url != "") UpdateWXHeadIcon(url, this.Head);
        this.Name.string = name;
        this.Name.fontsize = 40;
    }
});

cc._RFpop();
},{}],"Bullfight_UserInfo":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a9271QR8HRIJ6ewxtQtPy/r', 'Bullfight_UserInfo');
// Script\GameScene\Bullfight\PopView\Bullfight_UserInfo.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
var ToastView = require('ToastView');

cc.Class({
    extends: BasePop,

    properties: {
        NickName: cc.Label,
        PlayerUid: cc.Label,
        Gold: cc.Label,
        Diamond: cc.Label,
        TableCount: cc.Label,
        RoundCount: cc.Label,
        GiftCost: [cc.Label],
        SexSprite: cc.Sprite,
        Head: cc.Sprite,
        SexFrame: [cc.SpriteFrame]
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.player = null;
    },

    setPlayerInfo: function setPlayerInfo(player) {
        this.player = player;
        this.NickName.string = player.name;
        this.PlayerUid.string = player.uid;
        this.Gold.string = player.gold;
        this.Diamond.string = player.diamond;
        this.RoundCount.string = player.TotalRound; //总手数
        this.TableCount.string = player.TotalTable; //总局数
        UpdateWXHeadIcon(player.headurl, this.Head);

        cc.log("onSitDown player.TotalRound=", player.TotalRound, " player.TotalTable=", player.TotalTable);

        for (var i = 0; i < this.GiftCost.length; i++) {
            this.GiftCost[i].string = GameSystem.getInstance().giftCost[i].Gold;
        }
        var sex = player.sex - 1 > 0 ? player.sex - 1 : 0;
        this.SexSprite.spriteFrame = this.SexFrame[sex];
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else {
            if (GamePlayer.getInstance().seatid == -1) {
                ToastView.show("您没有坐下不能发送礼物");
                return;
            }

            MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
            var data = {
                touid: this.player.uid,
                kind: ChatType.E_CHAT_GIFT_KIND,
                type: Number(CustomEventData),
                text: ""
            };
            MessageFactory.createMessageReq(US_REQ_GAME_CHAT_CMD_ID).send(data);
            this.dismiss();
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ButtonScaler":[function(require,module,exports){
"use strict";
cc._RFpush(module, '00d670MeVBBGazy/lKbleRQ', 'ButtonScaler');
// Script\Comm\ButtonScaler.js

'use strict';

//var AudioManager = require('AudioManager');
var GameSystem = require('GameSystem');

cc.Class({
    extends: cc.Component,

    properties: {
        pressedScale: 0.9,
        transDuration: 0.05,

        playColseEffect: false
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.m_tmLastClicked = 0;
        this.m_DelayInteractable = false; //延时不可点击
        this.countTime = 0;

        this.pressedScale = 0.9;
        this.transDuration = 0.03;
        var self = this;

        self.initScale = this.node.scale;
        self.button = self.getComponent(cc.Button);
        self.scaleDownAction = cc.scaleTo(self.transDuration, self.pressedScale);
        self.scaleUpAction = cc.scaleTo(self.transDuration, self.initScale);
        function onTouchDown(event) {
            if (!self.button.interactable || self.m_DelayInteractable) {
                return;
            }
            this.stopAllActions();
            this.runAction(self.scaleDownAction);

            if (self.playColseEffect) {
                //AudioManager.playEffect("resources/common/music/click_close.mp3") ;
            } else {
                    //AudioManager.playEffect("resources/common/music/click.mp3") ;
                }

            if (self.isDelayHandleEvent()) {
                cc.log("----------------isDelayHandleEvent-------");
                self.button.interactable = false;
                self.m_DelayInteractable = true;
            }
        }
        function onTouchUp(event) {
            if (!self.button.interactable) {
                return;
            }
            this.stopAllActions();
            this.runAction(self.scaleUpAction);
        }
        this.node.on('touchstart', onTouchDown, this.node);
        this.node.on('touchend', onTouchUp, this.node);
        this.node.on('touchcancel', onTouchUp, this.node);
    },

    update: function update(dt) {
        if (this.m_DelayInteractable) {
            this.countTime += dt;
            // cc.log("-----------m_DelayInteractable------------" + this.countTime);
            if (this.countTime > 0.5) {
                this.countTime = 0;
                this.button.interactable = true;
                this.m_DelayInteractable = false;
            }
        }
    },

    //延时处理
    isDelayHandleEvent: function isDelayHandleEvent(iDelaySeconds) {
        //1秒钟只能点击一次
        if (iDelaySeconds == undefined) {
            iDelaySeconds = 600;
        }
        var tmNow = GameSystem.getInstance().getCurrentSystemTime();
        if (tmNow - this.m_tmLastClicked <= iDelaySeconds) {
            return true;
        }
        this.m_tmLastClicked = tmNow;
        return false;
    }
});

cc._RFpop();
},{"GameSystem":"GameSystem"}],"CarryCoinReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd1572mlCjtCj6Gq8w3e0cqT', 'CarryCoinReqPacket');
// Script\Network\Cmd\Cmd_Req\CarryCoinReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/3.
 */
var MessageReq = require("MessageReq");
var GameSystem = require('GameSystem');

function CarryCoinReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CARRY_COIN_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("CarryCoinReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            coin: msg.coin
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = CarryCoinReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"CarryCoinRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b0e342Ob85Ei6pRrJIJ/G1Q', 'CarryCoinRespPacket');
// Script\Network\Cmd\Cmd_Resp\CarryCoinRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/3.
 */
var MessageResp = require("MessageResp");

function CarryCoinRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CARRY_COIN_CMD_ID;
    this.carryuid = 0;
    this.coin = 0;
    this.carrycoin = 0;
    this.gold = 0;
    this.diamond = 0;
    this.ustatus = 0;
    this.tstatus = 0;

    //接收的数据
    this.onMessage = function (msg) {
        cc.log("CarryCoinRespPacket.onMesssage");
        //{"cmd":6553608,"seq":0,"uid":10006,"code":0,"desc":"执行成功","carryuid":10006,"carrycoin":100}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        this.carryuid = msg.carryuid;
        this.carrycoin = msg.carrycoin;
        this.ustatus = msg.ustatus;
        this.tstatus = msg.tstatus;
        this.coin = msg.coin;
        this.gold = msg.gold;
        this.diamond = msg.diamond;
    };
}

module.exports = CarryCoinRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ChatReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f045ap6/epEyITg5+Z3DAGy', 'ChatReqPacket');
// Script\Network\Cmd\Cmd_Req\ChatReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */

var MessageReq = require("MessageReq");
var GameSystem = require("GameSystem");
/*
* const (
 E_CHAT_TEXT_MSG = 1 //是文本聊天
 E_CHAT_GIFT_MSG   = 2 //是表情
 )

 const (
 E_ROSE_GIFT     = 1 //玫瑰
 E_LOVE_GIFT     = 2 //爱心
 E_FOAM_GIFT     = 3 //泡沫
 E_BIG_ROSE_GIFT = 4 //大朵玫瑰
 E_KETCHUP_GIFT  = 5 //番茄酱
 )

 ToUid uint32 `json:"touid"`
 Kind  int    `json:"kind"`
 Type  int    `json:"type"` //具体某个礼物or某个表情(具体表情索引客户端自定义)
 Text  string `json:"text"` //文字or语音内容
* **/

window.ChatType = cc.Enum({
    E_CHAT_WORD_KIND: 1, //文字
    E_CHAT_GIFT_KIND: 2, //礼物
    E_CHAT_FACE_KIND: 3, //表情
    E_CHAT_VOICE_KIND: 4 });

window.GiftType = cc.Enum({
    E_ROSE_GIFT: 1, //玫瑰
    E_LOVE_GIFT: 2, //爱心
    E_FOAM_GIFT: 3, //泡沫
    E_BIG_ROSE_GIFT: 4, //大朵玫瑰
    E_KETCHUP_GIFT: 5 });

function ChatReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_GAME_CHAT_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("ChatReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            touid: msg.touid,
            kind: msg.kind,
            type: msg.type,
            text: msg.text
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ChatReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ChatRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '470a0D1DjFD4o81Pp2qjEpO', 'ChatRespPacket');
// Script\Network\Cmd\Cmd_Resp\ChatRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");
/*
* type US_RESP_GAME_CHAT_T struct {
 JsonHead
 RespHead
 romUid    uint32 `json:"fromuid"`
 FromSeatId int    `json:"fromseatid"` //如果不是在桌位上
 ToUid      uint32 `json:"touid"`
 ToSeatId   int    `json:"toseatid"`
 Kind       int    `json:"kind"`
 Type       int    `json:"type"` //具体某个礼物or某个表情
 Text       string `json:"text"` //文字or语音内容
 }
* */
function ChatRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_GAME_CHAT_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.fromuid = msg.fromuid;
        this.fromseatid = msg.fromseatid;
        this.touid = msg.touid;
        this.toseatid = msg.toseatid;
        this.kind = msg.kind;
        this.type = msg.type;
        this.text = msg.text;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ChatRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ChineseCity":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7170amKuPBEv5sEPX7mXbBt', 'ChineseCity');
// Script\ComScene\PopView\ChineseCity.js

'use strict';

/**
 * Created by shrimp on 17/4/1.
 */
var pc = new Object();
pc['北京市'] = new Array('朝阳区', '海淀区', '通州区', '房山区', '丰台区', '昌平区', '大兴区', '顺义区', '西城区', '延庆县', '石景山区', '宣武区', '怀柔区', '崇文区', '密云县', '东城区', '平谷区', '门头沟区');
pc['广东省'] = new Array('东莞市', '广州市', '中山市', '深圳市', '惠州市', '江门市', '珠海市', '汕头市', '佛山市', '湛江市', '河源市', '肇庆市', '清远市', '潮州市', '韶关市', '揭阳市', '阳江市', '梅州市', '云浮市', '茂名市', '汕尾市');
pc['山东省'] = new Array('济南市', '青岛市', '临沂市', '济宁市', '菏泽市', '烟台市', '淄博市', '泰安市', '潍坊市', '日照市', '威海市', '滨州市', '东营市', '聊城市', '德州市', '莱芜市', '枣庄市');
pc['江苏省'] = new Array('苏州市', '徐州市', '盐城市', '无锡市', '南京市', '南通市', '连云港市', '常州市', '镇江市', '扬州市', '淮安市', '泰州市', '宿迁市');
pc['河南省'] = new Array('郑州市', '南阳市', '新乡市', '安阳市', '洛阳市', '信阳市', '平顶山市', '周口市', '商丘市', '开封市', '焦作市', '驻马店市', '濮阳市', '三门峡市', '漯河市', '许昌市', '鹤壁市', '济源市');
pc['上海市'] = new Array('松江区', '宝山区', '金山区', '嘉定区', '南汇区', '青浦区', '浦东新区', '奉贤区', '徐汇区', '静安区', '闵行区', '黄浦区', '杨浦区', '虹口区', '普陀区', '闸北区', '长宁区', '崇明县', '卢湾区');
pc['河北省'] = new Array('石家庄市', '唐山市', '保定市', '邯郸市', '邢台市', '河北区', '沧州市', '秦皇岛市', '张家口市', '衡水市', '廊坊市', '承德市');
pc['浙江省'] = new Array('温州市', '宁波市', '杭州市', '台州市', '嘉兴市', '金华市', '湖州市', '绍兴市', '舟山市', '丽水市', '衢州市');
pc['香港特别行政区'] = new Array('香港');
pc['陕西省'] = new Array('西安市', '咸阳市', '宝鸡市', '汉中市', '渭南市', '安康市', '榆林市', '商洛市', '延安市', '铜川市');
pc['湖南省'] = new Array('长沙市', '邵阳市', '常德市', '衡阳市', '株洲市', '湘潭市', '永州市', '岳阳市', '怀化市', '郴州市', '娄底市', '益阳市', '张家界市', '湘西州');
pc['重庆市'] = new Array('江北区', '渝北区', '沙坪坝区', '九龙坡区', '万州区', '永川市', '南岸区', '酉阳县', '北碚区', '涪陵区', '秀山县', '巴南区', '渝中区', '石柱县', '忠县', '合川市', '大渡口区', '开县', '长寿区', '荣昌县', '云阳县', '梁平县', '潼南县', '江津市', '彭水县', '綦江县', '璧山县', '黔江区', '大足县', '巫山县', '巫溪县', '垫江县', '丰都县', '武隆县', '万盛区', '铜梁县', '南川市', '奉节县', '双桥区', '城口县');
pc['福建省'] = new Array('漳州市', '厦门市', '泉州市', '福州市', '莆田市', '宁德市', '三明市', '南平市', '龙岩市');
pc['天津市'] = new Array('和平区', '北辰区', '河北区', '河西区', '西青区', '津南区', '东丽区', '武清区', '宝坻区', '红桥区', '大港区', '汉沽区', '静海县', '塘沽区', '宁河县', '蓟县', '南开区', '河东区');
pc['云南省'] = new Array('昆明市', '红河州', '大理州', '文山州', '德宏州', '曲靖市', '昭通市', '楚雄州', '保山市', '玉溪市', '丽江地区', '临沧地区', '思茅地区', '西双版纳州', '怒江州', '迪庆州');
pc['四川省'] = new Array('成都市', '绵阳市', '广元市', '达州市', '南充市', '德阳市', '广安市', '阿坝州', '巴中市', '遂宁市', '内江市', '凉山州', '攀枝花市', '乐山市', '自贡市', '泸州市', '雅安市', '宜宾市', '资阳市', '眉山市', '甘孜州');
pc['广西壮族自治区'] = new Array('贵港市', '玉林市', '北海市', '南宁市', '柳州市', '桂林市', '梧州市', '钦州市', '来宾市', '河池市', '百色市', '贺州市', '崇左市', '防城港市');
pc['安徽省'] = new Array('芜湖市', '合肥市', '六安市', '宿州市', '阜阳市', '安庆市', '马鞍山市', '蚌埠市', '淮北市', '淮南市', '宣城市', '黄山市', '铜陵市', '亳州市', '池州市', '巢湖市', '滁州市');
pc['海南省'] = new Array('三亚市', '海口市', '琼海市', '文昌市', '东方市', '昌江县', '陵水县', '乐东县', '保亭县', '五指山市', '澄迈县', '万宁市', '儋州市', '临高县', '白沙县', '定安县', '琼中县', '屯昌县');
pc['江西省'] = new Array('南昌市', '赣州市', '上饶市', '吉安市', '九江市', '新余市', '抚州市', '宜春市', '景德镇市', '萍乡市', '鹰潭市');
pc['湖北省'] = new Array('武汉市', '宜昌市', '襄樊市', '荆州市', '恩施州', '黄冈市', '孝感市', '十堰市', '咸宁市', '黄石市', '仙桃市', '天门市', '随州市', '荆门市', '潜江市', '鄂州市', '神农架林区');
pc['山西省'] = new Array('太原市', '大同市', '运城市', '长治市', '晋城市', '忻州市', '临汾市', '吕梁市', '晋中市', '阳泉市', '朔州市');
pc['辽宁省'] = new Array('大连市', '沈阳市', '丹东市', '辽阳市', '葫芦岛市', '锦州市', '朝阳市', '营口市', '鞍山市', '抚顺市', '阜新市', '盘锦市', '本溪市', '铁岭市');
pc['台湾省'] = new Array('台北市', '高雄市', '台中市', '新竹市', '基隆市', '台南市', '嘉义市');
pc['黑龙江'] = new Array('齐齐哈尔市', '哈尔滨市', '大庆市', '佳木斯市', '双鸭山市', '牡丹江市', '鸡西市', '黑河市', '绥化市', '鹤岗市', '伊春市', '大兴安岭地区', '七台河市');
pc['内蒙古自治区'] = new Array('赤峰市', '包头市', '通辽市', '呼和浩特市', '鄂尔多斯市', '乌海市', '呼伦贝尔市', '兴安盟', '巴彦淖尔盟', '乌兰察布盟', '锡林郭勒盟', '阿拉善盟');
pc['澳门特别行政区'] = new Array('澳门');
pc['贵州省'] = new Array('贵阳市', '黔东南州', '黔南州', '遵义市', '黔西南州', '毕节地区', '铜仁地区', '安顺市', '六盘水市');
pc['甘肃省'] = new Array('兰州市', '天水市', '庆阳市', '武威市', '酒泉市', '张掖市', '陇南地区', '白银市', '定西地区', '平凉市', '嘉峪关市', '临夏回族自治州', '金昌市', '甘南州');
pc['青海省'] = new Array('西宁市', '海西州', '海东地区', '海北州', '果洛州', '玉树州', '黄南藏族自治州');
pc['新疆维吾尔自治区'] = new Array('乌鲁木齐市', '伊犁州', '昌吉州', '石河子市', '哈密地区', '阿克苏地区', '巴音郭楞州', '喀什地区', '塔城地区', '克拉玛依市', '和田地区', '阿勒泰州', '吐鲁番地区', '阿拉尔市', '博尔塔拉州', '五家渠市', '克孜勒苏州', '图木舒克市');
pc['西藏区'] = new Array('拉萨市', '山南地区', '林芝地区', '日喀则地区', '阿里地区', '昌都地区', '那曲地区');
pc['吉林省'] = new Array('吉林市', '长春市', '白山市', '延边州', '白城市', '松原市', '辽源市', '通化市', '四平市');
pc['宁夏回族自治区'] = new Array('银川市', '吴忠市', '中卫市', '石嘴山市', '固原市');

cc._RFpop();
},{}],"ClubAddView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '85ef8GbgKJEpJ+DgpWRslnH', 'ClubAddView');
// Script\ComScene\PopView\ClubAddView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var ToastView = require('ToastView');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            cc.log("ClubAddView.onLoad : stop event");
            self.dismiss();
        }.bind(this));
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubAddView.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "NewClub") {
            if (GamePlayer.getInstance().SelfClubId > 0) {
                ToastView.show("您已经建立了一个俱乐部,目前不支持多个");
                this.dismiss();
                return;
            }

            var message = {
                popView: "ClubAddView",
                btn: "NewClub"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "AddClub") {
            var message = {
                popView: "ClubAddView",
                btn: "AddClub"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        }
        this.dismiss();
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ClubAreaCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2615aj9aCBAJLbUiktdYxqZ', 'ClubAreaCell');
// Script\ComScene\PopView\ClubAreaCell.js

'use strict';

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        AreaName: cc.Label,
        BtnFlag: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.name = "";
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubAreaCell.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "ClubAreaCell") {}
    },

    setAreaCellInfo: function setAreaCellInfo(name, iCount) {
        this.name = name;
        this.AreaName.string = name;
        if (iCount <= 0) {
            this.BtnFlag.node.active = false;
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","MusicMgr":"MusicMgr"}],"ClubAreaView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3b1e63VP9pLoLG+Jp2o+s/R', 'ClubAreaView');
// Script\ComScene\PopView\ClubAreaView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

var pc = new Object();
pc['北京市'] = new Array('朝阳区', '海淀区', '通州区', '房山区', '丰台区', '昌平区', '大兴区', '顺义区', '西城区', '延庆县', '石景山区', '宣武区', '怀柔区', '崇文区', '密云县', '东城区', '平谷区', '门头沟区');
pc['广东省'] = new Array('东莞市', '广州市', '中山市', '深圳市', '惠州市', '江门市', '珠海市', '汕头市', '佛山市', '湛江市', '河源市', '肇庆市', '清远市', '潮州市', '韶关市', '揭阳市', '阳江市', '梅州市', '云浮市', '茂名市', '汕尾市');
pc['山东省'] = new Array('济南市', '青岛市', '临沂市', '济宁市', '菏泽市', '烟台市', '淄博市', '泰安市', '潍坊市', '日照市', '威海市', '滨州市', '东营市', '聊城市', '德州市', '莱芜市', '枣庄市');
pc['江苏省'] = new Array('苏州市', '徐州市', '盐城市', '无锡市', '南京市', '南通市', '连云港市', '常州市', '镇江市', '扬州市', '淮安市', '泰州市', '宿迁市');
pc['河南省'] = new Array('郑州市', '南阳市', '新乡市', '安阳市', '洛阳市', '信阳市', '平顶山市', '周口市', '商丘市', '开封市', '焦作市', '驻马店市', '濮阳市', '三门峡市', '漯河市', '许昌市', '鹤壁市', '济源市');
pc['上海市'] = new Array('松江区', '宝山区', '金山区', '嘉定区', '南汇区', '青浦区', '浦东新区', '奉贤区', '徐汇区', '静安区', '闵行区', '黄浦区', '杨浦区', '虹口区', '普陀区', '闸北区', '长宁区', '崇明县', '卢湾区');
pc['河北省'] = new Array('石家庄市', '唐山市', '保定市', '邯郸市', '邢台市', '河北区', '沧州市', '秦皇岛市', '张家口市', '衡水市', '廊坊市', '承德市');
pc['浙江省'] = new Array('温州市', '宁波市', '杭州市', '台州市', '嘉兴市', '金华市', '湖州市', '绍兴市', '舟山市', '丽水市', '衢州市');
pc['香港'] = new Array('香港');
pc['陕西省'] = new Array('西安市', '咸阳市', '宝鸡市', '汉中市', '渭南市', '安康市', '榆林市', '商洛市', '延安市', '铜川市');
pc['湖南省'] = new Array('长沙市', '邵阳市', '常德市', '衡阳市', '株洲市', '湘潭市', '永州市', '岳阳市', '怀化市', '郴州市', '娄底市', '益阳市', '张家界市', '湘西州');
pc['重庆市'] = new Array('江北区', '渝北区', '沙坪坝区', '九龙坡区', '万州区', '永川市', '南岸区', '酉阳县', '北碚区', '涪陵区', '秀山县', '巴南区', '渝中区', '石柱县', '忠县', '合川市', '大渡口区', '开县', '长寿区', '荣昌县', '云阳县', '梁平县', '潼南县', '江津市', '彭水县', '綦江县', '璧山县', '黔江区', '大足县', '巫山县', '巫溪县', '垫江县', '丰都县', '武隆县', '万盛区', '铜梁县', '南川市', '奉节县', '双桥区', '城口县');
pc['福建省'] = new Array('漳州市', '厦门市', '泉州市', '福州市', '莆田市', '宁德市', '三明市', '南平市', '龙岩市');
pc['天津市'] = new Array('和平区', '北辰区', '河北区', '河西区', '西青区', '津南区', '东丽区', '武清区', '宝坻区', '红桥区', '大港区', '汉沽区', '静海县', '塘沽区', '宁河县', '蓟县', '南开区', '河东区');
pc['云南省'] = new Array('昆明市', '红河州', '大理州', '文山州', '德宏州', '曲靖市', '昭通市', '楚雄州', '保山市', '玉溪市', '丽江地区', '临沧地区', '思茅地区', '西双版纳州', '怒江州', '迪庆州');
pc['四川省'] = new Array('成都市', '绵阳市', '广元市', '达州市', '南充市', '德阳市', '广安市', '阿坝州', '巴中市', '遂宁市', '内江市', '凉山州', '攀枝花市', '乐山市', '自贡市', '泸州市', '雅安市', '宜宾市', '资阳市', '眉山市', '甘孜州');
pc['广西'] = new Array('贵港市', '玉林市', '北海市', '南宁市', '柳州市', '桂林市', '梧州市', '钦州市', '来宾市', '河池市', '百色市', '贺州市', '崇左市', '防城港市');
pc['安徽省'] = new Array('芜湖市', '合肥市', '六安市', '宿州市', '阜阳市', '安庆市', '马鞍山市', '蚌埠市', '淮北市', '淮南市', '宣城市', '黄山市', '铜陵市', '亳州市', '池州市', '巢湖市', '滁州市');
pc['海南省'] = new Array('三亚市', '海口市', '琼海市', '文昌市', '东方市', '昌江县', '陵水县', '乐东县', '保亭县', '五指山市', '澄迈县', '万宁市', '儋州市', '临高县', '白沙县', '定安县', '琼中县', '屯昌县');
pc['江西省'] = new Array('南昌市', '赣州市', '上饶市', '吉安市', '九江市', '新余市', '抚州市', '宜春市', '景德镇市', '萍乡市', '鹰潭市');
pc['湖北省'] = new Array('武汉市', '宜昌市', '襄樊市', '荆州市', '恩施州', '黄冈市', '孝感市', '十堰市', '咸宁市', '黄石市', '仙桃市', '天门市', '随州市', '荆门市', '潜江市', '鄂州市', '神农架林区');
pc['山西省'] = new Array('太原市', '大同市', '运城市', '长治市', '晋城市', '忻州市', '临汾市', '吕梁市', '晋中市', '阳泉市', '朔州市');
pc['辽宁省'] = new Array('大连市', '沈阳市', '丹东市', '辽阳市', '葫芦岛市', '锦州市', '朝阳市', '营口市', '鞍山市', '抚顺市', '阜新市', '盘锦市', '本溪市', '铁岭市');
pc['台湾省'] = new Array('台北市', '高雄市', '台中市', '新竹市', '基隆市', '台南市', '嘉义市');
pc['黑龙江'] = new Array('齐齐哈尔市', '哈尔滨市', '大庆市', '佳木斯市', '双鸭山市', '牡丹江市', '鸡西市', '黑河市', '绥化市', '鹤岗市', '伊春市', '大兴安岭地区', '七台河市');
pc['内蒙古'] = new Array('赤峰市', '包头市', '通辽市', '呼和浩特市', '鄂尔多斯市', '乌海市', '呼伦贝尔市', '兴安盟', '巴彦淖尔盟', '乌兰察布盟', '锡林郭勒盟', '阿拉善盟');
pc['澳门'] = new Array('澳门');
pc['贵州省'] = new Array('贵阳市', '黔东南州', '黔南州', '遵义市', '黔西南州', '毕节地区', '铜仁地区', '安顺市', '六盘水市');
pc['甘肃省'] = new Array('兰州市', '天水市', '庆阳市', '武威市', '酒泉市', '张掖市', '陇南地区', '白银市', '定西地区', '平凉市', '嘉峪关市', '临夏回族自治州', '金昌市', '甘南州');
pc['青海省'] = new Array('西宁市', '海西州', '海东地区', '海北州', '果洛州', '玉树州', '黄南藏族自治州');
pc['新疆'] = new Array('乌鲁木齐市', '伊犁州', '昌吉州', '石河子市', '哈密地区', '阿克苏地区', '巴音郭楞州', '喀什地区', '塔城地区', '克拉玛依市', '和田地区', '阿勒泰州', '吐鲁番地区', '阿拉尔市', '博尔塔拉州', '五家渠市', '克孜勒苏州', '图木舒克市');
pc['西藏区'] = new Array('拉萨市', '山南地区', '林芝地区', '日喀则地区', '阿里地区', '昌都地区', '那曲地区');
pc['吉林省'] = new Array('吉林市', '长春市', '白山市', '延边州', '白城市', '松原市', '辽源市', '通化市', '四平市');
pc['宁夏'] = new Array('银川市', '吴忠市', '中卫市', '石嘴山市', '固原市');

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...

        scrollview: cc.ScrollView,
        AreaCell: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.updateProvinceArea();
        this.ProvinceName = "";
        this.CityName = "";
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubAreaView.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "") {}
    },

    updateCityArea: function updateCityArea() {
        this.scrollview.content.removeAllChildren(true);
        var index = 0;
        var cellHeight = 0;
        for (var index = 0; index < pc[this.ProvinceName].length; index++) {
            var AreaCell = cc.instantiate(this.AreaCell);
            this.scrollview.content.addChild(AreaCell);
            cellHeight = AreaCell.getContentSize().height;
            AreaCell.setPosition(cc.p(0, 0 - cellHeight * (index + 0.5)));
            AreaCell.getComponent("ClubAreaCell").setAreaCellInfo(pc[this.ProvinceName][index], 0);
            AreaCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                cc.log("stop event" + event.target.getComponent("ClubAreaCell").name);

                var message = {
                    popView: "ClubAreaView",
                    btn: "ClubAreaCell",
                    area: this.ProvinceName + " " + event.target.getComponent("ClubAreaCell").name
                };
                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
                this.dismiss();
            }.bind(this));
        }
    },

    updateProvinceArea: function updateProvinceArea() {
        this.scrollview.content.removeAllChildren(true);
        var index = 0;
        var cellHeight = 0;
        for (var name in pc) {
            cc.log("ClubAreaView.updateProvinceArea,name = " + name);
            var AreaCell = cc.instantiate(this.AreaCell);
            this.scrollview.content.addChild(AreaCell);
            cellHeight = AreaCell.getContentSize().height;
            AreaCell.setPosition(cc.p(0, 0 - cellHeight * (index + 0.5)));
            AreaCell.getComponent("ClubAreaCell").setAreaCellInfo(name, pc[name].length);
            index++;
            AreaCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                cc.log("stop event" + event.target.getComponent("ClubAreaCell").name);
                this.ProvinceName = event.target.getComponent("ClubAreaCell").name;
                this.updateCityArea();
            }.bind(this));
        }

        if (this.scrollview.content.height < cellHeight * index) {
            this.scrollview.content.height = cellHeight * index;
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"ClubCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a2f3dsnImtOUq6HP2gz7Z22', 'ClubCell');
// Script\ComScene\PopView\ClubCell.js

"use strict";

var GamePlayer = require('GamePlayer');

cc.Class({
    extends: cc.Component,

    properties: {
        ClubAddress: cc.Label,
        ClubIcon: cc.Sprite,
        ClubName: cc.Label,
        ClubPresons: cc.Label,
        ClubAddress2: cc.Label,
        ClubIntro: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.info = null;
    },

    setClubCellInfo: function setClubCellInfo(info) {
        //{"clubid":10000019,"role":1,"owneruid":10688,"level":1,"name":"as",
        // "headurl":"","address":"广西 百色市","intro":"","endtime":1494324197,"status":1,
        // "members":1,"maxmember":10}
        if (GamePlayer.getInstance().uid == info.owneruid) {
            GamePlayer.getInstance().SelfClubId = info.clubid;
        }

        cc.log("ClubCell.setClubCellInfo clubid=", info.clubid, " owneruid=", info.owneruid);

        this.info = info;
        this.ClubAddress.string = info.address;
        this.ClubAddress2.string = info.address;
        this.ClubName.string = info.name;
        this.ClubPresons.string = info.members + "/" + info.maxmember;
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        cc.log("ClubCell.callBackBtn");
    }
});

cc._RFpop();
},{"GamePlayer":"GamePlayer"}],"ClubCreateRoomReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4f3a7irWINGDoVRNPGXSUBI', 'ClubCreateRoomReqPacket');
// Script\Network\Cmd\Cmd_Req\ClubCreateRoomReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/23.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
/*
* type US_REQ_CREATE_TABLE_T struct {
 JsonHead
 ClubId        int    `json:"clubid"`                     //俱乐部id, 如果玩家创建，=0
 ClubLevel int    `json:"clublevel"`             //俱乐部level, 如果玩家创建，=0
 GameId      uint16 `json:"gameid"`             //服务器id (六人桌抢庄=101)
 GameLevel uint16 `json:"gamelevel"`     //游戏等级,暂时无
 Param          string `json:"param"`		      //base64之后的参数
 }
 //六人牛牛私人桌参数
 type SBF_PRIVATE_TABLE_PARAM_T struct {
 PayMode   int     `json:"paymode"`  //付费模式 (默认钻石)
 GameType  int32   `json:"gametype"` //闭牌抢庄,三张抢庄(二选一)
 MinAnte   int     `json:"mixante"`  //最小下注
 LiveTime  int64   `json:"livetime"` //桌子使用时间(秒)
 Seats     int8    `json:"seats"`    //座位数
 TableName string  `json:"name"`     //桌子名称
 BullMul   []int32 `json:"bullmul"`  //从无牛开始，传一个数组
 }
* */

function ClubCreateRoomReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_CREATE_TABLE_CMD_ID;

    //准备发送的数据
    this.send = function (msg, type) {
        cc.log("CreateRoomReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: type.clubid,
            clublevel: type.clublevel,
            gameid: type.gameid,
            gamelevel: type.gamelevel,
            param: BASE64.encoder(JSON.stringify(msg))
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubCreateRoomReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ClubCreateRoomRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1051eB1YdJOAo1gdaSvnSNC', 'ClubCreateRoomRespPacket');
// Script\Network\Cmd\Cmd_Resp\ClubCreateRoomRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/23.
 */

var MessageResp = require("MessageResp");
/*
*
* type US_RESP_CREATE_TABLE_T struct {
 JsonHead
 RespHead
 ClubId     int    `json:"clubid"`           //如果是普通玩家，=0
 ClubLevel  int    `json:"clublevel"`  //俱乐部等级
 PrivateIds []int  `json:"privateids"` //如果ret_success, privateIds[0]是新生成的6位数值，
 //如果RET_FULL_PRIVATE_TABLE = -48 代表您创建的私人桌已经达到上线,
 //	privateids是所以创建过的6位数, 界面提示玩家已经创建了哪些私人桌
 GameId     uint16 `json:"gameid"`
 GameLevel  uint16 `json:"gamelevel"`
 GameSvcId  uint32 `json:"gamesvcid"` //游戏服务器ID
 TableId    int32  `json:"tableid"`   //游戏中某张桌子ID
 }*/
function ClubCreateRoomRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_CREATE_TABLE_CMD_ID;
    this.privateid = 0; //六位数的桌子ID(房间)
    this.gamesvcid = 0; //游戏服务器ID
    this.tableid = 0; //游戏中某张桌子ID
    this.gamelevel = 1;
    this.gameid = 0;
    //接收的数据
    this.onMessage = function (msg) {
        //{"cmd":196616,"seq":1,"uid":10042,"code":0,"desc":"执行成功","privateid":354967,"gamesvcid":5,"tableid":0}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.gameid = msg.gameid;
        this.clubid = msg.clubid;
        this.clublevel = msg.clublevel;
        this.privateid = msg.privateids;
        this.gamesvcid = msg.gamesvcid;
        this.tableid = msg.tableid;
        this.gamelevel = msg.gamelevel;
        this.gameid = msg.gameid;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubCreateRoomRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ClubCreateView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd49b3/bUbNIS7Kg0JSUclS0', 'ClubCreateView');
// Script\ComScene\PopView\ClubCreateView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        AreaView: cc.Prefab,
        AreaString: cc.Label,
        ClubName: cc.EditBox
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;

        if (msg.popView == "ClubAreaView") {
            if (msg.btn == "ClubAreaCell") {
                this.AreaString.string = msg.area;
                //cc.director.loadScene("LoadingScene");
            }
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log('ClubCreateView.callBackBtn,BtnName = ' + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnCreate") {
            if (this.AreaString.string == "" || this.ClubName.string == "") {
                ToastView.show("俱乐部名字或地址不能为空");
                return;
            }
            var data = {
                name: this.ClubName.string,
                headurl: "",
                address: this.AreaString.string,
                level: 1,
                intro: ""
            };
            MessageFactory.createMessageReq(window.US_REQ_CREATE_CLUB_CMD_ID).send(data);
            this.dismiss();
        } else if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnPosition") {
            var AreaView = cc.instantiate(this.AreaView);
            this.node.addChild(AreaView);
            AreaView.setPosition(cc.p(0, 0));
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ClubDelMemberReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3f2546jijJEsJ3DZ3BSXxQF', 'ClubDelMemberReqPacket');
// Script\Network\Cmd\Cmd_Req\ClubDelMemberReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/9.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
/*
* type CLUB_REQ_OWNER_RM_MEMBER_T struct {
 ClubHead
 Param PARAM_REQ_OWNER_RM_MEMBER_T `json:"param"`
 }
 type PARAM_REQ_OWNER_RM_MEMBER_T struct {
 Uid uint32 `json:"uid"`
 }*/
function ClubDelMemberReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_OWNER_RM_MEMBER_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("ClubDelMemberReqPacket.send");

        var data = {
            uid: msg.uid
        };

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid,
            param: data
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubDelMemberReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ClubDelMemberRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '146d8HVN+1FxI+CsOfPqVAw', 'ClubDelMemberRespPacket');
// Script\Network\Cmd\Cmd_Resp\ClubDelMemberRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/9.
 */
/*
*
   type CLUB_RESP_OWNER_RM_MEMBER_T struct {
        JsonHead
        RespHead
        Param PARAM_RESP_OWNER_RM_MEMBER_T `json:"param"`
    }

    type PARAM_RESP_OWNER_RM_MEMBER_T struct {
        ClubId   int    `json:"clubid"`
        ClubName string `json:"clubname"`
        Uid      uint32 `json:"uid"`
        Name     string `json:"name"`
    }
 */
var MessageResp = require('MessageResp');
function ClubDelMemberRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.param = msg.param;
    };
}

module.exports = ClubDelMemberRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ClubFindPopView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9166e0c7nVPPLneopiy8cbH', 'ClubFindPopView');
// Script\ComScene\PopView\ClubFindPopView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        EditBox: cc.EditBox
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callBackBtn: function callBackBtn(event, CustomEventData) {

        var BtnName = event.target.getName();
        cc.log('ClubCreateView.callBackBtn,BtnName = ' + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnFind") {
            var data = {
                key: this.EditBox.string
            };
            MessageFactory.createMessageReq(US_REQ_SEARCH_CLUB_CMD_ID).send(data);
            this.dismiss();
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"ClubInfoView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ee0eb2F2w1J+L1sHWYXRLzv', 'ClubInfoView');
// Script\ComScene\PopView\ClubInfoView.js

'use strict';

var BasePop = require('BasePop');
var UtilTool = require('UtilTool');
var MessageFactory = require('MessageFactory');
var LoadingView = require('LoadingView');
var ToastView = require('ToastView');
var GamePlayer = require('GamePlayer');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameCallOC = require('GameCallOC');
var AlertView = require("AlertView");
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        ClubTitle: cc.Label, //俱乐部Title
        ClubName: cc.Label, //俱乐部名称
        ClubPersons: cc.Label,
        ClubHead: cc.Sprite,
        ClubAdress: cc.Label,
        ClubOwner: cc.Label,
        ClubMemberHead: [cc.Sprite],
        ClubMemHeadBg: [cc.Sprite],
        ClubOwnerHead: cc.Sprite,
        ClubId: cc.Label,
        ClubTime: cc.Label,
        ClubIntroDoc: cc.RichText,
        ClubMember: cc.Prefab,
        ClubSetView: cc.Prefab,
        ShareView: cc.Prefab,
        ClubLevel: cc.Label,
        ClubLevelView: cc.Prefab,
        ccccc: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        // for (var i = 0; i < 4; i++) {
        //     this.ClubMemHeadBg[i].node.active = false;
        // }
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("ClubInfoView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.CLUB_RESP_DISMISS_CLUB_CMD_ID:
                this.onDismissClubMsg(msg);
                break;

            case CLUB_RESP_GET_MEMBER_LIST_CMD_ID:
                this.onGetClubMember(msg);
                break;

            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:
                this.onDelMemberMsg(msg);
                break;

        }
    },

    onGetClubMember: function onGetClubMember(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            GamePlayer.getInstance().CurClubMemList = msg.list;
            this.setHeadUrlList();
        }
    },

    onDelMemberMsg: function onDelMemberMsg(msg) {
        cc.log("ClubInfoView.onDelMemberMsg msg=", msg);
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.param.uid == GamePlayer.getInstance().uid) {
                //如果是我自己
                this.dismiss();
                cc.log("ClubInfoView.onDismissClubMsg notify ClubRoomView");
                var message = {
                    popView: "ClubInfoView",
                    btn: "onDismissClubMsg"
                };

                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            } else {
                this.sendGetMemberList();
            }
        }
    },

    onDismissClubMsg: function onDismissClubMsg(msg) {
        cc.log("ClubInfoView.onDismissClubMsg msg=", msg);
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.param.role == window.ClubRole.E_CLUB_OWNER_ROLE) {

                ToastView.show("群主" + msg.param.name + "解散了" + msg.param.clubname) + "俱乐部";

                LoadingView.dismiss();

                this.dismiss();

                cc.log("ClubInfoView.onDismissClubMsg notify ClubRoomView");
                var message = {
                    popView: "ClubInfoView",
                    btn: "onDismissClubMsg"
                };

                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            } else if (msg.param.uid == GamePlayer.getInstance().uid) {
                //如果是我自己

                ToastView.show("您退出俱乐部" + msg.param.clubname + "成功");

                LoadingView.dismiss();

                this.dismiss();

                cc.log("ClubInfoView.onDismissClubMsg notify ClubRoomView");
                var message = {
                    popView: "ClubInfoView",
                    btn: "onDismissClubMsg"
                };

                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            } else {
                //如果是其他玩家,重新刷新一下用户头像
                ToastView.show(msg.param.name + "退出俱乐部" + msg.param.clubname);
                this.sendGetMemberList();
            }
        }
    },

    ///////////////////////Scene/////////////////////////
    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        if (msg.popView == "ClubSetView" || msg.popView == "ClubMemberView") {
            if (msg.btn == "BtnClose") {
                this.setTextInfo();
                this.setHeadUrlList();
            }
        }
    },

    //[{"clubid":10000019,"role":1,"owneruid":10688,"level":1, "name":"as",
    // "headurl":"","address":"广西 百色市","intro":"","endtime":1494324197,"status":1,
    // "members":1, "maxmember":10}]
    setTextInfo: function setTextInfo() {
        cc.log("ClubInfoView.setTextInfo info=", GamePlayer.getInstance().CurClubInfo);

        this.ClubTitle.string = GamePlayer.getInstance().CurClubInfo.name;
        this.ClubName.string = GamePlayer.getInstance().CurClubInfo.name;
        this.ClubPersons.string = GamePlayer.getInstance().CurClubInfo.members + "/" + GamePlayer.getInstance().CurClubInfo.maxmember;
        this.ClubAdress.string = GamePlayer.getInstance().CurClubInfo.address;
        this.ClubOwner.string = GamePlayer.getInstance().CurClubInfo.ownername;
        this.ClubId.string = GamePlayer.getInstance().CurClubInfo.clubid;
        this.ClubIntroDoc.string = GamePlayer.getInstance().CurClubInfo.intro;
        // this.ClubMemberHead.length = GamePlayer.getInstance().CurClubInfo.members;
        this.ClubTime.string = /*"创建于" + UtilTool.getFormatData(GamePlayer.getInstance().CurClubInfo.createtime) + "  "
                                +*/UtilTool.getFormatData(GamePlayer.getInstance().CurClubInfo.endtime) + "到期";
        this.ClubLevel.string = this.getClubLevelName(GamePlayer.getInstance().CurClubInfo.level);
    },

    setHeadUrlList: function setHeadUrlList() {
        var list = GamePlayer.getInstance().CurClubMemList;
        if (list == null || list.length == 0) {
            return;
        }

        var i = 0;
        for (; i < list.length; i++) {
            this.ClubMemHeadBg[i].node.active = true;
            UpdateWXHeadIcon(list[i].headurl, this.ClubMemberHead[i]);
            if (i >= 3) {
                break;
            }
        }

        for (i = 0; i < list.length; i++) {
            if (list[i].role == window.ClubRole.E_CLUB_OWNER_ROLE) {
                UpdateWXHeadIcon(list[i].headurl, this.ClubOwnerHead);
                return;
            }
        }
    },

    setClubInfo: function setClubInfo() {
        this.setTextInfo();
        this.sendGetMemberList();
    },

    sendGetMemberList: function sendGetMemberList() {
        cc.log("ClubInfoView.sendGetMemberList clubid=", GamePlayer.getInstance().CurClubInfo.clubid);
        var data = {
            clubid: GamePlayer.getInstance().CurClubInfo.clubid
        };
        MessageFactory.createMessageReq(window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID).send(data);
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log('ClubInfoView.callBackBtn,BtnName = ' + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (BtnName == "BtnChangeInfo") {
            var ClubSetView = cc.instantiate(this.ClubSetView);
            this.node.addChild(ClubSetView);
            ClubSetView.setPosition(cc.p(0, 0));
        } else if (BtnName == "BtnClose") {
            this.dismiss();

            var message = {
                popView: "ClubInfoView",
                btn: "BtnClose"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "BtnMember") {
            var ClubMember = cc.instantiate(this.ClubMember);
            this.node.addChild(ClubMember);
            ClubMember.setPosition(cc.p(0, 0));
        } else if (BtnName == "BtnDelClub") {
            var alert = AlertView.create();
            alert.setPositiveButton(function () {
                var data = {
                    clubid: GamePlayer.getInstance().CurClubInfo.clubid
                };
                MessageFactory.createMessageReq(CLUB_REQ_DISMISS_CLUB_CMD_ID).send(data);
            }, "删除并退出");
            alert.show("您确定是否删除并推出俱乐部？", AlertViewBtnType.E_BTN_CANCLE);
        } else if (BtnName == "BtnShareBusiness") {
            var shareView = cc.instantiate(this.ShareView);
            this.node.addChild(shareView);
            shareView.setPosition(cc.p(0, 0));
            var string = "我正在玩游戏［" + GameCallOC.getInstance().getAppName() + "］,俱乐部(" + GamePlayer.getInstance().CurClubInfo.clubid + ")欢迎您的加入！！！";
            shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_LINK, string, GameSystem.getInstance().clienturl);
        } else if (BtnName == "BtnClubLevel") {
            if (GamePlayer.getInstance().CurClubInfo.owneruid == GamePlayer.getInstance().uid) {
                var levelView = cc.instantiate(this.ClubLevelView);
                this.node.addChild(levelView);
                levelView.setPosition(cc.p(0, 0));
            }
        }
    },

    getClubLevelName: function getClubLevelName(level) {
        switch (level) {
            case 1:
                return "一星俱乐部";
            case 2:
                return "二星俱乐部";
            case 3:
                return "三星俱乐部";
            case 4:
                return "四星俱乐部";
            case 5:
                return "五星俱乐部";
            case 6:
                return "六星俱乐部";
            case 7:
                return "七星俱乐部";
            case 8:
                return "八星俱乐部";
            case 9:
                return "九星俱乐部";
            case 10:
                return "十星俱乐部";
        }
    }
});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","BasePop":"BasePop","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView","UtilTool":"UtilTool"}],"ClubJoinView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '73334mXVPdNtIwkuAI4skgn', 'ClubJoinView');
// Script\ComScene\PopView\ClubJoinView.js

'use strict';

var BasePop = require('BasePop');
var UtilTool = require('UtilTool');
var MessageFactory = require('MessageFactory');
var LoadingView = require('LoadingView');
var ToastView = require('ToastView');
var GamePlayer = require('GamePlayer');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        ClubTitle: cc.Label, //俱乐部Title
        ClubName: cc.Label, //俱乐部名称
        ClubPersons: cc.Label,
        ClubHead: cc.Sprite,
        ClubAddress: cc.Label,
        ClubOwner: cc.Label,
        ClubOwnerHead: cc.Sprite,
        ClubId: cc.Label,
        ClubIntroDoc: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.setTextInfo();
        this.setHeadUrl();
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("ClubJoinView.onMessage");
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.CLUB_RESP_JOIN_CLUB_CMD_ID:
                this.onJoinClubMsg(msg);
                break;

        }
    },

    onJoinClubMsg: function onJoinClubMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.param.uid == GamePlayer.getInstance().uid) {
                if (msg.param.isallow == 1) {
                    ToastView.show("群主同意您加入他的俱乐部");
                    MessageFactory.createMessageReq(US_REQ_CLUB_LIST_CMD_ID).send();
                } else {
                    ToastView.show("群主拒绝您加入他的俱乐部");
                }
                this.dismiss();
                var message = {
                    popView: "ClubJoinView",
                    btn: "RespJoin"
                };
                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            }
        }
    },

    //[{"clubid":10000019,"role":1,"owneruid":10688,"level":1, "name":"as",
    // "headurl":"","address":"广西 百色市","intro":"","endtime":1494324197,"status":1,
    // "members":1, "maxmember":10}]
    setTextInfo: function setTextInfo() {
        this.ClubTitle.string = GamePlayer.getInstance().CurClubInfo.name;
        this.ClubName.string = GamePlayer.getInstance().CurClubInfo.name;
        this.ClubPersons.string = GamePlayer.getInstance().CurClubInfo.members + "/" + GamePlayer.getInstance().CurClubInfo.maxmember;
        this.ClubAddress.string = GamePlayer.getInstance().CurClubInfo.address;
        this.ClubOwner.string = GamePlayer.getInstance().CurClubInfo.ownername;
        this.ClubId.string = GamePlayer.getInstance().CurClubInfo.clubid;
        this.ClubIntroDoc.string = GamePlayer.getInstance().CurClubInfo.intro;
    },

    setHeadUrl: function setHeadUrl() {
        //this.ClubOwnerHead
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log('ClubJoinView.callBackBtn,BtnName = ' + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnJoinClub") {
            var data = {
                uid: GamePlayer.getInstance().uid,
                name: GamePlayer.getInstance().name,
                headurl: GamePlayer.getInstance().headurl,
                sex: GamePlayer.getInstance().sex
            };
            MessageFactory.createMessageReq(CLUB_REQ_JOIN_CLUB_CMD_ID).send(GamePlayer.getInstance().CurClubInfo.clubid, data);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView","UtilTool":"UtilTool"}],"ClubLevelCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '966b2ozM3pNJq6SkDvbg3bW', 'ClubLevelCell');
// Script\ComScene\PopView\ClubLevelCell.js

'use strict';

var UtilTool = require('UtilTool');
var GamePlayer = require('GamePlayer');
var ToastView = require('ToastView');
var AlertView = require('AlertView');
var MessageFactory = require('MessageFactory');
cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        ClubLevelFlag: cc.Sprite,
        FontLevel: cc.Label,
        FontLvInfo: cc.Label,
        FontNeedDia: cc.Label,
        LevelFlagFrame: [cc.SpriteFrame],
        LevelNum: 0,
        LevelCost: 0
    },

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
    //{"level":1,"livetime":30,"diamond":0,    "maxpeople":10, "maxtable":2},
    setCellInfo: function setCellInfo(msg) {
        this.setClubLevel(msg.level);
        this.FontNeedDia.string = "" + msg.diamond;
        this.LevelCost = msg.diamond;
        this.FontLvInfo.string = "提高人数上限至" + msg.maxpeople + "人，可设管理员" + msg.level + "人。持续" + msg.livetime + "天";
    },

    setClubLevel: function setClubLevel(level) {
        this.LevelNum = level;
        this.FontLevel.string = UtilTool.getClubLevelName(level);
        this.ClubLevelFlag.spriteFrame = this.LevelFlagFrame[level - 1];
    },

    CallBackBtn: function CallBackBtn() {
        if (GamePlayer.getInstance().CurClubInfo.level < this.LevelNum) {
            if (GamePlayer.getInstance().diamond < this.LevelCost) {
                ToastView.show("您的钻石不足" + ",无法购买" + UtilTool.getClubLevelName(this.LevelNum) + "，请前往商城购买钻石");
            } else {
                var self = this;
                var alert = AlertView.create();
                alert.setPositiveButton(function () {
                    self.sendUpClubPacket();
                }, "确认");
                alert.show("您是否确认花费" + this.LevelCost + "个钻石购买" + UtilTool.getClubLevelName(this.LevelNum), AlertViewBtnType.E_BTN_CLOSE);
            }
        } else {
            ToastView.show("您已购买" + UtilTool.getClubLevelName(this.LevelNum) + ",无法降级购买");
        }
    },

    sendUpClubPacket: function sendUpClubPacket() {
        var info = GamePlayer.getInstance().CurClubInfo;
        var data = {
            clubid: info.clubid,
            headurl: "",
            intro: "",
            address: "",
            level: this.LevelNum
        };
        MessageFactory.createMessageReq(window.CLUB_REQ_MODIFY_INFO_CMD_ID).send(data);
    }

});

cc._RFpop();
},{"AlertView":"AlertView","GamePlayer":"GamePlayer","MessageFactory":"MessageFactory","ToastView":"ToastView","UtilTool":"UtilTool"}],"ClubLevelView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3ded59G/WZAqJScyRtfW3bL', 'ClubLevelView');
// Script\ComScene\PopView\ClubLevelView.js

'use strict';

var BasePop = require('BasePop');
var ClubLevelCell = require('ClubLevelCell');
var GamePlayer = require('GamePlayer');
var UtilTool = require('UtilTool');
var GameSystem = require('GameSystem');
var ToastView = require('ToastView');

cc.Class({
    extends: BasePop,

    properties: {
        ClubLvFlag: cc.Sprite,
        ClubLvFlagFrame: [cc.SpriteFrame],
        FontCurLevel: cc.Label,
        TimeLabel: cc.Label,
        CurDiamond: cc.Label,

        clubLevelCell: cc.Prefab,
        Content: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        //this.initBaseData();
    },

    start: function start() {
        this.initBaseData();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },


    // {"level":1,"livetime":30,"diamond":0,    "maxpeople":10, "maxtable":2},
    // {"level":2,"livetime":30,"diamond":1000, "maxpeople":50, "maxtable":3},
    // {"level":3,"livetime":30,"diamond":4000, "maxpeople":100,"maxtable":4},
    // {"level":4,"livetime":30,"diamond":10000,"maxpeople":200,"maxtable":9}
    initBaseData: function initBaseData() {

        this.initCurClubInfo();
        var height = 0;
        for (var index = 0; index < GameSystem.getInstance().ClubUpgradeCost.length; index++) {
            var levelItem = cc.instantiate(this.clubLevelCell);
            height = levelItem.getContentSize().height;
            levelItem.setPosition(cc.p(0, 0 - 620 - height * index));
            this.Content.addChild(levelItem);
            levelItem.getComponent('ClubLevelCell').setCellInfo(GameSystem.getInstance().ClubUpgradeCost[index]);
        }
    },

    initCurClubInfo: function initCurClubInfo() {
        this.FontCurLevel.string = UtilTool.getClubLevelName(GamePlayer.getInstance().CurClubInfo.level);
        this.ClubLvFlag.spriteFrame = this.ClubLvFlagFrame[GamePlayer.getInstance().CurClubInfo.level - 1];
        this.TimeLabel.string = UtilTool.getFormatData(GamePlayer.getInstance().CurClubInfo.endtime);
        this.CurDiamond.string = GamePlayer.getInstance().diamond;
    },

    onMessage: function onMessage(event) {
        var msg = event.data;
        var cmd = msg.cmd;
        cc.log("ClubLevelCell.onMessage cmd=", msg.cmd, " window.CLUB_RESP_MODIFY_INFO_CMD_ID=", window.CLUB_RESP_MODIFY_INFO_CMD_ID);
        switch (cmd) {
            case window.CLUB_RESP_MODIFY_INFO_CMD_ID:
                this.onModifyInfoMsg(msg);
                break;

            case window.US_RESP_USER_DETAIL_CMD_ID:
                this.updateUserDiamond(msg);
                break;
        }
    },

    updateUserDiamond: function updateUserDiamond(msg) {
        cc.log("ClubLevelCell.updateUserDiamond");
        GamePlayer.getInstance().gold = msg.gold;
        GamePlayer.getInstance().diamond = msg.diamond;
        this.initCurClubInfo();
    },

    // ClubId  int    `json:"clubid"`
    // Status  int    `json:"status"`
    // Name    string `json:"name"`
    // HeadUrl string `json:"headurl"`
    // Address string `json:"address"`
    // Intro   string `json:"intro"`
    // Level   int    `json:"level"`
    // EndTime int64  `json:"endtime"`
    onModifyInfoMsg: function onModifyInfoMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("ClubLevelCell.onModifyInfoMsg code=", msg.code, " endtime=", msg.param.endtime);
            GamePlayer.getInstance().CurClubInfo.level = Number(msg.param.level);
            GamePlayer.getInstance().CurClubInfo.endtime = msg.param.endtime;
            var info = this.getCurLevelInfo(msg.param.level);
            cc.log("ClubLevelCell.onModifyInfoMsg  info=", info);

            GamePlayer.getInstance().CurClubInfo.maxmember = info.maxpeople;

            ToastView.show("升级成功: " + UtilTool.getFormatDataDetail(GamePlayer.getInstance().CurClubInfo.endtime) + "到期", 2);
            this.getUserDetail();
            this.initCurClubInfo();
        } else {
            ToastView.show(msg.desc);
        }
    },

    getCurLevelInfo: function getCurLevelInfo(level) {
        var list = GameSystem.getInstance().ClubUpgradeCost;
        for (var i = 0; i < list.length; i++) {
            if (level == list[i].level) {
                return list[i];
            }
        }
        return list[0];
    }

});

cc._RFpop();
},{"BasePop":"BasePop","ClubLevelCell":"ClubLevelCell","GamePlayer":"GamePlayer","GameSystem":"GameSystem","ToastView":"ToastView","UtilTool":"UtilTool"}],"ClubMemberPermissionView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1c947ir7cREq62tEy0ORrfi', 'ClubMemberPermissionView');
// Script\ComScene\PopView\ClubMemberPermissionView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        OpManage: cc.Label
    },

    // use this for initialization
    // `json:"uid"`
    // `json:"name"`
    // `json:"headurl"`
    // `json:"sex"`
    // `json:"role"`
    // `json:"lasttime"`
    onLoad: function onLoad() {
        this._super();
        this.info = null;
    },

    setData: function setData(info) {
        this.info = info;
        if (info.role == window.ClubRole.E_CLUB_MANAGER_ROLE) {
            this.OpManage.string = "取消管理员";
        } else if (info.role == window.ClubRole.E_CLUB_NORMAL_ROLE) {
            this.OpManage.string = "设置管理员";
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log('ClubMemberPermissionView.callBackBtn, BtnName = ' + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (BtnName == "GrayLayer") {} else if (BtnName == "PermissionOpBg") {
            var data = {
                clubid: GamePlayer.getInstance().CurClubInfo.clubid,
                uid: this.info.uid,
                role: window.ClubRole.E_CLUB_MANAGER_ROLE
            };

            if (this.info.role == window.ClubRole.E_CLUB_MANAGER_ROLE) {
                data.role = window.ClubRole.E_CLUB_NORMAL_ROLE;
            }
            cc.log("ClubMemberPermissionView Send Modify Role, data=", data);

            MessageFactory.createMessageReq(CLUB_REQ_OWNER_MODIFY_ROLE_CMD_ID).send(data);
        } else if (BtnName == "PermissionDelBg") {
            var data = {
                clubid: GamePlayer.getInstance().CurClubInfo.clubid,
                uid: this.info.uid
            };
            MessageFactory.createMessageReq(CLUB_REQ_OWNER_RM_MEMBER_CMD_ID).send(data);
        }
        this.dismiss();
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"ClubMemberView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '11fb0Law1tM57o3bDWFfnlI', 'ClubMemberView');
// Script\ComScene\PopView\ClubMemberView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var ToastView = require('ToastView');
var GameSystem = require("GameSystem");

window.ClubRole = {
    E_CLUB_OWNER_ROLE: 1, //群主
    E_CLUB_MANAGER_ROLE: 2, //管理员
    E_CLUB_NORMAL_ROLE: 3 };

cc.Class({
    extends: BasePop,

    properties: {
        TitleLabel: cc.Label,
        UpgradeLabel: cc.Label,
        EditName: cc.EditBox,
        ClubPersonsCell: cc.Prefab,
        ScrollView: cc.ScrollView,
        ClubUpgradView: cc.Prefab,
        ClubMemberPermissionView: cc.Prefab
    },

    onLoad: function onLoad() {
        this._super();
        this.showTitle();
        this.showMemberList();
    },

    showTitle: function showTitle() {
        this.TitleLabel.string = "会员管理(" + GamePlayer.getInstance().CurClubInfo.members + "/" + GamePlayer.getInstance().CurClubInfo.maxmember + ")";
        if (GamePlayer.getInstance().uid != GamePlayer.getInstance().CurClubInfo.owneruid) {
            this.UpgradeLabel.node.active = false;
        }
    },

    showMemberList: function showMemberList() {
        var list = GamePlayer.getInstance().CurClubMemList;
        this.ScrollView.content.removeAllChildren(true);
        var height = 0;
        for (var index = 0; list != null && index < list.length; index++) {
            height = this.createClubPersonCell(list, index);
        }

        if (height * list.length > this.ScrollView.content.height) {
            this.ScrollView.content.height = height * list.length;
        }
    },

    searchOneMember: function searchOneMember(name) {
        var list = GamePlayer.getInstance().CurClubMemList;

        for (var index = 0; list != null && index < list.length; index++) {
            if (list[index].name != name) {
                cc.log("searchOneMember : not found list.name=", list[index].name);
                continue;
            }
            cc.log("searchOneMember : success found name=", name);
            this.ScrollView.content.removeAllChildren();
            this.createClubPersonCell(list, index);
            return;
        }

        ToastView.show("未搜索到会员: " + name);
    },

    createClubPersonCell: function createClubPersonCell(list, index) {
        var ClubPersonsCell = cc.instantiate(this.ClubPersonsCell);

        this.ScrollView.content.addChild(ClubPersonsCell);
        var height = ClubPersonsCell.getContentSize().height;
        ClubPersonsCell.setPosition(cc.p(0, 0 - height * (index + 0.5)));

        ClubPersonsCell.getComponent("ClubPersonsCell").setPersonInfo(list[index]);

        //不是这个俱乐部的群主没有权限修改会员
        if (GamePlayer.getInstance().CurClubInfo.owneruid != GamePlayer.getInstance().uid) {
            cc.log("ClubMemberView.createClubPersonCell not Owner");
            return height;
        }

        if (list[index].role == window.ClubRole.E_CLUB_OWNER_ROLE) {
            cc.log("ClubMemberView.createClubPersonCell owner role=", list[index].role);
            return height;
        }
        ClubPersonsCell.getComponent("ClubPersonsCell").BtnSet.node.active = true;
        ClubPersonsCell.getComponent("ClubPersonsCell").BtnSet.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            var self = this;
            var cell = event.target.getParent().getComponent('ClubPersonsCell');
            var ClubMemberPermissionView = cc.instantiate(this.ClubMemberPermissionView);
            self.node.addChild(ClubMemberPermissionView);
            ClubMemberPermissionView.setPosition(cc.p(0, 0));
            ClubMemberPermissionView.getComponent('ClubMemberPermissionView').setData(cell.info);
        }.bind(this));
        cc.log("createClubPersonCell.height = " + height);
        return height;
    },

    ////////////////////////////////////////////////////////////////////
    onMessage: function onMessage(event) {
        cc.log("ClubMemberView.onMessage");
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:
                this.onDelMemberMsg(msg);
                break;

            case window.CLUB_RESP_GET_MEMBER_LIST_CMD_ID:
                this.onGetClubMember(msg);
                break;

            case window.CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID:
                this.onModifyMemberRole(msg);
                break;
        }
    },

    onClubRmMem: function onClubRmMem(msg) {
        //param
        // ClubId   int    `json:"clubid"`
        // ClubName string `json:"clubname"`
        // Uid      uint32 `json:"uid"`
        // Name     string `json:"name"`
        if (msg.param.uid == GamePlayer.getInstance().uid) {
            ToastView.show("您被移除俱乐部" + msg.param.clubname + "(" + msg.param.clubid + ")");
        } else {
            ToastView.show(msg.param.name + "被移除俱乐部" + msg.param.clubname + "(" + msg.param.clubid + ")");
        }
    },

    // type CLUB_RESP_OWNER_MODIFY_ROLE_T struct {
    //     JsonHead
    //     RespHead
    //     Param PARAM_RESP_OWNER_MODIFY_ROLE_T `json:"param"`
    // }
    //
    // type PARAM_RESP_OWNER_MODIFY_ROLE_T struct {
    //     ClubId int    `json:"clubid"`
    //     Uid    uint32 `json:"uid"`
    //     Role   uint8  `json:"role"`
    // }
    onModifyMemberRole: function onModifyMemberRole(msg) {
        //param : { clubid, uid, role
        //        }
        if (msg.param.clubid != GamePlayer.getInstance().CurClubInfo.clubid) {
            cc.log("ClubMemberView.onModifyMemberRole recv clubid=", msg.param.clubid, " != curClubid=", GamePlayer.getInstance().CurClubInfo.clubid);
            return;
        }

        var list = GamePlayer.getInstance().CurClubMemList;
        for (var index = 0; list != null && index < list.length; index++) {
            if (list[index].uid == msg.param.uid) {
                GamePlayer.getInstance().CurClubMemList[index].role = msg.param.role;
            }
        }
        this.showMemberList();
    },

    onDelMemberMsg: function onDelMemberMsg(msg) {
        cc.log("ClubMemberView.onDelMemberMsg");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            var data = {
                clubid: GamePlayer.getInstance().CurClubInfo.clubid
            };
            MessageFactory.createMessageReq(window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID).send(data);
        }
    },

    onGetClubMember: function onGetClubMember(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            GamePlayer.getInstance().CurClubMemList = msg.list;
            this.showMemberList();
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();

        cc.log('ClubMemberView.callBackBtn, BtnName=' + BtnName);

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (BtnName == "BtnClose") {
            this.dismiss();
            this.dismiss();
            var message = {
                popView: "ClubMemberView",
                btn: "BtnClose"
            };

            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "BtnUpgrade") {
            var ClubUpgradView = cc.instantiate(this.ClubUpgradView);
            this.node.addChild(ClubUpgradView);
            ClubUpgradView.setPosition(cc.p(0, 0));
        } else if (BtnName == "BtnSearch") {
            var name = this.EditName.string;
            cc.log("ClubMemberView.callBackBtn, name=", name);
            this.searchOneMember(name);
        }
    },

    callBackEditNameBegin: function callBackEditNameBegin(event, CustomEventData) {
        cc.log("ClubMemberView.callBackEditNameBegin");
        this.EditName.string = "";
    },

    callBackEditNameEnd: function callBackEditNameEnd(event, CustomEventData) {
        var name = this.EditName.string;
        cc.log("ClubMemberView.callBackEditNameEnd, name=", name);
        this.searchOneMember(name);
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        if (msg.popView == "ClubUpdradeView") {
            if (msg.btn == "BtnClose") {
                this.showTitle();
                this.showMemberList();
            }
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ClubOwnerConfirmReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6160fJzCppDz6tvkcDbEKij', 'ClubOwnerConfirmReqPacket');
// Script\Network\Cmd\Cmd_Req\ClubOwnerConfirmReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/9.
 */
/*
* type CLUB_REQ_OWNER_CONFIRM_T struct {
 ClubHead
 Param PARAM_REQ_OWNER_CONFIRM_T `json:"param"`
 }
 type PARAM_REQ_OWNER_CONFIRM_T struct {
 IsAllow int    `json:"isallow"` //1: allow, 0: reject.
 Uid     uint32 `json:"uid"`
 }
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function ClubOwnerConfirmReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_OWNER_CONFIRM_CMD_ID;

    //准备发送的数据
    this.send = function (msg, clubid) {
        cc.log("ClubOwnerConfirmReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: clubid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubOwnerConfirmReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ClubOwnerConfirmRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5756dIwm+lD94z8OSXnqdfO', 'ClubOwnerConfirmRespPacket');
// Script\Network\Cmd\Cmd_Resp\ClubOwnerConfirmRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/9.
 */
/*
* type CLUB_RESP_OWNER_CONFIRM_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_OWNER_CONFIRM_T `json:"param"`
 }
 type PARAM_RESP_OWNER_CONFIRM_T struct {
 ClubId int `json:"clubid"`
 }*/

var MessageResp = require('MessageResp');

function ClubOwnerConfirmRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_OWNER_CONFIRM_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
    };
}

module.exports = ClubOwnerConfirmRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ClubOwnerModifyRoleReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6a772oQiE9Eiav1MBYoI9VD', 'ClubOwnerModifyRoleReqPacket');
// Script\Network\Cmd\Cmd_Req\ClubOwnerModifyRoleReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/15.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function ClubOwnerModifyRoleReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_OWNER_MODIFY_ROLE_CMD_ID;
    //准备发送的数据
    this.send = function (msg) {
        cc.log("ClubOwnerModifyRoleReqPacket.send");

        var param = {
            uid: msg.uid,
            role: msg.role
        };

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid,
            param: param

        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubOwnerModifyRoleReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ClubOwnerModifyRoleRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '71674scYjdD/I2n+iqa6uYz', 'ClubOwnerModifyRoleRespPacket');
// Script\Network\Cmd\Cmd_Resp\ClubOwnerModifyRoleRespPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/15.
 */
var MessageResp = require('MessageResp');

function ClubOwnerModifyRoleRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID;

    // type CLUB_RESP_OWNER_MODIFY_ROLE_T struct {
    //     JsonHead
    //     RespHead
    //     Param PARAM_RESP_OWNER_MODIFY_ROLE_T `json:"param"`
    // }
    //
    // type PARAM_RESP_OWNER_MODIFY_ROLE_T struct {
    //     ClubId int    `json:"clubid"`
    //     Uid    uint32 `json:"uid"`
    //     Role   uint8  `json:"role"`
    // }

    //接收的数据
    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
    };
}

module.exports = ClubOwnerModifyRoleRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ClubPersonsCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '115a1vqfGhId6oWAChB+9b8', 'ClubPersonsCell');
// Script\ComScene\PopView\ClubPersonsCell.js

"use strict";

var UtilTool = require('UtilTool');

cc.Class({
    extends: cc.Component,

    properties: {
        Head: cc.Sprite,
        Name: cc.Label,
        RoleSprite: cc.Sprite,
        RoleFrame: [cc.SpriteFrame],
        Time: cc.Label,
        BtnSet: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.info = null;
    },

    // Uid      uint32 `json:"uid"`
    // Name     string `json:"name"`
    // HeadUrl  string `json:"headurl"`
    // Sex      int    `json:"sex"`
    // Role     uint8  `json:"role"`
    // LastTime int64  `json:"lasttime"`

    setPersonInfo: function setPersonInfo(info) {
        cc.log("ClubPersonCell name=", info.name, " headurl=", info.headurl, " role=", info.role, " time=", info.lasttime);
        this.info = info;
        this.Name.string = info.name;
        this.Time.string = UtilTool.getFormatData(info.lasttime);
        UpdateWXHeadIcon(info.headurl, this.Head);

        if (info.role == window.ClubRole.E_CLUB_OWNER_ROLE) {
            this.RoleSprite.spriteFrame = this.RoleFrame[0];
        } else if (info.role == window.ClubRole.E_CLUB_MANAGER_ROLE) {
            this.RoleSprite.spriteFrame = this.RoleFrame[1];
        } else {
            cc.log("ClubPersonCell.setPersonInfo role = normal");
            this.RoleSprite.node.active = false;
        }
    }

});

cc._RFpop();
},{"UtilTool":"UtilTool"}],"ClubPersonsView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '851a9wyrIpAy6765tLFd57l', 'ClubPersonsView');
// Script\ComScene\PopView\ClubPersonsView.js

"use strict";

var BasePop = require("BasePop");
cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        ScrollView: cc.ScrollView
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {}
});

cc._RFpop();
},{"BasePop":"BasePop"}],"ClubRoomView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd5fbaSs+PlHh6GrGhfundeD', 'ClubRoomView');
// Script\ComScene\PopView\ClubRoomView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var GameSystem = require('GameSystem');
var LoadingView = require('LoadingView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');

cc.Class({
    extends: BasePop,

    properties: {
        ClubName: cc.Label,
        ClubInfo: cc.Prefab,
        TableNum: cc.Label,
        CreateRoom: cc.Sprite,
        Bullfight_CreateRoom: cc.Prefab,
        scrollview: cc.ScrollView,
        TableCell: cc.Prefab
    },

    onLoad: function onLoad() {
        this._super();
        this.setClubInfo();
    },

    onMessage: function onMessage(event) {
        cc.log("ClubRoomView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.US_RESP_CLUB_TABLE_CMD_ID:
                this.onGetClubTableMsg(msg);
                break;

            case window.US_RESP_ENTER_GAME_CMD_ID:
                this.onEnterRoom(msg);
                break;

            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:
                this.onDelMemberMsg(msg);
                break;
        }
    },

    onDelMemberMsg: function onDelMemberMsg(msg) {
        cc.log("ClubInfoView.onDelMemberMsg");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.param.uid == GamePlayer.getInstance().uid) {
                //如果是我自己
                this.dismiss();
                var message = {
                    popView: "ClubRoomView",
                    btn: "BtnClose"
                };
                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            }
        }
    },

    onSceneMsg: function onSceneMsg(event) {
        cc.log("ClubRoomView.onSceneMsg");
        var msg = event.data;
        if (msg.popView == "ClubInfoView") {
            if (msg.btn == "BtnClose") {
                this.setClubInfo();
            } else if (msg.btn == "onDismissClubMsg") {
                cc.log("ClubRoomView.onSceneMsg ClubInfoView onDismissClubMsg.");
                this.dismiss();
                var message = {
                    popView: "ClubRoomView",
                    btn: "BtnClose"
                };
                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            }
        }
    },

    onEnterRoom: function onEnterRoom(msg) {
        cc.log("HallScene.onEnterRoom,tableid = " + msg.name);
        if (msg.code == SocketRetCode.RET_SUCCESS) {}
    },

    onGetClubTableMsg: function onGetClubTableMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.list == null || msg.list.length == 0) {
                ToastView.show("暂未发现俱乐部房间");
                return;
            }

            this.TableNum.string = "牌局(" + msg.list.length + ")";

            var height = 0;
            for (var index = 0; msg.list != null && index < msg.list.length; index++) {
                var TableCell = cc.instantiate(this.TableCell);
                this.scrollview.content.addChild(TableCell);
                height = TableCell.getContentSize().height;
                TableCell.setPosition(cc.p(0, -TableCell.getContentSize().height / 2 - TableCell.getContentSize().height * index));
                TableCell.getComponent("GamblingHouseCell").updateRoomInfo(msg.list[index]);
            }

            if (TableCell.getContentSize().height * msg.list.length > this.scrollview.content.height) {
                this.scrollview.content.height = height * msg.list.length;
            }
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubRoomView.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
            var message = {
                popView: "ClubRoomView",
                btn: "BtnClose"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "BtnClubInfo") {
            var ClubInfo = cc.instantiate(this.ClubInfo);
            this.node.addChild(ClubInfo);
            ClubInfo.setPosition(cc.p(0, 0));

            ClubInfo.getComponent("ClubInfoView").setClubInfo();
        } else if (BtnName == "CreateRoom") {
            var createRoom = cc.instantiate(this.Bullfight_CreateRoom);
            this.node.addChild(createRoom);
            createRoom.setPosition(cc.p(0, 0));
            createRoom.getComponent("Bullfight_CreateRoom").setClubId(GamePlayer.getInstance().CurClubInfo.clubid, GamePlayer.getInstance().CurClubInfo.level);
        }
    },

    //{"clubid":10000019,"role":1,"owneruid":10688,"level":1,"name":"as",
    // "headurl":"","address":"广西 百色市","intro":"","endtime":1494324197,"status":1,
    // "members":1,"maxmember":10}

    setClubInfo: function setClubInfo() {

        var info = GamePlayer.getInstance().CurClubInfo;

        cc.log("ClubRoomView.setClubInfo Clubid=", info.clubid, " role=", info.role, " name=", info.name);

        this.ClubName.string = info.name;

        if (info.role == window.ClubRole.E_CLUB_NORMAL_ROLE) {
            this.CreateRoom.node.active = false;
        }

        var data = {
            clubid: info.clubid
        };
        MessageFactory.createMessageReq(window.US_REQ_CLUB_TABLE_CMD_ID).send(data);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ClubSetView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f3857lbvvdN8YdCSMgx0KXf', 'ClubSetView');
// Script\ComScene\PopView\ClubSetView.js

'use strict';

var BasePop = require('BasePop');
var ToastView = require('ToastView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        Name: cc.EditBox,
        Intro: cc.EditBox
    },

    onLoad: function onLoad() {
        this._super();

        this.setClubInfo();
    },

    setClubInfo: function setClubInfo() {
        cc.log("ClubSetView.setClubInfo");
        this.Name.string = GamePlayer.getInstance().CurClubInfo.name;
        this.Intro.string = GamePlayer.getInstance().CurClubInfo.intro;
        //info.headurl;
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubSetView.callBackBtn, BtnName = " + BtnName);

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (BtnName == "BtnClose") {
            this.dismiss();
            var message = {
                popView: "ClubSetView",
                btn: "BtnClose"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "BtnSave") {
            var info = GamePlayer.getInstance().CurClubInfo;
            var data = {
                clubid: info.clubid,
                headurl: "",
                name: this.Name.string,
                intro: this.Intro.string
            };

            if (data.name == GamePlayer.getInstance().CurClubInfo.name) {
                data.name = "";
            }
            cc.log("ClubSetView.callBackBtn headurl=", data.headurl, " name=", data.name, " intro=", data.intro);
            MessageFactory.createMessageReq(window.CLUB_REQ_MODIFY_INFO_CMD_ID).send(data);
        }
    },

    onMessage: function onMessage(event) {
        cc.log("ClubSetView.onMessage");
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.CLUB_RESP_MODIFY_INFO_CMD_ID:
                this.onModifyInfoMsg(msg);
                break;
        }
    },

    // ClubId  int    `json:"clubid"`
    // Status  int    `json:"status"`
    // Name    string `json:"name"`
    // HeadUrl string `json:"headurl"`
    // Address string `json:"address"`
    // Intro   string `json:"intro"`
    // Level   int    `json:"level"`
    // EndTime int64  `json:"endtime"`
    onModifyInfoMsg: function onModifyInfoMsg(msg) {
        cc.log("ClubSetView.onModifyInfoMsg code=", msg.code);
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            GamePlayer.getInstance().CurClubInfo.name = this.Name.string;
            GamePlayer.getInstance().CurClubInfo.intro = this.Intro.string;
            ToastView.show("修改成功！！！");
        } else {
            ToastView.show(msg.desc);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ClubUpgradView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'be1a0ktS/xHPoe6f/u4Y0LY', 'ClubUpgradView');
// Script\ComScene\PopView\ClubUpgradView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');
var GamePlayer = require('GamePlayer');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var UtilTool = require('UtilTool');

cc.Class({
    extends: BasePop,

    properties: {
        TipsLabel: cc.Label, //提示
        LevelNum: cc.Label, //等级
        PersonCurCount: cc.Label, //当前等级人数
        PersonTargetCount: cc.Label, //目标等级人数
        TableCurCount: cc.Label, //当前桌子人数
        TableTargetCount: cc.Label, //目标桌子人数
        DiamondCost: cc.Label,
        CurDiamond: cc.Label,
        BtnAdd: cc.Button,
        BtnSub: cc.Button,

        BtnSpriteFrame: [cc.SpriteFrame]
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        this.showMaxClubInfo();
        this.showCurClubInfo();
        this.showCurDiamond();
        this.showBtnSprite(GamePlayer.getInstance().CurClubInfo.level);
    },

    // {"level":1,"livetime":30,"diamond":0,    "maxpeople":10, "maxtable":2},
    // {"level":2,"livetime":30,"diamond":1000, "maxpeople":50, "maxtable":3},
    // {"level":3,"livetime":30,"diamond":4000, "maxpeople":100,"maxtable":4},
    // {"level":4,"livetime":30,"diamond":10000,"maxpeople":200,"maxtable":9}
    getMaxLevelConf: function getMaxLevelConf() {
        var list = GameSystem.getInstance().ClubUpgradeCost;
        var level = 1;
        var index = 0;
        for (var i = 0; i < list.length; i++) {
            if (level < list[i].level) {
                level = list[i].level;
                index = i;
            }
        }
        return list[index];
    },

    getCurLevelInfo: function getCurLevelInfo(level) {
        var list = GameSystem.getInstance().ClubUpgradeCost;
        for (var i = 0; i < list.length; i++) {
            if (level == list[i].level) {
                return list[i];
            }
        }
        return list[0];
    },

    showMaxClubInfo: function showMaxClubInfo() {
        var info = this.getMaxLevelConf();
        this.TipsLabel.string = "俱乐部上限等级3级，有效期为15天，最高上限为" + info.maxpeople + "人，同时创建" + info.maxtable + "张牌桌";
        this.PersonTargetCount.string = info.maxpeople;
        this.TableTargetCount.string = info.maxtable;
    },

    showCurClubInfo: function showCurClubInfo() {
        var curClub = GamePlayer.getInstance().CurClubInfo;
        var curInfo = this.getCurLevelInfo(curClub.level);
        this.LevelNum.string = curInfo.level;
        this.PersonCurCount.string = curInfo.maxpeople;
        this.TableCurCount.string = curInfo.maxtable;
        this.DiamondCost.string = curInfo.diamond;
    },

    showBtnSprite: function showBtnSprite(level) {
        if (level == 1) {
            this.BtnSub.interactable = false;
        } else {
            this.BtnSub.interactable = true;
            this.BtnSub.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
        }

        if (level == 4) {
            this.BtnAdd.interactable = false;
        } else {
            this.BtnAdd.interactable = true;
            this.BtnAdd.node.getComponent(cc.Sprite).spriteFrame = this.BtnSpriteFrame[1];
        }
    },

    showCurDiamond: function showCurDiamond() {
        this.CurDiamond.string = "拥有钻石: " + GamePlayer.getInstance().diamond;
    },

    onMessage: function onMessage(event) {
        var msg = event.data;
        var cmd = msg.cmd;
        cc.log("ClubUpgradeView.onMessage cmd=", msg.cmd, " window.CLUB_RESP_MODIFY_INFO_CMD_ID=", window.CLUB_RESP_MODIFY_INFO_CMD_ID);
        switch (cmd) {
            case window.CLUB_RESP_MODIFY_INFO_CMD_ID:
                this.onModifyInfoMsg(msg);
                break;

            case window.US_RESP_USER_DETAIL_CMD_ID:
                this.updateUserDiamond(msg);
                break;
        }
    },

    updateUserDiamond: function updateUserDiamond(msg) {
        cc.log("ClubUpgradeView.updateUserDiamond");
        GamePlayer.getInstance().gold = msg.gold;
        GamePlayer.getInstance().diamond = msg.diamond;
        this.showCurDiamond();
    },

    // ClubId  int    `json:"clubid"`
    // Status  int    `json:"status"`
    // Name    string `json:"name"`
    // HeadUrl string `json:"headurl"`
    // Address string `json:"address"`
    // Intro   string `json:"intro"`
    // Level   int    `json:"level"`
    // EndTime int64  `json:"endtime"`
    onModifyInfoMsg: function onModifyInfoMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("ClubUpgradeView.onModifyInfoMsg code=", msg.code, " endtime=", msg.param.endtime);
            GamePlayer.getInstance().CurClubInfo.level = Number(msg.param.level);
            GamePlayer.getInstance().CurClubInfo.endtime = msg.param.endtime;
            var info = this.getCurLevelInfo(msg.param.level);
            cc.log("ClubUpgradeView.onModifyInfoMsg  info=", info);

            GamePlayer.getInstance().CurClubInfo.maxmember = info.maxpeople;

            ToastView.show("升级成功: " + UtilTool.getFormatDataDetail(GamePlayer.getInstance().CurClubInfo.endtime) + "到期", 2);
            this.getUserDetail();
        } else {
            ToastView.show(msg.desc);
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubUpgradeView.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
            var message = {
                popView: "ClubUpdradeView",
                btn: "BtnClose"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        } else if (BtnName == "BtnUpgrade") {
            var level = Number(this.LevelNum.string);
            cc.log("callBackBtn BtnUpgrade level=", level);

            var info = this.getCurLevelInfo(level);
            if (info.diamond > GamePlayer.getInstance().diamond) {
                ToastView.show("您钻石不足,请去商城购买");
                return;
            }

            cc.log("ClubSetView.callBackBtn endtime=", GamePlayer.getInstance().CurClubInfo.endtime);

            var info = GamePlayer.getInstance().CurClubInfo;
            var data = {
                clubid: info.clubid,
                headurl: "",
                intro: "",
                address: "",
                level: level
            };
            MessageFactory.createMessageReq(window.CLUB_REQ_MODIFY_INFO_CMD_ID).send(data);
        } else if (BtnName == "BtnSub") {

            var level = Number(this.LevelNum.string);
            cc.log("callBackBtn BtnSub level=", level);

            if (level == 1) {
                return;
            }

            level = level - 1;

            var info = this.getCurLevelInfo(level);
            this.LevelNum.string = level;
            this.PersonTargetCount.string = info.maxpeople;
            this.TableTargetCount.string = info.maxtable;
            this.DiamondCost.string = info.diamond;
            this.showBtnSprite(level);
        } else if (BtnName == "BtnAdd") {

            var level = Number(this.LevelNum.string);
            cc.log("callBackBtn BtnAdd level=", level);

            if (level == 4) {
                return;
            }

            level = level + 1;

            var info = this.getCurLevelInfo(level);
            this.LevelNum.string = level;
            this.PersonTargetCount.string = info.maxpeople;
            this.TableTargetCount.string = info.maxtable;
            this.DiamondCost.string = info.diamond;
            this.showBtnSprite(level);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView","UtilTool":"UtilTool"}],"ClubUpgradeCostReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '84a12FHM2pETJp6WOI1jct2', 'ClubUpgradeCostReqPacket');
// Script\Network\Cmd\Cmd_Req\ClubUpgradeCostReqPacket.js

'use strict';

/**
 * Created by zhouxueshi on 2017/5/6.
 */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function ClubUpgradeCostReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CLUB_UPGRADE_COST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("ClubUpgradeCostReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ClubUpgradeCostReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ClubUpgradeCostRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd3cf40owQZJWa2xZMFJ+cLa', 'ClubUpgradeCostRespPacket');
// Script\Network\Cmd\Cmd_Resp\ClubUpgradeCostRespPacket.js

"use strict";

/**
 * Created by zhouxueshi on 2017/5/6.
 */
var MessageResp = require("MessageResp");

// type US_RESP_CLUB_UPGRADE_COST_T struct {
//     JsonHead
//     RespHead
//     List []CLUB_COST_T `json:"list"`
// }
//
// type CLUB_COST_T struct {
//     Level     int `json:"level"`
//     LiveTime  int `json:"livetime"`
//     Diamond   int `json:"diamond"`
//     MaxPeople int `json:"maxpeople"`
//     MaxTable  int `json:"maxtable"`
// }

function ClubUpgradeCostRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CLUB_UPGRADE_COST_CMD_ID;

    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        this.list = msg.list;
    };
}

module.exports = ClubUpgradeCostRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ClubView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fa758RC/tpMH5/A9qkBWv20', 'ClubView');
// Script\ComScene\PopView\ClubView.js

'use strict';

var BasePop = require('BasePop');
var ToastView = require('ToastView');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        ClubAddView: cc.Prefab,
        ClubCreateView: cc.Prefab,
        initNode: cc.Node,
        scrollView: cc.ScrollView,
        ClubCell: cc.Prefab,
        ClubJoinView: cc.Prefab,
        ClubFindPopView: cc.Prefab,
        ClubRoomView: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        GamePlayer.getInstance().SelfClubId = 0;
        GamePlayer.getInstance().CurClubInfo = null;
        GamePlayer.getInstance().CurClubMemList = null;
        this.sendGetClubList();
    },

    sendGetClubList: function sendGetClubList() {
        MessageFactory.createMessageReq(window.US_REQ_CLUB_LIST_CMD_ID).send();
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ClubView.callBackBtn,BtnName = " + BtnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnAdd") {
            this.createAddView();
        } else if (BtnName == "BtnNewClub") {
            this.createClubCreateView();
        } else if (BtnName == "BtnAddClub") {
            this.createSearchPop();
        }
    },

    createSearchPop: function createSearchPop() {
        var ClubFindPopView = cc.instantiate(this.ClubFindPopView);
        this.node.addChild(ClubFindPopView);
        ClubFindPopView.setPosition(cc.p(0, 0));
    },

    createAddView: function createAddView() {

        var ClubAddView = cc.instantiate(this.ClubAddView);
        this.node.addChild(ClubAddView);
        var winSize = cc.director.getWinSize();
        ClubAddView.setPosition(cc.p(0, 0));
    },

    createClubCreateView: function createClubCreateView() {
        var ClubCreateView = cc.instantiate(this.ClubCreateView);
        this.node.addChild(ClubCreateView);
        var winSize = cc.director.getWinSize();
        ClubCreateView.setPosition(cc.p(0, 0));
    },

    onMessage: function onMessage(event) {
        cc.log("ClubView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_CREATE_CLUB_CMD_ID:
                this.onCreateClubMsg(msg);
                break;

            case US_RESP_CLUB_LIST_CMD_ID:
                this.onClubListMsg(msg);
                break;

            case US_RESP_SEARCH_CLUB_CMD_ID:
                this.onSearchClubMsg(msg);
                break;

            // case CLUB_REQ_JOIN_CLUB_CMD_ID:
            //     this.onJoinClubMsg(msg);
            //     break;

            case window.US_RESP_FIND_TABLE_CMD_ID:
                this.onFindRoom(msg);
                break;

            case window.CLUB_RESP_DISMISS_CLUB_CMD_ID:
                this.onDismissClubMsg(msg);
                break;

        }
    },

    onFindRoom: function onFindRoom(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.dismiss();
        }
    },

    onDismissClubMsg: function onDismissClubMsg(msg) {
        cc.log("ClubInfoView.onDismissClubMsg msg=", msg);
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.param.role == window.ClubRole.E_CLUB_OWNER_ROLE) {
                ToastView.show("群主" + msg.param.name + "解散了" + msg.param.clubname) + "俱乐部";
                this.sendGetClubList();
            } else if (msg.param.uid == GamePlayer.getInstance().uid) {
                //如果是我自己
                ToastView.show("您退出俱乐部" + msg.param.clubname + "成功");
                this.sendGetClubList();
            }
        }
    },

    onSearchClubMsg: function onSearchClubMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("ClubView.onSearchClubMsg");
            this.setInitNodeVisible(false);

            var iCount = this.scrollView.content.getChildrenCount() - (this.initNode == null ? 0 : 1);
            var ClubCell = cc.instantiate(this.ClubCell);
            this.scrollView.content.addChild(ClubCell);
            ClubCell.setPosition(cc.p(0, 0 - ClubCell.getContentSize().height * (iCount + 0.5)));

            var self = this;
            ClubCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                cc.log("ClubView.onSearchClubMsg TOUCH_END.");

                GamePlayer.getInstance().CurClubInfo = event.target.getComponent("ClubCell").info;

                self.createClubOtherView(event.target.getComponent("ClubCell").info);
            }.bind(this));

            ClubCell.getComponent("ClubCell").setClubCellInfo(msg.param);
        }
    },

    setInitNodeVisible: function setInitNodeVisible(bVisible) {
        if (this.initNode) {
            this.initNode.active = bVisible;
            cc.log("ClubView initNode=", bVisible);
        }
    },

    onCreateClubMsg: function onCreateClubMsg(msg) {
        cc.log("ClubView.onCreateClubMsg");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            ToastView.show("俱乐部创建成功");
            this.sendGetClubList();
        }
    },

    createClubRoomView: function createClubRoomView() {
        cc.log("ClubView.createClubRoomView");
        var ClubRoomView = cc.instantiate(this.ClubRoomView);
        this.node.addChild(ClubRoomView);
        ClubRoomView.setPosition(cc.p(0, 0));
    },

    createClubOtherView: function createClubOtherView() {
        cc.log("ClubView.createClubOtherView");
        var ClubOtherView = cc.instantiate(this.ClubJoinView);
        this.node.addChild(ClubOtherView);
        ClubOtherView.setPosition(cc.p(0, 0));
    },

    onClubListMsg: function onClubListMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            cc.log("ClubView.onClubListMsg length=", msg.list.length);
            if (msg.list.length == 0) {
                return;
            }

            this.setInitNodeVisible(false);
            this.scrollView.content.removeAllChildren(true);
            var height = 0;
            for (var index = 0; msg.list != null && index < msg.list.length; index++) {
                var ClubCell = cc.instantiate(this.ClubCell);
                this.scrollView.content.addChild(ClubCell);
                ClubCell.setPosition(cc.p(0, 0 - ClubCell.getContentSize().height * (index + 0.5)));
                var self = this;

                ClubCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                    GamePlayer.getInstance().CurClubInfo = event.target.getComponent("ClubCell").info;

                    self.createClubRoomView();
                }.bind(this));
                height = ClubCell.getContentSize().height;
                ClubCell.getComponent("ClubCell").setClubCellInfo(msg.list[index]);
            }
            if (height * msg.list.length > this.scrollView.content.height) {
                this.scrollView.content.height = height * msg.list.length;
            }
        }
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        if (msg.popView == "ClubAddView") {
            if (msg.btn == "NewClub") {
                this.createClubCreateView();
            } else if (msg.btn == "AddClub") {
                this.createSearchPop();
            }
        } else if (msg.popView == "ClubRoomView") {
            if (msg.btn == "BtnClose") {
                cc.log("ClubView.onSceneMsg ClubRoomView BtnClose.");
                GamePlayer.getInstance().SelfClubId = 0;
                GamePlayer.getInstance().CurClubInfo = null;
                GamePlayer.getInstance().CurClubMemList = null;
                this.scrollView.content.removeAllChildren(true);
                this.scrollView.content.addChild(this.initNode);
                this.setInitNodeVisible(true);
                this.sendGetClubList();
            }
        } else if (msg.popView == "ClubJoinView") {
            if (msg.btn == "RespJoin") {
                cc.log("ClubView.onSceneMsg ClubJoinView RespJoin");
                GamePlayer.getInstance().SelfClubId = 0;
                GamePlayer.getInstance().CurClubInfo = null;
                GamePlayer.getInstance().CurClubMemList = null;
                this.scrollView.content.removeAllChildren(true);
                this.scrollView.content.addChild(this.initNode);
                this.setInitNodeVisible(true);
                this.sendGetClubList();
            }
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"Cmd_Bullfight":[function(require,module,exports){
"use strict";
cc._RFpush(module, '64b8bSQ5q5EKb/NUEkr4lpo', 'Cmd_Bullfight');
// Script\GameScene\Bullfight\Cmd\MessageFactory\Cmd_Bullfight.js

'use strict';

/**
 * Created by shrimp on 17/3/1.
 */
var Cmd_Common = require('Cmd_Common');

module.exports = {

    SBF_REQ_READY_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x1, //准备
    SBF_RESP_READY_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x2,
    SBF_NOTIFY_GAME_START_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x4, //通知玩家,游戏开始,发三张牌

    SBF_REQ_CALL_BANKER_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x5, //抢庄 (不抢，普通，超级)
    SBF_RESP_CALL_BANKER_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x6, //返回

    SBF_NOTIFY_CONFIRM_BANKER_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x8, //通知玩家,确定庄家

    SBF_REQ_BET_COIN_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x9, //下注（不点下注，默认最小）
    SBF_RESP_BET_COIN_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0xa,

    SBF_NOTIFY_OPEN_CARD_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0xc, //通知看牌

    SBF_REQ_OPEN_CARD_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0xd, //开牌
    SBF_RESP_OPEN_CARD_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0xe, //

    SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x10, //通知一局结束结果

    SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x16, //通知未选择抢庄的玩家为不抢
    SBF_NOTIFY_NOT_BET_COIN_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x18, //未下注的玩家

    SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x12, //通知总结果

    //请求桌子详情
    US_REQ_TABLE_DETAIL_CMD_ID: window.ServerType.E_COMMON_GAME_TYPE << 16 | 0x15,
    US_RESP_TABLE_DETAIL_CMD_ID: window.ServerType.E_COMMON_GAME_TYPE << 16 | 0x16,
    //帮助,提示是否有牛
    SBF_REQ_HELP_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x5,
    SBF_RESP_HELP_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x6,

    US_REQ_PLAYER_LIST_CMD_ID: window.ServerType.E_COMMON_GAME_TYPE << 16 | 0x17, //获取玩家列表
    US_RESP_PLAYER_LIST_CMD_ID: window.ServerType.E_COMMON_GAME_TYPE << 16 | 0x18, //获取玩家列表


    //托管
    SBF_REQ_AI_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x7,
    SBF_RESP_AI_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x8,
    //通知踢人（群主主动踢，身上没钱踢）
    SBF_NOTIFY_KICKOUT_CMD_ID: window.ServerType.E_SIX_BULLFIGHT_TYPE << 16 | 0x14 //通知踢人

};

cc._RFpop();
},{"Cmd_Common":"Cmd_Common"}],"Cmd_Common":[function(require,module,exports){
"use strict";
cc._RFpush(module, '87944iIOzdOjYJOINFnK4Oh', 'Cmd_Common');
// Script\Network\Cmd\MessageFactory\Cmd_Common.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

window.ServerType = cc.Enum({
    //E_USER_SERVER_TYPE          : 1,
    //E_CENTER_SERVER_TYPE        : 3,
    //E_COMMON_GAME_TYPE          :100,
    //E_SIX_BULLFIGHT_TYPE        : 101,       //六人模式
    //E_BULLFIGHT_HUNDRED_TYPE    : 102,       //百人
    E_UNKNOWN_SERVER_TYPE: 0,
    E_USER_SERVER_TYPE: 1, //接入服务器
    E_DB_SERVER_TYPE: 2, //数据服务器
    E_CENTER_SERVER_TYPE: 3, //中心服务器,要保存数据一致性,如私人房ID,
    E_STATUS_SERVER_TYPE: 4, //状态服务器
    E_CLUB_SERVER_TYPE: 5, //俱乐部服务器

    E_COMMON_GAME_TYPE: 100, //游戏服类型
    E_SIX_BULLFIGHT_TYPE: 101, //六人模式
    E_BULLFIGHT_HUNDRED_TYPE: 102 });

//心跳
window.US_REQ_HEARTBEAT_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x1; //*
window.US_RESP_HEARTBEAT_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x2; //*
//用户登录认证
window.US_REQ_LOGIN_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x3; //*
window.US_RESP_LOGIN_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x4; //*
//服务器主动踢人
window.US_KICK_OUT_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x6;
//通知玩家之前在某个游戏中
window.US_NOTIFY_IN_GAME_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x8;

//通知桌主结束提示
window.US_NOTFIY_OWNER_TABLEINFO_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0x2;
//通知桌主确认玩家是否入座
window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0x4;
//创建私人桌
window.US_REQ_CREATE_TABLE_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0x7; //*
window.US_RESP_CREATE_TABLE_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0x8; //返回结果//*
//查找私人房
window.US_REQ_FIND_TABLE_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0x9;
window.US_RESP_FIND_TABLE_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0xa;

//进入游戏
window.US_REQ_ENTER_GAME_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x1;
window.US_RESP_ENTER_GAME_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x2;
//离开游戏
window.US_REQ_LEAVE_GAME_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x3;
window.US_RESP_LEAVE_GAME_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x4;

//请求坐下or站起
window.US_REQ_SIT_DOWN_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x5;
window.US_RESP_SIT_DOWN_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x6;

window.US_REQ_CARRY_COIN_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x7; //带入金币
window.US_RESP_CARRY_COIN_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x8; //

//桌主确认
window.US_REQ_OWNER_CONFIRM_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x9;
window.US_RESP_OWNER_CONFIRM_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0xa;

//群主主动踢人
window.US_REQ_OWNER_KICKOUT_PLAYERCMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0xb;
window.US_RESP_OWNER_KICKOUT_PLAYERCMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0xc;

window.US_NOTIFY_OWNER_KICKOUT_PLAYER_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0xe;

//开始牌局/解散
window.US_REQ_GAME_SWITCH_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0xf;
window.US_RESP_GAME_SWITCH_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x10;

window.US_NOTIFY_GAME_SWITCH_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x12;

//聊天
window.US_REQ_GAME_CHAT_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x13;
window.US_RESP_GAME_CHAT_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x14;

window.US_REQ_FOUND_TABLE_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x85; //发现
window.US_RESP_FOUND_TABLE_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x86;

window.US_REQ_SCORE_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8b; //请求战绩列表
// 返回战绩列表
window.US_RESP_SCORE_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8c; //

window.US_REQ_SCORE_DETAIL_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8d; //获取战绩详情
window.US_RESP_SCORE_DETAIL_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8e; //

window.US_REQ_SHOP_CONF_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x89; //获取商场配置
window.US_RESP_SHOP_CONF_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8a;

window.US_REQ_CREATE_CLUB_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x81; //创建俱乐部
window.US_RESP_CREATE_CLUB_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x82; //

window.US_REQ_CLUB_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x83; //获取俱乐部列表
window.US_RESP_CLUB_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x84; //

window.US_REQ_CLUB_TABLE_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x87; //获取俱乐部桌子列表
window.US_RESP_CLUB_TABLE_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x88;

window.US_REQ_SEARCH_CLUB_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x99; //搜索俱乐部
window.US_RESP_SEARCH_CLUB_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9A;

window.US_REQ_CLUB_UPGRADE_COST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9F; //获取俱乐部升级开销
window.US_RESP_CLUB_UPGRADE_COST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0xA0;

window.CLUB_REQ_MODIFY_INFO_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x1; //修改俱乐部
window.CLUB_RESP_MODIFY_INFO_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x2;

window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x3; //请求俱乐部成员列表
window.CLUB_RESP_GET_MEMBER_LIST_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x4;

window.CLUB_REQ_JOIN_CLUB_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x5; //请求加入俱乐部
window.CLUB_RESP_JOIN_CLUB_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x6;

window.CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x7; //通知群主确认是否允许加入

window.CLUB_REQ_OWNER_CONFIRM_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x9; //群主确认
window.CLUB_RESP_OWNER_CONFIRM_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xa;

window.CLUB_REQ_OWNER_RM_MEMBER_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xb; //删除成员
window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xc; //

window.CLUB_REQ_OWNER_MODIFY_ROLE_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xd; //修改玩家权限
window.CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xe; //

window.US_REQ_NEW_MSG_NUM_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x91; //获取新消息数量
window.US_RESP_NEW_MSG_NUM_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x92;

window.US_REQ_MSG_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x93; //获取消息列表
window.US_RESP_MSG_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x94; //不同的消息类型返回的结果不一样

window.US_REQ_SET_MSG_READ_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x95; //设置消息已读
window.US_RESP_SET_MSG_READ_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x96;

window.US_REQ_USER_DETAIL_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9B; //获取用户详情
window.US_RESP_USER_DETAIL_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9C; //

window.US_REQ_CREATE_COST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9D; //获取创建桌子开销
window.US_RESP_CREATE_COST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x9E; //

window.CLUB_REQ_DISMISS_CLUB_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0xf; //解散俱乐部
window.CLUB_RESP_DISMISS_CLUB_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x10;

window.CLUB_REQ_CREATE_TABLE_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x11; //创建私人桌
window.CLUB_RESP_CREATE_TABLE_CMD_ID = ServerType.E_CLUB_SERVER_TYPE << 16 | 0x12; //如果创建成功，回广播给所有在线的俱乐部玩家

window.US_NOTIFY_PAY_OPERATE_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0xc; //通知玩家支付结果

//金币兑换
window.US_REQ_EXCHANGE_GOLD_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x8f; //金币兑换协议(给客户端使用)
window.US_RESP_EXCHANGE_GOLD_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x90;

// 解散牌局
// window.US_REQ_DISMISS_GAME_CMD_ID      = ServerType.E_COMMON_GAME_TYPE<<16 | 0x15;
// window.US_RESP_DISMISS_GAME_CMD_ID     = ServerType.E_COMMON_GAME_TYPE<<16 | 0x16;

//解散
window.US_REQ_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x21; //请求解散牌桌
window.US_RSP_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x22; //
window.US_NOTIFY_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x23; //通知

window.US_REQ_CONFIRM_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x24; //处理解散请求
window.US_RSP_CONFIRM_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x25; //
window.US_NOTIFY_CONFIRM_DISMISS_TABLE_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x26; //通知

// 通知解散牌局
window.US_NOTIFY_DISMISS_GAME_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x12;

window.US_REQ_OWNER_CONFIRM_SWITCH_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x15; //是否开启入座
window.US_RESP_OWNER_CONFIRM_SWITCH_CMD_ID = ServerType.E_COMMON_GAME_TYPE << 16 | 0x16;

// //通知桌主
// window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID   = ServerType.E_USER_SERVER_TYPE<<16 | 0xe;
//通知解散牌局
window.US_NOTIFY_DISMISS_GAME_CMD_ID = ServerType.E_USER_SERVER_TYPE << 16 | 0x17;

// 请求广告
window.US_REQ_BANNER_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x97;
// 广告返回列表
window.US_RESP_BANNER_LIST_CMD_ID = ServerType.E_DB_SERVER_TYPE << 16 | 0x98;

// 绑定推广人
window.US_REQ_BIND_REFERRAL_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0xD; //绑定推荐入

window.US_RESP_BIND_REFERRAL_CMD_ID = ServerType.E_CENTER_SERVER_TYPE << 16 | 0xE;

cc._RFpop();
},{}],"CreateClubReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1e502MCn9VDPoAA10Kq+lSA', 'CreateClubReqPacket');
// Script\Network\Cmd\Cmd_Req\CreateClubReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/31.
 */

var MessageReq = require("MessageReq");
var GameSystem = require('GameSystem');
/*
* type US_REQ_CREATE_CLUB_T struct {
 JsonHead
 Param PARAM_REQ_CREATE_CLUB_T `json:"param"`
 }
 type PARAM_REQ_CREATE_CLUB_T struct {
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Address string `json:"address"`
 Level   int    `json:"level"`
 Intro   string `json:"intro"`
 }
* */

function CreateClubReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CREATE_CLUB_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("CarryCoinReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = CreateClubReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"CreateClubRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '80697Sni+RHgouITUDxT4ki', 'CreateClubRespPacket');
// Script\Network\Cmd\Cmd_Resp\CreateClubRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/31.
 */
/*
* type US_RESP_CREATE_CLUB_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_CREATE_CLUB_T `json:"param"`
 }
 type PARAM_RESP_CREATE_CLUB_T struct {
 ClubId   int    `json:"clubid"`
 OwnerUid uint32 `json:"owneruid"`
 EndTime  int64  `json:"endtime"`
 }*/
var MessageResp = require("MessageResp");

function CreateClubRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CREATE_CLUB_CMD_ID;
    //接收的数据
    this.onMessage = function (msg) {
        cc.log("CreateClubRespPacket.onMesssage");
        //{"cmd":6553608,"seq":0,"uid":10006,"code":0,"desc":"执行成功","carryuid":10006,"carrycoin":100}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        this.clubid = msg.param.clubid;
        this.owneruid = msg.param.owneruid;
        this.endtime = msg.param.endtime;
    };
}

module.exports = CreateClubRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"CreateRoomReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a2a0354PgNPLqf6ENbW45Mr', 'CreateRoomReqPacket');
// Script\Network\Cmd\Cmd_Req\CreateRoomReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/23.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
/*
* type US_REQ_CREATE_TABLE_T struct {
 JsonHead
 ClubId        int    `json:"clubid"`                     //俱乐部id, 如果玩家创建，=0
 ClubLevel int    `json:"clublevel"`             //俱乐部level, 如果玩家创建，=0
 GameId      uint16 `json:"gameid"`             //服务器id (六人桌抢庄=101)
 GameLevel uint16 `json:"gamelevel"`     //游戏等级,暂时无
 Param          string `json:"param"`		      //base64之后的参数
 }
 //六人牛牛私人桌参数
 type SBF_PRIVATE_TABLE_PARAM_T struct {
 PayMode   int     `json:"paymode"`  //付费模式 (默认钻石)
 GameType  int32   `json:"gametype"` //闭牌抢庄,三张抢庄(二选一)
 MinAnte   int     `json:"mixante"`  //最小下注
 LiveTime  int64   `json:"livetime"` //桌子使用时间(秒)
 Seats     int8    `json:"seats"`    //座位数
 TableName string  `json:"name"`     //桌子名称
 BullMul   []int32 `json:"bullmul"`  //从无牛开始，传一个数组
 }
* */

function CreateRoomReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CREATE_TABLE_CMD_ID;

    //准备发送的数据
    this.send = function (msg, type) {
        cc.log("CreateRoomReqPacket.send");
        cc.log(type);

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: type.clubid,
            clublevel: type.clublevel,
            gameid: type.gameid,
            gamelevel: type.gamelevel,
            param: BASE64.encoder(JSON.stringify(msg))
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = CreateRoomReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"CreateRoomRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8f748x1krVM66+F8dQOIUmA', 'CreateRoomRespPacket');
// Script\Network\Cmd\Cmd_Resp\CreateRoomRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/23.
 */

var MessageResp = require("MessageResp");
/*
*
* type US_RESP_CREATE_TABLE_T struct {
 JsonHead
 RespHead
 ClubId     int    `json:"clubid"`           //如果是普通玩家，=0
 ClubLevel  int    `json:"clublevel"`  //俱乐部等级
 PrivateIds []int  `json:"privateids"` //如果ret_success, privateIds[0]是新生成的6位数值，
 //如果RET_FULL_PRIVATE_TABLE = -48 代表您创建的私人桌已经达到上线,
 //	privateids是所以创建过的6位数, 界面提示玩家已经创建了哪些私人桌
 GameId     uint16 `json:"gameid"`
 GameLevel  uint16 `json:"gamelevel"`
 GameSvcId  uint32 `json:"gamesvcid"` //游戏服务器ID
 TableId    int32  `json:"tableid"`   //游戏中某张桌子ID
 }*/
function CreateRoomRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CREATE_TABLE_CMD_ID;
    this.privateid = 0; //六位数的桌子ID(房间)
    this.gamesvcid = 0; //游戏服务器ID
    this.tableid = 0; //游戏中某张桌子ID
    this.gamelevel = 1;
    this.gameid = 0;
    //接收的数据
    this.onMessage = function (msg) {
        //{"cmd":196616,"seq":4,"uid":11407,"code":0,"desc":"执行成功",
        // "clubid":0,"clublevel":0,"privateids":[917473],"gameid":101,
        // "gamelevel":2,"gamesvcid":7,"tableid":917473}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.gameid = msg.gameid;
        this.clubid = msg.clubid;
        this.clublevel = msg.clublevel;
        this.privateid = msg.privateids;
        this.gamesvcid = msg.gamesvcid;
        this.tableid = msg.tableid;
        this.gamelevel = msg.gamelevel;
        this.gameid = msg.gameid;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = CreateRoomRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"CreateTableCostReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1da505Vlx5BzJ5Dkukfu2PY', 'CreateTableCostReqPacket');
// Script\Network\Cmd\Cmd_Req\CreateTableCostReqPacket.js

"use strict";

var MessageReq = require("MessageReq");

function CreateTableCostReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CREATE_COST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("CreateTableCostReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };
        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = CreateTableCostReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"CreateTableCostRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c1a62dQYjBL3LhoAnESSeeF', 'CreateTableCostRespPacket');
// Script\Network\Cmd\Cmd_Resp\CreateTableCostRespPacket.js

"use strict";

/*

 type US_RESP_CREATE_COST_T struct {
     JsonHead
     RespHead
     List []PRIVATE_TABLE_COST_T `json:"list"`
 }

 type PRIVATE_TABLE_COST_T struct {
     Type    int `json:"type"`    //1: live time 2: min ante
     Value   int `json:"value"`   //second or ante
     Diamond int `json:"diamond"` //消耗钻石
     Gold    int `json:"gold"`    //消耗金币
 }

*/

var MessageResp = require("MessageResp");

function CreateTableCostRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CREATE_COST_CMD_ID;
    this.list = [];

    //接收的数据
    this.onMessage = function (msg) {
        cc.log("CreateTableCostRespPacket.onMessage");
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.list = msg.list;
    };
}

module.exports = CreateTableCostRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"CusWebView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b4660wMOK5LALQPkUWiuyqc', 'CusWebView');
// Script\ComScene\PopView\CusWebView.js

"use strict";

var BasePop = require('BasePop');
cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        WebView: cc.WebView
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.LeftInTo(this.node);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    calllbackBtn: function calllbackBtn(event, CustonEventData) {
        var BtnName = event.target.getName();
        if (BtnName == "BtnClose") {
            this.dismiss();
        }
    },

    setWebViewUrl: function setWebViewUrl(url) {
        this.WebView.url = url;
    }
});

cc._RFpop();
},{"BasePop":"BasePop"}],"DismissClubReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a40d8vf6d9OAoes1p6MxNCH', 'DismissClubReqPacket');
// Script\Network\Cmd\Cmd_Req\DismissClubReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/15.
 */
var MessageReq = require("MessageReq");

function DismissClubReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_DISMISS_CLUB_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("DismissGameReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = DismissClubReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"DismissClubRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7617bSTYVJHZKqXhs9wntxD', 'DismissClubRespPacket');
// Script\Network\Cmd\Cmd_Resp\DismissClubRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/15.
 */
var MessageResp = require("MessageResp");

// ClubId   int    `json:"clubid"`
// ClubName string `json:"clubname"`
// Role     uint8  `json:"role"`
// Uid      uint32 `json:"uid"`
// Name     string `json:"name"`

function DismissClubRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_DISMISS_CLUB_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        cc.log("DismissClubRespPacket param=", this.param);
    };
}

module.exports = DismissClubRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"DismissGameReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '891adOTLJRJqo2ZsdIklhcV', 'DismissGameReqPacket');
// Script\Network\Cmd\Cmd_Req\DismissGameReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageReq = require("MessageReq");

function DismissGameReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_DISMISS_GAME_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("DismissGameReqPacket.send");
        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = DismissGameReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"DismissGameRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'efcbfdlQlJMgIREAMjfQc3c', 'DismissGameRespPacket');
// Script\Network\Cmd\Cmd_Resp\DismissGameRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");

function DismissGameRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_DISMISS_GAME_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = DismissGameRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"EnterRoomReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1fd68M1xgJMo5TiX3DAh93S', 'EnterRoomReqPacket');
// Script\Network\Cmd\Cmd_Req\EnterRoomReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/26.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function EnterRoomReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_ENTER_GAME_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("EnterRoomReqPacket.send," + JSON.stringify(msg));

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid

        };
        //cc.log("EnterRoomReqPacket," + JSON.stringify(this.data));
        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = EnterRoomReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"EnterRoomRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e3e58IgCJdJv7mLMjNKd0L/', 'EnterRoomRespPacket');
// Script\Network\Cmd\Cmd_Resp\EnterRoomRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/26.
 */
var MessageResp = require("MessageResp");

function EnterRoomRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_ENTER_GAME_CMD_ID;
    this.tableid = 0;
    this.name = "";
    this.gametype = 0;
    this.mixante = 0;
    this.livetime = 0;
    this.remaintime = 0;
    this.bstart = 0;
    this.seats = 0;
    this.bullmul = [];
    this.bowner = 0;
    this.supercost = 0;
    this.giftcosts = [];
    this.seaters = "";
    //接收的数据
    this.onMessage = function (msg) {

        //{"cmd":6553602,"seq":18,"uid":10006,"code":0,"desc":"",
        // {"tableid":0,"name":"qweq","tstatus":0,"gametype":1,"minante":1,"mincarry":50,
        // "livetime":1800,"remaintime":1800,"bstart":0,"seats":6,"bullmul":[1,1,1,1,1,1,1,1,2,3,0,4,0,0,0,0],
        // "bowner":1,"bsitdown":0,"ustatus":0,"gold":10000,"diamond":9992,"seaters":[]}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;

        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;

        if (this.param != "" && this.param != undefined) {
            cc.log("EnterRoomRespPacket" + BASE64.decoder(msg.param));
            var json = JSON.parse(BASE64.decoder(msg.param));
            this.tableid = json.tableid;
            this.name = json.name;
            this.gametype = json.gametype;
            this.mixante = json.mixante;
            this.livetime = json.livetime;
            this.remaintime = json.remaintime;
            this.bstart = json.bstart;
            this.seats = json.seats;
            this.bullmul = json.bullmul;
            this.bowner = json.bowner;
            this.seaters = json.seaters;
            this.ustatus = json.ustatus;
            this.tstatus = json.tstatus;
            this.supercost = json.supercost;
            this.giftcosts = json.giftcosts;
            this.mincarry = json.mincarry;
            this.maxcarry = json.maxcarry;
            this.totalcarry = json.totalcarry;
        }

        /*
        * TableId    int32      `json:"tableid"`    //桌子ID
         TableName  string     `json:"name"`       //桌子名称
         GameType   int32      `json:"gametype"`   //桌子类型(闭牌抢庄,四张抢庄)
         MixAnte    int        `json:"mixante"`    //最小下注
         LiveTime   int        `json:"livetime"`   //桌子总时间
         RemainTime int        `json:"remaintime"` //剩余时间
         Bstart     int8       `json:"bstart"`     //桌子是否开始
         Seats      int8      `json:"seats"`       //座位数
         BullMul    []int32    `json:"bullmul"`    //倍率
         Bowner     int8       `json:"bowner"`     //是否是桌主
         Seaters    []SEATER_T `json:"seaters"`    //桌位上的玩家信息
        * */
    };
}

module.exports = EnterRoomRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ExchangeGoldReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a8688NjKFhPv4wjlqe7j723', 'ExchangeGoldReqPacket');
// Script\Network\Cmd\Cmd_Req\ExchangeGoldReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/5/6.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
/*
* type US_REQ_EXCHANGE_GOLD_T struct {
 JsonHead
 Param PARAM_REQ_EXCHANGE_GOLD_T `json:"param"`
 }
 type PARAM_REQ_EXCHANGE_GOLD_T struct {
 Type int `json:"type"` //传递的是获取商城配置的goldlist中的type
 }
* */
function ExchangeGoldReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_EXCHANGE_GOLD_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("ExchangeGoldReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ExchangeGoldReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ExchangeGoldRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c045f17bmZDtr70TurFpTU2', 'ExchangeGoldRespPacket');
// Script\Network\Cmd\Cmd_Resp\ExchangeGoldRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/5/6.
 */
var MessageResp = require("MessageResp");
var GameSystem = require('GameSystem');
/*
*
* type US_RESP_EXCHANGE_GOLD_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_EXCHANGE_GOLD_T `json:"param"`
 }
 type PARAM_RESP_EXCHANGE_GOLD_T struct {
 Type    int `json:"type"`
 Gold    int `json:"gold"`
 Diamond int `json:"diamond"`
 }
* */
function ExchangeGoldRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_EXCHANGE_GOLD_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.type = msg.param.type;
        this.gold = msg.param.gold;
        this.diamond = msg.param.diamond;
        this.tips = msg.param.tips;
    };
}

module.exports = ExchangeGoldRespPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageResp":"MessageResp"}],"FindReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cbd465V4c5I36cGyR65YqKT', 'FindReqPacket');
// Script\Network\Cmd\Cmd_Req\FindReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/30.
 */
/*
 * type US_REQ_FOUND_TABLE_T struct {
 JsonHead
 Param PARAM_REQ_FOUND_TABLE_T `json:"param"`
 }
 type PARAM_REQ_FOUND_TABLE_T struct {
 Start int `json:"start"`
 Total int `json:"total"`
 }

 * */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function FindReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_FOUND_TABLE_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("FindRoomReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            start: msg.start,
            total: msg.total
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = FindReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"FindRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6e195GEGGxGv5dVwovV04Ej', 'FindRespPacket');
// Script\Network\Cmd\Cmd_Resp\FindRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
/*
* type US_RESP_FOUND_TABLE_T struct {
 JsonHead
 RespHead
 List []PRIVATE_TABLE_DETAIL_T `json:"list"`
 }
 type PRIVATE_TABLE_DETAIL_T struct {
 OwnerName  string `json:"ownername"`
 TableName  string `json:"tablename"`
 HeadUrl    string `json:"headurl"`
 MinAnte    int    `json:"minante"`
 RemainTime int    `json:"remaintime"`
 GameType   int    `json:"gametype"`
 GameId     int    `json:"gameid"`
 GameSvcId  int    `json:"gamesvcid"`
 TableId    int    `json:"tableid"`
 }

 * */
var MessageResp = require("MessageResp");
var GameSystem = require('GameSystem');

function FindRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_FOUND_TABLE_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //{"cmd":196618,"seq":2,"uid":10038,"code":0,"desc":"执行成功","privateid":247522,"gamesvcid":5,"tableid":1}
        this.list = msg.list;
    };
}

module.exports = FindRespPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageResp":"MessageResp"}],"FindRoomReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e73b6s2+PFJNo/jHMXJnDkp', 'FindRoomReqPacket');
// Script\Network\Cmd\Cmd_Req\FindRoomReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/26.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function FindRoomReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_FIND_TABLE_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("FindRoomReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            privateid: msg.privateid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = FindRoomReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"FindRoomRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '60314uN8bZC0rJACddRmQxE', 'FindRoomRespPacket');
// Script\Network\Cmd\Cmd_Resp\FindRoomRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/26.
 */
var MessageResp = require("MessageResp");
var GameSystem = require('GameSystem');

function FindRoomRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_FIND_TABLE_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //{"cmd":196618,"seq":2,"uid":10038,"code":0,"desc":"执行成功","privateid":247522,"gamesvcid":5,"tableid":1}
        this.privateid = msg.privateid;
        this.gamesvcid = msg.gamesvcid;
        this.tableid = msg.tableid;
        GameSystem.getInstance().privateid = this.privateid;
        GameSystem.getInstance().gamesvcid = this.gamesvcid;
        GameSystem.getInstance().tableid = this.tableid;
    };
}

module.exports = FindRoomRespPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageResp":"MessageResp"}],"FindView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f1588kaTdNGf6lWRIW6AtQQ', 'FindView');
// Script\ComScene\PopView\FindView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var ToastView = require('ToastView');
var GamblingHouseCell = require('GamblingHouseCell');
var AdvertItem = require('AdvertItem');
cc.Class({
    extends: BasePop,

    properties: {
        TableCell: cc.Prefab,
        ScrollView: cc.ScrollView,
        initNode: cc.Node,
        ShareView: cc.Prefab,

        Page1: cc.Sprite,
        Page2: cc.Sprite,
        Page3: cc.Sprite,

        advertItem: cc.Prefab,
        pageView: cc.PageView,
        pageViewContent: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log("FindView.OnLoad2");

        this._super();
        this.onSendReqFoundTable(0, 50);

        //cc.log(window.US_REQ_BANNER_LIST_CMD_ID);
        //MessageFactory.createMessageReq(window.US_REQ_BANNER_LIST_CMD_ID).send();
    },

    onSendReqFoundTable: function onSendReqFoundTable(nStart, nTotal) {
        var data = {
            start: nStart,
            total: nTotal
        };
        MessageFactory.createMessageReq(window.US_REQ_FOUND_TABLE_CMD_ID).send(data);
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;

        if (msg.popView == "GamblingHouseCell") {
            if (msg.btn == "enterRoom") {
                this.dismiss();
            } else if (msg.btn == "winxinShared") {

                cc.log("FindView.onSceneMsg but=" + msg.btn);

                var shareView = cc.instantiate(this.ShareView);
                cc.director.getScene().addChild(shareView);
                var winSize = cc.director.getWinSize();
                shareView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
            }
        }
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("FindView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;

        switch (cmd) {
            case US_RESP_FOUND_TABLE_CMD_ID:
                this.onFoundTableMsg(msg);
                break;

            case US_RESP_BANNER_LIST_CMD_ID:
                this.onShopListMsg(msg);
                break;
        }
    },

    onShopListMsg: function onShopListMsg(msg) {

        cc.log("onShopListMsg2");

        /*
           if(msg.code == SocketRetCode.RET_SUCCESS)
           {
               //cc.log(msg.bannerlist);
                 //this.updateBannerList(msg.bannerlist);
           }
           */
    },

    addAdvertItem: function addAdvertItem(info, index) {
        //jumpurl pic
        var winSize = cc.director.getWinSize();
        var advertItem = cc.instantiate(this.advertItem);
        this.pageView.addPage(advertItem);
        var winSize = cc.director.getWinSize();
        advertItem.setPosition(cc.p(winSize.width / 2 + winSize.width * index, 0));
        advertItem.getComponent('AdvertItem').updateAdverItem(info);
    },

    updateBannerList: function updateBannerList(bannerlist) {
        this.pageView.removeAllPages();

        for (var index = 0; index < bannerlist.length; index++) {
            this.addAdvertItem(bannerlist[index], index);
        }

        //this.getSpriteFrame2("http://manage.aqddp.cn/getpic.php?url=http://manage.aqddp.cn/files/banner1.jpg");
    },

    getSpriteFrame2: function getSpriteFrame2(url, successCb, failureCb, target, otherSender) {
        //url = this.kyHelper + url;


        //cc.log(page1);

        var xhr = new XMLHttpRequest();

        var self = this;

        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 400) {
                var response = xhr.responseText;

                var img = BASE64.decoder(response);

                //cc.log("img=", img);

                var text = new Uint8Array(response, 0, response.length);

                var img = new Image();
                img.src = BASE64.decoder(response);

                var texture = new cc.Texture2D();
                texture.initWithImage(img); //cc.Texture2D.SRC_ALPHA, 1, 1, cc.size(1080, 300));
                texture.handleLoadedTexture();

                var newframe = new cc.SpriteFrame(texture);
                self.Page1.spriteFrame = newframe;

                // if (successCb != null) {
                //     successCb.apply(target, [newframe, otherSender]);
                // }
            } else {
                    // if(failureCb != null)
                    // {
                    //     failureCb.apply(target);
                    // }
                }
        };

        xhr.timeout = 5000;
        xhr.open("GET", url, true);
        xhr.send();
    },

    onFoundTableMsg: function onFoundTableMsg(msg) {
        if (msg.list.length === 0) {
            ToastView.show("暂未发现房间");
            return;
        }

        if (this.initNode != null && this.initNode != undefined) this.initNode.active = false;

        var height = 0;
        for (var index = 0; index < msg.list.length; index++) {
            var TableCell = cc.instantiate(this.TableCell);
            this.ScrollView.content.addChild(TableCell);
            height = TableCell.getContentSize().height;
            TableCell.setPosition(cc.p(0, -TableCell.getContentSize().height / 2 - TableCell.getContentSize().height * index));
            TableCell.getComponent("GamblingHouseCell").updateRoomInfo(msg.list[index]);
        }

        if (height * (msg.list.length + 1) > this.ScrollView.content.height) {
            this.ScrollView.content.height = height * (msg.list.length + 1);
        }
    },

    callbackScrollView: function callbackScrollView(scrollview, eventType, customEventData) {
        cc.log("FindView ," + eventType + "," + customEventData);
        if (eventType === cc.ScrollView.EventType.SCROLL_TO_TOP) {} else if (eventType === cc.ScrollView.EventType.SCROLL_TO_BOTTOM) {}
    }
});

cc._RFpop();
},{"AdvertItem":"AdvertItem","BasePop":"BasePop","GamblingHouseCell":"GamblingHouseCell","MessageFactory":"MessageFactory","ToastView":"ToastView"}],"GVoiceJsb":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2231d3ce61JoYOTkOwpexQo', 'GVoiceJsb');
// Script\Platform\GVoiceJsb.js

'use strict';

/**
 * Created by shrimp on 17/4/26.
 */

var SocketManager = require('SocketManager');
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');

function GloudVoice() {}

GloudVoice.prototype.onStartRecord = function (progress) {
    cc.log("GloudVoice.prototype.onStartRecord,progress = " + progress);
    //显示开始录音
    //SocketManager.getInstance().startSocket();
};

GloudVoice.prototype.onStopRecording = function (progress) {
    cc.log("GloudVoice.prototype.onStopRecording,progress = " + progress);
    //停止录音
    //SocketManager.getInstance().startSocket();
};

GloudVoice.prototype.OnUploadFile = function (code, filePath, fileID) {
    cc.log("GloudVoice.prototype.OnUploadFile,code = " + code);
    cc.log("GloudVoice.prototype.OnUploadFile,filePath = " + filePath);
    cc.log("GloudVoice.prototype.OnUploadFile,fileID = " + fileID);
    if (code == 11) {
        //上传服务器转发


        //var filePath = filePath + "@" + 1.0;
        var voiceData = {
            filePath: filePath,
            fileID: fileID
        };
        //Net.sendAudio(Table.getInstance().room_id, fileId, filePath);
        var data = {
            touid: GamePlayer.getInstance().uid,
            kind: ChatType.E_CHAT_VOICE_KIND,
            type: 0,
            text: BASE64.encoder(JSON.stringify(voiceData))
        };
        MessageFactory.createMessageReq(US_REQ_GAME_CHAT_CMD_ID).send(data);
    }

    //显示上传通知
};

GloudVoice.prototype.OnDownloadFile = function (code, filePath, fileID) {
    cc.log("GloudVoice.prototype.OnDownloadFile,code = " + code);
    cc.log("GloudVoice.prototype.OnDownloadFile,filePath = " + filePath);
    cc.log("GloudVoice.prototype.OnDownloadFile,fileID = " + fileID);
    if (code == 13 || code == 11) {} else {
        //取消播放;
        //取消声音播放界面
        var message = {
            popView: "GloudVoice",
            btn: "OnPlayRecordedFile"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
    }
};

GloudVoice.prototype.OnPlayRecordedFile = function (code, filePath) {
    cc.log("GloudVoice.prototype.OnPlayRecordedFile,code = " + code);
    cc.log("GloudVoice.prototype.OnPlayRecordedFile,filePath = " + filePath);
    if (code == 18) {
        //取消声音播放界面
        var message = {
            popView: "GloudVoice",
            btn: "OnPlayRecordedFile"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
    } else {
        //取消声音播放界面
        var message = {
            popView: "GloudVoice",
            btn: "OnPlayRecordedFile"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
    }
};

var GVoiceJsb = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new GloudVoice();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

module.exports = GVoiceJsb;

cc._RFpop();
},{"GamePlayer":"GamePlayer","MessageFactory":"MessageFactory","SocketManager":"SocketManager"}],"GamblingHouseCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c0807iHBp1GWqeHpsjljBcb', 'GamblingHouseCell');
// Script\ComScene\PopView\GamblingHouseCell.js

'use strict';

var UtilTool = require('UtilTool');
var ToastView = require('ToastView');
var AlertView = require('AlertView');
var LoadingView = require('LoadingView');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: cc.Component,

    properties: {
        Head: cc.Sprite,
        RoomName: cc.Label,
        PrivateCode: cc.Label,
        CreatorName: cc.Label,
        MinBet: cc.Label,
        timeLabel: cc.Label,
        bankerMode: cc.Label,
        ClubFlag: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.initBaseData();
    },

    initBaseData: function initBaseData() {
        this.roomInfo = null;
        this.time = 0;
    },

    //"list":[
    // {"ownername":"游客10688","tablename":"游客10688","headurl":"",
    // "minante":1,"remaintime":1800,"gametype":1,"gameid":101,"gamesvcid":5,"tableid":0},
    // {"ownername":"游客10688","tablename":"游客10688","headurl":"","minante":1,"remaintime":1800,
    // "gametype":1,"gameid":101,"gamesvcid":5,"tableid":0}]}

    //called every frame, uncomment this function to activate update callback
    updateTime: function updateTime() {
        this.time--;
        this.timeLabel.string = UtilTool.getTime(this.time);
        if (this.time < 0) {
            this.timeLabel.string = "已结束";
            this.unschedule(this.updateTime);
        }
    },

    strLength: function strLength(str) {
        var l = str.length;
        var blen = 0;
        for (var i = 0; i < l; i++) {
            if ((str.charCodeAt(i) & 0xff00) != 0) {
                blen++;
            }
            blen++;
        }
        return blen;
    },

    subName: function subName(name) {
        var len = this.strLength(name);
        if (len > 8) {
            name = name.substr(0, 8);
            name += "..";
        }
        return name;
    },

    updateRoomInfo: function updateRoomInfo(cellMsg) {
        this.roomInfo = cellMsg;

        cc.log("GamblingHouseCell.updateRoomInfo,cellMsg = " + cellMsg);
        this.RoomName.string = this.subName(cellMsg.tablename);
        cc.log("GamblingHouseCell.updateRoomInfo name=", this.subName(cellMsg.tablename));

        this.CreatorName.string = cellMsg.ownername;
        this.PrivateCode.string = cellMsg.privateid;
        this.MinBet.string = cellMsg.minante;
        this.time = cellMsg.remaintime;
        this.timeLabel.string = UtilTool.getTime(cellMsg.remaintime);

        if (cellMsg.starttime > 0) {
            this.schedule(this.updateTime, 1);
        }
        this.MinBet.string = cellMsg.minante;
        this.time = cellMsg.remaintime;
        this.timeLabel.string = UtilTool.getTime(cellMsg.remaintime);
        UpdateWXHeadIcon(cellMsg.headurl, this.Head);

        if (cellMsg.gametype == 1) {
            this.bankerMode.string = "闭牌抢庄";
        } else {
            this.bankerMode.string = "三张抢庄";
        }

        if (Number(cellMsg.clubid) > 0) {
            this.ClubFlag.node.active = true;
        } else {
            this.ClubFlag.node.active = false;
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        cc.log("GamblingHouseCell.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("GamblingHouseCell.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "GamblingHouseCell") {
            //{"ownername":"游客10688","tablename":"游客10688","headurl":"","minante":1,"remaintime":144,
            // "gametype":1,"gameid":101,"gamesvcid":5,"tableid":0}]

            if (this.time < 0) {
                ToastView.show("游戏已结束");
            } else {
                var self = this;
                var alertExit = AlertView.create();
                alertExit.setPositiveButton(function () {
                    self.enterRoom();
                });
                alertExit.showOne("是否进入游戏？", AlertViewBtnType.E_BTN_CLOSE);
            }
        }
    },

    callBackGameMode: function callBackGameMode(event, CustomEventData) {
        cc.log("GamblingHouseCell.callBackGameMode, btnName = " + event.target.getName());
        cc.log("GamblingHouseCell.callBackGameMode, CustomEventData = " + CustomEventData);
        if (Number(CustomEventData) == 1) {
            var message = {
                popView: "GamblingHouseCell",
                btn: "winxinShared"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        }
    },

    enterRoom: function enterRoom() {
        var message = {
            popView: "GamblingHouseCell",
            btn: "enterRoom"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });

        LoadingView.show("正在进入...");

        var findRoomReq = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);
        var data = {
            privateid: this.roomInfo.privateid
        };

        if (findRoomReq) {
            findRoomReq.send(data);
        }
    }
});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ToastView":"ToastView","UtilTool":"UtilTool"}],"GameCallOC":[function(require,module,exports){
"use strict";
cc._RFpush(module, '75e62XRNkJA7Ia+JmzlQS+Y', 'GameCallOC');
// Script\Platform\GameCallOC.js

'use strict';

/**
 * Created by shrimp on 17/3/7.
 */
//这个获取的数据 都转发出去

var MessageFactory = require('MessageFactory');
var GameSystem = require('GameSystem');
var LoadingView = require('LoadingView');

function JSCallOC() {}

//检查是否可用
JSCallOC.prototype.checkIsAble = function () {
    var state = cc.sys.platform == cc.sys.IPHONE || cc.sys.platform == cc.sys.IPAD || cc.sys.platform == cc.sys.MOBILE_BROWSER || cc.sys.platform == cc.sys.DESKTOP_BROWSER;
    return state;
};

JSCallOC.prototype.checkAndroid = function () {
    return cc.sys.platform == cc.sys.ANDROID;
};

JSCallOC.prototype.getDeviceName = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var name = jsb.reflection.callStaticMethod("LocalInfo", "getDeviceName");
        cc.log("getDeviceName:%s", name);
        return name;
    } else if (this.checkAndroid()) {
        return "web";
    } else {
        return "web";
    }
};

JSCallOC.prototype.getAppVersionCode = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var appVersion = jsb.reflection.callStaticMethod("LocalInfo", "getAppVersionCode");
        cc.log("getAppVersionCode:%s", appVersion);
        return Number(appVersion);
    } else if (this.checkAndroid()) {
        // var appVersion = jsb.reflection.callStaticMethod("com/bigbeargame/szny/JniHelper", "getAppVersionCode", "()I");
        // return appVersion;
        return 1015;
    } else {
        return 1015;
    }
};

JSCallOC.prototype.getAppVersion = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var appVersion = jsb.reflection.callStaticMethod("LocalInfo", "getAppVersion");
        cc.log("getAppVersion:%s", appVersion);
        return appVersion;
    } else if (this.checkAndroid()) {
        // var appVersion = jsb.reflection.callStaticMethod("com/bigbeargame/szny/JniHelper", "getAppVersionName", "()Ljava/lang/String;");
        // return appVersion;
        return "1.0.15";
    } else {
        return "1.0.15";
    }
};

JSCallOC.prototype.getOSVersion = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var OSVersion = jsb.reflection.callStaticMethod("LocalInfo", "getOSVersion");
        cc.log("getOSVersion:%s", OSVersion);
        return OSVersion;
    } else if (this.checkAndroid()) {
        return "web1.0";
    } else {
        return "web1.0";
    }
};

JSCallOC.prototype.getAdapterType = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var adapterType = jsb.reflection.callStaticMethod("LocalInfo", "getAdapterType");
        cc.log("getAdapterType:%d", adapterType);
        return adapterType;
    } else {
        return 5;
    }
};

JSCallOC.prototype.getIOSVendor = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var IOSVendor = jsb.reflection.callStaticMethod("LocalInfo", "getIOSVendor");
        cc.log("getIOSVendor:%s", IOSVendor);
        return IOSVendor;
    } else {
        return window.TestAccount;
    }
};

JSCallOC.prototype.getIOSAdvertising = function () {
    if (cc.sys.isNative && (cc.sys.platform == cc.sys.IPHONE || cc.sys.platform == cc.sys.IPAD)) {
        var IOSAdvertising = jsb.reflection.callStaticMethod("LocalInfo", "getIOSAdvertising");
        cc.log("getIOSAdvertising:%s", IOSAdvertising);
        return IOSAdvertising;
    } else {
        return window.TestAccount;
    }
};

JSCallOC.prototype.getIOSMacAddress = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var IOSMacAddress = jsb.reflection.callStaticMethod("LocalInfo", "getIOSMacAddress");
        cc.log("getIOSMacAddress:%s", IOSMacAddress);
        return IOSMacAddress;
    } else {
        return window.TestAccount;
    }
};

JSCallOC.prototype.getIOSOpenUdid = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var IOSOpenUdid = jsb.reflection.callStaticMethod("LocalInfo", "getIOSOpenUdid");
        cc.log("getIOSOpenUdid:%s", IOSOpenUdid);
        return IOSOpenUdid;
    } else {
        return window.TestAccount;
    }
};

JSCallOC.prototype.getUUID = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var UUID = jsb.reflection.callStaticMethod("LocalInfo", "getUUID");
        cc.log("getUUID:%s", UUID);
        return UUID;
    } else if (this.checkAndroid()) {
        return "11111111";
    } else {
        return window.TestAccount;
    }
};

JSCallOC.prototype.getAppName = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var appName = jsb.reflection.callStaticMethod("LocalInfo", "getAppName");
        cc.log("getAppName:%s", appName);
        return appName;
    } else if (this.checkAndroid()) {} else {
        return "牛友圈";
    }
};

//充值相关
JSCallOC.prototype.postPaySucess = function () {
    cc.log("JSCallOC send update money");
    var msg = MessageFactory.createCommonMessage(window.UPDATE_PLAYER_MONEY);
    if (msg) {
        msg.send(1);
    }
};

//打开支付宝
//apilyId跳转用的唯一ID
JSCallOC.prototype.sendPayBySingleAlipay = function (payData, apilyId) {
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "sendPayBySingleAlipay:apilyId:", payData, apilyId);
    }
};

//打开网页
JSCallOC.prototype.sendPayByWebView = function (payUrl, payData, showWeb) {
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "sendPayByWebView:payData:showWeb:", payUrl, payData, showWeb);
    }
};

//内购充值
JSCallOC.prototype.sendIosPay = function (orderIdentifier, creatOrderUrl, mid, productid, mtkey, versions, gid, sid, money) {
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "payIosProduct:creatOrderUrl:mid:productid:mtkey:versions:gid:sid:money:", orderIdentifier, creatOrderUrl, mid, productid, mtkey, versions, gid, sid, money);
    }
};

//调用内嵌网页
JSCallOC.prototype.openURLInGame = function (urlStr) {
    cc.log("JSCallOC.prototype.openURLInGame,urlStr = " + urlStr);
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "openURLInGame:", urlStr);
    }
};

//调用内嵌网页
JSCallOC.prototype.currentPowerPercent = function (urlStr) {
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "currentPowerPercent");
    }
};

JSCallOC.prototype.Poll = function () {
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.Poll();
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "Poll");
        }
    }
};

JSCallOC.prototype.SetAppInfo = function (openId) {
    cc.log("JSCallOC.prototype.SetAppInfo,msTime = %s", openId);
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.SetAppInfo(openId);
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "SetAppInfo:", openId);
        }
    }
};

JSCallOC.prototype.StartRecord = function (msTime) {
    cc.log("JSCallOC.prototype.StartRecord,msTime = %d", msTime);
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.StartRecord(msTime);
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "StartRecord:", msTime);
        }
    }
};

JSCallOC.prototype.StopRecording = function () {
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.StopRecording();
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "StopRecording");
        }
    }
};

JSCallOC.prototype.DownloadRecordedFile = function (fileID, downloadFilePath) {
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.DownloadRecordedFile(fileID, downloadFilePath);
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "DownloadRecordedFile:downloadFilePath:", fileID, downloadFilePath);
        }
    }
};

JSCallOC.prototype.PlayRecordedFile = function (downloadFilePath) {
    if (cc.sys.platform == cc.sys.ANDROID) {
        SocialUtils.PlayRecordedFile(downloadFilePath);
    } else {
        if (cc.sys.isNative && this.checkIsAble()) {
            jsb.reflection.callStaticMethod("LocalInfo", "PlayRecordedFile:", downloadFilePath);
        }
    }
};

JSCallOC.prototype.screenShotAction = function () {
    if (cc.sys.isNative && this.checkIsAble()) {
        var path = jsb.reflection.callStaticMethod("LocalInfo", "screenShotAction");
        cc.log("screenShotAction:%s", path);
        return path;
    }
};
JSCallOC.prototype.payAppstore = function (goodid, openid) {
    if (cc.sys.isNative && this.checkIsAble()) {
        var path = jsb.reflection.callStaticMethod("paymentMCPP", "jumpToAppstorePay:openid:", goodid, openid);
        cc.log("screenShotAction:%s", path);
        return path;
    }
};

JSCallOC.prototype.exitApp = function () {

    cc.director.end();
    if (cc.sys.isNative && this.checkIsAble()) {
        jsb.reflection.callStaticMethod("LocalInfo", "exitApp");
    } else if (this.checkAndroid()) {} else {}
};

JSCallOC.prototype.showLoadingView = function (str) {
    LoadingView.show(str);
};

JSCallOC.prototype.dismissLoadingView = function () {
    LoadingView.dismiss();
};

var GameCallOC = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new JSCallOC();
        }
        return instance;
    }

    return {
        getInstance: getInstance
    };
}();

module.exports = GameCallOC;

cc._RFpop();
},{"GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory"}],"GameConfig":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b18467aV/JG+oT2twpS7MoA', 'GameConfig');
// Script\Hotupdate\GameConfig.js

"use strict";

/**
 * 全局环境设置
 * Author      : donggang
 * Create Time : 2016.7.26
 */
/** 外网测试服 */
var debug_extranet = {
    gateSocketIp: "192.168.1.1", // 网关地址
    gateSocketPort: 3101, // 网关端口

    useSSL: false, // 是否使用https
    textUpdate: true };

window.game = window.game || {};
game.config = module.exports = debug_extranet;

require("HttpRequest");

cc._RFpop();
},{"HttpRequest":"HttpRequest"}],"GamePlayer":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd0945yz5JpANZwyr60Y5B9u', 'GamePlayer');
// Script\Moudle\GamePlayer.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var Player = require('Player');

function GamePlayData() {
    Player.apply([], this);

    this.clubid = 0; //我的俱乐部ID
    this.unionid = "";
    this.openid = "";
    this.superCost = 0;
    this.giftCost = [];
    this.SelfClubId = 0; //我的俱乐部ID
    this.CurClubInfo = null;
    this.CurClubMemList = null;

    this.Copy = function (player) {
        this.uid = player.uid;
        this.name = player.name;
        this.headurl = player.headurl;
        this.sex = player.sex;
        this.gold = player.gold; //身上金币
        this.diamond = player.diamond; //身上钻石
        this.coin = player.coin; //携带金币
        this.seatid = player.seatid;
        this.status = player.status;
        this.winGold = player.winGold;
        this.TotalCarry = player.TotalCarry;
        this.TotalRound = player.TotalRound;
        this.TotalTable = player.TotalTable;
        this.calltype = player.calltype;
        this.bBanker = player.bBanker; //是否是庄家
        this.betcoinmul = player.betcoinmul; //下注倍数
        this.bulltype = player.bulltype;
        this.cards = player.cards;
        this.finalcoin = player.finalcoin;
        this.bOpenCard = player.bOpenCard;
        this.roomcard = player.roomcard;
    };
}

var GamePlayer = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new GamePlayData();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

module.exports = GamePlayer;

cc._RFpop();
},{"Player":"Player"}],"GameSystem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'df5b7N1suVOB59ky+su8hYo', 'GameSystem');
// Script\Comm\GameSystem.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */

function GameSystemManager() {
    this.bClientHotUpdate = false;
    this.defaultKey = "xa`129-w2310u!@#$^&*(!hzsx&*32#@";
    this.bLogin = true;
    this.bFirstInHall = true; //是否第一次进入大厅
    this.webSocketUrl = "";
    this.backWebSocketUrl = "";
    this.userkey = "";
    this.aesKey = new Uint8Array();
    this.iv = [100, 22, 245, 214, 157, 96, 77, 82, 1, 37, 121, 90, 47, 65, 54, 63];
    this.productid = 3;
    this.version = 1015;
    // add by jackyu
    this.VolumeState = 0;

    this.referralCode = 0;
    this.ledlist = null;

    this.VerStatusType = cc.Enum({
        VERSION_TYPE_TEST: 1, //测试
        VERSION_TYPE_AUDIT: 2, //审核
        VERSION_TYPE_OPERATION: 3 });
    this.VerStatus = this.VerStatusType.VERSION_TYPE_TEST;

    this.clienturl = ""; //客户端升级地址

    this.fileurl = ""; //文件地址

    this.weixincs = ""; //微信客服账号

    this.payurl = ""; //支付地址

    this.notice = {
        title: "",
        doc: "",
        writer: "",
        popup: 0,
        ismaintain: 0,
        time: 0
    };

    //this.routerUrl = "http://niuyouquan.bigbeargame.com:19191/";
    //this.routerUrl = "http://121.41.26.8:19191/";
    this.routerUrl = "http://120.26.81.151:19191/";

    this.logintype = 3;

    this.CustomLoginType = 0; //玩家选择登录类型

    this.bReloadInGame = false;

    this.gamesvcid = 0;

    this.tableid = 0;

    this.privateid = 0;

    this.EnterRoom = true;

    this.GameType = cc.Enum({
        GAME_TYPE_HALL: 0,
        GAME_TYPE_BULLFIGHT: 1
    });

    this.CurGameType = this.GameType.GAME_TYPE_HALL;

    this.BullFightTableCost = []; //开房间消耗

    this.superCost = 0; //超级抢庄消耗

    this.giftCost = []; //礼物消耗

    this.ClubUpgradeCost = []; //俱乐部升级

    this.NewMsgNum = false;

    this.roomLevel = 1;
}

//[{"type":1,"value":1800,"diamond":1,"gold":100},
// {"type":1,"value":3600,"diamond":2,"gold":200},
// {"type":1,"value":5400,"diamond":3,"gold":300},
// {"type":1,"value":7200,"diamond":4,"gold":400},
// {"type":1,"value":9000,"diamond":5,"gold":500},
// {"type":1,"value":10800,"diamond":6,"gold":600},
// {"type":2,"value":1,"diamond":1,"gold":100},
// {"type":2,"value":5,"diamond":2,"gold":200},
// {"type":2,"value":10,"diamond":3,"gold":300},
// {"type":2,"value":20,"diamond":4,"gold":400},
// {"type":2,"value":50,"diamond":5,"gold":500}]

GameSystemManager.prototype.calcGoldCost = function (liveTime, minAnte) {
    var costInfo;
    var timeCost = 1;
    var anteCost = 1;
    var count = 0;

    cc.log("calcGoldCost liveTime=", liveTime, " minAnte=", minAnte);

    for (var i = 0; i < this.BullFightTableCost.length; i++) {

        costInfo = this.BullFightTableCost[i];

        if (costInfo.type == 1 && costInfo.value == liveTime) {
            timeCost = costInfo.gold;
            count++;
            cc.log("calcGoldCost timeCost=", timeCost);
        } else if (costInfo.type == 2 && costInfo.value == minAnte) {
            anteCost = costInfo.gold;
            count++;
            cc.log("calcGoldCost anteCost=", anteCost);
        }

        if (count == 2) {
            break;
        }
    }
    cc.log("calcGoldCost totalCost=", timeCost + anteCost);
    return timeCost + anteCost;
};

// Time    int `json:"time"`    //单位秒
// Diamond int `json:"diamond"` //消耗钻石
// Level   int `json:"level`    //等级(level=0是)
GameSystemManager.prototype.calcDiamondCost = function (liveTime, clubLevel) {
    var costInfo;

    for (var i = 0; i < this.BullFightTableCost.length; i++) {
        costInfo = this.BullFightTableCost[i];
        if (costInfo.time == liveTime && costInfo.level == clubLevel) {
            cc.log("calcDiamondCost liveTime=", liveTime, " clubLevel=", clubLevel, " diamond=", costInfo.diamond);
            return costInfo.diamond;
        }
    }
    cc.log("calcDiamondCost liveTime=", liveTime, " clubLevel=", clubLevel, " diamond=0");
    return 0;
};

GameSystemManager.prototype.getCurrentSystemTime = function () {
    return new Date().getTime();
};

var GameSystem = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new GameSystemManager();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

module.exports = GameSystem;

cc._RFpop();
},{}],"GetClubListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8248fS+xiNO1Zu6fb/FM3m7', 'GetClubListReqPacket');
// Script\Network\Cmd\Cmd_Req\GetClubListReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/7.
 */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function GetClubListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CLUB_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetClubListReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };
        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}
module.exports = GetClubListReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"GetClubListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd847440MahEdpJl66FE25bp', 'GetClubListRespPacket');
// Script\Network\Cmd\Cmd_Resp\GetClubListRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/7.
 */
var MessageResp = require("MessageResp");
var GameSystem = require('GameSystem');
/*
* type US_RESP_CLUB_LIST_T struct {
 JsonHead
 RespHead
 List []CLUB_INFO_T `json:"list"`
 }
 type CLUB_INFO_T struct {
 ClubId    int    `json:"clubid"`
 Role      int8   `json:"role"`
 OwnerUid  uint32 `json:"owneruid"`
 Level     int    `json:"level"`
 Name      string `json:"name"`
 HeadUrl   string `json:"headurl"`
 Address   string `json:"address"`
 Intro     string `json:"intro"`
 EndTime   int64  `json:"endtime"` //s
 Status    int    `json:"status"`
 Members   int    `json:"members"`   //成员人数
 MaxMember int    `json:"maxmember"` //最多多少人
 }
* */
function GetClubListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CLUB_LIST_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //{"cmd":196618,"seq":2,"uid":10038,"code":0,"desc":"执行成功","privateid":247522,"gamesvcid":5,"tableid":1}
        this.list = msg.list;
    };
}

module.exports = GetClubListRespPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageResp":"MessageResp"}],"GetClubTableReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '491a9CHOXZEtZyS2Lbp9Vrl', 'GetClubTableReqPacket');
// Script\Network\Cmd\Cmd_Req\GetClubTableReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/8.
 */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function GetClubTableReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_CLUB_TABLE_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetClubTableReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = GetClubTableReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"GetClubTableRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6eacbtpWUBLcrayHGgFuxJo', 'GetClubTableRespPacket');
// Script\Network\Cmd\Cmd_Resp\GetClubTableRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/8.
 */
var MessageResp = require("MessageResp");
/*
* type US_RESP_CLUB_TABLE_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_CLUB_TABLE_T `json:"param"`
 }
 type PARAM_RESP_CLUB_TABLE_T struct {
 ClubId int `json:"clubid"`
 List []PRIVATE_TABLE_DETAIL_T `json:"list"`
 }

 type PRIVATE_TABLE_DETAIL_T struct {
 OwnerName  string `json:"ownername"`
 TableName  string `json:"tablename"`
 HeadUrl    string `json:"headurl"`
 MinAnte    int    `json:"minante"`
 RemainTime int    `json:"remaintime"`
 GameType   int    `json:"gametype"`
 GameId     int    `json:"gameid"`
 GameSvcId  int    `json:"gamesvcid"`
 TableId    int    `json:"tableid"`
 }
* */
function GetClubTableRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_CLUB_TABLE_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.param = msg.param;
        this.clubid = this.param.clubid;
        this.list = this.param.list;
    };
}

module.exports = GetClubTableRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"GetMemberListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1ce9a5c75RGlIxg/QwNXwEk', 'GetMemberListReqPacket');
// Script\Network\Cmd\Cmd_Req\GetMemberListReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/9.
 */
/*
 type CLUB_REQ_GET_MEMBER_LIST_T struct {
 ClubHead
 }

* */
var MessageReq = require("MessageReq");

function GetMemberListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetMemberListReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = GetMemberListReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"GetMemberListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '676efmGfS5LiIqFFgF+56lb', 'GetMemberListRespPacket');
// Script\Network\Cmd\Cmd_Resp\GetMemberListRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/9.
 */
/*
* type CLUB_RESP_GET_MEMBER_LIST_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_GET_MEMBER_LIST_T `json:"param"`
 }
 type PARAM_RESP_GET_MEMBER_LIST_T struct {
 ClubId int                  `json:"clubid"`
 List   []CLUB_MEMBER_INFO_T `json:"list"`
 }
 type CLUB_MEMBER_INFO_T struct {
 Uid     uint32 `json:"uid"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Sex     int  `json:"sex"`
 Role    uint8  `json:"role"`
 }
* */
var MessageResp = require("MessageResp");

function GetMemberListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_GET_MEMBER_LIST_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.clubid = msg.param.clubid;
        this.list = msg.param.list;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = GetMemberListRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"GetMsgListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c9e00f1vrBFbZXDEaeXvXha', 'GetMsgListReqPacket');
// Script\Network\Cmd\Cmd_Req\GetMsgListReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */
var MessageReq = require("MessageReq");
/*
* const (
 E_SYSTEM_MSG_T = 1
 E_CLUB_MSG_T   = 2
 E_MAIL_MSG_T   = 3
 )
 type US_REQ_MSG_LIST_T struct {
 JsonHead
 Param PARAM_REQ_MSG_LIST_T `json:"param"`
 }
 type PARAM_REQ_MSG_LIST_T struct {
 Type  int `json:"type"`
 Start int `json:"start"`
 Total int `json:"total"`
 }
* */
function GetMsgListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_MSG_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetMsgNumReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            param: msg
        };
        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = GetMsgListReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"GetMsgListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '29174A7Q/VB4oKJ4i+YuMJm', 'GetMsgListRespPacket');
// Script\Network\Cmd\Cmd_Resp\GetMsgListRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */
/*
* E_SYSTEM_MSG_T = 1
 type US_RESP_SYS_MSG_LIST_T struct {
 JsonHead
 RespHead
 Param PARAM_SYS_MSG_T `json:"param"`
 }
 type PARAM_SYS_MSG_T struct {
 Type int              `json:"type"`
 List []SYS_MSG_NODE_T `json:"list"`
 }
 type SYS_MSG_NODE_T struct {
 Msg  string `json:"msg"`			//base64
 Time int64  `json:"time"`
 }

 E_CLUB_MSG_T   = 2
 type US_RESP_CLUB_MSG_LIST_T struct {
 JsonHead
 RespHead
 Param PARAM_CLUB_MSG_T `json:"param"`
 }
 type PARAM_CLUB_MSG_T struct {
 Type int               `json:"type"`
 List []CLUB_MSG_NODE_T `json:"list"`
 }
 type CLUB_MSG_NODE_T struct {
 Id      int    `json:"id"`
 ClubId  int    `json:"clubid"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 IsRead  int    `json:"isread"`
 Type    int    `json:"type"`
 Msg     string `json:"msg"`		//base64
 Time    int    `json:"time"`
 }

 E_MAIL_MSG_T   = 3
 type US_RESP_MAIL_MSG_LIST_T struct {
 JsonHead
 RespHead
 Param PARAM_MAIL_MSG_T `json:"param"`
 }
 type PARAM_MAIL_MSG_T struct {
 Type int               `json:"type"`
 List []MAIL_MSG_NODE_T `json:"list"`
 }
 type MAIL_MSG_NODE_T struct {
 Id     int    `json:"id"`
 IsRead int    `json:"isread"`
 Type   int    `json:"type"`
 Msg    string `json:"msg"`		//base64
 Time   int    `json:"time"`
 }
*
* */
var MessageResp = require("MessageResp");

function GetMsgListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_MSG_LIST_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.type = msg.param.type;
        this.list = msg.param.list;
    };
}

module.exports = GetMsgListRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"GetMsgNumReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a7bb5YDWPNNPK9OQuGhBG4U', 'GetMsgNumReqPacket');
// Script\Network\Cmd\Cmd_Req\GetMsgNumReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */

var MessageReq = require("MessageReq");

function GetMsgNumReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_NEW_MSG_NUM_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetMsgNumReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = GetMsgNumReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"GetMsgNumRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '83fa3uwflJBd54DDVeKRy/3', 'GetMsgNumRespPacket');
// Script\Network\Cmd\Cmd_Resp\GetMsgNumRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */

/*
* type US_RESP_NEW_MSG_NUM_T struct {
 JsonHead
 RespHead
 Param PARAM_NEW_MSG_NUM_T `json:"param"`
 }

 type PARAM_NEW_MSG_NUM_T struct {
 SysNum  int `json:"sysnum"`
 ClubNum int `json:"clubnum"`
 MailNum int `json:"mailnum"`
 }
* */
var MessageResp = require("MessageResp");

function GetMsgNumRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_NEW_MSG_NUM_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.sysnum = msg.param.sysnum;
        this.clubnum = msg.param.clubnum;
        this.mailnum = msg.param.mailnum;
    };
}

module.exports = GetMsgNumRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"GlobalEventManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6cae2lyteVOg6F0fGwqwrX/', 'GlobalEventManager');
// Script\Moudle\GlobalEventManager.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

/**
 * 自定义消息的封装
 * @param eventType
 * @param callBack
 * @param node
 * @constructor
 */

function GlobalEvent(eventType, callBack, node) {
    this.eventType = eventType;
    this.callBack = callBack;
    this.node = node;
}

function EventManager() {

    this.listenerMap = new Map();
    this.eventID = 0;

    /**
     * 添加监听
     * @param eventType
     * @param callBack
     * @param node
     * @returns {number}
     */
    this.addEventListener = function (eventType, callBack, node) {
        var event = new GlobalEvent(eventType, callBack, node);

        this.listenerMap.forEach(function (event) {
            if (event.eventType == eventType && node == event.node) {
                cc.log("GlobalEventManage same addEventListener=", eventType);
                return;
            }
        });

        this.eventID++;
        this.listenerMap.set(this.eventID, event);

        cc.log("GlobalEventManage addEventListener=", eventType, " eventid=", this.eventID);
        return this.eventID;
    };

    /**
     * 删除监听
     * @param eventid
     */
    this.removeListener = function (eventid) {
        cc.log("GlobalEventManager.removeListener eventid=", eventid);
        if (this.listenerMap.containsKey(eventid)) {
            this.listenerMap.delete(eventid);
        }
    };

    /**
     * 转发事件
     * @param eventType
     * @param data
     */
    this.emitEvent = function (eventType, data) {
        this.listenerMap.forEachKey(function (id, event) {
            if (event.eventType == eventType) {
                event.callBack(data);
                return;
            }
        });
    };
}

var GlobalEventManager = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new EventManager();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

window.GlobalEventManager = GlobalEventManager;

cc._RFpop();
},{}],"HallScene":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'dde5dz2rFRKTKw4uMTvRGhZ', 'HallScene');
// Script\ComScene\SceneView\HallScene.js

'use strict';

var BaseScene = require("BaseScene");
var MusicMgr = require('MusicMgr');
var HttpManager = require('HttpManager');
var Platform = require('Platform');
var MessageFactory = require('MessageFactory');
var GameSystem = require('GameSystem');
var SocketManager = require('SocketManager');
var ToastView = require('ToastView');
var LoadingView = require('LoadingView');
var Audio_Common = require('Audio_Common');
var GamePlayer = require('GamePlayer');
var GameCallOC = require('GameCallOC');
var AlertView = require('AlertView');

cc.Class({
    extends: BaseScene,

    properties: {
        topBg: {
            default: null,
            type: cc.Sprite
        },
        bottomBg: {
            default: null,
            type: cc.Sprite
        },
        HallBg: {
            default: null,
            type: cc.Sprite
        },

        Bullfight_CreateRoom: cc.Prefab,
        RoomIdEditBox: cc.EditBox,
        PopNode: cc.Node,
        ShopView: cc.Prefab,
        FindView: cc.Prefab,
        SuccessView: cc.Prefab,
        MineView: cc.Prefab,
        ClubView: cc.Prefab,
        NoticeView: cc.Prefab,
        ShopToggle: cc.Toggle,
        ShareView: cc.Prefab,
        WebView: cc.Prefab,
        RedTips: cc.Sprite,
        HallTitle: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        cc.log("HallScene.onLoad");
        GameSystem.getInstance().bLogin = true;

        GameSystem.getInstance().CurGameType = GameSystem.getInstance().GameType.GAME_TYPE_HALL;
        this.popUpNotice();
        if (!GameSystem.getInstance().bFirstInHall) {
            this.getUserDetail(); //从游戏中退出到大厅，需要刷新玩家信息
        }
        GameSystem.getInstance().bFirstInHall = false;

        this.sendCreateTableCost();
        this.sendClubUpgradeCost();
        this.sendMsgNum();

        if (GameSystem.getInstance().bReloadInGame) {
            GameSystem.getInstance().bReloadInGame = false;
            cc.log("loadScene Bullfight_GameScene");
            cc.director.loadScene('Bullfight_GameScene');
        }
    },

    start: function start() {
        this.pushRollMsg();
        if (GameSystem.getInstance().ledlist != null && GameSystem.getInstance().ledlist != undefined && GameSystem.getInstance().ledlist.length > 0) {
            this.schedule(this.pushRollMsg, GameSystem.getInstance().ledlist.length * 10 + 10);
        }
    },

    stopRollMsg: function stopRollMsg() {
        if (GameSystem.getInstance().ledlist != null && GameSystem.getInstance().ledlist != undefined && GameSystem.getInstance().ledlist.length > 0) {
            this.unschedule(this.pushRollMsg);
        }
    },

    pushRollMsg: function pushRollMsg() {
        // if (this.HallTitle.string != "大熊牛友圈") {
        //     return;
        // }
        if (GameSystem.getInstance().ledlist != null && GameSystem.getInstance().ledlist != undefined) {
            for (var index = 0; index < GameSystem.getInstance().ledlist.length; index++) {
                var message = {
                    popView: "HallScene",
                    btn: "RollMsg",
                    data: GameSystem.getInstance().ledlist[index]
                };
                GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
            }
        }
    },

    onDestroy: function onDestroy() {
        this._super();
    },

    callBackBtnShare: function callBackBtnShare() {
        var ShareImagePath = GameCallOC.getInstance().screenShotAction();
        var shareView = cc.instantiate(this.ShareView);
        cc.director.getScene().addChild(shareView);
        var winSize = cc.director.getWinSize();
        shareView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_IMAGE, ShareImagePath, GameSystem.getInstance().clienturl);
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        if (msg.popView == "SettingView") {
            if (msg.btn == "BtnExitLogin") {
                SocketManager.getInstance().disconnect();
                cc.director.loadScene("LoadingScene");
            }
        } else if (msg.popView == "ProduceCell") {
            if (msg.btn == "callBtnBuy") {
                var WebView = cc.instantiate(this.WebView);
                this.node.addChild(WebView);
                var winSize = cc.director.getWinSize();
                WebView.setPosition(cc.p(-winSize.width, 0));
                WebView.getComponent('CusWebView').setWebViewUrl(msg.url);
            }
        } else if (msg.popView == "FindView") {
            if (msg.btn == "CallBackBtn") {
                var WebView = cc.instantiate(this.WebView);
                this.node.addChild(WebView);
                var winSize = cc.director.getWinSize();
                WebView.setPosition(cc.p(-winSize.width, 0));
                WebView.getComponent('CusWebView').setWebViewUrl(msg.url);
            }
        } else if (msg.popView == "RoomInfoView") {
            if (msg.btn == "BtnShare") {
                this.callBackBtnShare();
            }
        }
    },

    onMessage: function onMessage(event) {
        cc.log("HallScene.onMessage");
        this._super(event);

        var msg = event.data;
        var cmd = msg.cmd;

        switch (cmd) {
            case window.US_RESP_LOGIN_CMD_ID:
                this.onLoginMsg(msg);
                break;

            case window.US_RESP_CREATE_TABLE_CMD_ID:
            case window.CLUB_RESP_CREATE_TABLE_CMD_ID:
                this.onCreateRoomMsg(msg);
                break;

            case window.US_RESP_ENTER_GAME_CMD_ID:
                this.onEnterRoom(msg);
                break;

            case US_RESP_NEW_MSG_NUM_CMD_ID:
                this.showMsgTips();
                break;
        }

        if (msg.code < SocketRetCode.RET_SUCCESS) {
            LoadingView.dismiss();
        }
    },

    showMsgTips: function showMsgTips(msg) {
        this.RedTips.node.active = GameSystem.getInstance().NewMsgNum;
    },

    sendCreateTableCost: function sendCreateTableCost() {
        var msg = MessageFactory.createMessageReq(window.US_REQ_CREATE_COST_CMD_ID);
        if (msg) {
            cc.log("HallScene.sendCreateTableCost");
            msg.send();
        } else {
            cc.log("HallScene.sendCreateTableCost not found US_REQ_CREATE_COST_CMD_ID");
        }
    },

    sendClubUpgradeCost: function sendClubUpgradeCost() {
        var msg = MessageFactory.createMessageReq(window.US_REQ_CLUB_UPGRADE_COST_CMD_ID);
        if (msg) {
            cc.log("HallScene.sendClubUpgradeCost");
            msg.send();
        } else {
            cc.warn("HallScene.sendClubUpgradeCost not found US_REQ_CLUB_UPGRADE_COST_CMD_ID");
        }
    },

    sendMsgNum: function sendMsgNum() {
        MessageFactory.createMessageReq(US_REQ_NEW_MSG_NUM_CMD_ID).send();
    },

    onUserDetail: function onUserDetail(msg) {
        cc.log("HallScene.onUserDetail");
        GamePlayer.getInstance().gold = msg.gold;
        GamePlayer.getInstance().diamond = msg.diamond;
    },

    onLoginMsg: function onLoginMsg(msg) {
        cc.log("HallScene.onLoginMsg");
        if (msg.code == SocketRetCode.RET_SUCCESS) {}
    },

    onCreateRoomMsg: function onCreateRoomMsg(msg) {
        cc.log("HallScene.onCreateRoomMsg");
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.privateid.length > 1) {
                return;
            }
            GameSystem.getInstance().roomLevel = msg.gamelevel;
            GameSystem.getInstance().privateid = msg.privateid[0];
            GameSystem.getInstance().gamesvcid = msg.gamesvcid;
            GameSystem.getInstance().tableid = msg.tableid;

            cc.log("onCreateRoomMsg");
            LoadingView.show("正在进入...");
            var createRoom = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);
            var data = {
                privateid: GameSystem.getInstance().privateid
            };
            if (createRoom) {
                createRoom.send(data);
            }

            return;

            var self = this;
            var alert = AlertView.create();
            alert.setPositiveButton(function () {
                LoadingView.show("正在进入...");
                var createRoom = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);
                var data = {
                    privateid: GameSystem.getInstance().privateid
                };
                if (createRoom) {
                    createRoom.send(data);
                }
            }, "进入游戏");
            alert.setNegativeButton(function () {
                var shareView = cc.instantiate(self.ShareView);
                self.node.addChild(shareView);
                shareView.setPosition(cc.p(0, 0));
                var string = "我在玩游戏［" + GameCallOC.getInstance().getAppName() + "］里创建了房间(" + GameSystem.getInstance().privateid + "),快点一起来玩吧！！！";
                shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_LINK, string, GameSystem.getInstance().clienturl);
            }, "分享游戏");

            var string = "房间(" + GameSystem.getInstance().privateid + ")创建成功，快点分享给好友开始游戏吧";
            alert.show(string, AlertViewBtnType.E_BTN_CANCLE);
        }
    },

    onEnterRoom: function onEnterRoom(msg) {
        cc.log("HallScene.onEnterRoom,tableid = " + msg.name);
        if (msg.code == SocketRetCode.RET_SUCCESS) {}
    },

    popUpNotice: function popUpNotice() {
        if (GameSystem.getInstance().notice.doc != "") {
            var NoticeView = cc.instantiate(this.NoticeView);
            this.node.addChild(NoticeView);
            NoticeView.setPosition(cc.p(0, 0));
            NoticeView.getComponent('NoticeView').setContent();
        } else {
            cc.log("HallScene.popUpNotice,undefined");
        }
    },

    /*************************************BtnCallback***************************/
    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("HallScene.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("HallScene.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnCreateRoom") {
            this.doBtnCreateRoom();
        } else if (btnName == "BtnEnterRoom") {
            this.doBtnEnterRoom();
        } else if (btnName == "Club") {
            this.doBtnClub();
        }
    },

    doBtnShop: function doBtnShop() {
        cc.log("HallScene.doBtnShop");
        this.destroyChildNode();
        this.HallTitle.string = "游戏商城";
        this.PopNode.removeAllChildren(true);
        var shopView = cc.instantiate(this.ShopView);
        this.PopNode.addChild(shopView);
        shopView.setPosition(cc.p(0, 0));

        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    doBtnActivity: function doBtnActivity() {
        cc.log("HallScene.doBtnActivity");
    },

    destroyChildNode: function destroyChildNode() {
        var children = this.PopNode.children;
        for (var i = 0; i < children.length; ++i) {
            children[i].destroy();
        }
        this.stopRollMsg();
    },

    doBtnFind: function doBtnFind() {
        cc.log("HallScene.doBtnFind");
        this.destroyChildNode();
        this.HallTitle.string = "发现";
        this.PopNode.removeAllChildren(true);
        var findView = cc.instantiate(this.FindView);
        this.PopNode.addChild(findView);
        findView.setPosition(cc.p(0, 0));
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    doBtnSuccess: function doBtnSuccess() {
        cc.log("HallScene.doBtnSuccess");
        this.destroyChildNode();
        this.HallTitle.string = "战绩";
        this.PopNode.removeAllChildren(true);
        var successView = cc.instantiate(this.SuccessView);
        this.PopNode.addChild(successView);
        successView.setPosition(cc.p(0, 0));
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    doBtnMine: function doBtnMine() {
        cc.log("HallScene.doBtnMine");
        this.destroyChildNode();
        this.HallTitle.string = "我";
        this.PopNode.removeAllChildren(true);
        var mineView = cc.instantiate(this.MineView);
        this.PopNode.addChild(mineView);
        mineView.setPosition(cc.p(0, 0));
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    doBtnMore: function doBtnMore() {
        cc.log("HallScene.doBtnMore");
    },

    doBtnMain: function doBtnMain() {
        cc.log("HallScene.doBtnMain");
        this.destroyChildNode();
        this.PopNode.removeAllChildren(true);
        this.start();
        this.HallTitle.string = "51牛友会";
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    doBtnHead: function doBtnHead() {
        cc.log("HallScene.doBtnHead");
    },

    doBtnEnterRoom: function doBtnEnterRoom() {
        if (this.RoomIdEditBox.string == "") {
            ToastView.show("房间号不能为空！");
            return;
        }

        var roomId = Number(this.RoomIdEditBox.string);
        cc.log("HallScene.doBtnEnterRoom,roomId = " + roomId);
        LoadingView.show("正在进入...");
        var createRoom = MessageFactory.createMessageReq(window.US_REQ_FIND_TABLE_CMD_ID);
        var data = {
            privateid: roomId
        };
        if (createRoom) {
            createRoom.send(data);
        }
    },

    doBtnCreateRoom: function doBtnCreateRoom() {
        cc.log("HallScene.doBtnCreateRoom");
        var createRoom = cc.instantiate(this.Bullfight_CreateRoom);
        this.node.addChild(createRoom);
        createRoom.getComponent('Bullfight_CreateRoom').setClubId(0, 0);
        createRoom.setPosition(cc.p(0, 0));
        //createRoom.getComponent('Bullfight_CreateRoom').setRoomCardView();

        var createRoom = MessageFactory.createMessageReq(window.US_REQ_CREATE_TABLE_CMD_ID);
        if (createRoom) {
            createRoom.send();
        }
    },

    doBtnClub: function doBtnClub() {
        cc.log("HallScene.doBtnClub");
        this.PopNode.removeAllChildren(true);
        var clubView = cc.instantiate(this.ClubView);
        this.node.addChild(clubView);
        clubView.setPosition(cc.p(0, 0));
    }
});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","BaseScene":"BaseScene","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","HttpManager":"HttpManager","LoadingView":"LoadingView","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","Platform":"Platform","SocketManager":"SocketManager","ToastView":"ToastView"}],"HeartReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bb090Rui4lPa6FyL8JrRYud', 'HeartReqPacket');
// Script\Network\Cmd\Cmd_Req\HeartReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var MessageReq = require("MessageReq");

function HeartReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_HEARTBEAT_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = HeartReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"HeartRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4386ez0UShIYJA59rj0xycE', 'HeartRespPacket');
// Script\Network\Cmd\Cmd_Resp\HeartRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var MessageResp = require("MessageResp");

function HeartRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_HEARTBEAT_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        // GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = HeartRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"HotUpdateManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9412au1AQVAQLXdOR2a5vEv', 'HotUpdateManager');
// Script\Hotupdate\HotUpdateManager.js

"use strict";

/** 
 * 热更新管理
 * Author      : donggang
 * Create Time : 2016.7.29
 * 
 * 需求说明:
 * 1、可后台更新版本资源
 */

var AssetsManager = require("AssetsManager");

var amManager = cc.Class({
    ctor: function ctor() {
        this._updates = {}; // 更新模块集合
        this._queue = []; // 更新对列
        this._isUpdating = false; // 是否正在更新中
        this._current = null; // 当前正在更新的模块
        this._noComplete = {}; // 上次未完成的热更项
    },

    /** 
     * 获取模块版本信息 
     * @param localVersionCb(function)    本地版本信息加载完成
     * @param remoteVersionCb(function)   远程版本信息加载完成
     * 
     */
    getModules: function getModules(remoteVersionCb) {
        if (!cc.sys.isNative) {
            if (remoteVersionCb) remoteVersionCb();
            return;
        }

        game.asset.check(function (modules, versions) {
            this.modules = modules;
            this.versions = versions;
            if (remoteVersionCb) remoteVersionCb();
        }.bind(this));
    },

    /** 载入没更新完的模块状态 */
    load: function load() {
        if (!cc.sys.isNative) return;

        var data = cc.sys.localStorage.getItem("update_no_complete");
        if (data) {
            var json = JSON.parse(data);
            for (var i = 0; i < json.length; i++) {
                this._noComplete[json[i]] = json[i];
            }
            cc.sys.localStorage.removeItem("update_no_complete");
        }
    },

    getProgress: function getProgress(name) {
        var am = this._updates[name];
        return am.getProgress();
    },

    /**
     * 初始化更新模块名
     * @param name(string)                 模块名
     * @param onCheckComplete(function)    检查版本完成
     * @param onComplete(function)         模块名
     * @param onProgress(function)         更新完成
     * @param onNewVersion(function)       已是最新版本
     */
    init: function init(name, onCheckComplete, onComplete, onProgress, onNewVersion) {
        game.AssetConfig.concurrent = 2;

        var am = new AssetsManager();
        am.name = name;
        am.on(game.AssetEvent.NEW_VERSION, onNewVersion);
        am.on(game.AssetEvent.PROGRESS, onProgress);
        am.on(game.AssetEvent.FAILD, this._onFailed.bind(this));
        am.on(game.AssetEvent.NEW_VERSION_FOUND, this._onCheckComplete.bind(this));
        am.on(game.AssetEvent.SUCCESS, this._onUpdateComplete.bind(this));
        am.on(game.AssetEvent.REMOTE_VERSION_MANIFEST_LOAD_FAILD, this._onNetError.bind(this));
        am.on(game.AssetEvent.REMOTE_PROJECT_MANIFEST_LOAD_FAILD, this._onNetError.bind(this));
        am.on(game.AssetEvent.NO_NETWORK, this._onNetError.bind(this));
        am.onCheckComplete = onCheckComplete;
        am.onComplete = onComplete;

        this._updates[name] = am;
    },

    /** 是否没完成 */
    isNoComplete: function isNoComplete(name) {
        if (this._noComplete[name] == null) return false;

        return true;
    },

    /**
     * 检查版本是否需要更新
     */
    check: function check(name) {
        var am = this._updates[name];
        am.check(name);
    },

    /** 断网后恢复状态 */
    recovery: function recovery(name) {
        if (this._current && this._isUpdating == false) {
            this._isUpdating = true;
            this._current.recovery();
        }
    },

    _onFailed: function _onFailed(event) {
        this._isUpdating = false;
        event.target.check(event.target.name);
    },

    _onNetError: function _onNetError(event) {
        this._isUpdating = false;
    },

    /** 检查版本完成 */
    _onCheckComplete: function _onCheckComplete(event) {
        this._queue.push(event.target);

        // 保存下在下载的模块状态
        this._saveNoCompleteModule();

        if (event.target.onCheckComplete) event.target.onCheckComplete();

        if (this._isUpdating == false) {
            this._isUpdating = true;
            this._current = event.target;
            this._current.update();
        }
    },

    _onUpdateComplete: function _onUpdateComplete(event) {
        if (event.target.onComplete) event.target.onComplete();

        // 删除当前完成的更新对象
        this._queue.shift();
        this._isUpdating = false;

        // 保存下在下载的模块状态
        this._saveNoCompleteModule();

        // 更新对列中下一个更新对象
        if (this._queue.length > 0) {
            this._isUpdating = true;
            this._current = this._queue[0];
            this._current.update();
        }
    },

    // 保存下在下载的模块状态
    _saveNoCompleteModule: function _saveNoCompleteModule() {
        var names = [];
        for (var i = 0; i < this._queue.length; i++) {
            names.push(this._queue[i].name);
        }
        cc.sys.localStorage.setItem("update_no_complete", JSON.stringify(names));
    }
});

cc._RFpop();
},{"AssetsManager":"AssetsManager"}],"HttpConfig":[function(require,module,exports){
"use strict";
cc._RFpush(module, '56ce19ep3hMPLbgdA6/FCdr', 'HttpConfig');
// Script\Network\Http\HttpConfig.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

//http消息返回code
window.HttpCode = cc.Enum({
    HTTP_SUCCESS: 0,
    HTTP_JSON_ERROR: 1, //参数错误
    HTTP_MYSQL_ERROR: 2 });

/**
 * http消息
 */
window.HttpMessage = "HttpMessage";

//http消息类型
window.HttpMessageType = cc.Enum({
    HTTP_NOTIFICATION: "http_notification",
    NOTIFY_HTTP_RSP: "notify_http_rsp",
    NOTIFY_HTTP_RSP_ERROR: "notify_http_rsp_error",
    NOTIFY_HTTP_RSP_IMG: "notify_http_rsp_img",
    IMAGE_LOADER: "image_loader"
});

/**
 * http请求
 */
window.HttpTag = {
    HTTP_TAG_GET_ROUTER: "GetRouter",
    HTTP_TAG_LOGIN: "login",
    HTTP_TAG_GAMECONFIG: "gameconfig"
};

/**
 * 本地消息 主命令
 */
window.LocalMessage = "LocalMessage";

/**
 * 本地消息类型
 */
window.LocalMsgType = {
    GetRoomConfig: "getroomconfig", //获取房间配置
    GetAllRoomConfig: "allRoomConfig", //所有房间配置数据
    GetLoginInfo: "getloginInfo", //登录结果
    EnterGame: "enterGame", // 请求进入房间
    EnterRoom: "enterRoom", // 请求进入游戏
    SENDMSG_TIMEOUT: "sendmsg_timeout", //发送消息回传超时
    SENDMSG_CLOSESERVER: "sendmsg_closeserver",
    UPDATE_USERINFO: "update_userInfo", //更新玩家信息
    UPDATE_OnlineNum: "UPDATE_OnlineNum", //在线人数
    UPDATEHISTORY: "updatehistory",
    UPDATEBANKERLIST: "updatebankerlist",
    GetPassWord: "getPassWord", //找回密码
    GetGameSwitchNotice: "GetGameSwitchNotice", //获取游戏开关信息通知
    GetGameDomainNotice: "GetGameDomainNotice", //获取游戏路由信息通知
    UPDATE_MONEY: "UpdateMoney",
    //资源更新
    UPDATE_OK_MESSAGE: "UPDATE_OK_MESSAGE", //确定更新消息
    UPDATE_CANCEL_MESSAGE: "UPDATE_CANCEL_MESSAGE", //取消更新消息
    UPDATE_MESSAGE: "UPDATE_MESSAGE", //更新消息
    UPDATE_END_MESSAGE: "UPDATE_END_MESSAGE", //更新完成消息
    UPDATE_NOT_MESSAGE: "UPDATE_NOT_MESSAGE", //不需要更新消息
    UPDATE_NEED_MESSAGE: "UPDATE_NEED_MESSAGE" };

var HttpConfig = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new init();
        }
        return instance;
    };

    function init() {
        return {
            //cid: 141 ,
            //pid :window.PRODUCT_ID,
            //cctype : 2 ,
        };
    };
    return {
        getInstance: getInstance
    };
}();

module.exports = HttpConfig;

cc._RFpop();
},{}],"HttpManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cadeeDWV2hHb4wZqIKLiPrt', 'HttpManager');
// Script\Network\Http\HttpManager.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

/**
 * 模拟 C++ 工程架构
 *
 * 使用的XMLHttpRequest  需要解决跨域问题
 * 服务器加上head
 *
 * jQuery 网页可以  但是不能上手机
 *
 */
var GameSystem = require('GameSystem');

function HttpMessage() {
    this.isSucceed = false;
    this.tag = "";
    this.data = null;
    this.code = -1;
    this.error = "";
    this.flag = -1;
}

function HttpMessageGetDoman() {
    HttpMessage.apply(this, []); //集成父类数据
    this.strUcenterUrl;
}

function HttpMessageGetWlanIP() {
    HttpMessage.apply(this, []); //集成父类数据
}

function ImageHolder() {

    this.img = null;
    this.tag = "";
}

function HttpRequest(tag, data, url, type, callback) {
    cc.log("HttpManager.HttpRequest,url = " + url);
    this.tag = tag;
    this.url = url;
    this.callBack = callback;

    var self = this;

    this.sendRequest = function () {
        var self = this;
        var xhr = new XMLHttpRequest();
        var url = this.url;
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                if (xhr.status >= 200 && xhr.status < 400) {
                    var response = xhr.responseText;
                    if (self.callBack) {
                        self.callBack(this, response);
                    } else {
                        self.success_jsonpCallback(JSON.parse(response));
                    }
                } else {
                    var response = xhr.responseText;
                    cc.log("HttpManager.sendRequest,xhr.status = %d,response = %s", xhr.status, response);
                    var message = new HttpMessage();
                    message.data = null;
                    message.isSucceed = false;

                    GlobalEventManager.getInstance().emitEvent(window.HttpMessage, { tag: window.HttpMessageType.HTTP_NOTIFICATION, msg: message });
                }
            }
            cc.log("HttpManager.sendRequest,xhr.readyState = %d", xhr.readyState);
        };

        xhr.open(type, url + tag, true);
        // xhr.setRequestHeader("Access-Control-Allow-Origin","*");
        xhr.setRequestHeader("CONTENT-TYPE", "application/x-www-form-urlencoded");
        var result = xhr.send(data);
        cc.log("HttpManager.sendRequest,result = " + result);
    };

    this.fail_jsonpCallback = function () {},

    //成功回调
    this.success_jsonpCallback = function (data) {
        var message = new HttpMessage();
        message.tag = tag;
        message.code = data.code;
        if (data.code == window.HttpCode.HTTP_SUCCESS) {
            message.data = data;
            message.isSucceed = true;
            cc.log("http 请求成功 : %s = %s", tag, JSON.stringify(data));
        } else {
            message.data = data;
            message.isSucceed = false;
            cc.warn("http 请求返回异常 非success flag : %s = %s", tag, JSON.stringify(data));
        }

        GlobalEventManager.getInstance().emitEvent(window.HttpMessage, { tag: window.HttpMessageType.HTTP_NOTIFICATION, msg: message });
    };
}

function HttpControl(callback) {
    this.callBack = callback;
}

//发送普通消息
HttpControl.prototype.sendCommonRequest = function (tag, data, url) {
    if (url === undefined) {
        url = GameSystem.getInstance().weburl + "/";
    }

    var sendData = JSON.stringify(data); //encodeURI(JSON.stringify(test));
    new HttpRequest(tag, sendData, url, "post").sendRequest();
    cc.log("发送http请求 = %s  : %s : %s", tag, JSON.stringify(data), sendData);
};

HttpControl.prototype.sendCommonRequestGet = function (tag, data, url) {
    if (url === undefined) {
        url = GameSystem.getInstance().weburl + "/";
    }

    var sendData = JSON.stringify(data); //encodeURI(JSON.stringify(test));
    new HttpRequest(tag, sendData, url, "get").sendRequest();
    cc.log("发送http请求 = %s  : %s : %s", tag, JSON.stringify(data), sendData);
};

//数据加密
HttpControl.prototype.base64EncodeData = function (data) {
    var encodedData = BASE64.encoder(data);

    var md5str = hex_md5(encodedData);

    var encodedData2 = BASE64.encoder(encodedData + md5str);
    return encodedData2;
};

HttpControl.prototype.base64DecodeData = function (data) {
    var encodedData = BASE64.decoder(data);

    if (encodedData.length > 32) {
        encodedData = encodedData.substr(0, encodedData.length - 32);
        var encodedData2 = BASE64.decoder(encodedData);
        return encodedData2;
    }
    return "";
};

HttpControl.prototype.sendUploadImg = function (tag, url, data) {
    if (url = undefined) {
        url = "http://manage.aqddp.cn/Home/Picupload/upload";
    }
    //var sendData = JSON.stringify(data);//encodeURI(JSON.stringify(test));
    new HttpRequest(tag, data, url, "post").sendRequest();
    cc.log("发送http请求 = %s  : %s ", tag, data);
};

/**
 * 创建HttpManager接口
 * @method getInstance
 */
var HttpManager = function () {
    var instance;
    function getInstance() {
        if (instance === undefined) {
            instance = new HttpControl();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

module.exports = HttpManager;

cc._RFpop();
},{"GameSystem":"GameSystem"}],"HttpPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e9499W5MNJFDL7ZFeGQbLbs', 'HttpPacket');
// Script\Network\Http\HttpPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

var HttpPacket = {

    encryptData: function encryptData(data) {
        data.sig = "5da567e4566c9362f83f2730f75asdasddsae13a9";
    },

    // 支付方式
    buildGetGameSwitch: function buildGetGameSwitch(data, tag) {
        var param = {};
        param.method = tag;
        param.productid = window.PRODUCT_ID;
        data.param = param;
        this.encryptData(data);
    }
};

module.exports = HttpPacket;

cc._RFpop();
},{}],"HttpRequest":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'be1b7vWJopMapy96MVvG2IX', 'HttpRequest');
// Script\Hotupdate\HttpRequest.js

"use strict";

/** 
 * 游戏服务器管理
 * Author      : donggang
 * Create Time : 2016.8.19
 */
var HttpRequest = {};
var urls = {}; // 当前请求地址集合

game.HttpEvent = {};
game.HttpEvent.NO_NETWORK = "http_request_no_network"; // 断网
game.HttpEvent.UNKNOWN_ERROR = "http_request_unknown_error"; // 未知错误

game.http = module.exports = {
    /**
     * HTTP GET请求
     * 例：
     * 
     * Get
        var url = "http://httpbin.org/get?show_env=1";
        var complete = function(response){
               
            cc.log(response);
        }
        var error = function(response){
            cc.log(response);
        }
        game.HttpRequest.get(url, complete, error);
    */
    get: function get(url, completeCallback, errorCallback) {
        game.http.sendRequest(url, null, false, completeCallback, errorCallback);
    },

    getByArraybuffer: function getByArraybuffer(url, completeCallback, errorCallback) {
        game.http.sendRequest(url, null, false, completeCallback, errorCallback, 'arraybuffer');
    },

    getWithParams: function getWithParams(url, params, completeCallback, errorCallback) {
        game.http.sendRequest(url, params, false, completeCallback, errorCallback);
    },

    getWithParamsByArraybuffer: function getWithParamsByArraybuffer(url, params, callback, errorCallback) {
        game.http.sendRequest(url, params, false, completeCallback, errorCallback, 'arraybuffer');
    },

    /** 
     * HTTP POST请求
     * 例：
     *      
     * Post
        var url = "http://192.168.1.188/api/LoginNew/Login1";
        var param = '{"LoginCode":"donggang_dev","Password":"e10adc3949ba59abbe56e057f20f883e"}'
        var complete = function(response){
                var jsonData = JSON.parse(response);
                var data = JSON.parse(jsonData.Data);
            cc.log(data.Id);
        }
        var error = function(response){
            cc.log(response);
        }
        game.HttpRequest.post(url, param, complete, error);
    */
    post: function post(url, params, completeCallback, errorCallback) {
        game.http.sendRequest(url, params, true, completeCallback, errorCallback);
    },

    /**
     * 获得字符串形式的参数
     */
    _getParamString: function _getParamString(params) {
        var result = "";
        for (var name in params) {
            result += "{0}={1}&".format(name, params[name]);
        }

        return result.substr(0, result.length - 1);
    },

    /** 
     * Http请求 
     * @param url(string)               请求地址
     * @param params(JSON)              请求参数
     * @param isPost(boolen)            是否为POST方式
     * @param callback(function)        请求成功回调
     * @param errorCallback(function)   请求失败回调
     * @param responseType(string)      响应类型
     */
    sendRequest: function sendRequest(url, params, isPost, completeCallback, errorCallback, responseType) {
        if (url == null || url == '') return;

        var newUrl;
        if (params) {
            newUrl = url + "?" + this._getParamString(params);
        } else {
            newUrl = url;
        }

        if (urls[newUrl] != null) {
            cc.warn("地址【{0}】已正在请求中，不能重复请求".format(url));
            return;
        }

        // 防重复请求功能
        urls[newUrl] = true;

        var xhr = cc.loader.getXMLHttpRequest();
        if (isPost) {
            xhr.open("POST", url);
        } else {
            xhr.open("GET", newUrl);
        }

        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

        xhr.onerror = function () {
            delete urls[newUrl];
            if (errorCallback == null) return;
            if (xhr.readyState == 1 && xhr.status == 0) {
                errorCallback(game.HttpEvent.NO_NETWORK); // 断网
            } else {
                errorCallback(game.HttpEvent.UNKNOWN_ERROR); // 未知错误
            }
        };

        xhr.onreadystatechange = function () {
            if (xhr.readyState != 4) return;

            delete urls[newUrl];
            if (xhr.status == 200) {
                if (completeCallback) {
                    if (responseType == 'arraybuffer') {
                        xhr.responseType = responseType;
                        completeCallback(xhr.response); // 加载非文本格式
                    } else {
                        completeCallback(xhr.responseText); // 加载文本格式
                    }
                }
            } else {
                if (errorCallback) errorCallback(xhr.status);
            }
        };

        if (params == null || params == "") {
            xhr.send();
        } else {
            xhr.send(JSON.stringify(params));
        }
    }
};

cc._RFpop();
},{}],"JoinClubReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7cdbehwmIBHH4iycQzRpQRH', 'JoinClubReqPacket');
// Script\Network\Cmd\Cmd_Req\JoinClubReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/9.
 */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
/*
*
* type CLUB_REQ_JOIN_CLUB_T struct {
 ClubHead
 Param PARAM_REQ_JOIN_T `json:"param"`
 }
 type PARAM_REQ_JOIN_T struct {
 Uid     uint32 `json:"uid"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Sex     int    `json:"sex"`
 }*/
function JoinClubReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_JOIN_CLUB_CMD_ID;

    //准备发送的数据
    this.send = function (clubid, msg) {
        cc.log("JoinClubReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: clubid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = JoinClubReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"JoinClubRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8d98bk/yNRFlpPHES8AO448', 'JoinClubRespPacket');
// Script\Network\Cmd\Cmd_Resp\JoinClubRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/9.
 */
var MessageResp = require("MessageResp");
/*
* type CLUB_RESP_JOIN_CLUB_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_JOIN_T `json:"param"`
 }
 type PARAM_RESP_JOIN_T struct {
 ClubId  int    `json:"clubid"`
 Uid     uint32 `json:"uid"`
 isallow
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Sex     int    `json:"sex"`
 Role    uint8  `json:"role"`
 }
* */
function JoinClubRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_JOIN_CLUB_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
    };
}

module.exports = JoinClubRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"LeaveGameReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b66cd7ihkhLI5U2TsVFCkHp', 'LeaveGameReqPacket');
// Script\Network\Cmd\Cmd_Req\LeaveGameReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/26.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function LeaveGameReqPacket() {
  MessageReq.apply(this, []); //集成父类数据

  this.cmd = window.US_REQ_LEAVE_GAME_CMD_ID;

  //准备发送的数据
  this.send = function (msg) {
    cc.log("LeaveGameReqPacket.send");
    this.data = {
      cmd: this.cmd,
      seq: this.seq,
      uid: this.uid,
      gamesvcid: GameSystem.getInstance().gamesvcid,
      tableid: GameSystem.getInstance().tableid
    };

    GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
  };
}

module.exports = LeaveGameReqPacket;

/*
 //离开游戏
 type US_REQ_LEVEL_GAME_T struct {
 GameHead
 }

 type US_RESP_LEVEL_GAME_T struct {
 JsonHead
 RespHead
 Param string `json:"param"`
 }

 //请求坐下
 const (
 E_DOWN_TYPE = 1 //坐下
 E_RISE_TYPE = 2 //站起
 )

 type US_REQ_SIT_DOWN_T struct {
 GameHead
 SeatId int `json:"seatid"`
 Status int `json:"status"` //1. 坐下，2：站起
 }

 type US_RESP_SIT_DOWN_T struct {
 JsonHead
 RespHead
 Param string `json:"param"`
 }

 //请求携带金币
 type US_REQ_CARRY_COIN_T struct {
 GameHead
 Coin int64 `json:"coin"`
 }

 //如果uid == carryuid, 是自己
 type US_RESP_CARRY_COIN_T struct {
 JsonHead
 RespHead         //同意坐着，拒绝站起
 CarryUid  uint32 `json:"carryuid"`
 CarryCoin int64  `json:"carrycoin"`
 }
 周学士 C++  20:35:01

 //桌主确定玩家是否入坐
 const (
 E_ALLOW_TO_SIT  = 1
 E_REJECT_TO_SIT = 2
 )

 type US_REQ_OWNER_CONFIRM_T struct {
 GameHead
 PlayerUid uint32 `json:"playeruid"`
 Result    int    `json:"result"`
 }

 type US_RESP_OWNER_CONFIRM_T struct {
 JsonHead
 RespHead
 }
*
* */

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"LeaveGameRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '16d5eL79ehKiJalU3LEYv93', 'LeaveGameRespPacket');
// Script\Network\Cmd\Cmd_Resp\LeaveGameRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/26.
 */

var MessageResp = require("MessageResp");

function LeaveGameRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_LEAVE_GAME_CMD_ID;

    this.param = "";
    this.tableid = 0;
    this.leaveuid = 0;
    //接收的数据
    this.onMessage = function (msg) {
        //{"cmd":6553604,"seq":4,"uid":10042,"code":0,"desc":"执行成功"}
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
    };
}

module.exports = LeaveGameRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"LoadingScene":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ad32apQgcZNFbpz02GremG8', 'LoadingScene');
// Script\ComScene\SceneView\LoadingScene.js

'use strict';

/**
 *
 * 　　　┏┓　　　┏┓
 * 　　┏┛┻━━━┛┻┓
 * 　　┃　　　　　　 ┃
 * 　　┃　　　━　　　┃
 * 　　┃　┳┛　┗┳　  ┃
 * 　　┃　　　　　　 ┃
 * 　　┃　　　┻　　　┃
 * 　　┃　　　　　　 ┃
 * 　　┗━┓　　　┏━┛Code is far away from bug with the animal protecting
 * 　　　　┃　　　┃    神兽保佑,代码无bug
 * 　　　　┃　　　┃
 * 　　　　┃　　　┗━━━┓
 * 　　　　┃　　　　　 ┣┓
 * 　　　　┃　　　　 ┏┛
 * 　　　　┗┓┓┏━┳┓┏┛
 * 　　　　　┃┫┫　┃┫┫
 * 　　　　　┗┻┛　┗┻┛
 *
 */
var BaseScene = require("BaseScene");
var HttpManager = require('HttpManager');
var SocketManager = require('SocketManager');
var GameSystem = require('GameSystem');
var GamePlayer = require('GamePlayer');
var UtilTool = require('UtilTool');
var AlertView = require('AlertView');
var ToastView = require('ToastView');
var LoadingView = require('LoadingView');
var Platform = require('Platform');
var WeChatApi = require('WeChatApi');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameCallOC = require('GameCallOC');

function GetQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]);return null;
};

cc.Class({
    extends: BaseScene,

    properties: {
        LabelVersion: cc.Label,
        GameNotice: cc.Label,
        LogoSprite: cc.Sprite,
        weChatButton: cc.Button,
        localButton: cc.Button,
        HotUpdateTips: cc.Label,
        HotUpdateProgress: cc.ProgressBar,
        _StoragePath: "",
        _ManifestUrl: "res/project.manifest",
        _failCount: 0,
        _maxFailCount: 2 },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        cc.log("LoadingScene.onLoad,versions = " + GameSystem.getInstance().version);
        GameSystem.getInstance().version = GameCallOC.getInstance().getAppVersionCode();
        cc.log("LoadingScene.onLoadNew,versions = " + GameSystem.getInstance().version);

        SocketManager.getInstance().disconnect();
        this.onGameBack = true;
        GameSystem.getInstance().bLogin = false;

        this.sendGetRouter();
        cc.game.addPersistRootNode(this.GameNotice.node);
        this.webDeviceID = this.getLocalInfoByWebUrl();
        window.TestAccount = this.webDeviceID;
        GameSystem.getInstance().gameNotice = null;
        UtilTool.getNowFormatDate();
        MusicMgr.initAudio();
        this.loadingRes();
        this._failCount = 0;
        this.LabelVersion.string = "Version:" + GameCallOC.getInstance().getAppVersion();
    },

    onCheckStatus: function onCheckStatus() {
        if (GameSystem.getInstance().bClientHotUpdate || !cc.sys.isNative || GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
            cc.log("onHotUpdate bClientHotUpdate = ", GameSystem.getInstance().bClientHotUpdate);
            this.gotoGame();
        } else {
            //this.onHotUpdate();
            this.gotoGame();
        }
    },

    gotoGame: function gotoGame() {
        GameSystem.getInstance().bClientHotUpdate = true;
        this.HotUpdateProgress.node.active = false;
        this.updateLoginBtn();
        //this.sendGetRouter();
    },

    onHotUpdate: function onHotUpdate() {
        if (!cc.sys.isNative) {
            this.gotoGame();
            return;
        }

        this.HotUpdateProgress.node.active = true;
        this._StoragePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + "temp";
        cc.log("Storage path for remote asset :", this._StoragePath);

        // Setup your own version compare handler, versionA and B is versions in string
        // if the return value greater than 0, versionA is greater than B,
        // if the return value equals 0, versionA equals to B,
        // if the return value smaller than 0, versionA is smaller than B.
        var versionCompareHandle = function versionCompareHandle(versionA, versionB) {
            cc.log("Js Custom Version Compare: versionA is " + versionA, " versionB is" + versionB);
            var vA = versionA.split('.');
            var vB = versionB.split('.');
            for (var i = 0; i < vA.length; ++i) {
                var a = parseInt(vA[i]);
                var b = parseInt(vB[i]);
                if (a == b) {
                    continue;
                } else {
                    return a - b;
                }
            }
            if (vB.length > vA.length) {
                return -1;
            } else {
                return 0;
            }
        };

        this._am = new jsb.AssetsManager(this._ManifestUrl, this._StoragePath, versionCompareHandle);
        this._am.retain();
        if (!this._am.getLocalManifest().isLoaded()) {
            this.sendLog("加载本地文件失败");
            cc.log("未找到本地manifest文件");
            this.gotoGame();
            return;
        }

        var self = this;
        this._am.setVerifyCallback(function (path, asset) {
            var compressed = asset.compressed;
            var expectedMd5 = asset.md5;
            var relativePath = asset.path;
            var size = asset.size;
            //self.sendLog("Verification passed:" + relativePath);
            return true;
        });

        if (cc.sys.os === cc.sys.OS_ANDROID) {
            this._am.setMaxConcurrentTask(2);
        }

        this.HotUpdateProgress.progress = 0;

        var resVersion = this._am.getLocalManifest().getVersion();
        var packageUrl = this._am.getLocalManifest().getPackageUrl();
        this.sendLog("提示: 版本:" + resVersion + ", 路径:" + packageUrl);

        this._updateListener = new jsb.EventListenerAssetsManager(this._am, function (event) {
            cc.log("hotUpdateCallback code: " + event.getEventCode());

            switch (event.getEventCode()) {
                case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
                    cc.log("ERROR_NO_LOCAL_MANIFEST.");
                    self.sendLog("错误: 未找到本地manifest文件, 跳过更新");
                    self.gotoGame();
                    break;

                case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
                    cc.log("ERROR_DOWNLOAD_MANIFEST.");
                    self.sendLog("错误: 下载manifest文件失败, 跳过更新");
                    self.gotoGame();
                    break;

                case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
                    cc.log("ERROR_PARSE_MANIFEST.");
                    self.sendLog("错误: 解析manifest文件失败, 跳过更新");
                    self.gotoGame();
                    break;

                case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
                    cc.log("ALREADY_UP_TO_DATE.");
                    self.sendLog("提示：已经是最新版本.");
                    self.gotoGame();
                    break;

                case jsb.EventAssetsManager.NEW_VERSION_FOUND:
                    cc.log("NEW_VERSION_FOUND.");
                    self.sendLog("提示：发现新版本.");
                    self.HotUpdateProgress.progress = 0;
                    break;

                case jsb.EventAssetsManager.UPDATE_PROGRESSION:
                    cc.log("getPercent=" + event.getPercent());
                    var num = parseFloat(parseInt(event.getPercent()) / 100.0);
                    cc.log("num=" + num);
                    self.HotUpdateTips.string = "更新进度：" + event.getPercent().toFixed(2) + "%";
                    self.HotUpdateProgress.progress = num;
                    cc.log("progress=", self.HotUpdateProgress.progress);

                    var msg = event.getMessage();
                    if (msg) {
                        cc.log("更新文件: ", msg);
                        self.sendLog("更新文件: " + msg);
                    }
                    break;

                case jsb.EventAssetsManager.UPDATE_FINISHED:
                    {
                        cc.log("UPDATE_FINISHED.");
                        self.sendLog("提示：更新完成.");

                        if (GameCallOC.getInstance.getAppVersionCode() > 1100) {
                            var alert = AlertView.create();
                            alert.setPositiveButton(function () {
                                GameCallOC.getInstance().exitApp();
                            }, "确定");
                            alert.show("更新完成,请重启APP！", AlertViewBtnType.E_BTN_CLOSE);
                            return;
                        }

                        // Prepend the manifest's search path
                        // var searchPaths = jsb.fileUtils.getSearchPaths();
                        // var newPaths = self._am.getLocalManifest().getSearchPaths();
                        // console.log(JSON.stringify(newPaths));
                        // Array.prototype.unshift(searchPaths, newPaths);
                        // // This value will be retrieved and appended to the default search path during game startup,
                        // // please refer to samples/js-tests/main.js for detailed usage.
                        // // !!! Re-add the search paths in main.js is very important, otherwise, new scripts won't take effect.
                        // cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));
                        // jsb.fileUtils.setSearchPaths(searchPaths);
                        self.gotoGame();
                        //self.gotoHall();
                    }
                    break;

                case jsb.EventAssetsManager.UPDATE_FAILED:
                    cc.log("UPDATE_FAILED: " + event.getMessage());
                    self.sendLog("错误:" + event.getMessage() + ", failCount=" + this._failCount);
                    self._failCount++;
                    if (self._failCount < self._maxFailCount) {
                        self.sendLog("err, downloadFailedAssets");
                        self._am.downloadFailedAssets();
                    } else {
                        cc.log("err, Reach maximum fail count, exit update process");
                        self.sendLog("错误: 更新失败超过2次，跳过更新");
                        self._failCount = 0;
                        self.gotoGame();
                    }
                    break;

                case jsb.EventAssetsManager.ERROR_UPDATING:
                    cc.log("ERROR_UPDATING: " + event.getAssetId() + ", " + event.getMessage());
                    self.sendLog("错误, 升级出错: " + event.getAssetId() + ", " + event.getMessage());
                    break;

                case jsb.EventAssetsManager.ERROR_DECOMPRESS:
                    cc.log("ERROR_DECOMPRESS: " + event.getMessage());
                    self.sendLog("错误, 解压失败: " + event.getMessage());
                    break;

                default:
                    break;
            }
        });

        cc.eventManager.addListener(this._updateListener, 1);
        this._am.update();
    },

    sendLog: function sendLog(text) {
        cc.log(text);
        this.HotUpdateTips.string = text;
    },

    loadingRes: function loadingRes() {
        cc.loader.loadResDir("prefabs/LoadingView/LoadingView");
        cc.loader.loadResDir("prefabs/alertView");
        cc.loader.loadResDir("prefabs/toastView");
    },

    callbackBtnLogin: function callbackBtnLogin(event, CustomEventData) {
        cc.log("LoadingView.callbackBtnLogin");
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        GameSystem.getInstance().CustomLoginType = Number(CustomEventData);
        if (CustomEventData == 2) {
            //GameCallOC.getInstance().StartRecord(6000);
            LoadingView.show("正在登陆...");
            cc.log("LoadingView.callbackBtnLogin weixin");
            WeChatApi.getInstance().sendWeChatLogin();
        } else {
            //GameCallOC.getInstance().StopRecording();
            //this.sendLogin(Number(CustomEventData));
            LoadingView.show("正在登陆...");
            SocketManager.getInstance().startSocket();
        }
    },

    onHttpResponse: function onHttpResponse(event) {
        cc.log('LoadingView.onHttpResponse');
        this._super(event);
        if (event == undefined) {
            cc.error("LoadingView.onHttpResponse,event = undefined");
            return;
        }

        if (event.isSucceed) {
            var tag = event.tag;
            var data = event.data;

            if (tag == HttpTag.HTTP_TAG_GET_ROUTER) {
                //{"access":"/GetRouter","code":0,"desc":"执行成功","pid":1,"ver":1000,
                // "logintype":3,"area":1,"url":"http://120.26.81.151:8080","status":1,
                // "backurl":"http://120.26.81.151:8080"}
                if (data.code == 0) {
                    GameSystem.getInstance().logintype = Number(data.logintype);

                    GameSystem.getInstance().VerStatus = data.status;
                    GameSystem.getInstance().webSocketUrl = data.url + "/game";
                    GameSystem.getInstance().backWebSocketUrl = data.backurl + "/game";
                    cc.log("LoadingView.onHttpResponse, logintype= ", GameSystem.getInstance().logintype, " webSocketUrl=", GameSystem.getInstance().webSocketUrl, " backWebSocketUrl=", GameSystem.getInstance().backWebSocketUrl);
                    this.onCheckStatus();
                }
            }
        } else {
            if (event.data == null) {
                var self = this;
                var alert = AlertView.create();
                alert.setPositiveButton(function () {
                    self.sendGetRouter();
                }, "重试");

                alert.setNegativeButton(function () {}, "取消");

                var show = "网络链接错误，请检查您的网络!";
                alert.show(show, AlertViewBtnType.E_BTN_CANCLE);
            }
        }
    },

    updateLoginBtn: function updateLoginBtn() {
        if (GameSystem.getInstance().logintype == 1) {
            this.localButton.node.active = true;
        } else if (GameSystem.getInstance().logintype == 2) {
            this.weChatButton.node.active = true;
        } else if (GameSystem.getInstance().logintype == 3) {
            this.weChatButton.node.active = true;
            this.localButton.node.active = true;
        }
    },

    onMessage: function onMessage(event) {
        cc.log("LoadingScene.onMessage");
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.US_RESP_LOGIN_CMD_ID:
                this.onLoginMsg(msg);
                break;

            case window.US_NOTIFY_IN_GAME_CMD_ID:
                cc.log("LoadingScene notifyInGame, msg" + msg.gamesvcid + ",tableid" + msg.tableid);
                if (msg.code > 0) {
                    GameSystem.getInstance().roomLevel = msg.gamelevel;
                    GameSystem.getInstance().gamesvcid = msg.gamesvcid;
                    GameSystem.getInstance().tableid = msg.tableid;
                    GameSystem.getInstance().bReloadInGame = true;
                }
                break;
        }
    },

    onLoginMsg: function onLoginMsg(msg) {
        cc.log("LoadingScene.onLoginMsg,msg = " + JSON.stringify(msg));
        LoadingView.dismiss();
        if (msg.code === SocketRetCode.RET_SUCCESS) {
            GameSystem.getInstance().bReloadInGame = false;
            GameSystem.getInstance().gamesvcid = 0;
            GameSystem.getInstance().tableid = 0;
            this.gotoHall();
        } else {
            var alertExit = AlertView.create();
            alertExit.showOne(msg.desc, AlertViewBtnType.E_BTN_CLOSE);
        }
    },

    getDeviceId: function getDeviceId() {
        cc.log("LoadingScene.getDeviceId,webDeviceID = " + this.webDeviceID);
        if (this.webDeviceID == "" || this.webDeviceID == undefined) {
            return Platform.getInstance().generateUUID();
        }
        return this.webDeviceID;
    },

    sendGetRouter: function sendGetRouter() {

        var data = {
            pid: GameSystem.getInstance().productid,
            ver: GameSystem.getInstance().version
        };

        HttpManager.getInstance().sendCommonRequest(HttpTag.HTTP_TAG_GET_ROUTER, data, GameSystem.getInstance().routerUrl);
    },

    gotoHall: function gotoHall() {
        cc.log("LoadingScene.gotoHall");
        cc.director.loadScene('HallScene', this.popUpNotice);
        GameCallOC.getInstance().SetAppInfo("Bullfight_" + GamePlayer.getInstance().uid);
    },

    popUpNotice: function popUpNotice() {
        cc.log("LoadingScene.popUpNotice");
    },

    getLocalInfoByWebUrl: function getLocalInfoByWebUrl() {
        //浏览器
        if (!cc.sys.isNative) {
            var deviceid = GetQueryString("uid");
            cc.log("LoadingScene.getLocalInfoByWebUrl,deviceid = " + deviceid);
            if (deviceid != null && deviceid.toString().length > 0) {
                return deviceid;
            }
            return "";
        }
    },
    getLocalPos: function getLocalPos() {
        $.getScript('http://int.dpool.sina.com.cn/iplookup/iplookup.php?format=js', function () {
            alert(remote_ip_info.country); //国家
            alert(remote_ip_info.province); //省份
            alert(remote_ip_info.city); //城市
        });
    },

    onDestroy: function onDestroy() {
        if (this._updateListener) {
            cc.eventManager.removeListener(this._updateListener);
            this._updateListener = null;
        }
        if (this._am && !cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS) {
            this._am.release();
        }
        this._super();
    }

});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","BaseScene":"BaseScene","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","HttpManager":"HttpManager","LoadingView":"LoadingView","MusicMgr":"MusicMgr","Platform":"Platform","SocketManager":"SocketManager","ToastView":"ToastView","UtilTool":"UtilTool","WeChatApi":"WeChatApi"}],"LoadingView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '44a72oCdr1Lt4vafscFHEM8', 'LoadingView');
// Script\ComScene\PopView\LoadingView.js

"use strict";

var ToastView = require("ToastView");
var LoadingView = require('LoadingView');

var LoadingView = {};

LoadingView.curView = null;
LoadingView.tipText = null;
LoadingView.timeoutTag = 0; //超时回调句柄

//预防未加载完成 调用关闭
LoadingView.callClose = false;
LoadingView.callLoadPrefabs = false;
LoadingView.m_tips = "";
LoadingView.m_allowCLose = false;

LoadingView.show = function (tips, parent, allowClose) {
    cc.log("LoadingView.show,tips = " + tips);
    if (tips == "") {
        return;
    }
    this.dismiss();
    var self = this;
    this.m_tips = tips;
    this.m_allowCLose = allowClose === undefined ? false : allowClose;

    if (!self.callLoadPrefabs) {
        this.callLoadPrefabs = true;
        window.loadPrefabs("prefabs/LoadingView/LoadingView", function (newNode) {
            self.callLoadPrefabs = false;
            self.curView = newNode;
            if (self.callClose) {
                self.dismiss();
            } else {
                cc.log("LoadingView.show,111");
                self.updateView(newNode, self.m_tips, parent, self.m_allowCLose);
            }
        }, parent);
    } else {
        self.callClose = false;
    }
};

LoadingView.updateView = function (node, tips, parent, allowClose) {

    cc.log("LoadingView.updateView");
    node.on(cc.Node.EventType.TOUCH_START, function (event) {
        event.stopPropagation();
    });

    this.tipText = cc.find("Bg/LabelText", node).getComponent(cc.Label);
    if (tips) {
        this.setText(tips);
    }

    // var clodeBt = cc.find("close",node);
    //
    // var self = this ;
    // clodeBt.on(cc.Node.EventType.TOUCH_START,function () {
    //     self.dismiss() ;
    // });

    //屏蔽关闭 YUNG ADD
    var showClose = false; //allowClose === undefined? true : false ;

    //clodeBt.active = showClose;
    //
    // var aniLoading = cc.find("ani",node).getComponent(cc.Animation) ;
    //
    // var animState = aniLoading.play("loadingani");
    // animState.wrapeMode = cc.WrapMode.Loop;
    // animState.repeatCount = Infinity;
};

LoadingView.setTimeOut = function (time) {
    cc.log("LoadingView.setTimeOut,time = " + time);
    if (time && time > 0) {
        var self = this;
        this.timeoutTag = window.setTimeout("require('LoadingView').onTimeOut()", time * 1000);
        // this.scheduleOnce(function () {//component组件使用
        //     self.onTimeOut();
        // },time) ;
    }
};

LoadingView.onTimeOut = function () {
    cc.log("LoadingView.onTimeOut");
    // this.unschedule(this.onTimeOut);
    ToastView.show("网络请求超时");
    this.dismiss();
}, LoadingView.setText = function (tips) {
    cc.log("LoadingView.setText,tips = " + tips);
    if (this.tipText) {
        this.tipText.string = tips;
    } else {
        this.show(tips);
    }
}, LoadingView.dismiss = function () {
    cc.log("LoadingView.dismiss");
    if (this.timeoutTag) window.clearTimeout(this.timeoutTag);

    if (this.curView) {
        this.curView.removeFromParent(true);
        this.curView = null;
        this.tipText = null;
        this.callClose = false;
        this.callLoadPrefabs = false;
        this.m_tips = "";
        this.m_allowCLose = false;
    } else {
        // if( this.callLoadPrefabs){
        //     this.callClose = true ;
        // }
    }
};

module.exports = LoadingView;

cc._RFpop();
},{"LoadingView":"LoadingView","ToastView":"ToastView"}],"LoginReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9dbc3VeDpRKWINvGky0DgTX', 'LoginReqPacket');
// Script\Network\Cmd\Cmd_Req\LoginReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/2/22.
 */

var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');
var Platform = require('Platform');

function LoginReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_LOGIN_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            logintype: GameSystem.getInstance().CustomLoginType,
            unionid: GamePlayer.getInstance().unionid,
            openid: GamePlayer.getInstance().openid,
            nickname: GamePlayer.getInstance().name,
            headurl: GamePlayer.getInstance().headurl,
            sex: GamePlayer.getInstance().sex,
            // deviceid:   "927A79F7-2CEA-4711-B3A8-56D52CB9387F",
            deviceid: Platform.getInstance().generateUUID(),
            productid: GameSystem.getInstance().productid,
            platform: Platform.getInstance().getPlatformType()
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = LoginReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq","Platform":"Platform"}],"LoginRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b02b9bGh39K5oCFrNaip58c', 'LoginRespPacket');
// Script\Network\Cmd\Cmd_Resp\LoginRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var MessageResp = require("MessageResp");
var GameSystem = require("GameSystem");
var GamePlayer = require("GamePlayer");

function LoginRespPacket() {
    MessageResp.apply(this, []); //集成父类数据


    //{"cmd":65540,"seq":15,"uid":11298,"code":0,"desc":"","nickname":"游客11298",
    // "headurl":"","sex":2,"gold":10000,"diamond":10000,"userkey":"b79195adee39be05d5189f7fc1149e08",
    // "clienturl":"","fileurl":"http://manage.aqddp.cn/","weixincs":"niuyouquan1,niuyouquan2",
    // "payurl":"http://baidu.com/","notice":{"title":"hello","doc":"欢迎大家来到牛友圈",
    // "writer":"xxx","time":1491476875,"popup":0,"ismaintain":0}}

    this.cmd = window.US_RESP_LOGIN_CMD_ID;
    this.nickname = "";
    this.headurl = "";
    this.sex = 0;
    this.gold = 0;
    this.diamond = 0;
    this.userkey = "";
    this.notice = {
        title: "",
        doc: "",
        writer: "",
        popup: 0,
        ismaintain: 0,
        time: 0
    };
    this.clienturl = "";
    this.fileurl = "";
    this.weixincs = "";
    this.payurl = "";

    // 接收的数据
    // {"cmd":65540,"seq":15,"uid":11298,"code":0,"desc":"","nickname":"游客11298",
    // "headurl":"","sex":2,"gold":10000,"diamond":10000,"userkey":"b79195adee39be05d5189f7fc1149e08",
    // "clienturl":"","fileurl":"http://manage.aqddp.cn/","weixincs":"niuyouquan1,niuyouquan2",
    // "payurl":"http://baidu.com/","notice":{"title":"hello","doc":"欢迎大家来到牛友圈",
    // "writer":"xxx","time":1491476875,"popup":0,"ismaintain":0}}
    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        GamePlayer.getInstance().uid = msg.uid;
        GamePlayer.getInstance().name = msg.nickname;
        GamePlayer.getInstance().headurl = msg.headurl;
        GamePlayer.getInstance().sex = msg.sex;
        GamePlayer.getInstance().gold = msg.gold;
        GamePlayer.getInstance().diamond = msg.diamond;
        GamePlayer.getInstance().userkey = msg.userkey;
        GameSystem.getInstance().notice.title = msg.notice.title;
        GameSystem.getInstance().notice.doc = msg.notice.doc;
        GameSystem.getInstance().notice.writer = msg.notice.writer;
        GameSystem.getInstance().notice.popup = msg.notice.popup;
        GameSystem.getInstance().notice.ismaintain = msg.notice.ismaintain;
        GameSystem.getInstance().notice.time = msg.notice.time;
        GameSystem.getInstance().clienturl = msg.clienturl;
        GameSystem.getInstance().fileurl = msg.fileurl;
        GameSystem.getInstance().weixincs = msg.weixincs;
        GameSystem.getInstance().payurl = msg.payurl;
        GameSystem.getInstance().referralCode = msg.referralid;
        GameSystem.getInstance().ledlist = msg.ledlist;

        GameSystem.getInstance().aesKey = AES.utils.utf8.toBytes(msg.userkey);
    };
}

module.exports = LoginRespPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageResp":"MessageResp"}],"MessageCellDetailView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e4016kft6pMooCvNuHxuMbD', 'MessageCellDetailView');
// Script\ComScene\PopView\MessageCellDetailView.js

'use strict';

var BasePop = require("BasePop");
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");
cc.Class({
    extends: BasePop,

    properties: {
        Content: cc.Label,
        Time: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        cc.log("MessageCellDetailView.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("MessageCellDetailView.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnClose") {
            this.dismiss();
        }
    },

    setContent: function setContent(msg) {
        this.Content.string = BASE64.decoder(msg.msg);
        if (msg.type == 1) return;
        var data = {
            type: msg.type,
            msgid: msg.msgid
        };
        MessageFactory.createMessageReq(US_REQ_SET_MSG_READ_CMD_ID).send(data);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"MessageCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7c276nXgHVDSoKL/4mYJTLw', 'MessageCell');
// Script\ComScene\PopView\MessageCell.js

'use strict';

var UtilTool = require('UtilTool');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        Time: cc.Label,
        Content: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.msg = null;
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    setMessageCellMsg: function setMessageCellMsg(msg) {
        this.msg = msg;
        this.Content.string = BASE64.decoder(msg.msg);
        this.Time.string = UtilTool.getFormatDataDetail(msg.time);
        cc.log('MessageCell.setMessageCellMsg,msg = ' + JSON.stringify(msg));
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("MessageCell.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("MessageCell.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "Click") {
            this.dismiss();
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"MessageDetailView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1e8b4heBP5I5aZt8IEiTB/B', 'MessageDetailView');
// Script\ComScene\PopView\MessageDetailView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        scrollView: cc.ScrollView,
        MessageCell: cc.Prefab,
        MessageCellDetailView: cc.Prefab,
        SitReqCell: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.type = 0;
    },

    /*********************Network***************************/

    onMessage: function onMessage(event) {
        cc.log("MessageDetailView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_MSG_LIST_CMD_ID:
                this.onGetMessageList(msg);
                break;

            case CLUB_RESP_OWNER_CONFIRM_CMD_ID:
                cc.log("MessageDetailView.onMessage CLUB_RESP_OWNER_CONFIRM_CMD_ID");
                break;
        }
    },

    sendGetMsgList: function sendGetMsgList(type) {
        this.type = type;
        var data = {
            type: type,
            start: 0,
            total: 50
        };
        MessageFactory.createMessageReq(US_REQ_MSG_LIST_CMD_ID).send(data);
    },

    onGetMessageList: function onGetMessageList(msg) {
        if (msg.code != SocketRetCode.RET_SUCCESS) {
            return;
        }

        if (msg.list == null || msg.list == undefined) {
            return;
        }

        if (msg.type == 1) {
            //系统消息
            var cellHeight = 0;
            this.scrollView.content.removeAllChildren(true);

            for (var index = 0; index < msg.list.length; index++) {
                var json = BASE64.decoder(msg.list[index].msg);
                cc.log("MessageDetailView.onMsgList,json = " + json);
                var MessageCell = cc.instantiate(this.MessageCell);
                this.scrollView.content.addChild(MessageCell);
                cellHeight = MessageCell.getContentSize().height;
                MessageCell.setPosition(cc.p(0, -MessageCell.getContentSize().height * (index + 0.5)));
                MessageCell.getComponent('MessageCell').setMessageCellMsg(msg.list[index]);
                var self = this;
                MessageCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                    var msg = event.target.getComponent('MessageCell').msg;
                    self.createMessageCellDetailView(msg);
                }.bind(this));
            }

            if (cellHeight * msg.list.length > this.scrollView.content.height) {
                this.scrollView.content.height = cellHeight * msg.list.length;
            }
        } else if (msg.type == 2) {
            //俱乐部消息

            this.scrollView.content.removeAllChildren(true);
            var _cellHeight = 0;

            for (var index = 0; index < msg.list.length; index++) {
                var json = BASE64.decoder(msg.list[index].msg);
                msg.list[index].msg = JSON.parse(json);
                cc.log("MessageView.onMsgList,msg.list[index].msg = ", msg.list[index].msg);

                var SitReqCell = cc.instantiate(this.SitReqCell);
                this.scrollView.content.addChild(SitReqCell);
                _cellHeight = SitReqCell.getContentSize().height;
                SitReqCell.setPosition(cc.p(0, -SitReqCell.getContentSize().height * (index + 1)));
                SitReqCell.getComponent("SitReqCell").setMessageInfo(msg.list[index], 2);
            }
            if (_cellHeight * (msg.list.length + 1) > this.scrollView.content.height) {
                this.scrollView.content.height = _cellHeight * (msg.list.length + 1);
            }
        }
    },

    createMessageCellDetailView: function createMessageCellDetailView(msg) {
        var MessageCellDetailView = cc.instantiate(this.MessageCellDetailView);
        this.node.addChild(MessageCellDetailView);
        MessageCellDetailView.setPosition(cc.p(0, 0));
        MessageCellDetailView.getComponent('MessageCellDetailView').setContent(msg);
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("MessageDetailView.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("MessageDetailView.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnClose") {
            this.dismiss();
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"MessageFactory_Bullfight":[function(require,module,exports){
"use strict";
cc._RFpush(module, '54729u6eBhJ8ZbwXHnM0tz5', 'MessageFactory_Bullfight');
// Script\GameScene\Bullfight\Cmd\MessageFactory\MessageFactory_Bullfight.js

'use strict';

/**
 * Created by shrimp on 17/3/2.
 */
var Cmd_Bullfight = require('Cmd_Bullfight');
var Bullfight_BetCoinRespPacket = require('Bullfight_BetCoinRespPacket');
var Bullfight_CallBankerRespPacket = require('Bullfight_CallBankerRespPacket');
var Bullfight_HelpRespPacket = require('Bullfight_HelpRespPacket');
var Bullfight_OpenCardRespPacket = require('Bullfight_OpenCardRespPacket');
var Bullfight_TableDetailRespPacket = require('Bullfight_TableDetailRespPacket');
var Bullfight_BetCoinReqPacket = require('Bullfight_BetCoinReqPacket');
var Bullfight_CallBankerReqPacket = require('Bullfight_CallBankerReqPacket');
var Bullfight_HelpReqPacket = require('Bullfight_HelpReqPacket');
var Bullfight_OpenCardReqPacket = require('Bullfight_OpenCardReqPacket');
var Bullfight_TableDetailReqPacket = require('Bullfight_TableDetailReqPacket');
var Bullfight_NotifyGameOverOncePacket = require('Bullfight_NotifyGameOverOncePacket');
var Bullfight_NotifyGameOverTotalPacket = require('Bullfight_NotifyGameOverTotalPacket');
var Bullfight_ReadyReqPacket = require('Bullfight_ReadyReqPacket');
var Bullfight_ReadyRespPacket = require('Bullfight_ReadyRespPacket');
var Bullfight_NotifyGameStartPacket = require('Bullfight_NotifyGameStartPacket');
var Bullfight_NotifySureBankerPacket = require('Bullfight_NotifySureBankerPacket');
var Bullfight_NotifyOpenCardPacket = require('Bullfight_NotifyOpenCardPacket');
var Bullfight_NotifyKickOutPacket = require('Bullfight_NotifyKickOutPacket');
var Bullfight_NotifyNotCallBankerPacket = require('Bullfight_NotifyNotCallBankerPacket');
var Bullfight_NotifyNotBetPacket = require('Bullfight_NotifyNotBetPacket');
var Bullfight_GetPlayersListReqPacket = require('Bullfight_GetPlayersListReqPacket');
var Bullfight_GetPlayersListRespPacket = require('Bullfight_GetPlayersListRespPacket');

var MessageFactory_Bullfight = {

    //Clint 请求
    createMessageReq: function createMessageReq(cmd) {
        var msg = null;
        switch (cmd) {
            case Cmd_Bullfight.SBF_REQ_BET_COIN_CMD_ID:
                msg = new Bullfight_BetCoinReqPacket();
                break;
            case Cmd_Bullfight.SBF_REQ_CALL_BANKER_CMD_ID:
                msg = new Bullfight_CallBankerReqPacket();
                break;
            case Cmd_Bullfight.SBF_REQ_HELP_CMD_ID:
                msg = new Bullfight_HelpReqPacket();
                break;
            case Cmd_Bullfight.SBF_REQ_OPEN_CARD_CMD_ID:
                msg = new Bullfight_OpenCardReqPacket();
                break;
            case Cmd_Bullfight.US_REQ_TABLE_DETAIL_CMD_ID:
                msg = new Bullfight_TableDetailReqPacket();
                break;
            case Cmd_Bullfight.SBF_REQ_READY_CMD_ID:
                msg = new Bullfight_ReadyReqPacket();
                break;
            case Cmd_Bullfight.US_REQ_PLAYER_LIST_CMD_ID:
                msg = new Bullfight_GetPlayersListReqPacket();
                break;
        }
        return msg;
    },

    // Server 回应
    createMessageResp: function createMessageResp(cmd) {
        var msg = null;
        switch (cmd) {
            case Cmd_Bullfight.SBF_RESP_BET_COIN_CMD_ID:
                msg = new Bullfight_BetCoinRespPacket();
                break;
            case Cmd_Bullfight.SBF_RESP_CALL_BANKER_CMD_ID:
                msg = new Bullfight_CallBankerRespPacket();
                break;
            case Cmd_Bullfight.SBF_RESP_HELP_CMD_ID:
                msg = new Bullfight_HelpRespPacket();
                break;
            case Cmd_Bullfight.SBF_RESP_OPEN_CARD_CMD_ID:
                msg = new Bullfight_OpenCardRespPacket();
                break;
            case Cmd_Bullfight.US_RESP_TABLE_DETAIL_CMD_ID:
                msg = new Bullfight_TableDetailRespPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_ONE_GAME_RESULT_CMD_ID:
                msg = new Bullfight_NotifyGameOverOncePacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_TOTAL_GAME_RESULT_CMD_ID:
                msg = new Bullfight_NotifyGameOverTotalPacket();
                break;
            case Cmd_Bullfight.SBF_RESP_READY_CMD_ID:
                msg = new Bullfight_ReadyRespPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_GAME_START_CMD_ID:
                msg = new Bullfight_NotifyGameStartPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_CONFIRM_BANKER_CMD_ID:
                msg = new Bullfight_NotifySureBankerPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_OPEN_CARD_CMD_ID:
                msg = new Bullfight_NotifyOpenCardPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_KICKOUT_CMD_ID:
                msg = new Bullfight_NotifyKickOutPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_NOT_CALL_BANKER_CMD_ID:
                msg = new Bullfight_NotifyNotCallBankerPacket();
                break;
            case Cmd_Bullfight.SBF_NOTIFY_NOT_BET_COIN_CMD_ID:
                msg = new Bullfight_NotifyNotBetPacket();
                break;
            case Cmd_Bullfight.US_RESP_PLAYER_LIST_CMD_ID:
                msg = new Bullfight_GetPlayersListRespPacket();
                break;
        }
        return msg;
    }
};

module.exports = MessageFactory_Bullfight;

cc._RFpop();
},{"Bullfight_BetCoinReqPacket":"Bullfight_BetCoinReqPacket","Bullfight_BetCoinRespPacket":"Bullfight_BetCoinRespPacket","Bullfight_CallBankerReqPacket":"Bullfight_CallBankerReqPacket","Bullfight_CallBankerRespPacket":"Bullfight_CallBankerRespPacket","Bullfight_GetPlayersListReqPacket":"Bullfight_GetPlayersListReqPacket","Bullfight_GetPlayersListRespPacket":"Bullfight_GetPlayersListRespPacket","Bullfight_HelpReqPacket":"Bullfight_HelpReqPacket","Bullfight_HelpRespPacket":"Bullfight_HelpRespPacket","Bullfight_NotifyGameOverOncePacket":"Bullfight_NotifyGameOverOncePacket","Bullfight_NotifyGameOverTotalPacket":"Bullfight_NotifyGameOverTotalPacket","Bullfight_NotifyGameStartPacket":"Bullfight_NotifyGameStartPacket","Bullfight_NotifyKickOutPacket":"Bullfight_NotifyKickOutPacket","Bullfight_NotifyNotBetPacket":"Bullfight_NotifyNotBetPacket","Bullfight_NotifyNotCallBankerPacket":"Bullfight_NotifyNotCallBankerPacket","Bullfight_NotifyOpenCardPacket":"Bullfight_NotifyOpenCardPacket","Bullfight_NotifySureBankerPacket":"Bullfight_NotifySureBankerPacket","Bullfight_OpenCardReqPacket":"Bullfight_OpenCardReqPacket","Bullfight_OpenCardRespPacket":"Bullfight_OpenCardRespPacket","Bullfight_ReadyReqPacket":"Bullfight_ReadyReqPacket","Bullfight_ReadyRespPacket":"Bullfight_ReadyRespPacket","Bullfight_TableDetailReqPacket":"Bullfight_TableDetailReqPacket","Bullfight_TableDetailRespPacket":"Bullfight_TableDetailRespPacket","Cmd_Bullfight":"Cmd_Bullfight"}],"MessageFactory_Common":[function(require,module,exports){
"use strict";
cc._RFpush(module, '494a6ludDBIfJOnYk1g+G9c', 'MessageFactory_Common');
// Script\Network\Cmd\MessageFactory\MessageFactory_Common.js

'use strict';

/**
 * Created by shrimp on 17/2/19.
 */

var HeartReqPacket = require('HeartReqPacket');
var HeartRespPacket = require('HeartRespPacket');
var LoginReqPacket = require('LoginReqPacket');
var LoginRespPacket = require('LoginRespPacket');
var CreateRoomReqPacket = require('CreateRoomReqPacket');
var CreateRoomRespPacket = require('CreateRoomRespPacket');
var FindRoomReqPacket = require('FindRoomReqPacket');
var FindRoomRespPacket = require('FindRoomRespPacket');
var EnterRoomReqPacket = require('EnterRoomReqPacket');
var EnterRoomRespPacket = require('EnterRoomRespPacket');
var LeaveGameReqPacket = require('LeaveGameReqPacket');
var LeaveGameRespPacket = require('LeaveGameRespPacket');
var ServerKickOutPacket = require('ServerKickOutPacket');
//var NotifyTableOwnerSitPacket = require('NotifyTableOwnerSitPacket');
var OwnerConfirmReqPacket = require('OwnerConfirmReqPacket');
var OwnerConfirmRespPacket = require('OwnerConfirmRespPacket');
var OwnerKickOutPlayerReqPacket = require('OwnerKickOutPlayerReqPacket');
var OwnerKickOutPlayerRespPacket = require('OwnerKickOutPlayerRespPacket');
var StartGameReqPacket = require('StartGameReqPacket');
var StartGameRespPacket = require('StartGameRespPacket');
var DismissGameReqPacket = require('DismissGameReqPacket');
//var DismissGameRespPacket = require('DismissGameRespPacket');
var NotifyDismissGame = require('NotifyDismissGame');
var SitDownReqPacket = require('SitDownReqPacket');
var SitDownRespPacket = require('SitDownRespPacket');
var NotifyOwnerOverPacket = require('NotifyOwnerOverPacket');
var ChatReqPacket = require('ChatReqPacket');
var ChatRespPacket = require('ChatRespPacket');
var NotifyOwnerSitPacket = require("NotifyOwnerSitPacket");
var CarryCoinReqPacket = require('CarryCoinReqPacket');
var CarryCoinRespPacket = require('CarryCoinRespPacket');
var NotifyGameStartPacket = require('NotifyGameStartPacket');
var FindRespPacket = require('FindRespPacket');
var FindReqPacket = require('FindReqPacket');
var ScoreListReqPacket = require('ScoreListReqPacket');
var ScoreListRespPacket = require('ScoreListRespPacket');
var ScoreDetailReqPacket = require('ScoreDetailReqPacket');
var ScoreDetailRespPacket = require('ScoreDetailRespPacket');
var ShopConfReqPacket = require('ShopConfReqPacket');
var ShopConfRespPacket = require('ShopConfRespPacket');
var CreateClubReqPacket = require('CreateClubReqPacket');
var CreateClubRespPacket = require('CreateClubRespPacket');
var GetClubListReqPacket = require('GetClubListReqPacket');
var GetClubListRespPacket = require('GetClubListRespPacket');
var GetClubTableReqPacket = require('GetClubTableReqPacket');
var GetClubTableRespPacket = require('GetClubTableRespPacket');
var SearchClubReqPacket = require('SearchClubReqPacket');
var SearchClubRespPacket = require('SearchClubRespPacket');
var ModifyClubInfoReqPacket = require('ModifyClubInfoReqPacket');
var ModifyClubInfoRespPacket = require('ModifyClubInfoRespPacket');
var GetMemberListReqPacket = require('GetMemberListReqPacket');
var GetMemberListRespPacket = require('GetMemberListRespPacket');
var JoinClubReqPacket = require('JoinClubReqPacket');
var JoinClubRespPacket = require('JoinClubRespPacket');
var NotifyClubOwnerConfirmPacket = require('NotifyClubOwnerConfirmPacket');
var ClubOwnerConfirmReqPacket = require('ClubOwnerConfirmReqPacket');
var ClubOwnerConfirmRespPacket = require('ClubOwnerConfirmRespPacket');
var ClubDelMemberReqPacket = require('ClubDelMemberReqPacket');
var ClubDelMemberRespPacket = require('ClubDelMemberRespPacket');
var GetMsgNumReqPacket = require('GetMsgNumReqPacket');
var GetMsgNumRespPacket = require('GetMsgNumRespPacket');
var GetMsgListReqPacket = require('GetMsgListReqPacket');
var GetMsgListRespPacket = require('GetMsgListRespPacket');
var MsgReadReqPacket = require('MsgReadReqPacket');
var MsgReadRespPacket = require('MsgReadRespPacket');
var DismissClubReqPacket = require('DismissClubReqPacket');
var DismissClubRespPacket = require('DismissClubRespPacket');
var ClubOwnerModifyRoleRespPacket = require('ClubOwnerModifyRoleRespPacket');
var ClubOwnerModifyRoleReqPacket = require('ClubOwnerModifyRoleReqPacket');
var ClubCreateRoomReqPacket = require('ClubCreateRoomReqPacket');
var ClubCreateRoomRespPacket = require('ClubCreateRoomRespPacket');
var UserDetailReqPacket = require('UserDetailReqPacket');
var UserDetailRespPacket = require('UserDetailRespPacket');
var CreateTableCostReqPacket = require('CreateTableCostReqPacket');
var CreateTableCostRespPacket = require('CreateTableCostRespPacket');
var ClubUpgradeCostReqPacket = require('ClubUpgradeCostReqPacket');
var ClubUpgradeCostRespPacket = require('ClubUpgradeCostRespPacket');
var ExchangeGoldReqPacket = require('ExchangeGoldReqPacket');
var ExchangeGoldRespPacket = require('ExchangeGoldRespPacket');
var BannerListReqPacket = require('BannerListReqPacket');
var BannerListRespPacket = require('BannerListRespPacket');
var NotifyPayOperatePacket = require('NotifyPayOperatePacket');
var NotifyInGameRespPacket = require('NotifyInGameRespPacket');
var BindReferralReqPacket = require('BindReferralReqPacket');
var BindReferralRespPacket = require('BindReferralRespPacket');
/*
var DismissTableReqPacket = require('DismissTableReqPacket');
var ConfirmDismissTableReqPacket = require('ConfirmDismissTableReqPacket');
var DismissTableRspPacket = require('DismissTableRspPacket');
var ConfirmDismissTableRspPacket = require('ConfirmDismissTableRspPacket');
var DismissTableNotifyPacket  = require('DismissTableNotifyPacket');
var ConfirmDismissTableNotifyPacket = require('ConfirmDismissTableNotifyPacket');
*/
var MessageFactory_Common = {

    //Clint 请求
    createMessageReq: function createMessageReq(cmd) {
        var msg = null;
        switch (cmd) {
            case window.US_REQ_HEARTBEAT_CMD_ID:
                msg = new HeartReqPacket();
                break;
            case window.US_REQ_LOGIN_CMD_ID:
                msg = new LoginReqPacket();
                break;
            case window.US_REQ_CREATE_TABLE_CMD_ID:
                msg = new CreateRoomReqPacket();
                break;
            case window.US_REQ_ENTER_GAME_CMD_ID:
                msg = new EnterRoomReqPacket();
                break;
            case window.US_REQ_FIND_TABLE_CMD_ID:
                msg = new FindRoomReqPacket();
                break;
            case window.US_REQ_LEAVE_GAME_CMD_ID:
                msg = new LeaveGameReqPacket();
                break;
            case window.US_REQ_OWNER_CONFIRM_CMD_ID:
                msg = new OwnerConfirmReqPacket();
                break;
            case window.US_REQ_OWNER_KICKOUT_PLAYERCMD_ID:
                msg = new OwnerKickOutPlayerReqPacket();
                break;
            case window.US_REQ_GAME_SWITCH_CMD_ID:
                msg = new StartGameReqPacket();
                break;
            case window.US_REQ_SIT_DOWN_CMD_ID:
                msg = new SitDownReqPacket();
                break;
            case window.US_REQ_GAME_CHAT_CMD_ID:
                msg = new ChatReqPacket();
                break;
            case window.US_REQ_CARRY_COIN_CMD_ID:
                msg = new CarryCoinReqPacket();
                break;
            case window.US_REQ_FOUND_TABLE_CMD_ID:
                msg = new FindReqPacket();
                break;
            case window.US_REQ_SCORE_LIST_CMD_ID:
                msg = new ScoreListReqPacket();
                break;
            case window.US_REQ_SCORE_DETAIL_CMD_ID:
                msg = new ScoreDetailReqPacket();
                break;
            case window.US_REQ_SHOP_CONF_CMD_ID:
                msg = new ShopConfReqPacket();
                break;
            case window.US_REQ_CREATE_CLUB_CMD_ID:
                msg = new CreateClubReqPacket();
                break;
            case window.US_REQ_CLUB_LIST_CMD_ID:
                msg = new GetClubListReqPacket();
                break;
            case window.US_REQ_CLUB_TABLE_CMD_ID:
                msg = new GetClubTableReqPacket();
                break;
            case window.US_REQ_SEARCH_CLUB_CMD_ID:
                msg = new SearchClubReqPacket();
                break;
            case window.CLUB_REQ_MODIFY_INFO_CMD_ID:
                msg = new ModifyClubInfoReqPacket();
                break;
            case window.CLUB_REQ_GET_MEMBER_LIST_CMD_ID:
                msg = new GetMemberListReqPacket();
                break;
            case window.CLUB_REQ_JOIN_CLUB_CMD_ID:
                msg = new JoinClubReqPacket();
                break;
            case window.CLUB_REQ_OWNER_CONFIRM_CMD_ID:
                msg = new ClubOwnerConfirmReqPacket();
                break;
            case window.CLUB_REQ_OWNER_RM_MEMBER_CMD_ID:
                msg = new ClubDelMemberReqPacket();
                break;
            case window.US_REQ_NEW_MSG_NUM_CMD_ID:
                msg = new GetMsgNumReqPacket();
                break;
            case window.US_REQ_MSG_LIST_CMD_ID:
                msg = new GetMsgListReqPacket();
                break;
            case window.US_REQ_SET_MSG_READ_CMD_ID:
                msg = new MsgReadReqPacket();
                break;
            case window.CLUB_REQ_DISMISS_CLUB_CMD_ID:
                msg = new DismissClubReqPacket();
                break;
            case window.CLUB_REQ_OWNER_MODIFY_ROLE_CMD_ID:
                msg = new ClubOwnerModifyRoleReqPacket();
                break;
            case window.CLUB_REQ_CREATE_TABLE_CMD_ID:
                msg = new ClubCreateRoomReqPacket();
                break;
            case window.US_REQ_USER_DETAIL_CMD_ID:
                msg = new UserDetailReqPacket();
                break;

            case window.US_REQ_CREATE_COST_CMD_ID:
                msg = new CreateTableCostReqPacket();
                break;

            case window.US_REQ_CLUB_UPGRADE_COST_CMD_ID:
                msg = new ClubUpgradeCostReqPacket();
                break;

            case window.US_REQ_EXCHANGE_GOLD_CMD_ID:
                msg = new ExchangeGoldReqPacket();
                break;

            case window.US_REQ_BANNER_LIST_CMD_ID:
                msg = new BannerListReqPacket();
                break;

            case window.US_REQ_BIND_REFERRAL_CMD_ID:
                msg = new BindReferralReqPacket();
                break;

            /*
            case window.US_REQ_DISMISS_TABLE_CMD_ID:
                msg = new DismissTableReqPacket;
                break;
              case window.US_REQ_CONFIRM_DISMISS_TABLE_CMD_ID:
                msg = new ConfirmDismissTableReqPacket;
                break;
             */

        }
        return msg;
    },

    // Server 回应
    createMessageResp: function createMessageResp(cmd) {
        var msg = null;
        switch (cmd) {
            case window.US_RESP_HEARTBEAT_CMD_ID:
                msg = new HeartRespPacket();
                break;

            case window.US_RESP_LOGIN_CMD_ID:
                msg = new LoginRespPacket();
                break;

            case window.US_RESP_CREATE_TABLE_CMD_ID:
                msg = new CreateRoomRespPacket();
                break;

            case window.US_RESP_ENTER_GAME_CMD_ID:
                msg = new EnterRoomRespPacket();
                break;
            case window.US_RESP_FIND_TABLE_CMD_ID:
                msg = new FindRoomRespPacket();
                break;

            case window.US_RESP_LEAVE_GAME_CMD_ID:
                msg = new LeaveGameRespPacket();
                break;

            case window.US_KICK_OUT_CMD_ID:
                msg = new ServerKickOutPacket();
                break;

            case window.US_RESP_OWNER_CONFIRM_CMD_ID:
                msg = new OwnerConfirmRespPacket();
                break;

            case window.US_RESP_OWNER_KICKOUT_PLAYERCMD_ID:
                msg = new OwnerKickOutPlayerRespPacket();
                break;

            case window.US_RESP_GAME_SWITCH_CMD_ID:
                msg = new StartGameRespPacket();
                break;

            case window.US_NOTIFY_DISMISS_GAME_CMD_ID:
                msg = new NotifyDismissGame();
                break;

            case window.US_RESP_SIT_DOWN_CMD_ID:
                msg = new SitDownRespPacket();
                break;

            case window.US_NOTFIY_OWNER_TABLEINFO_CMD_ID:
                msg = new NotifyOwnerOverPacket();
                break;

            case window.US_RESP_GAME_CHAT_CMD_ID:
                msg = new ChatRespPacket();
                break;

            case window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID:
                msg = new NotifyOwnerSitPacket();
                break;

            case window.US_RESP_CARRY_COIN_CMD_ID:
                msg = new CarryCoinRespPacket();
                break;

            case window.US_NOTIFY_GAME_SWITCH_CMD_ID:
                msg = new NotifyGameStartPacket();
                break;

            case window.US_RESP_FOUND_TABLE_CMD_ID:
                msg = new FindRespPacket();
                break;

            case window.US_RESP_SCORE_LIST_CMD_ID:
                msg = new ScoreListRespPacket();
                break;

            case window.US_RESP_SCORE_DETAIL_CMD_ID:
                msg = new ScoreDetailRespPacket();
                break;

            case window.US_RESP_SHOP_CONF_CMD_ID:
                msg = new ShopConfRespPacket();
                break;

            case window.US_RESP_CREATE_CLUB_CMD_ID:
                msg = new CreateClubRespPacket();
                break;

            case window.US_RESP_CLUB_LIST_CMD_ID:
                msg = new GetClubListRespPacket();
                break;

            case window.US_RESP_CLUB_TABLE_CMD_ID:
                msg = new GetClubTableRespPacket();
                break;

            case window.US_RESP_SEARCH_CLUB_CMD_ID:
                msg = new SearchClubRespPacket();
                break;

            case window.CLUB_RESP_MODIFY_INFO_CMD_ID:
                msg = new ModifyClubInfoRespPacket();
                break;

            case window.CLUB_RESP_GET_MEMBER_LIST_CMD_ID:
                msg = new GetMemberListRespPacket();
                break;

            case window.CLUB_RESP_JOIN_CLUB_CMD_ID:
                msg = new JoinClubRespPacket();
                break;

            case window.CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID:
                msg = new NotifyClubOwnerConfirmPacket();
                break;

            case window.CLUB_RESP_OWNER_CONFIRM_CMD_ID:
                msg = new ClubOwnerConfirmRespPacket();
                break;

            case window.CLUB_RESP_OWNER_RM_MEMBER_CMD_ID:
                msg = new ClubDelMemberRespPacket();
                break;

            case window.US_RESP_NEW_MSG_NUM_CMD_ID:
                msg = new GetMsgNumRespPacket();
                break;

            case window.US_RESP_MSG_LIST_CMD_ID:
                msg = new GetMsgListRespPacket();
                break;

            case window.US_RESP_SET_MSG_READ_CMD_ID:
                msg = new MsgReadRespPacket();
                break;

            case window.US_RESP_SEARCH_CLUB_CMD_ID:
                msg = new SearchClubRespPacket();
                break;

            case window.CLUB_RESP_DISMISS_CLUB_CMD_ID:
                msg = new DismissClubRespPacket();
                break;

            case window.CLUB_RESP_OWNER_MODIFY_ROLE_CMD_ID:
                msg = new ClubOwnerModifyRoleRespPacket();
                break;

            case window.CLUB_RESP_CREATE_TABLE_CMD_ID:
                msg = new ClubCreateRoomRespPacket();
                break;

            case window.US_RESP_USER_DETAIL_CMD_ID:
                msg = new UserDetailRespPacket();
                break;

            case window.US_RESP_CREATE_COST_CMD_ID:
                msg = new CreateTableCostRespPacket();
                break;

            case window.US_RESP_CLUB_UPGRADE_COST_CMD_ID:
                msg = new ClubUpgradeCostRespPacket();
                break;

            case window.US_RESP_EXCHANGE_GOLD_CMD_ID:
                msg = new ExchangeGoldRespPacket();
                break;

            case window.US_RESP_BANNER_LIST_CMD_ID:
                msg = new BannerListRespPacket();
                break;
            case window.US_NOTIFY_PAY_OPERATE_CMD_ID:
                msg = new NotifyPayOperatePacket();
                break;

            case window.US_NOTIFY_IN_GAME_CMD_ID:
                msg = new NotifyInGameRespPacket();
                break;

            case window.US_RESP_BIND_REFERRAL_CMD_ID:
                msg = new BindReferralRespPacket();
                break;
            /*
                        case window.US_RSP_DISMISS_TABLE_CMD_ID:
                            msg = new DismissTableRspPacket;
                            break;
            
                        case window.US_RSP_CONFIRM_DISMISS_TABLE_CMD_ID:
                            msg = new ConfirmDismissTableRspPacket;
                            break;
            
                        case window.US_NOTIFY_DISMISS_TABLE_CMD_ID:
                            msg = new DismissTableNotifyPacket;
                            break;
            
                        case window.US_NOTIFY_CONFIRM_DISMISS_TABLE_CMD_ID:
                            msg = new ConfirmDismissTableNotifyPacket;
                            break;
             */

        }

        return msg;
    }
};

module.exports = MessageFactory_Common;

cc._RFpop();
},{"BannerListReqPacket":"BannerListReqPacket","BannerListRespPacket":"BannerListRespPacket","BindReferralReqPacket":"BindReferralReqPacket","BindReferralRespPacket":"BindReferralRespPacket","CarryCoinReqPacket":"CarryCoinReqPacket","CarryCoinRespPacket":"CarryCoinRespPacket","ChatReqPacket":"ChatReqPacket","ChatRespPacket":"ChatRespPacket","ClubCreateRoomReqPacket":"ClubCreateRoomReqPacket","ClubCreateRoomRespPacket":"ClubCreateRoomRespPacket","ClubDelMemberReqPacket":"ClubDelMemberReqPacket","ClubDelMemberRespPacket":"ClubDelMemberRespPacket","ClubOwnerConfirmReqPacket":"ClubOwnerConfirmReqPacket","ClubOwnerConfirmRespPacket":"ClubOwnerConfirmRespPacket","ClubOwnerModifyRoleReqPacket":"ClubOwnerModifyRoleReqPacket","ClubOwnerModifyRoleRespPacket":"ClubOwnerModifyRoleRespPacket","ClubUpgradeCostReqPacket":"ClubUpgradeCostReqPacket","ClubUpgradeCostRespPacket":"ClubUpgradeCostRespPacket","CreateClubReqPacket":"CreateClubReqPacket","CreateClubRespPacket":"CreateClubRespPacket","CreateRoomReqPacket":"CreateRoomReqPacket","CreateRoomRespPacket":"CreateRoomRespPacket","CreateTableCostReqPacket":"CreateTableCostReqPacket","CreateTableCostRespPacket":"CreateTableCostRespPacket","DismissClubReqPacket":"DismissClubReqPacket","DismissClubRespPacket":"DismissClubRespPacket","DismissGameReqPacket":"DismissGameReqPacket","EnterRoomReqPacket":"EnterRoomReqPacket","EnterRoomRespPacket":"EnterRoomRespPacket","ExchangeGoldReqPacket":"ExchangeGoldReqPacket","ExchangeGoldRespPacket":"ExchangeGoldRespPacket","FindReqPacket":"FindReqPacket","FindRespPacket":"FindRespPacket","FindRoomReqPacket":"FindRoomReqPacket","FindRoomRespPacket":"FindRoomRespPacket","GetClubListReqPacket":"GetClubListReqPacket","GetClubListRespPacket":"GetClubListRespPacket","GetClubTableReqPacket":"GetClubTableReqPacket","GetClubTableRespPacket":"GetClubTableRespPacket","GetMemberListReqPacket":"GetMemberListReqPacket","GetMemberListRespPacket":"GetMemberListRespPacket","GetMsgListReqPacket":"GetMsgListReqPacket","GetMsgListRespPacket":"GetMsgListRespPacket","GetMsgNumReqPacket":"GetMsgNumReqPacket","GetMsgNumRespPacket":"GetMsgNumRespPacket","HeartReqPacket":"HeartReqPacket","HeartRespPacket":"HeartRespPacket","JoinClubReqPacket":"JoinClubReqPacket","JoinClubRespPacket":"JoinClubRespPacket","LeaveGameReqPacket":"LeaveGameReqPacket","LeaveGameRespPacket":"LeaveGameRespPacket","LoginReqPacket":"LoginReqPacket","LoginRespPacket":"LoginRespPacket","ModifyClubInfoReqPacket":"ModifyClubInfoReqPacket","ModifyClubInfoRespPacket":"ModifyClubInfoRespPacket","MsgReadReqPacket":"MsgReadReqPacket","MsgReadRespPacket":"MsgReadRespPacket","NotifyClubOwnerConfirmPacket":"NotifyClubOwnerConfirmPacket","NotifyDismissGame":"NotifyDismissGame","NotifyGameStartPacket":"NotifyGameStartPacket","NotifyInGameRespPacket":"NotifyInGameRespPacket","NotifyOwnerOverPacket":"NotifyOwnerOverPacket","NotifyOwnerSitPacket":"NotifyOwnerSitPacket","NotifyPayOperatePacket":"NotifyPayOperatePacket","OwnerConfirmReqPacket":"OwnerConfirmReqPacket","OwnerConfirmRespPacket":"OwnerConfirmRespPacket","OwnerKickOutPlayerReqPacket":"OwnerKickOutPlayerReqPacket","OwnerKickOutPlayerRespPacket":"OwnerKickOutPlayerRespPacket","ScoreDetailReqPacket":"ScoreDetailReqPacket","ScoreDetailRespPacket":"ScoreDetailRespPacket","ScoreListReqPacket":"ScoreListReqPacket","ScoreListRespPacket":"ScoreListRespPacket","SearchClubReqPacket":"SearchClubReqPacket","SearchClubRespPacket":"SearchClubRespPacket","ServerKickOutPacket":"ServerKickOutPacket","ShopConfReqPacket":"ShopConfReqPacket","ShopConfRespPacket":"ShopConfRespPacket","SitDownReqPacket":"SitDownReqPacket","SitDownRespPacket":"SitDownRespPacket","StartGameReqPacket":"StartGameReqPacket","StartGameRespPacket":"StartGameRespPacket","UserDetailReqPacket":"UserDetailReqPacket","UserDetailRespPacket":"UserDetailRespPacket"}],"MessageFactory":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fe6a4+vaRpGNZhAf3Z6Nwph', 'MessageFactory');
// Script\Network\MessageFactory.js

'use strict';

/**
 * Created by shrimp on 17/2/19.
 */

var MessageFactory_Common = require('MessageFactory_Common');
var MessageFactory_Bullfight = require('MessageFactory_Bullfight');
var GameSystem = require('GameSystem');

var MessageFactory = {};

//生成一个基础消息
MessageFactory.createMessageReq = function (cmd) {
    cc.log("MessageFactory.createMessageReq,cmd = " + cmd.toString(16));
    var message = null;
    if (GameSystem.getInstance().CurGameType == GameSystem.getInstance().GameType.GAME_TYPE_BULLFIGHT) {
        message = MessageFactory_Bullfight.createMessageReq(cmd);
    } else {}
    // cc.error("MessageFactory.createMessage,ERROR,curGameType = " + curGameType);


    //走公共协议
    if (message == null) {
        message = MessageFactory_Common.createMessageReq(cmd);
    }

    if (message == null) {
        cc.error("MessageFactory.createMessageReq,message = null");
    }
    cc.log("MessageFactory.createMessageReq," + message.constructor.name);
    return message;
};

MessageFactory.createMessageResp = function (cmd) {
    cc.log("MessageFactory.createMessageResp,cmd = " + cmd.toString(16));
    var message = null;
    if (GameSystem.getInstance().CurGameType == GameSystem.getInstance().GameType.GAME_TYPE_BULLFIGHT || 1) {
        message = MessageFactory_Bullfight.createMessageResp(cmd);
    } else {}
    // cc.error("MessageFactory.createMessage,ERROR,curGameType = " + curGameType);


    //走公共协议
    if (message == null) {
        message = MessageFactory_Common.createMessageResp(cmd);
    }

    if (message == null) {
        cc.error("MessageFactory.createMessageResp,message = null");
    }
    cc.log("MessageFactory.createMessageResp," + message.constructor.name);
    return message;
};

module.exports = MessageFactory;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageFactory_Bullfight":"MessageFactory_Bullfight","MessageFactory_Common":"MessageFactory_Common"}],"MessageReq":[function(require,module,exports){
"use strict";
cc._RFpush(module, '73c60qzqCxIY5PO4/CMYAFs', 'MessageReq');
// Script\Network\Socket\MessageReq.js

'use strict';

/**
 * Created by shrimp on 17/2/22.
 */

var Message = require('Message');

function MessageReq() {
    Message.apply(this, []); //集成父类数据

    this.seq = SocketSeq++;

    this.send = function () {};

    this.sendHead = function () {
        this.data.cmd = this.cmd;
        this.data.qeq = this.seq;
        this.data.uid = this.uid;
    };
}

module.exports = MessageReq;

cc._RFpop();
},{"Message":"Message"}],"MessageResp":[function(require,module,exports){
"use strict";
cc._RFpush(module, '31548GHSx1NWrpTw9v9X0ie', 'MessageResp');
// Script\Network\Socket\MessageResp.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var Message = require('Message');

function MessageResp() {
    Message.apply(this, []); //集成父类数据

    this.code = 0;
    this.desc = "";

    this.onMessage = function (msg) {};
}

module.exports = MessageResp;

cc._RFpop();
},{"Message":"Message"}],"MessageView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e0206hb3rhJRIjcGYCfH2io', 'MessageView');
// Script\ComScene\PopView\MessageView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        MessageDetailView: cc.Prefab,
        ScrollView: cc.ScrollView,
        NoticeMsgCell: cc.Node,
        NoticeRedTip: cc.Node,
        NoticeNum: cc.Label,
        ClubMsgCell: cc.Node,
        ClubMsgRedTip: cc.Node,
        ClubMsgNum: cc.Label,
        SitReqCell: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        MessageFactory.createMessageReq(US_REQ_NEW_MSG_NUM_CMD_ID).send();
        this.initBaseData();
    },

    initBaseData: function initBaseData() {
        this.CellNum = 0;
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("MessageView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_NEW_MSG_NUM_CMD_ID:
                this.onNewMsg(msg);
                break;

            case US_RESP_MSG_LIST_CMD_ID:
                this.onMsgList(msg);
                break;

            case US_RESP_OWNER_CONFIRM_CMD_ID:
                this.onOwnerConfirm(msg);
                break;
        }
    },

    onOwnerConfirm: function onOwnerConfirm(msg) {
        if (msg.code < SocketRetCode.RET_SUCCESS) {
            cc.log("MessageView.onOwnerConfirm");
            this.dismiss();
        } else {}
    },

    onMsgList: function onMsgList(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.type == 1) {} else if (msg.type == 2) {} else if (msg.type == 3) {
                var cellCount = this.ScrollView.content.getChildrenCount();
                if (msg.list == null || msg.list == undefined) return;
                var cellHeight = 0;
                for (var index = 0; index < msg.list.length; index++) {
                    var json = BASE64.decoder(msg.list[index].msg);
                    msg.list[index].msg = JSON.parse(json);
                    cc.log("MessageView.onMsgList,json = " + msg.list[index].msg);

                    var SitReqCell = cc.instantiate(this.SitReqCell);
                    this.ScrollView.content.addChild(SitReqCell);
                    cellHeight = SitReqCell.getContentSize().height;
                    SitReqCell.setPosition(cc.p(0, -SitReqCell.getContentSize().height * (cellCount + index + 1)));
                    SitReqCell.getComponent("SitReqCell").setMessageInfo(msg.list[index], msg.type);
                }

                if (cellHeight * (this.ScrollView.content.getChildrenCount() + 1) > this.ScrollView.content.height) {
                    this.ScrollView.content.height = cellHeight * (this.ScrollView.content.getChildrenCount() + 1);
                }
            }
        }
    },

    onNewMsg: function onNewMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            if (msg.sysnum > 0) {
                this.NoticeRedTip.active = true;
                this.NoticeNum.string = msg.sysnum;
                this.CellNum++;
            }

            if (msg.clubnum > 0) {
                this.ClubMsgRedTip.active = true;
                this.ClubMsgNum.string = msg.clubnum;
                this.CellNum++;
            }

            var data = {
                type: 3,
                start: 0,
                total: 50
            };
            MessageFactory.createMessageReq(US_REQ_MSG_LIST_CMD_ID).send(data);
        }
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("MessageView.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("MessageView.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);

        if (btnName == "BtnClose") {
            this.dismiss();
        } else if (btnName == "NoticeMsgCell") {
            var MessageDetailView = cc.instantiate(this.MessageDetailView);
            this.node.addChild(MessageDetailView);
            MessageDetailView.setPosition(cc.p(0, 0));
            MessageDetailView.getComponent('MessageDetailView').sendGetMsgList(1);
        } else if (btnName == "ClubMsgCell") {
            cc.log("MessageView.ClubMsgCell");
            var MessageDetailView = cc.instantiate(this.MessageDetailView);
            this.node.addChild(MessageDetailView);
            MessageDetailView.setPosition(cc.p(0, 0));
            MessageDetailView.getComponent('MessageDetailView').sendGetMsgList(2);
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"Message":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cee66BLZqpP3KF7HDU+NF64', 'Message');
// Script\Network\Socket\Message.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */
var GamePlayer = require('GamePlayer');

function Message() {
    this.cmd = 0;
    this.seq = 0;
    this.uid = GamePlayer.getInstance().uid;

    this.data = "";

    this.onMessage = function (data) {};
    this.send = function () {};
    this.proccess = function (ui) {};
}

module.exports = Message;

cc._RFpop();
},{"GamePlayer":"GamePlayer"}],"MineView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd1d883ZkdFDbZqDkdBBIbzr', 'MineView');
// Script\ComScene\PopView\MineView.js

'use strict';

var BasePop = require('BasePop');
var GamePlayer = require('GamePlayer');
var AlertView = require('AlertView');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');
var GameCallOC = require('GameCallOC');
var ToastView = require('ToastView');
cc.Class({
    extends: BasePop,

    properties: {
        // ...
        UserNick: cc.Label,
        UserHead: cc.Sprite,
        UserSex: cc.Sprite,
        SexSpriteFrame: [cc.SpriteFrame],
        UidLable: cc.Label,
        Diamond: cc.Label,
        Gold: cc.Label,
        MessageView: cc.Prefab,
        RedTips: cc.Sprite,
        ClubView: cc.Prefab,
        SuccessView: cc.Prefab,
        ShareView: cc.Prefab,
        SettingView: cc.Prefab,
        NoticeView: cc.Prefab,
        ShopView: cc.Prefab,
        BtnShare: cc.Node,
        ReferralCodeView: cc.Prefab,
        BtnNode: [cc.Node],
        RoomCardCount: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.initBaseData();
        this.RedTips.node.active = GameSystem.getInstance().NewMsgNum;
    },

    initBaseData: function initBaseData() {
        this.UserNick.string = GamePlayer.getInstance().name;
        this.UidLable.string = GamePlayer.getInstance().uid;
        this.Diamond.string = GamePlayer.getInstance().diamond;
        this.Gold.string = GamePlayer.getInstance().gold;
        this.RoomCardCount.strng = GamePlayer.getInstance().roomcard;
        UpdateWXHeadIcon(GamePlayer.getInstance().headurl, this.UserHead);
        this.UserSex.spriteFrame = this.UserSex[GamePlayer.getInstance().sex];

        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT && GameCallOC.getInstance().checkIsAble()) {
            this.BtnNode[0].active = false;
            this.BtnNode[1].active = true;
        } else {
            this.BtnNode[1].active = false;
            this.BtnNode[0].active = true;
        }
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("MineView.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("MineView.callbackBtn,btnName = " + btnName);
        var winSize = cc.director.getWinSize();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnMessage") {
            var messageView = cc.instantiate(this.MessageView);
            cc.director.getScene().addChild(messageView);
            messageView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        } else if (btnName == "BtnClue") {
            var clubView = cc.instantiate(this.ClubView);
            cc.director.getScene().addChild(clubView);
            clubView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        } else if (btnName == "BtnSuccess") {
            var successView = cc.instantiate(this.SuccessView);
            cc.director.getScene().addChild(successView);
            successView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        } else if (btnName == "BtnShare") {
            if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
                ToastView.show("功能暂未开放");
                return;
            }

            var shareView = cc.instantiate(this.ShareView);
            cc.director.getScene().addChild(shareView);
            shareView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
            var string = "我正在玩游戏［" + GameCallOC.getInstance().getAppName() + "］,快点一起来玩吧！！！";
            shareView.getComponent("ShareView").setShareTyep(ShareType.E_SHARETYPE_LINK, string, GameSystem.getInstance().clienturl);
        } else if (btnName == "BtnService") {
            var alertExit = AlertView.create();
            alertExit.showOne(GameSystem.getInstance().weixincs, AlertViewBtnType.E_BTN_CLOSE);
            // var serviceView = cc.instantiate(this.ServiceView);
            // cc.director.getScene().addChild(serviceView);
            // serviceView.setPosition(cc.p(winSize.width/2,winSize.height/2));
        } else if (btnName == "BtnNotice") {
            var noticeView = cc.instantiate(this.NoticeView);
            cc.director.getScene().addChild(noticeView);
            noticeView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
            noticeView.getComponent('NoticeView').setContent();
        } else if (btnName == "BtnSetting") {
            var settingView = cc.instantiate(this.SettingView);
            cc.director.getScene().addChild(settingView);
            settingView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
            this.dismiss();
        } else if (btnName == "BtnMineInfo") {
            var shopView = cc.instantiate(this.ShopView);
            cc.director.getScene().addChild(shopView);
            shopView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        } else if (btnName == "BtnCode") {
            if (GameSystem.getInstance().referralCode != 0) {

                var self = this;
                var alert = AlertView.create();
                alert.setPositiveButton(function () {
                    // self.createReferralCodeView();
                }, "确定");

                var str = "您已经绑定了推广码:" + GameSystem.getInstance().referralCode;
                alert.show(str, AlertViewBtnType.E_BTN_CLOSE);
                return;
            }
            var referralCodeView = cc.instantiate(this.ReferralCodeView);
            cc.director.getScene().addChild(referralCodeView);
            referralCodeView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        }
    }

});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","BasePop":"BasePop","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MusicMgr":"MusicMgr","ToastView":"ToastView"}],"ModifyClubInfoReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0e217qOSc1Ao4PYJkcWls1i', 'ModifyClubInfoReqPacket');
// Script\Network\Cmd\Cmd_Req\ModifyClubInfoReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/8.
 */

/*
* type CLUB_REQ_MODIFY_INFO_T struct {
 ClubHead
 Param PARAM_REQ_MODIFY_INFO_T `json:"param"`
 }
 type PARAM_REQ_MODIFY_INFO_T struct {
 HeadUrl string `json:"headurl"`
 Address string `json:"address"`
 Intro   string `json:"intro"`
 Level   int    `json:"level"`
 Renew   int    `json:"renew"` //续费, 如果不续费就是0
 }
* */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function ModifyClubInfoReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_REQ_MODIFY_INFO_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("ModifyClubInfoReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            clubid: msg.clubid,
            param: {
                headurl: msg.headurl,
                address: msg.address,
                name: msg.name,
                intro: msg.intro,
                level: msg.level
            }
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ModifyClubInfoReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ModifyClubInfoRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '65140e8dY1HcblyM9cO3Uta', 'ModifyClubInfoRespPacket');
// Script\Network\Cmd\Cmd_Resp\ModifyClubInfoRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/8.
 */
/*
* type CLUB_RESP_MODIFY_INFO_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_MODIFY_INFO_T `json:"param"`
 }
 type PARAM_RESP_MODIFY_INFO_T struct {
 ClubId  int    `json:"clubid"`
 Status  int    `json:"status"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Address string `json:"address"`
 Intro   string `json:"intro"`
 Level   int    `json:"level"`
 EndTime int64  `json:"endtime"`
 }
* */

var MessageResp = require("MessageResp");

function ModifyClubInfoRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_RESP_MODIFY_INFO_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;

        cc.log("ModifyClubInfoRespPacket cmd=", this.cmd);
    };
}

module.exports = ModifyClubInfoRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"MsgReadReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4f564w3if1FiYNSC5Usa9Fl', 'MsgReadReqPacket');
// Script\Network\Cmd\Cmd_Req\MsgReadReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */
/*
* type US_REQ_SET_MSG_READ_T struct {
 JsonHead
 Param PARAM_SET_MSG_READ_T `json:"param"`
 }
* */
var MessageReq = require("MessageReq");

function MsgReadReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SET_MSG_READ_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("GetMsgNumReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = MsgReadReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"MsgReadRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '83286ulnEtETbYfBfRshaGJ', 'MsgReadRespPacket');
// Script\Network\Cmd\Cmd_Resp\MsgReadRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/13.
 */
/*
* type US_RESP_SET_MSG_READ_T struct {
 JsonHead
 RespHead
 Param PARAM_SET_MSG_READ_T `json:"param"`
 }
 type PARAM_SET_MSG_READ_T struct {
 Type  int `json:"type"`
 MsgId int `json:"msgid"`
 }
* */
var MessageResp = require("MessageResp");

function MsgReadRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SET_MSG_READ_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = MsgReadRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"MusicMgr":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c58902MZrlNOaHs+msHntQp', 'MusicMgr');
// Script\Manager\MusicMgr.js

"use strict";

var GameSystem = require("GameSystem");

var MusicMgr = {
    _audioVolume: 1.0,
    _musicVolume: 1.0,
    _isShake: true,
    _bgmid: -1,
    m_isAudioOn: true,
    m_isMusicOn: true,

    initAudio: function initAudio() {
        // init
        if (cc.sys.localStorage.hasOwnProperty("SHAKE_OPEN")) {
            this._isShake = cc.sys.localStorage.getItem("SHAKE_OPEN");
            this._isShake = this._isShake == "true" ? true : false;
            cc.log("MusicMgr.initAudio,this._isShake = " + this._isShake);
        }
        if (cc.sys.localStorage.hasOwnProperty("AUDIO_VOLUME")) {
            this._audioVolume = cc.sys.localStorage.getItem("AUDIO_VOLUME");
            this._audioVolume = parseFloat(this._audioVolume);
            cc.log("MusicMgr.initAudio,this._audioVolume = " + this._audioVolume);
        }
        if (cc.sys.localStorage.hasOwnProperty("MUSIC_VOLUME")) {
            this._musicVolume = cc.sys.localStorage.getItem("MUSIC_VOLUME");
            this._musicVolume = parseFloat(this._musicVolume);
            cc.log("MusicMgr.initAudio,this._musicVolume = " + this._musicVolume);
        }
        if (cc.sys.localStorage.hasOwnProperty("m_isAudioOn")) {

            this.m_isAudioOn = cc.sys.localStorage.getItem("m_isAudioOn");
            this.m_isAudioOn = this.m_isAudioOn == "true" ? true : false;
            cc.log("MusicMgr.initAudio,this.m_isAudioOn = " + this.m_isAudioOn);
        }
        if (cc.sys.localStorage.hasOwnProperty("m_isMusicOn")) {
            this.m_isMusicOn = cc.sys.localStorage.getItem("m_isMusicOn");
            this.m_isMusicOn = this.m_isMusicOn == "true" ? true : false;
            cc.log("MusicMgr.initAudio,this.m_isMusicOn = " + this.m_isMusicOn);
        }
    },

    /**
     *
     * @param path
     * @param onjs  是否挂在脚本上
     */
    playBackgroundMusic: function playBackgroundMusic(path, onjs) {
        cc.log("MusicMgr.playBackgroundMusic,path = " + path);
        if (this.m_isMusicOn) {

            if (this._bgmid == -1) {
                var audioID = -1;
                if (onjs) {
                    audioID = cc.audioEngine.play(path, true, this._musicVolume);
                } else {
                    var bgm = cc.url.raw(path);
                    audioID = cc.audioEngine.play(bgm, true, this._musicVolume);
                }

                this._bgmid = audioID;
            } else {
                this.resumeBackgroundMusic();
            }
        }
    },

    stopEffect: function stopEffect(audioID) {
        cc.audioEngine.stop(audioID);
    },

    // add by jackyu
    setVolumeQuite: function setVolumeQuite() {
        cc.audioEngine.setEffectsVolume(0.1);
    },

    stopBackgroundMusic: function stopBackgroundMusic() {
        var state = cc.audioEngine.getState(this._bgmid);
        if (state != cc.audioEngine.AudioState.ERROR) {
            cc.audioEngine.stop(this._bgmid);
            this._bgmid = -1;
        }
    },

    pauseBackgroundMusic: function pauseBackgroundMusic() {
        if (this._bgmid != -1) {
            cc.audioEngine.pause(this._bgmid);
        }
    },

    resumeBackgroundMusic: function resumeBackgroundMusic() {

        if (this._bgmid != -1 && this.m_isMusicOn) {
            cc.audioEngine.resume(this._bgmid);
        }
    },

    setMusicVolume: function setMusicVolume(value) {
        this._musicVolume = value;
        this.m_isMusicOn = this._musicVolume > 0;
        this._saveMusicValue();

        if (this._bgmid != -1) {
            cc.audioEngine.setVolume(this._bgmid, this._musicVolume);
        }
    },

    getMusicVolume: function getMusicVolume() {
        return this._musicVolume;
    },

    _saveMusicValue: function _saveMusicValue() {
        cc.sys.localStorage.setItem("MUSIC_VOLUME", this._musicVolume);
        this.saveMusicON();
    },

    /**this
     *
     * @param path
     * @param loadOnjs  是否挂在 脚本上的资源
     */
    playEffect: function playEffect(path, loadOnjs) {
        if (GameSystem.getInstance().VolumeState == 0) {
            if (this.m_isAudioOn) {
                if (loadOnjs) {
                    cc.audioEngine.play(path, false, this._audioVolume);
                } else {
                    var clip = cc.url.raw(path);
                    cc.audioEngine.play(clip, false, this._audioVolume);
                }
            }
        }
    },

    setEffectsVolume: function setEffectsVolume(value) {
        this._audioVolume = value;
        this.m_isAudioOn = this._audioVolume > 0;
        this._saveEffectValue();
    },

    getEffectVolume: function getEffectVolume() {
        return this._audioVolume;
    },

    _saveEffectValue: function _saveEffectValue() {

        cc.sys.localStorage.setItem("AUDIO_VOLUME", this._audioVolume);
        this.saveAudioON();
    },

    playShake: function playShake() {
        cc.log("震动还未实现！");
    },

    isShakeOn: function isShakeOn() {
        return this._isShake;
    },

    isShakeOpen: function isShakeOpen() {
        return this._isShake;
    },
    setShakeOn: function setShakeOn(bEnable) {
        this._isShake = bEnable;
        cc.sys.localStorage.setItem("SHAKE_OPEN", this._audioVolume);
    },

    preload: function preload(path) {
        cc.audioEngine.preload(path, function () {});
    },

    saveMusicON: function saveMusicON() {
        cc.sys.localStorage.setItem("m_isMusicOn", this.m_isMusicOn);
    },
    saveAudioON: function saveAudioON() {
        cc.sys.localStorage.setItem("m_isAudioOn", this.m_isAudioOn);
    }

};

module.exports = MusicMgr;

cc._RFpop();
},{"GameSystem":"GameSystem"}],"NetMsg":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b241aOZTHFCHLdmnx6h94O1', 'NetMsg');
// Script\ComScene\PopView\NetMsg.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        lableMsg: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.GameInfoListenerID = -1;
        this.socketMessageListenerID = -1;
        this.node.opacity = 0;
        this.tipsCount = 0;

        this.isNetConnecting = true;

        this.baseTips = "";

        this.onNetCheckListener();
        this.addSocketListener();
    },

    onDestroy: function onDestroy() {
        GlobalEventManager.getInstance().removeListener(this.GameInfoListenerID);
        GlobalEventManager.getInstance().removeListener(this.socketMessageListenerID);
    },

    onNetCheckListener: function onNetCheckListener() {
        var self = this;
        this.GameInfoListenerID = GlobalEventManager.getInstance().addEventListener(window.GameEngineInfo, function (event) {
            if (event) {
                var tag = event.tag;
                if (tag == window.GameInfo.NetOnline) {
                    self.isNetConnecting = true;
                    self.node.opacity = 0;
                    self.unschedule(self.updateTipShow);
                } else if (tag == window.GameInfo.NetOffline) {
                    self.isNetConnecting = false;
                    self.node.opacity = 255;
                    self.tipsCount = 0;

                    self.baseTips = "网络异常，正在重连中";
                    self.lableMsg.string = self.baseTips;
                    self.schedule(self.updateTipShow, 0.3);
                }
            }
        }, this);
    },

    //socket消息
    addSocketListener: function addSocketListener() {
        var self = this;
        this.socketMessageListenerID = GlobalEventManager.getInstance().addEventListener(window.SocketMessage, function (event) {

            if (event == undefined) {
                return;
            }
            var type = event.tag;
            //连接服务器成功
            if (type == window.MessageType.SOCKET_CONNECTED) {
                self.onSocketConnected();
            }
            //断开连接
            else if (type == window.MessageType.SOCKET_DISCONNECTED) {
                    self.onSocketDisconnected();
                }
                //连接中
                else if (type == window.MessageType.SOCKET_CONNECTING) {}
                    //连接失败
                    else if (type == window.MessageType.MSG_NETWORK_FAILURE) {}
                        //收到消息
                        else if (type == window.MessageType.SOCKET_MESSAGE) {}
        }, this);
    },

    onSocketConnected: function onSocketConnected() {
        var self = this;
        self.node.opacity = 0;
        self.unschedule(self.updateTipShow);
    },

    onSocketDisconnected: function onSocketDisconnected() {

        var self = this;
        self.unschedule(self.updateTipShow);
        if (self.isNetConnecting) {
            self.node.opacity = 255;
            self.tipsCount = 0;

            self.baseTips = "服务器连接失败，努力重连中";
            self.lableMsg.string = self.baseTips;

            self.schedule(self.updateTipShow, 0.3);
        }
    },

    updateTipShow: function updateTipShow(tips) {
        this.tipsCount++;
        var tips = this.baseTips;
        var index = this.tipsCount % 4;
        for (var i = 0; i < index; i++) {
            tips += "。";
        }
        this.lableMsg.string = tips;
    }

});

cc._RFpop();
},{}],"NoticeView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd91b3fop/BGi52uCIfVVvXB', 'NoticeView');
// Script\ComScene\PopView\NoticeView.js

"use strict";

var BasePop = require("BasePop");
var GameSystem = require('GameSystem');
var MusicMgr = require("MusicMgr");
var Audio_Common = require("Audio_Common");
var UtilTool = require('UtilTool');

cc.Class({
    extends: BasePop,

    properties: {
        Title: cc.Label,
        Doc: cc.Label,
        Writer: cc.Label,
        Time: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
    },

    callbackBtnClose: function callbackBtnClose() {
        cc.log('NoticeView : callbackBtnClose');
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        this.dismiss();
    },

    setContent: function setContent() {
        // GameSystem.getInstance().notice.title,
        // GameSystem.getInstance().notice.writer
        // GameSystem.getInstance().notice.time
        this.Title.string = GameSystem.getInstance().notice.title + ":";
        this.Doc.string = GameSystem.getInstance().notice.doc;
        this.Writer.string = GameSystem.getInstance().notice.writer;
        this.Time.string = UtilTool.getFormatData(GameSystem.getInstance().notice.time);
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"NotifyClubOwnerConfirmPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd0aabKFYc1JBYDxuG4s5W4C', 'NotifyClubOwnerConfirmPacket');
// Script\Network\Cmd\Cmd_Resp\NotifyClubOwnerConfirmPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/9.
 */
var MessageResp = require("MessageResp");
/*
* type CLUB_NOTIFY_OWNER_CONFIRM_T struct {
 ClubHead
 Param CLUB_MSG_JOIN_T `json:"param"`
 }
 type CLUB_MSG_JOIN_T struct {
 Uid     uint32 `json:"uid"`
 Name    string `json:"name"`
 HeadUrl string `json:"headurl"`
 Sex     int    `json:"sex"`
 }
* */
function NotifyClubOwnerConfirmPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.CLUB_NOTIFY_OWNER_CONFIRM_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.clubid = msg.clubid;
        this.param = msg.param;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = NotifyClubOwnerConfirmPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyDismissGame":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd0140YgebhJEpKefG14ChV2', 'NotifyDismissGame');
// Script\Network\Cmd\Cmd_Resp\NotifyDismissGame.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");

function NotifyDismissGame() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_NOTIFY_DISMISS_GAME_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = NotifyDismissGame;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyGameStartPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '882a4oMvFNO66mxqVOAGvBH', 'NotifyGameStartPacket');
// Script\Network\Cmd\Cmd_Resp\NotifyGameStartPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/5.
 */
/*
* type US_NOTIFY_GAME_SWITCH_T struct {
 JsonHead
 RespHead
 IsStart   int `json:"isstart"`
 ReadyTime int `json:"readytime"`
 }
* */

var MessageResp = require('MessageResp');

function NotifyGameStartPacket() {
    MessageResp.apply(this, []); //集成父类数据
    // {"cmd":6553618,"seq":0,"uid":10010,"code":0,"desc":"执行成功","isstart":1,"readytime":7}
    this.cmd = window.US_NOTIFY_GAME_SWITCH_CMD_ID;
    this.isStart = 0;
    this.readyTime = 0;
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.isStart = msg.isstart;
        this.readyTime = msg.readytime;
        this.tstatus = msg.tstatus;
        this.ustatus = msg.ustatus;
    };
}

module.exports = NotifyGameStartPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyInGameRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'eccc0ZLrYBPv5Qnai2Fl7vo', 'NotifyInGameRespPacket');
// Script\Network\Cmd\Cmd_Resp\NotifyInGameRespPacket.js

"use strict";

/**
 * Created by zhouxueshi on 2017/5/14.
 */

var MessageResp = require("MessageResp");

function NotifyInGameRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_NOTIFY_IN_GAME_CMD_ID;
    this.gamesvcid = 0;
    this.tableid = 0;
    this.gameid = 0;
    this.gamelevel = 0;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        this.gamesvcid = msg.gamesvcid;
        this.tableid = msg.tableid;
        this.gameid = msg.gameid;
        this.gamelevel = msg.gamelevel;
    };
}

module.exports = NotifyInGameRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyOwnerOverPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'dd823stCrZOOqrZUc2MxGgy', 'NotifyOwnerOverPacket');
// Script\Network\Cmd\Cmd_Resp\NotifyOwnerOverPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */

/*
* type MAIL_MSG_OWNER_OVER_TABLE_T struct {
 GameSvcId uint32 `json:"gamesvcid"`
 TableId   int32  `json:"tableid"`
 PrivateId int    `json:"privateid"`
 TableName string `jons:"tablename"`
 RemainTime int   `json:"remaintime"` //秒
 }

 //通知桌主，本桌游戏结束
 type US_NOTIFY_OWNER_OVER_TABLE_T struct {
 JsonHead
 Param MAIL_MSG_OWNER_OVER_TABLE_T `json:"param"`
 }
* */
var MessageResp = require("MessageResp");

function NotifyOwnerOverPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_NOTFIY_OWNER_TABLEINFO_CMD_ID;
    this.gamesvcid = 0;
    this.tableid = 0;
    this.privateid = 0;
    this.tablename = "";
    this.remaintime = 0;
    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.gamesvcid = msg.gamesvcid;
        this.tableid = msg.tableid;
        this.privateid = msg.privateid;
        this.tablename = msg.tablename;
        this.remaintime = msg.remaintime;
    };
}

module.exports = NotifyOwnerOverPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyOwnerSitPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '92920G9vD9JdqKgKLdI7MZT', 'NotifyOwnerSitPacket');
// Script\Network\Cmd\Cmd_Resp\NotifyOwnerSitPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/3.
 */
var MessageResp = require('MessageResp');

function NotifyOwnerSitPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_NOTIFY_OWNER_CONFIRM_SIT_CMD_ID;

    this.tablename = "";
    this.sitUid = 0;
    this.name = "";
    this.headurl = "";
    this.gamesvcid = 0;
    this.tableid = 0;
    this.privateid = 0;
    this.seatid = -1;
    this.coin = 0;
    this.param = "";

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.param = msg.param;
        // TableName  string `json:"tablename"`
        // SitUid     uint32 `json:"situid"`
        // Name       string `json:"name"`
        // HeadUrl    string `json:"headurl"`
        // GameSvcId  uint32 `json:"gamesvcid"`
        // TableId    int32  `json:"tableid"`
        // PrivateId  int    `json:"privateid"`
        // CreateTime int64  `json:"createtime"`
        // SeatId     int    `json:"seatid"`
        // Coin       int    `json:"coin"`
        // Time       int64  `json:"time"`
        cc.log("NotifyOwnerSitPacket param=" + msg.param);
        var json = msg.param;
        this.tablename = json.tablename;
        this.sitUid = json.situid;
        this.name = json.name;
        this.headurl = json.headurl;
        this.gamesvcid = json.gamesvcid;
        this.tableid = json.tableid;
        this.privateid = json.privateid;
        this.seatid = json.seatid;
        this.coin = json.coin;
    };
}

module.exports = NotifyOwnerSitPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"NotifyPayOperatePacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c340fdaa8JPq5kULRPqTwuu', 'NotifyPayOperatePacket');
// Script\Network\Cmd\Cmd_Resp\NotifyPayOperatePacket.js

"use strict";

/**
 * Created by shrimp on 17/4/30.
 */

/*
 //通知玩家充值成功
 type CS_NOTIFY_PAY_OPERATE_T struct {
 GameHead
 Param REQ_PAY_OPERATE_T `json:"param"`
 }
 type REQ_PAY_OPERATE_T struct {
 OpUid     uint32 `json:"opuid"`
 OpType    int    `json:"optype"` //操作类型
 OpGold    int    `json:"opgold"`
 OpDiamond int    `json:"opdiamond"`
 OrderNum  string `json:"ordernum"` //订单号
 OpTime    int64  `json:"optime"`
 }
* */
var MessageResp = require("MessageResp");

function NotifyPayOperatePacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_NOTIFY_PAY_OPERATE_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
    };
}

module.exports = NotifyPayOperatePacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"OwnerConfirmReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bc4b6istnRHZK1NJ0OIsCsy', 'OwnerConfirmReqPacket');
// Script\Network\Cmd\Cmd_Req\OwnerConfirmReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */

var MessageReq = require("MessageReq");
var GameSystem = require('GameSystem');
function OwnerConfirmReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_OWNER_CONFIRM_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: msg.gamesvcid,
            tableid: msg.tableid,
            playeruid: msg.playeruid,
            privateid: msg.privateid,
            result: msg.result };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = OwnerConfirmReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"OwnerConfirmRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1f1c2uz/wVJzrMUuNdAhMiW', 'OwnerConfirmRespPacket');
// Script\Network\Cmd\Cmd_Resp\OwnerConfirmRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");

function OwnerConfirmRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_OWNER_CONFIRM_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        // GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = OwnerConfirmRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"OwnerKickOutPlayerReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '632bfJq88BM3LwjjAw3tx8K', 'OwnerKickOutPlayerReqPacket');
// Script\Network\Cmd\Cmd_Req\OwnerKickOutPlayerReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageReq = require("MessageReq");

function OwnerKickOutPlayerReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_OWNER_KICKOUT_PLAYERCMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = OwnerKickOutPlayerReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"OwnerKickOutPlayerRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ed853dGLRJEXqH3LeAQ6aVK', 'OwnerKickOutPlayerRespPacket');
// Script\Network\Cmd\Cmd_Resp\OwnerKickOutPlayerRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");

function OwnerKickOutPlayerRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_OWNER_KICKOUT_PLAYERCMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = OwnerKickOutPlayerRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"PickerAddressView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c7846OdUvxD6J3OaAN/wN6f', 'PickerAddressView');
// Script\ComScene\PopView\PickerAddressView.js

'use strict';

var BasePop = require('BasePop');
cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{"BasePop":"BasePop"}],"Platform":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b472ezU8QpJfr8/EOiZTlMK', 'Platform');
// Script\Platform\Platform.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

window.Platform_Type = cc.Enum({
    E_PLATFORM_UNKONW: 0,
    E_PLATFORM_ANDROID: 1,
    E_PLATFORM_IPHONE: 2,
    E_PLATFORM_IPAD: 3,
    E_PLATFORM_MAC: 4,
    E_PLATFORM_WINDOWS: 5,
    E_PLATFORM_WEB: 6
});

var GameCallOC = require('GameCallOC');

function PlatformManager() {}

PlatformManager.prototype.getPlatformCode = function () {
    cc.log("PlatformManager.prototype.getPlatformType platform = " + cc.sys.platform);
    return parseInt(cc.sys.platform);
};

PlatformManager.prototype.getOsType = function () {
    cc.log("PlatformManager.prototype.getPlatformType os = " + cc.sys);
    return cc.sys.os;
};

PlatformManager.prototype.getPlatformType = function () {
    this.getOsType();
    var platformCode = this.getPlatformCode();
    var platform = window.Platform_Type.E_PLATFORM_UNKONW;
    switch (platformCode) {
        case cc.sys.WIN32:
        case cc.sys.WINRT:
            platform = window.Platform_Type.E_PLATFORM_WINDOWS;
            break;
        case cc.sys.MACOS:
            platform = window.Platform_Type.E_PLATFORM_MAC;
            break;
        case cc.sys.ANDROID:
            platform = window.Platform_Type.E_PLATFORM_ANDROID;
            break;
        case cc.sys.IPHONE:
            platform = window.Platform_Type.E_PLATFORM_IPHONE;
            break;
        case cc.sys.IPAD:
            platform = window.Platform_Type.E_PLATFORM_IPAD;
            break;
        case cc.sys.MOBILE_BROWSER:
        case cc.sys.DESKTOP_BROWSER:
            platform = window.Platform_Type.E_PLATFORM_WEB;
            break;
        default:
            platform = window.Platform_Type.E_PLATFORM_UNKONW;
            break;
    }
    cc.log("platform = " + platform);
    return platform;
};

PlatformManager.prototype.getLanguage = function () {
    cc.log("PlatformManager.getLanguage, language = " + cc.sys.language);

    return cc.sys.language;
};

PlatformManager.prototype.getPackageName = function () {
    cc.log("PlatformManager.getPackageName");
    var packageName = "";
    var ojb = jsb.reflection.callStaticMethod("JSCallBackOC", "getPackageName");
    return packageName;
};

PlatformManager.prototype.getAppVersion = function () {
    var version = 1;

    cc.log("PlatformManager.getAppVersion,version = " + version);
    return version;
};

PlatformManager.prototype.getBattery = function () {

    //cc.log("PlatformManager.getBattery,data = " + JSON.stringify(navigator));

    var batteryLevel = 0;

    navigator.getBattery().then(function (battery) {

        batteryLevel = battery.level;
        function updateLevelInfo() {
            console.log("Battery level: " + battery.level * 100 + "%");
            batteryLevel = battery.level;
        }
        updateLevelInfo();

        battery.addEventListener('levelchange', function () {
            updateLevelInfo();
        });
    });

    cc.log("PlatformManager.getBattery, level = " + batteryLevel);

    return;
};

PlatformManager.prototype.getSignalStrength = function () {
    cc.log("PlatformManager.getSignalStrength");
};

PlatformManager.prototype.generateUUID = function () {

    if (this.getPlatformType() == Platform_Type.E_PLATFORM_WEB || this.getPlatformType() == Platform_Type.E_PLATFORM_ANDROID) {
        //web平台上获取设备id的方法，暂时没有更好的，这个方案下的碰撞率不及1/2^^122,保存在本地数据 易被删除
        var uuid = cc.sys.localStorage.getItem('uuid');
        cc.log("PlatformManager.generateUUID111,uuid = " + uuid);
        if (uuid == 0 || uuid == null || uuid == undefined) {
            var d = new Date().getTime();
            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = (d + Math.random() * 16) % 16 | 0;
                d = Math.floor(d / 16);
                return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);
            });
            cc.sys.localStorage.setItem("uuid", uuid);
        }
    } else if (this.getPlatformType() == Platform_Type.E_PLATFORM_IPHONE || this.getPlatformType() == Platform_Type.E_PLATFORM_IPAD || this.getPlatformType() == Platform_Type.E_PLATFORM_MAC) {
        return GameCallOC.getInstance().getUUID();
    }
    cc.log("PlatformManager.generateUUID,uuid = " + uuid);
    return uuid;
};

var Platform = function () {
    var instance;

    function getInstance() {
        if (instance === undefined) {
            instance = new PlatformManager();
        }
        return instance;
    };

    return {
        getInstance: getInstance
    };
}();

module.exports = Platform;

cc._RFpop();
},{"GameCallOC":"GameCallOC"}],"PlayScore":[function(require,module,exports){
"use strict";
cc._RFpush(module, '058a6cH1rROtYw40krkuPqA', 'PlayScore');
// Script\ComScene\PopView\PlayScore.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        UserName: cc.Label,
        Uid: cc.Label,
        CarryCoin: cc.Label,
        ZhanGuo: cc.Label,
        WinScore: cc.Label,
        Head: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {},

    //"uid":11279,"name":"游客11279","headurl":" ","carrycoin":4000,"wincoin":-954
    setScoreInfo: function setScoreInfo(msg) {
        UpdateWXHeadIcon(msg.headurl, this.Head);

        this.Uid.string = msg.uid;
        this.UserName.string = msg.name;
        this.CarryCoin.string = "带入" + msg.carrycoin;

        var coin = msg.carrycoin + msg.wincoin;
        this.ZhanGuo.string = "战果" + coin;

        if (msg.wincoin > 0) {
            this.WinScore.string = "+" + msg.wincoin;
        } else if (msg.wincoin == 0) {
            this.WinScore.string = msg.wincoin;
            this.WinScore.node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.WinScore.string = msg.wincoin;
            this.WinScore.node.color = cc.Color.GREEN;
        }
    }

});

cc._RFpop();
},{}],"Player":[function(require,module,exports){
"use strict";
cc._RFpush(module, '32125vaHUxGBLMX0QExihnG', 'Player');
// Script\Moudle\Player.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */

function Player() {
    this.uid = 0;
    this.name = "";
    this.headurl = "";
    this.sex = 0;
    this.gold = 0; //身上金币
    this.diamond = 0; //身上钻石
    this.coin = 0; //携带金币
    this.seatid = -1; //没有坐下
    this.status = 0;
    this.bowner = 0;
    this.winGold = 0;
    this.TotalCarry = 0;
    this.TotalRound = 0;
    this.TotalTable = 0;
    this.fileId = "";
    this.calltype = 0; //叫庄类型
    this.bBanker = 0; //是否是庄家
    this.betcoinmul = 0; //下注倍数
    this.bOpenCard = 0; //是否看牌
    this.bulltype = 0;
    this.cards = [];
    this.finalcoin = 0;
    this.roomcard = 0; // 房卡数量
}

Player.setSeatId = function (seatid) {
    cc.log("Palyer.setSeadId,seatid = " + seatid);
    this.seatid = seatid;
};

module.exports = Player;

cc._RFpop();
},{}],"Poker":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8a43dBxds1J0r5WKqON/ki6', 'Poker');
// Script\Comm\PokerCard\Poker.js

'use strict';

var CARD_UP_POS = 20;
var CARD_COLOR_MARK = 0xf0;
var CARD_VALUE_MARK = 0x0f;

var cardEnum = [0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, //♠️
0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17, 0x18, 0x19, 0x1a, 0x1b, 0x1c, 0x1d, //♥️
0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d, //️♣️
0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b, 0x3c, 0x3d]; //大小王

cc.Class({
    extends: cc.Component,

    properties: {
        cardData: 0,
        cardColor: 0,
        cardValue: 0,
        cardSelected: 0,
        CardBgImg: cc.Sprite,
        ValueImg: cc.Sprite,
        ColorImg: cc.Sprite,
        SmallColorImg: cc.Sprite,
        GrayLayer: cc.Sprite,
        CardGroundImg: cc.Sprite,

        ValueBlackFrame: [cc.SpriteFrame],
        ValueRedFrame: [cc.SpriteFrame],
        ColorFrame: [cc.SpriteFrame],
        SmallFrame: [cc.SpriteFrame],
        CardGround: cc.SpriteFrame,
        CardBg: cc.SpriteFrame
    },

    // use this for initialization
    onLoad: function onLoad() {},

    initCard: function initCard(cardData) {
        cc.log('Poker : initCard,cardData = ' + cardData);
        this.cardData = cardData;
        this.cardColor = this.getCardColorFromData(cardData);
        this.cardValue = this.getCardValueFromData(cardData);
        this.CardGroundImg.node.active = false;
        cc.log("Poker : initCard,cardValue = " + this.cardValue);
        if (cardData == 0) {
            //牌背
            for (var index = 0; index < this.CardBgImg.node.childrenCount; index++) {
                this.CardBgImg.node.children[index].active = false;
            }
            this.CardBgImg.spriteFrame = this.CardGround;
        } else {
            this.CardBgImg.node.active = true;
            this.ColorImg.node.active = true;
            this.ValueImg.node.active = true;
            this.SmallColorImg.node.active = true;
            this.GrayLayer.node.active = false;
            this.CardBgImg.spriteFrame = this.CardBg;
            //牌面
            if (this.cardColor == 0 || this.cardColor == 2) {
                this.ColorImg.spriteFrame = this.ColorFrame[this.cardColor];
                this.SmallColorImg.spriteFrame = this.SmallFrame[this.cardColor];
                this.ValueImg.spriteFrame = this.ValueBlackFrame[this.cardValue - 1];
            } else if (this.cardColor == 1 || this.cardColor == 3) {
                this.ColorImg.spriteFrame = this.ColorFrame[this.cardColor];
                this.SmallColorImg.spriteFrame = this.SmallFrame[this.cardColor];
                this.ValueImg.spriteFrame = this.ValueRedFrame[this.cardValue - 1];
            } else if (this.cardColor === 4) {
                //大小王
                cc.error('Poker : initCard,cardColor error');
            } else {
                cc.error('Poker : initCard,cardColor error');
            }
        }

        cc.log("Poker : initCard,CardGroundImg.active = " + this.CardGroundImg.node.active);
    },

    getValueStringFromData: function getValueStringFromData() {},

    getCardColorFromData: function getCardColorFromData(CardDate) {
        return (CardDate & CARD_COLOR_MARK) >> 4;
    },

    getCardValueFromData: function getCardValueFromData(CardDate) {
        return CardDate & CARD_VALUE_MARK;
    },

    runCardSelect: function runCardSelect(Select) {
        cc.log('Poker : runCardSelect,bSelect = ', Select);

        this.cardSelected = Select;
        if (this.cardSelected == 1) {
            this.node.position = cc.p(this.node.getPosition().x, CARD_UP_POS);
        } else {
            this.node.position = cc.p(this.node.getPosition().x, 0);
        }
    },

    setCardSelecting: function setCardSelecting(bSelect) {
        cc.log('Poker.setCardSelecting,bSelect = ' + bSelect);
        this.cardSelected = bSelect;
        if (bSelect == 1) {
            this.GrayLayer.node.opacity = 180;
        } else {
            this.GrayLayer.node.opacity = 0;
        }
    },

    setBtnCard: function setBtnCard() {
        this.cardSelected = this.cardSelected == 0 ? 1 : 0;
        this.runCardSelect(this.cardSelected);
    }

});

cc._RFpop();
},{}],"ProduceCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f0943bDNCVErrhkTrpk/kl7', 'ProduceCell');
// Script\ComScene\PopView\ProduceCell.js

'use strict';

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameCallOC = require('GameCallOC');
var GamePlayer = require('GamePlayer');
var MessageFactory = require('MessageFactory');
var AlertView = require('AlertView');
var HttpManager = require('HttpManager');
var WeChatApi = require('WeChatApi');
var GameSystem = require('GameSystem');
cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...

        ProduceImg: cc.Sprite,
        ProduceName: cc.Label,
        ProducePrice: cc.Label,
        ProduceDesc: cc.Label,
        MoneyLabel: cc.Label,
        ProducePriceImg: cc.Sprite,
        ProduceGoldFrame: [cc.SpriteFrame],
        ProduceDiamondFrame: [cc.SpriteFrame],
        PropFrame: [cc.SpriteFrame],
        Diamond: cc.Sprite,
        ReferralCodeView: cc.Prefab,
        ActivityFlag: cc.Sprite,
        ActivityFlagFrame: [cc.SpriteFrame]

    },

    // use this for initialization
    onLoad: function onLoad() {
        //this.initData();
    },

    initData: function initData() {
        this.ProduceType = 0; //0 gold 1 diamond
        this.Price = 0;
        this.Name = "";
        this.id = 0;
        this.msg = null;
    },

    setProduceData: function setProduceData(type, msg) {
        this.msg = msg;
        this.ProduceType = type;
        this.setProduceName(msg.name);
        this.setProducePrice(msg.cost);
        this.setProduceTypeAndImg(type, msg.type);
        this.ProduceDesc.string = msg.desc;
        this.MoneyLabel.node.active = false;
    },

    setProduceDataDiamond: function setProduceDataDiamond(type, msg) {
        this.msg = msg;
        this.ProduceType = type;
        this.setProduceName(msg.name);
        this.MoneyLabel.node.active = true;
        this.MoneyLabel.string = "售价：¥" + msg.cost;
        this.Price = msg.cost;
        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT && GameCallOC.getInstance().checkIsAble()) {
            this.ProduceDesc.node.active = false;
        } else {
            this.ProduceDesc.node.active = true;
            this.ProduceDesc.string = msg.desc;
        }

        this.ProducePrice.node.active = false;
        this.Diamond.node.active = false;
        this.setProduceTypeAndImg(type, msg.type);
        this.id = msg.id;
    },

    setProduceName: function setProduceName(name) {
        this.Name = name;
        this.ProduceName.string = name;
    },

    setProducePrice: function setProducePrice(price) {
        this.Price = price;
        this.ProducePrice.string = price;
    },

    setProduceTypeAndImg: function setProduceTypeAndImg(type, index) {

        if (type == 0) {
            this.ProduceImg.spriteFrame = this.PropFrame[index - 1];
        } else {
            this.ProduceImg.spriteFrame = this.ProduceDiamondFrame[index - 1];
        }

        var activity = 0;
        if (type == 1 && (index == 4 || index == 5)) activity = 1;
        this.setActivityFlag(type, activity);
    },

    setActivityFlag: function setActivityFlag(type, activity) {
        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT && GameCallOC.getInstance().checkIsAble()) {
            this.ActivityFlag.node.active = false;
            return;
        }

        if (activity > 0) {
            this.ActivityFlag.node.active = true;
        } else {
            this.ActivityFlag.node.active = false;
        }
    },

    createReferralCodeView: function createReferralCodeView() {
        var winSize = cc.director.getWinSize();
        var referralCodeView = cc.instantiate(this.ReferralCodeView);
        cc.director.getScene().addChild(referralCodeView);
        referralCodeView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
    },

    callBtnBuy: function callBtnBuy() {
        cc.log("ProductCell.callBtnBuy");
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (this.ProduceType == 1) {
            if (GameSystem.getInstance().productid == 2) {
                var self = this;
                var alert = AlertView.create();
                alert.setPositiveButton(function () {}, "确定");

                var str = "请联系微信客服：[" + GameSystem.getInstance().weixincs + "]充值";
                alert.show(str, AlertViewBtnType.E_BTN_CLOSE);
            } else {
                if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT && GameCallOC.getInstance().checkIsAble()) {
                    GameCallOC.getInstance().payAppstore(this.msg.id, GamePlayer.getInstance().uid);
                } else {
                    if (GameSystem.getInstance().referralCode == 0) {

                        var self = this;
                        var alert = AlertView.create();
                        alert.setPositiveButton(function () {
                            self.createReferralCodeView();
                        }, "绑定");

                        var str = "首次购买钻石请绑定推广人";
                        alert.show(str, AlertViewBtnType.E_BTN_CLOSE);
                        return;
                    } else {
                        WeChatApi.getInstance().weChatPay(this.msg.id, GamePlayer.getInstance().uid);
                    }
                }
            }
        } else {
            var self = this;
            var alert = AlertView.create();
            alert.setPositiveButton(function () {
                var data = {
                    type: self.msg.type
                };
                MessageFactory.createMessageReq(US_REQ_EXCHANGE_GOLD_CMD_ID).send(data);
            }, "兑换");
            alert.setNegativeButton(function () {}, "取消");

            var str = "您是否确定消耗" + this.msg.cost + "个钻石兑换" + this.msg.name + "(" + this.msg.desc + ")";
            alert.show(str, AlertViewBtnType.E_BTN_CANCLE);
        }
    }

});

cc._RFpop();
},{"AlertView":"AlertView","Audio_Common":"Audio_Common","GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","GameSystem":"GameSystem","HttpManager":"HttpManager","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","WeChatApi":"WeChatApi"}],"ProgressSlider":[function(require,module,exports){
"use strict";
cc._RFpush(module, '504c9tlYPRHLoYfTJJ2lAd8', 'ProgressSlider');
// Script\Comm\ProgressSlider.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        Slider: cc.Slider,
        Bar: cc.ProgressBar,
        Label: cc.Label,
        MaxLabel: cc.Label,
        MinLabel: cc.Label,
        iMax: 0,
        iMin: 0
    },

    // use this for initialization
    onLoad: function onLoad() {},

    getNumFromCurNum: function getNumFromCurNum(num) {
        var targetNum = num;
        var num1 = num % 100;
        if (num1 >= 50) {
            targetNum = num + (100 - num1);
        } else {
            targetNum = num - num1;
        }

        if (targetNum > this.iMax) {
            targetNum = this.iMax;
        } else if (targetNum < this.iMin) {
            targetNum = this.iMin;
        }

        var progress = (targetNum - this.iMin) / (this.iMax - this.iMin);
        this.Bar.progress = progress;
        this.Slider.progress = progress;

        return targetNum;
    },

    setMinAndMax: function setMinAndMax(min, max) {
        this.iMax = max;
        this.iMin = min;
        this.MaxLabel.string = this.iMax;
        this.MinLabel.string = this.iMin;
        this.Bar.progress = this.Slider.progress;
        var num = parseInt(this.iMin + (this.iMax - this.iMin) * this.Slider.progress);
        this.CurCarryNum = this.getNumFromCurNum(num);
        this.Label.string = this.CurCarryNum;
    },

    callBackSlider: function callBackSlider(slider, customEventData) {
        this.Bar.progress = this.Slider.progress;
        var num = parseInt(this.iMin + (this.iMax - this.iMin) * this.Slider.progress);
        this.CurCarryNum = this.getNumFromCurNum(num);
        this.Label.string = this.CurCarryNum;
        this.Label.string = this.CurCarryNum;
    }
});

cc._RFpop();
},{}],"ReferralCodeView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'da950uqPANGxog4PDcUaP0y', 'ReferralCodeView');
// Script\ComScene\PopView\ReferralCodeView.js

'use strict';

var BasePop = require('BasePop');
var ToastView = require('ToastView');
var LoadingView = require('LoadingView');
var MessageFactory = require('MessageFactory');
var GameSystem = require('GameSystem');

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        ReferralCode: cc.EditBox
    },

    // use this for initialization
    onLoad: function onLoad() {},

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        var BtnName = event.target.getName();
        cc.log("ReferralCodeView.callBackBtn,BtnName = " + BtnName);
        if (BtnName == "BtnClose") {
            this.dismiss();
        } else if (BtnName == "BtnSure") {
            cc.log('ReferralCodeView.callBackBtn,ReferralCode = ' + this.ReferralCode.string);
            if (this.ReferralCode.string == "") {
                ToastView.show('推荐码不能为空！');
                return;
            }

            var data = {
                referralid: Number(this.ReferralCode.string)
            };

            MessageFactory.createMessageReq(US_REQ_BIND_REFERRAL_CMD_ID).send(data);

            this.dismiss();
        }
    }
});

cc._RFpop();
},{"BasePop":"BasePop","GameSystem":"GameSystem","LoadingView":"LoadingView","MessageFactory":"MessageFactory","ToastView":"ToastView"}],"RollMsg":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2e8561JDMdNrK6WrDK6DwBL', 'RollMsg');
// Script\ComScene\PopView\RollMsg.js

"use strict";

/**
 *
 *
 * 滚动消息  拖入场景 后 自己管理自己
 *
 *
 * 当前版本1.3.2 richtext 有bug  等待官方解决
 */

var BasePop = require('BasePop');

//var ServerSpeakPacket = require('ServerSpeakPacket');
function RollMsgT() {
    this.strMsg = "";
    this.iType = 0;
}

cc.Class({
    extends: BasePop,

    properties: {
        speaker: cc.Sprite,
        speakerTxtHtml: cc.RichText,
        speakerHolder: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        this.queueSpeakerMsg = new Array();
        this.isShowRollFinish = true;

        this.speaker.node.active = false;

        this.baseX = this.speakerTxtHtml.node.x;

        this.remaindWidth = 960 + this.speakerTxtHtml.node.x;
    },

    onDestroy: function onDestroy() {
        GlobalEventManager.getInstance().removeListener(this.socketMessageListenerID);
    },

    onSceneMsg: function onSceneMsg(event) {
        var msg = event.data;
        if (msg.popView == "HallScene") {
            if (msg.btn == "RollMsg") {
                var ledInfo = msg.data;

                this.addSpeakerMsg(ledInfo.text, 0);
            }
        }
    },

    onMessage: function onMessage(event) {
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case window.SERVER_SPEAK_NEW_CMD:

                this.addSpeakerMsg(msg.trumpetMsg, msg.trumpetType);
                break;

        }
    },

    addSpeakerMsg: function addSpeakerMsg(content, contenttype) {
        if (content === undefined || content == "") {
            return;
        }
        // <color = 0xFFFFFFFF> 洪福齐天,玩家</color><color = 0x00b8c8FF>元大炮</color><color = 0xFFFFFFFF>在炸金花1元场赢取</color><color = 0x00d236FF>5000金币</color><color = 0xFFFFFFFF>,富甲一方</color>


        var ss = String(content);
        var re = /0x/g;
        var newContent = ss.replace(re, "#");
        var re2 = /FF>/g;
        newContent = newContent.replace(re2, ">");

        var msg = new RollMsgT();
        msg.iType = contenttype;
        msg.strMsg = newContent;

        this.queueSpeakerMsg.push(msg);
    },

    showSpeaker: function showSpeaker(content, contenttype) {
        if (content == "") {
            return;
        }
        this.speakerTxtHtml.node.active = true;
        this.speakerTxtHtml.node.x = this.baseX;
        this.speakerTxtHtml.node.y = this.speakerHolder.height * 2;
        this.speakerTxtHtml.string = content;

        var size = cc.size(this.speakerHolder.width, this.speakerHolder.height);

        var moveTo = cc.moveTo(1.0, cc.p(this.speakerTxtHtml.node.x, 0));
        var delay = cc.delayTime(2.0);
        var actionCallBack = cc.callFunc(this.moveDownCallback, this);
        var actionall = cc.sequence(moveTo, delay, actionCallBack);
        this.speakerTxtHtml.node.runAction(actionall);
    },

    moveDownCallback: function moveDownCallback() {
        var winSize = cc.director.getWinSize();
        var contentSize = cc.size(this.speakerTxtHtml._linesWidth[0], this.speakerTxtHtml.node.height);

        var moveX = 0;
        if (this.remaindWidth < contentSize.width - winSize.width || this.speakerHolder.width < contentSize.width) {
            moveX = contentSize.width + this.remaindWidth;
        }

        if (moveX <= 0) {
            this.moveLeftCallback();
        } else {
            var moveBy = cc.moveBy(moveX / 300, cc.p(moveX > 0 ? -moveX : 0, 0));
            var delay = cc.delayTime(0.8);
            var actionCallBack = cc.callFunc(this.moveLeftCallback, this);
            var actionall = cc.sequence(moveBy, delay, actionCallBack);
            this.speakerTxtHtml.node.runAction(actionall);
        }
    },
    moveLeftCallback: function moveLeftCallback() {
        this.isShowRollFinish = true;
        if (this.speakerTxtHtml) {
            // speakerTxtHtml.removeFromParentAndCleanup(true);
            this.speakerTxtHtml.node.active = false;
        }

        if (this.queueSpeakerMsg.length == 0 && this.speaker && this.speaker.node.activeInHierarchy) ;
        {
            this.speaker.node.active = false;
        }
    },

    update: function update(dt) {
        var self = this;
        if (self.queueSpeakerMsg.length > 0 && self.isShowRollFinish) {
            if (self.speaker && !self.speaker.node.active) {
                self.speaker.node.active = true;
            }

            this.isShowRollFinish = false;
            var msg = self.queueSpeakerMsg.pop();
            self.showSpeaker(msg.strMsg, msg.iType);
        }
    }

});

cc._RFpop();
},{"BasePop":"BasePop"}],"RoomInfoView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1f118BQOFlNVrXBx+ux8lw0', 'RoomInfoView');
// Script\ComScene\PopView\RoomInfoView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require('GameSystem');
var UtilTool = require('UtilTool');

cc.Class({
    extends: BasePop,

    properties: {
        RoomName: {
            default: null,
            type: cc.Label
        },
        GameName: {
            default: null,
            type: cc.Label
        },
        GameType: {
            default: null,
            type: cc.Label
        },
        MinAnte: {
            default: null,
            type: cc.Label
        },
        LiveTime: {
            default: null,
            type: cc.Label
        },
        MaxSeat: {
            default: null,
            type: cc.Label
        },

        SelfWinCoin: {
            default: null,
            type: cc.Label
        },
        SelfCarryCoin: {
            default: null,
            type: cc.Label
        },
        SelfPlayNum: {
            default: null,
            type: cc.Label
        },
        SelfWinNum: {
            default: null,
            type: cc.Label
        },
        SelfLoseNum: {
            default: null,
            type: cc.Label
        },
        SelfSuperNum: {
            default: null,
            type: cc.Label
        },
        SelfNormalNum: {
            default: null,
            type: cc.Label
        },
        SelfNotcallNum: {
            default: null,
            type: cc.Label
        },
        SelfBankerNum: {
            default: null,
            type: cc.Label
        },
        SelfGiftNum: {
            default: null,
            type: cc.Label
        },
        SelfUseGold: {
            default: null,
            type: cc.Label
        },
        SelfUseDiamond: {
            default: null,
            type: cc.Label
        },

        scrollView: cc.ScrollView,
        PlayScorePrefab: cc.Prefab,
        BtnShare: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        if (GameSystem.getInstance().VerStatus == GameSystem.getInstance().VerStatusType.VERSION_TYPE_AUDIT) {
            this.BtnShare.node.active = false;
        }
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("RoomInfoView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_SCORE_DETAIL_CMD_ID:
                this.onScoreDetailbMsg(msg);
                break;
        }
    },

    //{"cmd":131214,"seq":2,"uid":11279,"code":0,"desc":"执行成功",
    // "param":{
    //  "table":{"tablename":"游客11279","gameid":101,"minante":1,"gametype":1,"livetime":1800,"maxseat":2},
    //  "myself":{"carrycoin":4000,"wincoin":-954,"winnum":6,"losenum":10,"playnum":16,"supernum":10,
    //   "normalnum":3,"notcallnum":3,"bankernum":11,"chatnum":0,"giftnum":0,"usegold":0,"usediamond":100},
    // "list":[{"uid":11279,"name":"游客11279","headurl":" ","carrycoin":4000,"wincoin":-954},
    //         {"uid":11300,"name":"游客11300","headurl":"","carrycoin":1000,"wincoin":954}]}}
    onScoreDetailbMsg: function onScoreDetailbMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.RoomName.string = msg.table.tablename;
            this.GameName.string = GetGameName(msg.table.gameid);
            this.GameType.string = GetGameType(msg.table.gametype);
            this.MinAnte.string = msg.table.minante;
            this.LiveTime.string = UtilTool.getHourTime(msg.table.livetime);
            this.MaxSeat.string = msg.table.maxseat + "人";

            this.SelfWinCoin.string = msg.myself.wincoin;
            this.SelfCarryCoin.string = msg.myself.carrycoin;
            this.SelfPlayNum.string = msg.myself.playnum;
            this.SelfWinNum.string = msg.myself.winnum;
            this.SelfLoseNum.string = msg.myself.losenum;
            this.SelfSuperNum.string = msg.myself.supernum;
            this.SelfNormalNum.string = msg.myself.normalnum;
            this.SelfNotcallNum.string = msg.myself.notcallnum;
            this.SelfBankerNum.string = msg.myself.bankernum;
            this.SelfGiftNum.string = msg.myself.giftnum;
            this.SelfUseGold.string = msg.myself.usegold;
            this.SelfUseDiamond.string = msg.myself.usediamond;

            cc.log("this.scrollView.content.height =", this.scrollView.content.height);

            var height = 0;
            var defaultPos = 1320;
            for (var index = 0; msg.list != null && index < msg.list.length; index++) {
                var playScore = cc.instantiate(this.PlayScorePrefab);
                this.scrollView.content.addChild(playScore);
                height = playScore.getContentSize().height;
                playScore.setPosition(cc.p(0, -defaultPos - playScore.getContentSize().height * index));
                playScore.getComponent("PlayScore").setScoreInfo(msg.list[index]);
            }
            cc.log("height * (msg.list.length) =" + height * msg.list.length);

            if (height * msg.list.length + defaultPos > this.scrollView.content.height) {
                this.scrollView.content.height = height * msg.list.length + defaultPos;
            }
            cc.log("this.scrollView.content.height =", this.scrollView.content.height);
        }
    },

    sendGetSuccessDetail: function sendGetSuccessDetail(msg) {
        var data = {
            privateid: msg.privateid,
            createtime: msg.createtime
        };
        MessageFactory.createMessageReq(US_REQ_SCORE_DETAIL_CMD_ID).send(data);
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        var BtnName = event.target.getName();
        if (BtnName == "BtnBack") {
            this.dismiss();
        } else if (BtnName == "BtnShare") {
            var message = {
                popView: "RoomInfoView",
                btn: "BtnShare"
            };
            GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"RuleView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '429f0FNv/lNsI9YR2n9QoQk', 'RuleView');
// Script\ComScene\PopView\RuleView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            cc.log("stop event");
            event.stopPropagation();
        }.bind(this));

        this.scaleTo(this.bg);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callbackBtnClose: function callbackBtnClose() {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        cc.log("RuleView : callbackBtnClose");
        this.dismiss();
    },

    checkEventsRule: function checkEventsRule(event, customEventData) {
        cc.log('RuleView : checkEventsRule,event = ' + event + ',customEventData =' + customEventData);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"ScoreDetailReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f460bPPoUdDwZ2HD0LC71Hr', 'ScoreDetailReqPacket');
// Script\Network\Cmd\Cmd_Req\ScoreDetailReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
var MessageReq = require("MessageReq");
/*
* type US_REQ_SCORE_DETAIL_T struct {
 JsonHead
 Param PARAM_REQ_SCORE_DETAIL_T `json:"param"`
 }
 type PARAM_REQ_SCORE_DETAIL_T struct {
 PrivateId  int   `json:"privateid"`
 CreateTime int64 `json:"createtime"`
 }
* */
function ScoreDetailReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SCORE_DETAIL_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ScoreDetailReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"ScoreDetailRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd9d3eqvEr9GRYMx5gT7w5AO', 'ScoreDetailRespPacket');
// Script\Network\Cmd\Cmd_Resp\ScoreDetailRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
/**
 type US_RESP_SCORE_DETAIL_T struct {
     JsonHead
     RespHead
     Param PARAM_RESP_SCORE_DETAIL_T `json:"param"`
 }

 type PARAM_RESP_SCORE_DETAIL_T struct {
     Table  PARAM_TABLE_DETAIL_T `json:"table"`
     MySelf PARAM_MYSELF_SCORE_T `json:"myself"`
    List   []TABLE_USER_SCORE_T `json:"list"`
 }

 type PARAM_TABLE_DETAIL_T struct {
     TableName string `json:"tablename"` //牌局名称
     GameId    int    `json:"gameid"`    //选择玩法(游戏id)
     MinAnte   int    `json:"minante"`   //最小下注(1)
     GameType  int    `json:"gametype"`  //抢庄模式
     LiveTime  int64  `json:"livetime"`  //桌子时间
     MaxSeat   int    `json:"maxseat"`   //本桌人数
 }

 type PARAM_MYSELF_SCORE_T struct {
     CarryCoin  int `json:"carrycoin"`  //带入金币
     WinCoin    int `json:"wincoin"`    //输赢(最终战绩)
     WinNum     int `json:"winnum"`     //赢牌次数
     LoseNum    int `json:"losenum"`    //失败次数
     PlayNum    int `json:"playnum"`    //玩牌次数
     SuperNum   int `json:"supernum"`   //超级抢庄次数
     NormalNum  int `json:"normalnum"`  //普通抢庄次数
     NotCallNum int `json:"notcallnum"` //未叫庄次数
     BankerNum  int `json:"bankernum"`  //坐庄次数
     ChatNum    int `json:"chatnum"`    //聊天次数
     GiftNum    int `json:"giftnum"`    //发送礼物次数
     UseGold    int `json:"usegold"`    //发送礼物消耗金币
     UseDiamond int `json:"usediamond"` //抢庄消耗钻石
 }

 type TABLE_USER_SCORE_T struct {
     Uid       int    `json:"uid"`
     Name      string `json:"name"`
     HeadUrl   string `json:"headurl"`
     CarryCoin int    `json:"carrycoin"`
     WinCoin   int    `json:"wincoin"`
 }
* */
var MessageResp = require("MessageResp");
function ScoreDetailRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SCORE_DETAIL_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        this.table = this.param.table;
        this.myself = this.param.myself;
        this.list = this.param.list;
    };
}

module.exports = ScoreDetailRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ScoreListReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '70d7dYRmxtFbq8/L9fHB9FC', 'ScoreListReqPacket');
// Script\Network\Cmd\Cmd_Req\ScoreListReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
var MessageReq = require("MessageReq");
/*
 * type US_REQ_SCORE_LIST_T struct {
 JsonHead
 Param PARAM_REQ_SCORE_LIST_T `json:"param"`
 }
 type PARAM_REQ_SCORE_LIST_T struct {
 IsCreate int8 `json:"iscreate` //0：参与的牌局, 1: 创建的牌局
 Start    int  `json:"start"`   //从哪里开始
 Total    int  `json:"total"`   //多少个
 }
 }

 * */
var GameSystem = require("GameSystem");

function ScoreListReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SCORE_LIST_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            param: msg
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ScoreListReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"ScoreListRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6bc69wV3UZE04QsA4SxvQrt', 'ScoreListRespPacket');
// Script\Network\Cmd\Cmd_Resp\ScoreListRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */

var MessageResp = require("MessageResp");

/*
 * type US_RESP_SCORE_LIST_T struct {
 JsonHead
 RespHead
 Param PARAM_RESP_SCORE_LIST_T `json:"param"`
 }
 type PARAM_RESP_SCORE_LIST_T struct {
 IsCreate int8           `json:"iscreate"` //0：参与的牌局, 1: 创建的牌局
 List     []USER_SCORE_T `json:"list"`
 }
 type USER_SCORE_T struct {
 PrivateId  int    `json:"privateid"`
 CreateTime int64  `json:"createtime"`
 LiveTime   int64  `json:"livetime"`
 TableName  string `json:"tablename"`
 OwnerName  string `json:"ownername"`
 HeadUrl    string `json:"headurl"`
 CarryCoin  int    `json:"carrycoin"` //携带
 WinCoin    int    `json:"wincoin"`   //输赢
 }

 */

function ScoreListRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SCORE_LIST_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        //var json = JSON.parse(BASE64.decoder(msg.param));
        this.iscreate = this.param.iscreate;
        this.list = this.param.list;
    };
}

module.exports = ScoreListRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"SearchClubReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '59ad7nPZS1CWK+opKkhtFJF', 'SearchClubReqPacket');
// Script\Network\Cmd\Cmd_Req\SearchClubReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/4/8.
 */
var MessageReq = require("MessageReq");
var GamePlayer = require('GamePlayer');
var GameSystem = require('GameSystem');

function SearchClubReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SEARCH_CLUB_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {
        cc.log("FindRoomReqPacket.send");

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            key: msg.key
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = SearchClubReqPacket;

cc._RFpop();
},{"GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageReq":"MessageReq"}],"SearchClubRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a8007sAByRNTLX/L4O3bOr8', 'SearchClubRespPacket');
// Script\Network\Cmd\Cmd_Resp\SearchClubRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/4/8.
 */
var MessageResp = require("MessageResp");

function SearchClubRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SEARCH_CLUB_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = SearchClubRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ServerKickOutPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '84b18IYgKdI2omNPTktRT3W', 'ServerKickOutPacket');
// Script\Network\Cmd\Cmd_Resp\ServerKickOutPacket.js

"use strict";

/**
 * Created by shrimp on 17/2/22.
 */
var MessageResp = require("MessageResp");

function ServerKickOutPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_KICK_OUT_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        //GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ServerKickOutPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ServiceView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '328e8CHESdDD6ErIlSNfHgo', 'ServiceView');
// Script\ComScene\PopView\ServiceView.js

"use strict";

var BasePop = require("BasePop");
var MusicMgr = require("MusicMgr");
var Audio_Common = require("Audio_Common");
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        CommitLayout: {
            default: null,
            type: cc.Layout
        },
        HistoryLayout: {
            default: null,
            type: cc.Layout
        },
        ServiceOnlineLayout: {
            default: null,
            type: cc.Layout
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log('ServiceView : onLoad');
        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {
            cc.log("stop event");
            event.stopPropagation();
        }.bind(this));

        this.scaleTo(this.bg);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callbackBtnClose: function callbackBtnClose() {
        cc.log("ServiceView : callbackBtnClose");
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        this.dismiss();
    },

    callbackBtnLabel: function callbackBtnLabel(toggle, customEventData) {
        cc.log("ServiceView : callbackBtnLabel,customEventData = " + customEventData);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        this.switchLayout(customEventData);
    },

    switchLayout: function switchLayout(type) {
        if (type === 1) {
            this.CommitLayout.node.setVisible(true);
            //this.CommitLayout.node.opacity = 255;
            this.HistoryLayout.node.opacity = 0;
            this.ServiceOnlineLayout.node.opacity = 0;
        } else if (type === 2) {
            this.CommitLayout.node.setVisible(false);
            //this.CommitLayout.node.opacity = 0;
            this.HistoryLayout.node.opacity = 255;
            this.ServiceOnlineLayout.node.opacity = 0;
        } else {
            this.CommitLayout.node.opacity = 0;
            this.HistoryLayout.node.opacity = 0;
            this.ServiceOnlineLayout.node.opacity = 255;
        }
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr"}],"SettingView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3080a2YtFRA6r61Eg5ZRAxz', 'SettingView');
// Script\ComScene\PopView\SettingView.js

"use strict";

var BasePop = require("BasePop");
var MusicMgr = require("MusicMgr");
var Audio_Common = require("Audio_Common");
var WeChatApi = require('WeChatApi');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        MusicSwitch: cc.Toggle,
        EffectSwitch: cc.Toggle
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log('SettingView : onLoad');
        // this.node.on(cc.Node.EventType.TOUCH_START, function(event){
        //     cc.log("stop event");
        //     event.stopPropagation();
        // }.bind(this));

        //this.scaleTo(this.bg);

        this.MusicSwitch.isChecked = MusicMgr.getMusicVolume() == 1;
        this.EffectSwitch.isChecked = MusicMgr.getEffectVolume() == 1;
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    callBackBtnMusic: function callBackBtnMusic(toggle, CustomEventData) {
        var btnName = toggle.target.getName();
        cc.log("SettingView.callBackBtnMusic,btnName = " + btnName);
        var isCheck = toggle.isChecked;
        cc.log("SettingView.callBackBtnMusic,isCheck = " + isCheck);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (CustomEventData == 1) {
            if (isCheck) {
                MusicMgr.setEffectsVolume(1);
            } else {
                MusicMgr.setEffectsVolume(0);
            }
        } else if (CustomEventData == 2) {
            if (isCheck) {
                MusicMgr.setMusicVolume(1);
            } else {
                MusicMgr.setMusicVolume(0);
            }
        } else if (CustomEventData == 3) {}
    },

    callbackBtnClose: function callbackBtnClose() {
        cc.log('SettingView:callbackBtnClose');
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        this.dismiss();
    },

    callbackBtnAbout: function callbackBtnAbout() {
        cc.log('SettingView:callbackBtnAbout');
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        //this.dismiss();
    },

    callbackBtnExitAccout: function callbackBtnExitAccout() {
        cc.log('SettingView:callbackBtnExitAccout');
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        //cc.director.loadScene('HallScene');
        var message = {
            popView: "SettingView",
            btn: "BtnExitLogin"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        WeChatApi.getInstance().clearWeChatLogin();
        this.dismiss();
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr","WeChatApi":"WeChatApi"}],"ShareView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2597cxNdiFJoaVGaAGtQfag', 'ShareView');
// Script\ComScene\PopView\ShareView.js

'use strict';

var BasePop = require('BasePop');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var WeChatApi = require("WeChatApi");
var GameSystem = require("GameSystem");

window.ShareType = cc.Enum({
    E_SHARETYPE_STRING: 1,
    E_SHARETYPE_IMAGE: 2,
    E_SHARETYPE_LINK: 3,
    E_SHARETYPE_APP: 4
});

cc.Class({
    extends: BasePop,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.initBaseData();
    },

    initBaseData: function initBaseData() {
        this.ShareString = "";
        this.ImagePath = "";
        this.Url = "";
        this.ShareType = ShareType.E_SHARETYPE_STRING;
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        cc.log("ShareView.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("ShareView.callbackBtn,btnName = " + btnName);
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnClose") {
            this.dismiss();
        } else if (btnName == "BtnFriends") {
            this.ShareCallBack(1);
            this.dismiss();
        } else if (btnName == "BtnWechat") {
            this.ShareCallBack(0);
            this.dismiss();
        }
    },

    setShareTyep: function setShareTyep(type, str, url) {
        this.ShareType = type;
        this.ShareString = str;
        this.ImagePath = str;
        this.Url = url;
    },

    ShareCallBack: function ShareCallBack(type) {

        cc.log("ShareCallBack, type=" + type + ', ShareString=' + this.ShareString + ", url=" + this.Url + ", ShareType=" + this.ShareType);

        if (this.ShareType == ShareType.E_SHARETYPE_STRING) {
            if (cc.sys.platform == cc.sys.ANDROID) {
                SocialUtils.shareToWeixin(0, "51牛友会", this.ShareString, this.Url);
            } else {
                WeChatApi.getInstance().sendTextContent(type, this.ShareString, this.Url);
            }
        } else if (this.ShareType == ShareType.E_SHARETYPE_IMAGE) {
            if (cc.sys.platform == cc.sys.ANDROID) {
                SocialUtils.shareToWeixin(2, "51牛友会", this.ShareString, this.Url);
            } else {
                WeChatApi.getInstance().sendImageContent(type, this.ImagePath, this.Url);
            }
        } else if (this.ShareType == ShareType.E_SHARETYPE_LINK) {
            if (cc.sys.platform == cc.sys.ANDROID) {
                SocialUtils.shareToWeixin(0, "51牛友会", this.ShareString, this.Url);
            } else {
                WeChatApi.getInstance().sendLinkContent(type, this.ShareString, this.Url);
            }
        } else if (this.ShareType == ShareType.E_SHARETYPE_APP) {
            if (cc.sys.platform == cc.sys.ANDROID) {
                SocialUtils.shareToWeixin(type, "51牛友会", this.ShareString, this.Url);
            } else {
                WeChatApi.getInstance().sendAppContent(type, this.ShareString, this.Url);
            }
        }
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MusicMgr":"MusicMgr","WeChatApi":"WeChatApi"}],"ShopConfReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '82fcaNst7VJjZBS2FDYl2Bg', 'ShopConfReqPacket');
// Script\Network\Cmd\Cmd_Req\ShopConfReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */
var MessageReq = require("MessageReq");
/*
 * type US_REQ_SHOP_CONF_T struct {
 JsonHead
 }
 }
 * */
function ShopConfReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SHOP_CONF_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = ShopConfReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"ShopConfRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6e125aSHVBFX5nQQG023Z2P', 'ShopConfRespPacket');
// Script\Network\Cmd\Cmd_Resp\ShopConfRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/30.
 */

var MessageResp = require("MessageResp");

/*
 * type US_RESP_SHOP_CONF_T struct {
 JsonHead
 RespHead
 Param PARAM_SHOP_CONF_T `json:"param"`
 }
 type PARAM_SHOP_CONF_T struct {
 GoldList    []SHOP_CONF_T `json:"goldlist"`
 DiamondList []SHOP_CONF_T `json:"diamondlist"`
 }
 type SHOP_CONF_T struct {
 Type uint8  `json:"type"`
 Prop uint32 `json:"prop"` //商品,如购买福袋,获得620金币
 Cost uint32 `json:"cost"` //消耗,如购买福袋,消耗钻石;购买钻石,消耗money
 Name string `json:"name"` //商品名称
 Desc string `json:"desc"` //描述,用于道具
 }

 //金币道具
 const (
 E_GOLD_TYPE_1 = 1 //福袋
 E_GOLD_TYPE_2 = 2 //聚宝盆
 E_GOLD_TYPE_3 = 3 //财神爷
 )

 //钻石道具
 const (
 E_DIAMOND_TYPE_1 = 1
 E_DIAMOND_TYPE_2=2
 E_DIAMOND_TYPE_3=3
 E_DIAMOND_TYPE_4=4
 E_DIAMOND_TYPE_5=5
 E_DIAMOND_TYPE_6=6
 )
 */

function ShopConfRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SHOP_CONF_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;
        this.param = msg.param;
        this.goldlist = this.param.goldlist;
        this.diamondlist = this.param.diamondlist;
    };
}

module.exports = ShopConfRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"ShopView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '83b2elXxURCfq3qlCyPmY61', 'ShopView');
// Script\ComScene\PopView\ShopView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var ProduceCell = require('ProduceCell');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
cc.Class({
    extends: BasePop,

    properties: {
        GoldScrollView: cc.ScrollView,
        DiamondScrollView: cc.ScrollView,
        ProduceCell_0: cc.Prefab,
        ProduceCell_1: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        MessageFactory.createMessageReq(window.US_REQ_SHOP_CONF_CMD_ID).send();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("ShopView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_SHOP_CONF_CMD_ID:
                this.onShopConfMsg(msg);
                break;
        }
    },
    /*
    * {"cmd":131210,"seq":1,"uid":10688,"code":0,"desc":"执行成功","param":{
    * "goldlist":[
    *   {"type":1,"prop":620,"cost":60,"name":"福袋","desc":"含600牛币,额外送20"},
    *   {"type":2,"prop":3200,"cost":300,"name":"聚宝盆","desc":"含3000牛币,额外送200"},
    *   {"type":3,"prop":13800,"cost":1280,"name":"财神爷","desc":"含12800牛币,额外送1000"}
    *  ],
    *  "diamondlist":[
    *   {"type":1,"prop":60,"cost":6,"name":"60钻石","desc":"\"\""},
    *   {"type":2,"prop":300,"cost":30,"name":"300钻石","desc":"\"\""},
    *   {"type":3,"prop":1280,"cost":128,"name":"1280钻石","desc":"\"\""},
    *   {"type":4,"prop":3280,"cost":328,"name":"3280钻石","desc":"\"\""},
    *   {"type":5,"prop":6180,"cost":618,"name":"6180钻石","desc":"\"\""}]}}
    * */
    onShopConfMsg: function onShopConfMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            this.updateGoldList(msg.goldlist);
            this.updateDiamondList(msg.diamondlist);
        }
    },

    updateGoldList: function updateGoldList(goldlist) {

        this.GoldScrollView.content.removeAllChildren(true);
        for (var index = 0; index < goldlist.length; index++) {
            var gold = cc.instantiate(this.ProduceCell_0);
            this.GoldScrollView.content.addChild(gold);
            gold.setPosition(cc.p(0, 0 - gold.getContentSize().height * (index + 0.5)));
            gold.getComponent("ProduceCell").setProduceData(0, goldlist[index]);
        }
    },

    updateDiamondList: function updateDiamondList(diamondlist) {

        this.DiamondScrollView.content.removeAllChildren(true);
        for (var index = 0; index < diamondlist.length; index++) {
            var Diamond = cc.instantiate(this.ProduceCell_0);
            this.DiamondScrollView.content.addChild(Diamond);
            Diamond.setPosition(cc.p(0, 0 - Diamond.getContentSize().height * (index + 0.5)));
            Diamond.getComponent("ProduceCell").setProduceDataDiamond(1, diamondlist[index]);
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        this.dismiss();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    },

    callBackBtnToggle: function callBackBtnToggle(toggle, CustomEventData) {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (CustomEventData == 1) {
            this.GoldScrollView.node.active = true;
            this.DiamondScrollView.node.active = false;
        } else {
            this.GoldScrollView.node.active = false;
            this.DiamondScrollView.node.active = true;
        }
    },

    initScrollView: function initScrollView(type) {}
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","ProduceCell":"ProduceCell"}],"SitDownReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '96513vJyz5JuaGZF8gEjRfe', 'SitDownReqPacket');
// Script\Network\Cmd\Cmd_Req\SitDownReqPacket.js

'use strict';

/**
 * Created by shrimp on 17/3/1.
 */

/*E_DOWN_TYPE = 1 //坐下
E_RISE_TYPE = 2 //站起
*/

/*
 SeatId int `json:"seatid"`
 Status int `json:"status"` //1. 坐下，2：站起
*/

var MessageReq = require('MessageReq');
var GameSystem = require('GameSystem');

function SitDownReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_SIT_DOWN_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            seatid: msg.seatid,
            switch: msg.status
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = SitDownReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"SitDownRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '35eaaruYJRLIZ+Amvrorn5m', 'SitDownRespPacket');
// Script\Network\Cmd\Cmd_Resp\SitDownRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */

/*
 type US_RESP_SIT_DOWN_T struct {
 JsonHead
 RespHead
 Switch    int    `json:"switch"` //1. 坐下，2：站起
 Status    int    `json:"status"` //玩家状态
 SeatId    int    `json:"seatid"`
 SeatUid   uint32 `json:"seatuid"`
 Name      string `json:"name"`
 HeadUrl   string `json:"headurl"`
 Sex       int    `json:"sex"`
 CarryTime int    `json:"carrytime"` //选择携带金币时间
 MinCarry  int    `json:"mincarry"`  //是否需要携带
 IsCarry   int8   `json:"iscarry"`   //是否需要携带金币，1：第一次坐下，需要携带，0：之前参与过，还有金币
 Coin      int    `json:"coin"`      //如果iscarry==0, coin是玩家金币
 }
* */
var MessageResp = require("MessageResp");

function SitDownRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_SIT_DOWN_CMD_ID;
    //this.status    = 0;
    //this.seatid    = 0;
    //this.seatuid   = 0;
    //this.name      = "";
    // this.headurl   = "";
    //this.sex       = 0;
    // this.gold      = 0;
    // this.diamond   = 0;
    //this.coin      = 0;
    //this.carrytime = 0;
    //this.mincarry  = 0;
    //this.iscarry   = 0;
    //this.switch    = 0;
    // this.totalround = 0;
    // this.totaltable = 0;
    //this.tstatus    = 0;
    // this.win        = 0;
    // this.total      = 0;

    //接收的数据
    this.onMessage = function (msg) {
        cc.log("SitDownRespPacket.onMessage, msg.totalround=", msg.totalround, " totaltable=", msg.totaltable);
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.switch = msg.switch;
        this.status = msg.status;
        this.seatid = msg.seatid;
        this.seatuid = msg.seatuid;
        this.name = msg.name;
        this.headurl = msg.headurl;
        this.sex = msg.sex;
        this.coin = msg.coin;
        this.carrytime = msg.carrytime;
        this.iscarry = msg.iscarry;
        this.tstatus = msg.tstatus;
        this.totalround = msg.totalround;
        this.totaltable = msg.totaltable;
        this.win = msg.win;
        this.total = msg.total;
        this.gold = msg.gold;
        this.diamond = msg.diamond;
    };
}

module.exports = SitDownRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"SitReqCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0fd35TL8KlMopgTBGt3ejVo', 'SitReqCell');
// Script\ComScene\PopView\SitReqCell.js

'use strict';

var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var UtilTool = require('UtilTool');
var MessageFactory = require('MessageFactory');
var GamePlayer = require('GamePlayer');
var GameSystem = require("GameSystem");
cc.Class({
    extends: cc.Component,

    properties: {
        BtnAgree: cc.Node,
        BtnRefuse: cc.Node,
        ReqMsg: cc.RichText,
        Time: cc.Label,
        Head: cc.Sprite,
        Title: cc.Label,
        RoomInfoView: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.msg = null;
        this.msgType = 0; // 非俱乐部消息
        var self = this;
        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {
            if (this.msgType == 3) {
                if (self.msg.deal == 0) {
                    if (self.msg.type == 3 || self.msg.type == 4) {
                        var data = {
                            type: self.msg.type,
                            msgid: self.msg.id
                        };
                        cc.log("read MsgId=", data.msgid, " type=", data.type);
                        MessageFactory.createMessageReq(US_REQ_SET_MSG_READ_CMD_ID).send(data);
                    }
                } else {
                    cc.log("read MsgId=", data.msgid, " type=", data.type, " deal=", deal);
                }
            } else {
                // if(self.msg.type != 1)
                // {
                //     var data = {
                //         type: self.msg.type,
                //         msgid: self.msg.id,
                //     };
                //     MessageFactory.createMessageReq(US_REQ_SET_MSG_READ_CMD_ID).send(data);
                // }
            }
        });
    },

    setMessageInfo: function setMessageInfo(msg, msgType) {
        cc.log("SitReqCell.setMessageInfo, msg= " + msg.msg);
        this.msg = msg;
        this.msgType = msgType;
        UpdateWXHeadIcon(msg.url, this.Head);

        if (this.msgType == 3) {
            //个人消息
            // Id      int    `json:"id"`
            // Deal    int    `json:"deal"`
            // Type    int    `json:"type"`
            // Url     string `json:"url"`
            // Name    string `json:"name"`
            // Msg     string `json:"msg"`
            // SendUid uint32 `json:"senduid"`
            // Time    int    `json:"time"`

            if (msg.type == 1) {
                this.setMsgSitReq(msg);
            } else if (msg.type == 3) {
                this.setMsgBuyProp(msg);
            } else if (msg.type == 4) {
                this.setMsgCharge(msg);
            }
        } else if (this.msgType == 2) {
            //俱乐部消息
            // Id     int    `json:"id"`
            // Deal   int    `json:"deal"`
            // Url    string `json:"url"`
            // Type   int    `json:"type"`
            // Name   string `json:"name"`
            // Msg    string `json:"msg"`
            // ClubId int    `json:"clubid"`
            // Time   int    `json:"time"`

            if (msg.type == 1) {
                this.setMsgJoinClub(msg);
            } else {
                this.setMsgClubOtherMsg(msg);
            }
        }
        this.Time.string = UtilTool.getFormatData(msg.time);
    },

    setMsgJoinClub: function setMsgJoinClub(msg) {
        cc.log("setMsgJoinClub msg=", msg);

        this.Title.string = "申请加入";
        if (msg.deal == 0) {
            this.ReqMsg.string = "<color=#646464>" + msg.msg.name + "(" + msg.msg.uid + ")申请加入" + "您<color=#0000FF>" + msg.name + "</c>(" + msg.clubid + ")</c>";
            this.BtnAgree.active = true;
            this.BtnRefuse.active = true;
        } else {
            this.BtnAgree.active = false;
            this.BtnRefuse.active = false;
            if (msg.deal == 1) {
                this.ReqMsg.string = "<color=#646464>您<color=#FF0000>同意</c>" + msg.msg.name + "(" + msg.msg.uid + ")加入" + "<color=#0000FF>" + msg.name + "</c>(" + msg.clubid + ")</c>";
            } else {
                this.ReqMsg.string = "<color=#646464>您<color=#FF0000>拒绝</c>" + msg.msg.name + "(" + msg.msg.uid + ")加入" + "<color=#0000FF>" + msg.name + "</c>(" + msg.clubid + ")</c>";
            }
        }
    },

    setMsgClubOtherMsg: function setMsgClubOtherMsg(msg) {
        switch (msg.type) {
            case 2:
                this.Title.string = "申请加入";
                break;

            case 3:
                this.Title.string = "创建俱乐部";
                break;

            case 4:
                this.Title.string = "解散俱乐部";
                break;

            case 5:
                this.Title.string = "升级俱乐部";
                break;

            case 7:
                this.Title.string = "修改管理员";
                break;

            case 8:
                this.Title.string = "删除成员";
                break;
        }

        this.ReqMsg.string = "<color=#646464>" + msg.msg.msg + "</c>";
        this.BtnAgree.active = false;
        this.BtnRefuse.active = false;
    },

    setMsgCharge: function setMsgCharge(msg) {
        this.Title.string = "充值消息";
        this.ReqMsg.string = "<color=#646464>" + msg.msg.msg + "</c>";
        this.BtnAgree.active = false;
        this.BtnRefuse.active = false;
    },

    setMsgBuyProp: function setMsgBuyProp(msg) {
        this.Title.string = "道具消息";
        this.ReqMsg.string = "<color=#646464>" + msg.msg.msg + "</c>";
        this.BtnAgree.active = false;
        this.BtnRefuse.active = false;
    },

    setMsgSitReq: function setMsgSitReq(msg) {
        cc.log("setMsgSitReq msg=", msg);
        this.Title.string = "牌局消息";
        if (msg.deal == 0) {
            this.ReqMsg.string = "<color=#646464>" + msg.msg.name + "(" + msg.msg.situid + ")申请携带<color=#FF0000>" + msg.msg.coin + "</c>牛友币进入您<color=#0000FF>" + msg.msg.privateid + "</c>(" + msg.name + ")牌局</c>";
            this.BtnAgree.active = true;
            this.BtnRefuse.active = true;
        } else if (msg.deal == 1) {
            this.ReqMsg.string = "<color=#646464>您<color=#FF0000>同意</c>" + msg.msg.name + "(" + msg.msg.situid + ")申请携带<color=#FF0000>" + msg.msg.coin + "</c>牛友币进入您<color=#0000FF>" + msg.msg.privateid + "</c>(" + msg.name + ")牌局</c>";
            this.BtnAgree.active = false;
            this.BtnRefuse.active = false;
        } else {
            this.ReqMsg.string = "<color=#646464>您<color=#FF0000>拒绝</c>" + msg.msg.name + "(" + msg.msg.situid + ")申请携带<color=#FF0000>" + msg.msg.coin + "</c>牛友币进入您<color=#0000FF>" + msg.msg.privateid + "</c>(" + msg.name + ")牌局</c>";
            this.BtnAgree.active = false;
            this.BtnRefuse.active = false;
        }
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        cc.log("SitReqCell.callbackBtn,CustomEventData = " + CustomEventData);
        var btnName = event.target.getName();
        cc.log("SitReqCell.callbackBtn,btnName = " + btnName);
        if (btnName == "BtnAgree") {
            if (this.msgType == 3) {
                //个人消息
                if (this.msg.type == 1) {
                    this.sendSitMessage(1); //同意
                    this.msg.deal = 1;
                    this.setMsgSitReq(this.msg);
                }
            } else {
                if (this.msg.type == 1) {
                    this.sendAddClubMessage(1);
                    this.msg.deal = 1;
                    this.setMsgJoinClub(this.msg);
                }
            }
        } else if (btnName == "BtnRefuse") {
            if (this.msgType == 3) {
                if (this.msg.type == 1) {
                    this.sendSitMessage(2); //拒绝
                    this.msg.deal = 2;
                    this.setMsgSitReq(this.msg);
                }
            } else {
                if (this.msg.type == 1) {
                    this.sendAddClubMessage(2);
                    this.msg.deal = 2;
                    this.setMsgJoinClub(this.msg);
                }
            }
        }
    },

    sendAddClubMessage: function sendAddClubMessage(result) {
        cc.log("SitReqCell.sendAddClubMessage ClubId=", this.msg.clubid, " uid=", this.msg.msg.uid, " result=", result);
        var data = {
            uid: this.msg.msg.uid,
            isallow: result };
        cc.log("BaseScene.notifyOwnerConfirmSit.data = ", JSON.stringify(data));
        MessageFactory.createMessageReq(window.CLUB_REQ_OWNER_CONFIRM_CMD_ID).send(data, this.msg.clubid);
    },

    // SitUid     uint32 `json:"situid"`      //申请入座的玩家uid
    // Name       string `json:"name"`        //玩家昵称
    // SeatId     int    `json:"seatid"`      //申请入座的座位号
    // Coin       int    `json:"coin"`        //申请携带金币
    // GameSvcId  uint32 `json:"gamesvcid"`   //在哪一个游戏服务器申请
    // TableId    int32  `json:"tableid"`     //在哪一个桌子申请
    // PrivateId  int    `json:"privateid"`   //6位数私人桌id
    // CreateTime int64  `json:"createtime"`  //创建时间
    sendSitMessage: function sendSitMessage(result) {
        var msg = this.msg.msg;
        var data = {
            gamesvcid: msg.gamesvcid,
            tableid: msg.tableid,
            playeruid: msg.situid,
            privateid: msg.privateid,
            result: result };
        cc.log("sendSitMessage.SitReqCell data=", data);
        MessageFactory.createMessageReq(window.US_REQ_OWNER_CONFIRM_CMD_ID).send(data);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GamePlayer":"GamePlayer","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"SocketConfig":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0c61cLVNc9NPZRfyjot1lGL', 'SocketConfig');
// Script\Network\Socket\SocketConfig.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */
//socket 回复消息 成功标志

window.SocketSeq = 0;

window.SocketRetCode = cc.Enum({
    RET_REPEAT_REGISTER: -1000, //服务器重复注册(服务器内部消息)
    RET_NOT_CALL_BANKER: -19, //非抢庄状态
    RET_USER_OFFLINE: -18, //玩家离线
    RET_NOT_CLICK_AGAIN: -17, //请勿频繁点击
    RET_SEAT_HAVE_PLAYER: -16, //您选择的座位已经被占领,请从新选择
    RET_SEAT_NOT_EXIST: -15, //您选择的座位不存在
    RET_PLAYER_ACTIVE: -14, //您正在游戏中,不能离开
    RET_PLAYER_HAVE_LEAVE: -13, //您已经离开
    RET_PARAM_ERROR: -12, //参数错误
    RET_DESTROYED_PRIVATE_TBALE: -11, //牌局已销毁
    RET_TABLE_FULL: -10, //私人房爆满
    RET_GAME_PLAYER_FULL: -9, //桌子里面的玩家已满
    RET_GAME_TABLE_FULL: -8, //游戏服务器桌子爆满
    RET_DB_ERROR: -7, //数据库错误
    RET_NOT_FIND_TABLE: -6, //桌子不存在
    RET_NOT_FIND_GAME_SERVER: -5, //未找到匹配服务器
    RET_SERVER_ABNORMAL: -4, //服务异常
    RET_USER_REPEAT_LOGIN: -3, //您的账号已经在其他地点登录
    RET_USERKEY_ERROR: -2, //用户验证失败,请重新登录
    RET_ILLEGAL_REQ: -1, //非法请求(如:如果头部uid,不是自己的socket链接的uid就直接返回,反漏洞)
    RET_SUCCESS: 0, //成功
    RET_BACK_GAME_TABLE: 1, //您已经在游戏中
    RET_GOLD_LACK: 2, //您金币不足
    RET_DIAMOND_LACK: 3, //您钻石不足
    RET_COIN_LACK: 4, //您携带金币不足
    RET_COIN_GREATER_GOLD: 5, //携带金币大于身上金币
    RET_REJECT_SIT_DOWN: 6 });

window.SocketRetDesc = cc.Enum({
    RET_REJECT_SIT_DOWN: "您的请求被拒绝",
    RET_COIN_GREATER_GOLD: "携带金币大于身上金币",
    RET_COIN_LACK: "您带入的金币不足,请从新选择带入金币",
    RET_DIAMOND_LACK: "您钻石不足",
    RET_GOLD_LACK: "您金币不足",
    RET_BACK_GAME_TABLE: "您已经在游戏中",
    RET_SUCCESS: "执行成功",
    RET_ILLEGAL_REQ: "非法请求",
    RET_USERKEY_ERROR: "用户验证失败,请重新登录",
    RET_USER_REPEAT_LOGIN: "您的账号已经在其他地点登录",
    RET_SERVER_ABNORMAL: "服务异常",
    RET_NOT_FIND_GAME_SERVER: "未找到匹配的游戏服务器",
    RET_NOT_FIND_TABLE: "桌子不存在",
    RET_DB_ERROR: "数据库错误",
    RET_GAME_TABLE_FULL: "游戏服务器爆满,请稍后再试",
    RET_GAME_PLAYER_FULL: "桌子里面的玩家已满",
    RET_TABLE_FULL: "房间已满,请选择其他房间",
    RET_DESTROYED_PRIVATE_TBALE: "牌局已销毁",
    RET_PARAM_ERROR: "参数错误",
    RET_PLAYER_ACTIVE: "您正在游戏中,不能离开",
    RET_PLAYER_HAVE_LEAVE: "您已经离开",
    RET_SEAT_NOT_EXIST: "您选择的座位不存在",
    RET_NOT_CLICK_AGAIN: "请勿频繁点击",
    RET_SEAT_HAVE_PLAYER: "您选择的座位已经被占领,请从新选择",
    RET_NOT_CALL_BANKER: "非抢庄状态",
    RET_USER_OFFLINE: "玩家离线",
    RET_REPEAT_REGISTER: "服务器重复注册"
});

window.PACKET_HEADER_SIZE = 18,

//socket消息
window.SocketMessage = "SocketMessage";

/**
 * 引擎状态消息
 * @type {string}
 */
window.SOCKETT_SENDMESSAGE = "SendMessage";

//socket消息类型
window.MessageType = cc.Enum({
    SOCKET_MESSAGE: "socket_message", //socket 回包
    SOCKET_CONNECTING: "socket_connecting", //socket开始重连
    //SOCKETT_SENDMESSAGE  :   "SendMessage",
    MSG_NETWORK_FAILURE: "socket_network_failure",
    SOCKET_DISCONNECTED: "socket_disconnected",
    SOCKET_CONNECTED: "socket_connected",
    SENDMSG_TIMEOUT: "sendmsg_timeout",
    SENDMSG_CLOSESERVER: "sendmsg_closeserver",
    SCENE_MSG: "Scene_Msg" });

/**
 * 引擎状态消息
 * @type {string}
 */
window.GameEngineInfo = "GameEngineInfo";
window.GameInfo = {

    GameHide: "GameHide", //游戏暂停
    GameShow: "GameShow", //游戏唤醒
    NetOnline: "NetOnline", //网络连接
    NetOffline: "NetOffline" };

window.HEART_BEAT_TIME = 30;

cc._RFpop();
},{}],"SocketData":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e2e9bURTFpBK4SddNO0vs5V', 'SocketData');
// Script\Network\Socket\SocketData.js

"use strict";

/**
 * Created by shrimp on 17/2/19.
 */

var m_EncryptMap = [0x51, 0xA1, 0x9E, 0xD7, 0x1E, 0x83, 0x1C, 0x2D, 0xE9, 0x77, 0x3D, 0x13, 0x93, 0x10, 0x45, 0xFF, 0x6D, 0xC9, 0x20, 0x2F, 0x1B, 0x82, 0x1A, 0x7D, 0xF5, 0xCF, 0x52, 0xA8, 0xD2, 0xA4, 0xB4, 0x0B, 0x31, 0x97, 0x57, 0x19, 0x34, 0xDF, 0x5B, 0x41, 0x58, 0x49, 0xAA, 0x5F, 0x0A, 0xEF, 0x88, 0x01, 0xDC, 0x95, 0xD4, 0xAF, 0x7B, 0xE3, 0x11, 0x8E, 0x9D, 0x16, 0x61, 0x8C, 0x84, 0x3C, 0x1F, 0x5A];

function getutf8bytecount(byteval) {
    var bCount = 0;
    for (var i = 7; i >= 0; --i) {
        if (byteval & 1 << i) {
            bCount++;
        } else {
            break;
        }
    }
    return bCount;
}

function utf8tounicode(code) {
    if (code <= 0x7f) {
        return String.fromCharCode(code);
    }
    var bStart = false;
    var bCount = 0;
    var bFinish = false;
    var newCode = 0;
    var bFlag = code & 0xff;
    bCount = getutf8bytecount(bFlag);
    var newCode = 0;
    for (var i = 0; i < bCount; ++i) {
        var val = code & 0xff << i * 8;

        val = val >>> i * 8;
        if (i == 0) {
            for (var t = 1; t <= bCount; ++t) {
                val = val & ~(1 << 8 - t);
            }
        } else {
            val = val & 0x3f;
        }
        newCode += val << 6 * (bCount - i - 1);
    }
    return String.fromCharCode(newCode);
}

function unicodetoutf8(code) {
    if (code <= 0x7f) {
        // 不需要转换
        return { code: code, bytelen: 1 };;
    }

    var bCount = 0; // 二进制位数量
    for (var i = 0; i < 32; ++i) {
        if (code & 1 << i) {
            bCount = i + 1;
        }
    }
    var bByte = 0;
    // utf8编码占用的字节数
    bByte = Math.ceil(bCount / 6);

    // 计算是否要进位
    var bTmp = bCount % 6;
    bTmp = bTmp == 0 ? 6 : bTmp;

    if (bTmp > 7 - bByte) {
        bByte++;
    }
    // 填充编码
    var utf8Code = 0;
    for (var i = 0; i < bByte - 1; ++i) {
        var bValue = code >>> i * 6 & 0x3f; // 最低位放到最高位
        bValue = (1 << 7) + bValue;

        utf8Code += bValue << (bByte - i - 1) * 8;
    }

    // 填充最后剩余的编码
    var bValue = code >>> (bByte - 1) * 6;

    // 填充标识符
    var bFlag = 0;
    for (var i = 0; i < bByte; ++i) {
        bFlag += 1 << 7 - i;
    }

    utf8Code += bFlag + bValue;

    return { code: utf8Code, bytelen: bByte };
}

function utfbytes2string(bytes) {
    if (bytes.length == 0) {
        return "";
    }
    var retString = "";
    for (var i = 0; i < bytes.length;) {
        if (bytes[i] <= 0x7f) {
            retString += utf8tounicode(bytes[i]);
            i++;
            continue;
        }
        var bCount = getutf8bytecount(bytes[i]);
        var utf8code = 0;
        for (var t = 0; t < bCount; ++t) {
            utf8code += bytes[i + t] << t * 8;
        }
        retString += utf8tounicode(utf8code);
        i += bCount;
    }
    return retString;
}

String.prototype.toUtf8 = function () {
    var strLen = this.length;
    var allBytes = [];
    var allLen = 0;
    for (var i = 0; i < strLen; ++i) {
        var unicode = this.charCodeAt(i);
        var result = unicodetoutf8(unicode);
        allLen += result.bytelen;
        allBytes.push(result);
    }
    return { codes: allBytes, bytelens: allLen };
};

//htl，大小端  offset 指定位置
function item(type, len, value, htl, offset) {
    var obj = new Object();
    obj.type = type;
    obj.len = len;
    obj.value = value;
    var bBig = htl === undefined ? true : htl;
    obj.htl = bBig;
    obj.offset = offset;
    return obj;
}

function SocketData(arraybuffer) {
    this.offset = 0;
    this.writeMap = [];

    this.m_nBufPos = window.PACKET_HEADER_SIZE;
    this.m_nPacketSize = window.PACKET_HEADER_SIZE;

    this.aDataArray = null;
    if (arraybuffer) {
        this.aDataArray = new DataView(arraybuffer);
    }
}

//---------------------包头特殊

SocketData.prototype._writeHeaderByte = function (value, offset) {
    this.writeMap.push(item("headbyte", 1, value, true, offset));
};

SocketData.prototype._readHeaderByte = function (offset) {
    var value = this.aDataArray.getUint8(offset, true);
    return value;
};

SocketData.prototype._writeHeaderShort = function (value, offset) {
    this.writeMap.push(item("headshort", 2, value, false, offset));
};

SocketData.prototype._readHeaderShort = function (offset) {
    var value = this.aDataArray.getInt16(offset, false);
    return value;
};

SocketData.prototype._writeHeaderInt = function (value, offset) {
    this.writeMap.push(item("headint", 4, value, false, offset));
};

SocketData.prototype._readHeaderInt = function (offset) {
    var value = this.aDataArray.getInt32(offset, false);
    return value;
};

//-------------------------byte---------------------

SocketData.prototype.WriteByte = function (value, bBig) {
    this.writeMap.push(item("int8", 1, value, bBig));
};
SocketData.prototype.ReadByte = function (bBig) {
    if (this.checkReadOut(1)) {
        return 0;
    }
    var htl = bBig === undefined ? true : bBig;
    var value = this.aDataArray.getUint8(this.offset, htl);
    this.offset += 1;
    return value;
};

//-----------------------short---------------------

SocketData.prototype.WriteShort = function (value, bBig) {
    var htl = bBig === undefined ? false : bBig;
    this.writeMap.push(item("int16", 2, value, htl));
};
SocketData.prototype.ReadShort = function (bBig) {
    if (this.checkReadOut(2)) {
        return 0;
    }
    var htl = bBig === undefined ? false : htl;
    var value = this.aDataArray.getInt16(this.offset, htl);
    this.offset += 2;
    return value;
};

//-----------------------int---------------------

SocketData.prototype.WriteInt = function (value, bBig) {
    var htl = bBig === undefined ? false : bBig;
    this.writeMap.push(item("int32", 4, value, htl));
};
SocketData.prototype.ReadInt = function (bBig) {
    if (this.checkReadOut(4)) {
        return 0;
    }
    var htl = bBig === undefined ? false : bBig;
    var value = this.aDataArray.getInt32(this.offset, htl);
    this.offset += 4;
    return value;
};

//-----------------------int64---------------------
SocketData.prototype.WriteInt64 = function (value, bBig) {
    var htl = bBig === undefined ? false : bBig;
    this.writeMap.push(item("int64", 8, value, htl));
};

SocketData.prototype.ReadInt64 = function (bBig) {
    if (this.checkReadOut(8)) {
        return 0;
    }

    var htl = bBig === undefined ? false : bBig;
    var low = this.aDataArray.getUint32(this.offset, htl);
    this.offset += 4;
    var higt = this.aDataArray.getUint32(this.offset, htl);
    this.offset += 4;
    var longVal = new Long(higt, low, false);
    return longVal.toNumber();
};

//-----------------------string---------------------

SocketData.prototype.WriteString = function (value, bBig) {
    var htl = bBig === undefined ? false : bBig;
    var result = value.toUtf8();
    this.writeMap.push(item("string", result.bytelens + 4 + 1, result, htl)); // +4 是因为字符串前面要写入一个长度
};
SocketData.prototype.ReadString = function (bBig) {

    if (this.checkReadOut(4)) {
        return "";
    }

    var htl = bBig === true ? false : bBig;
    var len = this.aDataArray.getInt32(this.offset);
    this.offset += 4;
    var bytes = [];
    for (var i = 0; i < len; ++i) {
        var b = this.ReadByte();
        // var b = this.aDataArray.getUint8(this.offset);
        bytes.push(b);
        // this.offset += 1;
    }
    return utfbytes2string(bytes);
};

SocketData.prototype.getAllLength = function () {
    var allLen = window.PACKET_HEADER_SIZE;
    for (var i = 0; i < this.writeMap.length; ++i) {
        if (this.writeMap[i].type.indexOf("head") == -1) {
            allLen += this.writeMap[i].len;
        }
    }
    return allLen;
};

SocketData.prototype.checkReadOut = function (length) {
    if (this.offset + length > this.aDataArray.byteLength) {
        return true;
    }
    return false;
};

SocketData.prototype._getbuffer = function () {

    var allLen = this.getAllLength();

    var arraybuffer = new ArrayBuffer(allLen);

    this.aDataArray = new DataView(arraybuffer);

    var offset = window.PACKET_HEADER_SIZE;;

    for (var i = 0; i < this.writeMap.length; ++i) {
        var value = this.writeMap[i].value;
        var htl = this.writeMap[i].htl;
        switch (this.writeMap[i].type) {

            case "headbyte":
                this.aDataArray.setUint8(this.writeMap[i].offset, value, htl);
                break;

            case "headshort":
                this.aDataArray.setInt16(this.writeMap[i].offset, value, htl);
                break;

            case "headint":
                this.aDataArray.setInt32(this.writeMap[i].offset, value, htl);
                break;

            case "int8":
                this.aDataArray.setUint8(offset, value, htl);
                offset += 1;
                break;

            case "int16":
                this.aDataArray.setInt16(offset, value, htl);
                offset += 2;
                break;

            case "int32":
                this.aDataArray.setInt32(offset, value, htl);
                offset += 4;
                break;

            case "string":
                // 写入长度
                this.aDataArray.setInt32(offset, this.writeMap[i].value.bytelens + 1, htl);
                offset += 4;

                // 写入字节数据
                var codes = this.writeMap[i].value.codes;for (var n = 0; n < codes.length; ++n) {
                    var code = codes[n].code;
                    var len = codes[n].bytelen;
                    for (var t = 0; t < len; ++t) {
                        var b = code >> t * 8 & 0xff;
                        this.aDataArray.setUint8(offset, b);
                        offset += 1;
                    }
                }

                this.aDataArray.setUint8(offset, 0);
                offset += 1;
                break;

            case "int64":
                var langValue = Long.fromValue(this.writeMap[i].value, htl);
                var bytes = langValue.toBytesBE();

                for (var j = 0; j < bytes.length; j++) {
                    this.aDataArray.setUint8(offset + j, bytes[j]);
                }
                offset += 8;

                break;

            default:
                break;
        }
    }
    this.m_nPacketSize = offset;
    return arraybuffer;
};

SocketData.prototype.setOffset = function (offset) {
    this.offset = offset;
};

SocketData.prototype._reset = function () {
    this.offset = 0;
    this.writeMap = [];
    this.m_nBufPos = window.PACKET_HEADER_SIZE;
    this.m_nPacketSize = window.PACKET_HEADER_SIZE;
    this.m_isCheckCode = false;
};

SocketData.prototype.Begin = function (nCommand, uid, cVersion) {
    this._begin(nCommand, uid, cVersion);
    this.m_isCheckCode = false;
};

SocketData.prototype._begin = function (nCommand, uid, cVersion) {
    this._reset();
    var cmd = nCommand;
    var uid = uid;
    var source = window.SOURCE_TYPE;

    this._writeHeaderByte(cVersion, 4); // 版本号
    this._writeHeaderShort(cmd, 5); // 命令码
    this._writeHeaderByte(source, 11); // 消息来源

    var type = window.GAME_ID;
    this._writeHeaderByte(type, 12);
    this._writeHeaderInt(uid, 13);
};

SocketData.prototype.SetOptType = function (value) {
    this._writeHeaderByte(value, 12);
};

SocketData.prototype.End = function () {
    this.m_isCheckCode = false;
    this._end();
};

SocketData.prototype._end = function () {
    var nBody = this.getAllLength() - 4; //数据包长度包括命令头和body,4个字节是数据包长度
    var len = nBody;
    this._writeHeaderInt(len, 0); // 包正文长度
    var code = 0;
    this._writeHeaderByte(code, 17); //效验码
};

SocketData.prototype.IsWriteCheckCode = function () {
    return this.m_isCheckCode;
};

/*整个包的长度*/
SocketData.prototype.GetBodyLength = function () {
    var nLen;
    nLen = this._readHeaderInt(0);
    return nLen;
};

SocketData.prototype.EncryptBuffer = function () {
    if (this.IsWriteCheckCode()) return;

    this._getbuffer();

    var wDataSize = this.GetBodyLength() - window.PACKET_HEADER_SIZE + 4;
    var EnCode = Math.floor(Math.random() * window.MAX_ENCRYPT_MAP);
    EnCode = 0;
    var EnCodeNum = m_EncryptMap[EnCode];
    var CheckCode = 0;

    for (var i = 0; i < wDataSize; i++) {
        var data = this.aDataArray.getUint8(window.PACKET_HEADER_SIZE + i, true);
        CheckCode += data;
        CheckCode &= 0xff;
        data ^= EnCodeNum;
        data &= 0xff;
        this.aDataArray.setUint8(window.PACKET_HEADER_SIZE + i, data, true);
    }

    this.SetEnCode(EnCode);
    this.WriteCheckCode(~CheckCode + 1 & 0xff);

    return this.aDataArray.buffer;
};

SocketData.prototype.CrevasseBuffer = function () {

    var wDataSize = this.GetBodyLength() - window.PACKET_HEADER_SIZE + 4;
    var EnCode = this.GetEnCode();
    if (EnCode >= window.MAX_ENCRYPT_MAP) {
        return -1;
    }

    var EnCodeNum = m_EncryptMap[EnCode];
    var CheckCode = this.GetCheckCode();

    for (var i = 0; i < wDataSize; i++) {
        var data = this.aDataArray.getUint8(window.PACKET_HEADER_SIZE + i, true);
        data &= 0xff;
        data ^= EnCodeNum;

        CheckCode &= 0xff;
        CheckCode += data;
        this.aDataArray.setUint8(window.PACKET_HEADER_SIZE + i, data, true);
    }
    if ((CheckCode & 0xff) != 0) {
        return -1;
    }

    return wDataSize;
};

SocketData.prototype.SetEnCode = function (i) {
    // this._writeHeaderByte(i, 8);
    this.aDataArray.setUint8(8, i, true);
};

SocketData.prototype.GetEnCode = function () {
    var encode = this._readHeaderByte(8);
    return encode;
};

SocketData.prototype.WriteCheckCode = function (nValue) {
    // this._writeHeaderByte(nValue,17);
    this.aDataArray.setUint8(17, nValue, true);
    this.m_isCheckCode = true;
};

SocketData.prototype.GetCheckCode = function () {
    var code = this._readHeaderByte(17);
    return code;
};

SocketData.prototype.Reset = function () {
    this._reset();
};

SocketData.prototype.GetCmdType = function () {
    var nCmdType = this._readHeaderShort(5);
    return nCmdType;
};

module.exports = SocketData;

cc._RFpop();
},{}],"SocketManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bcca1j6kqpKqbt11NNhQxFX', 'SocketManager');
// Script\Network\Socket\SocketManager.js

'use strict';

/**
 * Created by shrimp on 17/2/19.
 */
var GameSystem = require('GameSystem');
var SocketData = require('SocketData');
var MessageFactory = require('MessageFactory');

function GameWebSocket() {
    this.m_socket = null;
    this.isSocketConnected = false;
    this.socketListenerID = -1;
    this.netConnected = true;
    this.onListenMessageToSend();
    this.onNetCheckListener();
}

//连接socket
GameWebSocket.prototype.startSocket = function (url) {
    cc.log("SocketManager.startSocket,url = " + GameSystem.getInstance().webSocketUrl);
    this.isSocketConnected = false;
    this.connectSocket(GameSystem.getInstance().webSocketUrl);
},

//重连服务器
GameWebSocket.prototype.reStartSocket = function () {
    cc.log("SocketManager.reStartSocket,url = " + GameSystem.getInstance().webSocketUrl);
    this.isSocketConnected = false;
    this.connectSocket(GameSystem.getInstance().webSocketUrl);
},

//等待玩家发送数据
GameWebSocket.prototype.onListenMessageToSend = function () {
    cc.log("SocketManager.onListenMessageToSend");
    if (this.socketListenerID == -1) {
        var self = this;

        this.socketListenerID = GlobalEventManager.getInstance().addEventListener(window.SOCKETT_SENDMESSAGE, function (event) {
            cc.log("SocketManager.onListenMessageToSend event listener.");
            if (event) {
                self.sendMessage(event);
            }
        }, this);
    }
};

GameWebSocket.prototype.onNetCheckListener = function () {
    cc.log("SocketManager.onNetCheckListener");
    var self = this;

    GlobalEventManager.getInstance().addEventListener(window.GameEngineInfo, function (event) {

        if (event) {
            var tag = event.tag;

            if (tag == window.GameInfo.NetOnline) {
                self.netConnected = true;
            } else if (tag == window.GameInfo.NetOffline) {
                self.netConnected = false;
            }
        }
    }, this);
};

//建立链接
GameWebSocket.prototype.connectSocket = function (url) {
    cc.log("SocketManager.connectSocket, url = " + url);
    var self = this;

    GameSystem.getInstance().aesKey = AES.utils.utf8.toBytes(GameSystem.getInstance().defaultKey);
    this.m_socket = new WebSocket(url);
    this.m_socket.binaryType = "arraybuffer";

    //建立链接
    this.m_socket.onopen = function (event) {
        self.isSocketConnected = true;
        cc.log("SocketManager.connectSocket,socket connected");
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SOCKET_CONNECTED });
    };

    //失败 断开链接
    this.m_socket.onerror = function (event) {
        self.isSocketConnected = false;
        cc.warn("SocketManager.connectSocket,socket error");
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.MSG_NETWORK_FAILURE });
    };

    //链接断开
    this.m_socket.onclose = function (event) {
        self.isSocketConnected = false;
        cc.warn("SocketManager.connectSocket,socket disconnect");
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SOCKET_DISCONNECTED });
    };

    //接收服务器到消息
    this.m_socket.onmessage = function (event) {

        var decStr = AesDecode(event.data);
        cc.log("SocketManager.connectSocket ,socket rec message, data = ", decStr);
        var packet = JSON.parse(decStr);

        var cmd = packet.cmd;

        var message = MessageFactory.createMessageResp(cmd);

        if (message == undefined) {
            cc.warn("SocketManager.connectSocket , message = undefined");
            return;
        }
        //解析数据
        message.onMessage(packet);
        // //通知 有新消息到
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SOCKET_MESSAGE, data: message });
    };
};

//关闭链接
GameWebSocket.prototype.disconnect = function () {
    cc.log("SocketManager.connectSocket ");
    //检测是有连接
    if (this.m_socket && this.isConnected() && this.netConnected) {
        this.m_socket.close();
        this.m_socket = null;
        this.isSocketConnected = false;
    }
};

//发送消息
GameWebSocket.prototype.sendMessage = function (data) {
    cc.log("SocketManager.sendMessage ");
    if (!this.netConnected) {
        // ToastView.show("请检查网络") ;
        cc.warn("ocketManager.sendMessage,网络尚未连接 socket发送失败");
        return;
    }

    if (!this.isSocketConnected) {
        cc.warn("ocketManager.sendMessage,socket 尚未连接上");
        //ToastView.show("服务器连接失败") ;
        return;
    }

    if (this.m_socket == null) {
        cc.warn("ocketManager.sendMessage,没有创建socket");
        return;
    }

    if (this.m_socket.readyState === WebSocket.OPEN) {
        cc.log("SocketManager.sendMessage,cmd == 0x0%s", data.data.cmd.toString(16));
        var str = JSON.stringify(data.data);
        cc.log("SocketManager.sendMessage,str = %s", str.toString());
        var enc = AesEncode(str);
        this.m_socket.send(enc);
    } else {
        //ToastView.show("服务器连接失败") ;
        cc.warn("ocketManager.sendMessage,socket 状态关闭");
    }
};

function AesEncode(str) {
    var textBytes = AES.utils.utf8.toBytes(str);
    var aesOfb = new AES.ModeOfOperation.ofb(GameSystem.getInstance().aesKey, GameSystem.getInstance().iv);
    var encryptedBytes = aesOfb.encrypt(textBytes);
    return encryptedBytes;
}

function AesDecode(data) {
    // cc.log("AesDecode,aesKey = " + Array.from(GameSystem.getInstance().aesKey) + ",iv = " + GameSystem.getInstance().iv);
    var aesOfb = new AES.ModeOfOperation.ofb(GameSystem.getInstance().aesKey, GameSystem.getInstance().iv);
    // cc.log("AesDecode,data = " + data);
    // cc.log("AesDecode,bufferLength = " + data.byteLength);
    var text = new Uint8Array(data, 0, data.byteLength);
    // cc.log("AesDecode,text = " + text);
    var desc = aesOfb.decrypt(text);
    // cc.log("AesDecode,desc = " + desc);
    var str = AES.utils.utf8.fromBytes(desc);
    // cc.log("AesDecode,str = " + str);
    return str;
}

//是否连接
GameWebSocket.prototype.isConnected = function () {
    return this.isSocketConnected;
};

GameWebSocket.prototype.base64String = function (data) {
    return BASE64.encoder(data);
};

var SocketManager = function () {
    var instance;
    function getInstance() {
        if (instance === undefined) {
            instance = new GameWebSocket();
        }
        return instance;
    }

    return {
        getInstance: getInstance
    };
}();

module.exports = SocketManager;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageFactory":"MessageFactory","SocketData":"SocketData"}],"StartGameReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c7f59cPbf1BDZ096verEiKZ', 'StartGameReqPacket');
// Script\Network\Cmd\Cmd_Req\StartGameReqPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageReq = require("MessageReq");
/*
* //游戏开关
 const (
 E_STOP_GAME  = 0
 E_START_GAME = 1
 )

 type US_REQ_GAME_SWITCH_T struct {
 GameHead
 IsStart int `json:"isstart"` //1: start 0: stop
 }

* */
var GameSystem = require("GameSystem");

function StartGameReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_GAME_SWITCH_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid,
            gamesvcid: GameSystem.getInstance().gamesvcid,
            tableid: GameSystem.getInstance().tableid,
            isstart: msg.isstart
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = StartGameReqPacket;

cc._RFpop();
},{"GameSystem":"GameSystem","MessageReq":"MessageReq"}],"StartGameRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '38118+ym3JCjoZIcrN/yn/h', 'StartGameRespPacket');
// Script\Network\Cmd\Cmd_Resp\StartGameRespPacket.js

"use strict";

/**
 * Created by shrimp on 17/3/1.
 */
var MessageResp = require("MessageResp");

/*
* type US_RESP_GAME_SWITCH_T struct {
 JsonHead
 RespHead
 }
 */

function StartGameRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_GAME_SWITCH_CMD_ID;

    //接收的数据
    this.onMessage = function (msg) {

        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        this.isstart = msg.isstart;
    };
}

module.exports = StartGameRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"SuccessCell":[function(require,module,exports){
"use strict";
cc._RFpush(module, '6d0025UYOpBRqsI6OX7hIVO', 'SuccessCell');
// Script\ComScene\PopView\SuccessCell.js

'use strict';

var UtilTool = require('UtilTool');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");
cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        dayLabel: cc.Label,
        monthLabel: cc.Label,
        timeLabel: cc.Label,
        RoomName: cc.Label,
        UserName: cc.Label,
        CarryCoin: cc.Label,
        RoomTime: cc.Label,
        WinScore: cc.Label,
        Head: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.msg = null;
    },

    setCellInfo: function setCellInfo(msg) {

        this.msg = msg;
        var newDate = new Date();
        newDate.setTime(msg.createtime * 1000);

        this.dayLabel.string = newDate.getDate() + "日";
        this.monthLabel.string = newDate.getMonth() + 1 + "月";
        this.timeLabel.string = UtilTool.getTimeData(newDate.getHours()) + ":" + UtilTool.getTimeData(newDate.getMinutes());
        this.RoomName.string = msg.privateid + " (" + msg.tablename + ")";
        this.RoomName.fontSize = 40;
        this.UserName.string = msg.ownername;
        this.CarryCoin.string = "带入" + msg.carrycoin;
        if (msg.livetime < 1800) {
            this.RoomTime.string = msg.livetime / 60 + "分钟局";
        } else {
            this.RoomTime.string = msg.livetime / 3600 + "小时局";
        }
        UpdateWXHeadIcon(msg.headurl, this.Head);
        if (msg.wincoin > 0) {
            this.WinScore.string = "+" + msg.wincoin;
        } else if (msg.wincoin == 0) {
            this.WinScore.string = msg.wincoin;
            this.WinScore.node.color = new cc.Color(204, 160, 41, 255);
        } else {
            this.WinScore.string = msg.wincoin;
            this.WinScore.node.color = cc.Color.GREEN; //"#00FF00";
        }
    },

    callBackBtn: function callBackBtn(event, CustomEventData) {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
    }

});

cc._RFpop();
},{"Audio_Common":"Audio_Common","GameSystem":"GameSystem","MusicMgr":"MusicMgr","UtilTool":"UtilTool"}],"SuccessView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5afaawzjvdLRbkRiiuJ1taG', 'SuccessView');
// Script\ComScene\PopView\SuccessView.js

'use strict';

var BasePop = require('BasePop');
var MessageFactory = require('MessageFactory');
var MusicMgr = require('MusicMgr');
var Audio_Common = require('Audio_Common');
var GameSystem = require("GameSystem");

cc.Class({
    extends: BasePop,

    properties: {
        SuccessCell: cc.Prefab,
        scrollView: cc.ScrollView,
        RoomInfoView: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        var data = {
            iscreate: 0,
            start: 0,
            total: 50
        };
        MessageFactory.createMessageReq(window.US_REQ_SCORE_LIST_CMD_ID).send(data);
    },

    /*********************Network***************************/
    onMessage: function onMessage(event) {
        cc.log("SuccessView.onMessage");
        //this._super(event);
        var msg = event.data;
        var cmd = msg.cmd;
        switch (cmd) {
            case US_RESP_SCORE_LIST_CMD_ID:
                this.onScoreListMsg(msg);
                break;
        }
    },

    onScoreListMsg: function onScoreListMsg(msg) {
        if (msg.code == SocketRetCode.RET_SUCCESS) {
            var cellHeight = 0;
            for (var index = 0; msg.list != null && index < msg.list.length; index++) {
                var SuccessCell = cc.instantiate(this.SuccessCell);
                this.scrollView.content.addChild(SuccessCell);

                cellHeight = SuccessCell.getContentSize().height;

                SuccessCell.setPosition(cc.p(0, 0 - SuccessCell.getContentSize().height * (index + 0.5)));
                SuccessCell.getComponent("SuccessCell").setCellInfo(msg.list[index]);

                var self = this;
                SuccessCell.on(cc.Node.EventType.TOUCH_END, function (event) {
                    self.createSuccessCellView(event.target.getComponent("SuccessCell").msg);
                }.bind(this));
            }

            var childCount = this.scrollView.content.getChildrenCount() + 1;
            if (cellHeight * childCount > this.scrollView.content.height) {
                this.scrollView.content.height = cellHeight * childCount;
            }
        }
    },

    createSuccessCellView: function createSuccessCellView(msg) {
        var RoomInfoView = cc.instantiate(this.RoomInfoView);
        cc.director.getScene().addChild(RoomInfoView);
        var winSize = cc.director.getWinSize();
        RoomInfoView.setPosition(cc.p(winSize.width / 2, winSize.height / 2));
        RoomInfoView.getComponent('RoomInfoView').sendGetSuccessDetail(msg);
    },

    callbackBtn: function callbackBtn(event, CustomEventData) {
        var btnName = event.target.getName();
        cc.log("SuccessView.callbackBtn,btnName = " + btnName);
        var winSize = cc.director.getWinSize();
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        if (btnName == "BtnClose") {
            this.dismiss();
        }
    },

    callbackToggle: function callbackToggle(toggle, CustomEventData) {
        MusicMgr.playEffect(Audio_Common.AUDIO_BTN_CLICK);
        this.scrollView.content.removeAllChildren(true);
        var data = {
            iscreate: Number(CustomEventData),
            start: 0,
            total: 20
        };
        MessageFactory.createMessageReq(window.US_REQ_SCORE_LIST_CMD_ID).send(data);
    }
});

cc._RFpop();
},{"Audio_Common":"Audio_Common","BasePop":"BasePop","GameSystem":"GameSystem","MessageFactory":"MessageFactory","MusicMgr":"MusicMgr"}],"ToastView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd9defR5Fr9O373EPbDY37YE', 'ToastView');
// Script\ComScene\PopView\ToastView.js

"use strict";

var Tview = cc.Class({
    extends: cc.Component,

    properties: {
        tipText: null,
        viewNode: null
    },

    show: function show(tips, delayTime) {

        if (tips == "") {
            return;
        }
        var self = this;

        window.loadPrefabs("prefabs/toastView", function (newNode) {
            self.updateView(newNode, tips, delayTime);
        });
    },

    updateView: function updateView(newNode, tips, delayTime) {
        var self = this;
        if (delayTime === undefined) {
            delayTime = 1;
        }
        this.viewNode = newNode;

        this.tipText = cc.find("txt", newNode).getComponent(cc.Label);
        var bg = cc.find("bg", newNode);
        var lableText = cc.find("txt", newNode);
        this.tipText.string = tips;

        var width = lableText.width + 40 < bg.width ? bg.width : lableText.width + 40;

        var height = lableText.height + 30 < bg.height ? bg.height : lableText.height + 30;

        // newNode.scaleX = width/bg.width;
        // newNode.scaleY = height/bg.height;
        bg.setContentSize(width, height);
        // bg.width = width;
        // bg.height = height ;

        var fadeIn = cc.fadeIn(0.5);
        var delay = cc.delayTime(delayTime);
        var fadeOut = cc.fadeOut(0.5);

        var actionall = cc.sequence(fadeIn, delay, fadeOut, cc.callFunc(this.dismiss, this));
        this.viewNode.runAction(actionall);

        window.scaleTo(newNode);
    },

    setTips: function setTips(tips) {
        if (this.tipText != undefined) {
            this.tipText.string = tips;
        }
    },

    dismiss: function dismiss() {
        if (this.viewNode != null) {
            this.viewNode.removeFromParent(true);
            this.viewNode = null;
        }
    },

    removeFromParent: function removeFromParent(flag) {
        this.dismiss();
    }

});

var ToastView = {

    show: function show(tips, delayTime) {
        this.view = new Tview();
        this.view.show(tips, delayTime);
        return this.view;
    }

};

module.exports = ToastView;

cc._RFpop();
},{}],"UIUtil":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5b7a0limodM4ovWaZtavlWs', 'UIUtil');
// Script\Comm\Util\UIUtil.js

"use strict";

var GameSystem = require('GameSystem');

//内容缩放
window.scaleTo = function (node, flag) {
    node.setScale(0.6);
    var scaleT0 = null;

    scaleT0 = cc.scaleTo(0.2, 1.0).easing(cc.easeBackOut());
    // if(flag || 1){
    //     scaleT0 =  cc.scaleTo(0.2,1.0).easing(cc.easeBackOut()) ;
    // }else{
    //     scaleT0 =  cc.scaleTo(0.2,0.8).easing(cc.easeBackOut()) ;
    // }
    node.runAction(scaleT0);
};

window.moveViewIn = function (node, flag) {

    node.setPosition(cc.p(0, -540));

    var moveto = cc.moveTo(0.2, cc.p(0, 0)); //.easing(cc.easeBackOut()) ;

    node.runAction(moveto);
};

//加载本地预制体
var prefabsMaps = new Map();
window.loadPrefabs = function (resPath, callback, parent) {
    parent = parent === undefined ? 1 : parent;
    //预防同个节点重复加载
    var hasLoad = prefabsMaps.containsKey(resPath);
    // cc.warn("hasLoad = %s" ,hasLoad) ;

    if (hasLoad) {
        if (prefabsMaps.get(resPath).p == parent) {
            cc.log("%s,已经加载中", resPath);
            return;
        }
    }

    prefabsMaps.set(resPath, { p: parent });
    cc.loader.loadRes(resPath, function (err, prefab) {
        prefabsMaps.delete(resPath);
        if (err) {
            cc.error(resPath + " 加载失败");
            // callback(null);
            return;
        }

        var view = cc.instantiate(prefab);
        if (parent != 1) {
            parent.addChild(view);
        } else {
            cc.director.getScene().addChild(view);
        }

        if (callback) {
            callback(view);
        }
    });
};

//加载本地图片
window.loadImg = function (resPath, callBack, sprteType) {
    var type = sprteType === undefined ? cc.SpriteFrame : sprteType;

    cc.loader.loadRes(resPath, type, function (err, spriteFrame) {

        if (err) {
            cc.error("-------------------------------------" + resPath + " 资源加载失败-----------------------");
            return;
        }
        if (callBack) {
            callBack(spriteFrame);
        }
    });
};

//检测数字和数字
window.CheckPerChar = function (cell) {
    if (cell >= 48 && cell <= 57 || // 数字
    cell >= 64 && cell <= 90 // 大写
    || cell >= 97 && cell <= 122 || cell == '_') {
        return true;
    } else {
        return false;
    }
};

window.C1 = 85742;
window.C2 = 76343;
window.KEY = 3965;

//检测密码是否合法
window.CheckAccPwd = function (strPwd) {
    for (var i = 0; i < strPwd.length; i++) {
        var c = strPwd[i].charCodeAt();
        if (!CheckPerChar(c)) {
            return false;
        }
    }
    return true;
};

//账号本地存储加密字符串
window.Encrypt = function (S, Key) {

    var newStr = "";
    for (var i = 0; i < S.length; i++) {
        var str = S.charCodeAt(i);
        str = str ^ Key >> 8;
        str = String.fromCharCode(str);

        // Key = (str.charCodeAt(0)+Key)*C1+C2;

        newStr = newStr + str;
    }

    S = newStr;
    newStr = "";
    for (i = 0; i < S.length; i++) {
        var j = S.charCodeAt(i);
        str = "12";
        var str1 = 65 + Math.floor(j / 26);
        var str2 = 65 + j % 26;
        newStr = newStr + String.fromCharCode(str1) + String.fromCharCode(str2);
    }
    return newStr;
};

//读取本地存储账号解密字符串
window.Decrypt = function (S, Key) {

    var Result = "";
    for (var i = 0; i < S.length / 2; i++) {
        var j = (S.charCodeAt(i * 2) - 65) * 26;
        j += S.charCodeAt(i * 2 + 1) - 65;
        var str = String.fromCharCode(j);
        Result += str;
    }

    S = Result;
    var newStr = "";
    for (i = 0; i < S.length; i++) {
        var str = S.charCodeAt(i);
        str = str ^ Key >> 8;
        str = String.fromCharCode(str);

        // Key = (str.charCodeAt(0)+Key)*C1+C2;

        newStr = newStr + str;
    }

    return newStr;
};

//更新头像
window.UpdateHeadIcon = function (sprIcon, player) {
    var tag = player.iconID;
    if (tag == 0) {
        var isMan = player.sex == 1;
        var icon = isMan ? "hall/userCenterView/headIcon/user_headicon3" : "hall/userCenterView/headIcon/user_headicon0";
        window.loadImg(icon, function (spriteframe) {
            sprIcon.spriteFrame = spriteframe;
        });
    } else if (tag > 0 && tag <= 6) {
        var icon = "hall/userCenterView/headIcon/user_headicon%d";
        icon = icon.replace(/%d/, tag - 1);
        window.loadImg(icon, function (spriteframe) {
            sprIcon.spriteFrame = spriteframe;
        });
    } else {
        // 网络下载
        // std::string headtag = String::createWithFormat("headIcon%d",p->uid)->getCString();
        // HttpManager::getInstance()->sendDownLoadImage(headtag,p->headUrl);
    }
};

window.UpdateWXHeadIcon = function (url, node) {
    if (url == "" || url == " ") return;
    cc.loader.load(url, function (error, texture) {
        cc.log('UpdateWXHeadIcon,error = ' + error);
        cc.log('UpdateWXHeadIcon,texture = ' + texture);
        var spriteFrame = new cc.SpriteFrame(texture);
        node.spriteFrame = spriteFrame;
    });
};

/**
 * 实例对象必须挂载在脚本上
 * @param path
 */
window.playAniOnce = function (path, parent) {
    var view = cc.instantiate(path);
    if (parent) {
        parent.addChild(view);
    } else {
        cc.director.getScene().addChild(view);
    }
    return view;
};

/**
 * 获取字符串长度
 * @param path
 */
window.getDisplayStringLenth = function (strNickName) {
    if (strNickName == undefined || strNickName == "") return 0;

    var unSize = 0;
    for (var i = 0; i < strNickName.length;) {
        if (strNickName[i] < 0) {
            i += 3;
            unSize += 2;
        } else {
            i += 1;
            ++unSize;
        }
    }
    return unSize;
};

window.assert = function (flag) {
    if (!flag) {
        cc.error("!!!!!!!!!!!!!! assert error！！！！！！！！！！！");
    }
};

window.FindNode = function (node, path) {
    return cc.find(path, node);
};

window.splitString = function (msg, fontSize, maxWidth) {
    var arrayString = [];
    var stringLength = msg.length;
    var arrayCount = 0;
    var endIndex = 0;
    var startIndex = 0;
    var curString = "";

    // let arrayIndex = 0 ;
    for (var i = 0; i < stringLength; i++) {

        var curWidth = arrayCount * fontSize;

        if (curWidth + fontSize > maxWidth) {
            endIndex = i;
            curString = msg.slice(startIndex, endIndex);
            startIndex = endIndex;
            arrayCount = 0;
            arrayString.push(curString);
        } else if (i == stringLength - 1) {
            endIndex = i + 1;
            curString = msg.slice(startIndex, endIndex);
            arrayString.push(curString);
            arrayCount = 0;
        }

        arrayCount++;
    }

    return arrayString;
};

window.ReadMoney = function (num) {
    var strNum = num + "";
    var arrStr = [];
    var index = 0;
    for (var i = strNum.length - 1; i >= 0; i--) {
        index++;
        arrStr.push(strNum.charAt(i));
        if (index == 3 && i != 0) {
            arrStr.push(",");
            index = 0;
        }
    }
    var newString = "";
    for (var _i = arrStr.length - 1; _i >= 0; _i--) {
        newString += arrStr[_i];
    }

    return newString;
};

window.GetGameName = function (gamemode) {
    if (gamemode == window.ServerType.E_SIX_BULLFIGHT_TYPE) {
        return "六人斗牛";
    }
    return "游戏";
};

window.GetGameType = function (gametype) {
    if (gametype == 1) {
        return "闭牌抢庄";
    } else if (gametype == 2) {
        return "3张抢庄";
    }
    return "";
};

cc._RFpop();
},{"GameSystem":"GameSystem"}],"UserDetailReqPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '53ca8g0TEJEkpxXxGdZoBSq', 'UserDetailReqPacket');
// Script\Network\Cmd\Cmd_Req\UserDetailReqPacket.js

"use strict";

var MessageReq = require("MessageReq");

function UserDetailReqPacket() {
    MessageReq.apply(this, []); //集成父类数据

    this.cmd = window.US_REQ_USER_DETAIL_CMD_ID;

    //准备发送的数据
    this.send = function (msg) {

        this.data = {
            cmd: this.cmd,
            seq: this.seq,
            uid: this.uid
        };

        GlobalEventManager.getInstance().emitEvent(window.SOCKETT_SENDMESSAGE, this);
    };
}

module.exports = UserDetailReqPacket;

cc._RFpop();
},{"MessageReq":"MessageReq"}],"UserDetailRespPacket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '52426rNPl9Mfp/yTBlk3rbz', 'UserDetailRespPacket');
// Script\Network\Cmd\Cmd_Resp\UserDetailRespPacket.js

"use strict";

var MessageResp = require("MessageResp");

function UserDetailRespPacket() {
    MessageResp.apply(this, []); //集成父类数据

    this.cmd = window.US_RESP_USER_DETAIL_CMD_ID;
    this.gold = 0;
    this.diamond = 0;
    this.playcount = 0;
    this.wincount = 0;
    this.losecount = 0;
    this.tablecount = 0;

    this.onMessage = function (msg) {
        this.seq = msg.seq;
        this.uid = msg.uid;
        this.code = msg.code;
        this.desc = msg.desc;
        if (this.code < SocketRetCode.RET_SUCCESS) return;

        this.gold = msg.gold;
        this.diamond = msg.diamond;
        this.playcount = msg.playcount;
        this.wincount = msg.wincount;
        this.losecount = msg.losecount;
        this.tablecount = msg.tablecount;
    };
}

module.exports = UserDetailRespPacket;

cc._RFpop();
},{"MessageResp":"MessageResp"}],"UtilTool":[function(require,module,exports){
"use strict";
cc._RFpush(module, '08e2d2dTH1Pwq0x7Yaotm5g', 'UtilTool');
// Script\Comm\Util\UtilTool.js

"use strict";

/**
 * Created by shrimp on 17/2/23.
 */

var UtilTool = {
    //获取系统时间
    getNowFormatDate: function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var seperator2 = ":";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate + " " + date.getHours() + seperator2 + date.getMinutes() + seperator2 + date.getSeconds();

        var temp = date.getHours() + seperator2 + date.getMinutes() + seperator2 + date.getSeconds();

        cc.log("UtilTool.getNowFormatDate,date = " + temp + " " + currentdate);
        return currentdate;
    },

    getFormatData: function getFormatData(time) {
        var newDate = new Date();
        newDate.setTime(time * 1000);
        return newDate.getFullYear() + "-" + (newDate.getMonth() + 1) + "-" + newDate.getDate();
    },

    getFormatDataDetail: function getFormatDataDetail(time) {
        var newDate = new Date();
        newDate.setTime(time * 1000);
        return newDate.getFullYear() + "/" + (newDate.getMonth() + 1) + "/" + newDate.getDate() + "  " + this.getTimeData(newDate.getHours()) + ":" + this.getTimeData(newDate.getMinutes()) + ":" + this.getTimeData(newDate.getSeconds());
    },

    //保留两位有效数字
    getTimeData: function getTimeData(time) {
        return (Array(2).join(0) + time).slice(-2);
    },

    captureScreen: function captureScreen(picName, canvas, func) {
        cc.log("UtilTool.screenShot");
        if (!cc.sys.isNative) return;
        var dirpath = jsb.fileUtils.getWritablePath() + 'ScreenShoot/';
        if (!jsb.fileUtils.isDirectoryExist(dirpath)) {
            jsb.fileUtils.createDirectory(dirpath);
        }
        var name = 'ScreenShoot-' + new Date().valueOf() + '.png';
        var filepath = dirpath + picName;
        var size = cc.winSize;
        var rt = cc.RenderTexture.create(size.width, size.height);
        //cc.director.getScene()._sgNode.addChild(rt);
        //rt.setVisible(false);
        rt.begin();
        cc.director.getScene()._sgNode.visit();
        rt.end();

        rt.saveToFile('ScreenShoot/' + picName, cc.IMAGE_FORMAT_PNG, true, function () {
            cc.log('save succ');
            //rt.removeFromParent();
            if (func) {
                func(filepath);
            }
        });
        cc.log("filepath = " + filepath);
    },

    /**
    * 图片压缩，默认同比例压缩
    * @param {Object} path
    *   pc端传入的路径可以为相对路径，但是在移动端上必须传入的路径是照相图片储存的绝对路径
    * @param {Object} obj
    *   obj 对象 有 width， height， quality(0-1)
    * @param {Object} callback
    *   回调函数有一个参数，base64的字符串数据
    */
    dealImage: function dealImage(path, obj, callback) {
        var img = new Image();
        img.src = path;
        img.onload = function () {
            var that = this;
            // 默认按比例压缩
            var w = that.width,
                h = that.height,
                scale = w / h;
            w = obj.width || w;
            h = obj.height || w / scale;
            var quality = 0.7; // 默认图片质量为0.7
            //生成canvas
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            // 创建属性节点
            var anw = document.createAttribute("width");
            anw.nodeValue = w;
            var anh = document.createAttribute("height");
            anh.nodeValue = h;
            canvas.setAttributeNode(anw);
            canvas.setAttributeNode(anh);
            ctx.drawImage(that, 0, 0, w, h);
            // 图像质量
            if (obj.quality && obj.quality <= 1 && obj.quality > 0) {
                quality = obj.quality;
            }
            cc.log("quality = ", quality);
            // quality值越小，所绘制出的图像越模糊
            var base64 = canvas.toDataURL('image/png', quality);
            // 回调函数返回base64的值
            callback(base64);
        };

        //img.saveToFile("a.png",true);
    },

    getTime: function getTime(time) {
        var hour = parseInt(time / 60 / 60);
        var min = parseInt((time - 3600 * hour) / 60);
        var second = time - 3600 * hour - 60 * min;

        return this.getTimeData(hour) + ":" + this.getTimeData(min) + ":" + this.getTimeData(second);
    },

    getHourTime: function getHourTime(time) {
        if (time < 1800) {
            var time = parseFloat(time / 60);
            return time + "min";
        }
        var hour = parseFloat(time / 60 / 60);
        return hour + "h";
    },
    getClubLevelName: function getClubLevelName(level) {
        switch (level) {
            case 1:
                return "一星俱乐部";
            case 2:
                return "二星俱乐部";
            case 3:
                return "三星俱乐部";
            case 4:
                return "四星俱乐部";
            case 5:
                return "五星俱乐部";
            case 6:
                return "六星俱乐部";
            case 7:
                return "七星俱乐部";
            case 8:
                return "八星俱乐部";
            case 9:
                return "九星俱乐部";
            case 10:
                return "十星俱乐部";
        }
    }
};

module.exports = UtilTool;

cc._RFpop();
},{}],"VoicePlayView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '41f62BbEZ1MM71qqAil02JO', 'VoicePlayView');
// Script\ComScene\PopView\VoicePlayView.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        Time: cc.Label,
        VoiceValue: cc.Sprite,
        VoiceValueFrame: [cc.SpriteFrame]
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.time = 0;
        this.setTime(0);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    setTime: function setTime(time) {
        this.time = time;
        this.schedule(this.updateTime, 1);
    },

    updateTime: function updateTime() {
        this.time++;
        if (this.time < 0) {
            this.unschedule(this.updateTime);
            this.dismiss();
        }
        this.Time.string = this.time + '"';
        this.updateVoiceValue();

        if (this.time > 30) {
            this.dismiss();
        }
    },

    updateVoiceValue: function updateVoiceValue() {
        this.VoiceValue.spriteFrame = this.VoiceValueFrame[this.time % 3];
    },

    dismiss: function dismiss() {
        var message = {
            popView: "VoicePlayView",
            btn: "dismiss"
        };
        GlobalEventManager.getInstance().emitEvent(window.SocketMessage, { tag: window.MessageType.SCENE_MSG, data: message });
        this.unschedule(this.updateTime);
        this.node.removeFromParent(true);
    }
});

cc._RFpop();
},{}],"VoiceView":[function(require,module,exports){
"use strict";
cc._RFpush(module, '77b75DJxXFIcqVKxns6L0FR', 'VoiceView');
// Script\ComScene\PopView\VoiceView.js

'use strict';

var GameCallOC = require('GameCallOC');

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        Time: cc.Label,
        VoiceValue: [cc.Sprite]
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.time = 30;
        this.startVoiceTime();
        GameCallOC.getInstance().StartRecord(30000);
    },

    startVoiceTime: function startVoiceTime() {
        this.schedule(this.updateVoiceTime, 1);
    },

    updateVoiceTime: function updateVoiceTime() {
        this.time--;
        this.Time.string = this.time + '"';
        this.updateVoiceValue();
        if (this.time == 0) {
            this.dismiss();
        }
    },

    setVoiceValue: function setVoiceValue(value) {
        for (var index = 0; index < 3; index++) {
            this.VoiceValue[index].node.active = index < value;
        }
    },

    updateVoiceValue: function updateVoiceValue() {
        for (var index = 0; index < 3; index++) {
            this.VoiceValue[index].node.active = index <= this.time % 3;
        }
    },

    dismiss: function dismiss() {
        cc.log("dismiss");
        GameCallOC.getInstance().StopRecording();
        this.unschedule(this.updateVoiceTime);
        this.node.removeFromParent(true);
    }
});

cc._RFpop();
},{"GameCallOC":"GameCallOC"}],"WeChatApi":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7a53c5YqUpKcoIRJV2NF/q2', 'WeChatApi');
// Script\Platform\WeChatApi.js

'use strict';

/**
 * Created by lixiaofei on 17/3/12.
 */
var GameCallOC = require('GameCallOC');
var LoadingView = require('LoadingView');
var HttpManager = require('HttpManager');
var Platform = require('Platform');
var GamePlayer = require('GamePlayer');
var SocketManager = require('SocketManager');

function wxApi() {}

wxApi.prototype.sendWeChatLogin = function () {
	cc.log("wxApi.prototype.sendTextContent ");
	if (cc.sys.platform == cc.sys.ANDROID) {
		SocialUtils.loginWeixin();
	} else {
		if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
			var ret = jsb.reflection.callStaticMethod("LocalInfo", "sendWeChatLogin");
			cc.log("ret:%s", ret);
			return ret;
		}
	}
};

wxApi.prototype.sendTextContent = function (type, string, url) {
	cc.log("wxApi.prototype.sendTextContent ");
	if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
		var ret = jsb.reflection.callStaticMethod("LocalInfo", "sendTextContent:desc:url:", type, string, url);
		cc.log("ret:%s", ret);
		return ret;
	}
};

wxApi.prototype.sendImageContent = function (type, string, url) {
	cc.log("wxApi.prototype.sendImageContent ");
	if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
		var ret = jsb.reflection.callStaticMethod("LocalInfo", "sendImageContent:desc:url:", type, string, url);
		cc.log("ret:%s", ret);
		return ret;
	}
};

wxApi.prototype.sendLinkContent = function (type, string, url) {
	cc.log("wxApi.prototype.sendLinkContent " + type + "," + string + "," + url);
	if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
		var ret = jsb.reflection.callStaticMethod("LocalInfo", "sendLinkContent:desc:url:", type, string, url);
		cc.log("ret:%s", ret);
		return ret;
	}
};

wxApi.prototype.sendAppContent = function (type, string, url) {
	cc.log("wxApi.prototype.sendAppContent " + type + "," + string + "," + url);
	if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
		var ret = jsb.reflection.callStaticMethod("LocalInfo", "sendAppContent:desc:url:", type, string, url);
		cc.log("ret:%s", ret);
		return ret;
	}
};

wxApi.prototype.clearWeChatLogin = function () {
	cc.log("wxApi.prototype.clearWeChatLogin ");
	if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
		var ret = jsb.reflection.callStaticMethod("LocalInfo", "clearWeChatLogin");
		cc.log("ret:%s", ret);
		return ret;
	}
};

wxApi.prototype.weChatPay = function (goodid, openid) {
	cc.log("wxApi.prototype.weChatPay, goodid=" + goodid + ", openid=" + openid);
	if (cc.sys.platform == cc.sys.ANDROID) {
		WeChatApi.getInstance().weChatPayForAndroid(goodid, openid);
	} else {
		if (cc.sys.isNative && GameCallOC.getInstance().checkIsAble()) {
			var ret = jsb.reflection.callStaticMethod("LocalInfo", "weChatPay:openid:", goodid, openid);
			cc.log("ret:%s", ret);
			return ret;
		}
	}
};

wxApi.prototype.weChatPayForAndroid = function (goodid, uid) {
	cc.log("weChatPayForAndroid, gooid=" + goodid + ', uid=' + uid);
	var url = "http://manage.aqddp.cn/wxpay/example/pay.php?good_id=" + goodid + "&openid=" + uid;
	var xhr = cc.loader.getXMLHttpRequest();
	xhr.open("GET", url, true);
	xhr.onreadystatechange = function () {
		if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status <= 207) {
			var data = JSON.parse(xhr.responseText);
			if (data["code"] == 0) {
				var order_num = data['order']['order_num'];
				var appid = data['order']['appid'];
				var partnerId = data['order']['orderinfo']['partnerId'];
				var prepayId = data['order']['orderinfo']['prepayId'];
				var nonceStr = data['order']['orderinfo']['nonceStr'];
				var timeStamp = data['order']['orderinfo']['timeStamp'];
				var sign = data['order']['orderinfo']['sign'];
				//var packageName = data['order']['orderinfo']['package'];

				cc.log("appid=" + appid);
				cc.log("partnerId=" + partnerId);
				cc.log("prepayId=" + prepayId);
				cc.log("nonceStr=" + nonceStr);
				cc.log("timeStamp=" + timeStamp);
				cc.log("sign=" + sign);

				SocialUtils.payWeixin(partnerId, prepayId, nonceStr, timeStamp, sign);
			} else {
				cc.error("error code=" + data["code"]);
			}
		} else {
			console.log("error readyState=" + xhr.readyState);
		}
	}.bind(this);
	xhr.ontimeout = function (e) {
		console.log("timeout");
	};
	xhr.onerror = function () {
		console.log("error");
	};
	xhr.send();
};

wxApi.prototype.wxLoginSuccess = function (openid, unionid, name, headimgurl, sex) {
	GamePlayer.getInstance().unionid = unionid;
	GamePlayer.getInstance().openid = openid;
	GamePlayer.getInstance().name = name;
	GamePlayer.getInstance().headurl = headimgurl + ".png";
	GamePlayer.getInstance().sex = Number(sex);
	//GameCallOC.getInstance().SetAppInfo(unionid);
	SocketManager.getInstance().startSocket();
};

wxApi.prototype.wxGetCode = function (success, code) {
	cc.log("onGetCode, success=" + success + ", code=" + code);
	var url = "https://api.weixin.qq.com/sns/oauth2/access_token?appid=wxd0d94b9ff6c2894d&secret=6a3b706a62833ae8c46158c01e2ee0db&code=" + code + "&grant_type=authorization_code";
	var xhr = cc.loader.getXMLHttpRequest();
	xhr.open("GET", url, true);
	xhr.onreadystatechange = function () {
		if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status <= 207) {
			console.log("xhr.responseText=" + xhr.responseText);

			var data = JSON.parse(xhr.responseText);

			var access_token = data['access_token'];
			var openid = data['openid'];
			var unionid = data['unionid'];

			cc.log("access_token=" + access_token);
			cc.log("openid=" + openid);
			cc.log("unionid=" + unionid);

			var info_url = "https://api.weixin.qq.com/sns/userinfo?access_token=" + access_token + "&openid=" + openid;
			var xhr2 = cc.loader.getXMLHttpRequest();
			xhr2.open("GET", info_url, true);
			xhr2.onreadystatechange = function () {
				if (xhr2.readyState == 4 && xhr2.status >= 200 && xhr2.status <= 207) {
					cc.log("xhr2.responseText=" + xhr2.responseText);
					var data2 = JSON.parse(xhr2.responseText);
					//todo. 做提示
					if (data2["nickname"] == undefined || data2['headimgurl'] == undefined) {
						cc.error("error");
						return;
					}
					WeChatApi.getInstance().wxLoginSuccess(openid, unionid, data2['nickname'], data2['headimgurl'], data2['sex']);
				} else {}
			}.bind(this);
			xhr2.ontimeout = function (e) {
				console.log("timeout");
			};
			xhr2.onerror = function () {
				console.log("error");
			};
			xhr2.send();
		} else {
			console.log("error readyState=" + xhr.readyState);
		}
	}.bind(this);
	xhr.ontimeout = function (e) {
		console.log("timeout");
	};
	xhr.onerror = function () {
		console.log("error");
	};
	xhr.send();
};

//开始进行微信支付
wxApi.prototype.onWXPay = function () {
	cc.log("onWXPay");
};

//微信支付回调
wxApi.prototype.onWXPayResponse = function (code) {
	cc.log("onWXPayResponse, code=" + code);
};

var WeChatApi = function () {
	var instance;

	function getInstance() {
		if (instance === undefined) {
			instance = new wxApi();
		}
		return instance;
	};

	return {
		getInstance: getInstance
	};
}();

module.exports = WeChatApi;

cc._RFpop();
},{"GameCallOC":"GameCallOC","GamePlayer":"GamePlayer","HttpManager":"HttpManager","LoadingView":"LoadingView","Platform":"Platform","SocketManager":"SocketManager"}],"WebView":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e5799CE3pNGi5mV/ycf1TE0', 'WebView');
// Script\ComScene\PopView\WebView.js

"use strict";

var BasePop = require('BasePop');
cc.Class({
    extends: BasePop,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
        WebView: cc.WebView
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this.LeftInTo(this.node);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    calllbackBtn: function calllbackBtn(event, CustonEventData) {
        var BtnName = event.target.getName();
        if (BtnName == "BtnClose") {
            this.dismiss();
        }
    },

    setWebViewUrl: function setWebViewUrl(url) {
        this.WebView.url = url;
    }
});

cc._RFpop();
},{"BasePop":"BasePop"}]},{},["BaseView","AdvertItem","AlertView","BasePop","ChineseCity","ClubAddView","ClubAreaCell","ClubAreaView","ClubCell","ClubCreateView","ClubFindPopView","ClubInfoView","ClubJoinView","ClubLevelCell","ClubLevelView","ClubMemberPermissionView","ClubMemberView","ClubPersonsCell","ClubPersonsView","ClubRoomView","ClubSetView","ClubUpgradView","ClubView","CusWebView","FindView","GamblingHouseCell","LoadingView","MessageCell","MessageCellDetailView","MessageDetailView","MessageView","MineView","NetMsg","NoticeView","PickerAddressView","PlayScore","ProduceCell","ReferralCodeView","RollMsg","RoomInfoView","RuleView","ServiceView","SettingView","ShareView","ShopView","SitReqCell","SuccessCell","SuccessView","ToastView","VoicePlayView","VoiceView","WebView","BaseScene","HallScene","LoadingScene","Audio_Common","ButtonScaler","GameSystem","Poker","ProgressSlider","UIUtil","UtilTool","Bullfight_BetCoinReqPacket","Bullfight_CallBankerReqPacket","Bullfight_GetPlayersListReqPacket","Bullfight_HelpReqPacket","Bullfight_OpenCardReqPacket","Bullfight_ReadyReqPacket","Bullfight_TableDetailReqPacket","Bullfight_BetCoinRespPacket","Bullfight_CallBankerRespPacket","Bullfight_GetPlayersListRespPacket","Bullfight_HelpRespPacket","Bullfight_NotifyGameOverOncePacket","Bullfight_NotifyGameOverTotalPacket","Bullfight_NotifyGameStartPacket","Bullfight_NotifyKickOutPacket","Bullfight_NotifyNotBetPacket","Bullfight_NotifyNotCallBankerPacket","Bullfight_NotifyOpenCardPacket","Bullfight_NotifySureBankerPacket","Bullfight_OpenCardRespPacket","Bullfight_ReadyRespPacket","Bullfight_TableDetailRespPacket","Cmd_Bullfight","MessageFactory_Bullfight","Bullfight_AudioConfig","Bullfight_CardType","Bullfighgt_Menu","Bullfight_CarryView","Bullfight_CreateRoom","Bullfight_ExpressionView","Bullfight_MultCell","Bullfight_OwnerView","Bullfight_PlayerCell","Bullfight_Playerlist","Bullfight_RoomInfo","Bullfight_RuleView","Bullfight_TotalResult","Bullfight_TotalResultCell","Bullfight_Tourist","Bullfight_UserInfo","Bullfight_CardItem","Bullfight_CardLayout","Bullfight_Clock","Bullfight_CostomCardType","Bullfight_GameScene","Bullfight_GiftAnimation","Bullfight_PlayerItem","AssetsDownload","AssetsManager","GameConfig","HotUpdateManager","HttpRequest","MusicMgr","GamePlayer","GlobalEventManager","Player","BannerListReqPacket","BindReferralReqPacket","CarryCoinReqPacket","ChatReqPacket","ClubCreateRoomReqPacket","ClubDelMemberReqPacket","ClubOwnerConfirmReqPacket","ClubOwnerModifyRoleReqPacket","ClubUpgradeCostReqPacket","CreateClubReqPacket","CreateRoomReqPacket","CreateTableCostReqPacket","DismissClubReqPacket","DismissGameReqPacket","EnterRoomReqPacket","ExchangeGoldReqPacket","FindReqPacket","FindRoomReqPacket","GetClubListReqPacket","GetClubTableReqPacket","GetMemberListReqPacket","GetMsgListReqPacket","GetMsgNumReqPacket","HeartReqPacket","JoinClubReqPacket","LeaveGameReqPacket","LoginReqPacket","ModifyClubInfoReqPacket","MsgReadReqPacket","OwnerConfirmReqPacket","OwnerKickOutPlayerReqPacket","ScoreDetailReqPacket","ScoreListReqPacket","SearchClubReqPacket","ShopConfReqPacket","SitDownReqPacket","StartGameReqPacket","UserDetailReqPacket","BannerListRespPacket","BindReferralRespPacket","CarryCoinRespPacket","ChatRespPacket","ClubCreateRoomRespPacket","ClubDelMemberRespPacket","ClubOwnerConfirmRespPacket","ClubOwnerModifyRoleRespPacket","ClubUpgradeCostRespPacket","CreateClubRespPacket","CreateRoomRespPacket","CreateTableCostRespPacket","DismissClubRespPacket","DismissGameRespPacket","EnterRoomRespPacket","ExchangeGoldRespPacket","FindRespPacket","FindRoomRespPacket","GetClubListRespPacket","GetClubTableRespPacket","GetMemberListRespPacket","GetMsgListRespPacket","GetMsgNumRespPacket","HeartRespPacket","JoinClubRespPacket","LeaveGameRespPacket","LoginRespPacket","ModifyClubInfoRespPacket","MsgReadRespPacket","NotifyClubOwnerConfirmPacket","NotifyDismissGame","NotifyGameStartPacket","NotifyInGameRespPacket","NotifyOwnerOverPacket","NotifyOwnerSitPacket","NotifyPayOperatePacket","OwnerConfirmRespPacket","OwnerKickOutPlayerRespPacket","ScoreDetailRespPacket","ScoreListRespPacket","SearchClubRespPacket","ServerKickOutPacket","ShopConfRespPacket","SitDownRespPacket","StartGameRespPacket","UserDetailRespPacket","Cmd_Common","MessageFactory_Common","HttpConfig","HttpManager","HttpPacket","MessageFactory","Message","MessageReq","MessageResp","SocketConfig","SocketData","SocketManager","GVoiceJsb","GameCallOC","Platform","WeChatApi"])

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9BZHZlcnRJdGVtLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0FsZXJ0Vmlldy5qcyIsImFzc2V0cy9TY3JpcHQvSG90dXBkYXRlL0Fzc2V0c0Rvd25sb2FkLmpzIiwiYXNzZXRzL1NjcmlwdC9Ib3R1cGRhdGUvQXNzZXRzTWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbS9BdWRpb19Db21tb24uanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvQmFubmVyTGlzdFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvQmFubmVyTGlzdFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQmFzZVBvcC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvU2NlbmVWaWV3L0Jhc2VTY2VuZS5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvQmFzZVZpZXcuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvQmluZFJlZmVycmFsUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9CaW5kUmVmZXJyYWxSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2hndF9NZW51LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NvbW1vbi9CdWxsZmlnaHRfQXVkaW9Db25maWcuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXEvQnVsbGZpZ2h0X0JldENvaW5SZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXNwL0J1bGxmaWdodF9CZXRDb2luUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1JlcS9CdWxsZmlnaHRfQ2FsbEJhbmtlclJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X0NhbGxCYW5rZXJSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1NjZW5lVmlldy9CdWxsZmlnaHRfQ2FyZEl0ZW0uanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvU2NlbmVWaWV3L0J1bGxmaWdodF9DYXJkTGF5b3V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NvbW1vbi9CdWxsZmlnaHRfQ2FyZFR5cGUuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvUG9wVmlldy9CdWxsZmlnaHRfQ2FycnlWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1NjZW5lVmlldy9CdWxsZmlnaHRfQ2xvY2suanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvU2NlbmVWaWV3L0J1bGxmaWdodF9Db3N0b21DYXJkVHlwZS5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9Qb3BWaWV3L0J1bGxmaWdodF9DcmVhdGVSb29tLmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2h0X0V4cHJlc3Npb25WaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1NjZW5lVmlldy9CdWxsZmlnaHRfR2FtZVNjZW5lLmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVxL0J1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X0dldFBsYXllcnNMaXN0UmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9TY2VuZVZpZXcvQnVsbGZpZ2h0X0dpZnRBbmltYXRpb24uanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXEvQnVsbGZpZ2h0X0hlbHBSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXNwL0J1bGxmaWdodF9IZWxwUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9Qb3BWaWV3L0J1bGxmaWdodF9NdWx0Q2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X05vdGlmeUdhbWVPdmVyT25jZVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X05vdGlmeUdhbWVPdmVyVG90YWxQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXNwL0J1bGxmaWdodF9Ob3RpZnlHYW1lU3RhcnRQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXNwL0J1bGxmaWdodF9Ob3RpZnlLaWNrT3V0UGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVzcC9CdWxsZmlnaHRfTm90aWZ5Tm90QmV0UGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVzcC9CdWxsZmlnaHRfTm90aWZ5Tm90Q2FsbEJhbmtlclBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X05vdGlmeU9wZW5DYXJkUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVzcC9CdWxsZmlnaHRfTm90aWZ5U3VyZUJhbmtlclBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1JlcS9CdWxsZmlnaHRfT3BlbkNhcmRSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXNwL0J1bGxmaWdodF9PcGVuQ2FyZFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvUG9wVmlldy9CdWxsZmlnaHRfT3duZXJWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2h0X1BsYXllckNlbGwuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvU2NlbmVWaWV3L0J1bGxmaWdodF9QbGF5ZXJJdGVtLmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2h0X1BsYXllcmxpc3QuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvQ21kL0NtZF9SZXEvQnVsbGZpZ2h0X1JlYWR5UmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVzcC9CdWxsZmlnaHRfUmVhZHlSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2h0X1Jvb21JbmZvLmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L1BvcFZpZXcvQnVsbGZpZ2h0X1J1bGVWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9HYW1lU2NlbmUvQnVsbGZpZ2h0L0NtZC9DbWRfUmVxL0J1bGxmaWdodF9UYWJsZURldGFpbFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvQ21kX1Jlc3AvQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9Qb3BWaWV3L0J1bGxmaWdodF9Ub3RhbFJlc3VsdENlbGwuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvUG9wVmlldy9CdWxsZmlnaHRfVG90YWxSZXN1bHQuanMiLCJhc3NldHMvU2NyaXB0L0dhbWVTY2VuZS9CdWxsZmlnaHQvUG9wVmlldy9CdWxsZmlnaHRfVG91cmlzdC5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9Qb3BWaWV3L0J1bGxmaWdodF9Vc2VySW5mby5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbS9CdXR0b25TY2FsZXIuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvQ2FycnlDb2luUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9DYXJyeUNvaW5SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0NoYXRSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0NoYXRSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NoaW5lc2VDaXR5LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJBZGRWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJBcmVhQ2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViQXJlYVZpZXcuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQ2x1YkNlbGwuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvQ2x1YkNyZWF0ZVJvb21SZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0NsdWJDcmVhdGVSb29tUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViQ3JlYXRlVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9DbHViRGVsTWVtYmVyUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9DbHViRGVsTWVtYmVyUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViRmluZFBvcFZpZXcuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQ2x1YkluZm9WaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJKb2luVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViTGV2ZWxDZWxsLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJMZXZlbFZpZXcuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQ2x1Yk1lbWJlclBlcm1pc3Npb25WaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJNZW1iZXJWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0NsdWJPd25lckNvbmZpcm1SZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0NsdWJPd25lckNvbmZpcm1SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0NsdWJPd25lck1vZGlmeVJvbGVSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0NsdWJPd25lck1vZGlmeVJvbGVSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJQZXJzb25zQ2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViUGVyc29uc1ZpZXcuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQ2x1YlJvb21WaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJTZXRWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0NsdWJVcGdyYWRWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0NsdWJVcGdyYWRlQ29zdFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvQ2x1YlVwZ3JhZGVDb3N0UmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9DbHViVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvTWVzc2FnZUZhY3RvcnkvQ21kX0J1bGxmaWdodC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvTWVzc2FnZUZhY3RvcnkvQ21kX0NvbW1vbi5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9DcmVhdGVDbHViUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9DcmVhdGVDbHViUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9DcmVhdGVSb29tUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9DcmVhdGVSb29tUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9DcmVhdGVUYWJsZUNvc3RSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0NyZWF0ZVRhYmxlQ29zdFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvQ3VzV2ViVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9EaXNtaXNzQ2x1YlJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvRGlzbWlzc0NsdWJSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0Rpc21pc3NHYW1lUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9EaXNtaXNzR2FtZVJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvRW50ZXJSb29tUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9FbnRlclJvb21SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0V4Y2hhbmdlR29sZFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvRXhjaGFuZ2VHb2xkUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9GaW5kUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9GaW5kUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9GaW5kUm9vbVJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvRmluZFJvb21SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L0ZpbmRWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9QbGF0Zm9ybS9HVm9pY2VKc2IuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvR2FtYmxpbmdIb3VzZUNlbGwuanMiLCJhc3NldHMvU2NyaXB0L1BsYXRmb3JtL0dhbWVDYWxsT0MuanMiLCJhc3NldHMvU2NyaXB0L0hvdHVwZGF0ZS9HYW1lQ29uZmlnLmpzIiwiYXNzZXRzL1NjcmlwdC9Nb3VkbGUvR2FtZVBsYXllci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbS9HYW1lU3lzdGVtLmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0dldENsdWJMaXN0UmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9HZXRDbHViTGlzdFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvR2V0Q2x1YlRhYmxlUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9HZXRDbHViVGFibGVSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0dldE1lbWJlckxpc3RSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0dldE1lbWJlckxpc3RSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0dldE1zZ0xpc3RSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL0dldE1zZ0xpc3RSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0dldE1zZ051bVJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvR2V0TXNnTnVtUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTW91ZGxlL0dsb2JhbEV2ZW50TWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvU2NlbmVWaWV3L0hhbGxTY2VuZS5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9IZWFydFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvSGVhcnRSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Ib3R1cGRhdGUvSG90VXBkYXRlTWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9IdHRwL0h0dHBDb25maWcuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvSHR0cC9IdHRwTWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9IdHRwL0h0dHBQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0hvdHVwZGF0ZS9IdHRwUmVxdWVzdC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9Kb2luQ2x1YlJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvSm9pbkNsdWJSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL0xlYXZlR2FtZVJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvTGVhdmVHYW1lUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvU2NlbmVWaWV3L0xvYWRpbmdTY2VuZS5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9Mb2FkaW5nVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9Mb2dpblJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvTG9naW5SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L01lc3NhZ2VDZWxsRGV0YWlsVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9NZXNzYWdlQ2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9NZXNzYWdlRGV0YWlsVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvR2FtZVNjZW5lL0J1bGxmaWdodC9DbWQvTWVzc2FnZUZhY3RvcnkvTWVzc2FnZUZhY3RvcnlfQnVsbGZpZ2h0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9NZXNzYWdlRmFjdG9yeS9NZXNzYWdlRmFjdG9yeV9Db21tb24uanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvTWVzc2FnZUZhY3RvcnkuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvU29ja2V0L01lc3NhZ2VSZXEuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvU29ja2V0L01lc3NhZ2VSZXNwLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L01lc3NhZ2VWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL1NvY2tldC9NZXNzYWdlLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L01pbmVWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL01vZGlmeUNsdWJJbmZvUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9Nb2RpZnlDbHViSW5mb1Jlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvTXNnUmVhZFJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvTXNnUmVhZFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L01hbmFnZXIvTXVzaWNNZ3IuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvTmV0TXNnLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L05vdGljZVZpZXcuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL05vdGlmeUNsdWJPd25lckNvbmZpcm1QYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL05vdGlmeURpc21pc3NHYW1lLmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9Ob3RpZnlHYW1lU3RhcnRQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL05vdGlmeUluR2FtZVJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL05vdGlmeU93bmVyT3ZlclBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvTm90aWZ5T3duZXJTaXRQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL05vdGlmeVBheU9wZXJhdGVQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvT3duZXJDb25maXJtUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9Pd25lckNvbmZpcm1SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL093bmVyS2lja091dFBsYXllclJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvT3duZXJLaWNrT3V0UGxheWVyUmVzcFBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9QaWNrZXJBZGRyZXNzVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvUGxhdGZvcm0vUGxhdGZvcm0uanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvUGxheVNjb3JlLmpzIiwiYXNzZXRzL1NjcmlwdC9Nb3VkbGUvUGxheWVyLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tL1Bva2VyQ2FyZC9Qb2tlci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9Qcm9kdWNlQ2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbS9Qcm9ncmVzc1NsaWRlci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9SZWZlcnJhbENvZGVWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1JvbGxNc2cuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvUm9vbUluZm9WaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1J1bGVWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL1Njb3JlRGV0YWlsUmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9TY29yZURldGFpbFJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXEvU2NvcmVMaXN0UmVxUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9TY29yZUxpc3RSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL1NlYXJjaENsdWJSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL1NlYXJjaENsdWJSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVzcC9TZXJ2ZXJLaWNrT3V0UGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1NlcnZpY2VWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1NldHRpbmdWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1NoYXJlVmlldy5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9TaG9wQ29uZlJlcVBhY2tldC5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1Jlc3AvU2hvcENvbmZSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1Nob3BWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL1NpdERvd25SZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL1NpdERvd25SZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21TY2VuZS9Qb3BWaWV3L1NpdFJlcUNlbGwuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvU29ja2V0L1NvY2tldENvbmZpZy5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9Tb2NrZXQvU29ja2V0RGF0YS5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9Tb2NrZXQvU29ja2V0TWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvTmV0d29yay9DbWQvQ21kX1JlcS9TdGFydEdhbWVSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL1N0YXJ0R2FtZVJlc3BQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvU3VjY2Vzc0NlbGwuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvU3VjY2Vzc1ZpZXcuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvVG9hc3RWaWV3LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tL1V0aWwvVUlVdGlsLmpzIiwiYXNzZXRzL1NjcmlwdC9OZXR3b3JrL0NtZC9DbWRfUmVxL1VzZXJEZXRhaWxSZXFQYWNrZXQuanMiLCJhc3NldHMvU2NyaXB0L05ldHdvcmsvQ21kL0NtZF9SZXNwL1VzZXJEZXRhaWxSZXNwUGFja2V0LmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tL1V0aWwvVXRpbFRvb2wuanMiLCJhc3NldHMvU2NyaXB0L0NvbVNjZW5lL1BvcFZpZXcvVm9pY2VQbGF5Vmlldy5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9Wb2ljZVZpZXcuanMiLCJhc3NldHMvU2NyaXB0L1BsYXRmb3JtL1dlQ2hhdEFwaS5qcyIsImFzc2V0cy9TY3JpcHQvQ29tU2NlbmUvUG9wVmlldy9XZWJWaWV3LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiUTs7QUFnQlo7QUFDQTs7QUFJQTtBQUNBOztBQUVBOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7OztBQUlBOztBQUVBOztBQUVBOztBQUVBO0FBQ0k7QUFDSTs7QUFFQTs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7QUFDSDtBQXpHSTs7Ozs7Ozs7OztBQ0ZUO0FBQ0k7QUFDQTs7QUFHSjtBQUNBO0FBQ0E7O0FBRUE7O0FBR0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBOztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVGOztBQUVGOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFFSjs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7O0FBRUk7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFFSTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNIOztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFDSDs7QUFFRDs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNIOztBQUdEO0FBQ0k7QUFDQTtBQUVJO0FBQ0k7QUFDQTs7QUFFSTs7QUFFQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUVJO0FBQ0k7QUFDQTtBQUNDO0FBQ0c7QUFDSTtBQUNIO0FBQ0Q7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFFSTtBQUNJO0FBQ0E7QUFDQztBQUNHO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDSjtBQUNKOztBQUVEOztBQUdJO0FBQ0k7QUFDQTtBQUNDO0FBQ0c7QUFDSTtBQUNIO0FBQ0Q7QUFDSDtBQUNKO0FBQ0o7QUFHRztBQUNBO0FBQ0g7QUFFSjtBQUtHO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBRUo7O0FBR0Q7O0FBRUk7QUFDSTtBQUNIOztBQUpXOztBQVFoQjs7Ozs7Ozs7OztBQzNRQTs7Ozs7Ozs7Ozs7QUFXQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBRUc7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0s7QUFDRztBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUF3RDtBQUNwRDtBQUNJO0FBQ0g7QUFDSjtBQUVHO0FBQ0E7O0FBRUE7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7O0FBRUE7QUFBb0Y7QUFDaEY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7QUFDbUY7QUFDaEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNIO0FBRUc7O0FBRUE7QUFDQTtBQUNIO0FBQ0o7QUFDZ0c7QUFDN0Y7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBak9xQjs7Ozs7Ozs7OztBQ1gxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNIOztBQUVEOzs7O0FBSUE7QUFDSTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDSDs7QUFFRDtBQUNIO0FBRUc7QUFDSDs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTs7QUFFQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSDtBQUVHOztBQUVBOztBQUVBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNIO0FBQ0o7QUFFRztBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBRUc7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEOzs7OztBQUtBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFyUHlCOztBQXdQOUI7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBQ0g7QUFDSjtBQUVHO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7O0FBRUE7QUFDSTtBQUNIO0FBRUc7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEOzs7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBRUc7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzNaQTs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUphOzs7Ozs7Ozs7O0FDSGpCOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIUTs7QUFNWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNwQ0E7Ozs7QUFJQTs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7OztBQWdCQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDMUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBRkM7QUFERzs7QUFPWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBRUg7QUFDSjs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBRUk7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFFUTtBQUVJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFHQTtBQUhBO0FBT0E7QUFISztBQU9MO0FBSEs7QUFRTDtBQUpLO0FBT0Q7QUFDSDtBQUdHO0FBQ0g7QUFDSjtBQUNMO0FBQ0g7O0FBR0Q7QUFDQTtBQUVJO0FBQ0E7QUFDSTtBQUVJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNIO0FBRUo7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFFSTtBQUNBO0FBRVk7QUFDSDtBQUNUO0FBQ0g7O0FBRUQ7O0FBR0E7QUFDSTtBQUVJO0FBQ0g7QUFDRDs7QUFFQTtBQUVJO0FBQ0g7QUFJSjs7QUFFRDtBQUNJO0FBRUk7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNKOztBQUVEOztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQXBNSTs7Ozs7Ozs7OztBQ0pUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFFSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUVRO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIO0FBRUc7QUFDSDtBQUVHO0FBQ0g7QUFDSjtBQUVSO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFFSTtBQUNBO0FBQ0g7QUFFSjtBQUNKOztBQUdEOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0g7O0FBR0Q7O0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFHUTtBQUVJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7QUFKQTtBQU9JO0FBQ0g7QUFDRDtBQUpLO0FBT0Q7QUFDSDtBQUNEO0FBSks7QUFRTDtBQUhLO0FBTUQ7QUFDSDtBQUdHO0FBQ0g7QUFDSjtBQUVSOztBQUdEO0FBQ0E7QUFFSTtBQUNBOztBQUVBO0FBQ0k7QUFFSTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDtBQUdKO0FBQ0o7O0FBRUQ7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUVRO0FBQ0k7QUFDSDtBQUVKO0FBRVI7O0FBRUQ7QUFDSTtBQUVIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQTlEUjtBQWdFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFFSTtBQUdJO0FBQ0g7QUFJRztBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBSUc7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUk7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBOztBQUdBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFFSjtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7O0FBRUE7QUFDSDtBQUVKOztBQUVEO0FBQ0k7O0FBRUE7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUhPOztBQU1YO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7O0FBS0E7QUFDSDtBQUVKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFETztBQUdYO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBRUk7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpPOztBQU9YO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEOztBQUdBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7O0FBRUE7QUFFSTtBQUNIO0FBS0o7O0FBR0Q7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUVKOztBQUdEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUVKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBRUk7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBR0E7QUFDQTtBQUNBO0FBRUg7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVJO0FBQ0E7O0FBRUE7QUFDSDtBQUdHO0FBRUk7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7QUFJQTtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHSDtBQUNEO0FBQ0k7QUFDQTs7QUFFSDs7QUFHRDs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUVFO0FBQ0U7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7O0FBRUk7QUFFSTtBQUVJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBejJCSTs7Ozs7Ozs7OztBQ1RUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7O0FBakJLOzs7Ozs7Ozs7O0FDQVQ7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDOUJBOzs7O0FBSUE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDs7Ozs7Ozs7OztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7O0FBUVo7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0Q7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBR0M7O0FBRUc7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0E7QUFDSTtBQUNBO0FBRk87QUFJWDtBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBRUg7QUFHRztBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUdHO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDs7QUFFSTtBQUVJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIO0FBcEhJOzs7Ozs7Ozs7O0FDVFQ7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpDYTs7Ozs7Ozs7OztBQ0pqQjs7OztBQUlBO0FBQ0E7QUFDQTs7QUFHQTs7Ozs7Ozs7QUFRQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN0Q0E7Ozs7QUFJQTs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdENBOzs7O0FBSUE7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1Q0E7Ozs7QUFJQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDbERBOzs7O0FBSUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSTtBQUNBO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDRztBQUNGO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUEzR0k7Ozs7Ozs7Ozs7QUNWVDs7OztBQUtBO0FBQ0k7O0FBRUE7O0FBSUE7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0k7QUFDSDs7QUFuQkk7Ozs7Ozs7Ozs7QUNMVDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQWxCZ0M7O0FBc0JwQzs7Ozs7Ozs7OztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQVZROztBQWFaO0FBQ0E7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFDRDtBQUVJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQURPO0FBR1g7O0FBRUE7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUk7QUFDQTtBQUVJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFoRkk7Ozs7Ozs7Ozs7QUNSVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUk7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBS1o7QUFDQTs7QUFJQTtBQUNJO0FBQ0E7QUFFQztBQUNBO0FBRUo7O0FBRUQ7QUFDSTtBQUNIO0FBekJJOzs7Ozs7Ozs7O0FDSlQ7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQUlaO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUVBO0FBQ0g7QUFDRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUVJO0FBRUk7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBRUo7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFFSTtBQUNIO0FBQ0o7QUE3Rkk7Ozs7Ozs7Ozs7QUNKVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZlE7O0FBa0JaO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBR0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUdEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNIOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUVJO0FBRUk7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNHO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBR0Q7QUFDSTs7QUFFQTtBQUNBO0FBRUk7QUFDSDtBQUNHO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUk7O0FBRUE7QUFFSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKTzs7QUFPWDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFFSTtBQUNIO0FBQ0o7QUFDRDtBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWE87O0FBY1g7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUVJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpPO0FBTVg7QUFDSTtBQUNIO0FBQ0o7QUFHRztBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKTztBQU1YO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUF2VUk7Ozs7Ozs7Ozs7QUNWVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBR0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpPO0FBTVg7QUFDSDtBQUNEO0FBQ0g7O0FBeENJOzs7Ozs7Ozs7O0FDUlQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQXhDUTs7QUEyQ1o7QUFDSTtBQURLOztBQUlUO0FBQ0E7QUFDSTs7QUFHQTtBQUNBO0FBRUk7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUVJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBRUk7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUVJO0FBQ0E7QUFDSDtBQUNEO0FBRUg7QUFDRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFHRDtBQUVDO0FBQ0c7QUFDSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRztBQUNJO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFFRztBQUVJO0FBQ0E7QUFDSDtBQUVKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBM0ZSO0FBNkZIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUdKO0FBR0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBRUo7QUFDRztBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQW5CUjtBQXFCSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7O0FBRUE7QUFDSTtBQUNIO0FBRUo7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFETztBQUdYO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDSTtBQUF1QjtBQUNuQjtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNBO0FBQW1EO0FBQy9DO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFFSTtBQUNBO0FBQ0g7QUFHRztBQUNIO0FBQ0o7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFDQTs7QUFFQTtBQUdJO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBRUk7QUFDQTs7QUFFQTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFFSjtBQUNKO0FBQ0o7O0FBRUQ7O0FBSUE7O0FBSUE7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJOztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJpQjs7QUFXckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNEOztBQUVBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFETztBQUdYO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBRE87QUFHWDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQURPO0FBR1g7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7O0FBR0E7O0FBR0E7O0FBRUE7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFHQTs7QUFHQTs7QUFFQTtBQUVJO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSDtBQUdHO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBRUo7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBRUg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0M7QUFDQTtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBRUk7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUVHO0FBQWtEO0FBQzdDO0FBQ0w7QUFBc0Q7QUFDakQ7QUFDTDtBQUFrRDtBQUM3QztBQUNBO0FBQ0w7QUFBa0Q7QUFDN0M7QUFDQTtBQUNMO0FBQWtEO0FBQzlDO0FBQ0M7QUFDTDtBQUFrRDtBQUM5QztBQUNDO0FBQ0w7QUFBa0Q7QUFDN0M7QUFuQlI7QUFxQkg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFDRDtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQUNJO0FBQWtEO0FBQzlDOztBQUVKO0FBQXNEO0FBQ2xEO0FBQ0k7QUFDSDtBQUNEOztBQUVKO0FBQWtEO0FBQzlDO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7O0FBRUo7QUFBa0Q7QUFDOUM7QUFDQTtBQUNJO0FBQ0g7QUFDRDs7QUFFSjtBQUFrRDtBQUM5QztBQUNBO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBQ0o7QUFDRDs7QUFFSjtBQUFrRDtBQUM5QztBQUNJO0FBQ0g7QUFDRDs7QUFFSjtBQUFrRDtBQUM5Qzs7QUFFSjtBQUNJO0FBbkRSO0FBcURIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDSDs7QUFFRDtBQUVJO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRztBQUNKO0FBQ0M7QUFDRzs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDQztBQUNHO0FBQ0o7QUFDSTtBQXhEUjtBQTBESDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBRUk7O0FBRUE7QUFDSTtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEOztBQUVBOztBQUdBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEOztBQUVKO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNEOztBQUVKO0FBQWtEO0FBQzlDO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRDs7QUFFSjtBQUFpRDtBQUM3Qzs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUVIO0FBQ0c7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7O0FBRUo7QUFBa0Q7QUFDOUM7QUFDQTs7QUFFSTs7QUFFQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVMO0FBQ0k7QUFuR1I7QUFxR0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBR0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUVIOztBQUVEO0FBQ0k7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUdEO0FBQ0k7QUFFSDs7QUFFRDtBQUVJO0FBQ0g7O0FBM3VESTs7Ozs7Ozs7OztBQ2hEVDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxROztBQVFaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzFCQTs7OztBQUlBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0JBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDeERBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCUTs7QUF1Qlo7QUFDQTs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDRDtBQUNIOztBQUdEO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0g7QUFqS0k7Ozs7Ozs7Ozs7QUNSVDs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMUTs7QUFRWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1QkE7OztBQUdBO0FBQ0E7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3ZCQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRROztBQWNaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBOztBQUdBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUVJO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBRUk7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNKO0FBOUtJOzs7Ozs7Ozs7O0FDTlQ7Ozs7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDbkRBOzs7QUFHQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM5Q0E7Ozs7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDMURBOzs7O0FBS0E7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3hDQTs7OztBQUlBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzdDQTs7OztBQUlBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1Q0E7Ozs7QUFJQTs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzlDQTs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN0REE7Ozs7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7OztBQVNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMUTs7QUFRWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNyQ0E7Ozs7QUFJQTs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBSUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFIUjtBQUtIOztBQUVEO0FBQ0k7QUFFSTtBQUtJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDSTtBQURPO0FBR1g7QUFDQTtBQUNIO0FBQ0o7QUE3REk7Ozs7Ozs7Ozs7QUNQVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBOztBQUlBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFSTtBQUNBO0FBRUg7QUFFRztBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7O0FBR0E7QUFDQTtBQUVJO0FBQ0E7QUFFSDtBQUVHO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7QUFDSjtBQTlESTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRROztBQWlCWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTs7QUFFQTtBQUVJO0FBRUk7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUZPO0FBSVg7QUFDQTtBQUVIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFSTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0g7QUFDRztBQUNIOztBQUVEOztBQUVBO0FBQ0g7O0FBRUQ7O0FBR0k7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFHRztBQUNIO0FBQ0o7QUFyS0k7Ozs7Ozs7Ozs7QUNQVDtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNJOztBQUVBOztBQUVJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUhSO0FBS0g7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7O0FBRUw7Ozs7Ozs7Ozs7QUFVSTs7QUFHSTtBQUNBOztBQUVBOztBQUVBO0FBRUk7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7Ozs7Ozs7O0FBUUE7QUFFSTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBRUk7QUFDQTs7QUFFQTs7QUFLQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQS9KSTs7Ozs7Ozs7OztBQ05UOzs7O0FBSUE7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUxROztBQVNaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3BDQTs7OztBQUlBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYlE7O0FBZ0JaO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUVJO0FBRUk7QUFDSDtBQUdHO0FBQ0g7O0FBRUQ7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIOztBQUVEOztBQUVBO0FBRUk7QUFDSDtBQUNKOztBQTdESTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSDtBQXRDSTs7Ozs7Ozs7OztBQ0xUOzs7O0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMUTs7QUFRWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1QkE7Ozs7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9EQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDbEdBOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBOztBQUlBO0FBQ0k7QUFDQTs7QUFHQTtBQUNBO0FBRUk7QUFDQTtBQUVIO0FBRUc7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDtBQUNKO0FBdkNJOzs7Ozs7Ozs7O0FDSFQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQW5CUTs7QUF1Qlo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUdEO0FBQ0E7O0FBRUE7O0FBRUE7Ozs7Ozs7QUFPQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBRUg7O0FBRUQ7QUFFSTtBQUNIO0FBQ0Q7O0FBRUE7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBM0lJOzs7Ozs7Ozs7O0FDUFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpROztBQWVaO0FBQ0E7O0FBSUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBRUE7QUFDQTtBQUNIO0FBakNJOzs7Ozs7Ozs7O0FDRFQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVlE7O0FBYVo7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKTztBQU1YO0FBQ0E7QUFDSDtBQUdKO0FBcEVJOzs7Ozs7Ozs7O0FDUlQ7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUpROztBQU9aO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBOztBQUVBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBRUk7QUFDSDtBQUNEO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7QUFDQTtBQUNIO0FBeEZJOzs7Ozs7Ozs7O0FDSFQ7OztBQUdBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5ROztBQVNaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzNCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNuQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUUTs7QUFZWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNqRUE7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDMUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUdBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBR0g7QUFHRztBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBR0g7QUFDRDtBQUNIOztBQS9DSTs7Ozs7Ozs7OztBQ1BUO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWlE7O0FBZVo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQU9KOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUNKO0FBbkRJOzs7Ozs7Ozs7O0FDRlQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQWJROztBQWdCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7QUFPSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBRUE7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFDSDtBQUNKO0FBL0ZJOzs7Ozs7Ozs7O0FDekNUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBcENJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQkE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUlE7O0FBV1o7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDcERBOzs7O0FBSUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJROztBQWdCWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBO0FBQ0k7O0FBRUE7QUFFSTtBQUVJO0FBQ0E7QUFDSDtBQUNKO0FBRUo7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBR0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTE87QUFPWDtBQUNBO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQTNFSTs7Ozs7Ozs7OztBQ1BUOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBRE87O0FBSVg7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7O0FBUVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdkNBOzs7QUFHQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUdHO0FBQ0k7QUFETztBQUdYO0FBQ0E7QUFDSDtBQUNKO0FBakNJOzs7Ozs7Ozs7O0FDTlQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEJROztBQXFCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQVhSO0FBY0g7O0FBRUQ7QUFDSTtBQUVJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQXFEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFGVTs7QUFLZDtBQUVIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBRUk7O0FBRUk7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFGVTs7QUFLZDtBQUdIO0FBQTJEOztBQUV4RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUZVOztBQUtkO0FBR0g7QUFBUTtBQUNMO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFETztBQUdYO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFFSTtBQUNBO0FBQ0E7QUFDSDtBQUdHOztBQUVBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUdHO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNJO0FBQ0k7QUFETztBQUdYO0FBQ0g7QUFDRDtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIO0FBR0c7QUFFSTtBQUNBO0FBQ0E7QUFDSDtBQUVKO0FBQ0o7O0FBRUQ7QUFDSTtBQUVJO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFyQlI7QUF1Qkg7QUF0Ukk7Ozs7Ozs7Ozs7QUNaVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRROztBQVlaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7O0FBSFI7QUFNSDs7QUFFRDtBQUNJO0FBQ0k7QUFFSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKTztBQU1YO0FBQ0g7QUFDSjtBQXpGSTs7Ozs7Ozs7OztBQ1ZUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCUTs7QUFvQlo7QUFDQTs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDSjtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTE87QUFPWDtBQUNIOztBQWhGSTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBUlE7O0FBV1o7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFQUjtBQVNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUg7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQWhISTs7Ozs7Ozs7OztBQ1BUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFHSTtBQUNJO0FBQ0E7QUFDQTtBQUhPOztBQU1YO0FBQ0k7QUFDSDtBQUNEOztBQUVBO0FBQ0g7QUFDRztBQUNJO0FBQ0E7QUFGTztBQUlYO0FBQ0g7QUFDRDtBQUNIO0FBekRJOzs7Ozs7Ozs7O0FDUFQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7O0FBR0o7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUFE7O0FBVVo7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBRUE7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBRUg7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFYUjtBQWFIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBRE87QUFHWDtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlU7O0FBS2Q7QUFHSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUExTkk7Ozs7Ozs7Ozs7QUNkVDs7O0FBR0E7Ozs7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7O0FBUVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdENBOzs7QUFHQTs7Ozs7Ozs7OztBQVVBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ2pDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUxROztBQVNaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ2pDQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDbkNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjs7QUF2Q0k7Ozs7Ozs7Ozs7QUNGVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWFE7O0FBY1o7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUF0Qks7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBROztBQVVaO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBWFI7QUFhSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUFxRDtBQUNqRDtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBRUg7QUFDRztBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUVIO0FBQ0o7QUFDSjs7QUFFRDtBQUVJO0FBQ0E7QUFJSDs7QUFFRDtBQUNJO0FBRUk7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0g7QUFFSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUdHO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFHSDtBQUNKOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFSTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQURPO0FBR1g7QUFDSDtBQXBLSTs7Ozs7Ozs7OztBQ1RUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBS1o7QUFDSTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7O0FBRUE7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUdHO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpPOztBQU9YO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFIUjtBQUtIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQW5GSTs7Ozs7Ozs7OztBQ1JUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBWlE7O0FBZVo7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFHRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQVBSO0FBU0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBRUg7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUdIO0FBQ0c7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTE87QUFPWDtBQUNIOztBQUVHO0FBQ0E7O0FBRUE7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIOztBQUVHO0FBQ0E7O0FBRUE7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFuTkk7Ozs7Ozs7Ozs7QUNUVDs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzNCQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUlE7O0FBV1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQXZCUjtBQTBCSDs7QUFFRDtBQUNJO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQTJEO0FBQ3hEO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUVJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFFSTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBRUk7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQXBQSTs7Ozs7Ozs7OztBQ1JUOzs7QUFHQTs7QUFFQTs7QUFFSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUF6Q2E7Ozs7Ozs7Ozs7QUNMakI7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7Ozs7Ozs7O0FDN0xBOzs7O0FBSUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpROztBQU9aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3ZDQTs7O0FBR0E7Ozs7Ozs7Ozs7O0FBV0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3JDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJROztBQVdaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3BEQTs7OztBQUlBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDcERBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIUTtBQUtaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ25CQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBRUE7QUFDSTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdkNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDtBQXRDSTs7Ozs7Ozs7OztBQ0RUOzs7QUFHQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFPWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN4QkE7OztBQUdBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQy9CQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3ZCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN2QkE7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTFE7QUFRWjtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzdCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUE7O0FBRUE7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7Ozs7Ozs7Ozs7Ozs7QUFjSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDaEZBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBU0E7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpROztBQU9aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ25DQTs7O0FBR0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBYUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN2Q0E7OztBQUdBOzs7Ozs7Ozs7Ozs7QUFZQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7O0FBUVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDeENBOzs7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM1Q0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDM0JBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQVpROztBQWVaO0FBQ0E7QUFDSTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUZPO0FBSVg7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNIOztBQUVHOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFQUjtBQVNIOztBQUdEOztBQUVDOztBQUVBOzs7Ozs7O0FBUUE7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFFSTtBQUNIOztBQUVEO0FBQ0g7O0FBSUQ7QUFDSTs7O0FBSUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDSTtBQUNJOztBQUVEOztBQUdBOztBQUVDOztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBVUQ7QUFFSTtBQUVJO0FBQ0E7QUFDSDs7QUFFRDs7QUFHQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFDQTtBQVFIO0FBbE5JOzs7Ozs7Ozs7O0FDTFQ7Ozs7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7O0FBS0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUVIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7O0FBR0E7QUFDQTtBQUNJO0FBQ0E7QUFGWTtBQUloQjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKTztBQU1YO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBR0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUVKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBRUg7QUFFRztBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUdKOztBQUVEO0FBQ0k7O0FBSUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDakhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSUTs7QUFXWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNHO0FBQ0E7QUFDRjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVJO0FBQ0g7QUFHRztBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBOztBQUVBO0FBRUk7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBRUo7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBRlU7QUFJZDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFETzs7QUFJWDtBQUNJO0FBQ0g7QUFDSjtBQTVKSTs7Ozs7Ozs7OztBQ1RUOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBSUE7QUFDQTtBQUVJO0FBTUE7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBR0Q7QUFFSTtBQUVJO0FBSUE7QUFDQTtBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFHRztBQUNIO0FBR0c7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFFSTtBQUlBO0FBQ0E7QUFDSDtBQUdHO0FBQ0g7QUFFSjs7QUFFRDtBQUVJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFHRztBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUVJO0FBSUE7QUFDQTtBQUNIO0FBR0c7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFFSTtBQUlBO0FBQ0E7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFHRztBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUVJO0FBSUE7QUFDQTtBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBRUk7QUFJQTtBQUNBO0FBQ0g7QUFPRztBQUNIO0FBQ0o7O0FBR0Q7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFHRDtBQUNBO0FBQ0E7QUFFSTtBQUVJO0FBTUg7QUFDSjs7QUFFRDtBQUNBO0FBRUk7QUFFSTtBQU9IO0FBQ0o7O0FBRUQ7QUFDQTtBQUVJO0FBRUk7QUFhSDtBQUNKOztBQUVEO0FBQ0E7QUFFSTtBQUNBO0FBRUk7QUFLSDtBQUNKOztBQUVEO0FBQ0E7QUFFSTtBQUVJO0FBSUg7QUFDSjs7QUFFRDtBQUVDO0FBQ0M7QUFDQTtBQUNBO0FBRUM7QUFJQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFFSTtBQUNIO0FBQ0M7QUFDQTtBQUNBO0FBQ0M7QUFLQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFFSTtBQUNIO0FBQ0M7QUFDQTtBQUNBO0FBRUM7QUFLQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFFQztBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBSUE7QUFDRDtBQUNEOztBQUdEO0FBRUM7QUFDQztBQUNBO0FBQ0E7QUFFQztBQU1BO0FBQ0Q7QUFDRDs7QUFFRDtBQUVDO0FBQ0M7QUFDQTtBQUNBO0FBQ0M7QUFLQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFFSTtBQUVJO0FBSUE7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUVJO0FBRUk7QUFNQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7QUFFSTtBQUNBO0FBRUk7QUFJSDtBQVNKOztBQUVEO0FBQ0k7QUFFSDs7QUFFRDtBQUNJO0FBRUg7O0FBRUQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQURHO0FBR1Y7O0FBRUQ7Ozs7Ozs7Ozs7QUNuZkE7Ozs7O0FBS0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTs7QUFHSjtBQUNBOztBQUVBOzs7Ozs7Ozs7O0FDakJBOzs7QUFHQTs7QUFFQTtBQUVJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDM0RBOzs7O0FBS0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBRUo7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOb0I7O0FBU3hCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFGb0I7O0FBS3hCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBREc7QUFHVjs7QUFFRDs7Ozs7Ozs7OztBQ3BLQTs7OztBQUlBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSDtBQUNKO0FBQ0Q7Ozs7Ozs7Ozs7QUN6QkE7OztBQUdBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM3Q0E7Ozs7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpROztBQU9aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzVCQTs7O0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ2hEQTs7O0FBR0E7Ozs7OztBQU1BOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFPWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUMvQkE7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDM0NBOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTtBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3ZDQTs7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0RBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNoRkE7Ozs7QUFJQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3pCQTs7OztBQUlBOzs7Ozs7Ozs7Ozs7O0FBYUE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdkNBOzs7O0FBS0E7Ozs7Ozs7O0FBU0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFHRDs7QUFFSTtBQUNBOztBQUVBOzs7Ozs7O0FBT0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7O0FBS0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGSTtBQUlSO0FBQ0k7QUFDQTtBQUZPO0FBSVg7QUFDSTtBQUNBO0FBRkc7O0FBS1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNCUTs7QUE4Qlo7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFFSjs7QUFFRDtBQUNJO0FBQ0E7QUFHSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUdJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7QUFFSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUdHO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFHRztBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBR0c7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUVBO0FBQ0k7QUFDQTs7QUFFSjtBQUNBO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBakJKOztBQW9CQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFHSDs7QUFFRDtBQUVJO0FBQ0E7QUFFSTtBQUVJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBRE87QUFHWDtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFETztBQUdYO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNBO0FBR0g7O0FBRUQ7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFFRztBQUNIO0FBQ0o7O0FBR0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQURPO0FBR1g7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQXhhSTs7Ozs7Ozs7OztBQ2RUOzs7QUFHQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFIUTs7QUFNWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN2QkE7OztBQUdBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUQ7QUFDRjtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdkJBOzs7Ozs7Ozs7QUFTQTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7Ozs7QUFNQTtBQUNJO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0s7QUFDQTtBQUNBO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEOzs7Ozs7OztBQVFBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJOztBQUdBO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBcEpvQjs7Ozs7Ozs7OztBQ1h6Qjs7OztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBR0o7OztBQUdBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTDZCOztBQVFqQzs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFIYTs7QUFNakI7OztBQUdBOztBQUdBOzs7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFIRztBQUtWO0FBQ0Q7QUFDSTtBQURHO0FBR1Y7O0FBRUQ7Ozs7Ozs7Ozs7QUMxRkE7Ozs7QUFJQTs7Ozs7Ozs7O0FBU0E7O0FBRUE7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0g7O0FBRUQ7O0FBRUk7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFFSjtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDtBQUNKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBSUE7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSDs7QUFHRDtBQUNJOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFFSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDM0xBOzs7O0FBSUE7O0FBRUk7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFkWTs7QUFpQmpCOzs7Ozs7Ozs7O0FDckJBOzs7OztBQUtBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7Ozs7Ozs7Ozs7Ozs7OztBQWVBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDSTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0g7O0FBR0Q7Ozs7Ozs7OztBQVNBO0FBQ0k7O0FBR0E7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFFRztBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUVHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBRUc7QUFDSDtBQUNKO0FBQ0o7QUFFRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNIO0FBRUc7QUFDSDtBQUNKO0FBOUl3Qjs7Ozs7Ozs7OztBQ1o3Qjs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7QUFZQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMUTs7QUFRWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN4Q0E7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN0Q0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxROztBQVFaO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0JBOzs7O0FBSUE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN4QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFFSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEOztBQUVKO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRzs7QUFFSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUExR1I7QUE0R0g7O0FBRUQ7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFFSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0g7QUFDSjtBQUNKO0FBR0c7QUFFSTtBQUNBO0FBQ0E7QUFDSTtBQUNIOztBQUVEOztBQUlBO0FBQ0E7QUFDSDtBQUVKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFkUjtBQWdCSDs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDs7QUFFSTtBQUNJO0FBQ0E7QUFGTzs7QUFLWDtBQUVIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUVHO0FBQ0Y7QUFDRDtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFuYkk7Ozs7Ozs7Ozs7QUM1Q1Q7QUFDQTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNJO0FBQ0E7QUFFSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7O0FBRUk7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUdHO0FBQ0E7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFHRDs7Ozs7Ozs7OztBQzVIQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYlE7O0FBZ0JaO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3JDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5VO0FBUWQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBOztBQUlBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUVBO0FBQ0k7QUFDQTtBQUZPO0FBSVg7QUFDSDtBQXJDSTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaUTs7QUFpQlo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQTdDSTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBUFI7QUFTSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFITztBQUtYO0FBQ0g7O0FBRUQ7QUFFSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQXFCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7QUFDSjtBQUEwQjs7QUFFdkI7QUFDQTs7QUFFQTtBQUVJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUVJO0FBQ0g7QUFDSjtBQUVKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBdEhJOzs7Ozs7Ozs7O0FDTlQ7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUk7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFyQlI7QUF1QkE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQTdDUjtBQStDQTtBQUNIO0FBbEYwQjs7QUFzRi9COzs7Ozs7Ozs7O0FDakhBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUFRQTs7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKOzs7Ozs7Ozs7QUF0SEo7QUFpSUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBOztBQUdKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFDaEI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXZMUTs7QUE0TUE7QUFDSDtBQXpWdUI7O0FBNFY1Qjs7Ozs7Ozs7OztBQzdiQTs7OztBQUtBO0FBQ0E7QUFDQTs7QUFFQTs7QUFLQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHOzs7QUFHSjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBRUg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBR0c7OztBQUdKO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFFSDs7QUFFRDs7Ozs7Ozs7OztBQ2pFQTs7OztBQUlBOztBQUVBO0FBRUk7O0FBRUE7O0FBRUE7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFFSDtBQUNKOztBQUdEOzs7Ozs7Ozs7O0FDekJBOzs7QUFHQTs7QUFFQTtBQUVJOztBQUVBO0FBQ0E7O0FBRUE7QUFHSDs7QUFHRDs7Ozs7Ozs7OztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUUTs7QUFZWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7QUFYUjtBQWFIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFHSjs7QUFFRDtBQUNJO0FBQ0k7QUFPSTtBQUNBO0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0o7QUFFSjtBQUNKOztBQUVEO0FBQ0k7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFITztBQUtYO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQXpJSTs7Ozs7Ozs7OztBQ05UOzs7QUFHQTs7QUFFQTtBQUVJO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUdBO0FBR0E7QUFHSDs7QUFFRDs7Ozs7Ozs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQlE7O0FBdUJaO0FBQ0E7QUFDSTtBQUNBO0FBRUg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFFQTtBQUdJO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDtBQUdKOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUVJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDQTtBQUNIO0FBR0c7O0FBR0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBckpJOzs7Ozs7Ozs7O0FDUlQ7Ozs7QUFJQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFMQTs7QUFjWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNoREE7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOztBQUVBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzFDQTs7O0FBR0E7Ozs7OztBQU1BOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFE7O0FBTVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDOUJBOzs7QUFHQTs7Ozs7Ozs7Ozs7QUFXQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ2xDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7O0FBRUk7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBR0o7O0FBRUQ7Ozs7O0FBS0E7QUFDSTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNBO0FBQ0g7O0FBRUQ7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFHRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEOztBQUVJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBOztBQUdBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFHRDs7Ozs7QUFLQTtBQUVDO0FBRUM7QUFDVTtBQUNJO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFFSjtBQUNKO0FBQ0o7O0FBR0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFHRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBR0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUF4TFU7O0FBNkxmOzs7Ozs7Ozs7O0FDL0xBO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQUlaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBRVE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBRUg7QUFFRztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUg7QUFDSjtBQUVKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7O0FBR1E7QUFFSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUNEO0FBSkE7QUFPSTtBQUNIO0FBQ0Q7QUFKSztBQVFMO0FBSEs7QUFRTDtBQUpLO0FBUVI7QUFFUjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUVIOztBQTFISTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDQTtBQUNJO0FBQ0g7O0FBR0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBOUJJOzs7Ozs7Ozs7O0FDUFQ7OztBQUdBO0FBQ0E7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3BDQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN2QkE7OztBQUdBOzs7Ozs7Ozs7QUFTQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDckNBOzs7O0FBSUE7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUM3QkE7Ozs7QUFJQTs7Ozs7Ozs7Ozs7Ozs7O0FBZUE7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNoREE7OztBQUdBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDekRBOzs7O0FBS0E7Ozs7Ozs7Ozs7Ozs7OztBQWVBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDeENBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDN0JBOzs7QUFHQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVEO0FBQ0Y7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3ZCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBSFE7O0FBTVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdkJBOzs7QUFHQTs7QUFFQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUN4QkE7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBOztBQWpCSzs7Ozs7Ozs7OztBQ0RUOzs7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVAyQjs7QUFVL0I7O0FBRUE7O0FBS0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDQTtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUF4QlI7QUEwQkE7QUFDQTtBQUNIOztBQUdEO0FBQ0k7O0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUk7O0FBRUE7O0FBRUE7O0FBRUk7QUFDQTtBQUNJO0FBRUE7QUFDSDtBQUNEOztBQUVBO0FBQ0k7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEOztBQUVJO0FBR0k7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFLRztBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUdEO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDaktBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNBOztBQUlBO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUVJO0FBQ0g7QUFFRztBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7QUFDSjs7QUF6Q0k7Ozs7Ozs7Ozs7QUNBVDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEOzs7Ozs7Ozs7O0FDbkNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVJO0FBQ0E7QUFDQTs7QUFHSjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBakJROztBQW9CWjtBQUNBOztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBRUk7QUFDSDtBQUNEO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQUdHO0FBQ0E7QUFDSDtBQUVHO0FBQ0g7QUFDSjs7QUFFRDtBQUNIOztBQUVEOztBQUlBO0FBRUk7QUFDSDs7QUFFRDtBQUVJO0FBQ0g7O0FBRUQ7QUFFSTs7QUFFQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7QUFHRztBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBM0hJOzs7Ozs7Ozs7O0FDWFQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXhCUTs7QUE0Qlo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHSTtBQUNIO0FBR0c7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDSDs7QUFFRDtBQUNBO0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBR0k7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDSDtBQUdHO0FBQ0g7QUFFSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUVJO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0g7QUFHRztBQUVJO0FBQ0g7QUFHRzs7QUFHSTtBQUNBO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDSDtBQUVKO0FBQ0o7QUFHSjtBQUdHO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFETztBQUdYO0FBQ0g7QUFDRDs7QUFJQTtBQUNBO0FBRUg7QUFFSjs7QUFwTUk7Ozs7Ozs7Ozs7QUNUVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQUTs7QUFVWjtBQUNBOztBQUdBO0FBRUk7QUFDQTtBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0g7O0FBRUQ7QUFFSTtBQUNIO0FBR0c7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQWhFSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBOztBQUlBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDQTtBQUVJO0FBQ0E7QUFDSDs7QUFHRDtBQUNJO0FBRE87O0FBSVg7O0FBRUE7QUFDSDtBQUNKO0FBcERJOzs7Ozs7Ozs7O0FDTlQ7Ozs7Ozs7OztBQVVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBR0E7QUFDRzs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0E7QUFDSTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0g7O0FBR0Q7QUFDSTtBQUNIOztBQUVBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7O0FBRUE7QUFFSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFFSTs7QUFFSTtBQUNBOztBQUxSO0FBU0g7O0FBRUY7QUFDSTtBQUNJO0FBQ0g7QUFDRDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFFSDs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUVJO0FBQ0g7O0FBRUQ7QUFFSTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFHRDtBQUNJO0FBQ0E7QUFFSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFqSks7Ozs7Ozs7Ozs7QUNuQlY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGTTtBQUlWO0FBQ0k7QUFDQTtBQUZNO0FBSVY7QUFDSTtBQUNBO0FBRk07QUFJVjtBQUNJO0FBQ0E7QUFGSztBQUlUO0FBQ0k7QUFDQTtBQUZNO0FBSVY7QUFDSTtBQUNBO0FBRks7O0FBS1Q7QUFDSTtBQUNBO0FBRlM7QUFJYjtBQUNJO0FBQ0E7QUFGVztBQUlmO0FBQ0k7QUFDQTtBQUZTO0FBSWI7QUFDSTtBQUNBO0FBRlE7QUFJWjtBQUNJO0FBQ0E7QUFGUztBQUliO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSTtBQUNBO0FBRlc7QUFJZjtBQUNJO0FBQ0E7QUFGWTtBQUloQjtBQUNJO0FBQ0E7QUFGVztBQUlmO0FBQ0k7QUFDQTtBQUZTO0FBSWI7QUFDSTtBQUNBO0FBRlM7QUFJYjtBQUNJO0FBQ0E7QUFGWTs7QUFLaEI7QUFDQTtBQUNBO0FBN0VROztBQWdGWjtBQUNBO0FBQ0k7O0FBRUE7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFIUjtBQUtIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7O0FBRUE7QUFFSTtBQUNIO0FBQ0Q7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBRk87QUFJWDtBQUNIOztBQUVEO0FBRUM7QUFDRztBQUNBO0FBRUk7QUFDSDtBQUdHO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFSDtBQUNKOztBQXRMSTs7Ozs7Ozs7OztBQ1BUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBSUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUVDO0FBQ0c7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQS9CSTs7Ozs7Ozs7OztBQ0xUOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7O0FBVUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFPWjtBQUNIO0FBQ0o7O0FBRUQ7Ozs7Ozs7Ozs7QUNqQ0E7OztBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBOENBO0FBQ0E7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3RFQTs7O0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQWFBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBVVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDekNBOzs7O0FBSUE7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDbkRBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpROztBQU9aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzNCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3hCQTs7O0FBR0E7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGVztBQUlmO0FBQ0k7QUFDQTtBQUZZO0FBSWhCO0FBQ0k7QUFDQTtBQUZrQjtBQVRkOztBQWVaO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQXJFSTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpROztBQWVaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUk7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNKO0FBR0c7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNKO0FBS0o7O0FBRUQ7QUFFSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUVBO0FBQ0E7QUFDSDtBQWxHSTs7Ozs7Ozs7OztBQ05UO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUp1Qjs7QUFPM0I7QUFDSTs7QUFFQTs7QUFHQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUdEOztBQUVDOztBQUVHO0FBRUM7QUFDTDtBQUNNO0FBQ0E7QUFDQTtBQUNEO0FBR0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBR0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBR0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0o7O0FBbEZJOzs7Ozs7Ozs7O0FDYlQ7OztBQUdBO0FBQ0E7Ozs7OztBQU1BO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzVCQTs7OztBQUlBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFvQ0E7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFPWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFIUjtBQUtIO0FBQ0w7Ozs7Ozs7Ozs7Ozs7O0FBY0k7QUFDSTtBQUVJO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVJO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUk7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFHRztBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQWxHSzs7Ozs7Ozs7OztBQ0xUOzs7O0FBSUE7Ozs7QUFJQTs7Ozs7QUFLQTtBQUNBOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUFE7O0FBVVo7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDdENBOzs7O0FBSUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOztBQUVBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzVFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQUTs7QUFVWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFGTztBQUlYO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUNKO0FBR0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQXlCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUErQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBRUk7QUFFQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0c7QUFFSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBO0FBdkJSOztBQTBCQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBRUk7QUFFQTtBQUNBO0FBQ0g7QUFDRztBQUVBO0FBQ0E7QUFDSDtBQUNHO0FBRUE7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFFQztBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFBd0I7QUFDcEI7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVKO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVKO0FBQ0E7QUFDSDtBQXRQSTs7Ozs7Ozs7OztBQ05UOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNCMkI7O0FBOEIvQjs7QUFFQTtBQUNBOztBQUVBOzs7O0FBSUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJSjs7OztBQUlBO0FBQ0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7O0FBS0o7Ozs7Ozs7Ozs7QUMzR0E7Ozs7QUFJQTs7QUFRQTtBQUVJO0FBQ0E7QUFFSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBRUk7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNHO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUVJO0FBQW9CO0FBQ2hCO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFFSTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0g7O0FBRUQ7QUFFSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFHRDtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUdEO0FBRUk7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBTUQ7O0FBRUE7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7O0FBRUk7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFHRDtBQUNJO0FBQ0E7QUFFSTtBQUNJO0FBQ0g7QUFFSjtBQUNEO0FBQ0g7O0FBR0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUdEOztBQUVJOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBRUk7QUFDQTtBQUNBOztBQUdJO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUo7QUFDSTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVKO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUdHO0FBQ0E7QUFDQTs7QUFFSjtBQUNJO0FBQ0E7O0FBRUE7QUFFSTtBQUNIO0FBQ0Q7O0FBRUE7O0FBRUo7QUFDSTtBQWxFUjtBQW9FSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUdEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFJRDtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBS0Q7QUFDSTs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQUNIOztBQUdEOztBQUVJO0FBQ0E7QUFDQTtBQUVJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBRUk7QUFDSDs7QUFFRDtBQUVIOztBQUlEO0FBRUk7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUdEO0FBRUk7QUFDQTtBQUNBO0FBQ0g7O0FBR0Q7QUFFSTtBQUNBO0FBQ0g7O0FBR0Q7QUFDSTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNIOztBQUdEOzs7Ozs7Ozs7O0FDNWpCQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUVJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJOztBQUVBO0FBRVE7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNSO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBOztBQUVBOztBQUdRO0FBQ0k7O0FBRUE7QUFDSTtBQUNIO0FBRUc7QUFDSDtBQUNKO0FBRUo7QUFDUjs7QUFHRDtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUVIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBRUg7O0FBRUQ7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBR0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNKO0FBR0c7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNIOztBQUdEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERTtBQUdUOztBQUVEOzs7Ozs7Ozs7O0FDek5BOzs7QUFHQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBYUE7O0FBRUE7QUFDSTs7QUFFQTs7QUFFQTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTlE7O0FBU1o7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDeENBOzs7QUFHQTs7QUFFQTs7Ozs7OztBQU9BO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CUTs7QUFzQlo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUk7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBR0c7QUFDSDtBQUNEO0FBQ0E7QUFFSTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNIO0FBRUo7O0FBRUQ7QUFDQztBQUNBOztBQXRFSTs7Ozs7Ozs7OztBQ0pUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSE87QUFLWDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBSFI7QUFLSDs7QUFFRDtBQUNJO0FBRUk7QUFDQTtBQUVJO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFHRDtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQztBQUNHO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFITztBQUtYO0FBQ0g7QUExRkk7Ozs7Ozs7Ozs7QUNKVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUZROztBQUtaOztBQUVJO0FBRUk7QUFDSDtBQUNEOztBQUVBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBRUg7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBR0o7O0FBRUQ7QUFDSTtBQUNIOztBQXpFaUI7O0FBNkV0Qjs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQU5XOztBQVVoQjs7Ozs7Ozs7OztBQ3hGQTs7QUFHQTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVJOztBQUVBOztBQUVBO0FBQ0g7O0FBR0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJOztBQUVBOztBQUVJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFHRDtBQUNBO0FBRUk7QUFDTTtBQURIO0FBS0M7QUFDSDtBQUdHO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBRUk7QUFDQTtBQUVJO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFSTtBQUNBO0FBRUk7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFFSDs7QUFFRDtBQUNBOztBQUVJO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUVJO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNIOztBQUVEO0FBRUg7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFHRztBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFHRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBRUk7QUFFQTtBQUVRO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDUjs7QUFFRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSDs7QUFFRDs7OztBQUlBO0FBRUk7O0FBR0E7QUFDQTtBQUVJO0FBRUk7QUFDQTtBQUNIO0FBR0c7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUdEO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFFSTtBQUNIOztBQUdEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUk7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNIOzs7Ozs7Ozs7O0FDN1VEOztBQUVBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0g7QUFDSjs7QUFFRDs7Ozs7Ozs7OztBQ3BCQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOzs7Ozs7Ozs7O0FDOUJBOzs7O0FBSUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEOztBQUlBOztBQUdBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBR0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUVEOzs7Ozs7Ozs7QUFTQztBQUNHO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0s7QUFFSTtBQUNBO0FBQ0g7QUFDRjtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQXBCUjtBQXNCSDtBQTdKVTs7QUFnS2Y7Ozs7Ozs7Ozs7QUNwS0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYlE7O0FBZ0JaO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUNBO0FBQ0g7QUFDRDtBQUNBOztBQUdBO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFFQTtBQUNBO0FBQ0g7QUFqRUk7Ozs7Ozs7Ozs7QUNBVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWlE7O0FBZ0JaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFFSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDRztBQUNDO0FBQ0E7QUFDQTtBQUNIO0FBMURJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFLQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFFQztBQUlBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFPQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQU9BO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUVJO0FBT0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBRUk7QUFPQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFFSTtBQUlBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDtBQUNDO0FBQ0E7QUFDQTtBQUVDO0FBTUE7QUFDQTtBQUNBO0FBQ0Q7QUFDRDs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFFRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBRUE7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUVBOztBQUVEO0FBQ0E7QUFDQztBQUVBOztBQUVEO0FBQ0E7QUFDQztBQUVBOztBQUVEO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFERztBQUdWOztBQUVEOzs7Ozs7Ozs7O0FDeFFBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNBO0FBRUk7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDtBQXRDSSIsInNvdXJjZXNDb250ZW50IjpbInZhciBDdXNXZWJWaWV3ID0gcmVxdWlyZSgnQ3VzV2ViVmlldycpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIEFkdmVydFNwcml0ZSA6IGNjLlNwcml0ZSxcclxuICAgICAgICBVcmwgOiAnJyxcclxuICAgICAgICB3ZWJWaWV3UHJlZmFiIDogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuXHJcbiAgICB1cGRhdGVBZHZlckl0ZW0gOiBmdW5jdGlvbiAoaW5mbykge1xyXG4gICAgICAgIHRoaXMuVXJsID0gaW5mby5qdW1wdXJsO1xyXG4gICAgICAgIC8vdGhpcy5nZXRTcHJpdGVGcmFtZTIoaW5mby5waWMpXHJcblxyXG4gICAgICAgIFVwZGF0ZVdYSGVhZEljb24oaW5mby5waWMsdGhpcy5BZHZlcnRTcHJpdGUpO1xyXG4gICAgICAgIC8vVXBkYXRlV1hIZWFkSWNvbihcImh0dHA6Ly93eC5xbG9nby5jbi9tbW9wZW4vUG85bWttM1o0MnRvbFlweFVWcFk2bXZDbXFhbGliT3BjSjJqRzNRemE1cWd0aWJPMU5MRk5VRjdpY3dDaWJ4UGljYkdta29pY2lhcUtFSWR2dnZlSUJmRVFxYWw4dmtpYXZISWVxRlQvMC5wbmdcIix0aGlzLkFkdmVydFNwcml0ZSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsQmFja0J0biA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHBvcFZpZXc6IFwiRmluZFZpZXdcIixcclxuICAgICAgICAgICAgYnRuOiBcIkNhbGxCYWNrQnRuXCIsXHJcbiAgICAgICAgICAgIHVybCA6IHRoaXMuVXJsLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLCB7IHRhZzogd2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTogbWVzc2FnZSB9KTtcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBXZWJWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy53ZWJWaWV3UHJlZmFiKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmFkZENoaWxkKFdlYlZpZXcpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIFdlYlZpZXcuc2V0UG9zaXRpb24oY2MucCh3aW5TaXplLndpZHRoLzIsd2luU2l6ZS5oZWlnaHQvMikpO1xyXG4gICAgICAgIFdlYlZpZXcuZ2V0Q29tcG9uZW50KCdDdXNXZWJWaWV3Jykuc2V0V2ViVmlld1VybCh0aGlzLlVybCApO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRTcHJpdGVGcmFtZTI6ZnVuY3Rpb24gKHVybCxzdWNjZXNzQ2IsZmFpbHVyZUNiLHRhcmdldCxvdGhlclNlbmRlcikge1xyXG4gICAgICAgIC8vdXJsID0gdGhpcy5reUhlbHBlciArIHVybDtcclxuXHJcblxyXG5cclxuICAgICAgICAvL2NjLmxvZyhwYWdlMSk7XHJcblxyXG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiggeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IEJBU0U2NC5kZWNvZGVyKHJlc3BvbnNlKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy9jYy5sb2coXCJpbWc9XCIsIGltZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBuZXcgVWludDhBcnJheShyZXNwb25zZSwgMCwgcmVzcG9uc2UubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcInRleHQgPSBcIiArIHRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBCQVNFNjQuZGVjb2RlcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJpbWcuc3JjID0gXCIgKyBpbWcuc3JjKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBjYy5UZXh0dXJlMkQoKTtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUuaW5pdFdpdGhJbWFnZShpbWcpOyAvL2NjLlRleHR1cmUyRC5TUkNfQUxQSEEsIDEsIDEsIGNjLnNpemUoMTA4MCwgMzAwKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmhhbmRsZUxvYWRlZFRleHR1cmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3ZnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkFkdmVydFNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ld2ZyYW1lO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoc3VjY2Vzc0NiICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBzdWNjZXNzQ2IuYXBwbHkodGFyZ2V0LCBbbmV3ZnJhbWUsIG90aGVyU2VuZGVyXSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZihmYWlsdXJlQ2IgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIC8vIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBmYWlsdXJlQ2IuYXBwbHkodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHhoci50aW1lb3V0ID0gNTAwMDtcclxuICAgICAgICB4aHIub3BlbihcIkdFVFwiLCB1cmwsdHJ1ZSk7XHJcbiAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCJ3aW5kb3cuQWxlcnRWaWV3QnRuVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgRV9CVE5fQ0xPU0UgOiAwLCAgICAgICAgLy/lhbPpl63lkoznoa7lrprmjInpkq5cclxuICAgIEVfQlROX0NBTkNMRSA6IDEsICAgICAgIC8v5Y+W5raI5ZKM56Gu5a6a5oyJ6ZKuXHJcbn0pO1xyXG5cclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuZnVuY3Rpb24gQVZpZXcoKSB7XHJcblxyXG5cclxuICAgIHRoaXMucm9vdE5vZGUgICAgICAgICAgID0gbnVsbCA7XHJcbiAgICB0aGlzLmJ0blR5cGVGbGFnICAgICAgICA9IEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0U7XHJcbiAgICB0aGlzLl9wb3NpdGl2ZUZsYWcgICAgICA9IGZhbHNlIDtcclxuICAgIHRoaXMuX25lZ2F0aXZlRmxhZyAgICAgID0gZmFsc2UgO1xyXG4gICAgdGhpcy5fY2FsbGJhY2tQb3NpdGl2ZSAgPSAgbnVsbDtcclxuICAgIHRoaXMuX2NhbGxiYWNrTmVnYXRpdmUgID0gIG51bGwgO1xyXG4gICAgdGhpcy5wb3NpdGl2ZSAgICAgICAgICAgPSAgbnVsbCA7XHJcbiAgICB0aGlzLm5lZ2F0aXZlICAgICAgICAgICA9IG51bGwgO1xyXG4gICAgdGhpcy5wb3NpdGl2ZV9zaW5nbGUgICAgPSBudWxsO1xyXG4gICAgdGhpcy5idG5jbG9zZSAgICAgICAgICAgPSBudWxsO1xyXG4gICAgdGhpcy5wb3NpdGl2ZU5hbWUgICAgICAgPSBcIlwiIDtcclxuICAgIHRoaXMubmVnYXRpdmVOYW1lICAgICAgID0gXCJcIiA7XHJcblxyXG5cclxuXHJcbiAgICB0aGlzLnBvc2l0aXZlQnRSZXNOb3JtYWwgPSBudWxsIDtcclxuXHJcblxyXG4gICAgdGhpcy5yZVNldCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5idG5UeXBlRmxhZyAgICAgICAgPSBBbGVydFZpZXdCdG5UeXBlLkVfQlROX0NMT1NFO1xyXG4gICAgICAgIHRoaXMuX3Bvc2l0aXZlRmxhZyAgICAgID0gZmFsc2UgO1xyXG4gICAgICAgIHRoaXMuX25lZ2F0aXZlRmxhZyAgICAgID0gZmFsc2UgO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrUG9zaXRpdmUgID0gIG51bGw7XHJcbiAgICAgICAgdGhpcy5fY2FsbGJhY2tOZWdhdGl2ZSAgPSAgbnVsbCA7XHJcbiAgICAgICAgdGhpcy5wb3NpdGl2ZSAgICAgICAgICAgPSAgbnVsbCA7XHJcbiAgICAgICAgdGhpcy5uZWdhdGl2ZSAgICAgICAgICAgPSAgIG51bGwgO1xyXG4gICAgICAgIHRoaXMucG9zaXRpdmVfc2luZ2xlICAgID0gICBudWxsO1xyXG4gICAgICAgIHRoaXMuYnRuY2xvc2UgICAgICAgICAgID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvc2l0aXZlTmFtZSAgICAgICA9IFwiXCIgO1xyXG4gICAgICAgIHRoaXMubmVnYXRpdmVOYW1lICAgICAgID0gXCJcIiA7XHJcblxyXG4gICAgIH07XHJcblxyXG4gICAgdGhpcy5kaXNtaXNzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgaWYodGhpcy5yb290Tm9kZSl7XHJcbiAgICAgICAgICAgIHRoaXMucmVTZXQoKTtcclxuICAgICAgICAgICAgdGhpcy5yb290Tm9kZS5yZW1vdmVGcm9tUGFyZW50KHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnJvb3ROb2RlID0gbnVsbCA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKHRpcHMsYnRuVHlwZSwgcGFyZW50LCB0YWcpIHtcclxuICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG5cclxuICAgICAgICB3aW5kb3cubG9hZFByZWZhYnMoXCJwcmVmYWJzL2FsZXJ0Vmlld1wiLCBmdW5jdGlvbiAodmlldykge1xyXG5cclxuICAgICAgICAgICAgc2VsZi5yb290Tm9kZSA9IHZpZXcgO1xyXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZVZpZXcodmlldyx0aXBzLGJ0blR5cGUsIHBhcmVudCk7XHJcbiAgICAgICAgICAgIGlmKHRhZyAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHNlbGYucm9vdE5vZGUudGFnID0gdGFnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxwYXJlbnQpXHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2hvd09uZSA9IGZ1bmN0aW9uKHRpcHMsIGJ0blR5cGUscGFyZW50KVxyXG4gICAge1xyXG4gICAgICAgIGlmIChwYXJlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGRCeVRhZygtMTAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5yZW1vdmVDaGlsZEJ5VGFnKC0xMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNob3codGlwcywgYnRuVHlwZSxwYXJlbnQsIC0xMDApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlVmlldyA9IGZ1bmN0aW9uKG5vZGUsdGlwcyxidG5UeXBlLCBwYXJlbnQpe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyA7XHJcbiAgICAgICAgbm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCxmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYnRuVHlwZUZsYWcgPSAgYnRuVHlwZTtcclxuXHJcbiAgICAgICAgaWYodGlwcyA9PSBcIlwiIHx8IHRpcHMgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRpcHMgPSBcIuacquefpemUmeivr1wiIDtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2YXIgZGVzVHh0ID0gY2MuZmluZChcIkJnL0NvbnRlbnRcIixub2RlKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG5cclxuICAgICAgICBkZXNUeHQuc3RyaW5nID0gdGlwcyA7XHJcbiAgICAgICAgdGhpcy5wb3NpdGl2ZV9zaW5nbGUgPSBjYy5maW5kKFwiQmcvQnRuU3VyZVNpbmdsZVwiLG5vZGUpO1xyXG4gICAgICAgIHRoaXMubmVnYXRpdmUgPSBjYy5maW5kKFwiQmcvQnRuQ2FuY2xlXCIsbm9kZSk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGl2ZSA9IGNjLmZpbmQoXCJCZy9CdG5TdXJlXCIsbm9kZSk7XHJcbiAgICAgICAgdGhpcy5idG5jbG9zZSA9IGNjLmZpbmQoXCJCZy9CdG5DbG9zZVwiLG5vZGUpO1xyXG4gICAgICAgIGlmKHRoaXMuYnRuVHlwZUZsYWcgPT0gQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubmVnYXRpdmUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpdmUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpdmVfc2luZ2xlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuYnRuY2xvc2UuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5uZWdhdGl2ZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aXZlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpdmVfc2luZ2xlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmJ0bmNsb3NlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5wb3NpdGl2ZU5hbWUgIT0gXCJcIiAmJiB0aGlzLnBvc2l0aXZlTmFtZSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZih0aGlzLmJ0blR5cGVGbGFnID09IEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpdmVTaW5nbGVOYW1lKHRoaXMucG9zaXRpdmVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0UG9zaXRpdmVCdXR0b25OYW1lKHRoaXMucG9zaXRpdmVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5uZWdhdGl2ZU5hbWUgIT0gXCJcIiAmJiB0aGlzLm5lZ2F0aXZlTmFtZSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNldE5lZ2F0aXZlQnV0dG9uTmFtZSh0aGlzLm5lZ2F0aXZlTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFkZEJ1dHRvbkxpc3Rlbm5lcigpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIC8vdmFyIHBvc2l0aXZlVGV4dCA9IGNjLmZpbmQoXCJJbWFnZV8xMF8wXCIsdGhpcy5wb3NpdGl2ZSk7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBpZih0aGlzLnBvc2l0aXZlQnRSZXNOb3JtYWwpe1xyXG4gICAgICAgIC8vICAgICB3aW5kb3cubG9hZEltZyh0aGlzLnBvc2l0aXZlQnRSZXNOb3JtYWwsZnVuY3Rpb24oc3ByaXRlRnJhbWUpe1xyXG4gICAgICAgIC8vICAgICAgICAgLy8gdmFyIGJ1dHRvbSA9IHBvc2l0aXZlVGV4dC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSA7XHJcbiAgICAgICAgLy8gICAgICAgICAvLyBidXR0b20uc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuXHJcbiAgICAgICAgd2luZG93LnNjYWxlVG8obm9kZSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB0aGlzLmFkZEJ1dHRvbkxpc3Rlbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgICAgIGlmKHRoaXMubmVnYXRpdmUuYWN0aXZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5uZWdhdGl2ZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQWxlcnRWaWV3LmFkZEJ1dHRvbkxpc3Rlbm5lcixuZWdhdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuYnRuVHlwZUZsYWcgIT0gQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSl7XHJcbiAgICAgICAgICAgICAgICBcdFxyXG4gICAgICAgICAgICAgICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5fY2FsbGJhY2tOZWdhdGl2ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuIF9jYWxsYmFja05lZ2F0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuYnRuY2xvc2UuYWN0aXZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5idG5jbG9zZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQWxlcnRWaWV3LmFkZEJ1dHRvbkxpc3Rlbm5lcixidG5jbG9zZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuYnRuVHlwZUZsYWcgPT0gQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSl7XHJcbiAgICAgICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5fY2FsbGJhY2tOZWdhdGl2ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuIF9jYWxsYmFja05lZ2F0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMucG9zaXRpdmUuYWN0aXZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGl2ZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQWxlcnRWaWV3LmFkZEJ1dHRvbkxpc3Rlbm5lcixwb3NpdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmKHNlbGYuYnRuVHlwZUZsYWcgIT0gQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSl7XHJcbiAgICAgICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VsZi5fY2FsbGJhY2tQb3NpdGl2ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuIF9jYWxsYmFja1Bvc2l0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMucG9zaXRpdmVfc2luZ2xlLmFjdGl2ZSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aXZlX3NpbmdsZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQWxlcnRWaWV3LmFkZEJ1dHRvbkxpc3Rlbm5lcixwb3NpdGl2ZV9zaW5nbGVcIik7XHJcbiAgICAgICAgICAgICAgICBpZihzZWxmLmJ0blR5cGVGbGFnID09IEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0Upe1xyXG4gICAgICAgICAgICAgICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNlbGYuX2NhbGxiYWNrUG9zaXRpdmUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9jYWxsYmFja1Bvc2l0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGl2ZV9zaW5nbGUucmVtb3ZlRnJvbVBhcmVudCgpO1xyXG4gICAgICAgICAgICAvL3RoaXMucG9zaXRpdmVfc2luZ2xlLmdldENvbXBvbmVudChjYy5CdXR0b24pLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9ICxcclxuXHJcblxyXG4gICAgdGhpcy5zZXRQb3NpdGl2ZUJ1dHRvbiA9IGZ1bmN0aW9uIChjYWxsYmFjayxuYW1lKVxyXG4gICAge1xyXG4gICAgICAgIC8vdGhpcy5fcG9zaXRpdmVGbGFnID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja1Bvc2l0aXZlID0gY2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5wb3NpdGl2ZU5hbWUgPSBuYW1lO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldE5lZ2F0aXZlQnV0dG9uID0gIGZ1bmN0aW9uKGNhbGxiYWNrLG5hbWUpXHJcbiAgICB7XHJcbiAgICAgICAgLy90aGlzLl9uZWdhdGl2ZUZsYWcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrTmVnYXRpdmUgPSBjYWxsYmFjaztcclxuICAgICAgICB0aGlzLm5lZ2F0aXZlTmFtZSA9IG5hbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0UG9zaXRpdmVCdXR0b25OYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgbGFibGUgPSBjYy5maW5kKFwibGFiZWxcIix0aGlzLnBvc2l0aXZlKTtcclxuICAgICAgICBsYWJsZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IG5hbWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2V0UG9zaXRpdmVTaW5nbGVOYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgbGFibGUgPSBjYy5maW5kKFwibGFiZWxcIix0aGlzLnBvc2l0aXZlX3NpbmdsZSk7XHJcbiAgICAgICAgbGFibGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNldE5lZ2F0aXZlQnV0dG9uTmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIGxhYmxlID0gY2MuZmluZChcImxhYmVsXCIsdGhpcy5uZWdhdGl2ZSk7XHJcbiAgICAgICAgbGFibGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlbW92ZUZyb21QYXJlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxuXHJcbnZhciBBbGVydFZpZXcgPSB7XHJcblxyXG4gICAgY3JlYXRlICA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEFWaWV3KCk7XHJcbiAgICB9XHJcblxyXG59IDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWxlcnRWaWV3IDtcclxuIiwiLyoqIFxyXG4gKiDpmJ/liJfliqDovb3otYTmupBcclxuICogQXV0aG9yICAgICAgOiBkb25nZ2FuZ1xyXG4gKiBDcmVhdGUgVGltZSA6IDIwMTYuMTIuMTVcclxuICogXHJcbiAqIOS6i+S7tu+8mlxyXG4gKiB0aGlzLm9uUHJvZ3Jlc3MgICAgICDmm7TmlrDov5vluqZcclxuICogdGhpcy5vbk5vTmV0d29yayAgICAg5pat572RXHJcbiAqIHRoaXMub25Db21wbGV0ZSAgICAgIOabtOaWsOWujOaIkFxyXG4gKi9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY2MuQ2xhc3Moe1xyXG4gICAgLyoqIOWIhuaekOW5tuiOt+WPlumcgOimgeabtOaWsOeahOi1hOa6kCAqL1xyXG4gICAgZG93bmxvYWQ6IGZ1bmN0aW9uIChzdG9yYWdlUGF0aCwgbG9jYWxNYW5pZmVzdCwgcmVtb3RlTWFuaWZlc3QpIHtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlUGF0aCAgICAgICA9IHN0b3JhZ2VQYXRoO1xyXG4gICAgICAgIHRoaXMuX2xvY2FsTWFuaWZlc3QgICAgID0gbG9jYWxNYW5pZmVzdDsgXHJcbiAgICAgICAgdGhpcy5fcmVtb3RlTWFuaWZlc3QgICAgPSByZW1vdGVNYW5pZmVzdDtcclxuXHJcbiAgICAgICAgdGhpcy5fbm9jYWNoZSAgICAgICAgICAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9kb3dubG9hZFVuaXRzICAgICA9IFtdOyAgICAgICAgLy8g5LiL6L295paH5Lu25a+56LGh6ZuG5ZCIXHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVVbml0cyAgICAgPSBbXTsgICAgICAgIC8vIOW3suS4i+i9veWujOaIkOWvueixoembhuWQiFxyXG4gICAgICAgIHRoaXMuX2ZhaWxlZFVuaXRzICAgICAgID0gW107ICAgICAgICAvLyDkuIvovb3lpLHotKXmlofku7blr7nosaHpm4blkIhcclxuICAgICAgICB0aGlzLl9kZWxldGVVbml0cyAgICAgICA9IFtdOyAgICAgICAgLy8g6ZyA6KaB5Yig6Zmk5paH5Lu25a+56LGh6ZuG5ZCIXHJcblxyXG4gICAgICAgIHRoaXMuX2Rvd25sb2FkQ29tcGxldGUgID0gMDsgICAgICAgICAvLyDkuIvovb3lrozmiJDnmoTmlofku7bmlbDph49cclxuICAgICAgICB0aGlzLl9kb3dubG9hZEZhaWxlZCAgICA9IDA7ICAgICAgICAgLy8g5LiL6L295aSx6LSl55qE5paH5Lu25pWw6YePXHJcbiAgICAgICAgdGhpcy5fZmFpbENvdW50ICAgICAgICAgPSAwOyAgICAgICAgIC8vIOS4i+i9veWksei0peeahOasoeaVsFxyXG4gICAgICAgIHRoaXMuX2NvbmN1cnJlbnRDdXJyZW50ID0gMDsgICAgICAgICAvLyDlubblj5HmlbDph4/lvZPliY3lgLxcclxuXHJcbiAgICAgICAgdGhpcy5fYW5hbHlzaXNEb3dubG9hZFVuaXRzKCk7XHJcbiAgICAgICAgdGhpcy5fYW5hbHlzaXNEZWxldGVVbml0cygpO1xyXG5cclxuICAgICAgICAvLyDlvZPliY3mgLvmm7TmlrDljZXkvY3mlbDph48gPSDmm7TmlrDlrozmiJDmlofku7bmlbDph48gKyDlvoXmm7TmlrDmlofku7bmlbDph49cclxuICAgICAgICB0aGlzLl90b3RhbFVuaXRzID0gdGhpcy5fZG93bmxvYWRDb21wbGV0ZSArIHRoaXMuX2Rvd25sb2FkVW5pdHMubGVuZ3RoO1xyXG5cclxuICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHlhbHmnIl7MH3kuKrmlofku7bpnIDopoHmm7TmlrBcIi5mb3JtYXQodGhpcy5fZG93bmxvYWRVbml0cy5sZW5ndGgpKTtcclxuICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHlhbHmnIl7MH3kuKrmlofku7bpnIDopoHliKDpmaRcIi5mb3JtYXQodGhpcy5fZGVsZXRlVW5pdHMubGVuZ3RoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gdGhpcy5fZG93bmxvYWRVbml0cy5zbGljZSgwKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB0aGlzLl9kb3dubG9hZEFzc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIuOAkOabtOaWsOOAkeaXoOabtOaWsOaWh+S7tu+8jOabtOaWsOWujOaIkFwiKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMub25Db21wbGV0ZSkgdGhpcy5vbkNvbXBsZXRlKCk7IFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOWvueavlOacrOWcsOmhueebrua4heWNleaVsOaNruWSjOacjeWKoeWZqOa4heWNleaVsOaNru+8jOaJvuWHuuacrOWcsOe8uuWwkeeahOS7peWPiuWSjOacjeWKoeWZqOS4jeS4gOagt+eahOi1hOa6kCAqL1xyXG4gICAgX2FuYWx5c2lzRG93bmxvYWRVbml0cyA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3JlbW90ZU1hbmlmZXN0LmFzc2V0cykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbG9jYWxNYW5pZmVzdC5hc3NldHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuQXNzZXRDb25maWcuZGVidWdSZXMgfHwgdGhpcy5fcmVtb3RlTWFuaWZlc3QuYXNzZXRzW2tleV0ubWQ1ICE9IHRoaXMuX2xvY2FsTWFuaWZlc3QuYXNzZXRzW2tleV0ubWQ1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2MubG9nKFwi44CQ5pu05paw44CR5YeG5aSH5LiL6L295pu05paw55qE6LWE5rqQIHswfVwiLmZvcm1hdChrZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGREb3dubG9hZFVuaXRzKGtleSk7IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNjLmxvZyhcIuOAkOabtOaWsOOAkeWHhuWkh+S4i+i9veacrOaYr+S4jeWtmOWcqOeahOi1hOa6kCB7MH1cIi5mb3JtYXQoa2V5KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGREb3dubG9hZFVuaXRzKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDlr7nmr5TmnKzlnLDpobnnm67muIXljZXmlbDmja7lkozmnI3liqHlmajmuIXljZXmlbDmja7vvIzmib7lh7rmnKzlnLDlpJrlh7rnmoTotYTmupAgKi9cclxuICAgIF9hbmFseXNpc0RlbGV0ZVVuaXRzIDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX2xvY2FsTWFuaWZlc3QuYXNzZXRzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1vdGVNYW5pZmVzdC5hc3NldHMuaGFzT3duUHJvcGVydHkoa2V5KSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY2MubG9nKFwi44CQ5pu05paw44CR5YeG5aSH5Yig6Zmk55qE6LWE5rqQezB9XCIuZm9ybWF0KGtleSkpOyBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlbGV0ZVVuaXRzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOa3u+WKoOS4i+i9veWNleS9jSAqL1xyXG4gICAgX2FkZERvd25sb2FkVW5pdHMgOiBmdW5jdGlvbihrZXkpe1xyXG4gICAgICAgIGlmICh0aGlzLl9yZW1vdGVNYW5pZmVzdC5hc3NldHNba2V5XS5zdGF0ZSAhPSB0cnVlKXtcclxuICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRVbml0cy5wdXNoKGtleSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDov5znqIvniYjmnKznmoTmlofku7YgTUQ1IOWAvOWSjOacrOWcsOS4jeWQjOaXtuaWh+S7tumcgOimgeS4i+i9vVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRDb21wbGV0ZSsrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmgaLlpI3nirbmgIHml7bnmoTkuIvovb3lrozmiJDmlbDph49cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDmlq3nvZHlkI7mgaLlpI3mm7TmlrDnirbmgIEgKi9cclxuICAgIHJlY292ZXJ5IDogZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLl9kb3dubG9hZEFzc2V0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDkuIvovb3otYTmupAgKi9cclxuICAgIF9kb3dubG9hZEFzc2V0IDogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoZ2FtZS5jb25maWcudGV4dFVwZGF0ZSkgdGhpcy5fcmVtb3RlTWFuaWZlc3Quc2VydmVyID0gZ2FtZS5Bc3NldENvbmZpZy50ZXN0Q2RuO1xyXG5cclxuICAgICAgICB2YXIgcmVsYXRpdmVQYXRoID0gdGhpcy5faXRlbXMuc2hpZnQoKTtcclxuICAgICAgICB2YXIgdXJsICAgICAgICAgID0gY2MucGF0aC5qb2luKHRoaXMuX3JlbW90ZU1hbmlmZXN0LnNlcnZlciwgZ2FtZS5Bc3NldENvbmZpZy5saW5lLCByZWxhdGl2ZVBhdGgpOyBcclxuICAgICAgICBcclxuICAgICAgICAvLyDkuIvovb3miJDlip9cclxuICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgLy8g5paH5Lu25L+d5a2Y5Yiw5pys5ZywXHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVBc3NldChyZWxhdGl2ZVBhdGgsIGFzc2V0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOiusOW9leabtOaWsOWujOaIkOeahOaWh+S7tlxyXG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZVVuaXRzLnB1c2gocmVsYXRpdmVQYXRoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOS4i+i9veWujOaIkOeahOaWh+S7tuaVsOmHj+WKoCAxXHJcbiAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkQ29tcGxldGUrKztcclxuXHJcbiAgICAgICAgICAgIGlmIChnYW1lLkFzc2V0Q29uZmlnLmRlYnVnUHJvZ3Jlc3MpXHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHov5vluqYgezB9L3sxfe+8jOW9k+WJjeaciSB7Mn0g5Liq6LWE5rqQ5bm26KGM5LiL6L29XCIuZm9ybWF0KHRoaXMuX2Rvd25sb2FkQ29tcGxldGUsIHRoaXMuX3RvdGFsVW5pdHMsIHRoaXMuX2NvbmN1cnJlbnRDdXJyZW50KSk7IFxyXG5cclxuICAgICAgICAgICAgLy8g6L+Y5Y6f5bm25Y+R5pWw6YePXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbmN1cnJlbnRDdXJyZW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyDmm7TmlrDov5vluqbkuovku7ZcclxuICAgICAgICAgICAgaWYgKHRoaXMub25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzKHJlbGF0aXZlUGF0aCwgdGhpcy5fZG93bmxvYWRDb21wbGV0ZSAvIHRoaXMuX3RvdGFsVW5pdHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDliKTmlq3mmK/lkKbkuIvovb3lrozmiJBcclxuICAgICAgICAgICAgdGhpcy5faXNVcGRhdGVDb21wbGV0ZWQoKTsgIFxyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8g5LiL6L295aSx6LSlXHJcbiAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZhaWxlZFVuaXRzLnB1c2gocmVsYXRpdmVQYXRoKTtcclxuICAgICAgICAgICAgdGhpcy5fY29uY3VycmVudEN1cnJlbnQtLTtcclxuICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRGYWlsZWQrKztcclxuXHJcbiAgICAgICAgICAgIGlmIChnYW1lLkh0dHBFdmVudC5OT19ORVRXT1JLKXsgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Kem5Y+R5pat572R5LqL5Lu2XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY29uY3VycmVudEN1cnJlbnQgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25Ob05ldHdvcmspIHRoaXMub25Ob05ldHdvcmsoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIuOAkOabtOaWsOOAkeS4i+i9vei/nOeoi+i3r+W+hOS4uiB7MH0g55qE5paH5Lu25aSx6LSl77yM6ZSZ6K+v56CB5Li6IHsxfVwiLmZvcm1hdCh1cmwsIGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHov5vluqYgezB9L3sxfSwg5oC75aSE55CG5paH5Lu25pWw5o2u5Li6IHsyfVwiLmZvcm1hdCh0aGlzLl9kb3dubG9hZENvbXBsZXRlLCB0aGlzLl90b3RhbFVuaXRzLCB0aGlzLl9kb3dubG9hZENvbXBsZXRlICsgdGhpcy5fZG93bmxvYWRGYWlsZWQpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1VwZGF0ZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpOyAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZ2FtZS5odHRwLmdldEJ5QXJyYXlidWZmZXIodGhpcy5fbm9DYWNoZSh1cmwpLCBjb21wbGV0ZSwgZXJyb3IpO1xyXG5cclxuICAgICAgICAvLyDlvIDlkK/kuIDkuKrlubbooYzkuIvovb3pmJ/liJdcclxuICAgICAgICB0aGlzLl9jb25jdXJyZW50Q3VycmVudCsrO1xyXG4gICAgICAgIGlmICh0aGlzLl9jb25jdXJyZW50Q3VycmVudCA8IGdhbWUuQXNzZXRDb25maWcuY29uY3VycmVudCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkQXNzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDkuIvovb3lpLHotKXnmoTotYTmupAgKi9cclxuICAgIF9kb3dubG9hZEZhaWxlZEFzc2V0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOS4i+i9veWksei0peeahOaWh+S7tuaVsOmHj+mHjee9rlxyXG4gICAgICAgIHRoaXMuX2Rvd25sb2FkRmFpbGVkID0gMDtcclxuICAgICAgICB0aGlzLl9kb3dubG9hZFVuaXRzICA9IHRoaXMuX2ZhaWxlZFVuaXRzO1xyXG4gICAgICAgIHRoaXMuX2ZhaWxlZFVuaXRzICAgID0gW107XHJcbiAgICAgICAgdGhpcy5faXRlbXMgICAgICAgICAgPSB0aGlzLl9kb3dubG9hZFVuaXRzLnNsaWNlKDApO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faXRlbXMubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkQXNzZXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDliKTmlq3mmK/lkKblhajpg6jmm7TmlrDlrozmiJAgKi9cclxuICAgIF9pc1VwZGF0ZUNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBoYW5kbGVDb3VudCA9IHRoaXMuX2Rvd25sb2FkQ29tcGxldGUgKyB0aGlzLl9kb3dubG9hZEZhaWxlZDsgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWujOaIkOaVsOmHj1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLl90b3RhbFVuaXRzID09IHRoaXMuX2Rvd25sb2FkQ29tcGxldGUpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFqOS4i+i9veWujOaIkFxyXG4gICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHmm7TmlrDlrozmiJBcIik7XHJcblxyXG4gICAgICAgICAgICAvLyDop6blj5Hng63mm7TlrozmiJDkuovku7ZcclxuICAgICAgICAgICAgaWYgKHRoaXMub25Db21wbGV0ZSkgdGhpcy5vbkNvbXBsZXRlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDliKDpmaTmnKzlnLDmr5TmnI3liqHlmajlpJrlh7rnmoTmlofku7ZcclxuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQXNzZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3RvdGFsVW5pdHMgPT0gaGFuZGxlQ291bnQpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFqOWkhOeQhuWujOaIkO+8jOacieS4i+i9veWksei0peeahOaWh+S7tu+8jOmcgOimgemHjeivlVxyXG4gICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHkuIvovb3mlofku7bmgLvmlbDph4/jgIDjgIDvvJpcIiwgdGhpcy5fdG90YWxVbml0cyk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIuOAkOabtOaWsOOAkeS4i+i9veaIkOWKn+eahOaWh+S7tuaVsOmHj++8mlwiLCB0aGlzLl9kb3dubG9hZENvbXBsZXRlKTtcclxuICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR5LiL6L295aSx6LSl55qE5paH5Lu25pWw6YeP77yaXCIsIHRoaXMuX2Rvd25sb2FkRmFpbGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsOWksei0peeahOasoeaVsOWKoCAxXHJcbiAgICAgICAgICAgIHRoaXMuX2ZhaWxDb3VudCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2ZhaWxDb3VudCA8IDMpIHsgXHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHmm7TmlrDph43or5XnrKwgezB9IOasoVwiLmZvcm1hdCh0aGlzLl9mYWlsQ291bnQpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kb3dubG9hZEZhaWxlZEFzc2V0cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR5pu05paw5aSx6LSlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIOinpuWPkeeDreabtOWksei0peS6i+S7tlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25GYWlsZCkgdGhpcy5vbkZhaWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5faXRlbXMubGVuZ3RoID4gMCAmJiB0aGlzLl9jb25jdXJyZW50Q3VycmVudCA8IGdhbWUuQXNzZXRDb25maWcuY29uY3VycmVudCkgeyAgICAgIC8vIOmYn+WIl+S4i+i9vVxyXG4gICAgICAgICAgICB0aGlzLl9kb3dubG9hZEFzc2V0KCk7ICAgIFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOWIoOmZpOacrOWcsOavlOacjeWKoeWZqOWkmuWHuueahOaWh+S7tiAqL1xyXG4gICAgX2RlbGV0ZUFzc2V0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZGVsZXRlVW5pdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlUGF0aCA9IHRoaXMuX2RlbGV0ZVVuaXRzW2ldO1xyXG4gICAgICAgICAgICB2YXIgZmlsZVBhdGggICAgID0gY2MucGF0aC5qb2luKHRoaXMuX3N0b3JhZ2VQYXRoLCByZWxhdGl2ZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoanNiLmZpbGVVdGlscy5yZW1vdmVGaWxlKGZpbGVQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR54mI5pys5aSa5L2Z6LWE5rqQIHswfSDliKDpmaTmiJDlip9cIi5mb3JtYXQoZmlsZVBhdGgpKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHniYjmnKzlpJrkvZnotYTmupAgezB9IOWIoOmZpOWksei0pVwiLmZvcm1hdChmaWxlUGF0aCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOaWh+S7tuS/neWtmOWIsOacrOWcsCAqL1xyXG4gICAgX3NhdmVBc3NldCA6IGZ1bmN0aW9uKHJlbGF0aXZlUGF0aCwgYXNzZXQpe1xyXG4gICAgICAgIGlmIChjYy5zeXMuaXNOYXRpdmUpe1xyXG4gICAgICAgICAgICB2YXIgc3RvcmVEaXJlY3RvcnkgPSBjYy5wYXRoLmpvaW4odGhpcy5fc3RvcmFnZVBhdGgsIHJlbGF0aXZlUGF0aC5zdWJzdHIoMCwgcmVsYXRpdmVQYXRoLmxhc3RJbmRleE9mKFwiL1wiKSkpO1xyXG4gICAgICAgICAgICB2YXIgc3RvcmVQYXRoICAgICAgPSBjYy5wYXRoLmpvaW4odGhpcy5fc3RvcmFnZVBhdGgsIHJlbGF0aXZlUGF0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyDlrZjlgqjnm67lvZVcclxuICAgICAgICAgICAgaWYgKGpzYi5maWxlVXRpbHMuaXNEaXJlY3RvcnlFeGlzdChzdG9yZURpcmVjdG9yeSkgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGpzYi5maWxlVXRpbHMuY3JlYXRlRGlyZWN0b3J5KHN0b3JlRGlyZWN0b3J5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5a2Y5YKo5paH5Lu2XHJcbiAgICAgICAgICAgIGpzYi5maWxlVXRpbHMud3JpdGVEYXRhVG9GaWxlKG5ldyBVaW50OEFycmF5KGFzc2V0KSwgc3RvcmVQYXRoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDop4Tpgb8gSFRUUCDnvJPlrZjpl67popggKi9cclxuICAgIF9ub0NhY2hlOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybCArIFwiP3Q9XCIgKyB0aGlzLl9ub2NhY2hlO1xyXG4gICAgfVxyXG59KSIsIi8qKiBcclxuICog6LWE5rqQ566h55CGXHJcbiAqIEF1dGhvciAgICAgIDogZG9uZ2dhbmdcclxuICogQ3JlYXRlIFRpbWUgOiAyMDE2LjExLjI2XHJcbiAqIFxyXG4gKiDpnIDmsYLvvJpcclxuICogMeOAgeeJiOacrOmFjee9ruaWh+S7tuWvueavlO+8jOaPkOekuuacieaWsOeJiOacrFxyXG4gKiAy44CB54mI5pys5riF5Y2V5paH5Lu25a+55q+U77yM5YiG5p6Q6ZyA6KaB5pu05paw55qE6LWE5rqQ5paH5Lu2XHJcbiAqIDPjgIHmibnph4/kuIvovb3mm7TmlrDnmoTotYTmupDmlofku7bkv53lrZjliLDns7vnu5/mnKzlnLDlrZjlgqjnm67lvZVcclxuICogNOOAgeaJuemHj+WIoOmZpOacjeWKoeWZqOa4heWNleaWh+S7tuS4reayoeacieeahOi1hOa6kOaWh+S7tlxyXG4gKiA144CB5pu05paw5aSx6LSl5oiW5byC5bi45Lit5pat5pe277yM6K6w5b2V5pu05paw54q25oCB77yM5LiL5qyh6Kem5Y+R5pu05paw5pe25oGi5aSN5pu05paw6L+b5bqm77yM5LiN5LiL6L295bey5pu05paw55qE5paH5Lu2XHJcbiAqIDbjgIHmmbrog73pmJ/liJfmm7TmlrDotYTmupDmlofku7bvvIzku6XmuLjmiI8gZnBzIOaVsOaNruWBmuS4uuWKqOaAgeiuoeeul+abtOaWsOmAn+W6pu+8iOaJi+acuuaAp+iDveS4jeWkn++8jOaaguaXtuayoeW/heimgeWBmu+8iVxyXG4gKiA344CB54mI5pys5Zue6YCA5Yqf6IO977yM6YCa6L+H5p+l6K+i55uu5b2V55qE6aG65bqP77yM5oqK54mI5pys54mI5pys55qE5pu05paw5paH5Lu25pS+5Yiw5p+l6K+i55uu5b2V5Lit77yI5oCd6ICD77yJXHJcbiAqIDjjgIHniYjmnKzmlofku7bmkZjopoHpqozor4Hlip/og73vvIjmgJ3ogIPvvIlcclxuICogOeOAgemFjee9ruaWh+S7tueahOaVsOaNruWGheWtmOaYr+ayoeacieWIoOmZpOeahO+8iOaAneiAg+aYr+WQpumcgOimgeWBmuWkhOeQhu+8iVxyXG4gKi9cclxuXHJcbi8vIOacrOWcsOe8k+WtmOWFs+mUruWtl1xyXG52YXIgTE9DQUxfU1RPUkFHRV9GT0xERVIgICAgICAgICAgID0gXCJnYW1lLXJlbW90ZS1hc3NldFwiOyAgICAgICAvLyDniYjmnKzotYTmupDnm67lvZVcclxudmFyIExPQ0FMX1NUT1JBR0VfS0VZX1BST0pFQ1QgICAgICA9IFwidXBkYXRlX3Byb2plY3RcIjsgICAgICAgICAgLy8g5pys5Zyw57yT5a2Y5riF5Y2V5pWw5o2uXHJcbnZhciBMT0NBTF9TVE9SQUdFX0tFWV9VUERBVEVfU1RBVEUgPSBcInVwZGF0ZV9zdGF0ZVwiOyAgICAgICAgICAgIC8vIOacrOWcsOe8k+WtmOabtOaWsOeKtuaAgeaVsOaNru+8iOavj+WujOaIkOS4gOS4qui1hOa6kOS4i+i9veS8muiusOW9leWujOaIkOaVsOaNrumYn+WIlylcclxudmFyIE1PRFVMRV9QUk9KRUNUX01BTklGRVNUX1BBVEggICA9IFwidmVyc2lvbi97MH1fcHJvamVjdFwiOyAgICAgLy8g5qih5Z2X5riF5Y2V6Lev5b6EXHJcblxyXG53aW5kb3cuZ2FtZSA9IHdpbmRvdy5nYW1lIHx8IHt9O1xyXG5cclxuLy8g5LqL5Lu2XHJcbmdhbWUuQXNzZXRFdmVudCA9IHt9O1xyXG5nYW1lLkFzc2V0RXZlbnQuTkVXX1ZFUlNJT04gICAgICAgICAgICAgICAgICAgICAgICA9IFwiYXNzZXRfbmV3X3ZlcnNpb25cIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7LmmK/mnIDmlrDniYjmnKxcclxuZ2FtZS5Bc3NldEV2ZW50Lk5FV19WRVJTSU9OX0ZPVU5EICAgICAgICAgICAgICAgICAgPSBcImFzc2V0X25ld192ZXJzaW9uX2ZvdW5kXCI7ICAgICAgICAgICAgICAgICAgICAgLy8g5om+5Yiw5paw54mI5pysXHJcbmdhbWUuQXNzZXRFdmVudC5TVUNDRVNTICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gXCJhc3NldF9zdWNjZXNzXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOaIkOWKn1xyXG5nYW1lLkFzc2V0RXZlbnQuRkFJTEQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IFwiYXNzZXRfZmFpbGVkXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm7TmlrDlpLHotKVcclxuZ2FtZS5Bc3NldEV2ZW50LlBST0dSRVNTICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBcImFzc2V0X3Byb2dyZXNzXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pu05paw6L+b5bqmXHJcbmdhbWUuQXNzZXRFdmVudC5MT0NBTF9QUk9KRUNUX01BTklGRVNUX0xPQURfRkFJTCAgID0gXCJhc3NldF9sb2NhbF9wcm9qZWN0X21hbmlmZXN0X2xvYWRfZmFpbFwiOyAgICAgIC8vIOiOt+WPlua4uOaIj+S4rei3r+WuieijheWMheS4rei1hOa6kOa4heWNleaWh+S7tuWksei0pVxyXG5nYW1lLkFzc2V0RXZlbnQuUkVNT1RFX1ZFUlNJT05fTUFOSUZFU1RfTE9BRF9GQUlMRCA9IFwiYXNzZXRfcmVtb3RlX3ZlcnNpb25fbWFuaWZlc3RfbG9hZF9mYWlsZFwiOyAgICAvLyDojrflj5bov5znqIvniYjmnKzphY3nva7mlofku7blpLHotKVcclxuZ2FtZS5Bc3NldEV2ZW50LlJFTU9URV9QUk9KRUNUX01BTklGRVNUX0xPQURfRkFJTEQgPSBcImFzc2V0X3JlbW90ZV9wcm9qZWN0X21hbmlmZXN0X2xvYWRfZmFpbGRcIjsgICAgLy8g6I635Y+W6L+c56iL5pu05paw5Y2V5riF5paH5Lu25aSx6LSlXHJcbmdhbWUuQXNzZXRFdmVudC5OT19ORVRXT1JLICAgICAgICAgICAgICAgICAgICAgICAgID0gXCJhc3NldF9ub19uZXR3b3JrXCI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWree9kVxyXG5cclxuLy8g6YWN572uXHJcbmdhbWUuQXNzZXRDb25maWcgICAgICAgICAgICAgICA9IHt9O1xyXG5nYW1lLkFzc2V0Q29uZmlnLmRlYnVnVmVyc2lvbiAgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaXoOinhueJiOacrOWPt+a1i+ivlVxyXG5nYW1lLkFzc2V0Q29uZmlnLmRlYnVnUmVzICAgICAgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaXoOinhui1hOa6kOeJiOacrOWvueavlOa1i+ivlVxyXG5nYW1lLkFzc2V0Q29uZmlnLmRlYnVnUHJvZ3Jlc3MgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaJk+WNsOi/m+W6puaXpeW/l1xyXG5nYW1lLkFzc2V0Q29uZmlnLnRlc3RJcCAgICAgICAgPSBcIjE3Mi4xOC4yNTQuNTZcIjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5rWL6K+V5pyN5Yqh5Zmo5Zyw5Z2AXHJcbmdhbWUuQXNzZXRDb25maWcudGVzdENkbiAgICAgICA9IFwiaHR0cDovL1wiICsgZ2FtZS5Bc3NldENvbmZpZy50ZXN0SXAgKyBcIi91cGRhdGUvXCI7ICAgICAgICAgIC8vIOa1i+ivlSBDRE4g5pyN5Yqh5Zmo5Zyw5Z2AXHJcblxyXG5nYW1lLkFzc2V0Q29uZmlnLmNvbmN1cnJlbnQgICAgPSAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyA5aSn5bm25Y+R5pu05paw5paH5Lu25pWw6YeP77yI5pyJ572R57ucSU/lkozmlofku7ZJT+W5tui9veaVsOmHj+WcqOi+ueeOqea4uOaIj+i+ueS4i+i9veaXtuW7uuiuruS4jei2hei/hzLvvIlcclxuZ2FtZS5Bc3NldENvbmZpZy5saW5lICAgICAgICAgID0gXCJsaW5lMVwiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g54mI5pys57q/6Lev5paH5Lu25aS577yM55So5LqO5pu05paw5pe25LyY5YWI5pu05paw5rKh5pyJ55So55qE57q/6Lev77yM5rWL6K+V5oiQ5Yqf5ZCO5YiH5o2i54Ot5pu0XHJcblxyXG52YXIgQXNzZXRzRG93bmxvYWQgPSByZXF1aXJlKFwiQXNzZXRzRG93bmxvYWRcIik7XHJcbnZhciBBc3NldHNNYW5hZ2VyICA9IGNjLkNsYXNzKHsgXHJcbiAgICBleHRlbmRzIDogY2MuRXZlbnRUYXJnZXQsXHJcblxyXG4gICAgLyoqIOabtOaWsOi/m+W6piAqLyBcclxuICAgIGdldFByb2dyZXNzIDogZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvZ3Jlc3M7XHJcbiAgICB9LCBcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWvueavlOacjeWKoeWZqOeJiOacrOS/oeaBr1xyXG4gICAgICogQHBhcmFtIGFwcE1hbmlmZXN0UGF0aChzdHJpbmcpICAgICAgIOacrOWcsOa4heWNleaWh+S7tui3r+W+hFxyXG4gICAgICovXHJcbiAgICBjaGVjayA6IGZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzVXBkYXRlID09IHRydWUpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR5qih5Z2XezB95q2j5Zyo5pu05paw5LitXCIuZm9ybWF0KG1vZHVsZU5hbWUpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNjLnN5cy5pc05hdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlUGF0aCA9ICgoanNiLmZpbGVVdGlscyA/IGpzYi5maWxlVXRpbHMuZ2V0V3JpdGFibGVQYXRoKCkgOiAnLycpICsgTE9DQUxfU1RPUkFHRV9GT0xERVIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGpzYi5maWxlVXRpbHMuaXNEaXJlY3RvcnlFeGlzdCh0aGlzLl9zdG9yYWdlUGF0aCkgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGpzYi5maWxlVXRpbHMuY3JlYXRlRGlyZWN0b3J5KHRoaXMuX3N0b3JhZ2VQYXRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR54mI5pys5pys5Zyw5a2Y5YKo6Lev5b6EIHswfVwiLmZvcm1hdCh0aGlzLl9zdG9yYWdlUGF0aCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZVBhdGggPSBcIlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fbm9jYWNoZSA9IGdhbWUuZ2V0TG9jYWxUaW1lKCk7IFxyXG4gICAgICAgIHRoaXMuX2FkICAgICAgPSBuZXcgQXNzZXRzRG93bmxvYWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbW9kdWxlTmFtZSAgICAgPSBtb2R1bGVOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5qih5Z2X5ZCNXHJcbiAgICAgICAgdGhpcy5fbW9kdWxlTWFuaWZlc3QgPSBMT0NBTF9TVE9SQUdFX0tFWV9QUk9KRUNUICAgICAgKyBcIl9cIiArIG1vZHVsZU5hbWU7XHJcbiAgICAgICAgdGhpcy5fbW9kdWxlU3RhdGUgICAgPSBMT0NBTF9TVE9SQUdFX0tFWV9VUERBVEVfU1RBVEUgKyBcIl9cIiArIG1vZHVsZU5hbWU7ICBcclxuXHJcbiAgICAgICAgdGhpcy5fYXBwTWFuaWZlc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5a6J6KOF6YeM55qE5riF5Y2V5pWw5o2u77yISlNPTilcclxuICAgICAgICB0aGlzLl9sb2NhbE1hbmlmZXN0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmnKzlnLDlrZjlgqjph4znmoTmuIXljZXmlbDmja7vvIhKU09OKVxyXG4gICAgICAgIHRoaXMuX3JlbW90ZU1hbmlmZXN0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi/nOeoi+abtOaWsOacjeWKoeWZqOeahOa4heWNleaVsOaNru+8iEpTT04pXHJcblxyXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabtOaWsOi/m+W6plxyXG4gICAgICAgIHRoaXMuX2lzVXBkYXRlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuato+WcqOabtOaWsOS4rVxyXG5cclxuICAgICAgICB0aGlzLl9sb2FkTG9jYWxNYW5pZmVzdChNT0RVTEVfUFJPSkVDVF9NQU5JRkVTVF9QQVRILmZvcm1hdChtb2R1bGVOYW1lKSk7IFxyXG4gICAgfSxcclxuXHJcbiAgICAvKiog5byA5aeL5pu05paw54mI5pysICovXHJcbiAgICB1cGRhdGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g6I635Y+W5pys5Zyw5a2Y5YKo5pu05paw54q25oCB5pWw5o2u77yM5aaC5p6c5pyJ5YiZ57un57ut5LiK5qyh55qE5pu05paw77yM5peg5YiZ5LiL6L296L+c56iL5pyN5Yqh5Zmo54mI5pys5riF5Y2V5pWw5o2uXHJcbiAgICAgICAgdmFyIHRlbXBNYW5pZmVzdCA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9tb2R1bGVTdGF0ZSk7XHJcbiAgICAgICAgaWYgKHRlbXBNYW5pZmVzdCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIChjb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDop6PmnpDov5znqIvotYTmupDmuIXljZXmlbDmja5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3RlTWFuaWZlc3QgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmVycm9yKFwi44CQ5pu05paw44CR6L+c56iL6Lev54mI5pys5riF5Y2V5pWw5o2u6Kej5p6Q6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWIhuaekOW5tuS4i+i9vei1hOa6kFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZG93bmxvYWRBc3NldHMoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHojrflj5bov5znqIvot6/lvoTkuLogezB9IOeahOeJiOacrOa4heWNleaWh+S7tuWksei0pVwiLmZvcm1hdCh0aGlzLl9yZW1vdGVNYW5pZmVzdC5yZW1vdGVNYW5pZmVzdCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZ2FtZS5Bc3NldEV2ZW50LlJFTU9URV9QUk9KRUNUX01BTklGRVNUX0xPQURfRkFJTEQpOyBcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGdhbWUuY29uZmlnLnRleHRVcGRhdGUpIHRoaXMuX2xvY2FsTWFuaWZlc3Quc2VydmVyID0gZ2FtZS5Bc3NldENvbmZpZy50ZXN0Q2RuO1xyXG5cclxuICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMuX2xvY2FsTWFuaWZlc3Quc2VydmVyICsgZ2FtZS5Bc3NldENvbmZpZy5saW5lICsgXCIvXCIgKyB0aGlzLl9sb2NhbE1hbmlmZXN0LnJlbW90ZU1hbmlmZXN0O1xyXG4gICAgICAgICAgICBnYW1lLmh0dHAuZ2V0KHRoaXMuX25vQ2FjaGUodXJsKSwgY29tcGxldGUsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIuOAkOabtOaWsOOAkeiOt+WPluS4iuasoeayoeabtOaWsOWujOeahOeJiOacrOa4heWNleabtOaWsOeKtuaAgVwiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW90ZU1hbmlmZXN0ID0gSlNPTi5wYXJzZSh0ZW1wTWFuaWZlc3QpO1xyXG5cclxuICAgICAgICAgICAgLy8g5YiG5p6Q5bm25LiL6L296LWE5rqQXHJcbiAgICAgICAgICAgIHRoaXMuX2Rvd25sb2FkQXNzZXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKiog5Yqg6L295pys5Zyw6aG555uu5Lit6LWE5rqQ5riF5Y2V5pWw5o2uICovXHJcbiAgICBfbG9hZExvY2FsTWFuaWZlc3Q6IGZ1bmN0aW9uIChhcHBNYW5pZmVzdFBhdGgpIHtcclxuICAgICAgICAvLyDliqDovb3mnKzlnLDpobnnm67kuK3otYTmupDmuIXljZXmlbDmja5cclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhhcHBNYW5pZmVzdFBhdGgsIGZ1bmN0aW9uIChlcnJvciwgY29udGVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIuOAkOabtOaWsOOAkeiOt+WPlua4uOaIj+S4rei3r+WuieijheWMheS4rei3r+W+hOS4uiB7MH0g55qE6LWE5rqQ5riF5Y2V5paH5Lu25aSx6LSlXCIuZm9ybWF0KGFwcE1hbmlmZXN0UGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFdmVudChnYW1lLkFzc2V0RXZlbnQuTE9DQUxfUFJPSkVDVF9NQU5JRkVTVF9MT0FEX0ZBSUwpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDlronoo4XljIXkuK3niYjmnKzmuIXljZXmlbDmja7op6PmnpBcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FwcE1hbmlmZXN0ID0gSlNPTi5wYXJzZShjb250ZW50KTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgY2MuZXJyb3IoXCLjgJDmm7TmlrDjgJHlronoo4XljIXkuK3nmoTniYjmnKzmuIXljZXmlbDmja7op6PmnpDplJnor69cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOiOt+WPluacrOWcsOWtmOWCqOS4reeJiOacrOa4heWNleaVsOaNru+8iOS4iuasoeabtOaWsOaIkOWKn+WQjueahOi/nOeoi+a4heWNleaVsOaNru+8iVxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9tb2R1bGVNYW5pZmVzdCk7IFxyXG4gICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbE1hbmlmZXN0ID0gSlNPTi5wYXJzZShkYXRhKTsgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZXJyb3IoXCLjgJDmm7TmlrDjgJHmnKzlnLDniYjmnKzmuIXljZXmlbDmja7op6PmnpDplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIOWuieijheWMheS4reeahOeJiOacrOmrmOS6juacrOWcsOWtmOWCqOeJiOacrO+8jOWImeabv+aNouacrOWcsOWtmOWCqOeJiOacrOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xvY2FsTWFuaWZlc3QudmVyc2lvbiA8IHRoaXMuX2FwcE1hbmlmZXN0LnZlcnNpb24pe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpOacrOWcsOWtmOWCqOS4reeahOW9k+WJjeaooeWdl+eahOaXp+eahOi1hOa6kFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9sb2NhbE1hbmlmZXN0LmFzc2V0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVBhdGggPSBjYy5wYXRoLmpvaW4odGhpcy5fc3RvcmFnZVBhdGgsIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc2IuZmlsZVV0aWxzLmlzRmlsZUV4aXN0KGZpbGVQYXRoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc2IuZmlsZVV0aWxzLnJlbW92ZUZpbGUoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHlronoo4XljIXnmoTniYjmnKzlj7fkuLp7MH3vvIzmnKzlnLDlrZjlgqjniYjmnKzlj7fkuLp7MX3vvIzmm7/mjaLmnKzlnLDlrZjlgqjniYjmnKzmlbDmja5cIi5mb3JtYXQodGhpcy5fYXBwTWFuaWZlc3QudmVyc2lvbiwgdGhpcy5fbG9jYWxNYW5pZmVzdC52ZXJzaW9uKSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2NhbE1hbmlmZXN0ID0gdGhpcy5fYXBwTWFuaWZlc3Q7IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR56ys5LiA5qyh5a6J6KOF77yM6I635Y+W5a6J6KOF54mI5Lit55qE54mI5pys5riF5Y2V5pWw5o2uXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbG9jYWxNYW5pZmVzdCA9IHRoaXMuX2FwcE1hbmlmZXN0OyBcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5qOA5p+l54mI5pys5Y+3XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrVmVyc2lvbigpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDmo4Dmn6XniYjmnKzlj7cgKi9cclxuICAgIF9jaGVja1ZlcnNpb246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgICAgICAgICAvKiog6L+c56iL54mI5pys5pWw5o2u6Kej5p6QICovXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlVmVyc2lvbiA9IEpTT04ucGFyc2UoY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5ri45oiP5Lit6Lev6LWE5rqQ54mI5pys5bCP5LqO6L+c56iL54mI5pys5pe277yM5o+Q56S65pyJ5pu05pawXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5Bc3NldENvbmZpZy5kZWJ1Z1ZlcnNpb24gfHwgdGhpcy5fbG9jYWxNYW5pZmVzdC52ZXJzaW9uIDwgcmVtb3RlVmVyc2lvbi52ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR5b2T5YmN54mI5pys5Y+35Li6IHswfe+8jOacjeWKoeWZqOeJiOacrOWPt+S4uiB7MX0sIOacieaWsOeJiOacrOWPr+abtOaWsFwiLmZvcm1hdCh0aGlzLl9hcHBNYW5pZmVzdC52ZXJzaW9uLCByZW1vdGVWZXJzaW9uLnZlcnNpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGdhbWUuQXNzZXRFdmVudC5ORVdfVkVSU0lPTl9GT1VORCk7ICAgICAgIC8vIOinpuWPkeacieaWsOeJiOacrOS6i+S7tlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLjgJDmm7TmlrDjgJHlvZPliY3kuLrmnIDmlrDniYjmnKxcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNVcGRhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGdhbWUuQXNzZXRFdmVudC5ORVdfVkVSU0lPTik7ICAgICAgICAgICAgIC8vIOinpuWPkeW3suaYr+acgOaWsOeJiOacrOS6i+S7tlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgICAgIGNjLmVycm9yKFwi44CQ5pu05paw44CR6L+c56iL6Lev54mI5pys5pWw5o2u6Kej5p6Q6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwi44CQ5pu05paw44CR6I635Y+W6L+c56iL6Lev5b6E5Li6IHswfSDnmoTniYjmnKzmlofku7blpLHotKVcIi5mb3JtYXQodGhpcy5fbG9jYWxNYW5pZmVzdC5yZW1vdGVWZXJzaW9uKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZ2FtZS5Bc3NldEV2ZW50LlJFTU9URV9WRVJTSU9OX01BTklGRVNUX0xPQURfRkFJTEQpOyBcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChnYW1lLmNvbmZpZy50ZXh0VXBkYXRlKSB0aGlzLl9sb2NhbE1hbmlmZXN0LnNlcnZlciA9IGdhbWUuQXNzZXRDb25maWcudGVzdENkbjtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W6L+c56iL54mI5pys5pWw5o2uXHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuX2xvY2FsTWFuaWZlc3Quc2VydmVyICsgZ2FtZS5Bc3NldENvbmZpZy5saW5lICsgXCIvXCIgKyB0aGlzLl9sb2NhbE1hbmlmZXN0LnJlbW90ZVZlcnNpb247XHJcbiAgICAgICAgZ2FtZS5odHRwLmdldCh0aGlzLl9ub0NhY2hlKHVybCksIGNvbXBsZXRlLCBlcnJvcik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDlvIDlp4vkuIvovb3otYTmupAgKi9cclxuICAgIF9kb3dubG9hZEFzc2V0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOinpuWPkeeDreabtOi/m+W6puS6i+S7tlxyXG4gICAgICAgIHRoaXMuX2FkLm9uUHJvZ3Jlc3MgPSBmdW5jdGlvbihyZWxhdGl2ZVBhdGgsIHBlcmNlbnQpe1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IHBlcmNlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyDorrDlvZXlvZPliY3mm7TmlrDnirbmgIHvvIzmm7TmlrDlpLHotKXml7blgZrkuLrmgaLlpI3nirbmgIHkvb/nlKhcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3RlTWFuaWZlc3QuYXNzZXRzW3JlbGF0aXZlUGF0aF0uc3RhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fbW9kdWxlU3RhdGUsIEpTT04uc3RyaW5naWZ5KHRoaXMuX3JlbW90ZU1hbmlmZXN0KSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGdhbWUuQXNzZXRFdmVudC5QUk9HUkVTUyk7IFxyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8g6Kem5Y+R54Ot5pu05a6M5oiQ5LqL5Lu2XHJcbiAgICAgICAgdGhpcy5fYWQub25Db21wbGV0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDliKDpmaTmm7TmlrDnirbmgIHmlbDmja4gXHJcbiAgICAgICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLl9tb2R1bGVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyDmm7TmlrDmnKzlnLDniYjmnKzmuIXljZXmlbDmja7vvIznlKjkuo7kuIvmrKHmm7TmlrDml7blgZrniYjmnKzlr7nmr5RcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3JlbW90ZU1hbmlmZXN0LmFzc2V0cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzc2V0ID0gdGhpcy5fcmVtb3RlTWFuaWZlc3QuYXNzZXRzW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoYXNzZXQuc3RhdGUpIGRlbGV0ZSBhc3NldC5zdGF0ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fbW9kdWxlTWFuaWZlc3QsIEpTT04uc3RyaW5naWZ5KHRoaXMuX3JlbW90ZU1hbmlmZXN0KSk7IFxyXG5cclxuICAgICAgICAgICAgLy8g6Kem5Y+R54Ot5pu05a6M5oiQ5LqL5Lu2XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZ2FtZS5Bc3NldEV2ZW50LlNVQ0NFU1MpOyBcclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIOinpuWPkeeDreabtOWksei0peS6i+S7tlxyXG4gICAgICAgIHRoaXMuX2FkLm9uRmFpbGQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0aGlzLl9pc1VwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGdhbWUuQXNzZXRFdmVudC5GQUlMRCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICAvLyDop6blj5Hmlq3nvZHkuovku7ZcclxuICAgICAgICB0aGlzLl9hZC5vbk5vTmV0d29yayA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZ2FtZS5Bc3NldEV2ZW50Lk5PX05FVFdPUkspO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWQuZG93bmxvYWQodGhpcy5fc3RvcmFnZVBhdGgsIHRoaXMuX2xvY2FsTWFuaWZlc3QsIHRoaXMuX3JlbW90ZU1hbmlmZXN0KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOaWree9keWQjuaBouWkjeeKtuaAgSAqL1xyXG4gICAgcmVjb3ZlcnkgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuX2FkLnJlY292ZXJ5KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kem5Y+R5LqL5Lu2XHJcbiAgICAgKiBAcGFyYW0gdHlwZShzdHJpbmcpICAgICAg5LqL5Lu257G75Z6LXHJcbiAgICAgKiBAcGFyYW0gYXJncyhvYmplY3QpICAgICAg5LqL5Lu25Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIF9kaXNwYXRjaEV2ZW50IDogZnVuY3Rpb24odHlwZSwgYXJncyl7XHJcbiAgICAgICAgdmFyIGV2ZW50ICAgICAgICAgICA9IG5ldyBjYy5FdmVudC5FdmVudEN1c3RvbSgpO1xyXG4gICAgICAgIGV2ZW50LnR5cGUgICAgICAgICAgPSB0eXBlOyBcclxuICAgICAgICBldmVudC5idWJibGVzICAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0ICAgICAgICA9IHRoaXM7XHJcbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldCA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsgXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiDop4Tpgb8gSFRUUCDnvJPlrZjpl67popggKi9cclxuICAgIF9ub0NhY2hlOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybCArIFwiP3Q9XCIgKyB0aGlzLl9ub2NhY2hlO1xyXG4gICAgfVxyXG59KVxyXG5cclxuLyoqIOmqjOivgeaYr+WQpuacieimhuebluWuieijhe+8jOWuieijheWMheS4reeJiOacrOmrmOS6juacrOWcsOi1hOa6kOaXtu+8jOWIoOmZpOacrOWcsOi1hOa6kOeahOaooeWdl+i1hOa6kCAqL1xyXG5Bc3NldHNNYW5hZ2VyLmNoZWNrID0gZnVuY3Rpb24ocmVtb3RlVmVyc2lvbil7XHJcbiAgICB2YXIgbW9kdWxlVG90YWwgICA9IDA7XHJcbiAgICB2YXIgbW9kdWxlQ3VycmVudCA9IDA7XHJcblxyXG4gICAgLy8g5Yqg6L295a6J6KOF5YyF5Lit55qE54mI5pys5riF5Y2V5paH5Lu2XHJcbiAgICB2YXIgbG9hZEFwcE1hbmlmZXN0ID0gZnVuY3Rpb24obW9kdWxlTmFtZSwgbW9kdWxlcywgdmVyc2lvbnMsIHJlbW90ZVZlcnNpb24pe1xyXG4gICAgICAgIHZhciBhcHBNYW5pZmVzdFBhdGggPSBNT0RVTEVfUFJPSkVDVF9NQU5JRkVTVF9QQVRILmZvcm1hdChtb2R1bGVOYW1lKTtcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhhcHBNYW5pZmVzdFBhdGgsIGZ1bmN0aW9uIChlcnJvciwgY29udGVudCkgeyBcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5lcnJvcihcIuOAkOabtOaWsOOAkemqjOivgeaYr+WQpuacieimhuebluWuieijheaXtu+8jOiOt+WPlua4uOaIj+S4rei3r+WuieijheWMheS4rei3r+W+hOS4uiB7MH0g55qE6LWE5rqQ5riF5Y2V5paH5Lu25aSx6LSlXCIuZm9ybWF0KGFwcE1hbmlmZXN0UGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2VQYXRoID0gKChqc2IuZmlsZVV0aWxzID8ganNiLmZpbGVVdGlscy5nZXRXcml0YWJsZVBhdGgoKSA6ICcvJykgKyBMT0NBTF9TVE9SQUdFX0ZPTERFUik7XHJcbiAgICAgICAgICAgIHZhciBhcHBNYW5pZmVzdCA9IEpTT04ucGFyc2UoY29udGVudCk7IFxyXG4gICAgICAgICAgICB2YXIgYXBwVmVyc2lvbiAgPSBhcHBNYW5pZmVzdC52ZXJzaW9uO1xyXG5cclxuICAgICAgICAgICAgLy8g6I635Y+W5pys5Zyw54mI5pys5riF5Y2V5L+h5oGvXHJcbiAgICAgICAgICAgIHZhciBtb2R1bGVNYW5pZmVzdCA9IExPQ0FMX1NUT1JBR0VfS0VZX1BST0pFQ1QgKyBcIl9cIiArIG1vZHVsZU5hbWU7XHJcbiAgICAgICAgICAgIHZhciBtYW5pZmVzdCAgICAgICA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShtb2R1bGVNYW5pZmVzdCk7IFxyXG4gICAgICAgICAgICBpZiAobWFuaWZlc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsb2NhbE1hbmlmZXN0ID0gSlNPTi5wYXJzZShtYW5pZmVzdCk7IFxyXG4gICAgICAgICAgICAgICAgdmFyIGxvY2FsVmVyc2lvbiAgPSBsb2NhbE1hbmlmZXN0LnZlcnNpb247XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5a6J6KOF5YyF5Lit55qE54mI5pys6auY5LqO5pys5Zyw5a2Y5YKo54mI5pys77yM5YiZ5pu/5o2i5pys5Zyw5a2Y5YKo54mI5pys5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxWZXJzaW9uIDwgYXBwVmVyc2lvbil7IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWIoOmZpOacrOWcsOWtmOWCqOS4reeahOW9k+WJjeaooeWdl+eahOaXp+eahOi1hOa6kFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBsb2NhbE1hbmlmZXN0LmFzc2V0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVBhdGggPSBjYy5wYXRoLmpvaW4oc3RvcmFnZVBhdGgsIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc2IuZmlsZVV0aWxzLmlzRmlsZUV4aXN0KGZpbGVQYXRoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc2IuZmlsZVV0aWxzLnJlbW92ZUZpbGUoZmlsZVBhdGgpOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uc1ttb2R1bGVOYW1lXSA9IGFwcFZlcnNpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInmnKzlnLDmuIXljZXmlbDmja7ml7bvvIzlvZPliY3niYjmnKzlj7fkuLrlronoo4XljIXniYjmnKzlj7dcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVzW21vZHVsZU5hbWVdICA9IG1vZHVsZXNbbW9kdWxlTmFtZV0gPiBhcHBWZXJzaW9uOyAgICAgICAvLyDmnInmnKzlnLDmuIXljZXmlbDmja7ml7bvvIzlronljZPljIXniYjmnKzlj7flsI/kuo7ov5znqIvniYjmnKzlj7dcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbnNbbW9kdWxlTmFtZV0gPSBsb2NhbFZlcnNpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyJ5pys5Zyw5riF5Y2V5pWw5o2u5pe277yM5b2T5YmN54mI5pys5Y+35Li65pys5Zyw54mI5pys5Y+3XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlc1ttb2R1bGVOYW1lXSAgPSBtb2R1bGVzW21vZHVsZU5hbWVdID4gbG9jYWxWZXJzaW9uOyAgICAgLy8g5pyJ5pys5Zyw5riF5Y2V5pWw5o2u5pe277yM5pys5Zyw5riF5Y2V54mI5pys5Y+35bCP5LqO6L+c56iL54mI5pys5Y+3XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHZlcnNpb25zW21vZHVsZU5hbWVdID0gYXBwVmVyc2lvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmsqHmnInmnKzlnLDmuIXljZXmlbDmja7ml7bvvIzlvZPliY3niYjmnKzlj7fkuLrlronoo4XljIXniYjmnKzlj7dcclxuICAgICAgICAgICAgICAgIG1vZHVsZXNbbW9kdWxlTmFtZV0gID0gbW9kdWxlc1ttb2R1bGVOYW1lXSA+IGFwcFZlcnNpb247ICAgICAgICAgICAvLyDmsqHmnInmnKzlnLDmuIXljZXmlbDmja7ml7bvvIzlronljZPljIXniYjmnKzlj7flsI/kuo7ov5znqIvniYjmnKzlj7dcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW9kdWxlQ3VycmVudCsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZHVsZUN1cnJlbnQgPT0gbW9kdWxlVG90YWwpe1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlbW90ZVZlcnNpb24pIHJlbW90ZVZlcnNpb24obW9kdWxlcywgdmVyc2lvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5ri45oiP5omA5pyJ5qih5Z2X55qE6YWN572u5paH5Lu2XHJcbiAgICB2YXIgdXJsID0gXCJcIjsgXHJcblxyXG4gICAgaWYgKGdhbWUuY29uZmlnLnVzZVNTTCl7XHJcbiAgICAgICAgdXJsID0gXCJodHRwczovL3swfTozMDAxL2NvbnN0aW5mby92ZXJzaW9uP3Q9ezF9XCIuZm9ybWF0KGdhbWUuY29uZmlnLmdhdGVTb2NrZXRJcCwgZ2FtZS5nZXRMb2NhbFRpbWUoKSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHVybCA9IFwiaHR0cDovL3swfTozMDAxL2NvbnN0aW5mby92ZXJzaW9uP3Q9ezF9XCIuZm9ybWF0KGdhbWUuY29uZmlnLmdhdGVTb2NrZXRJcCwgZ2FtZS5nZXRMb2NhbFRpbWUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGdhbWUuY29uZmlnLnRleHRVcGRhdGUpIHVybCA9IFwiaHR0cDovL3swfTozMDAxL2NvbnN0aW5mby92ZXJzaW9uLmpzb24/dD17MX1cIi5mb3JtYXQoZ2FtZS5Bc3NldENvbmZpZy50ZXN0SXAsIGdhbWUuZ2V0TG9jYWxUaW1lKCkpO1xyXG5cclxuICAgIC8vIOWKoOi9vea4uOaIj+aooeWdl+W9k+WJjeacgOWJjeeJiOacrOWPt+aVsOaNrlxyXG4gICAgZ2FtZS5odHRwLmdldCh1cmwsIGZ1bmN0aW9uKHZlcnNpb25fanNvbil7XHJcbiAgICAgICAgdmFyIGpzb24gICAgID0gSlNPTi5wYXJzZSh2ZXJzaW9uX2pzb24pO1xyXG4gICAgICAgIHZhciBtb2R1bGVzICA9IGpzb24ubW9kdWxlcztcclxuICAgICAgICB2YXIgdmVyc2lvbnMgPSB7fTtcclxuICAgICAgICBnYW1lLkFzc2V0Q29uZmlnLmxpbmUgPSBqc29uLmxpbmU7XHJcblxyXG4gICAgICAgIC8vIOiuoeeul+a4uOaIj+WFseacieWkmuWwkeS4quaooeWdl1xyXG4gICAgICAgIGZvcih2YXIgbW9kdWxlTmFtZSBpbiBtb2R1bGVzKXtcclxuICAgICAgICAgICAgbW9kdWxlVG90YWwrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOi9veWFpea4uOaIj+aJgOacieWuieijheWMheS4reeahOaooeWdl+eJiOacrOaVsOaNrlxyXG4gICAgICAgIGZvcih2YXIgbW9kdWxlTmFtZSBpbiBtb2R1bGVzKXtcclxuICAgICAgICAgICAgbG9hZEFwcE1hbmlmZXN0KG1vZHVsZU5hbWUsIG1vZHVsZXMsIHZlcnNpb25zLCByZW1vdGVWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9LmJpbmQodGhpcykpO1xyXG59XHJcblxyXG4vKiogXHJcbiAqIOWIoOmZpOaooeWdlyBcclxuICogQHBhcmFtIG1vZHVsZU5hbWUoc3RyaW5nKSAgICDmqKHlnZflkI1cclxuICovXHJcbkFzc2V0c01hbmFnZXIuZGVsZXRlID0gZnVuY3Rpb24obW9kdWxlTmFtZSl7XHJcbiAgICB2YXIgc3RvcmFnZVBhdGggPSAoKGpzYi5maWxlVXRpbHMgPyBqc2IuZmlsZVV0aWxzLmdldFdyaXRhYmxlUGF0aCgpIDogJy8nKSArIExPQ0FMX1NUT1JBR0VfRk9MREVSKTtcclxuICAgIHZhciBkYXRhICAgICAgICA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0tFWV9QUk9KRUNUICsgXCJfXCIgKyBtb2R1bGVOYW1lKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGxvY2FsTWFuaWZlc3QgPSBKU09OLnBhcnNlKGRhdGEpOyBcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBsb2NhbE1hbmlmZXN0LmFzc2V0cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbGVQYXRoID0gY2MucGF0aC5qb2luKHN0b3JhZ2VQYXRoLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzYi5maWxlVXRpbHMuaXNGaWxlRXhpc3QoZmlsZVBhdGgpKXtcclxuICAgICAgICAgICAgICAgICAgICBqc2IuZmlsZVV0aWxzLnJlbW92ZUZpbGUoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgY2MuZXJyb3IoXCLjgJDmm7TmlrDjgJHliKDpmaTmqKHlnZfml7Ys5pys5Zyw54mI5pys5riF5Y2V5pWw5o2u6Kej5p6Q6ZSZ6K+vXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZX1BST0pFQ1QgICAgICArIFwiX1wiICsgbW9kdWxlTmFtZSk7XHJcbiAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKExPQ0FMX1NUT1JBR0VfS0VZX1VQREFURV9TVEFURSArIFwiX1wiICsgbW9kdWxlTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmdhbWUuYXNzZXQgPSBtb2R1bGUuZXhwb3J0cyA9IEFzc2V0c01hbmFnZXI7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzE5LlxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBBVURJT19CVE5fQ0xJQ0sgOiAgICAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvQ29tU2NlbmUvU291bmQvYnRuY2xpY2subXAzXCIsXHJcbiAgICBBVURJT19CVE5fQkVUIDogICAgICAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvQ29tU2NlbmUvU291bmQvY29pbnNmbHkubXAzXCIsXHJcbiAgICBBVURJT19USU1FIDogICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvQ29tU2NlbmUvU291bmQvZGFvamlzaGkubXAzXCIsXHJcbiAgICBBVURJT19TSVQgOiAgICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvQ29tU2NlbmUvU291bmQvc2l0Lm1wM1wiLFxyXG59OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMwLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxuLypcclxuICogdHlwZSBVU19SRVFfU0NPUkVfTElTVF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVRX1NDT1JFX0xJU1RfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFUV9TQ09SRV9MSVNUX1Qgc3RydWN0IHtcclxuIElzQ3JlYXRlIGludDggYGpzb246XCJpc2NyZWF0ZWAgLy8w77ya5Y+C5LiO55qE54mM5bGALCAxOiDliJvlu7rnmoTniYzlsYBcclxuIFN0YXJ0ICAgIGludCAgYGpzb246XCJzdGFydFwiYCAgIC8v5LuO5ZOq6YeM5byA5aeLXHJcbiBUb3RhbCAgICBpbnQgIGBqc29uOlwidG90YWxcImAgICAvL+WkmuWwkeS4qlxyXG4gfVxyXG4gfVxyXG5cclxuICogKi9cclxuXHJcbmZ1bmN0aW9uIEJhbm5lckxpc3RSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0JBTk5FUl9MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhbm5lckxpc3RSZXFQYWNrZXQuc2VuZFwiKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQmFubmVyTGlzdFJlcVBhY2tldDtcclxuXHJcblxyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8zMC5cclxuICovXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG4vKlxyXG4gKiBcclxuICogXHJcbnR5cGUgVVNfUkVTUF9CQU5ORVJfTElTVF9UIHN0cnVjdCB7XHJcbiAgIEpzb25IZWFkXHJcbiAgIFJlc3BIZWFkXHJcbiAgIExpc3QgW11CQU5ORVJfSU5GT19UIGBqc29uOlwibGlzdFwiYFxyXG59XHJcbnR5cGUgQkFOTkVSX0lORk9fVCBzdHJ1Y3Qge1xyXG4gICBUaXRsZSAgIHN0cmluZyBganNvbjpcInRpdGxlXCJgXHJcbiAgIFBpYyAgICAgc3RyaW5nIGBqc29uOlwicGljXCJgXHJcbiAgIEp1bXBVcmwgc3RyaW5nIGBqc29uOlwianVtcHVybFwiYFxyXG59XHJcblxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIEJhbm5lckxpc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0JBTk5FUl9MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuYmFubmVybGlzdCA9IG1zZy5saXN0O1xyXG4gICAgICAgIC8vdmFyIGpzb24gPSBKU09OLnBhcnNlKEJBU0U2NC5kZWNvZGVyKG1zZy5wYXJhbSkpO1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJhbm5lckxpc3RSZXNwUGFja2V0OyIsInZhciBCYXNlVmlldyA9IHJlcXVpcmUoXCJCYXNlVmlld1wiKTtcclxudmFyIFNvY2tldE1hbmFnZXIgPSByZXF1aXJlKCdTb2NrZXRNYW5hZ2VyJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGJnIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlUG9wXCIpO1xyXG4gICAgICAgIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCAgPSAtMSA7XHJcbiAgICAgICAgdGhpcy5odHRwTWVzc2FnZUxpc3RlbmVySUQgICA9IC0xIDtcclxuICAgICAgICB0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEID0gLTE7XHJcblxyXG4gICAgICAgIC8vIHNvY2tldOa2iOaBr1xyXG4gICAgICAgIHRoaXMuYWRkU29ja2V0TGlzdGVuZXIoKTtcclxuXHJcbiAgICAgICAgLy8gaHR0cOa2iOaBr1xyXG4gICAgICAgIHRoaXMuYWRkSHR0cExpc3RlbmVyKCk7XHJcblxyXG4gICAgICAgIC8vIOacrOWcsOa2iOaBr+ebkeWQrFxyXG4gICAgICAgIHRoaXMuYWRkTG9jYWxNZXNzYWdlTGlzdGVuZXIoKTtcclxuXHJcbiAgICAgICAgY2MubG9nKCdCYXNlUG9wOm9uTG9hZCcpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgY2MubG9nKFwic3RvcCBldmVudFwiKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ0Jhc2VQb3A6b25EZXN0cm95Jyk7XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VQb3Auc29ja2V0TWVzc2FnZUxpc3RlbmVySUQ9XCIsIHRoaXMuaHR0cE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgICAgICBpZiAodGhpcy5odHRwTWVzc2FnZUxpc3RlbmVySUQgIT0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZW1vdmVMaXN0ZW5lcih0aGlzLmh0dHBNZXNzYWdlTGlzdGVuZXJJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuaHR0cE1lc3NhZ2VMaXN0ZW5lcklEID0gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYy5sb2coXCJCYXNlUG9wLmxvY2FsTWVzc2FnZUxpc3RlbmVySUQ9XCIsIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCk7XHJcbiAgICAgICAgaWYgKHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCAhPSAtMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlbW92ZUxpc3RlbmVyKHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCA9IC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVBvcC5zb2NrZXRNZXNzYWdlTGlzdGVuZXJJRD1cIiwgdGhpcy5zb2NrZXRNZXNzYWdlTGlzdGVuZXJJRCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0TWVzc2FnZUxpc3RlbmVySUQgIT0gLTEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZW1vdmVMaXN0ZW5lcih0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgICAgICAgICAgdGhpcy5zb2NrZXRNZXNzYWdlTGlzdGVuZXJJRCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy9zb2NrZXTmtojmga9cclxuICAgIGFkZFNvY2tldExpc3RlbmVyOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEID0gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZihldmVudCA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZXZlbnQudGFnIDtcclxuICAgICAgICAgICAgICAgIC8v6L+e5o6l5pyN5Yqh5Zmo5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5TT0NLRVRfQ09OTkVDVEVEKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/mlq3lvIDov57mjqVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuU09DS0VUX0RJU0NPTk5FQ1RFRClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6L+e5o6l5LitXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT0gd2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9DT05ORUNUSU5HKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/ov57mjqXlpLHotKVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuTVNHX05FVFdPUktfRkFJTFVSRSlcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aUtuWIsOa2iOaBr1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5TT0NLRVRfTUVTU0FHRSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uTWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT0gd2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU2NlbmVNc2coZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICBjYy5sb2coXCJCYXNlUG9wLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEPVwiLCB0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vaHR0cOa2iOaBr+ebkeWQrFxyXG4gICAgYWRkSHR0cExpc3RlbmVyOmZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5odHRwTWVzc2FnZUxpc3RlbmVySUQgPSAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3cuSHR0cE1lc3NhZ2UsZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50ID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRhZyA9IGV2ZW50LnRhZyA7XHJcblxyXG4gICAgICAgICAgICBpZih0YWcgPT0gd2luZG93Lkh0dHBNZXNzYWdlVHlwZS5IVFRQX05PVElGSUNBVElPTil7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9uSHR0cFJlc3BvbnNlKGV2ZW50Lm1zZyk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHRhZyA9PSB3aW5kb3cuSHR0cE1lc3NhZ2VUeXBlLk5PVElGWV9IVFRQX1JTUF9FUlJPUil7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgICAgICBjYy5sb2coXCJCYXNlUG9wLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEPVwiLCB0aGlzLmh0dHBNZXNzYWdlTGlzdGVuZXJJRCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pys5Zyw5raI5oGv55uR5ZCsXHJcbiAgICBhZGRMb2NhbE1lc3NhZ2VMaXN0ZW5lciA6IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgICAgIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCA9IEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LkxvY2FsTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Mb2NhbE1lc3NhZ2UoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVBvcC5sb2NhbE1lc3NhZ2VMaXN0ZW5lcklEPVwiLCB0aGlzLmxvY2FsTWVzc2FnZUxpc3RlbmVySUQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIG9uTG9jYWxNZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRhZyA9IGV2ZW50LnRhZyA7XHJcblxyXG4gICAgICAgIGlmKHRhZyA9PSB3aW5kb3cuTG9jYWxNc2dUeXBlLlNFTkRNU0dfVElNRU9VVClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubXNnU2VuZFRpbWVPdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0YWcgPT0gd2luZG93LkxvY2FsTXNnVHlwZS5VUERBVEVfVVNFUklORk8pe1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uSHR0cFJlc3BvbnNlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIWV2ZW50LmlzU3VjY2VlZCl7XHJcbiAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvblNjZW5lTXNnIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB9LFxyXG5cclxuICAgIHNjYWxlVG8gOiBmdW5jdGlvbiggbm9kZSwgZmxhZyl7XHJcbiAgICAgICAgbm9kZS5zZXRTY2FsZSgwKTtcclxuICAgICAgICB2YXIgc2NhbGVUMCA9ICBudWxsO1xyXG4gICAgICAgIGlmKCBmbGFnICl7XHJcbiAgICAgICAgICAgIHNjYWxlVDAgPSAgY2Muc2NhbGVUbygwLjEsMS4wKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSkgO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBzY2FsZVQwID0gIGNjLnNjYWxlVG8oMC4xLDAuOCkuZWFzaW5nKGNjLmVhc2VCYWNrT3V0KCkpIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vZGUucnVuQWN0aW9uKHNjYWxlVDApO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRVc2VyRGV0YWlsIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5nZXRVc2VyRGV0YWlsXCIpO1xyXG4gICAgICAgIHZhciBkZXRhaWwgPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfVVNFUl9ERVRBSUxfQ01EX0lEKTtcclxuICAgICAgICBpZiAoZGV0YWlsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZGV0YWlsLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIExlZnRJblRvIDogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgd2luU2l6ZSA9IGNjLmRpcmVjdG9yLmdldFdpblNpemUoKTtcclxuICAgICAgICAvL25vZGUucG9zaXRpb24ueCA9IG5vZGUucG9zaXRpb24ueCAtIHdpblNpemUud2lkdGg7XHJcbiAgICAgICAgLy9ub2RlLnNldFBvc2l0aW9uWChub2RlLnBvc2l0aW9uLnggLSB3aW5TaXplLndpZHRoKTtcclxuICAgICAgICBub2RlLnJ1bkFjdGlvbihjYy5tb3ZlVG8oMC4xLGNjLnAobm9kZS5wb3NpdGlvbi54ICsgd2luU2l6ZS53aWR0aCxub2RlLnBvc2l0aW9uLnkpKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGRpc21pc3MgOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjYy5sb2coJ0Jhc2VQb3A6ZGlzbWlzcycpO1xyXG4gICAgICAgIHRoaXMubm9kZS5yZW1vdmVGcm9tUGFyZW50KHRydWUpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBCYXNlVmlldyA9IHJlcXVpcmUoXCJCYXNlVmlld1wiKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIFNvY2tldE1hbmFnZXIgPSByZXF1aXJlKCdTb2NrZXRNYW5hZ2VyJyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIEFsZXJ0VmlldyA9IHJlcXVpcmUoJ0FsZXJ0VmlldycpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBcclxuICAgIC8vIHByb3BlcnRpZXM6XHJcbiAgICAvLyB7XHJcbiAgICAvLyAgICAgbV9zZW5kSGVhcnRCZWF0ICAgICAgICA6IHRydWUgLFxyXG4gICAgLy8gfSxcclxuICAgIFxyXG4gICAgaW5pdEJhc2VJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucFRvYXN0VmlldyAgICAgICAgICA9IG51bGwgO1xyXG4gICAgICAgIHRoaXMubV9wTmV0QWxlcnQgICAgICAgICA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VIb3VUYWkgICAgICAgID0gIGZhbHNlIDtcclxuXHJcbiAgICAgICAgdGhpcy5iQmVnaW5IZWFydCAgICAgICAgID0gZmFsc2UgO1xyXG4gICAgICAgIHRoaXMuTm93UmVjb25uZWN0ICAgICAgICA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNHYW1pbmcgICAgICAgICAgICA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLm5ldFJlU3RhcnRDbnQgICAgICAgPSAwIDtcclxuICAgICAgICB0aGlzLm5ldENvdW50ICAgICAgICAgICAgPSAwO1xyXG4gICAgICAgIHRoaXMubmV0VGltZVRvdGFsICAgICAgICA9IDAgO1xyXG4gICAgICAgIHRoaXMuZGlzTmV0VGltZSAgICAgICAgICA9IDA7XHJcbiAgICAgICAgdGhpcy5uZXRTdHJlbmd0aCAgICAgICAgID0gMCA7XHJcbiAgICAgICAgdGhpcy5tX2xsU2VuZFRpbWUgICAgICAgID0gMCAsXHJcblxyXG4gICAgICAgIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCAgPSAgMCA7XHJcbiAgICAgICAgdGhpcy5odHRwTWVzc2FnZUxpc3RlbmVySUQgID0gIDAgO1xyXG4gICAgICAgIHRoaXMuc29ja2V0TWVzc2FnZUxpc3RlbmVySUQgID0gIDAgO1xyXG4gICAgICAgIHRoaXMuR2FtZUluZm9MaXN0ZW5lcklEICA9ICAwIDtcclxuXHJcbiAgICAgICAgdGhpcy5tX2lzTmV0Q29ubmVjdGluZyA9IHRydWUgO1xyXG5cclxuICAgICAgICB0aGlzLmlzT25MaW5lID0gdHJ1ZSA7XHJcbiAgICAgICAgdGhpcy5vbkdhbWVCYWNrID0gZmFsc2UgO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUub25Mb2FkXCIpO1xyXG4gICAgICAgIHRoaXMuaW5pdEJhc2VJbmZvKCk7XHJcbiAgICAgICAgLy9zb2NrZXTmtojmga9cclxuICAgICAgICB0aGlzLmFkZFNvY2tldExpc3RlbmVyKCkgO1xyXG4gICAgICAgIC8vaHR0cOa2iOaBr1xyXG4gICAgICAgIHRoaXMuYWRkSHR0cExpc3RlbmVyKCk7XHJcbiAgICAgICAgLy/mnKzlnLDmtojmga/nm5HlkKxcclxuICAgICAgICB0aGlzLmFkZExvY2FsTWVzc2FnZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgLy/lvJXmk47kv6Hmga9cclxuICAgICAgICB0aGlzLmFkZEdhbWVJbmZvTGlzdGVuZXIoKTtcclxuXHJcbiAgICAgICAgLy/lnLrmma/liIfmjaLpnIDopoHph43mlrDorr7nva7lv4Pot7NcclxuICAgICAgICBpZiAoU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzQ29ubmVjdGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydEhlYXJ0QmVhdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5vbkRlc3Ryb3lcIik7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuc2VuZEhlYXJ0QmVhdCk7XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlbW92ZUxpc3RlbmVyKHRoaXMuaHR0cE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZW1vdmVMaXN0ZW5lcih0aGlzLmxvY2FsTWVzc2FnZUxpc3RlbmVySUQpO1xyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlbW92ZUxpc3RlbmVyKHRoaXMuc29ja2V0TWVzc2FnZUxpc3RlbmVySUQpO1xyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlbW92ZUxpc3RlbmVyKHRoaXMuR2FtZUluZm9MaXN0ZW5lcklEKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGFkZEdhbWVJbmZvTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUuYWRkR2FtZUluZm9MaXN0ZW5lclwiKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgICAgIHRoaXMuR2FtZUluZm9MaXN0ZW5lcklEID0gd2luZG93Lkdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LkdhbWVFbmdpbmVJbmZvLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gZXZlbnQudGFnIDtcclxuICAgICAgICAgICAgICAgICAgICBpZih0YWcgPT0gd2luZG93LkdhbWVJbmZvLkdhbWVIaWRlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblBhdXNlKCkgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRhZyA9PSB3aW5kb3cuR2FtZUluZm8uR2FtZVNob3cpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uUmVzdW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGFnID09IHdpbmRvdy5HYW1lSW5mby5OZXRPbmxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uTmV0T25saW5lKCkgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHRhZyA9PSB3aW5kb3cuR2FtZUluZm8uTmV0T2ZmbGluZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25OZXRPZmZsaW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvblBhdXNlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLndhcm4oXCLmuLjmiI/mmoLlgZxcIilcclxuICAgICAgICB0aGlzLm9uR2FtZUJhY2sgPSB0cnVlIDtcclxuICAgICAgICBjYy5hdWRpb0VuZ2luZS5wYXVzZUFsbCgpIDtcclxuICAgICAgICBjYy5nYW1lLnBhdXNlKCk7XHJcbiAgICAgICAgU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmRpc2Nvbm5lY3QoKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG9uUmVzdW1lIDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLndhcm4oXCLmuLjmiI/mgaLlpI1cIilcclxuICAgICAgICB0aGlzLm9uR2FtZUJhY2sgPSBmYWxzZSA7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lQWxsKCkgO1xyXG4gICAgICAgIGNjLmdhbWUucmVzdW1lKCk7XHJcbiAgICAgICAgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5iTG9naW4pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIVNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5pc0Nvbm5lY3RlZCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUhvdVRhaSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkucmVTdGFydFNvY2tldCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIG9uTmV0T2ZmbGluZSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgY2Mud2FybihcIue9kee7nOaWreW8gFwiKVxyXG4gICAgICAgIHRoaXMuaXNPbkxpbmUgPSBmYWxzZSA7XHJcbiAgICAgICAgLy8gU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAvLyBUb2FzdFZpZXcuc2hvdyhcIue9kee7nOi/nuaOpeS4reaWre+8jOivt+ajgOafpee9kee7nCFcIilcclxuICAgIH0sXHJcblxyXG4gICAgb25OZXRPbmxpbmUgOiBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgY2Mud2FybihcIue9kee7nOaBouWkjVwiKVxyXG4gICAgICAgIHRoaXMuaXNPbkxpbmUgPSB0cnVlIDtcclxuICAgICAgICBpZiAoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJMb2dpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzQ29ubmVjdGVkKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlSG91VGFpID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZVN0YXJ0U29ja2V0KCk7XHJcbiAgICAgICAgICAgICAgICAvLyBUb2FzdFZpZXcuc2hvdyhcIue9kee7nOaBouWkje+8jOmHjeaWsOi/nuaOpeacjeWKoeWZqFwiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vU2hvcE1vZGVsLmdldEluc3RhbmNlKCkudXBkYXRlVXNlckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVG9hc3RWaWV3LnNob3coXCLnvZHnu5zmgaLlpI1cIilcclxuICAgIH0sXHJcblxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL3NvY2tldOa2iOaBr1xyXG4gICAgYWRkU29ja2V0TGlzdGVuZXI6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLmFkZFNvY2tldExpc3RlbmVyXCIpO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEID0gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGV2ZW50LnRhZyA7XHJcbiAgICAgICAgICAgICAgICAvL+i/nuaOpeacjeWKoeWZqOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuU09DS0VUX0NPTk5FQ1RFRClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU29ja2V0Q29ubmVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aWreW8gOi/nuaOpVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5TT0NLRVRfRElTQ09OTkVDVEVEKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Tb2NrZXREaXNjb25uZWN0ZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6L+e5o6l5LitXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT0gd2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9DT05ORUNUSU5HKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Tb2NrZXRDb25uZWN0aW5nKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+i/nuaOpeWksei0pVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5NU0dfTkVUV09SS19GQUlMVVJFKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/mlLbliLDmtojmga9cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuU09DS0VUX01FU1NBR0UpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbk1lc3NhZ2UoZXZlbnQpIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25TY2VuZU1zZyhldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sdGhpcyk7XHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy9odHRw5raI5oGv55uR5ZCsXHJcbiAgICBhZGRIdHRwTGlzdGVuZXI6ZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5hZGRIdHRwTGlzdGVuZXJcIik7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmh0dHBNZXNzYWdlTGlzdGVuZXJJRCA9ICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5hZGRFdmVudExpc3RlbmVyKHdpbmRvdy5IdHRwTWVzc2FnZSxmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFnID0gZXZlbnQudGFnIDtcclxuXHJcbiAgICAgICAgICAgIGlmKHRhZyA9PSB3aW5kb3cuSHR0cE1lc3NhZ2VUeXBlLkhUVFBfTk9USUZJQ0FUSU9OKXtcclxuICAgICAgICAgICAgICAgIHNlbGYub25IdHRwUmVzcG9uc2UoZXZlbnQubXNnKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodGFnID09IHdpbmRvdy5IdHRwTWVzc2FnZVR5cGUuTk9USUZZX0hUVFBfUlNQX0VSUk9SKXtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mnKzlnLDmtojmga/nm5HlkKxcclxuICAgIGFkZExvY2FsTWVzc2FnZUxpc3RlbmVyIDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5hZGRMb2NhbE1lc3NhZ2VMaXN0ZW5lclwiKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgICAgIHRoaXMubG9jYWxNZXNzYWdlTGlzdGVuZXJJRCA9IEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LkxvY2FsTWVzc2FnZSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZihldmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkxvY2FsTWVzc2FnZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LHRoaXMpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25TY2VuZU1zZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQgO1xyXG4gICAgICAgIC8vY2MubG9nKClcclxuICAgICAgICBzd2l0Y2goY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTE9HSU5fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgLy90aGlzLmNhbGxVcGRhdGVNb25leSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19LSUNLX09VVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUFsZXJ0Vmlldyhtc2cuZGVzYyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX05PVElGWV9PV05FUl9DT05GSVJNX1NJVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeU93bmVyQ29uZmlybVNpdChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX09XTkVSX0NPTkZJUk1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5Pd25lckNvbmZpcm1TaXQobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfTk9URklZX09XTkVSX1RBQkxFSU5GT19DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTm90aWZ5T3duZXJUYWJsZU92ZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9GSU5EX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25GaW5kUm9vbShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX05PVElGWV9PV05FUl9DT05GSVJNX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25DbHViQWRkTXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9PV05FUl9STV9NRU1CRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsdWJSbU1lbShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0VYQ0hBTkdFX0dPTERfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkV4Y2hhbmdlR29sZE1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1VTRVJfREVUQUlMX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Vc2VyRGV0YWlsKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgVVNfTk9USUZZX1BBWV9PUEVSQVRFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYXlSZXN1bHQobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfTk9USUZZX0lOX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlJbkdhbWUobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9DUkVBVEVfQ09TVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ3JlYXRlVGFibGVDb3N0KG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfQ0xVQl9VUEdSQURFX0NPU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNsdWJVcGdyYWRlQ29zdChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfTkVXX01TR19OVU1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1pbWVNc2dOdW0obXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfQklORF9SRUZFUlJBTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmluZ1JlZmVycmFsKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgLypcclxuICAgICAgICAqIFJFVF9SRVBFQVRfUkVHSVNURVIgICAgICAgICA6IC0xMDAwLCAvL+acjeWKoeWZqOmHjeWkjeazqOWGjCjmnI3liqHlmajlhoXpg6jmtojmga8pXHJcbiAgICAgICAgIFJFVF9OT1RfQ0FMTF9CQU5LRVIgICAgICAgICA6IC0xOSwgICAvL+mdnuaKouW6hOeKtuaAgVxyXG4gICAgICAgICBSRVRfVVNFUl9PRkZMSU5FICAgICAgICAgICAgOiAtMTgsICAgLy/njqnlrrbnprvnur9cclxuICAgICAgICAgUkVUX05PVF9DTElDS19BR0FJTiAgICAgICAgIDogLTE3LCAgIC8v6K+35Yu/6aKR57mB54K55Ye7XHJcbiAgICAgICAgIFJFVF9TRUFUX0hBVkVfUExBWUVSICAgICAgICA6IC0xNiwgICAvL+aCqOmAieaLqeeahOW6p+S9jeW3sue7j+iiq+WNoOmihizor7fku47mlrDpgInmi6lcclxuICAgICAgICAgUkVUX1NFQVRfTk9UX0VYSVNUICAgICAgICAgIDogLTE1LCAgIC8v5oKo6YCJ5oup55qE5bqn5L2N5LiN5a2Y5ZyoXHJcbiAgICAgICAgIFJFVF9QTEFZRVJfQUNUSVZFICAgICAgICAgICA6IC0xNCwgICAvL+aCqOato+WcqOa4uOaIj+S4rSzkuI3og73nprvlvIBcclxuICAgICAgICAgUkVUX1BMQVlFUl9IQVZFX0xFQVZFICAgICAgIDogLTEzLCAgIC8v5oKo5bey57uP56a75byAXHJcbiAgICAgICAgIFJFVF9QQVJBTV9FUlJPUiAgICAgICAgICAgICA6IC0xMiwgICAvL+WPguaVsOmUmeivr1xyXG4gICAgICAgICBSRVRfREVTVFJPWUVEX1BSSVZBVEVfVEJBTEUgOiAtMTEsICAgLy/niYzlsYDlt7LplIDmr4FcclxuICAgICAgICAgUkVUX1RBQkxFX0ZVTEwgICAgICAgICAgICAgIDogLTEwLCAgIC8v56eB5Lq65oi/54iG5ruhXHJcbiAgICAgICAgIFJFVF9HQU1FX1BMQVlFUl9GVUxMICAgICAgICA6IC05LCAgICAvL+ahjOWtkOmHjOmdoueahOeOqeWutuW3sua7oVxyXG4gICAgICAgICBSRVRfR0FNRV9UQUJMRV9GVUxMICAgICAgICAgOiAtOCwgICAgLy/muLjmiI/mnI3liqHlmajmoYzlrZDniIbmu6FcclxuICAgICAgICAgUkVUX0RCX0VSUk9SICAgICAgICAgICAgICAgIDogLTcsICAgIC8v5pWw5o2u5bqT6ZSZ6K+vXHJcbiAgICAgICAgIFJFVF9OT1RfRklORF9UQUJMRSAgICAgICAgICA6IC02LCAgICAvL+ahjOWtkOS4jeWtmOWcqFxyXG4gICAgICAgICBSRVRfTk9UX0ZJTkRfR0FNRV9TRVJWRVIgICAgOiAtNSwgICAgLy/mnKrmib7liLDljLnphY3mnI3liqHlmahcclxuICAgICAgICAgUkVUX1NFUlZFUl9BQk5PUk1BTCAgICAgICAgIDogLTQsICAgIC8v5pyN5Yqh5byC5bi4XHJcbiAgICAgICAgIFJFVF9VU0VSX1JFUEVBVF9MT0dJTiAgICAgICA6IC0zLCAgICAvL+aCqOeahOi0puWPt+W3sue7j+WcqOWFtuS7luWcsOeCueeZu+W9lVxyXG4gICAgICAgICBSRVRfVVNFUktFWV9FUlJPUiAgICAgICAgICAgOiAtMiwgICAgLy/nlKjmiLfpqozor4HlpLHotKUs6K+36YeN5paw55m75b2VXHJcbiAgICAgICAgIFJFVF9JTExFR0FMX1JFUSAgICAgICAgICAgICA6IC0xLCAgICAvL+mdnuazleivt+axgijlpoI65aaC5p6c5aS06YOodWlkLOS4jeaYr+iHquW3seeahHNvY2tldOmTvuaOpeeahHVpZOWwseebtOaOpei/lOWbnizlj43mvI/mtJ4pXHJcbiAgICAgICAgKiAqL1xyXG5cclxuICAgICAgICBpZiAobXNnLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5jb2RlID09ICBTb2NrZXRSZXRDb2RlLlJFVF9OT1RfRklORF9HQU1FX1NFUlZFUiB8fFxyXG4gICAgICAgICAgICAgICAgbXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfTk9UX0ZJTkRfVEFCTEUgfHxcclxuICAgICAgICAgICAgICAgIG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1BBUkFNX0VSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0hhbGxTY2VuZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX0lMTEVHQUxfUkVRIHx8XHJcbiAgICAgICAgICAgICAgICBtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TRVJWRVJfQUJOT1JNQUwpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0LnNldFBvc2l0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0xvYWRpbmdTY2VuZScpO1xyXG4gICAgICAgICAgICAgICAgfSwgXCLpgIDlh7rmuLjmiI9cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5zZW5kSGVhcnRCZWF0KTtcclxuICAgICAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBhbGVydC5zaG93KG1zZy5kZXNjICsgXCIs6K+36YCA5Ye65ri45oiP6YeN5paw6L+b5YWl77yBXCIsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfVVNFUktFWV9FUlJPUiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICBtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9VU0VSX1JFUEVBVF9MT0dJTilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFsZXJ0ID0gQWxlcnRWaWV3LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnTG9hZGluZ1NjZW5lJyk7XHJcbiAgICAgICAgICAgICAgICB9LFwi6YCA5Ye65ri45oiPXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuc2VuZEhlYXJ0QmVhdCk7XHJcbiAgICAgICAgICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQuc2hvdyhtc2cuZGVzYyArIFwiLOivt+mAgOWHuua4uOaIj+mHjeaWsOi/m+WFpe+8gVwiLEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBbGVydFZpZXcobXNnLmRlc2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExvYWRpbmdWaWV3LmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQmluZ1JlZmVycmFsIDogZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICBpZiAobXNnLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnJlZmVycmFsQ29kZSA9IG1zZy5yZWZlcnJhbGlkO1xyXG4gICAgICAgIFRvYXN0Vmlldy5zaG93KFwi57uR5a6a5oiQ5YqfXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvblBheVJlc3VsdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgLy8gYWxlcnQuc2hvdyhcIuaCqOiKsei0ueS6hsKlXCIgKyBtc2cucGFyYW0uY29zdCArIFwi6LSt5Lmw5LqGXCIgKyBtc2cucGFyYW0ub3BkaWFtb25kICsgXCLkuKrpkrvnn7PvvIzlt7LmiJDlip/liLDotKZcIiwgQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgYWxlcnQuc2hvdyhtc2cucGFyYW0uZGVzYyk7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyRGV0YWlsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ3JlYXRlVGFibGVDb3N0IDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5vbkNyZWF0ZVRhYmxlQ29zdCBjb2RlPVwiLCBtc2cuY29kZSk7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlICE9IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuQnVsbEZpZ2h0VGFibGVDb3N0ID0gbXNnLmxpc3Q7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ2x1YlVwZ3JhZGVDb3N0IDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5vbkNsdWJVcGdyYWRlQ29zdCBjb2RlPVwiLCBtc2cuY29kZSk7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuQ2x1YlVwZ3JhZGVDb3N0ID0gbXNnLmxpc3Q7XHJcbiAgICAgICAgY2MubG9nKFwiSGFsbFNjZW5lLm9uQ2x1YlVwZ3JhZGVDb3N0IGxpc3Q9XCIsIG1zZy5saXN0KTtcclxuICAgIH0sXHJcblxyXG4gICAgb25NaW1lTXNnTnVtIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5OZXdNc2dOdW0gPSBmYWxzZTtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGlmICgobXNnLnN5c251bSA+IDApIHx8IChtc2cuY2x1Ym51bSA+IDApIHx8IChtc2cubWFpbG51bSA+IDApKSB7XHJcbiAgICAgICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuTmV3TXNnTnVtID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5sb2coXCJvbk1pbWVNc2dOdW0gc3lzbnVtPVwiLCBtc2cuc3lzbnVtLCBcIiBjbHVibnVtPVwiLCBtc2cuY2x1Ym51bSwgXCIgbWFpbG51bT1cIiwgbXNnLm1haWxudW0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBvblVzZXJEZXRhaWw6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25Vc2VyRGV0YWlsXCIpO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5nb2xkICAgID0gbXNnLmdvbGQ7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmRpYW1vbmQgPSBtc2cuZGlhbW9uZDtcclxuICAgIH0sXHJcblxyXG4gICAgb25FeGNoYW5nZUdvbGRNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgYWxlcnQuc2hvdyhtc2cudGlwcyAsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckRldGFpbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25DbHViQWRkTXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIHVpZCAgPSBtc2cucGFyYW0udWlkO1xyXG4gICAgICAgIHZhciBuYW1lID0gbXNnLnBhcmFtLm5hbWU7XHJcbiAgICAgICAgdmFyIGNsdWJuYW1lID0gbXNnLnBhcmFtLmNsdWJuYW1lO1xyXG4gICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2VuZENsdWJPd25lckNvbmZpcm0oMSx1aWQsbXNnLmNsdWJpZCk7XHJcbiAgICAgICAgfSxcIuWQjOaEj1wiKTtcclxuICAgICAgICBhbGVydC5zZXROZWdhdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2VuZENsdWJPd25lckNvbmZpcm0oMCx1aWQsbXNnLmNsdWJpZCk7XHJcbiAgICAgICAgfSxcIuaLkue7nVwiKTtcclxuXHJcbiAgICAgICAgYWxlcnQuc2hvdyhuYW1lICsgXCIoXCIgKyBtc2cucGFyYW0udWlkICsgXCIpXCIgKyBcIueUs+ivt+WKoOWFpeaCqOeahCdcIiArIGNsdWJuYW1lICsgXCIn5L+x5LmQ6YOo77yM5piv5ZCm5ZCM5oSP77yfXCIsIEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0FOQ0xFKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DbHViUm1NZW0gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5wYXJhbS51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCkge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaCqOiiq+enu+mZpOS/seS5kOmDqFwiICsgbXNnLnBhcmFtLmNsdWJuYW1lICsgXCIoXCIgKyAgbXNnLnBhcmFtLmNsdWJpZCArIFwiKVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyggbXNnLnBhcmFtLm5hbWUgKyBcIuiiq+enu+mZpOS/seS5kOmDqFwiICsgbXNnLnBhcmFtLmNsdWJuYW1lICsgXCIoXCIgKyAgbXNnLnBhcmFtLmNsdWJpZCArIFwiKVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRDbHViT3duZXJDb25maXJtIDogZnVuY3Rpb24gKHJlc3VsdCx1aWQsY2x1YmlkKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHVpZCA6IHVpZCxcclxuICAgICAgICAgICAgaXNhbGxvdyA6IHJlc3VsdCwgICAvLyAxOuWQjOaEj++8jDI65ouS57udXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUubm90aWZ5T3duZXJDb25maXJtU2l0LmRhdGEgPSBcIixKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuQ0xVQl9SRVFfT1dORVJfQ09ORklSTV9DTURfSUQpLnNlbmQoZGF0YSxjbHViaWQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBub3RpZnlJbkdhbWUgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm5vdGlmeUluR2FtZSwgbXNnXCIgKyBtc2cuZ2FtZXN2Y2lkICsgXCIsdGFibGVpZFwiICsgbXNnLnRhYmxlaWQpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQgPSBtc2cuZ2FtZXN2Y2lkO1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCAgID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnQnVsbGZpZ2h0X0dhbWVTY2VuZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25GaW5kUm9vbSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25GaW5kUm9vbSxtc2dcIiArIG1zZy5nYW1lc3ZjaWQgKyBcIix0YWJsZWlkXCIgKyBtc2cudGFibGVpZCk7XHJcbiAgICAgICAgTG9hZGluZ1ZpZXcuZGlzbWlzcygpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkID0gbXNnLmdhbWVzdmNpZDtcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnRhYmxlaWQgPSBtc2cudGFibGVpZDtcclxuXHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnQnVsbGZpZ2h0X0dhbWVTY2VuZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG9uTm90aWZ5T3duZXJUYWJsZU92ZXIgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm9uTm90aWZ5T3duZXJUYWJsZU92ZXJcIikgO1xyXG5cclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBnYW1lc3ZjaWQgOiBtc2cuZ2FtZXN2Y2lkLFxyXG4gICAgICAgICAgICAgICAgdGFibGVpZCA6IG1zZy50YWJsZWlkLFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZWlkIDogbXNnLnByaXZhdGVpZCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgYWxlcnQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZW5kRmluZFRhYmxlKDEsZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXCLov5vlhaXmuLjmiI9cIik7XHJcbiAgICAgICAgICAgIGFsZXJ0LnNldE5lZ2F0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIH0sXCLlj5bmtohcIik7XHJcblxyXG5cclxuICAgICAgICAgICAgYWxlcnQuc2hvdyhcIuaIv+mXtO+8mlwiICsgbXNnLnRhYmxlaWQgKyBcIihcIisgbXNnLnRhYmxlbmFtZSArIFwiKSzliankvZlcIiArIG1zZy5yZW1haW50aW1lICsgXCLnp5LlsLHopoHnu5PmnZ/kuobvvIzmmK/lkKbnq4vliLvov5vlhaXmiL/pl7TvvJ9cIiAsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DQU5DTEUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRGaW5kVGFibGUgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5zZW5kRmluZFRhYmxlLHJvb21JZCA9IFwiICsgZGF0YS5wcml2YXRlaWQpO1xyXG4gICAgICAgIHZhciBjcmVhdGVSb29tID0gTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0ZJTkRfVEFCTEVfQ01EX0lEKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgcHJpdmF0ZWlkIDogZGF0YS5wcml2YXRlaWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJvb20uc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG5vdGlmeU93bmVyQ29uZmlybVNpdCA6IGZ1bmN0aW9uKG1zZylcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUubm90aWZ5T3duZXJDb25maXJtU2l0LG1zZyA9IFwiICsgbXNnLmdhbWVzdmNpZCk7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IG1zZy5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgOiBtc2cudGFibGVpZCxcclxuICAgICAgICAgICAgcGxheWVydWlkIDogbXNnLnNpdFVpZCxcclxuICAgICAgICAgICAgcHJpdmF0ZWlkIDogbXNnLnByaXZhdGVpZCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgYWxlcnQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLnNlbmRPd25lckNvbmZpcm0oMSxkYXRhKTtcclxuICAgICAgICB9LFwi5ZCM5oSPXCIpO1xyXG4gICAgICAgIGFsZXJ0LnNldE5lZ2F0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5zZW5kT3duZXJDb25maXJtKDIsZGF0YSk7XHJcbiAgICAgICAgfSxcIuaLkue7nVwiKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgc2hvdyA9IG1zZy5uYW1lICsgXCIoXCIgKyBtc2cuc2l0VWlkICsgXCIp55Sz6K+35pC65bimXCIgICsgbXNnLmNvaW4rIFwi54mb5Y+L5biB6L+b5YWl5oKoXCJcclxuICAgICAgICAgICAgICAgICAgICArIG1zZy5wcml2YXRlaWQgKyBcIihcIisgbXNnLnRhYmxlbmFtZSArIFwiKeeJjOWxgCzmmK/lkKblkIzmhI8/XCI7XHJcblxyXG4gICAgICAgIGFsZXJ0LnNob3coc2hvdywgQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DQU5DTEUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZW5kT3duZXJDb25maXJtIDogZnVuY3Rpb24gKHJlc3VsdCwgZGF0YSkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBnYW1lc3ZjaWQgOiBkYXRhLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCAgIDogZGF0YS50YWJsZWlkLFxyXG4gICAgICAgICAgICBwbGF5ZXJ1aWQgOiBkYXRhLnBsYXllcnVpZCxcclxuICAgICAgICAgICAgcHJpdmF0ZWlkIDogZGF0YS5wcml2YXRlaWQsXHJcbiAgICAgICAgICAgIHJlc3VsdCAgICA6IHJlc3VsdCwgICAvLyAxOuWQjOaEj++8jDI65ouS57udXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLnNlbmRPd25lckNvbmZpcm0uZGF0YSA9IFwiLEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfT1dORVJfQ09ORklSTV9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIE93bmVyQ29uZmlybVNpdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUuT3duZXJDb25maXJtU2l0XCIpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVBbGVydFZpZXcgOiBmdW5jdGlvbiAoZGVzYykge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5jcmVhdGVBbGVydFZpZXcsZGVzYyA9IFwiICsgZGVzYyk7XHJcbiAgICAgICAgVG9hc3RWaWV3LnNob3coZGVzYywyKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2NhbE1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUub25Mb2NhbE1lc3NhZ2VcIik7XHJcbiAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRhZyA9IGV2ZW50LnRhZyA7XHJcblxyXG4gICAgICAgIGlmKHRhZyA9PSB3aW5kb3cuTG9jYWxNc2dUeXBlLlNFTkRNU0dfVElNRU9VVClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubXNnU2VuZFRpbWVPdXQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0YWcgPT0gd2luZG93LkxvY2FsTXNnVHlwZS5VUERBVEVfVVNFUklORk8pe1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSAsXHJcblxyXG5cclxuICAgIG9uSHR0cFJlc3BvbnNlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm9uSHR0cFJlc3BvbnNlXCIpO1xyXG4gICAgICAgIGlmKCFldmVudC5pc1N1Y2NlZWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICByZVN0YXJ0U29ja2V0IDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5yZVN0YXJ0U29ja2V0XCIpO1xyXG4gICAgICAgIHRoaXMubV9sbFNlbmRUaW1lID0gLTE7XHJcbiAgICAgICAgU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlU3RhcnRTb2NrZXQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnRIZWFydEJlYXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLnN0YXJ0SGVhcnRCZWF0XCIpO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5zZW5kSGVhcnRCZWF0LCB3aW5kb3cuSEVBUlRfQkVBVF9USU1FKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2VuZEhlYXJ0QmVhdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUuc2VuZEhlYXJ0QmVhdFwiKTtcclxuICAgICAgICBpZiAoU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzQ29ubmVjdGVkKCkpe1xyXG4gICAgICAgICAgICB2YXIgbXNnID0gTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0hFQVJUQkVBVF9DTURfSUQpO1xyXG4gICAgICAgICAgICBpZihtc2cpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9sbFNlbmRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7O1xyXG4gICAgICAgICAgICAgICAgbXNnLnNlbmQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYkJlZ2luSGVhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLnNlbmRIZWFydEJlYXQsbXNnID0gbnVsbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjYy53YXJuKFwiQmFzZVNjZW5lLnNlbmRIZWFydEJlYXQs5pyN5Yqh5Zmo5bCa5pyq6L+e5o6l77yM5b+D6Lez5Y+R6YCB5aSx6LSlXCIpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25DaGVja05ldFJlU3RhcnQgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5vbkNoZWNrTmV0UmVTdGFydFwiKTtcclxuICAgICAgICB0aGlzLm5ldFJlU3RhcnRDbnQgKys7XHJcbiAgICAgICAgaWYodGhpcy5uZXRSZVN0YXJ0Q250ICUgNiA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5yZVN0YXJ0U29ja2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLm5ldFJlU3RhcnRDbnQgPT0gMTgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm5ldFJlU3RhcnRDbnQ9IDA7XHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuTG9jYWxNZXNzYWdlLCB7dGFnOiB3aW5kb3cuTG9jYWxNc2dUeXBlLlNFTkRNU0dfVElNRU9VVH0pO1xyXG4gICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5vbkNoZWNrTmV0UmVTdGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBtc2dTZW5kVGltZU91dCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUubXNnU2VuZFRpbWVPdXRcIik7XHJcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RfdGltZXMgPSA1O1xyXG4gICAgICAgIHRoaXMucmVTdGFydFNvY2tldCgpO1xyXG5cclxuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5zZW5kSGVhcnRCZWF0KTtcclxuXHJcbiAgICAgICAgdGhpcy5Ob3dSZWNvbm5lY3QgPSB0cnVlO1xyXG4gICAgICAgIHZhciB0ZXh0ID0gXCLmgqjnmoTnvZHnu5zov57mjqXotoXml7bvvIzmraPlnKjnlq/ni4LlsJ3or5XmgaLlpI1cIisgNjtcclxuICAgICAgICB0aGlzLnBUb2FzdFZpZXcgID0gVG9hc3RWaWV3LnNob3codGV4dCwgNilcclxuXHJcbiAgICAgICAgdGhpcy5kaXNOZXRUaW1lID0gNjtcclxuICAgICAgICB0aGlzLl9kTmV0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5yZURpc0NvblRpbWUsMSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlRGlzQ29uVGltZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUucmVEaXNDb25UaW1lXCIpO1xyXG4gICAgICAgIGlmKHRoaXMucFRvYXN0VmlldylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzTmV0VGltZSAtPSAxO1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IFwi5oKo55qE572R57uc6L+e5o6l6LaF5pe277yM5q2j5Zyo55av54uC5bCd6K+V5oGi5aSNIFwiICsgdGhpcy5kaXNOZXRUaW1lO1xyXG4gICAgICAgICAgICAvL3RoaXMucFRvYXN0Vmlldy5zZXRUaXBzKHRleHQpO1xyXG4gICAgICAgICAgICB0aGlzLl9kTmV0Q291bnQrKztcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMuZGlzTmV0VGltZSA8PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5yZURpc0NvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wVG9hc3RWaWV3LnJlbW92ZUZyb21QYXJlbnQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBUb2FzdFZpZXcgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3RfdGltZXMgPSA1O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubV9wTmV0QWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubV9wTmV0QWxlcnQuc2V0UG9zaXRpdmVCdXR0b24odGhpcy5yZXBseVJlQ29ubmVjdFllcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fcE5ldEFsZXJ0LnNldE5lZ2F0aXZlQnV0dG9uKHRoaXMucmVwbHlSZUNvbm5lY3RObyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1fcE5ldEFsZXJ0LnNob3coXCLnvZHnu5zov57mjqXotoXml7bvvIzmgqjpnIDopoHnu6fnu63mgaLlpI3muLjmiI/lkJfvvJ9cIixBbGVydFZpZXdCdG5UeXBlLkVfQlROX0NBTkNMRSwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZXBseVJlQ29ubmVjdFllcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUucmVwbHlSZUNvbm5lY3RZZXNcIik7XHJcbiAgICAgICAgdGhpcy5tX3BOZXRBbGVydCA9IG51bGwgO1xyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuTG9jYWxNZXNzYWdlLHt0YWc6d2luZG93LkxvY2FsTXNnVHlwZS5TRU5ETVNHX1RJTUVPVVR9KTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVwbHlSZUNvbm5lY3RObyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUucmVwbHlSZUNvbm5lY3ROb1wiKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2hhbGwnKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2VuZExvZ2luSGFsbCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUuc2VuZExvZ2luSGFsbFwiKTtcclxuICAgICAgICB2YXIgbG9naW4gPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfTE9HSU5fQ01EX0lEKTtcclxuICAgICAgICBpZihsb2dpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxvZ2luLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFVzZXJEZXRhaWwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLmdldFVzZXJEZXRhaWxcIik7XHJcbiAgICAgICAgdmFyIGRldGFpbCA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9VU0VSX0RFVEFJTF9DTURfSUQpO1xyXG4gICAgICAgIGlmIChkZXRhaWwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkZXRhaWwuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25Tb2NrZXREaXNjb25uZWN0ZWQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm9uU29ja2V0RGlzY29ubmVjdGVkXCIpO1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnNlbmRIZWFydEJlYXQpO1xyXG5cclxuICAgICAgICBpZighdGhpcy5vbkdhbWVCYWNrKXtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UodGhpcy5jYWxsTG9naW5TZXJ2ZXIsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25Tb2NrZXRDb25uZWN0aW5nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5vblNvY2tldENvbm5lY3RpbmdcIik7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuc2VuZEhlYXJ0QmVhdCk7XHJcbiAgICAgICAgVG9hc3RWaWV3LnNob3coXCLov57mjqXkuK0uLi5cIik7Ly9cclxuICAgIH0sXHJcblxyXG4gICAgb25Tb2NrZXRDb25uZWN0ZWQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm9uU29ja2V0Q29ubmVjdGVkXCIpO1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLmNhbGxMb2dpblNlcnZlcik7XHJcbiAgICAgICAgdGhpcy5yZWNvbm5lY3RfdGltZXMgPSA1O1xyXG4gICAgICAgIHRoaXMuTm93UmVjb25uZWN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc2VuZExvZ2luSGFsbCgpO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXJ0SGVhcnRCZWF0KCk7XHJcblxyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLndhaXRSZUNvbm5lY3QpO1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnJlRGlzQ29uVGltZSk7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMub25DaGVja05ldFJlU3RhcnQpO1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnJlQWxsRGlzQ29uVGltZSk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMucFRvYXN0VmlldylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMucFRvYXN0Vmlldy5yZW1vdmVGcm9tUGFyZW50KHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBUb2FzdFZpZXcgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLov57mjqXmiJDlip/vvIzmraPlnKjlm57liLDmuLjmiI9cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2hhbmdlSG91VGFpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUhvdVRhaSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLov57mjqXmiJDlip9cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMubV9wTmV0QWxlcnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1fcE5ldEFsZXJ0LnJlbW92ZUZyb21QYXJlbnQodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubV9wTmV0QWxlcnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgd2FpdFJlQ29ubmVjdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgcmVBbGxEaXNDb25UaW1lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJhc2VTY2VuZS5yZUFsbERpc0NvblRpbWVcIik7XHJcbiAgICAgICAgaWYodGhpcy5tX3BOZXRBbGVydClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9wTmV0QWxlcnQucmVtb3ZlRnJvbVBhcmVudCh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5tX3BOZXRBbGVydCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB2YXIgcEFsZXJ0ID0gQWxlcnRWaWV3LmNyZWF0ZSgpO1xyXG4gICAgICAgIC8vIHBBbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbih0aGlzLnJlcGx5UmVDb25uZWN0Tm8pO1xyXG4gICAgICAgIC8vIHBBbGVydC5zaG93KFwi5oKo55qE5ri45oiP55Sx5LqO55+t57q/6ICM5Lit5pat77yM5peg5rOV6YeN5paw6L+e5o6l5Yiw5ri45oiP77yfXCIsIHRoaXMpO1xyXG4gICAgICAgIC8vIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMuZ290b0hhbGxVcGRhdGUsIDIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnb3RvSGFsbFVwZGF0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCYXNlU2NlbmUuZ290b0hhbGxVcGRhdGVcIik7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuZ290b0hhbGxVcGRhdGUpO1xyXG4gICAgICAgIHRoaXMuTm93UmVjb25uZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiaGFsbFwiKVxyXG4gICAgICAgIHRoaXMuYkNoZWNrQ29ubmVjdCA9IHRydWU7XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBvblVwZGF0ZVVzZXJJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHZhciBtb25leSA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5Nb25leSgpIDtcclxuICAgICAgICAvLyBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuU2V0TW9uZXkobW9uZXkpO1xyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIFVwZGF0ZURldmljZVN0YXR1cyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlUGxheWVyTW9uZXkgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgLy8gaWYgKG1zZy5yZXQucmV0Q29kZSA+PSB3aW5kb3cuUkVUX09LKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgaWYobXNnLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKVxyXG4gICAgICAgIC8vICAgICB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZihtc2cudHlwZSA9PSAxKVxyXG4gICAgICAgIC8vICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5TZXRNb25leShtc2cubW9uZXkpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgZWxzZSBpZihtc2cudHlwZSA9PSAyKVxyXG4gICAgICAgIC8vICAgICAgICAge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5mcmVlemVtb25leSA9IG1zZy5tb25leTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LkxvY2FsTWVzc2FnZSx7dGFnOndpbmRvdy5Mb2NhbE1zZ1R5cGUuVVBEQVRFX1VTRVJJTkZPfSk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuXHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZUhlYXJ0QmVhdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgbmV0RGVsdGEgPSBuZXcgRGF0ZSgpLmdldFRpbWUgLSB0aGlzLm1fbGxTZW5kVGltZTtcclxuICAgICAgICB0aGlzLm5ldFRpbWVUb3RhbCArPSBuZXREZWx0YTtcclxuICAgICAgICB0aGlzLm5ldENvdW50Kys7XHJcblxyXG4gICAgICAgIGlmKHRoaXMubmV0Q291bnQgPiA1KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIC8vICB0aGlzLnNlbmROZXRTdHJlbmd0aCh0aGlzLm5ldFRpbWVUb3RhbCk7XHJcbiAgICAgICAgICAgIHRoaXMubmV0VGltZVRvdGFsID0gMDtcclxuICAgICAgICAgICAgdGhpcy5uZXRDb3VudCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmJCZWdpbkhlYXJ0ID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZU9mZmxpbmVSZXVsdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAvLyBPZmZsaW5lUmVzdWx0UGFja2V0KiBwYWNrZXQgPSAoT2ZmbGluZVJlc3VsdFBhY2tldCopbXNnO1xyXG4gICAgICAgIC8vIGlmIChtc2cucmV0LnJldENvZGUgPT0gd2luZG93LlJFVF9PSylcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIGlmKDAgIT0gbXNnLmlzV2luKVxyXG4gICAgICAgIC8vICAgICB7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgdmFyIHN0ck1zZyA9IG1zZy5zdHJJbmZvLm1zZztcclxuXHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgLy8gICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbigpO1xyXG4gICAgICAgIC8vICAgICAgICAgYWxlcnQuc2hvdyhzdHJNc2csXCJ0eHoucG5nXCIsZmFsc2UsbnVsbCx0cnVlLCBwYWNrZXQuaXNXaW4pO1xyXG5cclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbFVwZGF0ZU1vbmV5IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vdXBkYXRlIG1vbmV5XHJcbiAgICAgICAgLy8gdmFyIG1zZyA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZUNvbW1vbk1lc3NhZ2Uod2luZG93LlVQREFURV9QTEFZRVJfTU9ORVkpO1xyXG4gICAgICAgIC8vIGlmKG1zZyl7XHJcbiAgICAgICAgLy8gICAgIG1zZy5zZW5kKDEpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIGNhbGxMb2dpblNlcnZlciA6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBpZiAoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJMb2dpbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmlzQ29ubmVjdGVkKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkxvYWRpbmdWaWV3LmNhbGxiYWNrQnRuTG9naW4gY2FsbExvZ2luU2VydmVyXCIpO1xyXG4gICAgICAgICAgICAgICAgU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLnN0YXJ0U29ja2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9ICxcclxuXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG5cclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMwLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxuXHJcbi8vIC8vIOaOqOiNkOS6ulxyXG4vLyB0eXBlIFVTX1JFUV9CSU5EX1JFRkVSUkFMX1Qgc3RydWN0IHtcclxuLy8gICAgIEpzb25IZWFkXHJcbi8vICAgICBSZWZlcnJhbElkIGludCBganNvbjpcInJlZmVycmFsaWRcImBcclxuLy8gfVxyXG5cclxuZnVuY3Rpb24gQmluZFJlZmVycmFsUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9CSU5EX1JFRkVSUkFMX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkJpbmRSZWZlcnJhbFJlcVBhY2tldC5zZW5kXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgcmVmZXJyYWxpZDogbXNnLnJlZmVycmFsaWQsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmluZFJlZmVycmFsUmVxUGFja2V0O1xyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMwLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIEJpbmRSZWZlcnJhbFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfQklORF9SRUZFUlJBTF9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgdGhpcy5yZWZlcnJhbGlkID0gbXNnLnJlZmVycmFsaWQ7XHJcbiAgICB9O1xyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gQmluZFJlZmVycmFsUmVzcFBhY2tldDsiLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoXCJCYXNlUG9wXCIpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEJ1bGxmaWdodF9HYW1lU2NlbmUgPSByZXF1aXJlKCdCdWxsZmlnaHRfR2FtZVNjZW5lJyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gICA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFJ1bGVWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIE93bmVyVmlldyA6IGNjLlByZWZhYixcclxuICAgICAgICBPd25lckljb24gOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgT3duZXJUZXh0IDogY2MuTGFiZWwsXHJcbiAgICAgICAgQnRuU2hhcmUgOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIHNlbGYucnVuT3V0KCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmluaXRCYXNlRGF0YSgpO1xyXG5cclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlndGhfTWVudS5vbkxvYWQgYm93bmVyPVwiICsgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmJvd25lcik7XHJcbiAgICAgICAgaWYgKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5ib3duZXIgPT0gMSB8fCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5Pd25lckljb24ubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLk93bmVyVGV4dC5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5Pd25lckljb24ubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5Pd25lclRleHQubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1cyA9PSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzVHlwZS5WRVJTSU9OX1RZUEVfQVVESVQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0blNoYXJlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgaW5pdEJhc2VEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2FsbEJhY2tDYXJyeSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50YWJsZVJ1bGVJbmZvID0gXCJcIjtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldFJ1bGVJbmZvIDogZnVuY3Rpb24gKHJ1bGVJbmZvKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZVJ1bGVJbmZvID0gcnVsZUluZm87XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24oZXZlbnQsQ3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgXHRcclxuICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X01lbnUuY2FsbEJhY2tCdG4sYnRuTmFtZSA9IFwiICsgYnRuTmFtZSk7XHJcbiAgICAgICAgaWYoYnRuTmFtZSA9PSBcIkJ0bkV4aXRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9MRUFWRV9HQU1FX0NNRF9JRCkuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5TdGFuZFVwXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBMb2FkaW5nVmlldy5zaG93KFwi5q2j5Zyo56uZ6LW3Li4uXCIpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHN0YXR1cyA6IDIsXHJcbiAgICAgICAgICAgICAgICBzZWF0aWQgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdElkLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfU0lUX0RPV05fQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5TdXBwbGVtZW50XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ2FsbEJhY2tDYXJyeSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5Pd25lclwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIE93bmVyVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuT3duZXJWaWV3KTtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChPd25lclZpZXcpO1xyXG4gICAgICAgICAgICBPd25lclZpZXcuc2V0UG9zaXRpb24oY2MucChjYy5kaXJlY3Rvci5nZXRWaXNpYmxlU2l6ZSgpLndpZHRoLzIsY2MuZGlyZWN0b3IuZ2V0VmlzaWJsZVNpemUoKS5oZWlnaHQvMikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5SdWxlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcnVsZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlJ1bGVWaWV3KTtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChydWxlVmlldyk7XHJcbiAgICAgICAgICAgIHJ1bGVWaWV3LnNldFBvc2l0aW9uKGNjLnAoY2MuZGlyZWN0b3IuZ2V0VmlzaWJsZVNpemUoKS53aWR0aC8yLGNjLmRpcmVjdG9yLmdldFZpc2libGVTaXplKCkuaGVpZ2h0LzIpKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuTmFtZSA9PSBcIkJ0blNoYXJlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfTWVudSA6IEJ0blNoYXJlXCIpO1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkJ1bGxmaWdodF9NZW51XCIsXHJcbiAgICAgICAgICAgICAgICBidG4gICAgIDogXCJCdG5TaGFyZVwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5LaWNrR2FtZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0RJU01JU1NfVEFCTEVfQ01EX0lEKS5zZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDYWxsQmFja0NhcnJ5IDogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsQmFja0NhcnJ5ID0gY2FsbGJhY2s7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ2FsbEJhY2tDYXJyeSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgaWYodGhpcy5jYWxsQmFja0NhcnJ5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsQmFja0NhcnJ5KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJ1bk91dCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2FsbEZ1bmMgPSBjYy5jYWxsRnVuYyh0aGlzLmRpc21pc3MsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MubW92ZUJ5KDAuMixjYy5wKDAsNjk3KSksY2FsbEZ1bmMpKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIEFVRElPX1NFTkRfQ0FSRCA6ICAgICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9TZW5kQ2FyZC5tcDNcIixcclxuICAgIEFVRElPX01BTl9DQUxMQkFOS0VSICA6ICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9tYW5DYWxsYmFua2VyLm1wM1wiLFxyXG4gICAgQVVESU9fTUFOX05PQ0FMTEJBTktFUiAgOiAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL21hbk5vQ2FsbGJhbmtlci5tcDNcIixcclxuICAgIEFVRElPX01BTl9CT01CICA6ICAgICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9tYW40Ym9tYi5tcDNcIixcclxuICAgIEFVRElPX01BTl81RkxPV0VSIDogICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9tYW41Zmxvd2VyYnVsbC5tcDNcIixcclxuICAgIEFVRElPX01BTl81TElUVExFQlVMTDogICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9tYW41bGl0dGxlYnVsbC5tcDNcIixcclxuICAgIEFVRElPX01BTl8zQU5EMiA6ICAgICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9tYW5UaHJlZVdpdGhUd28ubXAzXCIsXHJcbiAgICBBVURJT19NQU5fTElORTogICAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuU3RyYWlnaHQubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDAgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDAubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDEgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDEubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDIgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDIubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDMgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDMubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDQgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDQubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDUgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDUubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDYgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDYubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDcgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDcubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDggOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDgubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDkgOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDkubXAzXCIsXHJcbiAgICBBVURJT19NQU5fQlVMTDEwIDogICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvbWFuYnVsbDEwLm1wM1wiLFxyXG5cclxuICAgIEFVRElPX1dPTUFOX0NBTExCQU5LRVIgIDogICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbkNhbGxiYW5rZXIubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9OT0NBTExCQU5LRVIgIDogIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5Ob0NhbGxiYW5rZXIubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9CT01CICA6ICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW40Ym9tYi5tcDNcIixcclxuICAgIEFVRElPX1dPTUFOXzVGTE9XRVIgOiAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbjVmbG93ZXJidWxsLm1wM1wiLFxyXG4gICAgQVVESU9fV09NQU5fNUxJVFRMRUJVTEw6ICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dvbWFuNWxpdHRsZWJ1bGwubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl8zQU5EMiA6ICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5UaHJlZVdpdGhUd28ubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9MSU5FOiAgICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5TdHJhaWdodC5tcDNcIixcclxuICAgIEFVRElPX1dPTUFOX0JVTEwwIDogICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbmJ1bGwwLm1wM1wiLFxyXG4gICAgQVVESU9fV09NQU5fQlVMTDEgOiAgICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dvbWFuYnVsbDEubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9CVUxMMiA6ICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5idWxsMi5tcDNcIixcclxuICAgIEFVRElPX1dPTUFOX0JVTEwzIDogICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbmJ1bGwzLm1wM1wiLFxyXG4gICAgQVVESU9fV09NQU5fQlVMTDQgOiAgICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dvbWFuYnVsbDQubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9CVUxMNSA6ICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5idWxsNS5tcDNcIixcclxuICAgIEFVRElPX1dPTUFOX0JVTEw2IDogICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbmJ1bGw2Lm1wM1wiLFxyXG4gICAgQVVESU9fV09NQU5fQlVMTDcgOiAgICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dvbWFuYnVsbDcubXAzXCIsXHJcbiAgICBBVURJT19XT01BTl9CVUxMOCA6ICAgICAgICAgIFwicmVzb3VyY2VzL1RleHR1cmUvR2FtZVNzY2VuZS9CdWxsZmlnaHQvU291bmQvd29tYW5idWxsOC5tcDNcIixcclxuICAgIEFVRElPX1dPTUFOX0JVTEw5IDogICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC93b21hbmJ1bGw5Lm1wM1wiLFxyXG4gICAgQVVESU9fV09NQU5fQlVMTDEwIDogICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dvbWFuYnVsbDEwLm1wM1wiLFxyXG4gICAgQVVESU9fV0lOIDogICAgICAgICAgICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL3dpbi5tcDNcIixcclxuICAgIEFVRElPX0xPU0UgOiAgICAgICAgICAgICAgICAgXCJyZXNvdXJjZXMvVGV4dHVyZS9HYW1lU3NjZW5lL0J1bGxmaWdodC9Tb3VuZC9sb3NlLm1wM1wiLFxyXG4gICAgQVVESU9fR1JPVU5EX01VU0lDIDogICAgICAgICBcInJlc291cmNlcy9UZXh0dXJlL0dhbWVTc2NlbmUvQnVsbGZpZ2h0L1NvdW5kL0dhbWVHcm91bmRNdXNpYy5tcDNcIixcclxufTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8yLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcblxyXG4vKlxyXG4qIC8vIOS4i+azqFxyXG4gdHlwZSBTQkZfUkVRX0JFVF9DT0lOX1Qgc3RydWN0IHtcclxuIEdhbWVIZWFkXHJcbiBCZXRDb2luTXVsIGludCBganNvbjpcImJldGNvaW5tdWxcImBcclxuIH1cclxuKiAqL1xyXG5cclxuZnVuY3Rpb24gQnVsbGZpZ2h0X0JldENvaW5SZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfQkVUX0NPSU5fQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG4gICAgICAgICAgICBiZXRjb2lubXVsIDogbXNnLmJldGNvaW5tdWwsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQnVsbGZpZ2h0X0JldENvaW5SZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMi5cclxuICovXHJcblxyXG4vKlxyXG4qIHR5cGUgU0JGX1JFU1BfQkVUX0NPSU5fVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBCZXRVaWQgICAgIHVpbnQzMiBganNvbjpcImJldHVpZFwiYFxyXG4gQmV0Q29pbk11bCBpbnQgYGpzb246XCJiZXRjb2lubXVsXCJgXHJcbiB9XHJcbiogKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9CZXRDb2luUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX0JFVF9DT0lOX0NNRF9JRDtcclxuICAgIHRoaXMuYmV0dWlkID0gMDtcclxuICAgIHRoaXMuYmV0Y29pbm11bCA9IDA7XHJcbiAgICAvL3tcImNtZFwiOjY2MTkxNDYsXCJzZXFcIjowLFwidWlkXCI6MTAwMTAsXCJjb2RlXCI6MCxcImRlc2NcIjpcIuaJp+ihjOaIkOWKn1wiLFwiYmV0dWlkXCI6MTAwMTEsXCJiZXRjb2lubXVsXCI6MTB9XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuYmV0dWlkID0gbXNnLmJldHVpZDtcclxuICAgICAgICB0aGlzLmJldGNvaW5tdWwgPSBtc2cuYmV0Y29pbm11bDtcclxuICAgICAgICB0aGlzLnRzdGF0dXMgPSBtc2cudHN0YXR1cztcclxuICAgICAgICB0aGlzLnVzdGF0dXMgPSBtc2cudXN0YXR1cztcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfQmV0Q29pblJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMi5cclxuICovXHJcblxyXG4vKlxyXG4qIC8g5oqi5bqEU0JGX1JFUV9DQUxMX0JBTktFUl9DTURfSURcclxuIGNvbnN0IChcclxuIEVfVU5TRU5EX0NBTExfQkFOS0VSID0gMCAgICAvL+acquaTjeS9nFxyXG4gRV9OT1RfQ0FMTF9CQU5LRVIgICAgPSAxICAgIC8v5LiN5oqiXHJcbiBFX05PUk1BTF9DQUxMX0JBTktFUiA9IDIgICAgLy/miqLluoRcclxuIEVfU1VQRVJfQ0FMTF9CQU5LRVIgID0gMyAgICAvL+i2hee6p+aKouW6hFxyXG4gKVxyXG5cclxuIHR5cGUgU0JGX1JFUV9DQUxMX0JBTktFUl9UIHN0cnVjdCB7XHJcbiBHYW1lSGVhZFxyXG4gQ2FsbFR5cGUgaW50IGBqc29uOlwiY2FsbHR5cGVcImBcclxuIH1cclxuKiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5cclxuZnVuY3Rpb24gQnVsbGZpZ2h0X0NhbGxCYW5rZXJSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfQ0FMTF9CQU5LRVJfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG4gICAgICAgICAgICBjYWxsdHlwZSA6IG1zZy5jYWxsdHlwZSxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfQ2FsbEJhbmtlclJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8yLlxyXG4gKi9cclxuXHJcbi8qXHJcbiogdHlwZSBTQkZfUkVTUF9DQUxMX0JBTktFUl9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFRhYmxlSWQgIGludCBganNvbjpcInRhYmxlaWRcImAgICAvL+ahjOWtkGlkXHJcbiBUU3RhdHVzICBpbnQgYGpzb246XCJ0c3RhdHVzXCJgICAgLy/moYzlrZDnirbmgIFcclxuIENhbGxVaWQgIHVpbnQzMiBganNvbjpcImNhbGx1aWRcImAgICAvL+WTquS4gOS4queOqeWutlxyXG4gU2VhdElkICAgaW50IGBqc29uOlwic2VhdGlkXCJgICAgIC8v5ZOq5LiA5Liq5bqn5L2NXHJcbiBDYWxsVHlwZSBpbnQgYGpzb246XCJjYWxsdHlwZVwiYCAgLy/miqLluoTnsbvlnotcclxuIElzTGFzdCAgIGludCBganNvbjpcImlzbGFzdFwiYCAgICAvL+aYr+WQpuaYr+acgOWQjuS4gOS4qiwgMTrmmK8sIDA65LiN5pivXHJcbiB9XHJcbiogKiovXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuZnVuY3Rpb24gQnVsbGZpZ2h0X0NhbGxCYW5rZXJSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfQ0FMTF9CQU5LRVJfQ01EX0lEO1xyXG4gICAgdGhpcy50YWJsZWlkID0gMDtcclxuICAgIHRoaXMudHN0YXR1cyA9IDA7XHJcbiAgICB0aGlzLmNhbGx1aWQgPSAwO1xyXG4gICAgdGhpcy5zZWF0aWQgPSAwO1xyXG4gICAgdGhpcy5jYWxsdHlwZSA9IDA7XHJcbiAgICB0aGlzLmlzbGFzdCA9IDA7XHJcbiAgICAvL3tcImNtZFwiOjY2MTkxNDIsXCJzZXFcIjowLFwidWlkXCI6MTAwMTAsXCJjb2RlXCI6MCxcImRlc2NcIjpcIlwiLFwidGFibGVpZFwiOjAsXHJcbiAgICAvLyBcInRzdGF0dXNcIjowLFwiY2FsbHVpZFwiOjEwMDExLFwic2VhdGlkXCI6MSxcImNhbGx0eXBlXCI6MyxcImlzbGFzdFwiOjF9XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSAgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkICA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCAgPSBtc2cudGFibGVpZDtcclxuICAgICAgICB0aGlzLnRzdGF0dXMgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5jYWxsdWlkICA9IG1zZy5jYWxsdWlkO1xyXG4gICAgICAgIHRoaXMuc2VhdGlkICAgPSBtc2cuc2VhdGlkO1xyXG4gICAgICAgIHRoaXMuY2FsbHR5cGUgPSBtc2cuY2FsbHR5cGU7XHJcbiAgICAgICAgdGhpcy5pc2xhc3QgICA9IG1zZy5pc2xhc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfQ2FsbEJhbmtlclJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMS5cclxuICovXHJcblxyXG53aW5kb3cuQlVMTEZJR0hUX01BWF9QTEFZRVIgPSA2O1xyXG5cclxudmFyIFBva2VyID0gcmVxdWlyZShcIlBva2VyXCIpO1xyXG52YXIgQnVsbGZpZ2h0X0Nvc3RvbUNhcmRUeXBlID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0Nvc3RvbUNhcmRUeXBlJyk7XHJcbnZhciBHYW1lU2NlbmUgPSByZXF1aXJlKCdCdWxsZmlnaHRfR2FtZVNjZW5lJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIENhcmROb2RlIDogY2MuTm9kZSxcclxuICAgICAgICBDYXJkVHlwZU5vZGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgIENhcmRUeXBlQmcgICA6IGNjLlNwcml0ZSxcclxuICAgICAgICBDYXJkVHlwZUJnRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIENhcmRUeXBlRmxhZyAgICAgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIENhcmRUeXBlRmxhZ0ZyYW1lIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBBbGxDYXJkICAgIDogW1Bva2VyXSxcclxuICAgICAgICBCZXRDb3VudEJnIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIEJldENvdW50ICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBDdXN0b21DYXJkVHlwZSA6IEJ1bGxmaWdodF9Db3N0b21DYXJkVHlwZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkNhcmRQb3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IodmFyIGluZGV4ID0gMDtpbmRleCA8IHRoaXMuQWxsQ2FyZC5sZW5ndGggOyBpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5DYXJkUG9zW2luZGV4XSA9IHRoaXMuQWxsQ2FyZFtpbmRleF0ubm9kZS5wb3NpdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRDYXJkQW5pbWF0aW9uIDogZnVuY3Rpb24gKGNhcmRsaXN0KSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0NhcmRMYXlvdXQuc2VuZENhcmRBbmltYXRpb24sY2FyZGxpc3QgPSBcIiArIGNhcmRsaXN0KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLkNhcmROb2RlLmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGNhcmRjb3VudCA9IDA7Y2FyZGNvdW50IDwgNSAmJiAhY2MuZ2FtZS5pc1BhdXNlZCgpO2NhcmRjb3VudCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5BbGxDYXJkW2NhcmRjb3VudF0ubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLkFsbENhcmRbY2FyZGNvdW50XS5wb3NpdGlvbiA9IHRoaXMuQ2FyZFBvc1tjYXJkY291bnRdO1xyXG4gICAgICAgICAgICB0aGlzLkFsbENhcmRbY2FyZGNvdW50XS5pbml0Q2FyZChjYXJkbGlzdFtjYXJkY291bnRdKTtcclxuICAgICAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgICAgIHZhciBlbmRQb3MgPSB0aGlzLkNhcmRQb3NbY2FyZGNvdW50XTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0UG9zID0gbmV3IGNjLnAoZW5kUG9zLnggLSAoZW5kUG9zLnggKyB0aGlzLkNhcmROb2RlLnBvc2l0aW9uLnggKyB0aGlzLm5vZGUucG9zaXRpb24ueCksXHJcbiAgICAgICAgICAgICAgICBlbmRQb3MueSAtIChlbmRQb3MueSArIHRoaXMuQ2FyZE5vZGUucG9zaXRpb24ueSArIHRoaXMubm9kZS5wb3NpdGlvbi55ICkpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJzdGFydFBvcyA9IFwiICsgc3RhcnRQb3MgKyBcIixlbmRQb3MgPSBcIiArIGVuZFBvcyk7XHJcbiAgICAgICAgICAgIHRoaXMuQWxsQ2FyZFtjYXJkY291bnRdLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLm1vdmVUbygwLHN0YXJ0UG9zKSxjYy5kZWxheVRpbWUoMC4wNSpjYXJkY291bnQpLGNjLm1vdmVUbygwLjUsZW5kUG9zKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb3BlbkNhcmRBbmltYXRpb24gOiBmdW5jdGlvbiAoY2FyZGxpc3QsIGluZGV4MSwgaW5kZXgyKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0NhcmRMYXlvdXQub3BlbkNhcmRBbmltYXRpb24sY2FyZGxpc3QgPSBcIiArIGNhcmRsaXN0LCBcIiBpbmRleDE9XCIsIGluZGV4MSwgXCIgaW5kZXgyPVwiLCBpbmRleDIpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuQ2FyZE5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IgKHZhciBjYXJkY291bnQgPSAwO2NhcmRjb3VudCA8IDU7Y2FyZGNvdW50KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkFsbENhcmRbY2FyZGNvdW50XS5pbml0Q2FyZChjYXJkbGlzdFtjYXJkY291bnRdKTtcclxuICAgICAgICAgICAgdGhpcy5BbGxDYXJkW2NhcmRjb3VudF0ucnVuQ2FyZFNlbGVjdCgwKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4MSAhPSAtMSAmJiBpbmRleDIgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjYXJkY291bnQgPT0gaW5kZXgxIHx8IGNhcmRjb3VudCA9PSBpbmRleDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ2FyZExheW91dC5vcGVuQ2FyZEFuaW1hdGlvbiwgY2FyZGNvdW50PVwiLCBjYXJkY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQWxsQ2FyZFtjYXJkY291bnRdLnJ1bkNhcmRTZWxlY3QoMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRDYXJkVHlwZSA6IGZ1bmN0aW9uIChjYXJkVHlwZSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9DYXJkTGF5b3V0LnNldENhcmRUeXBlLGNhcmRUeXBlID0gXCIgKyBjYXJkVHlwZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5DYXJkVHlwZU5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAvLyBpZiAoY2FyZFR5cGUgPT0gQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9aRVJPKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5DYXJkVHlwZUJnLnNwcml0ZUZyYW1lID0gdGhpcy5DYXJkVHlwZUJnRnJhbWVbMF07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGVsc2VcclxuICAgICAgICAvLyB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuQ2FyZFR5cGVCZy5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FyZFR5cGVCZ0ZyYW1lWzFdO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLkNhcmRUeXBlRmxhZy5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FyZFR5cGVGbGFnRnJhbWVbY2FyZFR5cGVdO1xyXG4gICAgICAgIHRoaXMuQ2FyZFR5cGVCZy5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FyZFR5cGVCZ0ZyYW1lWzFdO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2xlYXJDYXJkSXRlbSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkNhcmROb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuQ2FyZFR5cGVOb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJldENvdW50Qmcubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBmb3IodmFyIGNhcmRjb3VudCA9IDA7Y2FyZGNvdW50IDwgNTtjYXJkY291bnQrKykge1xyXG4gICAgICAgICAgICB0aGlzLkFsbENhcmRbY2FyZGNvdW50XS5ydW5DYXJkU2VsZWN0KGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuQ3VzdG9tQ2FyZFR5cGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLkN1c3RvbUNhcmRUeXBlLmNsZWFyQ3VzdG9tQ2FyZFR5cGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRQbGF5ZXJCZXRDb3VudCA6IGZ1bmN0aW9uIChjb3VudCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuQmV0Q291bnRCZy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5CZXRDb3VudC5zdHJpbmcgICAgICAgID0gY291bnQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEN1c3RvbUNhcmRUeXBlIDogZnVuY3Rpb24gKGFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMuQ3VzdG9tQ2FyZFR5cGUubm9kZS5hY3RpdmUgPSBhY3RpdmU7XHJcbiAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgIHRoaXMuQ3VzdG9tQ2FyZFR5cGUuaW5pdERhdGEoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLkN1c3RvbUNhcmRUeXBlLmNsZWFyQ3VzdG9tQ2FyZFR5cGUoKTtcclxuICAgICAgICAgICAgLy8gZm9yKHZhciBjYXJkY291bnQgPSAwO2NhcmRjb3VudCA8IDU7Y2FyZGNvdW50KyspXHJcbiAgICAgICAgICAgIC8vIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuQWxsQ2FyZFtjYXJkY291bnRdLnJ1bkNhcmRTZWxlY3QoZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgLy8gfSxcclxuXHJcblxyXG4gICAgc2VuZENhcmRBbmltYXRpb24gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0NhcmRMYXlvdXQuc2VuZENhcmRBbmltYXRpb25cIik7XHJcbiAgICB9XHJcblxyXG5cclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzE5LlxyXG4gKi9cclxuXHJcbndpbmRvdy5CdWxsZmlnaHRfQ2FyZFR5cGUgPSBjYy5FbnVtKHtcclxuICAgIEVfQlVMTF9aRVJPICAgICAgIDogMCwgLy/msqHniZtcclxuICAgIEVfQlVMTF9PTkUgICAgICAgIDogMSwgLy/niZsxXHJcbiAgICBFX0JVTExfVFdPICAgICAgICA6IDIsXHJcbiAgICBFX0JVTExfVEhSRUUgICAgICA6IDMsXHJcbiAgICBFX0JVTExfRk9VUiAgICAgICA6IDQsXHJcbiAgICBFX0JVTExfRklWRSAgICAgICA6IDUsXHJcbiAgICBFX0JVTExfU0lYICAgICAgICA6IDYsXHJcbiAgICBFX0JVTExfU0VWRU4gICAgICA6IDcsXHJcbiAgICBFX0JVTExfRUlHSFQgICAgICA6IDgsXHJcbiAgICBFX0JVTExfTklORSAgICAgICA6IDksXHJcbiAgICBFX0JVTExfUEFJUiAgICAgICA6IDEwLCAvL+eJm+WvueWtkFxyXG4gICAgRV9CVUxMX0JVTEwgICAgICAgOiAxMSwgLy/niZvniZtcclxuICAgIEVfQlVMTF9MSU5FICAgICAgIDogMTIsIC8v54mb6aG65a2QXHJcbiAgICBFX0JVTExfVEhSRUVfVFdPICA6IDEzLCAvL+S4ieW4puS6jFxyXG4gICAgRV9CVUxMX0JPTUIgICAgICAgOiAxNCwgLy/ngrjlvLlcclxuICAgIEVfQlVMTF9GSVZFX0tJTkcgIDogMTUsIC8v5LqU6Iqx54mbXHJcbiAgICBFX0JVTExfU01BTExfRklWRSA6IDE2LCAvL+S6lOWwj+eJm1xyXG4gICAgRV9CVUxMX01BWCAgICAgICAgOiAxNyxcclxuXHJcbn0pO1xyXG5cclxud2luZG93LkJ1bGxmaWdodF9DYXJkVHlwZU5hbWUgPSBbXHJcbiAgICBcIuayoeeJm1wiLFxyXG4gICAgXCLniZvkuIBcIixcclxuICAgIFwi54mb5LqMXCIsXHJcbiAgICBcIueJm+S4iVwiLFxyXG4gICAgXCLniZvlm5tcIixcclxuICAgIFwi54mb5LqUXCIsXHJcbiAgICBcIueJm+WFrVwiLFxyXG4gICAgXCLniZvkuINcIixcclxuICAgIFwi54mb5YWrXCIsXHJcbiAgICBcIueJm+S5nVwiLFxyXG4gICAgXCLniZvlr7nlrZBcIixcclxuICAgIFwi54mb54mbXCIsXHJcbiAgICBcIueJm+mhuuWtkFwiLFxyXG4gICAgXCLkuInluKbkuoxcIixcclxuICAgIFwi54K45by5XCIsXHJcbiAgICBcIuS6lOiKseeJm1wiLFxyXG4gICAgXCLkupTlsI/niZtcIixcclxuXTsiLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbV9pTWluQ2FycnkgOiAxMDAsXHJcbiAgICAgICAgbV9pTWF4Q2FycnkgOiAxMDAwLFxyXG4gICAgICAgIEN1ckNvaW4gICAgIDogY2MuTGFiZWwsICAvL+W3sue7j+W4puWFpVxyXG4gICAgICAgIE15R29sZCAgICAgIDogY2MuTGFiZWwsICAvL+i6q+S4iumHkeW4gVxyXG4gICAgICAgIENhcnJ5UmFuZ2UgIDogY2MuTGFiZWwsICAvL+acgOmrmOW4puWFpVxyXG4gICAgICAgIFRvdGFsQ29pbiAgICA6IGNjLkxhYmVsLCAgLy/mgLvluKblhaXkuIrnur9cclxuICAgICAgICBjdXJDYXJyeSAgICA6IGNjLkVkaXRCb3gsXHJcblxyXG4gICAgICAgIG1faVRpbWVPdXQgIDogMCxcclxuICAgICAgICBUaW1lTGFiZWwgICA6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNaW5BbmRNYXggOiBmdW5jdGlvbiAobWluLCBtYXgsIHRvdGFsKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0NhcnJ5Vmlldy5zZXRNaW5BbmRNYXgsbWluID0gXCIgKyBtaW4gKyBcIixtYXggPSBcIiArIG1heCwgXCIgdG90YWw9XCIsIHRvdGFsKTtcclxuICAgICAgICB0aGlzLm1faU1pbkdvbGQgICAgICAgID0gbWluO1xyXG4gICAgICAgIHRoaXMubV9pTWF4R29sZCAgICAgICAgPSBtYXg7XHJcbiAgICAgICAgdGhpcy5Ub3RhbENvaW4uc3RyaW5nICA9IHRvdGFsO1xyXG4gICAgICAgIHRoaXMuQ3VyQ29pbi5zdHJpbmcgICAgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuVG90YWxDYXJyeTtcclxuICAgICAgICB0aGlzLk15R29sZC5zdHJpbmcgICAgID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmdvbGQ7XHJcbiAgICAgICAgdGhpcy5DYXJyeVJhbmdlLnN0cmluZyA9IFwiKFwiICsgbWluICsgXCJ+XCIgKyBtYXggKyBcIilcIjtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ2FycnlWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIGlmKGJ0bk5hbWUgPT0gXCJCdG5DbG9zZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuTmFtZSA9PSBcIkJ0blN1cmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjb2luID0gcGFyc2VJbnQodGhpcy5jdXJDYXJyeS5zdHJpbmcpO1xyXG4gICAgICAgICAgICBpZiAoY29pbiA8IHRoaXMubV9pTWluR29sZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmgqjmkLrluKbnmoTniZvlj4vluIHkuI3og73lsI/kuo5cIiArIHRoaXMubV9pTWluR29sZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvaW4gPiB0aGlzLm1faU1heEdvbGQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo5pC65bim55qE54mb5Y+L5biB5LiN6IO95aSn5LqOXCIgKyB0aGlzLm1faU1heEdvbGQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb2luID4gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmdvbGQpIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo5oul5pyJ55qE54mb5Y+L5biB5LiN6Laz77yM6K+35YmN5b6A5ZWG5Z+O6LSt5LmwXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgY29pbiA6IHBhcnNlSW50KHRoaXMuY3VyQ2Fycnkuc3RyaW5nKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0NBUlJZX0NPSU5fQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDYXJyeVRpbWUgOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHRoaXMubV9pVGltZU91dCA9IHRpbWU7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUodGltZSksY2MucmVtb3ZlU2VsZigpKSk7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLnVwZGF0ZVRpbWVPdXQsMS4wKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlVGltZU91dCA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5tX2lUaW1lT3V0LS0gO1xyXG4gICAgICAgIGlmKHRoaXMubV9pVGltZU91dCA8IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy51cGRhdGVUaW1lT3V0KTtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuVGltZUxhYmVsLnN0cmluZyA9IHRoaXMubV9pVGltZU91dCArIFwic1wiO1xyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gICA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuXHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRpbWUgOiAwLFxyXG4gICAgICAgIHRpbWVMYWJlbCA6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlVGltZUxhYmVsIDogZnVuY3Rpb24gKGxhYmVsKSB7XHJcbiAgICAgICAgdGhpcy50aW1lTGFiZWwuc3RyaW5nID0gbGFiZWw7XHJcbiAgICAgICAgaWYoTnVtYmVyKGxhYmVsKSA8PSAzICYmIHRoaXMubm9kZS5hY3RpdmUpXHJcbiAgICAgICAge1xyXG4gICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fVElNRSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgc2V0QWN0aXZlIDogZnVuY3Rpb24gKGFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBhY3RpdmU7XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSAgID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBDYXJkVmFsdWUgOiBbY2MuTGFiZWxdLFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3VzdG9tQ2FyZFR5cGUuT25Mb2FkXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0RGF0YTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9DdXN0b21DYXJkVHlwZS5pbml0RGF0YS5cIik7XHJcbiAgICAgICAgdGhpcy5tX2lDYXJkVmFsdWUgPSBuZXcgQXJyYXk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuQ2FyZCA6IGZ1bmN0aW9uIChldmVudCwgQ3VzdG9uRXZlbnREYXRhKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZS5hY3RpdmUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0N1c3RvbUNhcmRUeXBlLmNhbGxCYWNrQnRuQ2FyZCB0aGlzLm5vZGUuYWN0aXZlPVwiLCB0aGlzLm5vZGUuYWN0aXZlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNhcmQgPSBldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KFwiUG9rZXJcIik7XHJcbiAgICAgICAgaWYgKCh0aGlzLm1faUNhcmRWYWx1ZS5sZW5ndGggPj0gMykgJiYgY2FyZC5jYXJkU2VsZWN0ZWQgPT0gMCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9DdXN0b21DYXJkVHlwZS5jYWxsQmFja0J0bkNhcmQgbGVuZ3RoPVwiLCB0aGlzLm1faUNhcmRWYWx1ZS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBcIiBjYXJkU2VsZWN0ZWQ9XCIsIGNhcmQuY2FyZFNlbGVjdGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG5cclxuICAgICAgICBjYXJkLnNldEJ0bkNhcmQoKTtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0N1c3RvbUNhcmRUeXBlLmNhbGxCYWNrQnRuQ2FyZCx2YWx1ZSA9IFwiICsgY2FyZC5jYXJkVmFsdWUpO1xyXG5cclxuICAgICAgICB2YXIgdmFsdWUgPSBjYXJkLmNhcmRWYWx1ZSA+IDEwID8gMTAgOiBjYXJkLmNhcmRWYWx1ZTtcclxuICAgICAgICBpZiAoY2FyZC5jYXJkU2VsZWN0ZWQgPT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9pQ2FyZFZhbHVlLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUJ5VmFsdWUodmFsdWUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRhQ3VzdG9tQ2FyZFR5cGUoKTtcclxuICAgICAgICB0aGlzLmxvZ0FsbENhcmRWYWx1ZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW1vdmVCeVZhbHVlIDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7aW5kZXggPCB0aGlzLm1faUNhcmRWYWx1ZS5sZW5ndGg7aW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMubV9pQ2FyZFZhbHVlW2luZGV4XSA9PSB2YWx1ZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX2lDYXJkVmFsdWUuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2xlYXJDdXN0b21DYXJkVHlwZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkNhcmRWYWx1ZVswXS5zdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuQ2FyZFZhbHVlWzFdLnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5DYXJkVmFsdWVbMl0uc3RyaW5nID0gXCJcIjtcclxuICAgICAgICB0aGlzLkNhcmRWYWx1ZVszXS5zdHJpbmcgPSBcIlwiO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgdXBkYXRhQ3VzdG9tQ2FyZFR5cGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5DYXJkVmFsdWVbMF0uc3RyaW5nID0gXCJcIjtcclxuICAgICAgICB0aGlzLkNhcmRWYWx1ZVsxXS5zdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuQ2FyZFZhbHVlWzJdLnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5DYXJkVmFsdWVbM10uc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICAgICAgbGV0IHZhbHVlID0gMDtcclxuICAgICAgICBmb3IodmFyIGluZGV4ID0gMDtpbmRleCA8IHRoaXMubV9pQ2FyZFZhbHVlLmxlbmd0aCAmJiBpbmRleCA8IDM7aW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhbHVlICs9IHRoaXMubV9pQ2FyZFZhbHVlW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09IDMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2FyZFZhbHVlW2luZGV4XS5zdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2FyZFZhbHVlW2luZGV4XS5zdHJpbmcgPSB0aGlzLm1faUNhcmRWYWx1ZVtpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuQ2FyZFZhbHVlWzNdLnN0cmluZyA9IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBsb2dBbGxDYXJkVmFsdWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7aW5kZXggPCB0aGlzLm1faUNhcmRWYWx1ZS5sZW5ndGggO2luZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJsb2dBbGxDYXJkVmFsdWUudmFsdWUgPSBcIiArIHRoaXMubV9pQ2FyZFZhbHVlW2luZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIiwidmFyIE1lc3NhZ2VGYWN0b3J5ICAgICA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBCdWxsZmlnaHRfTXVsdENlbGwgPSByZXF1aXJlKCdCdWxsZmlnaHRfTXVsdENlbGwnKTtcclxudmFyIEJhc2VQb3AgICAgICA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIFRvYXN0VmlldyAgICA9IHJlcXVpcmUoJ1RvYXN0VmlldycpO1xyXG52YXIgR2FtZVBsYXllciAgID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgTXVzaWNNZ3IgICAgID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSAgID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG52YXIgUHJvZ3Jlc3NTbGlkZXIgPSByZXF1aXJlKCdQcm9ncmVzc1NsaWRlcicpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcblxyXG4gICAgICAgIHNjcm9sbFZpZXdSdWxlIDogY2MuU2Nyb2xsVmlldyxcclxuICAgICAgICBzY3JvbGxWaWV3TXVsdCA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgTXVsdENlbGwgOiBbQnVsbGZpZ2h0X011bHRDZWxsXSxcclxuICAgICAgICBUaXRsZU5hbWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIFJvb21OYW1lIDogY2MuRWRpdEJveCxcclxuICAgICAgICBCdG5EaWFtb25kT24gICAgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIEJ0bkRpYW1vbmRPZmYgICAgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgQnRuRGlhbW9uZE9uTnVtICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEJ0bkRpYW1vbmRPZmZOdW0gOiBjYy5MYWJlbCxcclxuICAgICAgICBDYXJyeURhdGEgICAgICAgIDogW1Byb2dyZXNzU2xpZGVyXSxcclxuICAgICAgICBtaW5CZXROb2RlIDogY2MuTm9kZSxcclxuICAgICAgICB0aW1lTm9kZSA6IFtjYy5Ob2RlXSxcclxuICAgICAgICBDbHViQ3JlYXRlTm9kZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgUm9vbUNhcmRTZXR0aW5nIDogY2MuTm9kZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuaW5pdFBvcERhdGEoKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFBvcERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lTW9kZSAgICAgPSAxMDE7XHJcbiAgICAgICAgdGhpcy5vd25lckNvbnRyb2wgPSAxO1xyXG4gICAgICAgIHRoaXMuYmFua2VyTW9kZSAgID0gMTtcclxuICAgICAgICB0aGlzLm1pbkJldCAgPSAxO1xyXG4gICAgICAgIHRoaXMudGltZSAgICA9IDEwO1xyXG4gICAgICAgIHRoaXMucGVyc29ucyA9IDY7XHJcbiAgICAgICAgdGhpcy5DYXJkVHlwZU11bHQgPSBbMSwxLDEsMSwxLDEsMSwxLDIsMywwLDQsMCwwLDAsMCwwXTtcclxuICAgICAgICB0aGlzLnNjcm9sbFZpZXdNdWx0Lm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5Sb29tTmFtZS5zdHJpbmcgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkubmFtZTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVR5cGUgPSAwOyAvL+m7mOiupOengeS6uuWIm+W7uiAgMTog5L+x5LmQ6YOo5Yib5bu6XHJcbiAgICAgICAgdGhpcy5jbHViaWQgICAgID0gMDtcclxuICAgICAgICB0aGlzLmNsdWJsZXZlbCAgPSAwOyAgLy/kuKrkurpsZXZlbD0wXHJcbiAgICAgICAgdGhpcy5Sb29tTGV2ZWwgPSAxO1xyXG5cclxuICAgICAgICB0aGlzLmdhbWVyb3VuZCA9IDEwO1xyXG4gICAgICAgIHRoaXMuc3BlY0NhcmQgPSAwO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgc2V0Um9vbUNhcmRWaWV3IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuQ2x1YkNyZWF0ZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuUm9vbUNhcmRTZXR0aW5nLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5Sb29tTGV2ZWwgPSAyO1xyXG4gICAgfSxcclxuXHJcbiAgICBzd2l0Y2hCdG5Hb2xkRGlhbW9uZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGl2ZVRpbWUgICAgPSA2MCpOdW1iZXIodGhpcy50aW1lKTtcclxuICAgICAgICAvLyB2YXIgZ29sZENvc3QgICAgPSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuY2FsY0dvbGRDb3N0KGxpdmVUaW1lLCB0aGlzLm1pbkJldCk7XHJcbiAgICAgICAgdmFyIGdvbGREaWFtb25kID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmNhbGNEaWFtb25kQ29zdChsaXZlVGltZSwgTnVtYmVyKHRoaXMuY2x1YmxldmVsKSk7XHJcblxyXG4gICAgICAgIGlmICggZ29sZERpYW1vbmQgPD0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmRpYW1vbmQpIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5EaWFtb25kT24ubm9kZS5hY3RpdmUgID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5EaWFtb25kT25OdW0uc3RyaW5nICAgID0gZ29sZERpYW1vbmQ7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuRGlhbW9uZE9mZi5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuRGlhbW9uZE9uLm5vZGUuYWN0aXZlICA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkRpYW1vbmRPZmYubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkRpYW1vbmRPZmZOdW0uc3RyaW5nICAgID0gZ29sZERpYW1vbmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBcclxuICAgIHNldENsdWJJZCA6IGZ1bmN0aW9uIChjbHViaWQsIGNsdWJsZXZlbCkge1xyXG4gICAgICAgIHRoaXMuY2x1YmlkICAgID0gY2x1YmlkO1xyXG4gICAgICAgIHRoaXMuY2x1YmxldmVsID0gY2x1YmxldmVsO1xyXG4gICAgICAgIGlmICh0aGlzLmNsdWJpZCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5UaXRsZU5hbWUuc3RyaW5nID0gXCLkv7HkuZDpg6jlvIDlsYBcIjtcclxuICAgICAgICAgICAgdGhpcy50aW1lICAgID0gMzA7XHJcbiAgICAgICAgICAgIHRoaXMuQ2FycnlEYXRhWzBdLnNldE1pbkFuZE1heCgxMDAsIDEwMDApO1xyXG4gICAgICAgICAgICB0aGlzLkNhcnJ5RGF0YVsxXS5zZXRNaW5BbmRNYXgoMjAwLCAyMDAwKTtcclxuICAgICAgICAgICAgaWYgKGNsdWJsZXZlbCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjbHVibGV2ZWwgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuQ2FycnlEYXRhWzJdLnNldE1pbkFuZE1heCg2MDAsIDIwMDAgKiAyICogY2x1YmxldmVsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLkNhcnJ5RGF0YVswXS5zZXRNaW5BbmRNYXgoMTAwLCAzMDApO1xyXG4gICAgICAgICAgICB0aGlzLkNhcnJ5RGF0YVsxXS5zZXRNaW5BbmRNYXgoMjAwLCA2MDApO1xyXG4gICAgICAgICAgICB0aGlzLkNhcnJ5RGF0YVsyXS5zZXRNaW5BbmRNYXgoNjAwLCAxMjAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgdGhpcy5NdWx0Q2VsbC5sZW5ndGg7IGluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLk11bHRDZWxsW2luZGV4XS5zZXRDbHViQ3JlYXRlKHRoaXMuY2x1YmlkICE9IDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5taW5CZXROb2RlLmFjdGl2ZSA9ICh0aGlzLmNsdWJpZCAhPSAwKTtcclxuICAgICAgICB0aGlzLnRpbWVOb2RlWzBdLmFjdGl2ZSA9ICh0aGlzLmNsdWJpZCA9PSAwKTtcclxuICAgICAgICB0aGlzLnRpbWVOb2RlWzFdLmFjdGl2ZSA9ICh0aGlzLmNsdWJpZCAhPSAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5zd2l0Y2hCdG5Hb2xkRGlhbW9uZCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja0J0bkxhYmVsIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0NyZWF0ZVJvb20uY2FsbGJhY2tCdG5MYWJlbCxDdXN0b21FdmVudERhdGEgPVwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuXHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZihDdXN0b21FdmVudERhdGEgPT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgdGhpcy5NdWx0Q2VsbC5sZW5ndGg7IGluZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2FyZFR5cGVNdWx0W2luZGV4XSA9IE51bWJlcih0aGlzLk11bHRDZWxsW2luZGV4XS5nZXRDdXJNdWx0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlld1J1bGUubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXdNdWx0Lm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2x1YmlkID09IDApXHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIumdnuS/seS5kOmDqOWIm+W7uueJjOWxgOaXoOazleS/ruaUueWAjeeOh1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3UnVsZS5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXdNdWx0Lm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBjYWxsYmFja0J0bk1vZGUgOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja0J0bkxhYmVsLEN1c3RvbUV2ZW50RGF0YSA9XCIgKyBDdXN0b21FdmVudERhdGEpO1xyXG5cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmIChDdXN0b21FdmVudERhdGEgPT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFua2VyTW9kZSA9IDE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChDdXN0b21FdmVudERhdGEgPT0gMikge1xyXG4gICAgICAgICAgICB0aGlzLmJhbmtlck1vZGUgPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5pWs6K+35pyf5b6FLi4uXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tHYW1lUm91bmQ6IGZ1bmN0aW9uKGV2ZW50LCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICAvLyBpZiAoQ3VzdG9tRXZlbnREYXRhID09IDEpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5nYW1lcm91bmQgPSAxMDtcclxuICAgICAgICAvLyB9IGVsc2UgaWYgKEN1c3RvbUV2ZW50RGF0YSA9PSAyKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuZ2FtZXJvdW5kID0gMjA7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmIChDdXN0b21FdmVudERhdGEgPT0gMykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmdhbWVyb3VuZCA9IDMwO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLmdhbWVyb3VuZCA9IE51bWJlcihDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgY2MubG9nKFwiY2FsbGJhY2tHYW1lUm91bmQsIEN1c3RvbUV2ZW50RGF0YT1cIiwgQ3VzdG9tRXZlbnREYXRhLCBcIiBnYW1lcm91bmQ9XCIsIHRoaXMuZ2FtZXJvdW5kKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tTcGVjQ2FyZFR5cGU6IGZ1bmN0aW9uKGV2ZW50LCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja1NwZWNDYXJkVHlwZSwgdGhpcy5zcGVjQ2FyZCA9XCIgKyB0aGlzLnNwZWNDYXJkKTtcclxuICAgICAgICBpZiAodGhpcy5zcGVjQ2FyZCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlY0NhcmQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLkNhcmRUeXBlTXVsdCA9IFsxLDEsMSwxLDEsMSwxLDEsMiwzLDAsNCwwLDAsMCwwLDBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlY0NhcmQgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLkNhcmRUeXBlTXVsdCA9IFsxLDEsMSwxLDEsMSwxLDEsMiwzLDAsNCw1LDUsNSw1LDVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja0Zsb3dlckNhcmQ6IGZ1bmN0aW9uKGV2ZW50LCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja0Zsb3dlckNhcmQsIEN1c3RvbUV2ZW50RGF0YSA9XCIgKyBDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIGlmIChDdXN0b21FdmVudERhdGEgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLkZsb3dlckNhcmQgPSAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoQ3VzdG9tRXZlbnREYXRhID09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5GbG93ZXJDYXJkID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tPd25lckNvbnRyb2wgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja0dhbWVNb2RlXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLm93bmVyQ29udHJvbCA9PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3duZXJDb250cm9sID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm93bmVyQ29udHJvbCA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxiYWNrQmFua2VyTW9kZSA6IGZ1bmN0aW9uIChldmVudCAsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9DcmVhdGVSb29tLmNhbGxiYWNrQmFua2VyTW9kZSxDdXN0b21FdmVudERhdGEgPVwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB0aGlzLmJhbmtlck1vZGUgPSBDdXN0b21FdmVudERhdGE7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tNaW5CZXQgOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja01pbkJldCxDdXN0b21FdmVudERhdGEgPVwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB0aGlzLm1pbkJldCA9IEN1c3RvbUV2ZW50RGF0YTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja1RpbWUgOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja1RpbWUsQ3VzdG9tRXZlbnREYXRhID1cIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdGhpcy50aW1lID0gQ3VzdG9tRXZlbnREYXRhO1xyXG4gICAgICAgIHRoaXMuc3dpdGNoQnRuR29sZERpYW1vbmQoKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja1BlcnNvbnMgOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfQ3JlYXRlUm9vbS5jYWxsYmFja1BlcnNvbnMsQ3VzdG9tRXZlbnREYXRhID1cIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdGhpcy5wZXJzb25zID0gQ3VzdG9tRXZlbnREYXRhO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxiYWNrQ3JlYXRlUm9vbSA6IGZ1bmN0aW9uIChldmVudCAsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG5cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG5cclxuICAgICAgICBpZih0aGlzLlJvb21MZXZlbCA9PSAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbCAgIDogTnVtYmVyKHRoaXMub3duZXJDb250cm9sKSxcclxuICAgICAgICAgICAgICAgIHBheW1vZGUgICA6IDEsIC8v5LuY6LS55qih5byPICjpu5jorqTmiL/ljaEpXHJcbiAgICAgICAgICAgICAgICBnYW1ldHlwZSAgOiBOdW1iZXIodGhpcy5iYW5rZXJNb2RlKSwvL+mXreeJjOaKouW6hCzlm5vlvKDmiqLluoQo5LqM6YCJ5LiAKVxyXG4gICAgICAgICAgICAgICAgbmFtZSAgICAgIDogR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBtaXhhbnRlICAgOiAxLCAvL+acgOWwj+S4i+azqFxyXG4gICAgICAgICAgICAgICAgZ2FtZXJvdW5kIDogdGhpcy5nYW1lcm91bmQsXHJcbiAgICAgICAgICAgICAgICBmbG93ZXJjYXJkOiB0aGlzLkZsb3dlckNhcmQsIC8v5piv5ZCm5pyJ6Iqx54mMXHJcbiAgICAgICAgICAgICAgICBzZWF0cyAgICAgOiA2LC8v5bqn5L2N5pWwXHJcbiAgICAgICAgICAgICAgICBidWxsbXVsICAgOiB0aGlzLkNhcmRUeXBlTXVsdCwvL+S7juaXoOeJm+W8gOWni++8jOS8oOS4gOS4quaVsOe7hFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY2MubG9nKFwiY2FsbGJhY2tDcmVhdGVSb29tIDogZGF0YT1cIiwgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3JlYXRlUm9vbSA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEKTtcclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB7XHJcbiAgICAgICAgICAgICAgICBjbHViaWQgICAgOiAwLFxyXG4gICAgICAgICAgICAgICAgY2x1YmxldmVsIDogMCxcclxuICAgICAgICAgICAgICAgIGdhbWVpZCAgICA6IE51bWJlcih0aGlzLmdhbWVNb2RlKSxcclxuICAgICAgICAgICAgICAgIGdhbWVsZXZlbCA6IDIsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSb29tLnNlbmQoZGF0YSwgdHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5zY3JvbGxWaWV3TXVsdC5ub2RlLmFjdGl2ZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgdGhpcy5NdWx0Q2VsbC5sZW5ndGg7aW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DYXJkVHlwZU11bHRbaW5kZXhdID0gTnVtYmVyKHRoaXMuTXVsdENlbGxbaW5kZXhdLmdldEN1ck11bHQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5Sb29tTmFtZS5zdHJpbmcgPT0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oi/6Ze05ZCN5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2MubG9nKFwiY2FsbGJhY2tDcmVhdGVSb29tIDogQ3VzdG9tRXZlbnREYXRhPVwiLCBDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIHZhciBldmVudERhdGEgPSBOdW1iZXIoQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICBpZiAoZXZlbnREYXRhID09IDMpIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmgqjnmoTpkrvnn7PkuI3lpJ8s6K+35Y675ZWG5Z+O6LSt5LmwXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmIChldmVudERhdGEgPT0gNCkge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaCqOeahOmHkeW4geS4jeWknyzor7fljrvllYbln47otK3kubBcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBjb250cm9sICA6IE51bWJlcih0aGlzLm93bmVyQ29udHJvbCksXHJcbiAgICAgICAgICAgIHBheW1vZGUgIDogZXZlbnREYXRhLCAvL+S7mOi0ueaooeW8jyAo6buY6K6k6ZK755+zKVxyXG4gICAgICAgICAgICBnYW1ldHlwZSA6IE51bWJlcih0aGlzLmJhbmtlck1vZGUpLC8v6Zet54mM5oqi5bqELOWbm+W8oOaKouW6hCjkuozpgInkuIApXHJcbiAgICAgICAgICAgIG1peGFudGUgIDogTnVtYmVyKHRoaXMubWluQmV0KSwgLy/mnIDlsI/kuIvms6hcclxuICAgICAgICAgICAgbGl2ZXRpbWUgOiA2MCpOdW1iZXIodGhpcy50aW1lKSwvL+ahjOWtkOS9v+eUqOaXtumXtCjnp5IpXHJcbiAgICAgICAgICAgIG5hbWUgICAgIDogdGhpcy5Sb29tTmFtZS5zdHJpbmcsLy/moYzlrZDlkI3np7BcclxuICAgICAgICAgICAgc2VhdHMgICAgOiBOdW1iZXIodGhpcy5wZXJzb25zKSwvL+W6p+S9jeaVsFxyXG4gICAgICAgICAgICBidWxsbXVsICA6IHRoaXMuQ2FyZFR5cGVNdWx0LC8v5LuO5peg54mb5byA5aeL77yM5Lyg5LiA5Liq5pWw57uEXHJcbiAgICAgICAgICAgIG1pbmNhcnJ5IDogdGhpcy5DYXJyeURhdGFbMF0uQ3VyQ2FycnlOdW0sXHJcbiAgICAgICAgICAgIG1heGNhcnJ5IDogdGhpcy5DYXJyeURhdGFbMV0uQ3VyQ2FycnlOdW0sXHJcbiAgICAgICAgICAgIHRvdGFsY2FycnkgOiB0aGlzLkNhcnJ5RGF0YVsyXS5DdXJDYXJyeU51bSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5taW5jYXJyeSA+IGRhdGEubWF4Y2FycnkpIHtcclxuICAgICAgICAgICAgZGF0YS5tYXhjYXJyeSA9IGRhdGEubWluY2FycnlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkYXRhLm1heGNhcnJ5ID4gZGF0YS50b3RhbGNhcnJ5KSB7XHJcbiAgICAgICAgICAgIGRhdGEudG90YWxjYXJyeSA9IGRhdGEubWF4Y2FycnlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNjLmxvZyhcImNhbGxiYWNrQ3JlYXRlUm9vbSA6IHNlYXRzPVwiLCBkYXRhLnNlYXRzKTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5jbHViaWQgPT09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY3JlYXRlUm9vbSA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEKTtcclxuICAgICAgICAgICAgdmFyIHR5cGUgPSB7XHJcbiAgICAgICAgICAgICAgICBjbHViaWQgOiAodGhpcy5jbHViaWQgPT09IDAgPyAwIDogdGhpcy5jbHViaWQpLFxyXG4gICAgICAgICAgICAgICAgY2x1YmxldmVsIDogKHRoaXMuY2x1YmlkID09PSAwID8gMCA6IHRoaXMuY2x1YmxldmVsKSxcclxuICAgICAgICAgICAgICAgIGdhbWVpZCA6IE51bWJlcih0aGlzLmdhbWVNb2RlKSxcclxuICAgICAgICAgICAgICAgIGdhbWVsZXZlbCA6IDEsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmKGNyZWF0ZVJvb20pIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVJvb20uc2VuZChkYXRhLCB0eXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY3JlYXRlUm9vbSA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX0NSRUFURV9UQUJMRV9DTURfSUQpO1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHtcclxuICAgICAgICAgICAgICAgIGNsdWJpZCA6ICh0aGlzLmNsdWJpZCA9PT0gMCA/IDAgOiB0aGlzLmNsdWJpZCksXHJcbiAgICAgICAgICAgICAgICBjbHVibGV2ZWwgOiAodGhpcy5jbHViaWQgPT09IDAgPyAwIDogdGhpcy5jbHVibGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgZ2FtZWlkIDogTnVtYmVyKHRoaXMuZ2FtZU1vZGUpLFxyXG4gICAgICAgICAgICAgICAgZ2FtZWxldmVsIDogMSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYoY3JlYXRlUm9vbSkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlUm9vbS5zZW5kKGRhdGEsdHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9LFxyXG4gICAgY2FsbGJhY2tCdG5DbG9zZSA6IGZ1bmN0aW9uIChldmVudCAsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9DcmVhdGVSb29tLmNhbGxiYWNrQnRuQ2xvc2UsQ3VzdG9tRXZlbnREYXRhID1cIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIFRvYXN0VmlldyA9IHJlcXVpcmUoJ1RvYXN0VmlldycpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgR3JheUxheWVyIDogY2MuU3ByaXRlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgY2MubG9nKFwib25Mb2FkIDogc3RvcCBldmVudFwiKTtcclxuICAgICAgICAgICAgc2VsZi5kaXNtaXNzKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0V4cHJlc3Npb25WaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkID09IC0xKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmgqjmsqHmnInlnZDkuIvkuI3og73lj5HpgIHooajmg4VcIik7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEJ0bk5hbWUuaW5kZXhPZihcIkJ0blwiKSA+PSAwKVxyXG4gICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdG91aWQgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkLFxyXG4gICAgICAgICAgICAgICAga2luZCAgOiBDaGF0VHlwZS5FX0NIQVRfRkFDRV9LSU5ELFxyXG4gICAgICAgICAgICAgICAgdHlwZSAgOiBOdW1iZXIoQ3VzdG9tRXZlbnREYXRhKSxcclxuICAgICAgICAgICAgICAgIHRleHQgIDogXCJcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfR0FNRV9DSEFUX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVNjZW5lID0gcmVxdWlyZSgnQmFzZVNjZW5lJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCJNZXNzYWdlRmFjdG9yeVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBBbGVydFZpZXcgPSByZXF1aXJlKCdBbGVydFZpZXcnKTtcclxudmFyIEJ1bGxmaWdodF9DbG9jayA9IHJlcXVpcmUoJ0J1bGxmaWdodF9DbG9jaycpO1xyXG52YXIgUGxheWVyID0gcmVxdWlyZShcIlBsYXllclwiKTtcclxudmFyIEJ1bGxmaWdodF9QbGF5ZXJJdGVtID0gcmVxdWlyZShcIkJ1bGxmaWdodF9QbGF5ZXJJdGVtXCIpO1xyXG52YXIgQnVsbGZpZ2h0X0NhcmRJdGVtID0gcmVxdWlyZShcIkJ1bGxmaWdodF9DYXJkSXRlbVwiKTtcclxudmFyIEJ1bGxmaWdodF9HaWZ0QW5pbWF0aW9uID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0dpZnRBbmltYXRpb24nKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEJ1bGxmaWdodF9BdWRpb0NvbmZpZyA9IHJlcXVpcmUoJ0J1bGxmaWdodF9BdWRpb0NvbmZpZycpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lQ2FsbE9DID0gcmVxdWlyZSgnR2FtZUNhbGxPQycpO1xyXG52YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG5cclxud2luZG93LkJ1bGxmaWdodF9UYWJsZVN0YXR1cyA9IGNjLkVudW0oe1xyXG4gICAgRV9UQUJMRV9DTE9TRV9TVEFUVVMgICAgIDogLTIsIC8v5qGM5a2Q5YWz6ZetXHJcbiAgICBFX1RBQkxFX05PVF9TVEFSVF9TVEFUVVMgOiAwLCAgLy/moYzlrZDmnKrlvIDlp4tcclxuICAgIEVfVEFCTEVfUkVBRFlfU1RBVFVTICAgICA6IDEsICAvL+ahjOWtkOWHhuWkh1xyXG4gICAgRV9UQUJMRV9DQUxMX1NUQVRVUyAgICAgIDogMiwgIC8v5Y+r5bqEXHJcbiAgICBFX1RBQkxFX0JFVF9TVEFUVVMgICAgICAgOiAzLCAgLy/kuIvms6hcclxuICAgIEVfVEFCTEVfT1BFTl9TVEFUVVMgICAgICA6IDQsICAvL+W8gOeJjFxyXG4gICAgRV9UQUJMRV9PVkVSX1NUQVRVUyAgICAgIDogNSwgIC8v5ri45oiP57uT5p2fXHJcbiAgICBFX1RBQkxFX0lETEVfU1RBVFVTICAgICAgOiA2LCAgLy/nqbrpl7JcclxufSk7XHJcblxyXG53aW5kb3cuQnVsbGZpZ2h0X1BsYXllclN0YXR1cyA9IGNjLkVudW0oe1xyXG4gICAgRV9QTEFZRVJfVU5LT05XX1NUQVRVUyA6IC0yLFxyXG4gICAgRV9QTEFZRVJfV0FUQ0hfU1RBVFVTICA6IDAsIC8v6KeC5a+f54q25oCBKOWPr+iDveaYr+eOqei/h+eahCzkuZ/lj6/og73mmK/msqHmnInnjqnov4fnmoQpXHJcbiAgICAvLyBFX1BMQVlFUl9BUFBMWV9TVEFUVVMgIDogMSwgLy/nlLPor7flhaXluqcgICAgICAgICAgIC8v6L+ZMuS4queKtuaAgeW6n+W8g1xyXG4gICAgLy8gRV9QTEFZRVJfQ09JTl9TVEFUVVMgICA6IDIsIC8v5ZCR576k5Li756Gu6K6k5pC65bim6YeR5biBXHJcbiAgICBFX1BMQVlFUl9TSVRfU1RBVFVTICAgIDogMywgLy/lt7LlhaXluqcs562J5b6F54q25oCBXHJcbiAgICBFX1BMQVlFUl9SRUFEWV9TVEFUVVMgIDogNCwgLy/njqnlrrbov5vlhaXlh4blpIfnirbmgIFcclxuICAgIEVfUExBWUVSX0FDVElWRV9TVEFUVVMgOiA1LCAvL+ato+WcqOeOqeeJjFxyXG4gICAgRV9QTEFZRVJfT1ZFUl9TVEFUVVMgICA6IDYsIC8v5pys5bGA5ri45oiP57uT5p2fXHJcbn0pO1xyXG5cclxud2luZG93LkJ1bGxmaWdodF9DYWxsVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgRV9RVUlUX0NBTExfQkFOS0VSICAgOiAwLCAvL+acquaTjeS9nFxyXG4gICAgRV9OT1RfQ0FMTF9CQU5LRVIgICAgOiAxLCAvL+S4jeaKolxyXG4gICAgRV9OT1JNQUxfQ0FMTF9CQU5LRVIgOiAyLCAvL+aKouW6hFxyXG4gICAgRV9TVVBFUl9DQUxMX0JBTktFUiAgOiAzLCAvL+i2hee6p+aKouW6hFxyXG59KTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VTY2VuZSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgTWVudSAgICAgICAgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIE1lbnVSb29tQ2FyZCAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBDYXJyeVZpZXcgICAgICAgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgUGxheWVySXRlbVBvcyAgIDogW0J1bGxmaWdodF9QbGF5ZXJJdGVtXSxcclxuICAgICAgICBDYXJkSXRlbSAgICAgICAgOiBbQnVsbGZpZ2h0X0NhcmRJdGVtXSxcclxuICAgICAgICBtX2lNYXhQbGF5ZXJzICAgOiAwLFxyXG4gICAgICAgIEJ0blN0YXJ0ICAgICAgICA6IGNjLkJ1dHRvbixcclxuICAgICAgICBCdG5SZWFkeSAgICAgICAgOiBjYy5CdXR0b24sXHJcbiAgICAgICAgQnRuQ2FsbEJhbmtlck5vZGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgIEJldENvaW5Ob2RlICAgICA6IGNjLk5vZGUsXHJcbiAgICAgICAgT3BlbkNhcmROb2RlICAgIDogY2MuTm9kZSxcclxuICAgICAgICBjbG9jayAgICAgICAgICAgOiBCdWxsZmlnaHRfQ2xvY2ssXHJcbiAgICAgICAgUm9vbUlkICAgICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUm9vbU5hbWUgICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUm91bmROdW0gICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUGxheWVyc0xpc3QgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIENhbGxCYW5rZXJGbGFnICA6IFtjYy5TcHJpdGVdLFxyXG4gICAgICAgIENhbGxCYW5rZXJGbGFnRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIEdpZnRBbmltYXRpb24gICA6IEJ1bGxmaWdodF9HaWZ0QW5pbWF0aW9uLFxyXG4gICAgICAgIEdhbWVUb3RhbFJlc3VsdCA6IGNjLlByZWZhYixcclxuICAgICAgICBFeHByZXNzaW9uVmlldyAgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgUm9vbUluZm9WaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJldExhYmVsICAgICAgICA6IFtjYy5MYWJlbF0sXHJcbiAgICAgICAgQnRuTXVzaWNPbiAgICAgIDogY2MuQnV0dG9uLFxyXG4gICAgICAgIEJ0bk11c2ljT2ZmICAgICA6IGNjLkJ1dHRvbixcclxuICAgICAgICBWb2ljZVZpZXcgICAgICAgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgVm9pY2VQbGF5VmlldyAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJ0blZvaWNlICAgICAgICA6IGNjLkJ1dHRvbixcclxuICAgICAgICBHYW1lU2NlbmUgICAgICAgOiBjYy5DYW52YXMsXHJcbiAgICAgICAgU2hhcmVWaWV3ICAgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFRpcHMgICAgICAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEJ0bkNvbnRyb2wgICAgICA6IGNjLlNwcml0ZSxcclxuICAgICAgICBTdXBlckNvc3RMYWJlbCAgOiBjYy5MYWJlbCxcclxuICAgICAgICBQbGF5Tm9kZSAgICAgICAgOiBjYy5Ob2RlLFxyXG4gICAgICAgIERpc21pc3NUYWJsZVZpZXcgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgQnRuUm9vbUluZm8gICAgIDogY2MuQnV0dG9uLFxyXG4gICAgICAgIEJ0blN1Y2Nlc3MgICAgICA6IGNjLkJ1dHRvbixcclxuXHJcbiAgICAgICAgQnRuQmV0Tm9kZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgQnRuQmV0Um9vbUNhcmROb2RlIDogY2MuTm9kZSxcclxuICAgIH0sXHJcblxyXG4gICAgc3RhdGljcyA6e1xyXG4gICAgICAgIEluc3RhbmNlIDogbnVsbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG5cclxuXHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkN1ckdhbWVUeXBlID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkdhbWVUeXBlLkdBTUVfVFlQRV9CVUxMRklHSFQ7XHJcbiAgICAgICAgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5FbnRlclJvb20pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfRU5URVJfR0FNRV9DTURfSUQpLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgICAgIHRoaXMuSW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUm9vbVZpZXdCeUxldmVsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgICAgIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5Qb2xsKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuSW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgIE11c2ljTWdyLnN0b3BCYWNrZ3JvdW5kTXVzaWMoKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlUm9vbVZpZXdCeUxldmVsIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5yb29tTGV2ZWwgPT0gMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuUm9vbUluZm8ubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWNjZXNzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgdXBkYXRlQmV0IDogZnVuY3Rpb24gKG1pbkFudGUpIHtcclxuICAgICAgICB0aGlzLkJldExhYmVsWzBdLnN0cmluZyA9IDEqbWluQW50ZTtcclxuICAgICAgICB0aGlzLkJldExhYmVsWzFdLnN0cmluZyA9IDIqbWluQW50ZTtcclxuICAgICAgICB0aGlzLkJldExhYmVsWzJdLnN0cmluZyA9IDUqbWluQW50ZTtcclxuICAgICAgICB0aGlzLkJldExhYmVsWzNdLnN0cmluZyA9IDEwKm1pbkFudGU7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXREYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQgPSAtMTtcclxuICAgICAgICB0aGlzLnRhYmxlU3RhdHVzICAgPSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9DTE9TRV9TVEFUVVM7XHJcbiAgICAgICAgdGhpcy5zaXRQbGF5ZXJzICAgID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubV9pTXlCZXRDb2luICA9IDA7XHJcbiAgICAgICAgdGhpcy5tX2lNYXhCZXQgICAgID0gMDtcclxuICAgICAgICB0aGlzLnRhYmxlUnVsZUluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYmFua2VyVWlkICAgICA9IDA7XHJcbiAgICAgICAgdGhpcy5yb3VuZG51bSAgICAgID0gMDtcclxuICAgICAgICB0aGlzLkJldEFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5Sb29tSWQuc3RyaW5nID0gXCJJRDpcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5wcml2YXRlaWQ7XHJcbiAgICAgICAgdGhpcy5Wb2ljZVZpZXdOb2RlID0gbnVsbDtcclxuICAgICAgICB0aGlzLlZvaWNlUGxheWVyVmlld05vZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlQWxsUGxheWVySW5UYWJsZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUuY2xlYXJUYWJsZSxwcml2YXRlaWQgPSBcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5wcml2YXRlaWQpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5CdG5Wb2ljZS5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkID09IC0xKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaCqOayoeacieWdkOS4i+S4jeiDveWPkemAgeivremfs1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5pi+56S65b2V6Z+z55WM6Z2iXHJcbiAgICAgICAgICAgIHNlbGYuVm9pY2VWaWV3Tm9kZSA9IGNjLmluc3RhbnRpYXRlKHNlbGYuVm9pY2VWaWV3KTtcclxuICAgICAgICAgICAgc2VsZi5ub2RlLmFkZENoaWxkKHNlbGYuVm9pY2VWaWV3Tm9kZSk7XHJcbiAgICAgICAgICAgIHNlbGYuVm9pY2VWaWV3Tm9kZS5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuQnRuVm9pY2Uubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgLy/lj5bmtojlvZXpn7PnlYzpnaJcclxuICAgICAgICAgICAgaWYoc2VsZi5Wb2ljZVZpZXdOb2RlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlZvaWNlVmlld05vZGUuZ2V0Q29tcG9uZW50KFwiVm9pY2VWaWV3XCIpLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuVm9pY2VWaWV3Tm9kZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5wbGF5Vm9pY2VDb250aW51ZSgpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLkJ0blZvaWNlLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIC8v5Y+W5raI5b2V6Z+z55WM6Z2iXHJcbiAgICAgICAgICAgIGlmKHNlbGYuVm9pY2VWaWV3Tm9kZSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Wb2ljZVZpZXdOb2RlLmdldENvbXBvbmVudChcIlZvaWNlVmlld1wiKS5kaXNtaXNzKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlZvaWNlVmlld05vZGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZvbHVtZVN0YXRlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgIFx0dGhpcy5CdG5NdXNpY09uLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuTXVzaWNPZmYubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLlZvaWNlQXJyYXkgPSBuZXcgQXJyYXkoKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJUYWJsZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1faU15QmV0Q29pbiA9IDA7XHJcbiAgICAgICAgdGhpcy5tX2lNYXhCZXQgICAgPSAwO1xyXG4gICAgICAgIHRoaXMuYmFua2VyVWlkICAgID0gMDtcclxuICAgICAgICB0aGlzLkJ0blN0YXJ0Lm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5CdG5SZWFkeS5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2xvY2subm9kZS5hY3RpdmUgICAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJ0bkNhbGxCYW5rZXJOb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vdGhpcy5CZXRDb2luTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkJldFJvb21DYXJkTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5CZXROb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5PcGVuQ2FyZE5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5CZXRBcnJheSA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2xlYXJDYWxsQmFua2VyRmxhZygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqTmV0d29yayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIGNhbGxCYWNrQnRuU2hhcmUgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBTaGFyZUltYWdlUGF0aCA9IEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5zY3JlZW5TaG90QWN0aW9uKCk7XHJcbiAgICAgICAgdmFyIHNoYXJlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2hhcmVWaWV3KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoc2hhcmVWaWV3KTtcclxuICAgICAgICBzaGFyZVZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICB2YXIgc3RyaW5nID0gXCLmuLjmiI/nu5PnrpfliIbkuqtcIjtcclxuICAgICAgICBzaGFyZVZpZXcuZ2V0Q29tcG9uZW50KFwiU2hhcmVWaWV3XCIpLnNldFNoYXJlVHllcChTaGFyZVR5cGUuRV9TSEFSRVRZUEVfSU1BR0UsU2hhcmVJbWFnZVBhdGgsR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmNsaWVudHVybCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBwbGF5Vm9pY2VDb250aW51ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwidGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlICByZW1vdmVGcm9tUGFyZW50XCIpO1xyXG4gICAgICAgICAgICB0aGlzLlZvaWNlUGxheWVyVmlld05vZGUucmVtb3ZlRnJvbVBhcmVudCh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1zZyA9IHRoaXMuVm9pY2VBcnJheS5wb3AoKTtcclxuICAgICAgICBjYy5sb2coXCJvblNjZW5lTXNnLG1zZyA9IFwiICsgSlNPTi5zdHJpbmdpZnkobXNnKSk7XHJcbiAgICAgICAgaWYobXNnKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tVmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZCh0aGlzLmZpbmRQbGF5ZXIobXNnLmZyb211aWQpLnNlYXRpZCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZSA9PSBudWxsICYmIHRoaXMuVm9pY2VWaWV3Tm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJ0aGlzLlZvaWNlUGxheWVyVmlld05vZGUgIGNyZWF0ZTFcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlZvaWNlUGxheWVyVmlld05vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlZvaWNlUGxheVZpZXcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5HaWZ0QW5pbWF0aW9uLm5vZGUuYWRkQ2hpbGQodGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZS5zZXRQb3NpdGlvbih0aGlzLkNhbGxCYW5rZXJGbGFnW2Zyb21WaWV3SWRdLm5vZGUucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBKU09OLnBhcnNlKEJBU0U2NC5kZWNvZGVyKG1zZy50ZXh0KSk7XHJcbiAgICAgICAgICAgICAgICBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuRG93bmxvYWRSZWNvcmRlZEZpbGUodGV4dC5maWxlSUQsdGV4dC5maWxlUGF0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2NlbmVNc2c6IGZ1bmN0aW9uIG9uU2NlbmVNc2coZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICBjYy5sb2coXCJvblNjZW5lTXNnLG1zZy5wb3BWaWV3ID0gXCIgKyBtc2cucG9wVmlldyk7XHJcbiAgICAgICAgaWYgKG1zZy5wb3BWaWV3ID09IFwiR2xvdWRWb2ljZVwiKSB7XHJcbiAgICAgICAgICAgIGlmIChtc2cuYnRuID09IFwiT25QbGF5UmVjb3JkZWRGaWxlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheVZvaWNlQ29udGludWUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobXNnLnBvcFZpZXcgPT0gXCJCdWxsZmlnaHRfVG90YWxSZXN1bHRcIikge1xyXG4gICAgICAgICAgICBpZiAobXNnLmJ0biA9PSBcIkJ0blNoYXJlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FsbEJhY2tCdG5TaGFyZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChtc2cucG9wVmlldyA9PSBcIkJ1bGxmaWdodF9NZW51XCIpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5idG4gPT0gXCJCdG5TaGFyZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTaGFyZVZpZXcoKTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5jYWxsQmFja0J0blNoYXJlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYobXNnLnBvcFZpZXcgPT0gXCJWb2ljZVBsYXlWaWV3XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID0gXCJkaXNtaXNzXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcInRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZSAgbnVsbFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uTWVzc2FnZVwiKTtcclxuICAgICAgICB0aGlzLl9zdXBlcihldmVudCk7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0xPR0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Mb2dpbk1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0VOVEVSX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkVudGVyUm9vbShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1NJVF9ET1dOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25TaXREb3duKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTEVBVkVfR0FNRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTGVhdmVHYW1lKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX05PVElGWV9HQU1FX1NXSVRDSF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTm90aWZ5R2FtZVN3aXRjaChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfUkVBRFlfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblJlYWR5KG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX0dBTUVfU1RBUlRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5vdGlmeUdhbWVTdGFydChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfQ0FMTF9CQU5LRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNhbGxCYW5rZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfQ09ORklSTV9CQU5LRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5vdGlmeVN1cmVCYW5rZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9HQU1FX1NXSVRDSF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uR2FtZVN3aXRjaChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfQkVUX0NPSU5fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkJldENvaW4obXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfT1BFTl9DQVJEX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Ob3RpZnlPcGVuQ2FyZChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfT1BFTl9DQVJEX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25PcGVuQ2FyZChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9PTkVfR0FNRV9SRVNVTFRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5vdGlmeU9uZUdhbWVSZXN1bHQobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9DQVJSWV9DT0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25DYXJyeUNvaW4obXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfS0lDS09VVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvS2lja091dChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9OT1RfQ0FMTF9CQU5LRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5vdGlmeU5vdENhbGxiYW5rZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfTk9UX0JFVF9DT0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Ob3RpZnlOb3RCZXQobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfVE9UQUxfR0FNRV9SRVNVTFRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5Ob3RpZnlUb3RhbEdhbWVSZXN1bHQobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlVTX1JFU1BfVEFCTEVfREVUQUlMX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25HZXRUYWJsZURldGFpbChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfR0FNRV9DSEFUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25DaGF0TXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JTUF9ESVNNSVNTX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25EaXNtaXNzVGFibGUobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfRElTTUlTU19UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTm90aWZ5RGlzbWlzc1RhYmxlKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICBvbk5vdGlmeURpc21pc3NUYWJsZTogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIm9uTm90aWZ5RGlzbWlzc1RhYmxlIGRpc21pc3N1aWQ9XCIsIG1zZy5kaXNtaXNzdWlkLCBcIiBuYW1lPVwiLCBtc2cubmFtZSwgXCIgdGltZW91dD1cIiwgbXNnLnRpbWVvdXQpO1xyXG4gICAgICAgICAgICB2YXIgRGlzbWlzc1RhYmxlID0gY2MuaW5zdGFudGlhdGUodGhpcy5EaXNtaXNzVGFibGVWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKERpc21pc3NUYWJsZSk7XHJcbiAgICAgICAgICAgIERpc21pc3NUYWJsZS5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgICAgICBEaXNtaXNzVGFibGUuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2h0X0Rpc21pc3NUYWJsZVwiKS5zZXRTZW5kSW5mbyhtc2cubmFtZSwgbXNnLmRpc21pc3N1aWQsIG1zZy50aW1lb3V0KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGlzbWlzc1RhYmxlIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlICE9IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3cobXNnLmRlc2MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25DaGF0TXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cua2luZCA9PSBDaGF0VHlwZS5FX0NIQVRfRkFDRV9LSU5EKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZCh0aGlzLmZpbmRQbGF5ZXIobXNnLmZyb211aWQpLnNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zICAgID0gdGhpcy5DYWxsQmFua2VyRmxhZ1t2aWV3SWRdLm5vZGUucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdpZnRBbmltYXRpb24ucGxheUZhY2VBbmltYXRpb24obXNnLnR5cGUsIHBvcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihtc2cua2luZCA9PSBDaGF0VHlwZS5FX0NIQVRfR0lGVF9LSU5EKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnJvbVZpZXdJZCA9IHRoaXMuZ2V0UGxheWVyVmlld0lkQnlTZWF0SWQodGhpcy5maW5kUGxheWVyKG1zZy5mcm9tdWlkKS5zZWF0aWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvVmlld0lkICAgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHRoaXMuZmluZFBsYXllcihtc2cudG91aWQpLnNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgICAgICA9IHRoaXMuUGxheWVySXRlbVBvc1tmcm9tVmlld0lkXS5ub2RlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCAgICAgICAgPSB0aGlzLlBsYXllckl0ZW1Qb3NbdG9WaWV3SWRdLm5vZGUucG9zaXRpb247XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdpZnRBbmltYXRpb24ucGxheUdpZnRBbmltYXRpb24obXNnLnR5cGUsIHN0YXJ0LGVuZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZihtc2cua2luZCA9PSBDaGF0VHlwZS5FX0NIQVRfVk9JQ0VfS0lORCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyb21WaWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHRoaXMuZmluZFBsYXllcihtc2cuZnJvbXVpZCkuc2VhdGlkKTtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZSA9PSBudWxsICYmIHRoaXMuVm9pY2VWaWV3Tm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwidGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlICBjcmVhdGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Wb2ljZVBsYXllclZpZXdOb2RlID0gY2MuaW5zdGFudGlhdGUodGhpcy5Wb2ljZVBsYXlWaWV3KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkdpZnRBbmltYXRpb24ubm9kZS5hZGRDaGlsZCh0aGlzLlZvaWNlUGxheWVyVmlld05vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuVm9pY2VQbGF5ZXJWaWV3Tm9kZS5zZXRQb3NpdGlvbih0aGlzLkNhbGxCYW5rZXJGbGFnW2Zyb21WaWV3SWRdLm5vZGUucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gSlNPTi5wYXJzZShCQVNFNjQuZGVjb2Rlcihtc2cudGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25DaGF0TXNnLGZpbGVJRCA9IFwiICsgdGV4dC5maWxlSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25DaGF0TXNnLGRvd25sb2FkRmlsZVBhdGggPSBcIiArIHRleHQuZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5Eb3dubG9hZFJlY29yZGVkRmlsZSh0ZXh0LmZpbGVJRCx0ZXh0LmZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/or63pn7PkuIDmrKHlj6rog73mkq3mlL7kuIDkuKrvvIzlpoLmnpzlvZPliY3mnInmkq3mlL7nmoTlhYjkv53lrZjvvIznrYnmkq3mlL7njqnkuobnu6fnu63mkq3mlL5cclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJvbkNoYXRNc2csbXNnID0gXCIgKyBKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlZvaWNlQXJyYXkucHVzaChtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIm9uQ2hhdE1zZyxWb2ljZUFycmF5ID0gXCIgKyB0aGlzLlZvaWNlQXJyYXkubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmKG1zZy5raW5kID09IENoYXRUeXBlLkVfQ0hBVF9XT1JEX0tJTkQpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9naW5Nc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vbkxvZ2luTXNnXCIpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA+PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUYWJsZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmRlbEFsbFBsYXllcigpO1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKENtZF9CdWxsZmlnaHQuVVNfUkVRX1RBQkxFX0RFVEFJTF9DTURfSUQpLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dTaGFyZVZpZXcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNoYXJlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2hhcmVWaWV3KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoc2hhcmVWaWV3KTtcclxuICAgICAgICBzaGFyZVZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICB2YXIgc3RyaW5nID0gXCLmiJHlnKjmuLjmiI/vvLtcIiArIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5nZXRBcHBOYW1lKCkgK1wi77y96YeM5Yib5bu65LqG5oi/6Ze0KFwiICsgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnByaXZhdGVpZCsgXCIpLOW/q+eCueS4gOi1t+adpeeOqeWQp++8ge+8ge+8gVwiO1xyXG4gICAgICAgIHNoYXJlVmlldy5nZXRDb21wb25lbnQoXCJTaGFyZVZpZXdcIikuc2V0U2hhcmVUeWVwKFNoYXJlVHlwZS5FX1NIQVJFVFlQRV9MSU5LLHN0cmluZyxHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuY2xpZW50dXJsKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25FbnRlclJvb20gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vbkVudGVyUm9vbVwiKTtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlUnVsZUluZm8gICA9IEpTT04ucGFyc2UoQkFTRTY0LmRlY29kZXIobXNnLnBhcmFtKSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFibGVTdGF0dXMgICAgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgICAgIHRoaXMubV9pTWF4UGxheWVycyAgID0gbXNnLnNlYXRzO1xyXG4gICAgICAgICAgICB0aGlzLlJvb21OYW1lLnN0cmluZyA9IG1zZy5uYW1lO1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuYm93bmVyICAgID0gbXNnLmJvd25lcjtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyAgICA9IG1zZy51c3RhdHVzO1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuc3VwZXJDb3N0ID0gbXNnLnN1cGVyY29zdDtcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdpZnRDb3N0ICA9IG1zZy5naWZ0Y29zdHM7XHJcbiAgICAgICAgICAgIHRoaXMuU3VwZXJDb3N0TGFiZWwuc3RyaW5nID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnN1cGVyQ29zdDtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCZXQodGhpcy50YWJsZVJ1bGVJbmZvLm1pbmFudGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgKG1zZy5ib3duZXIgPT0gMSkge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5CdG5Db250cm9sLm5vZGUuYWN0aXZlID0gdHJ1ZVxyXG4gICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5CdG5Db250cm9sLm5vZGUuYWN0aXZlID0gZmFsc2VcclxuICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgY2MubG9nKFwib25FbnRlclJvb206IHRzdGF0dXM9XCIsIHRoaXMudGFibGVTdGF0dXMsIFwiIHN0YXR1cz1cIiwgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICAvL+acrOWxgOa4uOaIj+ayoeacieW8gOWni++8jOW5tuS4lOiHquW3seaYr+ahjOS4u1xyXG4gICAgICAgICAgICBpZiAoKHRoaXMudGFibGVTdGF0dXMgPT0gQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfTk9UX1NUQVJUX1NUQVRVUykgJiYgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmJvd25lciA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJvbkVudGVyUm9vbTogYm93bmVyPVwiICsgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmJvd25lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpOyAvL+aYvuekuua4uOaIj+W8gOWni+aMiemSrlxyXG4gICAgICAgICAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1cyAhPSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzVHlwZS5WRVJTSU9OX1RZUEVfQVVESVQpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U2hhcmVWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGFibGVTdGF0dXMgPiBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9OT1RfU1RBUlRfU1RBVFVTKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uRW50ZXJSb29tLCBnZXQgdGFibGUgZGV0YWlsLlwiKTtcclxuICAgICAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoQ21kX0J1bGxmaWdodC5VU19SRVFfVEFCTEVfREVUQUlMX0NNRF9JRCkuc2VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy50YWJsZVN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfUkVBRFlfU1RBVFVTOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLlh4blpIfkuK1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQ0FMTF9TVEFUVVM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgPSBcIuaKouW6hOS4rVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9CRVRfU1RBVFVTOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLkuIvms6jkuK1cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfT1BFTl9TVEFUVVM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgPSBcIuW8gOeJjOS4rVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9PUEVOX1NUQVRVUzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi5pys5bGA57uT5p2fXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi5ri45oiP5pyq5byA5aeLXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5pi+56S65Zyo6Ieq5bex5LmL5YmN6L+b5YWl55qE546p5a62XHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgbXNnLnNlYXRlcnMgIT0gbnVsbCAmJiBpbmRleCA8IG1zZy5zZWF0ZXJzLmxlbmd0aDtpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyICAgICAgICA9IG5ldyBQbGF5ZXI7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudWlkICAgICAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS51aWQ7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIubmFtZSAgICAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmhlYWR1cmwgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uaGVhZHVybDtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zZXggICAgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLnNleDtcclxuICAgICAgICAgICAgICAgIHBsYXllci5nb2xkICAgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLmdvbGQ7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZGlhbW9uZCAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5kaWFtb25kO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmNvaW4gICAgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uY29pbjtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zZWF0aWQgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLnNlYXRpZDtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zdGF0dXMgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIHBsYXllci53aW5Hb2xkICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLndpbjtcclxuICAgICAgICAgICAgICAgIHBsYXllci5Ub3RhbENhcnJ5ID0gbXNnLnNlYXRlcnNbaW5kZXhdLnRvdGFsO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLlRvdGFsUm91bmQgPSBtc2cuc2VhdGVyc1tpbmRleF0udG90YWxyb3VuZDsgLy/mgLvmiYvmlbBcclxuICAgICAgICAgICAgICAgIHBsYXllci5Ub3RhbFRhYmxlID0gbXNnLnNlYXRlcnNbaW5kZXhdLnRvdGFsdGFibGU7IC8v5oC75bGA5pWwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBsYXllcihwbGF5ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEFsbFBsYXllck9uVGFibGUoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuU2l0RG93bigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgU2l0RG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBzdGF0dXMgOiAxLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX1NJVF9ET1dOX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19TSVQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvblNpdERvd24gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vblNpdERvd25cIik7XHJcbiAgICAgICAgTG9hZGluZ1ZpZXcuZGlzbWlzcygpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgICAgICBpZiAobXNnLnN3aXRjaCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gbmV3IFBsYXllcigpO1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwicGxheWVyLnNlYXRpZCA9IFwiICsgbXNnLnNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIudWlkICAgICAgICA9IG1zZy5zZWF0dWlkO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLm5hbWUgICAgICAgPSBtc2cubmFtZTtcclxuICAgICAgICAgICAgICAgIHBsYXllci5oZWFkdXJsICAgID0gbXNnLmhlYWR1cmw7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2V4ICAgICAgICA9IG1zZy5zZXg7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZ29sZCAgICAgICA9IG1zZy5nb2xkO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmRpYW1vbmQgICAgPSBtc2cuZGlhbW9uZDtcclxuICAgICAgICAgICAgICAgIHBsYXllci5jb2luICAgICAgID0gbXNnLmNvaW47XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc3RhdHVzICAgICA9IG1zZy5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc2VhdGlkICAgICA9IG1zZy5zZWF0aWQ7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIud2luR29sZCAgICA9IG1zZy53aW47XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuVG90YWxDYXJyeSA9IG1zZy50b3RhbDtcclxuICAgICAgICAgICAgICAgIHBsYXllci5Ub3RhbFJvdW5kID0gbXNnLnRvdGFscm91bmQ7IC8v5oC75omL5pWwXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuVG90YWxUYWJsZSA9IG1zZy50b3RhbHRhYmxlOyAvL+aAu+WxgOaVsFxyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwib25TaXREb3duIHBsYXllci5Ub3RhbFJvdW5kPVwiLCBwbGF5ZXIuVG90YWxSb3VuZCwgXCIgcGxheWVyLlRvdGFsVGFibGU9XCIsIHBsYXllci5Ub3RhbFRhYmxlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRQbGF5ZXIocGxheWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWxsUGxheWVyT25UYWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93T25lUGxheWVySW5UYWJsZShwbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtc2cuc2VhdHVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5pc2NhcnJ5ID4gMCkgeyAvL+mcgOimgeaQuuW4pumHkeW4gVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUNhcnJ5Vmlldyhtc2cuY2Fycnl0aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsUGxheWVyKG1zZy5zZWF0dWlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChtc2cuc2VhdHVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7IC8v5aaC5p6c5piv6Ieq5bex77yM5YiZ6ZyA6KaB5riF55CG5oyJ6ZSuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQWxsUGxheWVyT25UYWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKG1zZy5jb2RlID4gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkNhcnJ5Q29pbiA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIlslZCwlZF1cIiwgbXNnLmNhcnJ5dWlkLCBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKTtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmJvd25lciAhPSAxICYmIG1zZy5jYXJyeXVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuahjOS4u+W3suWQjOaEj+aCqOeahOivt+axglwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuZmluZFBsYXllcihtc2cuY2Fycnl1aWQpO1xyXG4gICAgICAgICAgICBpZiAocGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uQ2FycnlDb2luLGNhcnJ5Y29pbiA9IFwiICsgbXNnLmNhcnJ5Y29pbiwgXCIgY29pbj1cIiwgbXNnLmNvaW4pO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLnN0YXR1cyAgICAgPSBtc2cudXN0YXR1cztcclxuICAgICAgICAgICAgICAgIHBsYXllci5Ub3RhbENhcnJ5ID0gbXNnLmNhcnJ5Y29pbjtcclxuICAgICAgICAgICAgICAgIHBsYXllci5jb2luICAgICAgID0gbXNnLmNvaW47XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuZ29sZCAgICAgICA9IG1zZy5nb2xkO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyLmRpYW1vbmQgICAgPSBtc2cuZGlhbW9uZDtcclxuICAgICAgICAgICAgICAgIHZhciB2aWV3aWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHBsYXllci5zZWF0aWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW3ZpZXdpZF0uc2V0VXNlckdvbGQocGxheWVyLmNvaW4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnLmNhcnJ5dWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMgPSBtc2cudXN0YXR1cztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RhYmxlU3RhdHVzQnRuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxlYXZlR2FtZSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uTGVhdmVHYW1lXCIpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQgPSAwO1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCAgID0gMDtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdIYWxsU2NlbmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTm90aWZ5R2FtZVN3aXRjaCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uTm90aWZ5R2FtZVN3aXRjaFwiKTtcclxuICAgICAgICBpZiAobXNnLmlzU3RhcnQgPT0gMSkgIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1cyAgICAgICAgICAgICAgICA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzID0gbXNnLnVzdGF0dXM7XHJcblxyXG4gICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uTm90aWZ5R2FtZVN3aXRjaCx0aGlzLnRhYmxlU3RhdHVzID0gXCIgKyB0aGlzLnRhYmxlU3RhdHVzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1RhYmxlU3RhdHVzQnRuKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaXRQbGF5ZXJzLnNpemUoKSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0Q2xvY2tUaW1lKG1zZy5yZWFkeVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi5YeG5aSH5LitXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLor7flhaXluqdcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jbGVhckFsbFBsYXllckNhcmRJdGVtKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYWxsQmFua2VyRmxhZygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyVXNlcldpblNjb3JlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJVc2VySGVhZEJhbmtlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL+W8ueahhuaPkOekuueOqeWutua4uOaIj+ino+aVo1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk5vdGlmeUdhbWVTdGFydCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uTm90aWZ5R2FtZVN0YXJ0XCIpO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyUmVhZHlGbGFnKCk7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9IG1zZy51c3RhdHVzO1xyXG4gICAgICAgIHRoaXMudGFibGVTdGF0dXMgPSBtc2cudHN0YXR1cztcclxuICAgICAgICB0aGlzLnJvdW5kbnVtID0gbXNnLnJvdW5kbnVtO1xyXG4gICAgICAgIHRoaXMuUm91bmROdW0uc3RyaW5nID0gXCLnrKxcIiArIHRoaXMucm91bmRudW0gKyBcIuWxgFwiO1xyXG4gICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgICAgID0gXCLmiqLluoTkuK1cIjtcclxuXHJcbiAgICAgICAgdGhpcy5zdGFydENsb2NrVGltZShtc2cuY2FsbHRpbWUpO1xyXG5cclxuICAgICAgICAvL+WcqOW6p+S9jeS4ilxyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkID49IDApIHtcclxuICAgICAgICAgICAgaWYgKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMgPT0gQnVsbGZpZ2h0X1BsYXllclN0YXR1cy5FX1BMQVlFUl9BQ1RJVkVfU1RBVFVTKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZENhcmRzVG9QbGF5ZXIodmlld0lkLCBtc2cuY2FyZHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG5cclxuICAgICAgICAvL+WFtuS7lueOqeWutlxyXG4gICAgICAgIC8vIFVpZCAgICAgdWludDMyIGBqc29uOlwidWlkXCJgXHJcbiAgICAgICAgLy8gVVN0YXR1cyBpbnQgICAgYGpzb246XCJ1c3RhdHVzXCJgXHJcbiAgICAgICAgLy8gU2VhdElkICBpbnQgICAgYGpzb246XCJzZWF0aWRcImBcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7aW5kZXggPCBtc2cuc2VhdGVycy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBtc2cuc2VhdGVyc1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICB2YXIgcGxheWVyID0gdGhpcy5maW5kUGxheWVyKGl0ZW0udWlkKTtcclxuICAgICAgICAgICAgcGxheWVyLnN0YXR1cyA9IGl0ZW0udXN0YXR1cztcclxuICAgICAgICAgICAgcGxheWVyLmZpbmFsY29pbiAgPSAwO1xyXG4gICAgICAgICAgICBwbGF5ZXIuYnVsbHR5cGUgICA9IDA7XHJcbiAgICAgICAgICAgIHBsYXllci5jYXJkcyAgICAgID0gW107XHJcbiAgICAgICAgICAgIHBsYXllci5jYWxsdHlwZSAgID0gMDsgIC8v5Y+r5bqE57G75Z6LXHJcbiAgICAgICAgICAgIHBsYXllci5iQmFua2VyICAgID0gMDsgIC8v5piv5ZCm5piv5bqE5a62XHJcbiAgICAgICAgICAgIHBsYXllci5iZXRjb2lubXVsID0gMDsgIC8v5LiL5rOo5YCN5pWwXHJcbiAgICAgICAgICAgIHBsYXllci5iT3BlbkNhcmQgID0gMDsgIC8v5piv5ZCm55yL54mMXHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS51c3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfQUNUSVZFX1NUQVRVUykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpZXdJZCA9IHRoaXMuZ2V0UGxheWVyVmlld0lkQnlTZWF0SWQoaXRlbS5zZWF0aWQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmRzID0gWzAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRDYXJkc1RvUGxheWVyKHZpZXdJZCwgY2FyZHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/ml4Hop4JcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaExvb2tGbGFnKGl0ZW0udWlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25SZWFkeSA6IGZ1bmN0aW9uKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25SZWFkeSByZWFkdWlkPVwiLCBtc2cucmVhZHl1aWQsIFwiIHVzdGF0dXM9XCIsIG1zZy51c3RhdHVzKTtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnLnJlYWR5dWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMgPSBtc2cudXN0YXR1cztcclxuICAgICAgICAgICAgICAgIHRoaXMuQnRuUmVhZHkubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJUYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi562J5b6F5YW25LuW546p5a625YeG5aSHXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGxheWVyU3RhdHVzKG1zZy5yZWFkeXVpZCwgbXNnLnVzdGF0dXMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoUmVhZHlGbGFnKG1zZy5yZWFkeXVpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkNhbGxCYW5rZXIgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vbkNhbGxCYW5rZXJcIik7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgICAgICBpZiAobXNnLmNhbGx1aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5CdG5DYWxsQmFua2VyTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgPSBcIuetieW4puWFtuS7lueOqeWutuaKouW6hFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBsYXllckNhbGxUeXBlKG1zZy5jYWxsdWlkLCBtc2cuY2FsbHR5cGUpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDYWxsQmFua2VyRmxhZyhtc2cuY2FsbHVpZCwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3cobXNnLmRlc2MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25Ob3RpZnlTdXJlQmFua2VyIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25Ob3RpZnlTdXJlQmFua2VyXCIpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJDYWxsQmFua2VyRmxhZygpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRDbG9ja1RpbWUobXNnLmJldHRpbWUpO1xyXG4gICAgICAgIHRoaXMuYmFua2VyVWlkICAgPSBtc2cuYmFua2VydWlkO1xyXG4gICAgICAgIHRoaXMubV9pTWF4QmV0ICAgPSBtc2cubWF4YmV0bXVsO1xyXG4gICAgICAgIHRoaXMudGFibGVTdGF0dXMgPSBtc2cudHN0YXR1cztcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzID0gbXNnLnVzdGF0dXM7XHJcblxyXG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLmZpbmRQbGF5ZXIobXNnLmJhbmtlcnVpZCk7XHJcbiAgICAgICAgcGxheWVyLmJCYW5rZXIgPSAxO1xyXG4gICAgICAgIHZhciB2aWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHBsYXllci5zZWF0aWQpO1xyXG4gICAgICAgIHRoaXMuUGxheWVySXRlbVBvc1t2aWV3SWRdLnNldFBsYXllckJhbmtlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgPSBcIuS4i+azqOS4rVwiO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkdhbWVTd2l0Y2ggOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vbkdhbWVTd2l0Y2hcIik7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtc2cuaXNzdGFydCA9PSAxKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkJ0blN0YXJ0Lm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLmuLjmiI/lvIDlp4tcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oi/6Ze06Kej5pWj5oiQ5Yqf77yM5pys5bGA57uT5p2f5ZCO5bCG6Kej5pWjXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChtc2cuY29kZSA9PSAxNCkge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkJldENvaW4gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5vbkJldENvaW5cIik7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGFibGVTdGF0dXMgICAgICAgICAgICAgICAgPSBtc2cudHN0YXR1cztcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9IG1zZy51c3RhdHVzO1xyXG5cclxuICAgICAgICAgICAgaWYgKChtc2cuYmV0dWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpICYmXHJcbiAgICAgICAgICAgICAgICAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9PSBCdWxsZmlnaHRfUGxheWVyU3RhdHVzLkVfUExBWUVSX0FDVElWRV9TVEFUVVMpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuQmV0Q29pbk5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5CdG5CZXRSb29tQ2FyZE5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5CdG5CZXROb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi562J5b6F5YW25LuW546p5a625LiL5rOoXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuc2l0UGxheWVycy5nZXQobXNnLmJldHVpZCk7XHJcbiAgICAgICAgICAgIHBsYXllci5iZXRjb2lubXVsID0gbXNnLmJldGNvaW5tdWw7XHJcbiAgICAgICAgICAgIHZhciB2aWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHBsYXllci5zZWF0aWQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFBsYXllckJldENvdW50KHZpZXdJZCwgcGxheWVyLmJldGNvaW5tdWwgKiB0aGlzLnRhYmxlUnVsZUluZm8ubWluYW50ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk5vdGlmeU9wZW5DYXJkIDogZnVuY3Rpb24gKG1zZylcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJvbk5vdGlmeU9wZW5DYXJkLi4uXCIpO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMgPSBtc2cudXN0YXR1cztcclxuICAgICAgICB0aGlzLnRhYmxlU3RhdHVzID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zdGFydENsb2NrVGltZShtc2cub3BlbnRpbWUpO1xyXG4gICAgICAgIHRoaXMuVGlwcy5zdHJpbmcgPSBcIueci+eJjOS4rVwiO1xyXG5cclxuICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyAhPSBCdWxsZmlnaHRfUGxheWVyU3RhdHVzLkVfUExBWUVSX0FDVElWRV9TVEFUVVMpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmNhcmRzID0gbXNnLmNhcmRzO1xyXG4gICAgICAgIHZhciB2aWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQpO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25Ob3RpZnlPcGVuQ2FyZCx2aWV3SWQgPSBcIiArIHZpZXdJZCk7XHJcbiAgICAgICAgdGhpcy5vcGVucGxheWVyQ2FyZHModmlld0lkLCBtc2cuY2FyZHMsIC0xLCAtMSk7XHJcbiAgICAgICAgdGhpcy5zaG93VGFibGVTdGF0dXNCdG4oKTtcclxuICAgICAgICB0aGlzLnNldEN1c3RvbUNhcmRUeXBlKHRydWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbk9wZW5DYXJkIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuZmluZFBsYXllcihtc2cub3BlbnVpZCk7XHJcbiAgICAgICAgICAgIHBsYXllci5idWxsdHlwZSAgPSBtc2cuYnVsbHR5cGU7XHJcbiAgICAgICAgICAgIHBsYXllci5jYXJkcyAgICAgPSBtc2cuY2FyZHM7XHJcbiAgICAgICAgICAgIHBsYXllci5iT3BlbkNhcmQgPSAxO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLm9uT3BlbkNhcmQscGxheWVyID0gXCIgKyBwbGF5ZXIpO1xyXG4gICAgICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChtc2cuc2VhdGlkKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRDYXJkVHlwZSh2aWV3SWQsIHBsYXllci5idWxsdHlwZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbnBsYXllckNhcmRzKHZpZXdJZCwgcGxheWVyLmNhcmRzLCBtc2cuaW5kZXgxLCBtc2cuaW5kZXgyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtc2cub3BlbnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEN1c3RvbUNhcmRUeXBlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuT3BlbkNhcmROb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXBzLnN0cmluZyA9IFwi562J5b6F5YW25LuW546p5a6255yL54mMXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTm90aWZ5T25lR2FtZVJlc3VsdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLnRhYmxlU3RhdHVzICAgICAgICAgICAgICAgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9IG1zZy51c3RhdHVzO1xyXG5cclxuICAgICAgICBjYy5sb2coXCJvbk5vdGlmeU9uZUdhbWVSZXN1bHQgbXNnLnVzdGF0dXM9XCIsIG1zZy51c3RhdHVzLCBcIiBzdGF0dXM9XCIsIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMpO1xyXG5cclxuICAgICAgICB0aGlzLk9wZW5DYXJkTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNldEN1c3RvbUNhcmRUeXBlKGZhbHNlKTtcclxuICAgICAgICAvLyB0aGlzLmNsZWFyQWxsUGxheWVyQ2FyZEl0ZW0oKTtcclxuICAgICAgICAvLyB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgIC8vIHRoaXMuY2xlYXJDYWxsQmFua2VyRmxhZygpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRDbG9ja1RpbWUobXNnLm92ZXJ0aW1lKTtcclxuICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLmnKzlsYDnu5PnrpdcIjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwO2luZGV4IDwgbXNnLnNlYXRlcnMubGVuZ3RoO2luZGV4KyspIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5zZWF0ZXJzW2luZGV4XS51c3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfT1ZFUl9TVEFUVVMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLmZpbmRQbGF5ZXIobXNnLnNlYXRlcnNbaW5kZXhdLnVpZCk7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc3RhdHVzID0gbXNnLnNlYXRlcnNbaW5kZXhdLnVzdGF0dXM7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY29pbiAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLmNvaW47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHZpZXdpZCA9IHRoaXMuZ2V0UGxheWVyVmlld0lkQnlTZWF0SWQobXNnLnNlYXRlcnNbaW5kZXhdLnNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlBsYXllckl0ZW1Qb3Nbdmlld2lkXS5zZXRVc2VyV2luU2NvcmUobXNnLnNlYXRlcnNbaW5kZXhdLmZpbmFsY29pbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlBsYXllckl0ZW1Qb3Nbdmlld2lkXS5zZXRVc2VyR29sZChtc2cuc2VhdGVyc1tpbmRleF0uY29pbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5zZWF0ZXJzW2luZGV4XS51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtc2cuc2VhdGVyc1tpbmRleF0uZmluYWxjb2luID4gMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLkNhbGxCYW5rZXJGbGFnW3ZpZXdpZF0ubm9kZS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5HaWZ0QW5pbWF0aW9uLnBsYXlXaW5BbmltYXRpb24ocG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX1dJTik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTE9TRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBkb0tpY2tPdXQgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlICE9IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIC8v6YCJ5oup5pC65bim6YeR5biB6LaF5pe2XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRlbFBsYXllcihtc2cuc2VhdHVpZCk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUuZG9LaWNrT3V0LHVpZCA9IFwiICsgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCk7XHJcbiAgICAgICAgICAgIGlmIChtc2cuc2VhdHVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLmRvS2lja091dCwgbXkgYmUga2lja291dC5cIik7XHJcbiAgICAgICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQgPSAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEFsbFBsYXllck9uVGFibGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5jb2RlICE9IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk5vdGlmeU5vdENhbGxiYW5rZXIgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIG9uTm90aWZ5Tm90QmV0IDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICBOb3RpZnlUb3RhbEdhbWVSZXN1bHQgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVUb3RhbEdhbWVSZXN1bHQobXNnKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNyZWF0ZVRvdGFsR2FtZVJlc3VsdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgZ2FtZUVuZCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuR2FtZVRvdGFsUmVzdWx0KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoZ2FtZUVuZCk7XHJcbiAgICAgICAgZ2FtZUVuZC5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIGdhbWVFbmQuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2h0X1RvdGFsUmVzdWx0XCIpLnNldEdhbWVEYXRhKG1zZyx0aGlzLkdhbWVTY2VuZSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBvbkdldFRhYmxlRGV0YWlsIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuXHJcbiAgICAgICAgdGhpcy50YWJsZVJ1bGVJbmZvID0ge1xyXG4gICAgICAgICAgICBnYW1ldHlwZSAgIDogbXNnLmdhbWV0eXBlLFxyXG4gICAgICAgICAgICBtaW5hbnRlICAgIDogbXNnLm1pbmFudGUsXHJcbiAgICAgICAgICAgIG1pbmNhcnJ5ICAgOiBtc2cubWluY2FycnksXHJcbiAgICAgICAgICAgIG1heGNhcnJ5ICAgOiBtc2cubWF4Y2FycnksXHJcbiAgICAgICAgICAgIGxpdmV0aW1lICAgOiBtc2cubGl2ZXRpbWUsXHJcbiAgICAgICAgICAgIHNlYXRzICAgICAgOiBtc2cuc2VhdHMsXHJcbiAgICAgICAgICAgIGJ1bGxtdWwgICAgOiBtc2cuYnVsbG11bCxcclxuICAgICAgICAgICAgdG90YWxjYXJyeSA6IG1zZy50b3RhbGNhcnJ5LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIm9uR2V0VGFibGVEZXRhaWwgbWluY2Fycnk9XCIsIG1zZy5taW5taW5jYXJyeSwgXCIgbWF4Y2Fycnk9XCIsIG1zZy5tYXhjYXJyeSk7XHJcblxyXG4gICAgICAgIHRoaXMucm91bmRudW0gPSBtc2cucm91bmRudW07XHJcbiAgICAgICAgdGhpcy5Sb3VuZE51bS5zdHJpbmcgPSBcIuesrFwiICsgdGhpcy5yb3VuZG51bSArIFwi5bGAXCI7XHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnByaXZhdGVpZCA9IG1zZy5wcml2YXRlaWQ7XHJcbiAgICAgICAgdGhpcy5Sb29tSWQuc3RyaW5nICAgPSBcIklEOlwiICsgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnByaXZhdGVpZCA7XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIm9uR2V0VGFibGVEZXRhaWwgcm91bmRudW09XCIsIHRoaXMucm91bmRudW0sIFwiIHByaXZhdGVpZD1cIiwgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnByaXZhdGVpZCk7XHJcblxyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5Ub3RhbENhcnJ5ID0gbXNnLmNhcnJ5Y29pbjtcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuYm93bmVyICAgICA9IG1zZy5ib3duZXI7XHJcblxyXG4gICAgICAgIC8vIGlmIChtc2cuYm93bmVyID09IDEpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5CdG5Db250cm9sLm5vZGUuYWN0aXZlID0gdHJ1ZVxyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuQnRuQ29udHJvbC5ub2RlLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICB0aGlzLm1faU1heFBsYXllcnMgPSBtc2cuc2VhdHM7XHJcbiAgICAgICAgdGhpcy50YWJsZVN0YXR1cyAgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5iYW5rZXJVaWQgICAgID0gbXNnLmJhbmtlcnVpZDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNsb2NrVGltZShtc2cudGltZW91dCk7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgbXNnLnNlYXRlcnMubGVuZ3RoO2luZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgcGxheWVyICAgICAgICA9IG5ldyBQbGF5ZXI7XHJcbiAgICAgICAgICAgIHBsYXllci51aWQgICAgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLnVpZDtcclxuICAgICAgICAgICAgcGxheWVyLm5hbWUgICAgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0ubmFtZTtcclxuICAgICAgICAgICAgcGxheWVyLmhlYWR1cmwgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uaGVhZHVybDtcclxuICAgICAgICAgICAgcGxheWVyLnNleCAgICAgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uc2V4O1xyXG4gICAgICAgICAgICBwbGF5ZXIuZ29sZCAgICAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5nb2xkO1xyXG4gICAgICAgICAgICBwbGF5ZXIuZGlhbW9uZCAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5kaWFtb25kO1xyXG4gICAgICAgICAgICBwbGF5ZXIuY29pbiAgICAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5jb2luO1xyXG4gICAgICAgICAgICBwbGF5ZXIuc3RhdHVzICAgICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5zdGF0dXM7XHJcbiAgICAgICAgICAgIHBsYXllci5zZWF0aWQgICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLnNlYXRpZDtcclxuICAgICAgICAgICAgcGxheWVyLlRvdGFsQ2FycnkgPSBtc2cuc2VhdGVyc1tpbmRleF0udG90YWw7XHJcbiAgICAgICAgICAgIHBsYXllci53aW5Hb2xkICAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLndpbjtcclxuICAgICAgICAgICAgcGxheWVyLmNhbGx0eXBlICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uY2FsbHR5cGU7XHJcbiAgICAgICAgICAgIHBsYXllci5iZXRjb2lubXVsID0gbXNnLnNlYXRlcnNbaW5kZXhdLmJldG11bDtcclxuICAgICAgICAgICAgcGxheWVyLmNhcmRzICAgICAgPSBtc2cuc2VhdGVyc1tpbmRleF0uY2FyZHM7XHJcbiAgICAgICAgICAgIHBsYXllci5idWxsdHlwZSAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLmJ1bGx0eXBlO1xyXG4gICAgICAgICAgICBwbGF5ZXIuZmluYWxjb2luICA9IG1zZy5zZWF0ZXJzW2luZGV4XS5maW5hbGNvaW47XHJcbiAgICAgICAgICAgIHBsYXllci5Ub3RhbFJvdW5kID0gbXNnLnNlYXRlcnNbaW5kZXhdLnRvdGFscm91bmQ7IC8v5oC75omL5pWwXHJcbiAgICAgICAgICAgIHBsYXllci5Ub3RhbFRhYmxlID0gbXNnLnNlYXRlcnNbaW5kZXhdLnRvdGFsdGFibGU7IC8v5oC75bGA5pWwXHJcbiAgICAgICAgICAgIHBsYXllci5iT3BlbkNhcmQgID0gbXNnLnNlYXRlcnNbaW5kZXhdLmJvcGVuY2FyZDsgIC8vXHJcblxyXG4gICAgICAgICAgICBpZiAocGxheWVyLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1faU1heEJldCAgID0gbXNnLnNlYXRlcnNbaW5kZXhdLm1heGJldG11bDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYmFua2VyVWlkID09IHBsYXllci51aWQpIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5iQmFua2VyID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsYXllci5iQmFua2VyID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5sb2coXCJvbkdldFRhYmxlRGV0YWlsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgaXNiYW5rZXI9XCIsIHBsYXllci5iQmFua2VyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkUGxheWVyKHBsYXllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVmcmVzaEFsbFBsYXllck9uVGFibGUodHJ1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKnNlbmQgTWVzc2FnZSAqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICBzZW5kUmVhZHkgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfUkVBRFlfQ01EX0lEKS5zZW5kKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRDYWxsQmFua2VyIDogZnVuY3Rpb24gKGNhbGxUeXBlKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNhbGx0eXBlIDogY2FsbFR5cGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKENtZF9CdWxsZmlnaHQuU0JGX1JFUV9DQUxMX0JBTktFUl9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZW5kU3dpdGNoR2FtZSA6IGZ1bmN0aW9uIChpc1N0YXJ0KSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGlzc3RhcnQgOiBpc1N0YXJ0LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfR0FNRV9TV0lUQ0hfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZW5kQmV0Q29pblJlcSA6IGZ1bmN0aW9uIChiZXRjb2luKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGJldGNvaW5tdWwgOiB0aGlzLm1faU15QmV0Q29pbixcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoQ21kX0J1bGxmaWdodC5TQkZfUkVRX0JFVF9DT0lOX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNlbmRPcGVuQ2FyZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKENtZF9CdWxsZmlnaHQuU0JGX1JFUV9PUEVOX0NBUkRfQ01EX0lEKS5zZW5kKCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqKipCdG5DYWxsYmFjayoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgY2FsbGJhY2tCdG5NdXNpYyA6IGZ1bmN0aW9uICh0b2dnbGUsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIGlzQ2hlY2sgPSB0b2dnbGUuaXNDaGVja2VkO1xyXG4gICAgICAgIGlmIChpc0NoZWNrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgTXVzaWNNZ3IucmVzdW1lQmFja2dyb3VuZE11c2ljKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIE11c2ljTWdyLnBhdXNlQmFja2dyb3VuZE11c2ljKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbEJhY2tCZXRCdG5Sb29tQ2FyZCA6IGZ1bmN0aW9uIChldmVudCxDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICB2YXIgYnRuID0gbm9kZS5nZXROYW1lKCk7XHJcblxyXG5cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG5cclxuXHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5jYWxsQmFja0JldEJ0blJvb21DYXJkLGJ0biA9IFwiICsgYnRuKTtcclxuXHJcbiAgICAgICAgaWYoYnRuID09IFwiQnRuQmV0MVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5tX2lNeUJldENvaW4gPSAxO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJbQnRuQmV0MV0gbV9pTXlCZXRDb2luPVwiLCB0aGlzLm1faU15QmV0Q29pbik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWF4QmV0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZEJldENvaW5SZXEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5CZXQzXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1faU15QmV0Q29pbiA9IDM7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIltCdG5CZXQyXSBtX2lNeUJldENvaW49XCIsIHRoaXMubV9pTXlCZXRDb2luKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVNYXhCZXQoKTtcclxuICAgICAgICAgICAgdGhpcy5zZW5kQmV0Q29pblJlcSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0biA9PSBcIkJ0bkJldDVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9pTXlCZXRDb2luID0gNTtcclxuICAgICAgICAgICAgdGhpcy5CZXRBcnJheS5wdXNoKDUpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJbQnRuQmV0NV0gIG1faU15QmV0Q29pbj1cIiwgdGhpcy5tX2lNeUJldENvaW4pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1heEJldCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRCZXRDb2luUmVxKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uIChldmVudCxDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICB2YXIgYnRuID0gbm9kZS5nZXROYW1lKCk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5jYWxsYmFja0J0bixidG4gPSBcIiArIGJ0bik7XHJcblxyXG4gICAgICAgIGlmIChidG4gPT0gXCJCdG5NZW51XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU1lbnUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYnRuID09IFwiQnRuU3VjY2Vzc1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHBsYXllckxpc3QgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlBsYXllcnNMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKHBsYXllckxpc3QpO1xyXG4gICAgICAgICAgICBwbGF5ZXJMaXN0LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGJ0biA9PSBcIkJ0blNwZWVjaFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy90aGlzLmNyZWF0ZVRvdGFsR2FtZVJlc3VsdCgpO1xyXG4gICAgICAgICAgICAvL3RoaXMuR2lmdEFuaW1hdGlvbi5wbGF5R2lmdEFuaW1hdGlvbigxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYnRuID09IFwiQnRuTXVzaWNPblwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5NdXNpY09mZi5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuTXVzaWNPbi5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZvbHVtZVN0YXRlID0gMTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIE11c2ljTWdyLnBhdXNlQmFja2dyb3VuZE11c2ljKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGJ0biA9PSBcIkJ0bk11c2ljT2ZmXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bk11c2ljT2ZmLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuTXVzaWNPbi5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVm9sdW1lU3RhdGUgPSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgTXVzaWNNZ3IucmVzdW1lQmFja2dyb3VuZE11c2ljKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuU3RhcnRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFN3aXRjaEdhbWUoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuUmVhZHlcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZFJlYWR5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuTm90Q2FsbFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ2FsbEJhbmtlcigxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5DYWxsXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRDYWxsQmFua2VyKDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0biA9PSBcIkJ0blN1cGVyQ2FsbFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kQ2FsbEJhbmtlcigzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5CZXQxXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1faU15QmV0Q29pbiArPSAxO1xyXG4gICAgICAgICAgICB0aGlzLkJldEFycmF5LnB1c2goMSk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIltCdG5CZXQxXSB0aGlzLkJldEFycmF5ID0gXCIsIHRoaXMuQmV0QXJyYXksIFwiIG1faU15QmV0Q29pbj1cIiwgdGhpcy5tX2lNeUJldENvaW4pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1heEJldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0biA9PSBcIkJ0bkJldDJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9pTXlCZXRDb2luICs9IDI7XHJcbiAgICAgICAgICAgIHRoaXMuQmV0QXJyYXkucHVzaCgyKTtcclxuICAgICAgICAgICAgY2MubG9nKFwiW0J0bkJldDJdIHRoaXMuQmV0QXJyYXkgPSBcIiwgdGhpcy5CZXRBcnJheSwgIFwiIG1faU15QmV0Q29pbj1cIiwgdGhpcy5tX2lNeUJldENvaW4pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1heEJldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0biA9PSBcIkJ0bkJldDVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9pTXlCZXRDb2luICs9NTtcclxuICAgICAgICAgICAgdGhpcy5CZXRBcnJheS5wdXNoKDUpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJbQnRuQmV0NV0gdGhpcy5CZXRBcnJheSA9IFwiLCB0aGlzLkJldEFycmF5LCAgXCIgbV9pTXlCZXRDb2luPVwiLCB0aGlzLm1faU15QmV0Q29pbik7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWF4QmV0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuQmV0MTBcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubV9pTXlCZXRDb2luICs9IDEwO1xyXG4gICAgICAgICAgICB0aGlzLkJldEFycmF5LnB1c2goMTApO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJbQnRuQmV0MTBdIHRoaXMuQmV0QXJyYXkgPSBcIiwgdGhpcy5CZXRBcnJheSwgIFwiIG1faU15QmV0Q29pbj1cIiwgdGhpcy5tX2lNeUJldENvaW4pO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU1heEJldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0biA9PSBcIkJ0bkJldFN1cmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZEJldENvaW5SZXEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5CZXRDYW5jbGVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkJldEFycmF5Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBiZXQgPSB0aGlzLkJldEFycmF5LnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tX2lNeUJldENvaW4gLT0gYmV0O1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiW0J0bkJldENhbmNsZV0gdGhpcy5CZXRBcnJheSA9IFwiLCB0aGlzLkJldEFycmF5LCAgXCIgbV9pTXlCZXRDb2luPVwiLCB0aGlzLm1faU15QmV0Q29pbiwgXCIgYmV0PVwiICsgYmV0KTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1faU15QmV0Q29pbiA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tX2lNeUJldENvaW4gPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXhCZXQoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNjLndhcm4oXCJbQnRuQmV0Q2FuY2xlXSBub3QgdGhpcy5CZXRBcnJheSA9IFwiLCB0aGlzLkJldEFycmF5LCAgXCIgbV9pTXlCZXRDb2luPVwiLCB0aGlzLm1faU15QmV0Q29pbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5Ob0J1bGxmaWdodFwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT3BlbkNhcmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG4gPT0gXCJCdG5CdWxsZmlnaHRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9wZW5DYXJkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuRXhwcmVzc2lvblwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVFeHByZXNzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuID09IFwiQnRuUm9vbUluZm9cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUm9vbUluZm9WaWV3KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVFeHByZXNzaW9uIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBFeHByZXNzaW9uVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuRXhwcmVzc2lvblZpZXcpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChFeHByZXNzaW9uVmlldyk7XHJcbiAgICAgICAgRXhwcmVzc2lvblZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlTWF4QmV0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1faU1heEJldCAhPSAwICYmIHRoaXMubV9pTXlCZXRDb2luID4gdGhpcy5tX2lNYXhCZXQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuacrOWxgOacgOWkp+S4i+azqOS4uu+8mlwiICsgdGhpcy5tX2lNYXhCZXQqdGhpcy50YWJsZVJ1bGVJbmZvLm1pbmFudGUpO1xyXG4gICAgICAgICAgICB2YXIgYmlnQmV0ICAgICAgICA9IHRoaXMubV9pTXlCZXRDb2luIC0gdGhpcy5tX2lNYXhCZXQ7XHJcbiAgICAgICAgICAgIHZhciBsYXN0UHVzaCAgICAgID0gdGhpcy5CZXRBcnJheS5wb3AoKTtcclxuICAgICAgICAgICAgdmFyIGRpZmZCZXQgICAgICAgPSBsYXN0UHVzaCAtIGJpZ0JldDtcclxuICAgICAgICAgICAgdGhpcy5tX2lNeUJldENvaW4gPSB0aGlzLm1faU1heEJldDtcclxuICAgICAgICAgICAgaWYgKGRpZmZCZXQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY2Mud2FybihcInVwZGF0ZU1heEJldCBpZ25vcmUgZGlmZkJldD1cIiwgZGlmZkJldCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5CZXRBcnJheS5wdXNoKGRpZmZCZXQpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJ1cGRhdGVNYXhCZXQgZGlmZkJldD1cIiwgZGlmZkJldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkKTtcclxuICAgICAgICB0aGlzLnNldFBsYXllckJldENvdW50KHZpZXdJZCwgdGhpcy5tX2lNeUJldENvaW4gKiB0aGlzLnRhYmxlUnVsZUluZm8ubWluYW50ZSk7XHJcblxyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9CRVQpO1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVNZW51IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUuY3JlYXRlTWVudVwiKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG1lbnVQb3AgID0gbnVsbDtcclxuICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWVudVBvcCAgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLk1lbnVSb29tQ2FyZCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChtZW51UG9wKTtcclxuICAgICAgICAgICAgbWVudVBvcC5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgICAgICBtZW51UG9wLmdldENvbXBvbmVudChcIkJ1bGxmaWdoZ3RfTWVudVwiKS5zZXRDYWxsQmFja0NhcnJ5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUsIEJ1bGxmaWdoZ3RfTWVudVwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQ2FycnlWaWV3KDIwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1lbnVQb3AuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2hndF9NZW51XCIpLnNldFJ1bGVJbmZvKHRoaXMudGFibGVSdWxlSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZW51UG9wICA9IGNjLmluc3RhbnRpYXRlKHRoaXMuTWVudSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChtZW51UG9wKTtcclxuICAgICAgICAgICAgbWVudVBvcC5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgICAgICBtZW51UG9wLmdldENvbXBvbmVudChcIkJ1bGxmaWdoZ3RfTWVudVwiKS5zZXRDYWxsQmFja0NhcnJ5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUsIEJ1bGxmaWdoZ3RfTWVudVwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQ2FycnlWaWV3KDIwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1lbnVQb3AuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2hndF9NZW51XCIpLnNldFJ1bGVJbmZvKHRoaXMudGFibGVSdWxlSW5mbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNyZWF0ZVJvb21JbmZvVmlldyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLmNyZWF0ZU1lbnVcIik7XHJcbiAgICAgICAgdmFyIFJvb21JbmZvVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUm9vbUluZm9WaWV3KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoUm9vbUluZm9WaWV3KTtcclxuICAgICAgICBSb29tSW5mb1ZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICBSb29tSW5mb1ZpZXcuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2h0X1Jvb21JbmZvXCIpLnNldFJvb21JbmZvKHRoaXMudGFibGVSdWxlSW5mbyk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjcmVhdGVDYXJyeVZpZXcgOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHZhciBjYXJyeVBvcCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2FycnlWaWV3KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoY2FycnlQb3ApO1xyXG4gICAgICAgIGNhcnJ5UG9wLnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgY2FycnlQb3AuZ2V0Q29tcG9uZW50KFwiQnVsbGZpZ2h0X0NhcnJ5Vmlld1wiKS5zZXRDYXJyeVRpbWUodGltZSk7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5jcmVhdGVDYXJyeVZpZXcgbWluY2Fycnk9XCIsIHRoaXMudGFibGVSdWxlSW5mby5taW5jYXJyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgbWF4Y2Fycnk9XCIsIHRoaXMudGFibGVSdWxlSW5mby5tYXhjYXJyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgdG90YWxjYXJyeT1cIiwgdGhpcy50YWJsZVJ1bGVJbmZvLnRvdGFsY2FycnkpO1xyXG5cclxuICAgICAgICBjYXJyeVBvcC5nZXRDb21wb25lbnQoXCJCdWxsZmlnaHRfQ2FycnlWaWV3XCIpLnNldE1pbkFuZE1heCh0aGlzLnRhYmxlUnVsZUluZm8ubWluY2FycnksXHJcbiAgICAgICAgICAgIHRoaXMudGFibGVSdWxlSW5mby5tYXhjYXJyeSwgdGhpcy50YWJsZVJ1bGVJbmZvLnRvdGFsY2FycnkpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVQbGF5ZXJDYWxsVHlwZSA6IGZ1bmN0aW9uKHVpZCwgY2FsbFR5cGUpIHtcclxuICAgICAgICB2YXIgcGxheWVyID0gdGhpcy5zaXRQbGF5ZXJzLmdldCh1aWQpO1xyXG4gICAgICAgIHBsYXllci5jYWxsdHlwZSA9IGNhbGxUeXBlO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWZyZXNoQ2FsbEJhbmtlckZsYWcgOiBmdW5jdGlvbihjYWxsVWlkLCBiTXVzaWMpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwicmVmcmVzaENhbGxCYW5rZXJGbGFnIHVpZD1cIiwgY2FsbFVpZCk7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuZmluZFBsYXllcihjYWxsVWlkKTtcclxuICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChwbGF5ZXIuc2VhdGlkKTtcclxuICAgICAgICB0aGlzLkNhbGxCYW5rZXJGbGFnW3ZpZXdJZF0ubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuQ2FsbEJhbmtlckZsYWdbdmlld0lkXS5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FsbEJhbmtlckZsYWdGcmFtZVsocGxheWVyLmNhbGx0eXBlIC0gMSkgPCAwID8gMCA6IChwbGF5ZXIuY2FsbHR5cGUgLSAxKV07XHJcblxyXG4gICAgICAgIGlmIChiTXVzaWMpIHtcclxuICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoKHBsYXllci5jYWxsdHlwZSAtIDEpID09IDAgPyAgQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9OT0NBTExCQU5LRVIgOiBCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0NBTExCQU5LRVIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcmVmcmVzaFJlYWR5RmxhZyA6IGZ1bmN0aW9uKHJlYWR5VWlkKSB7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuZmluZFBsYXllcihyZWFkeVVpZCk7XHJcbiAgICAgICAgdmFyIHZpZXdJZCA9IHRoaXMuZ2V0UGxheWVyVmlld0lkQnlTZWF0SWQocGxheWVyLnNlYXRpZCk7XHJcbiAgICAgICAgY2MubG9nKFwicmVmcmVzaFJlYWR5RmxhZywgdWlkPVwiLCByZWFkeVVpZCwgXCIgc2VhdGlkPVwiLCBwbGF5ZXIuc2VhdGlkLCBcIiB2aWV3aWQ9XCIsIHZpZXdJZCk7XHJcbiAgICAgICAgdGhpcy5DYWxsQmFua2VyRmxhZ1t2aWV3SWRdLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLkNhbGxCYW5rZXJGbGFnW3ZpZXdJZF0uc3ByaXRlRnJhbWUgPSB0aGlzLkNhbGxCYW5rZXJGbGFnRnJhbWVbM107XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZnJlc2hMb29rRmxhZyA6IGZ1bmN0aW9uKHVpZCkge1xyXG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLmZpbmRQbGF5ZXIodWlkKTtcclxuICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChwbGF5ZXIuc2VhdGlkKTtcclxuICAgICAgICBjYy5sb2coXCJyZWZyZXNoTG9va0ZsYWcsIHVpZD1cIiwgdWlkLCBcIiBzZWF0aWQ9XCIsIHBsYXllci5zZWF0aWQsIFwiIHZpZXdpZD1cIiwgdmlld0lkKTtcclxuICAgICAgICB0aGlzLkNhbGxCYW5rZXJGbGFnW3ZpZXdJZF0ubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuQ2FsbEJhbmtlckZsYWdbdmlld0lkXS5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FsbEJhbmtlckZsYWdGcmFtZVs0XTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNsZWFyQ2FsbEJhbmtlckZsYWcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiY2xlYXJDYWxsQmFua2VyRmxhZ1wiKTtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgQlVMTEZJR0hUX01BWF9QTEFZRVI7IGluZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkNhbGxCYW5rZXJGbGFnW2luZGV4XS5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNsZWFyUmVhZHlGbGFnIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2xlYXJDYWxsQmFua2VyRmxhZygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhclVzZXJIZWFkQmFua2VyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgNjtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW2luZGV4XS5jbGVhclBsYXllckJhbmtlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJVc2VyV2luU2NvcmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7aW5kZXggPCB0aGlzLlBsYXllckl0ZW1Qb3MubGVuZ3RoOyBpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW2luZGV4XS5jbGVhclVzZXJXaW5TY29yZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqKioqKioqKioqKioqQ2xvY2sqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICBzdGFydENsb2NrVGltZSA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcclxuICAgICAgICB0aGlzLmNsb2NrLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNsb2NrLnVwZGF0ZVRpbWVMYWJlbCh0aGlzLnRpbWUpO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy51cGRhdGVDbG9ja1RpbWUsIDEpO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVDbG9ja1RpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9jay51cGRhdGVUaW1lTGFiZWwodGhpcy50aW1lKTtcclxuICAgICAgICB0aGlzLnRpbWUtLTtcclxuICAgICAgICBpZiAodGhpcy50aW1lIDwgMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvY2subm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy50YWJsZVN0YXR1c1RpbWVPdXQoKTtcclxuICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMudXBkYXRlQ2xvY2tUaW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICB0YWJsZVN0YXR1c1RpbWVPdXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnRhYmxlU3RhdHVzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX0NMT1NFX1NUQVRVUyA6IC8vLTIsIC8v5qGM5a2Q5YWz6ZetXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX05PVF9TVEFSVF9TVEFUVVMgOiAvLzAsICAvL+ahjOWtkOS4uk5VTExcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfUkVBRFlfU1RBVFVTIDogLy8xLCAgLy/moYzlrZDlh4blpIdcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zZW5kUmVhZHkoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQ0FMTF9TVEFUVVMgIDogLy8yLCAgLy/lj6vluoRcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zZW5kQ2FsbEJhbmtlcigxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQkVUX1NUQVRVUyAgIDogLy8zLCAgLy/kuIvms6hcclxuICAgICAgICAgICAgICAgLy90aGlzLnNlbmRCZXRDb2luUmVxKHRoaXMubV9pTXlCZXRDb2luKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfT1BFTl9TVEFUVVMgIDogLy80LCAgLy/lvIDniYxcclxuICAgICAgICAgICAgICAgLy90aGlzLnNlbmRPcGVuQ2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9PVkVSX1NUQVRVUyAgOiAvLzUsICAvL+a4uOaIj+e7k+adn1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzaG93VGFibGVTdGF0dXNCdG4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5CdG5TdGFydC5ub2RlLmFjdGl2ZSAgICAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJ0blJlYWR5Lm5vZGUuYWN0aXZlICAgICA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuQnRuQ2FsbEJhbmtlck5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgLy90aGlzLkJldENvaW5Ob2RlLmFjdGl2ZSAgPSBmYWxzZTtcclxuICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkJldFJvb21DYXJkTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5CZXROb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLk9wZW5DYXJkTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsZWFyQ2FsbEJhbmtlckZsYWcoKTtcclxuXHJcbiAgICAgICAgaWYgKChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuYm93bmVyID09IDEpICYmICh0aGlzLnRhYmxlU3RhdHVzID09IEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX05PVF9TVEFSVF9TVEFUVVMpKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInNob3dUYWJsZVN0YXR1c0J0biBib3duZXI9XCIsIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5ib3duZXIpO1xyXG4gICAgICAgICAgICB0aGlzLkJ0blN0YXJ0Lm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5UaXBzLm5vZGUuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkID09IC0xKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInNob3dUYWJsZVN0YXR1c0J0biBzZWF0aWQ9XCIsIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYy5sb2coXCJzaG93VGFibGVTdGF0dXNCdG4sIHRoaXMudGFibGVTdGF0dXMgID0gXCIgKyB0aGlzLnRhYmxlU3RhdHVzKTtcclxuICAgICAgICBjYy5sb2coXCJzaG93VGFibGVTdGF0dXNCdG4sIHRoaXMucGxheWVyU3RhdHVzID0gXCIgKyBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnRhYmxlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQ0xPU0VfU1RBVFVTIDogLy8tMiwgLy/moYzlrZDlhbPpl61cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9OT1RfU1RBUlRfU1RBVFVTIDogLy8wLCAgLy/moYzlrZDkuLpOVUxMXHJcbiAgICAgICAgICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmJvd25lciA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5CdG5TdGFydC5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfUkVBRFlfU1RBVFVTIDogLy8xLCAgLy/moYzlrZDlh4blpIdcclxuICAgICAgICAgICAgICAgIC8v5Z2Q5LiLb3Lnu5PmnZ9cclxuICAgICAgICAgICAgICAgIGlmICgoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9PSBCdWxsZmlnaHRfUGxheWVyU3RhdHVzLkVfUExBWUVSX1NJVF9TVEFUVVMpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zdGF0dXMgPT0gQnVsbGZpZ2h0X1BsYXllclN0YXR1cy5FX1BMQVlFUl9PVkVSX1NUQVRVUykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0blJlYWR5Lm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9DQUxMX1NUQVRVUyAgOiAvLzIsICAvL+WPq+W6hFxyXG4gICAgICAgICAgICAgICAgLy8g5Zyo5ri45oiPXHJcbiAgICAgICAgICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnN0YXR1cyA9PSBCdWxsZmlnaHRfUGxheWVyU3RhdHVzLkVfUExBWUVSX0FDVElWRV9TVEFUVVMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0bkNhbGxCYW5rZXJOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQkVUX1NUQVRVUyAgIDogLy8zLCAgLy/kuIvms6hcclxuICAgICAgICAgICAgICAgIC8v5LiN5piv5bqELOS4lOWcqOa4uOaIj1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLmJhbmtlclVpZCAhPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfQUNUSVZFX1NUQVRVUykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMuQmV0Q29pbk5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm9vbUxldmVsID09IDIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0bkJldFJvb21DYXJkTm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0bkJldE5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfT1BFTl9TVEFUVVMgIDogLy80LCAgLy/lvIDniYxcclxuICAgICAgICAgICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfQUNUSVZFX1NUQVRVUykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuT3BlbkNhcmROb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfT1ZFUl9TVEFUVVMgIDogLy81LCAgLy/muLjmiI/nu5PmnZ9cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9JRExFX1NUQVRVUzpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqKioqKioqKioqKiAgIENhcmRJdGVtICAqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICBcclxuICAgIHNlbmRDYXJkc1RvUGxheWVyIDogZnVuY3Rpb24gKHZpZXdJZCwgY2FyZGxpc3QpIHtcclxuICAgICAgICB0aGlzLkNhcmRJdGVtW3ZpZXdJZF0uc2VuZENhcmRBbmltYXRpb24oY2FyZGxpc3QpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb3BlbnBsYXllckNhcmRzIDogZnVuY3Rpb24gKHZpZXdJZCwgY2FyZGxpc3QsIGluZGV4MSwgaW5kZXgyKSB7XHJcbiAgICAgICAgdGhpcy5DYXJkSXRlbVt2aWV3SWRdLm9wZW5DYXJkQW5pbWF0aW9uKGNhcmRsaXN0LCBpbmRleDEsIGluZGV4Mik7XHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyQWxsUGxheWVyQ2FyZEl0ZW0gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7aW5kZXggPCBCVUxMRklHSFRfTUFYX1BMQVlFUjtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5DYXJkSXRlbVtpbmRleF0uY2xlYXJDYXJkSXRlbSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldENhcmRUeXBlIDogZnVuY3Rpb24gKHZpZXdJZCwgdHlwZSwgYk11c2ljKSB7XHJcbiAgICAgICAgdGhpcy5DYXJkSXRlbVt2aWV3SWRdLnNldENhcmRUeXBlKHR5cGUpO1xyXG5cclxuICAgICAgICBpZiAoIWJNdXNpYykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfWkVSTzpcclxuICAgICAgICAgICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEJ1bGxmaWdodF9BdWRpb0NvbmZpZy5BVURJT19NQU5fQlVMTDApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9PTkU6XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JVTEwxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfVFdPOlxyXG4gICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9CVUxMMik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfQ2FyZFR5cGUuRV9CVUxMX1RIUkVFOlxyXG4gICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9CVUxMMyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfQ2FyZFR5cGUuRV9CVUxMX0ZPVVI6XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JVTEw0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfRklWRTpcclxuICAgICAgICAgICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEJ1bGxmaWdodF9BdWRpb0NvbmZpZy5BVURJT19NQU5fQlVMTDUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9TSVg6XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JVTEw2KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfU0VWRU46XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JVTEw3KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfRUlHSFQ6XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JVTEw4KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfTklORTpcclxuICAgICAgICAgICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEJ1bGxmaWdodF9BdWRpb0NvbmZpZy5BVURJT19NQU5fQlVMTDkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9QQUlSOlxyXG4gICAgICAgICAgICBcdC8vIE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9CVUxMMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9CVUxMOlxyXG4gICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9CVUxMMTApO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9MSU5FOlxyXG4gICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl9MSU5FKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfVEhSRUVfVFdPOlxyXG4gICAgICAgICAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQnVsbGZpZ2h0X0F1ZGlvQ29uZmlnLkFVRElPX01BTl8zQU5EMik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfQ2FyZFR5cGUuRV9CVUxMX0JPTUI6XHJcbiAgICAgICAgICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOX0JPTUIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfRklWRV9LSU5HOlxyXG4gICAgICAgICAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChCdWxsZmlnaHRfQXVkaW9Db25maWcuQVVESU9fTUFOXzVGTE9XRVIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfU01BTExfRklWRTpcclxuICAgICAgICAgICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEJ1bGxmaWdodF9BdWRpb0NvbmZpZy5BVURJT19NQU5fNUxJVFRMRUJVTEwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X0NhcmRUeXBlLkVfQlVMTF9NQVg6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRQbGF5ZXJCZXRDb3VudCA6IGZ1bmN0aW9uICh2aWV3SWQsIGNvdW50KSB7XHJcbiAgICAgICAgdGhpcy5DYXJkSXRlbVt2aWV3SWRdLnNldFBsYXllckJldENvdW50KGNvdW50KTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldEN1c3RvbUNhcmRUeXBlIDogZnVuY3Rpb24gKGFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMuQ2FyZEl0ZW1bNV0uc2V0Q3VzdG9tQ2FyZFR5cGUoYWN0aXZlKTtcclxuICAgIH0sXHJcbiAgICBcclxuXHJcbiAgICAvKioqKioqKioqKiBQTGF5ZXIgICAqKioqKioqKioqKioqKiovXHJcbiAgICBkZWxQbGF5ZXIgOiBmdW5jdGlvbiggdWlkKSB7XHJcbiAgICAgICAgbGV0IGl0ID0gdGhpcy5maW5kUGxheWVyKHVpZCk7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5kZWxQbGF5ZXIsdWlkID0gXCIgKyB1aWQgKyBcIiBpdCA9IFwiICsgaXQpO1xyXG4gICAgICAgIGlmIChpdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlT25lUGxheWVySW5UYWJsZShpdCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNpdFBsYXllcnMuY29udGFpbnNLZXkodWlkKSkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5kZWxQbGF5ZXIsIGRlbGV0ZSB1aWQ9IFwiICsgdWlkICsgXCIgYnkgc2l0UGxheWVyc1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2l0UGxheWVycy5kZWxldGUodWlkKTtcclxuICAgICAgICAgICAgICAgIGlmKHVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5kZWxQbGF5ZXIsIHVpZD0gXCIgKyB1aWQgKyBcIiBzZWF0aWQ9LTFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnNlYXRpZCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBkZWxBbGxQbGF5ZXIgOiBmdW5jdGlvbiAoKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyA7XHJcblxyXG4gICAgICAgIHRoaXMuc2l0UGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uICh1ZCkge1xyXG4gICAgICAgICAgICBzZWxmLnJlbW92ZU9uZVBsYXllckluVGFibGUodWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQgPSAtMTtcclxuXHJcbiAgICAgICAgdGhpcy5zaXRQbGF5ZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5zaXRQbGF5ZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRQbGF5ZXIgOiBmdW5jdGlvbihwbGF5ZXJpbmZvKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuZGVsUGxheWVyKHBsYXllcmluZm8udWlkKTtcclxuICAgICAgICBpZiAodGhpcy5zaXRQbGF5ZXJzLnNpemUoKSA8IHRoaXMubV9pTWF4UGxheWVycykge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyaW5mby51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkNvcHkocGxheWVyaW5mbyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpdFBsYXllcnMuc2V0KEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQsIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKSk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnJlZnJlc2hBbGxQbGF5ZXJPblRhYmxlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNpdFBsYXllcnMuc2V0KHBsYXllcmluZm8udWlkLCBwbGF5ZXJpbmZvKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvd09uZVBsYXllckluVGFibGUocGxheWVyaW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZnJlc2hBbGxQbGF5ZXJPblRhYmxlIDogZnVuY3Rpb24gKGJTaG93RGV0YWlsKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckFsbFBsYXllckNhcmRJdGVtKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxQbGF5ZXJJblRhYmxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd1RhYmxlU3RhdHVzQnRuKCk7XHJcblxyXG4gICAgXHJcbiAgICAgICAgdmFyIGFjdGlvbiA9IGNjLnNlcXVlbmNlKGNjLmZhZGVPdXQoMCksIGNjLmZhZGVJbigwLjUpKS5zcGVlZCgwLjQpO1xyXG4gICAgICAgIHRoaXMuUGxheU5vZGUucnVuQWN0aW9uKGFjdGlvbik7XHJcbiAgICBcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLnRoaXMuc2l0UGxheWVycyA9IFwiICsgdGhpcy5zaXRQbGF5ZXJzLnNpemUoKSk7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zaXRQbGF5ZXJzLnNpemUoKTsgaW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLnNpdFBsYXllcnMuZWxlbWVudChpbmRleCkudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChwbGF5ZXIgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJyZWZyZXNoQWxsUGxheWVyT25UYWJsZSBwbGF5ZXIgaXMgdW5kZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNob3dPbmVQbGF5ZXJJblRhYmxlKHBsYXllcik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWJTaG93RGV0YWlsKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChwbGF5ZXIuc2VhdGlkKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50YWJsZVN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9SRUFEWV9TVEFUVVM6XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiRV9UQUJMRV9SRUFEWV9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgcGxheWVyLnN0YXR1cz1cIiwgcGxheWVyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5zdGF0dXMgPT0gQnVsbGZpZ2h0X1BsYXllclN0YXR1cy5FX1BMQVlFUl9SRUFEWV9TVEFUVVMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUmVhZHlGbGFnKHBsYXllci51aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX0NBTExfU1RBVFVTOlxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkVfVEFCTEVfQ0FMTF9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgcGxheWVyLnN0YXR1cz1cIiwgcGxheWVyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5zdGF0dXMgPT0gQnVsbGZpZ2h0X1BsYXllclN0YXR1cy5FX1BMQVlFUl9BQ1RJVkVfU1RBVFVTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuY2FsbHR5cGUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hDYWxsQmFua2VyRmxhZyhwbGF5ZXIudWlkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIudWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENhcmRzVG9QbGF5ZXIodmlld0lkLCBwbGF5ZXIuY2FyZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmRzID0gWzAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRDYXJkc1RvUGxheWVyKHZpZXdJZCwgY2FyZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgQnVsbGZpZ2h0X1RhYmxlU3RhdHVzLkVfVEFCTEVfQkVUX1NUQVRVUyAgIDogLy8zLCAgLy/kuIvms6hcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJFX1RBQkxFX0JFVF9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgcGxheWVyLnN0YXR1cz1cIiwgcGxheWVyLnN0YXR1cywgXCIgaXNiYW5rZXI9XCIscGxheWVyLmJCYW5rZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuc3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfQUNUSVZFX1NUQVRVUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmJCYW5rZXIgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiRV9UQUJMRV9CRVRfU1RBVFVTLCB1aWQ9XCIsIHBsYXllci51aWQsIFwiIHNldGJhbmtlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHBsYXllci5zZWF0aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW3ZpZXdJZF0uc2V0UGxheWVyQmFua2VyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGxheWVyLmJldGNvaW5tdWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJFX1RBQkxFX0JFVF9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgYmV0Y29pbm11bD1cIiwgcGxheWVyLmJldGNvaW5tdWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZXdJZCA9IHRoaXMuZ2V0UGxheWVyVmlld0lkQnlTZWF0SWQocGxheWVyLnNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBsYXllckJldENvdW50KHZpZXdJZCwgcGxheWVyLmJldGNvaW5tdWwgKiB0aGlzLnRhYmxlUnVsZUluZm8ubWluYW50ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIudWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENhcmRzVG9QbGF5ZXIodmlld0lkLCBwbGF5ZXIuY2FyZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5iQmFua2VyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dUYWJsZVN0YXR1c0J0bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmRzID0gWzAsMCwwLDAsMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRDYXJkc1RvUGxheWVyKHZpZXdJZCwgY2FyZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgIEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX09QRU5fU1RBVFVTOiAvLzQsICAvL+W8gOeJjFxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkVfVEFCTEVfT1BFTl9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgcGxheWVyLnN0YXR1cz1cIiwgcGxheWVyLnN0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuc3RhdHVzID09IEJ1bGxmaWdodF9QbGF5ZXJTdGF0dXMuRV9QTEFZRVJfQUNUSVZFX1NUQVRVUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxheWVyLmJCYW5rZXIgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiRV9UQUJMRV9PUEVOX1NUQVRVUywgdWlkPVwiLCBwbGF5ZXIudWlkLCBcIiBzZXRiYW5rZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBsYXllckl0ZW1Qb3Nbdmlld0lkXS5zZXRQbGF5ZXJCYW5rZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGxheWVyLmJldGNvaW5tdWwgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJFX1RBQkxFX09QRU5fU1RBVFVTLCB1aWQ9XCIsIHBsYXllci51aWQsIFwiIGJldGNvaW5tdWw9XCIsIHBsYXllci5iZXRjb2lubXVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGxheWVyQmV0Q291bnQodmlld0lkLCBwbGF5ZXIuYmV0Y29pbm11bCAqIHRoaXMudGFibGVSdWxlSW5mby5taW5hbnRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5iT3BlbkNhcmQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2FyZFR5cGUodmlld0lkLCBwbGF5ZXIuYnVsbHR5cGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5wbGF5ZXJDYXJkcyh2aWV3SWQsIHBsYXllci5jYXJkcywgLTEsIC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEN1c3RvbUNhcmRUeXBlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk9wZW5DYXJkTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlRpcHMuc3RyaW5nID0gXCLnrYnlvoXlhbbku5bnjqnlrrbnnIvniYxcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVucGxheWVyQ2FyZHModmlld0lkLCBwbGF5ZXIuY2FyZHMsIC0xLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93VGFibGVTdGF0dXNCdG4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEN1c3RvbUNhcmRUeXBlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5iT3BlbkNhcmQgPT0gIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENhcmRUeXBlKHZpZXdJZCwgcGxheWVyLmJ1bGx0eXBlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVucGxheWVyQ2FyZHModmlld0lkLCBwbGF5ZXIuY2FyZHMsIC0xLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJkcyA9IFswLDAsMCwwLDBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZENhcmRzVG9QbGF5ZXIodmlld0lkLCBjYXJkcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBCdWxsZmlnaHRfVGFibGVTdGF0dXMuRV9UQUJMRV9PVkVSX1NUQVRVUyAgOiAvLzUsICAvL+a4uOaIj+e7k+adn1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkVfVEFCTEVfT1ZFUl9TVEFUVVMsIHVpZD1cIiwgcGxheWVyLnVpZCwgXCIgcGxheWVyLnN0YXR1cz1cIiwgcGxheWVyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5zdGF0dXMgPT0gQnVsbGZpZ2h0X1BsYXllclN0YXR1cy5FX1BMQVlFUl9PVkVSX1NUQVRVUykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW3ZpZXdJZF0uc2V0VXNlcldpblNjb3JlKHBsYXllci5maW5hbGNvaW4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCAmJiBtc2cuc2VhdGVyc1tpbmRleF0uZmluYWxjb2luID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuQ2FsbEJhbmtlckZsYWdbdmlld2lkXS5ub2RlLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5HaWZ0QW5pbWF0aW9uLnBsYXlXaW5BbmltYXRpb24ocG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEJ1bGxmaWdodF9UYWJsZVN0YXR1cy5FX1RBQkxFX0lETEVfU1RBVFVTOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzaG93T25lUGxheWVySW5UYWJsZSA6IGZ1bmN0aW9uIChwbGF5ZXIpIHtcclxuICAgICAgICBpZiAocGxheWVyID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjYy5lcnJvcihcIkJ1bGxmaWdodF9HYW1lU2NlbmUuc2hvd09uZVBsYXllckluVGFibGUgLCBwbGF5ZXIgPT0gdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB2aWV3SWQgPSB0aGlzLmdldFBsYXllclZpZXdJZEJ5U2VhdElkKHBsYXllci5zZWF0aWQpO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUuc2hvd09uZVBsYXllckluVGFibGUsIHNlYXRpZCA9IFwiICsgcGxheWVyLnNlYXRpZCwgXCIgdmlld0lkID0gXCIgKyB2aWV3SWQpXHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW3ZpZXdJZF0udXBkYXRlUGxheWVySW5mbyhwbGF5ZXIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwbGF5ZXJTdGFuZFVwT3JEb3duIDogZnVuY3Rpb24gKHBsYXllcixhY3Rpb24pIHtcclxuICAgIH0sXHJcblxyXG4gICAgcmVtb3ZlT25lUGxheWVySW5UYWJsZSA6IGZ1bmN0aW9uKHBsYXllcilcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLnJlbW92ZU9uZVBsYXllckluVGFibGUsc3RhdHVzID0gXCIgKyBwbGF5ZXIuc3RhdHVzKTtcclxuICAgICAgICBsZXQgdmlld0lkID0gdGhpcy5nZXRQbGF5ZXJWaWV3SWRCeVNlYXRJZChwbGF5ZXIuc2VhdGlkKTtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLnJlbW92ZU9uZVBsYXllckluVGFibGUsIHZpZXdJZCA9IFwiICsgdmlld0lkICsgXCIscGxheWVyLnNlYXRpZCA9IFwiICsgcGxheWVyLnNlYXRpZCk7XHJcbiAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW3ZpZXdJZF0uY2xlYXJQbGF5ZXJJbmZvKCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICByZW1vdmVBbGxQbGF5ZXJJblRhYmxlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgNjtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5QbGF5ZXJJdGVtUG9zW2luZGV4XS5jbGVhclBsYXllckluZm8oKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFBsYXllclZpZXdJZEJ5U2VhdElkIDogZnVuY3Rpb24gKHNlYXRJZClcclxuICAgIHtcclxuICAgICAgICBsZXQgc2VsZlZpZXdJZCA9IHdpbmRvdy5CVUxMRklHSFRfTUFYX1BMQVlFUiAtIDE7XHJcbiAgICAgICAgbGV0IHZpZXdJZCAgICAgPSBzZWF0SWQ7XHJcblxyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkICA+PSAwKSB7XHJcbiAgICAgICAgICAgIHZpZXdJZCA9ICAoc2VhdElkIC0gKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZWF0aWQgLSBzZWxmVmlld0lkKSArIHdpbmRvdy5CVUxMRklHSFRfTUFYX1BMQVlFUikld2luZG93LkJVTExGSUdIVF9NQVhfUExBWUVSO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLmdldFBsYXllclZpZXdJZEJ5U2VhdElkLCBzZWF0SWQgPSAlZCx2aWV3SWQgPSAlZFwiLHNlYXRJZCx2aWV3SWQsIFwiIG15c2VhdGlkPVwiLCBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2VhdGlkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfR2FtZVNjZW5lLmdldFBsYXllclZpZXdJZEJ5U2VhdElkLCBzZWF0SWQgPSAlZCx2aWV3SWQgPSAlZFwiLHNlYXRJZCx2aWV3SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmlld0lkO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVQbGF5ZXJTdGF0dXMgOiBmdW5jdGlvbih1aWQsIHN0YXR1cykge1xyXG4gICAgICAgIHZhciBwbGF5ZXIgPSB0aGlzLnNpdFBsYXllcnMuZ2V0KHVpZCk7XHJcbiAgICAgICAgcGxheWVyLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIH0sXHJcblxyXG4gICAgZmluZFBsYXllciA6IGZ1bmN0aW9uKCB1aWQpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IHRoaXMuc2l0UGxheWVycy5nZXQodWlkKTtcclxuICAgICAgICByZXR1cm4gcGxheWVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBmaW5kUGxheWVyQnlTZWF0aWQgOiBmdW5jdGlvbihzZWF0aWQpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHBsYXllciA9IG51bGwgO1xyXG4gICAgICAgIHRoaXMuc2l0UGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuc2VhdGlkID09IHNlYXRpZCl7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwbGF5ZXIgO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25QYXVzZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25SZXN1bWUgOiBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgIH0sXHJcblxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMTcuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuVVNfUkVRX1BMQVlFUl9MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfR2V0UGxheWVyc0xpc3RSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMTcuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbi8qXHJcbiogdHlwZSBVU19SRVNQX1BMQVlFUl9MSVNUX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gQWN0b3JzICAgW11BQ1RPUl9UIGBqc29uOlwiYWN0b3JzXCJgXHJcbiBXYXRjaGVycyBbXVdBVENIRVJfVCBganNvbjpcIndhdGNoZXJzXCJgXHJcbiB9XHJcblxyXG4gLy/lj4LkuI7ogIXkv6Hmga9cclxuIHR5cGUgQUNUT1JfVCBzdHJ1Y3Qge1xyXG4gVWlkICAgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gTmFtZSAgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgICBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBUb3RhbENvaW4gaW50NjQgIGBqc29uOlwidG90YWxcImAgLy/mgLvluKblhaXph5HluIFcclxuIFdpbkNvaW4gICBpbnQ2NCAgYGpzb246XCJ3aW5cImAgICAvL+i+k+i1ouWkmuWwkemHkeW4gVxyXG4gfVxyXG5cclxuIC8v55yL5a6i5L+h5oGvXHJcbiB0eXBlIFdBVENIRVJfVCBzdHJ1Y3Qge1xyXG4gVWlkICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuIE5hbWUgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gSGVhZFVybCBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gQnVsbGZpZ2h0X0dldFBsYXllcnNMaXN0UmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlVTX1JFU1BfUExBWUVSX0xJU1RfQ01EX0lEO1xyXG5cclxuICAgIHRoaXMucmVtYWluVGltZSA9IDA7XHJcbiAgICB0aGlzLnJvdW5kTnVtICAgPSAwO1xyXG4gICAgdGhpcy5hY3RvcnMgICAgID0gW107XHJcbiAgICB0aGlzLndhdGNoZXJzICAgPSBbXTtcclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMucmVtYWluVGltZSA9IG1zZy5yZW1haW50aW1lO1xyXG4gICAgICAgIHRoaXMucm91bmROdW0gPSBtc2cucm91bmRudW07XHJcbiAgICAgICAgdGhpcy5hY3RvcnMgPSBtc2cuYWN0b3JzO1xyXG4gICAgICAgIHRoaXMud2F0Y2hlcnMgPSBtc2cud2F0Y2hlcnM7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfR2V0UGxheWVyc0xpc3RSZXNwUGFja2V0OyIsIndpbmRvdy5HaWZ0VHlwZSA9IGNjLkVudW0oe1xyXG4gICAgRV9ST1NFX0dJRlQgICAgIDogMSwgLy/njqvnkbBcclxuICAgIEVfTE9WRV9HSUZUICAgICA6IDIsIC8v54ix5b+DXHJcbiAgICBFX0ZPQU1fR0lGVCAgICAgOiAzLCAvL+azoeayq1xyXG4gICAgRV9CSUdfUk9TRV9HSUZUIDogNCwgLy/lpKfmnLXnjqvnkbBcclxuICAgIEVfS0VUQ0hVUF9HSUZUICA6IDUsIC8v55Wq6IyE6YWxXHJcbn0pO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyAuLi5cclxuICAgICAgICBHaWZ0SWNvbiAgIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBHaWZ0RnJhbWUxIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBHaWZ0RnJhbWUyIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBHaWZ0RnJhbWUzIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBHaWZ0RnJhbWU0IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBHaWZ0RnJhbWU1IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWUxIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWUyIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWUzIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU0IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU1IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU2IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU3IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU4IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWU5IDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBGYWNlRnJhbWUxMCA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgRmFjZUZyYW1lMTEgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIEZhY2VGcmFtZTEyIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBXaW5GcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgcGxheVdpbkFuaW1hdGlvbiA6IGZ1bmN0aW9uIChwb3MpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICAgICAgbm9kZS5zZXRQb3NpdGlvbihwb3MpO1xyXG4gICAgICAgIG5vZGUueSArPSAyMDA7XHJcbiAgICAgICAgdmFyIHNwcml0ZSA9IG5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gdGhpcy5XaW5GcmFtZVswXTtcclxuICAgICAgICAvL25vZGUucG9zaXRpb24gPSBjYy5wKDU0MCw5NjApO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChub2RlKTtcclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gbm9kZS5hZGRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICB2YXIgY2xpcCA9IGNjLkFuaW1hdGlvbkNsaXAuY3JlYXRlV2l0aFNwcml0ZUZyYW1lcyh0aGlzLldpbkZyYW1lLCB0aGlzLldpbkZyYW1lLmxlbmd0aCk7XHJcbiAgICAgICAgYW5pbWF0aW9uLnBsYXlUaW1lcyA9IC0xO1xyXG4gICAgICAgIGFuaW1hdGlvbi5hZGRDbGlwKGNsaXAsXCJhbmltXCIpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5wbGF5KFwiYW5pbVwiKTtcclxuXHJcbiAgICAgICAgbm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDEuNSksY2MucmVtb3ZlU2VsZih0cnVlKSkuc3BlZWQoMC40KSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBwbGF5RmFjZUFuaW1hdGlvbiA6IGZ1bmN0aW9uICh0eXBlLHBvcykge1xyXG4gICAgICAgIHZhciBhbmltYXRpb25GcmFtZXMgPSBbXTtcclxuICAgICAgICBpZih0eXBlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZXMgPSB0aGlzLkZhY2VGcmFtZTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSAyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWUyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gMylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lcyA9IHRoaXMuRmFjZUZyYW1lMztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlID09IDQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZXMgPSB0aGlzLkZhY2VGcmFtZTQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSA1KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWU1O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gNilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lcyA9IHRoaXMuRmFjZUZyYW1lNjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlID09IDcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZXMgPSB0aGlzLkZhY2VGcmFtZTc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodHlwZSA9PSA4KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWU4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT0gOSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lcyA9IHRoaXMuRmFjZUZyYW1lOTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlID09IDEwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWUxMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlID09IDExKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWUxMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0eXBlID09IDEyKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5GYWNlRnJhbWUxMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGF5QW5pbWF0aW9uQnlUeXBlKGFuaW1hdGlvbkZyYW1lcyxwb3MpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwbGF5R2lmdEFuaW1hdGlvbiA6IGZ1bmN0aW9uIChnaWZ0VHlwZSxzdGFydCxlbmQpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbkZyYW1lcyA9IFtdO1xyXG4gICAgICAgIGlmKGdpZnRUeXBlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZXMgPSB0aGlzLkdpZnRGcmFtZTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZ2lmdFR5cGUgPT0gMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lcyA9IHRoaXMuR2lmdEZyYW1lMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihnaWZ0VHlwZSA9PSAzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uRnJhbWVzID0gdGhpcy5HaWZ0RnJhbWUzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGdpZnRUeXBlID09IDQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZXMgPSB0aGlzLkdpZnRGcmFtZTQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoZ2lmdFR5cGUgPT0gNSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lcyA9IHRoaXMuR2lmdEZyYW1lNTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGF5R2lmdEFuaW1hdGlvbkJ5VHlwZShhbmltYXRpb25GcmFtZXMsIHN0YXJ0LCBlbmQpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgcGxheUFuaW1hdGlvbkJ5VHlwZSA6IGZ1bmN0aW9uIChGcmFtZXMscG9zKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBub2RlID0gbmV3IGNjLk5vZGUoKTtcclxuICAgICAgICBub2RlLnNldFBvc2l0aW9uKHBvcyk7XHJcbiAgICAgICAgdmFyIHNwcml0ZSA9IG5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gRnJhbWVzWzBdO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChub2RlKTtcclxuICAgICAgICB2YXIgYW5pbWF0aW9uID0gbm9kZS5hZGRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICB2YXIgY2xpcCA9IGNjLkFuaW1hdGlvbkNsaXAuY3JlYXRlV2l0aFNwcml0ZUZyYW1lcyhGcmFtZXMsIEZyYW1lcy5sZW5ndGgpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5hZGRDbGlwKGNsaXAsXCJhbmltXCIpO1xyXG4gICAgICAgIGFuaW1hdGlvbi5wbGF5KFwiYW5pbVwiKTtcclxuXHJcbiAgICAgICAgbm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKEZyYW1lcy5sZW5ndGgqMC4yKSxjYy5yZW1vdmVTZWxmKHRydWUpKS5zcGVlZCgwLjQpKTtcclxuICAgIH0sXHJcblxyXG4gICAgcGxheUdpZnRBbmltYXRpb25CeVR5cGUgOiBmdW5jdGlvbiAoRnJhbWVzLHN0YXJ0LGVuZClcclxuICAgIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICAgICAgbm9kZS5zZXRQb3NpdGlvbihzdGFydCk7XHJcbiAgICAgICAgdmFyIHNwcml0ZSA9IG5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gRnJhbWVzWzBdO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChub2RlKTtcclxuXHJcblxyXG4gICAgICAgIHZhciBmaW5pc2hlZCA9IGNjLmNhbGxGdW5jKGZ1bmN0aW9uKG5vZGUsIEZyYW1lcykge1xyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gbm9kZS5hZGRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgdmFyIGNsaXAgPSBjYy5BbmltYXRpb25DbGlwLmNyZWF0ZVdpdGhTcHJpdGVGcmFtZXMoRnJhbWVzLCBGcmFtZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgYW5pbWF0aW9uLmFkZENsaXAoY2xpcCwgXCJhbmltXCIpO1xyXG4gICAgICAgICAgICBhbmltYXRpb24ucGxheShcImFuaW1cIik7XHJcbiAgICAgICAgICAgIG5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZShGcmFtZXMubGVuZ3RoKjAuNCksIGNjLnJlbW92ZVNlbGYodHJ1ZSkpKTtcclxuICAgICAgICB9LCBub2RlLCBGcmFtZXMpO1xyXG5cclxuICAgICAgICBub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMC41LCBlbmQpLCBmaW5pc2hlZCkuc3BlZWQoMC40KSk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMi5cclxuICovXHJcblxyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5mdW5jdGlvbiBCdWxsZmlnaHRfSGVscFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuU0JGX1JFUV9IRUxQX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfSGVscFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8yLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9IZWxwUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX0hFTFBfQ01EX0lEO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgLy9HbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQnVsbGZpZ2h0X0hlbHBSZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzIuXHJcbiAqL1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lU3lzdGVtICAgPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ2FyZFR5cGUgOiAwLFxyXG4gICAgICAgIEN1ck11bHQgOiAxLFxyXG4gICAgICAgIEN1clBvcyA6IDAsXHJcbiAgICAgICAgRm9udE5hbWUgOiBjYy5MYWJlbCxcclxuICAgICAgICBOdW1iZXIgOiBjYy5MYWJlbCxcclxuICAgICAgICBCdG5BZGQgOiBjYy5CdXR0b24sXHJcbiAgICAgICAgQnRuU3ViIDogY2MuQnV0dG9uLFxyXG4gICAgICAgIEJ0blNwcml0ZUZyYW1lIDogW2NjLlNwcml0ZUZyYW1lXSwgLy8gMCA6IOaMiemSrueUqOeZveiJsuiDjOaZryDvvIwgMTog5oyJ6ZKu55So6buE6Imy6IOM5pmvXHJcbiAgICAgICAgYkNsdWJDcmVhdGUgOiBmYWxzZSxcclxuICAgIH0sXHJcblxyXG5cclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gRV9CVUxMX1pFUk8gICAgICAgPSAwIC8v5rKh54mbXHJcbiAgICAvLyBFX0JVTExfT05FICAgICAgICA9IDEgLy/niZsxXHJcbiAgICAvLyBFX0JVTExfVFdPICAgICAgICA9IDJcclxuICAgIC8vIEVfQlVMTF9USFJFRSAgICAgID0gM1xyXG4gICAgLy8gRV9CVUxMX0ZPVVIgICAgICAgPSA0XHJcbiAgICAvLyBFX0JVTExfRklWRSAgICAgICA9IDVcclxuICAgIC8vIEVfQlVMTF9TSVggICAgICAgID0gNlxyXG4gICAgLy8gRV9CVUxMX1NFVkVOICAgICAgPSA3XHJcbiAgICAvLyBFX0JVTExfRUlHSFQgICAgICA9IDhcclxuICAgIC8vIEVfQlVMTF9OSU5FICAgICAgID0gOVxyXG4gICAgLy8gRV9CVUxMX1BBSVIgICAgICAgPSAxMCAvL+eJm+WvueWtkFxyXG4gICAgLy8gRV9CVUxMX0JVTEwgICAgICAgPSAxMSAvL+eJm+eJm1xyXG4gICAgLy8gRV9CVUxMX0xJTkUgICAgICAgPSAxMiAvL+eJm+mhuuWtkFxyXG4gICAgLy8gRV9CVUxMX1RIUkVFX1RXTyAgPSAxMyAvL+S4ieW4puS6jFxyXG4gICAgLy8gRV9CVUxMX0JPTUIgICAgICAgPSAxNCAvL+eCuOW8uVxyXG4gICAgLy8gRV9CVUxMX1NNQUxMX0ZJVkUgPSAxNSAvL+S6lOWwj+eJm1xyXG4gICAgLy8gRV9CVUxMX0ZJVkVfS0lORyAgPSAxNiAvL+S6lOiKseeJm1xyXG4gICAgLy8gRV9CVUxMX01BWCAgICAgICAgPSAxN1xyXG4gICAgaW5pdERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5DYXJkVHlwZU11bHQgPSBbXHJcbiAgICAgICAgICAgIFsxXSxbMV0sWzFdLFsxXSxbMV0sWzFdLFsxXSwgIC8vMH42XHJcbiAgICAgICAgICAgIFsxLDJdLCAgICAgICAgIC8vN1xyXG4gICAgICAgICAgICBbMiwzXSwgICAgICAgICAvLzhcclxuICAgICAgICAgICAgWzIsM10sICAgICAgICAgLy85XHJcbiAgICAgICAgICAgIFswXSwgICAgICAgICAgIC8v54mb5a+55a2QXHJcbiAgICAgICAgICAgIFszLDQsNV0sICAgICAgIC8v54mb54mbXHJcbiAgICAgICAgICAgIFswLDQsNSw2LDcsOF0sIC8v54mb6aG65a2QXHJcbiAgICAgICAgICAgIFswLDQsNSw2LDcsOF0sIC8v5LiJ5bim5LqMXHJcbiAgICAgICAgICAgIFswLDQsNSw2LDcsOF0sIC8v54K45by5XHJcbiAgICAgICAgICAgIFswLDQsNSw2LDcsOF0sIC8v5LqU6Iqx54mbXHJcbiAgICAgICAgICAgIFswLDQsNSw2LDcsOF0sIC8v5LqU5bCP54mbXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLkNhcmRUeXBlTXVsdFt0aGlzLkNhcmRUeXBlXS5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5DdXJNdWx0ID0gdGhpcy5DYXJkVHlwZU11bHRbdGhpcy5DYXJkVHlwZV1bMF07XHJcbiAgICAgICAgdGhpcy5zZXROdW1iZXIodGhpcy5DdXJNdWx0KTtcclxuICAgICAgICB0aGlzLnNldEZvbnROYW1lKHdpbmRvdy5CdWxsZmlnaHRfQ2FyZFR5cGVOYW1lW3RoaXMuQ2FyZFR5cGVdKTtcclxuICAgICAgICB0aGlzLnNldEJ0bkJnRnJhbWUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Q3VyTXVsdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5DdXJNdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDYXJkVHlwZSA6IGZ1bmN0aW9uIChjYXJkdHlwZSkge1xyXG4gICAgICAgIHRoaXMuQ2FyZFR5cGUgPSBjYXJkdHlwZTtcclxuICAgICAgICB0aGlzLmluaXREYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEZvbnROYW1lIDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfTXVsdENlbGwuc2V0Rm9udE5hbWUsbmFtZSA9IFwiICsgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5Gb250TmFtZS5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXROdW1iZXIgOiBmdW5jdGlvbiAobnVtYmVyKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X011bHRDZWxsLnNldE51bWJlcixudW1iZXIgPSBcIiArIG51bWJlcik7XHJcbiAgICAgICAgdGhpcy5OdW1iZXIuc3RyaW5nID0gbnVtYmVyO1xyXG4gICAgICAgIHRoaXMuc2V0QnRuQmdGcmFtZUJ5Q3VyTXVsdCgpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0Q2x1YkNyZWF0ZSA6IGZ1bmN0aW9uIChiQ2x1YkNyZWF0ZSkge1xyXG4gICAgICAgIHRoaXMuYkNsdWJDcmVhdGUgPSBiQ2x1YkNyZWF0ZTtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfTXVsdENlbGwuc2V0Q2x1YkNyZWF0ZSxiQ2x1YkNyZWF0ZSA9IFwiICsgYkNsdWJDcmVhdGUpO1xyXG4gICAgICAgIGlmKHRoaXMuYkNsdWJDcmVhdGUgPT0gZmFsc2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0blN1Yi5ub2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5CdG5TcHJpdGVGcmFtZVswXTtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWIuaW50ZXJhY3RhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuQWRkLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLkJ0blNwcml0ZUZyYW1lWzBdO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFkZC5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5zZXRCdG5CZ0ZyYW1lQnlDdXJNdWx0KCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRCdG5CZ0ZyYW1lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuQ2FyZFR5cGUgPj0gd2luZG93LkJ1bGxmaWdodF9DYXJkVHlwZS5FX0JVTExfU0VWRU4gKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuQnRuU3ByaXRlRnJhbWVbMV07XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLkJ0blNwcml0ZUZyYW1lWzFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFkZC5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWIuaW50ZXJhY3RhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldEJ0bkJnRnJhbWVCeUN1ck11bHQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0QnRuQmdGcmFtZUJ5Q3VyTXVsdCA6IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfTXVsdENlbGwuc2V0QnRuQmdGcmFtZUJ5Q3VyTXVsdCx0aGlzLkN1ck11bHQgPSBcIiArIHRoaXMuQ3VyTXVsdCk7XHJcbiAgICAgICAgaWYodGhpcy5sZW5ndGggPD0gMSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZih0aGlzLmJDbHViQ3JlYXRlID09IGZhbHNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG11bHQgPSBbMSwxLDEsMSwxLDEsMSwxLDEsMiwwLDMsNCw0LDUsNSw1XTtcclxuICAgICAgICAgICAgdGhpcy5DdXJNdWx0ID0gbXVsdFt0aGlzLkNhcmRUeXBlXTtcclxuICAgICAgICAgICAgdGhpcy5OdW1iZXIuc3RyaW5nID0gKG11bHRbdGhpcy5DYXJkVHlwZV0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldENsdWJDcmVhdGUodGhpcy5iQ2x1YkNyZWF0ZSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuQ3VyTXVsdCA+IHRoaXMuQ2FyZFR5cGVNdWx0W3RoaXMuQ2FyZFR5cGVdWzBdXHJcbiAgICAgICAgICAgICYmIHRoaXMuQ3VyTXVsdCA8IHRoaXMuQ2FyZFR5cGVNdWx0W3RoaXMuQ2FyZFR5cGVdW3RoaXMubGVuZ3RoIC0gMV0pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0blN1Yi5ub2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5CdG5TcHJpdGVGcmFtZVsxXTtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWIuaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuQnRuU3ByaXRlRnJhbWVbMV07XHJcbiAgICAgICAgICAgIHRoaXMuQnRuQWRkLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5DdXJNdWx0IDw9IHRoaXMuQ2FyZFR5cGVNdWx0W3RoaXMuQ2FyZFR5cGVdWzBdKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWIubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuQnRuU3ByaXRlRnJhbWVbMF07XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFkZC5ub2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5CdG5TcHJpdGVGcmFtZVsxXTtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQuaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5TdWIubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuQnRuU3ByaXRlRnJhbWVbMV07XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuQWRkLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLkJ0blNwcml0ZUZyYW1lWzBdO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFkZC5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24oZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X01lbnUuY2FsbEJhY2tCdG4sYnRuTmFtZSA9IFwiICsgYnRuTmFtZSk7XHJcbiAgICAgICAgaWYgKGJ0bk5hbWUgPT0gXCJCdG5fQWRkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5DdXJQb3MrKztcclxuICAgICAgICAgICAgaWYodGhpcy5DdXJQb3MgPj0gdGhpcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ3VyUG9zID0gdGhpcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuQ3VyTXVsdCA9IHRoaXMuQ2FyZFR5cGVNdWx0W3RoaXMuQ2FyZFR5cGVdW3RoaXMuQ3VyUG9zXTtcclxuICAgICAgICAgICAgdGhpcy5zZXROdW1iZXIodGhpcy5DdXJNdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYnRuTmFtZSA9PSBcIkJ0bl9TdWJcIikge1xyXG4gICAgICAgICAgICB0aGlzLkN1clBvcy0tO1xyXG4gICAgICAgICAgICBpZih0aGlzLkN1clBvcyA8IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ3VyUG9zID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLkN1ck11bHQgPSB0aGlzLkNhcmRUeXBlTXVsdFt0aGlzLkNhcmRUeXBlXVt0aGlzLkN1clBvc107XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TnVtYmVyKHRoaXMuQ3VyTXVsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMi5cclxuICovXHJcblxyXG4vKlxyXG4qIC8v6YCa55+l546p5a6277yM5LiA5bGA5ri45oiP57uT5p2fXHJcbiB0eXBlIEdBTUVfT1ZFUl9TRUFURVJTX1Qgc3RydWN0IHtcclxuIFVpZCAgICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuIEZpbmFsQ29pbiBpbnQ2NCAgYGpzb246XCJmaW5hbGNvaW5cImBcclxuIENvaW4gICAgICBpbnQ2NCAgICBganNvbjpcImNvaW5cImBcclxuIH1cclxuXHJcbiB0eXBlIFNCRl9OT1RJRllfT05FX0dBTUVfUkVTVUxUX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gVGFibGVJZCAgaW50MzIgICAgYGpzb246XCJ0YWJsZWlkXCJgXHJcbiBUU3RhdHVzICBpbnQgICAgICBganNvbjpcInRzdGF0dXNcImBcclxuIFNlYXRlcnNcdCBbXUdBTUVfT1ZFUl9TRUFURVJTX1QgIGBqc29uOlwic2VhdGVyc1wiYFxyXG4gfVxyXG4qICovXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuXHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9Ob3RpZnlHYW1lT3Zlck9uY2VQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX09ORV9HQU1FX1JFU1VMVF9DTURfSUQ7XHJcblxyXG4gICAgdGhpcy50YWJsZWlkICA9IDA7XHJcbiAgICB0aGlzLnRzdGF0dXMgID0gMDtcclxuICAgIHRoaXMub3ZlcnRpbWUgPSA1O1xyXG4gICAgdGhpcy5zZWF0ZXJzICA9IFtdO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy50YWJsZWlkICA9IG1zZy50YWJsZWlkO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyAgPSBtc2cudHN0YXR1cztcclxuICAgICAgICB0aGlzLnNlYXRlcnMgID0gbXNnLnNlYXRlcnM7XHJcbiAgICAgICAgdGhpcy51c3RhdHVzICA9IG1zZy51c3RhdHVzO1xyXG4gICAgICAgIHRoaXMub3ZlcnRpbWUgPSBtc2cub3ZlcnRpbWU7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfTm90aWZ5R2FtZU92ZXJPbmNlUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzIuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuXHJcbi8qXHJcbiogdHlwZSBTQkZfTk9USUZZX0xBU1RfR0FNRV9SRVNVTFRfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBUYWJsZUlkIGludDMyICAgICAgICAgICAgICAgIGBqc29uOlwidGFibGVpZFwiYFxyXG4gU2NvcmVzICBbXVNCRl9QTEFZRVJfU0NPUkVfVCBganNvbjpcInNjb3Jlc1wiYFxyXG4gfVxyXG5cclxuIHR5cGUgU0JGX1BMQVlFUl9TQ09SRV9UIHN0cnVjdCB7XHJcbiBVaWQgICAgICAgIGludDMyIGBqc29uOlwidWlkXCJgXHJcbiBDb2luICAgICAgIGludDY0IGBqc29uOlwiY29pblwiYFxyXG4gUGxheU51bSAgICBpbnQgICBganNvbjpcInBsYXludW1cImBcclxuIE1heFdpbiAgICAgaW50ICAgYGpzb246XCJtYXh3aW5cImBcclxuIFRvdGFsQ2FycnkgaW50NjQgYGpzb246XCJ0b3RhbGNhcnJ5XCJgXHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gQnVsbGZpZ2h0X05vdGlmeUdhbWVPdmVyVG90YWxQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX1RPVEFMX0dBTUVfUkVTVUxUX0NNRF9JRDtcclxuXHJcbiAgICB0aGlzLnByaXZhdGVpZCA9IDA7XHJcbiAgICB0aGlzLlRhYmxlSWQgPSAwO1xyXG4gICAgdGhpcy5TY29yZXMgPSBbXTtcclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMucHJpdmF0ZWlkID0gbXNnLnByaXZhdGVpZDtcclxuICAgICAgICB0aGlzLlRhYmxlSWQgPSBtc2cudGFibGVpZDtcclxuICAgICAgICB0aGlzLlNjb3JlcyA9IG1zZy5zY29yZXM7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfTm90aWZ5R2FtZU92ZXJUb3RhbFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy81LlxyXG4gKi9cclxuXHJcbi8qXHJcbiogLy8g6YCa55+l546p5a625ri45oiP5byA5aeLXHJcbiB0eXBlIEdBTUVfU1RBUlRfU0VBVEVSU19UIHN0cnVjdCB7XHJcbiBVaWQgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gVVN0YXR1cyBpbnQgYGpzb246XCJ1c3RhdHVzXCJgXHJcbiBTZWF0SWQgIGludCBganNvbjpcInNlYXRpZFwiYFxyXG4gfVxyXG5cclxuIHR5cGUgU0JGX05PVElGWV9HQU1FX1NUQVJUX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBVU3RhdHVzICBpbnQgICAgICAgICAgICAgICAgICAgIGBqc29uOlwidXN0YXR1c1wiYCAgLy/oh6rlt7HnmoTnirbmgIFcclxuIFNlYXRJZCAgIGludCAgICAgICAgICAgICAgICAgICAgYGpzb246XCJzZWF0aWRcImBcclxuIFRhYmxlSWQgIGludDMyICAgICAgICAgICAgICAgICAgYGpzb246XCJ0YWJsZWlkXCJgICAvL+ahjOWtkElEXHJcbiBUU3RhdHVzICBpbnQgICAgICAgICAgICAgICAgICAgIGBqc29uOlwidHN0YXR1c1wiYCAgLy/moYzlrZDnirbmgIFcclxuIENhbGxUaW1lIGludCAgICAgICAgICAgICAgICAgICAgYGpzb246XCJjYWxsdGltZVwiYCAvL+aKouW6hOaXtumXtFxyXG4gQ2FyZHMgICAgW11ieXRlICAgICAgICAgICAgICAgICBganNvbjpcImNhcmRzXCJgICAgIC8v6Ieq5bex55qENeW8oOeJjFxyXG4gU2VhdGVycyAgW11HQU1FX1NUQVJUX1NFQVRFUlNfVCBganNvbjpcInNlYXRlcnNcImBcclxuIH1cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG5mdW5jdGlvbiBCdWxsZmlnaHRfTm90aWZ5R2FtZVN0YXJ0UGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9HQU1FX1NUQVJUX0NNRF9JRDtcclxuICAgIHRoaXMudXN0YXR1cyAgPSAwO1xyXG4gICAgdGhpcy5zZWF0aWQgICA9IC0xO1xyXG4gICAgdGhpcy50YWJsZWlkICA9IDA7XHJcbiAgICB0aGlzLnRzdGF0dXMgID0gMDtcclxuICAgIHRoaXMuY2FsbHRpbWUgPSAwO1xyXG4gICAgdGhpcy5jYXJkcyAgICA9IFtdO1xyXG4gICAgdGhpcy5zZWF0ZXJzICA9IFtdO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy51c3RhdHVzID0gbXNnLnVzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zZWF0aWQgPSBtc2cuc2VhdGlkO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCA9IG1zZy50YWJsZWlkO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgIHRoaXMuY2FsbHRpbWUgPSBtc2cuY2FsbHRpbWU7XHJcbiAgICAgICAgdGhpcy5jYXJkcyA9IG1zZy5jYXJkcztcclxuICAgICAgICB0aGlzLnNlYXRlcnMgPSBtc2cuc2VhdGVycztcclxuICAgICAgICB0aGlzLnJvdW5kbnVtID0gbXNnLnJvdW5kbnVtO1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJ1bGxmaWdodF9Ob3RpZnlHYW1lU3RhcnRQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMTEuXHJcbiAqL1xyXG5cclxuXHJcbi8qXHJcbiogdHlwZSBTQkZfTk9USUZZX0tJQ0tPVVRfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBUYWJsZUlkIGludDMyICAgYGpzb246XCJ0YWJsZWlkXCJgXHJcbiBTZWF0VWlkIHVpbnQzMiAgYGpzb246XCJzZWF0dWlkXCJgXHJcbiBTZWF0SWQgIGludCAgICAgYGpzb246XCJzZWF0aWRcImBcclxuIH1cclxuXHJcbiDop6blj5HlnLrmma/vvJogMS4gIOW4puWFpemHkeW4gei2heaXtlxyXG4gMi4g546p5a625pC65bim6YeR5biB5LiN6LazKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcblxyXG5mdW5jdGlvbiBCdWxsZmlnaHRfTm90aWZ5S2lja091dFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfS0lDS09VVF9DTURfSUQ7XHJcbiAgICB0aGlzLnRhYmxlaWQgPSAwO1xyXG4gICAgdGhpcy5zZWF0dWlkID0gMDtcclxuICAgIHRoaXMuc2VhdGlkID0gLTE7XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgdGhpcy50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy5zZWF0dWlkID0gbXNnLnNlYXR1aWQ7XHJcbiAgICAgICAgdGhpcy5zZWF0aWQgPSBtc2cuc2VhdGlkO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gbXNnLnN0YXR1cztcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJ1bGxmaWdodF9Ob3RpZnlLaWNrT3V0UGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzE2LlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG5cclxuLypcclxuKiB0eXBlIFNCRl9OT1RfQkVUX0NPSU5fVCBzdHJ1Y3Qge1xyXG4gVWlkICAgICAgICB1aW50MzIgIGBqc29uOlwidWlkXCJgXHJcbiBTZWF0SWQgICAgIGludCAgICAgYGpzb246XCJzZWF0aWRcImBcclxuIEJldENvaW5NdWwgaW50ICAgICBganNvbjpcImJldGNvaW5tdWxcImBcclxuIH1cclxuXHJcbiB0eXBlIFNCRl9OT1RJRllfTk9UX0JFVF9DT0lOX1Qgc3RydWN0IHsgICAgICAgICAgICAgLy/msqHmnInkuIvms6jnmoTnjqnlrrZcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gVGFibGVJZCAgIGludDMyICAgICAgICAgICAgICAgIGBqc29uOlwidGFibGVpZFwiYCAvL+ahjOWtkGlkXHJcbiBUU3RhdHVzICAgaW50ICAgICAgICAgICAgICAgICAgYGpzb246XCJ0c3RhdHVzXCJgIC8v5qGM5a2Q54q25oCBXHJcbiBTZWF0ZXJzICAgW11TQkZfTk9UX0JFVF9DT0lOX1QgYGpzb246XCJzZWF0ZXJzXCJgXHJcbiB9XHJcblxyXG4gKiAqL1xyXG5mdW5jdGlvbiBCdWxsZmlnaHRfTm90aWZ5Tm90QmV0UGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9OT1RfQkVUX0NPSU5fQ01EX0lEO1xyXG4gICAgdGhpcy50YWJsZWlkID0gMDtcclxuICAgIHRoaXMudHN0YXR1cyA9IDA7XHJcbiAgICB0aGlzLnNlYXRlcnMgPSBbXTtcclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICAvLyBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zZWF0ZXJzID0gbXNnLnNlYXRlcnM7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfTm90aWZ5Tm90QmV0UGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzE2LlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG5cclxuLypcclxuIC8v6YCa55+l5pS+5byD5pON5L2c55qE546p5a62XHJcbiB0eXBlIE5PVF9DQUxMX1NFQVRFUl9UIHN0cnVjdCB7XHJcbiBVaWQgICAgICAgdWludDMyIGBqc29uOlwidWlkXCJgXHJcbiBTZWF0SWQgICAgaW50ICAgIGBqc29uOlwic2VhdGlkXCJgXHJcbiB9XHJcblxyXG4gdHlwZSBTQkZfTk9USUZZX05PVF9DQUxMX0JBTktFUl9UIHN0cnVjdHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gVGFibGVJZCAgaW50MzIgIGBqc29uOlwidGFibGVpZFwiYCAgICAgIC8v5qGM5a2QaWRcclxuIFRTdGF0dXMgIGludCAgICBganNvbjpcInRzdGF0dXNcImAgICAgICAvL+ahjOWtkOeKtuaAgVxyXG4gU2VhdGVycyAgW11OT1RfQ0FMTF9TRUFURVJfVCBganNvbjpcInNlYXRlcnNcImBcclxuIH1cclxuKiAqL1xyXG5mdW5jdGlvbiBCdWxsZmlnaHRfTm90aWZ5Tm90Q2FsbEJhbmtlclBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfTk9UX0NBTExfQkFOS0VSX0NNRF9JRDtcclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcbiAgICB0aGlzLnRzdGF0dXMgPSAwO1xyXG4gICAgdGhpcy5TZWF0ZXJzID0gW107XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgLy8gaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCA9IG1zZy50YWJsZWlkO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgIHRoaXMuU2VhdGVycyA9IG1zZy5TZWF0ZXJzO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQnVsbGZpZ2h0X05vdGlmeU5vdENhbGxCYW5rZXJQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvNy5cclxuICovXHJcblxyXG4vKlxyXG4qIC8vIOmAmuefpeeOqeWutuW8gOWni+W8gOeJjFxyXG4gdHlwZSBTQkZfTk9USUZZX09QRU5fQ0FSRF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFRhYmxlSWQgIGludDMyICAgIGBqc29uOlwidGFibGVpZFwiYFxyXG4gVFN0YXR1cyAgaW50ICAgICAgYGpzb246XCJ0c3RhdHVzXCJgXHJcbiBVU3RhdHVzICBpbnQgICAgICBganNvbjpcInVzdGF0dXNcImBcclxuIE9wZW5UaW1lIGludCAgICAgIGBqc29uOlwib3BlbnRpbWVcImBcclxuIENhcmRzICAgIFtddWludDE2IGBqc29uOlwiY2FyZHNcImAgICAgLy/oh6rlt7HnmoQ15byg54mMXHJcbiB9XHJcbiogKi9cclxuXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuZnVuY3Rpb24gQnVsbGZpZ2h0X05vdGlmeU9wZW5DYXJkUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9PUEVOX0NBUkRfQ01EX0lEO1xyXG4gICAgLy97XCJjbWRcIjo2NjE5MTQ4LFwic2VxXCI6MCxcInVpZFwiOjEwMDEwLFwiY29kZVwiOjAsXCJkZXNjXCI6XCJcIixcInRhYmxlaWRcIjoxLFxyXG4gICAgLy8gXCJ0c3RhdHVzXCI6NCxcInVzdGF0dXNcIjo1LFwic2VhdGlkXCI6MCxcIm9wZW50aW1lXCI6MjAsXCJjYXJkc1wiOlsyNiw5LDUzLDM2LDJdfVxyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy51c3RhdHVzID0gbXNnLnVzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5vcGVudGltZSA9IG1zZy5vcGVudGltZTtcclxuICAgICAgICB0aGlzLmNhcmRzID0gbXNnLmNhcmRzO1xyXG5cclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfTm90aWZ5T3BlbkNhcmRQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvNS5cclxuICovXHJcbi8qXHJcbiB0eXBlIFNCRl9OT1RJRllfQ09ORklSTV9CQU5LRVJfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBUYWJsZUlkICBpbnQzMiBganNvbjpcInRhYmxlaWRcImAgICAvL+ahjOWtkGlkXHJcbiBUU3RhdHVzICBpbnQgYGpzb246XCJ0c3RhdHVzXCJgICAgLy/moYzlrZDnirbmgIFcclxuIEJhbmtlclNlYXRJZCBpbnQgYGpzb246XCJiYW5rZXJzZWF0aWRcImAgLy/luoTlrrbluqfkvY1pZFxyXG4gVVN0YXR1cyAgICAgIGludCBganNvbjpcInVzdGF0dXNcImAgICAgICAvL+eOqeWutuiHquW3seeahOeKtuaAgVxyXG4gTWF4QmV0TXVsICAgIGludCBganNvbjpcIm1heGJldG11bFwiYCAgICAvL+eOqeWutuacgOWkp+S4i+azqOWAjeaVsFxyXG4gQmV0VGltZSAgICAgIGludCBganNvbjpcImJldHRpbWVcImAgICAgICAvL+S4i+azqOaXtumXtFxyXG4gfVxyXG4qICovXHJcblxyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9Ob3RpZnlTdXJlQmFua2VyUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuICAgIC8ve1wiY21kXCI6NjYxOTE0NCxcInNlcVwiOjAsXCJ1aWRcIjoxMDAxMCxcImNvZGVcIjowLFwiZGVzY1wiOlwiXCIsXCJ0YWJsZWlkXCI6MixcInRzdGF0dXNcIjozLFxyXG4gICAgLy8gXCJiYW5rZXJzZWF0aWRcIjoxLFwiYmFua2VydWlkXCI6MTAwMTEsXCJ1c3RhdHVzXCI6NSxcIm1heGJldG11bFwiOjI1LFwiYmV0dGltZVwiOjEwfVxyXG5cclxuICAgIHRoaXMuY21kID0gQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX0NPTkZJUk1fQkFOS0VSX0NNRF9JRDtcclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcbiAgICB0aGlzLnRzdGF0dXMgPSAwO1xyXG4gICAgdGhpcy5iYW5rZXJ1aWQgPSAwO1xyXG4gICAgdGhpcy5iYW5rZXJzZWF0aWQgPSAtMTtcclxuICAgIHRoaXMudXN0YXR1cyA9IDA7XHJcbiAgICB0aGlzLm1heGJldG11bCA9IDA7XHJcbiAgICB0aGlzLmJldHRpbWUgPSAwO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5iYW5rZXJ1aWQgPSBtc2cuYmFua2VydWlkO1xyXG4gICAgICAgIHRoaXMuYmFua2Vyc2VhdGlkID0gbXNnLmJhbmtlcnNlYXRpZDtcclxuICAgICAgICB0aGlzLnVzdGF0dXMgPSBtc2cudXN0YXR1cztcclxuICAgICAgICB0aGlzLm1heGJldG11bCA9IG1zZy5tYXhiZXRtdWw7XHJcbiAgICAgICAgdGhpcy5iZXR0aW1lID0gbXNnLmJldHRpbWU7XHJcblxyXG4gICAgICAgIC8vR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJ1bGxmaWdodF9Ob3RpZnlTdXJlQmFua2VyUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzIuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5cclxuLypcclxuKiAvL+eci+eJjFxyXG4gdHlwZSBTQkZfUkVRX09QRU5fQ0FSRF9UIHN0cnVjdCB7XHJcbiBHYW1lSGVhZFxyXG4gSGFzQnVsbCBpbnQgICAgICBganNvbjpcImhhc2J1bGxcImBcclxuIENhcmRzICAgW111aW50MTYgYGpzb246XCJjYXJkc1wiYFxyXG4gfVxyXG4qICovXHJcblxyXG5mdW5jdGlvbiBCdWxsZmlnaHRfT3BlbkNhcmRSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfT1BFTl9DQVJEX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfT3BlbkNhcmRSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMi5cclxuICovXHJcblxyXG4vKlxyXG4qXHJcbiogdHlwZSBTQkZfUkVTUF9PUEVOX0NBUkRfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBPcGVuVWlkICBpbnQgICAgICBganNvbjpcIm9wZW51aWRcImBcclxuIEJ1bGxUeXBlIGludCAgICAgIGBqc29uOlwiYnVsbHR5cGVcImBcclxuIENhcmRzICAgIFtddWludDE2IGBqc29uOlwiY2FyZHNcImBcclxuIH1cclxuKiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuZnVuY3Rpb24gQnVsbGZpZ2h0X09wZW5DYXJkUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX09QRU5fQ0FSRF9DTURfSUQ7XHJcbiAgICAvL3tcImNtZFwiOjY2MTkxNTAsXCJzZXFcIjoxMCxcInVpZFwiOjEwMDEwLFwiY29kZVwiOjAsXCJkZXNjXCI6XCJcIixcclxuICAgIC8vIFwib3BlbnVpZFwiOjEwMDEwLFwiYnVsbHR5cGVcIjowLFwiY2FyZHNcIjpbMTIsMzYsMTksNTAsMzNdfVxyXG4gICAgdGhpcy5vcGVudWlkICA9IDA7XHJcbiAgICB0aGlzLmJ1bGx0eXBlID0gMDtcclxuICAgIHRoaXMuc2VhdGlkICAgPSAtMTtcclxuICAgIHRoaXMuY2FyZHMgICAgPSBbXTtcclxuICAgIHRoaXMuaW5kZXgxICAgPSAtMTtcclxuICAgIHRoaXMuaW5kZXgyICAgPSAtMTtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMub3BlbnVpZCAgPSBtc2cub3BlbnVpZDtcclxuICAgICAgICB0aGlzLmJ1bGx0eXBlID0gbXNnLmJ1bGx0eXBlO1xyXG4gICAgICAgIHRoaXMuY2FyZHMgICAgPSBtc2cuY2FyZHM7XHJcbiAgICAgICAgdGhpcy5zZWF0aWQgICA9IG1zZy5zZWF0aWQ7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzICA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgIHRoaXMuaW5kZXgxICAgPSBtc2cuaW5kZXgxO1xyXG4gICAgICAgIHRoaXMuaW5kZXgyICAgPSBtc2cuaW5kZXgyO1xyXG5cclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfT3BlbkNhcmRSZXNwUGFja2V0OyIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gICA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKipOZXR3b3JrKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9HYW1lU2NlbmUub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0dBTUVfU1dJVENIX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25EaXNtaXNzR2FtZShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb25EaXNtaXNzR2FtZSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYobXNnLmlzc3RhcnQgPT0gMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmiL/pl7Top6PmlaPmiJDlip/vvIzmnKzlsYDnu5PmnZ/lkI7lsIbop6PmlaNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9Pd25lclZpZXcuY2FsbGJhY2tCdG4sQnRuTmFtZSA9IFwiICsgQnRuTmFtZSk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQnRuRGlzbWlzc1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBpc3N0YXJ0OiAwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKFVTX1JFUV9HQU1FX1NXSVRDSF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIEluZm9MYWJlbCA6IFtjYy5MYWJlbF0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVQbGF5ZXJTY29yZTogZnVuY3Rpb24gKHRleHQwLCB0ZXh0MSwgdGV4dDIsIHRleHQzLCBzaXplKSB7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMF0uc3RyaW5nID0gdGV4dDA7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMV0uc3RyaW5nID0gdGV4dDE7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMl0uc3RyaW5nID0gdGV4dDI7XHJcblxyXG4gICAgICAgIHZhciB3aW5Db2luID0gTnVtYmVyKHRleHQzKTtcclxuICAgICAgICBpZiAod2luQ29pbiA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFszXS5zdHJpbmcgICAgID0gXCIrXCIgKyB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFszXS5ub2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2luQ29pbiA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzNdLnN0cmluZyAgICAgPSB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFszXS5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbM10uc3RyaW5nICAgICA9IHdpbkNvaW47XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzNdLm5vZGUuY29sb3IgPSBjYy5Db2xvci5HUkVFTjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVBsYXllclNjb3JlQ2VsbDogZnVuY3Rpb24gKHRleHQxLHRleHQyLHRleHQzLCBzaXplKSB7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMF0uc3RyaW5nID0gdGV4dDE7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMV0uc3RyaW5nID0gdGV4dDI7XHJcblxyXG5cclxuICAgICAgICB2YXIgd2luQ29pbiA9IE51bWJlcih0ZXh0Myk7XHJcbiAgICAgICAgaWYgKHdpbkNvaW4gPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbMl0uc3RyaW5nID0gXCIrXCIgKyB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFsyXS5ub2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2luQ29pbiA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzJdLnN0cmluZyAgICAgPSB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFsyXS5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbMl0uc3RyaW5nICAgICA9IHdpbkNvaW47XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzJdLm5vZGUuY29sb3IgPSBjYy5Db2xvci5HUkVFTjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuSW5mb0xhYmVsWzNdLnN0cmluZyAgICAgPSBOdW1iZXIodGV4dDIpICsgIE51bWJlcih0ZXh0Myk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHRoaXMuSW5mb0xhYmVsLmxlbmd0aDsgaSArKykge1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFtpXS5mb250U2l6ZSA9IHNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoXCJNZXNzYWdlRmFjdG9yeVwiKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW0gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcbnZhciBCdWxsZmlnaHRfQXVkaW9Db25maWcgPSByZXF1aXJlKCdCdWxsZmlnaHRfQXVkaW9Db25maWcnKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgc2VhdEZsYWcgOiAwLCAgICAvLzA65rKh5pyJ546p5a625Z2Q5LiL77yMMTrlt7Lnu4/mnInnjqnlrrblnZDkuItcclxuICAgICAgICBzZWF0SWQgOiAwLFxyXG4gICAgICAgIHVzZXJIZWFkIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIHVzZXJOaWNrIDogY2MuTGFiZWwsXHJcbiAgICAgICAgdXNlckdvbGQgOiBjYy5MYWJlbCxcclxuICAgICAgICB3aW5TY29yZUJnIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIHdpblNjb3JlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgYmFua2VyRmxhZyA6IGNjLlNwcml0ZSxcclxuICAgICAgICBiYW5rZXJMaWdodCA6IGNjLlNwcml0ZSxcclxuICAgICAgICBUaW1lQmFyIDogY2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgd2luX2FuaW1hdGlvbiA6IGNjLlNwcml0ZSxcclxuICAgICAgICBVc2VySW5mb1ZpZXcgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgWW91V2luIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIERlZmF1bHRIZWFkIDogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0QmFzZURhdGEoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRCYXNlRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkJhbmtlckZsYWdQb3MgPSB0aGlzLmJhbmtlckZsYWcubm9kZS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICAgIHRoaXMud2luU2NvcmVCZ1BvcyA9IHRoaXMuYmFua2VyRmxhZy5ub2RlLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgLy90aGlzLnBsYXllciA9IG51bGw7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRVc2VySGVhZCA6IGZ1bmN0aW9uIChTcHJpdGVmcmFtZSkge1xyXG4gICAgICAgIC8vY2MubG9nKCdCdWxsZmlnaHRfUGxheWVySXRlbS5zZXRVc2VySGVhZCcpXHJcbiAgICAgICAgdGhpcy51c2VySGVhZC5zcHJpdGVGcmFtZSA9IFNwcml0ZWZyYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRVc2VyTmljayA6IGZ1bmN0aW9uIChuaWNrKSB7XHJcbiAgICAgICAgLy9jYy5sb2coJ0J1bGxmaWdodF9QbGF5ZXJJdGVtLnNldFVzZXJIZWFkLCBuaWNrID0gJyArIG5pY2spO1xyXG4gICAgICAgIHRoaXMudXNlck5pY2suc3RyaW5nID0gbmljaztcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VXNlckdvbGQgOiBmdW5jdGlvbiAoZ29sZCkge1xyXG4gICAgICAgIC8vY2MubG9nKCdCdWxsZmlnaHRfUGxheWVySXRlbS5zZXRVc2VyR29sZCwgZ29sZCA9ICcgKyBnb2xkKTtcclxuICAgICAgICB0aGlzLnVzZXJHb2xkLnN0cmluZyAgICAgPSBnb2xkO1xyXG4gICAgICAgIHRoaXMudXNlckdvbGQubm9kZS5jb2xvciA9IGNjLkNvbG9yLldISVRFO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0VXNlcldhaXRDYXJyeSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnVzZXJHb2xkLnN0cmluZyAgICAgPSBcIuaQuuW4puS4rS4uXCI7XHJcbiAgICAgICAgdGhpcy51c2VyR29sZC5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VXNlcldpblNjb3JlIDogZnVuY3Rpb24gKHNjb3JlKSB7XHJcbiAgICAgICAgdGhpcy53aW5TY29yZS5zdHJpbmcgPSBzY29yZTtcclxuICAgICAgICB0aGlzLndpblNjb3JlQmcubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMud2luU2NvcmVCZy5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKS5wbGF5KFwiV2luU2NvcmVBbmlcIik7XHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyVXNlcldpblNjb3JlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vY2MubG9nKFwiQnVsbGZpZ2h0X1BsYXllckl0ZW0uY2xlYXJVc2VyV2luU2NvcmVcIik7XHJcbiAgICAgICAgdGhpcy53aW5TY29yZUJnLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFNlYXRJZEJ5Vmlld0lkIDogZnVuY3Rpb24odmlld0lkKSB7XHJcbiAgICAgICAgbGV0IHNlbGZWaWV3SWQgPSB3aW5kb3cuQlVMTEZJR0hUX01BWF9QTEFZRVIgLSAxO1xyXG4gICAgICAgIGxldCBzZWF0SWQgICAgID0gdmlld0lkO1xyXG5cclxuICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnNlYXRpZCAgPj0gMCkge1xyXG4gICAgICAgICAgICBzZWF0SWQgPSAgKCh2aWV3SWQgLXNlbGZWaWV3SWQpICsgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnNlYXRpZCArIHdpbmRvdy5CVUxMRklHSFRfTUFYX1BMQVlFUikld2luZG93LkJVTExGSUdIVF9NQVhfUExBWUVSXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNjLmxvZyhcIioqKioqKioqZ2V0U2VhdElkQnlWaWV3SWQgdmlld0lkPVwiLCB2aWV3SWQsIFwiIHNlYXRJZD1cIiwgc2VhdElkKTtcclxuICAgICAgICByZXR1cm4gc2VhdElkO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbGJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9QbGF5ZXJJdGVtLmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbS5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChidG5OYW1lID0gXCJCZ1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEZsYWcgPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlYXRpZCA9IHRoaXMuZ2V0U2VhdElkQnlWaWV3SWQodGhpcy5zZWF0SWQpO1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X1BsYXllckl0ZW0uY2FsbGJhY2tCdG4sdGhpcy5zZWF0SWQgPSBcIiArIHNlYXRpZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMgOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRpZCA6IHNlYXRpZCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfU0lUX0RPV05fQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tLkFVRElPX1NJVCk7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy/mmL7npLrnjqnlrrbkv6Hmga9cclxuICAgICAgICAgICAgICAgIHZhciBVc2VySW5mb1ZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlVzZXJJbmZvVmlldyk7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmFkZENoaWxkKFVzZXJJbmZvVmlldyk7XHJcbiAgICAgICAgICAgICAgICBVc2VySW5mb1ZpZXcuc2V0UG9zaXRpb24oY2MucChjYy5kaXJlY3Rvci5nZXRWaXNpYmxlU2l6ZSgpLndpZHRoLzIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0VmlzaWJsZVNpemUoKS5oZWlnaHQvMikpO1xyXG4gICAgICAgICAgICAgICAgVXNlckluZm9WaWV3LmdldENvbXBvbmVudChcIkJ1bGxmaWdodF9Vc2VySW5mb1wiKS5zZXRQbGF5ZXJJbmZvKHRoaXMucGxheWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0UGxheWVyQmFua2VyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYmFua2VyRmxhZy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5iYW5rZXJMaWdodC5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyUGxheWVyQmFua2VyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYmFua2VyRmxhZy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYmFua2VyTGlnaHQubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJQbGF5ZXJJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vY2MubG9nKFwiQnVsbGZpZ2h0X0dhbWVTY2VuZS5jbGVhclBsYXllckluZm8sIHNlYXRJZD0gXCIgKyB0aGlzLnNlYXRJZCk7XHJcbiAgICAgICAgdGhpcy5zZXRVc2VyTmljayhcIlwiKTtcclxuICAgICAgICB0aGlzLnNldFVzZXJHb2xkKDApO1xyXG4gICAgICAgIHRoaXMuY2xlYXJVc2VyV2luU2NvcmUoKTtcclxuICAgICAgICB0aGlzLnVzZXJIZWFkLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zZWF0RmxhZyA9IDA7XHJcbiAgICAgICAgdGhpcy5iYW5rZXJGbGFnLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy51c2VySGVhZC5zcHJpdGVGcmFtZSA9IHRoaXMuRGVmYXVsdEhlYWQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVBsYXllckluZm8gOiBmdW5jdGlvbiAocGxheWVyKSB7XHJcblxyXG4gICAgICAgIHRoaXMucGxheWVyID0gcGxheWVyO1xyXG5cclxuICAgICAgICB0aGlzLnVzZXJIZWFkLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRVc2VyTmljayhwbGF5ZXIubmFtZSk7XHJcblxyXG4gICAgICAgIGlmIChwbGF5ZXIuY29pbiA+IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXNlckdvbGQocGxheWVyLmNvaW4pO1xyXG4gICAgICAgIH0gZWxzZSAge1xyXG4gICAgICAgICAgICB0aGlzLnNldFVzZXJXYWl0Q2FycnkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFVwZGF0ZVdYSGVhZEljb24ocGxheWVyLmhlYWR1cmwsdGhpcy51c2VySGVhZCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2VhdEZsYWcgPSAxO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZ2V0UG9pbnRCeUFuZ2xlIDogZnVuY3Rpb24gKHN0YXJ0cG9pbnQsYW5nbGUscmFkaXVzKVxyXG4gICAge1xyXG5cclxuICAgICAgICBpZiAoYW5nbGUgPD0gOTAgJiYgYW5nbGUgPj0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYy5wKHN0YXJ0cG9pbnQueCArIE1hdGguc2luKGFuZ2xlKSpyYWRpdXMsc3RhcnRwb2ludC55IC0gKHJhZGl1cyAtIE1hdGguY29zKGFuZ2xlKSpyYWRpdXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihhbmdsZSA+IDkwICYmIGFuZ2xlIDw9IDE4MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNjLnAoc3RhcnRwb2ludC54ICsgTWF0aC5zaW4oMTgwIC0gYW5nbGUpKnJhZGl1cyxzdGFydHBvaW50LnkgLSAocmFkaXVzIC0gTWF0aC5jb3MoMTgwIC0gYW5nbGUpKnJhZGl1cyAtIHJhZGl1cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGFuZ2xlID4gMTgwICYmIGFuZ2xlIDw9IDI3MClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNjLnAoc3RhcnRwb2ludC54IC0gTWF0aC5zaW4oMjcwIC0gYW5nbGUpKnJhZGl1cyxzdGFydHBvaW50LnkgLSAocmFkaXVzIC0gTWF0aC5jb3MoMjcwIC0gYW5nbGUpKnJhZGl1cyAtIHJhZGl1cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGFuZ2xlID4gMjcwICYmIGFuZ2xlIDwgMzYwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNjLnAoc3RhcnRwb2ludC54IC0gTWF0aC5zaW4oMzYwLWFuZ2xlKSpyYWRpdXMsc3RhcnRwb2ludC55IC0gKHJhZGl1cyAtIE1hdGguY29zKDM2MC1hbmdsZSkqcmFkaXVzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcblxyXG4gICAgICAgIFNjcm9sbEFjdG9ycyAgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgICAgIC8vU2Nyb2xsV2F0Y2hlcnMgOiBjYy5TY3JvbGxWaWV3LFxyXG5cclxuICAgICAgICBQbGF5ZXJDZWxsIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFRvdXJpc3RDZWxsIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFdhdGNoZXJUaXRsZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgQWN0b3JUaXRsZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgV2F0Y2hlckNvdW50IDogY2MuTGFiZWwsXHJcbiAgICAgICAgUm91bmROdW0gOiBjYy5MYWJlbCxcclxuICAgICAgICB0aW1lTGFiZWwgOiBjYy5MYWJlbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5ydW5JbigpO1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoQ21kX0J1bGxmaWdodC5VU19SRVFfUExBWUVSX0xJU1RfQ01EX0lEKS5zZW5kKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKipOZXR3b3JrKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9QbGF5ZXJMaXN0Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICAvL3RoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuVVNfUkVTUF9QTEFZRVJfTElTVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uR2V0UGxheWVyc0xpc3QobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25HZXRQbGF5ZXJzTGlzdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJCdWxsZmlnaHRfUGxheWVyTGlzdC5vbkdldFBsYXllcnNMaXN0XCIpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRhYmxlSW5mbyhtc2cucmVtYWluVGltZSwgbXNnLnJvdW5kTnVtKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDBcclxuXHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMucmVmcmVzaEFjdG9ycyhtc2cuYWN0b3JzICk7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMucmVmcmVzaFdhdGNoZXJzKG1zZy53YXRjaGVycywgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPiB0aGlzLlNjcm9sbEFjdG9ycy5jb250ZW50LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TY3JvbGxBY3RvcnMuY29udGVudC5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuLypcclxuKiAvL+WPguS4juiAheS/oeaBr1xyXG4gdHlwZSBBQ1RPUl9UIHN0cnVjdCB7XHJcbiBVaWQgICAgICAgdWludDMyIGBqc29uOlwidWlkXCJgXHJcbiBOYW1lICAgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gSGVhZFVybCAgIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuIFRvdGFsQ29pbiBpbnQ2NCAgYGpzb246XCJ0b3RhbFwiYCAvL+aAu+W4puWFpemHkeW4gVxyXG4gV2luQ29pbiAgIGludDY0ICBganNvbjpcIndpblwiYCAgIC8v6L6T6LWi5aSa5bCR6YeR5biBXHJcbiB9XHJcbiogKi9cclxuICAgIHJlZnJlc2hBY3RvcnMgOiBmdW5jdGlvbihhY3RvcnMpXHJcbiAgICB7XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9QbGF5ZXJMaXN0LnJlZnJlc2hBY3RvcnNcIik7XHJcbiAgICAgICAgdmFyIHRvdGFsSGVpZ2h0ID0gMTAwO1xyXG5cclxuICAgICAgICB0aGlzLkFjdG9yVGl0bGUuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKGFjdG9ycylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhY3RvcnNIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7YWN0b3JzICYmIGluZGV4IDwgYWN0b3JzLmxlbmd0aDtpbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUGxheWVyQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICBhY3RvcnNIZWlnaHQgPSBpdGVtLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaXRlbS5zZXRQb3NpdGlvbihjYy5wKDAsIC1pbmRleCppdGVtLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0IC0gaXRlbS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCoxLjUpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuU2Nyb2xsQWN0b3JzLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvaW4gPSBhY3RvcnNbaW5kZXhdLnRvdGFsICsgYWN0b3JzW2luZGV4XS53aW47XHJcbiAgICAgICAgICAgICAgICBpdGVtLmdldENvbXBvbmVudChcIkJ1bGxmaWdodF9QbGF5ZXJDZWxsXCIpLnVwZGF0ZVBsYXllclNjb3JlKGFjdG9yc1tpbmRleF0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RvcnNbaW5kZXhdLnRvdGFsLCBjb2luLCAgYWN0b3JzW2luZGV4XS53aW4pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0b3RhbEhlaWdodCArPSAoKChhY3RvcnMgJiYgYWN0b3JzLmxlbmd0aCA+IDApID8gdGhpcy5BY3RvclRpdGxlLmdldENvbnRlbnRTaXplKHRydWUpLmhlaWdodCA6IDApICsgYWN0b3JzLmxlbmd0aCAqIGFjdG9yc0hlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG90YWxIZWlnaHQ7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qXHJcbiAgICAqICAvL+eci+WuouS/oeaBr1xyXG4gICAgIHR5cGUgV0FUQ0hFUl9UIHN0cnVjdCB7XHJcbiAgICAgVWlkICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuICAgICBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgICBIZWFkVXJsIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuICAgICB9XHJcbiAgICAqICovXHJcbiAgICByZWZyZXNoV2F0Y2hlcnMgOiBmdW5jdGlvbih3YXRjaGVycywgdG90YWxIZWlnaHQpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwiQnVsbGZpZ2h0X1BsYXllckxpc3QucmVmcmVzaFdhdGNoZXJzLHRvdGFsSGVpZ2h0ID0gXCIgKyB0b3RhbEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5XYXRjaGVyVGl0bGUucG9zaXRpb24gPSAoY2MucCh0aGlzLldhdGNoZXJUaXRsZS5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XYXRjaGVyVGl0bGUucG9zaXRpb24ueSAtIHRvdGFsSGVpZ2h0KSk7XHJcbiAgICAgICAgdGhpcy5XYXRjaGVyVGl0bGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLldhdGNoZXJDb3VudC5zdHJpbmcgPSB3YXRjaGVycy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHZhciB3YXRjaGVySGVpZ2h0ID0gMDtcclxuICAgICAgICBmb3IodmFyIGluZGV4ID0gMDt3YXRjaGVycyAmJiBpbmRleCA8IHdhdGNoZXJzLmxlbmd0aDtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlRvdXJpc3RDZWxsKTtcclxuICAgICAgICAgICAgd2F0Y2hlckhlaWdodCA9IGl0ZW0uZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBpdGVtLnNldFBvc2l0aW9uKGNjLnAoaXRlbS5nZXRDb250ZW50U2l6ZSgpLndpZHRoLzIgKyAoaW5kZXglMykqaXRlbS5nZXRDb250ZW50U2l6ZSgpLndpZHRoXHJcbiAgICAgICAgICAgICAgICAtIHRoaXMuU2Nyb2xsQWN0b3JzLmNvbnRlbnQuZ2V0Q29udGVudFNpemUodHJ1ZSkud2lkdGgvMixcclxuICAgICAgICAgICAgICAgIC0gdG90YWxIZWlnaHQgIC0gaXRlbS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCAqIHBhcnNlSW50KGluZGV4LzMpIC0gaXRlbS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodC8yXHJcbiAgICAgICAgICAgICAgICAtICh0aGlzLldhdGNoZXJUaXRsZS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCArIDUpKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLlNjcm9sbEFjdG9ycy5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICBpdGVtLmdldENvbXBvbmVudChcIkJ1bGxmaWdodF9Ub3VyaXN0XCIpLnVwZGF0ZUluZm8od2F0Y2hlcnNbaW5kZXhdLmhlYWR1cmwsIHdhdGNoZXJzW2luZGV4XS5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvdGFsSGVpZ2h0ICs9IHRoaXMuV2F0Y2hlclRpdGxlLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgIGlmICh3YXRjaGVycykge1xyXG4gICAgICAgICAgICB0b3RhbEhlaWdodCArPSAod2F0Y2hlcnMubGVuZ3RoICsgMSkgKiB3YXRjaGVySGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWxIZWlnaHQ7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRUYWJsZUluZm8gOiBmdW5jdGlvbiAodGltZSxyb3VuZE51bSkge1xyXG5cclxuICAgICAgICB0aGlzLlJvdW5kTnVtLnN0cmluZyA9IFwi56ysXCIgKyByb3VuZE51bSArIFwi5omLXCI7XHJcbiAgICAgICAgdGhpcy50aW1lTGFiZWwuc3RyaW5nID0gdGhpcy5nZXRUaW1lKHRpbWUpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZ2V0VGltZSA6IGZ1bmN0aW9uICh2VGltZSkge1xyXG4gICAgICAgIHZhciB0aW1lICAgPSBOdW1iZXIodlRpbWUpO1xyXG4gICAgICAgIHZhciBob3VyICAgPSBwYXJzZUludCh0aW1lLzYwLzYwKTtcclxuICAgICAgICB2YXIgbWluICAgID0gcGFyc2VJbnQoKHRpbWUgLSAzNjAwKmhvdXIpLzYwKTtcclxuICAgICAgICB2YXIgc2Vjb25kID0gdGltZSAtIDM2MDAqaG91ciAtIDYwKm1pbjtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiZ2V0VGltZSBob3VyPVwiLCBob3VyLCBcIiBtaW49XCIsIG1pbiwgXCIgc2Vjb25kPVwiLCBzZWNvbmQpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaW1lRGF0YShob3VyKSArIFwiOlwiICsgdGhpcy5nZXRUaW1lRGF0YShtaW4pICsgXCI6XCIgKyB0aGlzLmdldFRpbWVEYXRhKHNlY29uZCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBnZXRUaW1lRGF0YSA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIChBcnJheSgyKS5qb2luKDApK3RpbWUpLnNsaWNlKC0yKTtcclxuICAgIH0sXHJcblxyXG4gICAgcnVuSW4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5iZy5ydW5BY3Rpb24oY2MubW92ZUJ5KDAuNCxjYy5wKHRoaXMuYmcuZ2V0Q29udGVudFNpemUoKS53aWR0aCwwKSkpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzUuXHJcbiAqL1xyXG5cclxuLypcclxuKiAvL+WHhuWkh+a4uOaIjyAoU0JGX1JFUV9SRUFEWV9DTURfSUQpXHJcbiB0eXBlIFNCRl9SRVFfUkVBRFlfVCBzdHJ1Y3Qge1xyXG4gR2FtZUhlYWRcclxuIH1cclxuICovXHJcblxyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5mdW5jdGlvbiBCdWxsZmlnaHRfUmVhZHlSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfUkVBRFlfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBCdWxsZmlnaHRfUmVhZHlSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvNS5cclxuICovXHJcblxyXG4vKlxyXG4qIHR5cGUgU0JGX1JFU1BfUkVBRFlfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBTZWF0SWQgIGludCAgICBganNvbjpcInNlYXRpZFwiYFxyXG4gVWlkICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuIFVTdGF0dXMgaW50ICAgIGBqc29uOlwidXN0YXR1c1wiYFxyXG4gVGFibGVJZCBpbnQgICAgYGpzb246XCJ0YWJsZWlkXCJgXHJcbiBUU3RhdHVzIGludCAgICBganNvbjpcInRzdGF0dXNcImBcclxuIH1cclxuKiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKCdNZXNzYWdlUmVzcCcpO1xyXG52YXIgQ21kX0J1bGxmaWdodCA9IHJlcXVpcmUoJ0NtZF9CdWxsZmlnaHQnKTtcclxuZnVuY3Rpb24gQnVsbGZpZ2h0X1JlYWR5UmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX1JFQURZX0NNRF9JRDtcclxuICAgIHRoaXMuc2VhdGlkICAgPSAtMTtcclxuICAgIHRoaXMucmVhZHl1aWQgPSAwO1xyXG4gICAgdGhpcy51c3RhdHVzICA9IDA7XHJcbiAgICB0aGlzLnRhYmxlaWQgID0gMDtcclxuICAgIHRoaXMudHN0YXR1cyAgPSAwO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnNlYXRpZCAgID0gbXNnLnNlYXRpZDtcclxuICAgICAgICB0aGlzLnJlYWR5dWlkID0gbXNnLnJlYWR5dWlkO1xyXG4gICAgICAgIHRoaXMudXN0YXR1cyAgPSBtc2cudXN0YXR1cztcclxuICAgICAgICB0aGlzLnRhYmxlaWQgID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzICA9IG1zZy50c3RhdHVzO1xyXG4gICAgICAgIC8vR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJ1bGxmaWdodF9SZWFkeVJlc3BQYWNrZXQ7IiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gICA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgUm9vbUluZm8gOiBbY2MuTGFiZWxdLFxyXG4gICAgICAgIFJvb21NdWx0IDogW2NjLkxhYmVsXSxcclxuICAgICAgICBSb290Tm9kZSA6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgY2MubG9nKFwic3RvcCBldmVudFwiKTtcclxuICAgICAgICAgICAgc2VsZi5kaXNtaXNzKCk7XHJcbiAgICAgICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJ1bkluKCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBydW5JbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmJnLnJ1bkFjdGlvbihjYy5tb3ZlQnkoMC40LGNjLnAodGhpcy5iZy5nZXRDb250ZW50U2l6ZSgpLndpZHRoLDApKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFJvb21JbmZvIDogZnVuY3Rpb24odGFibGVSdWxlSW5mbylcclxuICAgIHtcclxuICAgICAgICBpZih0YWJsZVJ1bGVJbmZvLmdhbWV0eXBlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlJvb21JbmZvWzFdLnN0cmluZyA9IFwi6Zet54mM5oqi5bqEXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuUm9vbUluZm9bMV0uc3RyaW5nID0gXCLkuInlvKDmiqLluoRcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuUm9vbUluZm9bMl0uc3RyaW5nID0gdGFibGVSdWxlSW5mby5taW5hbnRlO1xyXG4gICAgICAgIGlmKHRhYmxlUnVsZUluZm8ubGl2ZXRpbWUgPCAxODAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Sb29tSW5mb1szXS5zdHJpbmcgPSB0YWJsZVJ1bGVJbmZvLmxpdmV0aW1lLzYwICsgXCLliIbpkp9cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Sb29tSW5mb1szXS5zdHJpbmcgPSB0YWJsZVJ1bGVJbmZvLmxpdmV0aW1lLzM2MDAgKyBcIuWwj+aXtlwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5Sb29tSW5mb1s0XS5zdHJpbmcgPSB0YWJsZVJ1bGVJbmZvLnNlYXRzO1xyXG5cclxuICAgICAgICBmb3IodmFyIGluZGV4ID0gMDtpbmRleCA8IHRoaXMuUm9vbU11bHQubGVuZ3RoO2luZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlJvb21NdWx0W2luZGV4XS5zdHJpbmcgPSB0YWJsZVJ1bGVJbmZvLmJ1bGxtdWxbaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lU3lzdGVtICAgPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJzdG9wIGV2ZW50XCIpO1xyXG4gICAgICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgICAgICBzZWxmLmRpc21pc3MoKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMucnVuSW4oKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG5cclxuICAgIHJ1bkluIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyh0aGlzLmJnLmdldENvbnRlbnRTaXplKCkud2lkdGgpO1xyXG4gICAgICAgIHRoaXMuYmcucnVuQWN0aW9uKGNjLm1vdmVCeSgwLjQsY2MucCh0aGlzLmJnLmdldENvbnRlbnRTaXplKCkud2lkdGgsMCkpKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8yLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBDbWRfQnVsbGZpZ2h0ID0gcmVxdWlyZSgnQ21kX0J1bGxmaWdodCcpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9UYWJsZURldGFpbFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IENtZF9CdWxsZmlnaHQuVVNfUkVRX1RBQkxFX0RFVEFJTF9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBnYW1lc3ZjaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkLFxyXG4gICAgICAgICAgICB0YWJsZWlkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnRhYmxlaWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzIuXHJcbiAqL1xyXG5cclxuLypcclxuKlxyXG4qIC/moYzlrZDor6bmg4VcclxuIHR5cGUgVVNfUkVTUF9UQUJMRV9ERVRBSUxfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBzdHJpbmcgYGpzb246XCJwYXJhbVwiYCAvL2Jhc2U2NFxyXG4gfVxyXG4gdHlwZSBERVRBSUxfU0VBVEVSX1Qgc3RydWN0IHtcclxuIFVpZCAgICAgICAgICAgIHVpbnQzMiAgIGBqc29uOlwidWlkXCJgXHJcbiBOYW1lICAgICAgICAgICBzdHJpbmcgICBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgICAgICAgIHN0cmluZyAgIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gU2V4ICAgICAgICAgICAgaW50ICAgICAgYGpzb246XCJzZXhcImBcclxuIEdvbGQgICAgICAgICAgIGludCAgICAgIGBqc29uOlwiZ29sZFwiYFxyXG4gRGlhbW9uZCAgICAgICAgaW50ICAgICAgYGpzb246XCJkaWFtb25kXCJgXHJcbiBDb2luICAgICAgICAgICBpbnQgICAgICBganNvbjpcImNvaW5cImAgICAgICAvL+eOsOWcqOi6q+S4iuW4puWFpeeahOmHkeW4gVxyXG4gVG90YWxDYXJyeUNvaW4gaW50ICAgICAgYGpzb246XCJ0b3RhbFwiYCAgICAgLy/mgLvluKblhaXph5HluIFcclxuIFdpbkNvaW4gICAgICAgIGludCAgICAgIGBqc29uOlwid2luXCJgICAgICAgIC8v6L6T6LWi5aSa5bCR6YeR5biBXHJcbiBTZWF0SWQgICAgICAgICBpbnQ4ICAgICBganNvbjpcInNlYXRpZFwiYCAgICAvL+W6p+S9jWlkXHJcbiBTdGF0dXMgICAgICAgICBpbnQgICAgICBganNvbjpcInN0YXR1c1wiYCAgICAvL+ahjOS4iueOqeWutueKtuaAgVxyXG4gQ2FsbFR5cGUgICAgICAgaW50OCAgICAgYGpzb246XCJjYWxsdHlwZVwiYCAgLy/miqLluoTnsbvlnotcclxuIE1heEJldE11bCAgICAgIGludCAgICAgIGBqc29uOlwibWF4YmV0bXVsXCJgIC8v5pyA5aSn5LiL5rOo5YCN5pWwXHJcbiBCZXRNdWwgICAgICAgICBpbnQgICAgICBganNvbjpcImJldG11bFwiYCAgICAvL+S4i+azqOWAjeaVsFxyXG4gQmhhdmVDYXJkICAgICAgYm9vbCAgICAgYGpzb246XCJiaGF2ZWNhcmRcImAgLy/mmK/lkKbmnInniYxcclxuIEJvcGVuQ2FyZCAgICAgIGJvb2wgICAgIGBqc29uOlwiYm9wZW5jYXJkXCJgIC8v5piv5ZCm5byA54mMXHJcbiBDYXJkcyAgICAgICAgICBbXXVpbnQxNiBganNvbjpcImNhcmRzXCJgICAgICAvL+eJjOaVsOaNrlxyXG4gQnVsbFR5cGUgICAgICAgaW50ICAgICAgYGpzb246OmJ1bGx0eXBlOmAgIC8v54mb54mb57G75Z6LXHJcbiBGaW5hbENvaW4gICAgICBpbnQgICAgICBganNvbjpcImZpbmFsY29pblwiYCAvL+i/meS4gOWxgOi+k+i1oue7k+aenFxyXG4gfVxyXG5cclxuIC8v6L+b5YWl5qGM5a2Q6L+U5ZueXHJcbiB0eXBlIFNCRl9ERVRBSUxfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gVGFibGVJZCAgICBpbnQzMiAgICAgICAgICAgICBganNvbjpcInRhYmxlaWRcImAgICAgLy/moYzlrZBJRFxyXG4gVGFibGVOYW1lICBzdHJpbmcgICAgICAgICAgICBganNvbjpcIm5hbWVcImAgICAgICAgLy/moYzlrZDlkI3np7BcclxuIEdhbWVUeXBlICAgaW50MzIgICAgICAgICAgICAgYGpzb246XCJnYW1ldHlwZVwiYCAgIC8v5qGM5a2Q57G75Z6LKOmXreeJjOaKouW6hCzlm5vlvKDmiqLluoQpXHJcbiBNaW5BbnRlICAgIGludCAgICAgICAgICAgICAgIGBqc29uOlwibWluYW50ZVwiYCAgICAvL+acgOWwj+S4i+azqFxyXG4gTWluQ2FycnkgICBpbnQgICAgICAgICAgICAgICBganNvbjpcIm1pbmNhcnJ5XCJgICAgLy/mnIDlsI/luKblhaVcclxuIExpdmVUaW1lICAgaW50NjQgICAgICAgICAgICAgYGpzb246XCJsaXZldGltZVwiYCAgIC8v5qGM5a2Q5oC75pe26Ze0XHJcbiBSZW1haW5UaW1lIGludDY0ICAgICAgICAgICAgIGBqc29uOlwicmVtYWludGltZVwiYCAvL+WJqeS9meaXtumXtFxyXG4gQnN0YXJ0ICAgICBpbnQ4ICAgICAgICAgICAgICBganNvbjpcImJzdGFydFwiYCAgICAgLy/moYzlrZDmmK/lkKblvIDlp4tcclxuIFNlYXRzICAgICAgaW50ICAgICAgICAgICAgICAgYGpzb246XCJzZWF0c1wiYCAgICAgIC8v5bqn5L2N5pWwXHJcbiBCdWxsTXVsICAgIFtdaW50MzIgICAgICAgICAgIGBqc29uOlwiYnVsbG11bFwiYCAgICAvL+WAjeeOh1xyXG4gQm93bmVyICAgICBpbnQ4ICAgICAgICAgICAgICBganNvbjpcImJvd25lclwiYCAgICAgLy/mmK/lkKbmmK/moYzkuLtcclxuIEJzaXRkb3duICAgaW50OCAgICAgICAgICAgICAgYGpzb246XCJic2l0ZG93blwiYCAgIC8v5piv5ZCm5YWl5bqnXHJcbiBUc3RhdHVzICAgIGludCAgICAgICAgICAgICAgIGBqc29uOlwidHN0YXR1c1wiYCAgICAvL+ahjOWtkOeKtuaAgVxyXG4gVGltZW91dCAgICBpbnQgICAgICAgICAgICAgICBganNvbjpcInRpbWVvdXRcImAgICAgLy/moYzlrZDlpITkuo7mn5DkuKrnirbmgIHkuIvnmoTliankvZnml7bpl7RcclxuIFJvdW5kTnVtICAgaW50ICAgICAgICAgICAgICAgYGpzb246XCJyb3VuZG51bVwiYCAgIC8v5b2T5YmN56ys5Yeg5omL54mMXHJcbiBCYW5rZXJVaWQgIHVpbnQzMiAgICAgICAgICAgIGBqc29uOlwiYmFua2VydWlkXCJgICAvL+W6hOWutlVJRFxyXG4gU2VhdGVycyAgICBbXURFVEFJTF9TRUFURVJfVCBganNvbjpcInNlYXRlcnNcImAgICAgLy/moYzkvY3kuIrnmoTnjqnlrrbkv6Hmga9cclxuIH1cclxuKiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbmZ1bmN0aW9uIEJ1bGxmaWdodF9UYWJsZURldGFpbFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gQ21kX0J1bGxmaWdodC5VU19SRVNQX1RBQkxFX0RFVEFJTF9DTURfSUQ7XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNjLmxvZyhcIkJ1bGxmaWdodF9UYWJsZURldGFpbFJlc3BQYWNrZXQscGFyYW0gPSBcIiArIEJBU0U2NC5kZWNvZGVyKG1zZy5wYXJhbSkpO1xyXG4gICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShCQVNFNjQuZGVjb2Rlcihtc2cucGFyYW0pKTtcclxuICAgICAgICB0aGlzLnByaXZhdGVpZCAgPSBqc29uLnByaXZhdGVpZDtcclxuICAgICAgICB0aGlzLnRhYmxlaWQgICAgPSBqc29uLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy5uYW1lICAgICAgID0ganNvbi5uYW1lO1xyXG4gICAgICAgIHRoaXMuZ2FtZXR5cGUgICA9IGpzb24uZ2FtZXR5cGU7XHJcbiAgICAgICAgdGhpcy5jYXJyeWNvaW4gID0ganNvbi5jYXJyeWNvaW47XHJcbiAgICAgICAgdGhpcy5taW5hbnRlICAgID0ganNvbi5taW5hbnRlO1xyXG4gICAgICAgIHRoaXMubWluY2FycnkgICA9IGpzb24ubWluY2Fycnk7XHJcbiAgICAgICAgdGhpcy5tYXhjYXJyeSAgID0ganNvbi5tYXhjYXJyeTtcclxuICAgICAgICB0aGlzLmxpdmV0aW1lICAgPSBqc29uLmxpdmV0aW1lO1xyXG4gICAgICAgIHRoaXMucmVtYWludGltZSA9IGpzb24ucmVtYWludGltZTtcclxuICAgICAgICB0aGlzLmJzdGFydCAgICAgPSBqc29uLmJzdGFydDtcclxuICAgICAgICB0aGlzLnNlYXRzICAgICAgPSBqc29uLnNlYXRzO1xyXG4gICAgICAgIHRoaXMuYnVsbG11bCAgICA9IGpzb24uYnVsbG11bDtcclxuICAgICAgICB0aGlzLmJvd25lciAgICAgPSBqc29uLmJvd25lcjtcclxuICAgICAgICB0aGlzLmJzaXRkb3duICAgPSBqc29uLmJzaXRkb3duO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyAgICA9IGpzb24udHN0YXR1cztcclxuICAgICAgICB0aGlzLnRpbWVvdXQgICAgPSBqc29uLnRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5yb3VuZG51bSAgID0ganNvbi5yb3VuZG51bTtcclxuICAgICAgICB0aGlzLmJhbmtlcnVpZCAgPSBqc29uLmJhbmtlcnVpZDtcclxuICAgICAgICB0aGlzLnNlYXRlcnMgICAgPSBqc29uLnNlYXRlcnM7XHJcbiAgICAgICAgdGhpcy50b3RhbGNhcnJ5ID0ganNvbi50b3RhbGNhcnJ5O1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEJ1bGxmaWdodF9UYWJsZURldGFpbFJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgbGl4aWFvZmVpIG9uIDE3LzYvNC5cclxuICovXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgSW5mb0xhYmVsIDogW2NjLkxhYmVsXSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVBsYXllclNjb3JlQ2VsbDogZnVuY3Rpb24gKHRleHQxLHRleHQyLHRleHQzLCBzaXplKSB7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMF0uc3RyaW5nID0gdGV4dDE7XHJcbiAgICAgICAgdGhpcy5JbmZvTGFiZWxbMV0uc3RyaW5nID0gdGV4dDI7XHJcblxyXG5cclxuICAgICAgICB2YXIgd2luQ29pbiA9IE51bWJlcih0ZXh0Myk7XHJcbiAgICAgICAgaWYgKHdpbkNvaW4gPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbMl0uc3RyaW5nID0gXCIrXCIgKyB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFsyXS5ub2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2luQ29pbiA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzJdLnN0cmluZyAgICAgPSB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkluZm9MYWJlbFsyXS5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbMl0uc3RyaW5nICAgICA9IHdpbkNvaW47XHJcbiAgICAgICAgICAgIHRoaXMuSW5mb0xhYmVsWzJdLm5vZGUuY29sb3IgPSBjYy5Db2xvci5HUkVFTjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuSW5mb0xhYmVsWzNdLnN0cmluZyAgICAgPSBOdW1iZXIodGV4dDIpICsgIE51bWJlcih0ZXh0Myk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDM7IGkgKyspIHtcclxuICAgICAgICAgICAgdGhpcy5JbmZvTGFiZWxbaV0uZm9udFNpemUgPSBzaXplO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pOyIsInZhciBCdWxsZmlnaHRfUGxheWVyQ2VsbCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9QbGF5ZXJDZWxsJyk7XHJcbnZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG52YXIgR2FtZVN5c3RlbSAgID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgICAgICBMYWJlbFRpdGxlOiBjYy5MYWJlbCxcclxuICAgICAgICBMYWJlbENvaW4gOiBjYy5MYWJlbCxcclxuICAgICAgICBMYWJlbFJvdW5kbnVtIDogY2MuTGFiZWwsXHJcbiAgICAgICAgTGFiZWx3aW5NYXggOiBjYy5MYWJlbCxcclxuICAgICAgICBMYWJlbGFsbENhcnJ5IDogY2MuTGFiZWwsXHJcbiAgICAgICAgc2Nyb2xsVmlldyA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgUGxheWVyQ2VsbCA6IGNjLlByZWZhYixcclxuICAgICAgICBIZWFkIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIEJ0blNoYXJlIDogY2MuTm9kZSxcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0QmFzZURhdGEoKTtcclxuICAgICAgICAvL3RoaXMuc2V0R2FtZURhdGEoKTtcclxuICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzID09IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXNUeXBlLlZFUlNJT05fVFlQRV9BVURJVClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU2hhcmUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgaW5pdEJhc2VEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29pbiA9IDA7XHJcbiAgICAgICAgdGhpcy5yb3VuZG51bSA9IDA7XHJcbiAgICAgICAgdGhpcy53aW5NYXggPSAwO1xyXG4gICAgICAgIHRoaXMuYWxsQ2FycnkgPSAwO1xyXG4gICAgICAgIHRoaXMucm9vbUlkID0gMDtcclxuICAgICAgICB0aGlzLlNoYXJlSW1hZ2VQYXRoID0gXCJcIjtcclxuICAgICAgICB0aGlzLkNhbnZhcyA9IG51bGw7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuQ2xvc2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0hhbGxTY2VuZScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsQmFja0J0blNoYXJlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICBwb3BWaWV3IDogXCJCdWxsZmlnaHRfVG90YWxSZXN1bHRcIixcclxuICAgICAgICAgICAgYnRuIDogXCJCdG5TaGFyZVwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRyxkYXRhOm1lc3NhZ2V9KSA7XHJcblxyXG4gICAgICAgIC8vIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAvLyB0aGlzLlNoYXJlSW1hZ2VQYXRoID0gVXRpbFRvb2wuY2FwdHVyZVNjcmVlbihcIlRvdGFsUmVzdWx0LnBuZ1wiLHRoaXMuQ2FudmFzLGZ1bmN0aW9uKGZpbGVQYXRoKXtcclxuICAgICAgICAvLyAgICAgdmFyIHNoYXJlVmlldyA9IGNjLmluc3RhbnRpYXRlKHNlbGYuU2hhcmVWaWV3KTtcclxuICAgICAgICAvLyAgICAgc2VsZi5ub2RlLmFkZENoaWxkKHNoYXJlVmlldyk7XHJcbiAgICAgICAgLy8gICAgIHNoYXJlVmlldy5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIC8vICAgICB2YXIgc3RyaW5nID0gXCLmuLjmiI/nu5PnrpfliIbkuqtcIjtcclxuICAgICAgICAvLyAgICAgc2hhcmVWaWV3LmdldENvbXBvbmVudChcIlNoYXJlVmlld1wiKS5zZXRTaGFyZVR5ZXAoU2hhcmVUeXBlLkVfU0hBUkVUWVBFX0lNQUdFLGZpbGVQYXRoLFwid3d3LmJhaWR1LmNvbVwiKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAgVWlkICAgICAgICBpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gICAgIENvaW4gICAgICAgaW50NjQgYGpzb246XCJjb2luXCJgXHJcbiAgICAgUGxheU51bSAgICBpbnQgICBganNvbjpcInBsYXludW1cImBcclxuICAgICBNYXhXaW4gICAgIGludCAgIGBqc29uOlwibWF4d2luXCJgXHJcbiAgICAgVG90YWxDYXJyeSBpbnQ2NCBganNvbjpcInRvdGFsY2FycnlcImBcclxuICAgICAqICovXHJcbiAgICBzZXRHYW1lRGF0YSA6IGZ1bmN0aW9uIChtc2csIGNhbnZhcykge1xyXG4gICAgICAgIHRoaXMuQ2FudmFzID0gY2FudmFzO1xyXG5cclxuICAgICAgICB0aGlzLkxhYmVsVGl0bGUuc3RyaW5nID0gXCLmgLvnu5PnrpcoXCIgKyBtc2cucHJpdmF0ZWlkICsgXCIpXCI7XHJcbiAgICAgICAgdmFyIHNjb3JlcyA9IG1zZy5TY29yZXM7XHJcbiAgICAgICAgdmFyIGNlbGxoZWlnaHQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDtpbmRleCA8IHNjb3Jlcy5sZW5ndGg7aW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUodGhpcy5QbGF5ZXJDZWxsKTtcclxuICAgICAgICAgICAgaXRlbS5zZXRQb3NpdGlvbihjYy5wKDAsLWluZGV4Kml0ZW0uZ2V0Q29udGVudFNpemUoKS5oZWlnaHQgLSBpdGVtLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0LzIpKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2NvcmVzW2luZGV4XS51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2luICAgICA9IHNjb3Jlc1tpbmRleF0ud2luY29pbjtcclxuICAgICAgICAgICAgICAgIHRoaXMucm91bmRudW0gPSBzY29yZXNbaW5kZXhdLnBsYXludW07XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbk1heCAgID0gc2NvcmVzW2luZGV4XS5tYXh3aW47XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbENhcnJ5ID0gc2NvcmVzW2luZGV4XS50b3RhbGNhcnJ5O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjZWxsaGVpZ2h0ID0gaXRlbS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodDtcclxuICAgICAgICAgICAgaXRlbS5nZXRDb21wb25lbnQoXCJCdWxsZmlnaHRfVG90YWxSZXN1bHRDZWxsXCIpLnVwZGF0ZVBsYXllclNjb3JlQ2VsbChzY29yZXNbaW5kZXhdLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBzY29yZXNbaW5kZXhdLnRvdGFsY2FycnksIHNjb3Jlc1tpbmRleF0ud2luY29pbiwgNTApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc2NvcmVzLmxlbmd0aCpjZWxsaGVpZ2h0ID4gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0ID0gc2NvcmVzLmxlbmd0aCpjZWxsaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZU15U2VsZkluZm8oKTtcclxuXHJcbiAgICAgICAgLy90aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgxLjApLGNjLmNhbGxGdW5jKHRoaXMuU2hvb3RTY3JlZW4sdGhpcykpKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZU15U2VsZkluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHdpbkNvaW4gPSBOdW1iZXIodGhpcy5jb2luKTtcclxuICAgICAgICBpZiAod2luQ29pbiA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkxhYmVsQ29pbi5zdHJpbmcgID0gXCIrXCIgKyB3aW5Db2luO1xyXG4gICAgICAgICAgICB0aGlzLkxhYmVsQ29pbi5ub2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh3aW5Db2luID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5MYWJlbENvaW4uc3RyaW5nICAgICA9IHdpbkNvaW47XHJcbiAgICAgICAgICAgIHRoaXMuTGFiZWxDb2luLm5vZGUuY29sb3IgPSBuZXcgY2MuQ29sb3IoMjA0LCAxNjAsIDQxLCAyNTUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkxhYmVsQ29pbi5zdHJpbmcgICAgID0gd2luQ29pbjtcclxuICAgICAgICAgICAgdGhpcy5MYWJlbENvaW4ubm9kZS5jb2xvciA9IGNjLkNvbG9yLkdSRUVOO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLkxhYmVsUm91bmRudW0uc3RyaW5nID0gdGhpcy5yb3VuZG51bTtcclxuICAgICAgICB0aGlzLkxhYmVsd2luTWF4LnN0cmluZyA9IHRoaXMud2luTWF4O1xyXG4gICAgICAgIHRoaXMuTGFiZWxhbGxDYXJyeS5zdHJpbmcgPSB0aGlzLmFsbENhcnJ5O1xyXG4gICAgICAgIFVwZGF0ZVdYSGVhZEljb24oR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmhlYWR1cmwsdGhpcy5IZWFkKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIEhlYWQgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgTmFtZSA6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuICAgIFxyXG4gICAgdXBkYXRlSW5mbyA6IGZ1bmN0aW9uICh1cmwsbmFtZSkge1xyXG4gICAgICAgIGlmKHVybCAhPSBcIlwiKVxyXG4gICAgICAgICAgICBVcGRhdGVXWEhlYWRJY29uKHVybCwgdGhpcy5IZWFkKTtcclxuICAgICAgICB0aGlzLk5hbWUuc3RyaW5nID0gbmFtZTtcclxuICAgICAgICB0aGlzLk5hbWUuZm9udHNpemUgPSA0MDtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCAgICAgICAgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNdXNpY01nciAgICAgICA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gICA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgR2FtZVBsYXllciAgICAgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtICAgICA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxudmFyIFRvYXN0VmlldyAgICAgID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBOaWNrTmFtZSAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUGxheWVyVWlkICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEdvbGQgICAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBEaWFtb25kICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgVGFibGVDb3VudCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFJvdW5kQ291bnQgOiBjYy5MYWJlbCxcclxuICAgICAgICBHaWZ0Q29zdCAgIDogW2NjLkxhYmVsXSxcclxuICAgICAgICBTZXhTcHJpdGUgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIEhlYWQgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgU2V4RnJhbWUgICA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnBsYXllciA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFBsYXllckluZm8gOiBmdW5jdGlvbiAocGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5OaWNrTmFtZS5zdHJpbmcgICA9IHBsYXllci5uYW1lO1xyXG4gICAgICAgIHRoaXMuUGxheWVyVWlkLnN0cmluZyAgPSBwbGF5ZXIudWlkO1xyXG4gICAgICAgIHRoaXMuR29sZC5zdHJpbmcgICAgICAgPSBwbGF5ZXIuZ29sZDtcclxuICAgICAgICB0aGlzLkRpYW1vbmQuc3RyaW5nICAgID0gcGxheWVyLmRpYW1vbmQ7XHJcbiAgICAgICAgdGhpcy5Sb3VuZENvdW50LnN0cmluZyA9IHBsYXllci5Ub3RhbFJvdW5kOyAvL+aAu+aJi+aVsFxyXG4gICAgICAgIHRoaXMuVGFibGVDb3VudC5zdHJpbmcgPSBwbGF5ZXIuVG90YWxUYWJsZTsgLy/mgLvlsYDmlbBcclxuICAgICAgICBVcGRhdGVXWEhlYWRJY29uKHBsYXllci5oZWFkdXJsLHRoaXMuSGVhZCk7XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIm9uU2l0RG93biBwbGF5ZXIuVG90YWxSb3VuZD1cIiwgcGxheWVyLlRvdGFsUm91bmQsIFwiIHBsYXllci5Ub3RhbFRhYmxlPVwiLCBwbGF5ZXIuVG90YWxUYWJsZSlcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpIDwgdGhpcy5HaWZ0Q29zdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLkdpZnRDb3N0W2ldLnN0cmluZyA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5naWZ0Q29zdFtpXS5Hb2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2V4ID0gKHBsYXllci5zZXggLSAxID4gMCkgPyAocGxheWVyLnNleCAtIDEpIDogMDtcclxuICAgICAgICB0aGlzLlNleFNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuU2V4RnJhbWVbc2V4XTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbihldmVudCAsQ3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBpZihCdG5OYW1lID09IFwiQnRuQ2xvc2VcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnNlYXRpZCA9PSAtMSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmgqjmsqHmnInlnZDkuIvkuI3og73lj5HpgIHnpLznialcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB0b3VpZCA6IHRoaXMucGxheWVyLnVpZCxcclxuICAgICAgICAgICAgICAgIGtpbmQgOiBDaGF0VHlwZS5FX0NIQVRfR0lGVF9LSU5ELFxyXG4gICAgICAgICAgICAgICAgdHlwZSA6IE51bWJlcihDdXN0b21FdmVudERhdGEpLFxyXG4gICAgICAgICAgICAgICAgdGV4dCA6IFwiXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoVVNfUkVRX0dBTUVfQ0hBVF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSxcclxufSk7XHJcbiIsIi8vdmFyIEF1ZGlvTWFuYWdlciA9IHJlcXVpcmUoJ0F1ZGlvTWFuYWdlcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcHJlc3NlZFNjYWxlOiAwLjksXHJcbiAgICAgICAgdHJhbnNEdXJhdGlvbjogMC4wNSxcclxuXHJcbiAgICAgICAgcGxheUNvbHNlRWZmZWN0OiAgZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubV90bUxhc3RDbGlja2VkID0gMDtcclxuICAgICAgICB0aGlzLm1fRGVsYXlJbnRlcmFjdGFibGUgPSBmYWxzZTsgLy/lu7bml7bkuI3lj6/ngrnlh7tcclxuICAgICAgICB0aGlzLmNvdW50VGltZSA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMucHJlc3NlZFNjYWxlID0gMC45O1xyXG4gICAgICAgIHRoaXMudHJhbnNEdXJhdGlvbiA9IDAuMDMgO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5pbml0U2NhbGUgPSB0aGlzLm5vZGUuc2NhbGU7XHJcbiAgICAgICAgc2VsZi5idXR0b24gPSBzZWxmLmdldENvbXBvbmVudChjYy5CdXR0b24pO1xyXG4gICAgICAgIHNlbGYuc2NhbGVEb3duQWN0aW9uID0gY2Muc2NhbGVUbyhzZWxmLnRyYW5zRHVyYXRpb24sIHNlbGYucHJlc3NlZFNjYWxlKTtcclxuICAgICAgICBzZWxmLnNjYWxlVXBBY3Rpb24gPSBjYy5zY2FsZVRvKHNlbGYudHJhbnNEdXJhdGlvbiwgc2VsZi5pbml0U2NhbGUpO1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uVG91Y2hEb3duIChldmVudCkge1xyXG4gICAgICAgICAgICBpZighc2VsZi5idXR0b24uaW50ZXJhY3RhYmxlIHx8IHNlbGYubV9EZWxheUludGVyYWN0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5ydW5BY3Rpb24oc2VsZi5zY2FsZURvd25BY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYoc2VsZi5wbGF5Q29sc2VFZmZlY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vQXVkaW9NYW5hZ2VyLnBsYXlFZmZlY3QoXCJyZXNvdXJjZXMvY29tbW9uL211c2ljL2NsaWNrX2Nsb3NlLm1wM1wiKSA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL0F1ZGlvTWFuYWdlci5wbGF5RWZmZWN0KFwicmVzb3VyY2VzL2NvbW1vbi9tdXNpYy9jbGljay5tcDNcIikgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihzZWxmLmlzRGVsYXlIYW5kbGVFdmVudCgpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCItLS0tLS0tLS0tLS0tLS0taXNEZWxheUhhbmRsZUV2ZW50LS0tLS0tLVwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuYnV0dG9uLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tX0RlbGF5SW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBvblRvdWNoVXAgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKCFzZWxmLmJ1dHRvbi5pbnRlcmFjdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMucnVuQWN0aW9uKHNlbGYuc2NhbGVVcEFjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5vbigndG91Y2hzdGFydCcsIG9uVG91Y2hEb3duLCB0aGlzLm5vZGUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5vbigndG91Y2hlbmQnLCBvblRvdWNoVXAsIHRoaXMubm9kZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKCd0b3VjaGNhbmNlbCcsIG9uVG91Y2hVcCwgdGhpcy5ub2RlKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcbiAgICAgICAgaWYodGhpcy5tX0RlbGF5SW50ZXJhY3RhYmxlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudFRpbWUgKz0gZHQ7XHJcbiAgICAgICAgICAgIC8vIGNjLmxvZyhcIi0tLS0tLS0tLS0tbV9EZWxheUludGVyYWN0YWJsZS0tLS0tLS0tLS0tLVwiICsgdGhpcy5jb3VudFRpbWUpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmNvdW50VGltZSA+IDAuNSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b24uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubV9EZWxheUludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+W7tuaXtuWkhOeQhlxyXG4gICAgaXNEZWxheUhhbmRsZUV2ZW50OiBmdW5jdGlvbihpRGVsYXlTZWNvbmRzKSB7XHJcbiAgICAgICAgLy8x56eS6ZKf5Y+q6IO954K55Ye75LiA5qyhXHJcbiAgICAgICAgaWYoaURlbGF5U2Vjb25kcyA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpRGVsYXlTZWNvbmRzID0gNjAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdG1Ob3cgPSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2V0Q3VycmVudFN5c3RlbVRpbWUoKTtcclxuICAgICAgICBpZiAodG1Ob3cgLSB0aGlzLm1fdG1MYXN0Q2xpY2tlZCA8PSBpRGVsYXlTZWNvbmRzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubV90bUxhc3RDbGlja2VkID0gdG1Ob3c7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmZ1bmN0aW9uIENhcnJ5Q29pblJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfQ0FSUllfQ09JTl9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJDYXJyeUNvaW5SZXFQYWNrZXQuc2VuZFwiKTtcclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCxcclxuICAgICAgICAgICAgY29pbiA6IG1zZy5jb2luLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIENhcnJ5Q29pblJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8zLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gQ2FycnlDb2luUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9DQVJSWV9DT0lOX0NNRF9JRDtcclxuICAgIHRoaXMuY2Fycnl1aWQgID0gMDtcclxuICAgIHRoaXMuY29pbiAgICAgID0gMDtcclxuICAgIHRoaXMuY2Fycnljb2luID0gMDtcclxuICAgIHRoaXMuZ29sZCAgICAgID0gMDtcclxuICAgIHRoaXMuZGlhbW9uZCAgID0gMDtcclxuICAgIHRoaXMudXN0YXR1cyAgID0gMDtcclxuICAgIHRoaXMudHN0YXR1cyAgID0gMDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2FycnlDb2luUmVzcFBhY2tldC5vbk1lc3NzYWdlXCIpO1xyXG4gICAgICAgIC8ve1wiY21kXCI6NjU1MzYwOCxcInNlcVwiOjAsXCJ1aWRcIjoxMDAwNixcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJjYXJyeXVpZFwiOjEwMDA2LFwiY2Fycnljb2luXCI6MTAwfVxyXG4gICAgICAgIHRoaXMuc2VxICAgICAgID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCAgICAgICA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlICAgICAgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgICAgICA9IG1zZy5kZXNjO1xyXG4gICAgICAgIHRoaXMuY2Fycnl1aWQgID0gbXNnLmNhcnJ5dWlkO1xyXG4gICAgICAgIHRoaXMuY2Fycnljb2luID0gbXNnLmNhcnJ5Y29pbjtcclxuICAgICAgICB0aGlzLnVzdGF0dXMgICA9IG1zZy51c3RhdHVzO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyAgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy5jb2luICAgICAgPSBtc2cuY29pbjtcclxuICAgICAgICB0aGlzLmdvbGQgICAgICA9IG1zZy5nb2xkO1xyXG4gICAgICAgIHRoaXMuZGlhbW9uZCAgID0gbXNnLmRpYW1vbmQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDYXJyeUNvaW5SZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuLypcclxuKiBjb25zdCAoXHJcbiBFX0NIQVRfVEVYVF9NU0cgPSAxIC8v5piv5paH5pys6IGK5aSpXHJcbiBFX0NIQVRfR0lGVF9NU0cgICA9IDIgLy/mmK/ooajmg4VcclxuIClcclxuXHJcbiBjb25zdCAoXHJcbiBFX1JPU0VfR0lGVCAgICAgPSAxIC8v546r55GwXHJcbiBFX0xPVkVfR0lGVCAgICAgPSAyIC8v54ix5b+DXHJcbiBFX0ZPQU1fR0lGVCAgICAgPSAzIC8v5rOh5rKrXHJcbiBFX0JJR19ST1NFX0dJRlQgPSA0IC8v5aSn5py1546r55GwXHJcbiBFX0tFVENIVVBfR0lGVCAgPSA1IC8v55Wq6IyE6YWxXHJcbiApXHJcblxyXG4gVG9VaWQgdWludDMyIGBqc29uOlwidG91aWRcImBcclxuIEtpbmQgIGludCAgICBganNvbjpcImtpbmRcImBcclxuIFR5cGUgIGludCAgICBganNvbjpcInR5cGVcImAgLy/lhbfkvZPmn5DkuKrnpLznialvcuafkOS4quihqOaDhSjlhbfkvZPooajmg4XntKLlvJXlrqLmiLfnq6/oh6rlrprkuYkpXHJcbiBUZXh0ICBzdHJpbmcgYGpzb246XCJ0ZXh0XCJgIC8v5paH5a2Xb3Lor63pn7PlhoXlrrlcclxuKiAqKi9cclxuXHJcbndpbmRvdy5DaGF0VHlwZSA9IGNjLkVudW0gKHtcclxuICAgIEVfQ0hBVF9XT1JEX0tJTkQgIDogMSwgLy/mloflrZdcclxuICAgIEVfQ0hBVF9HSUZUX0tJTkQgIDogMiwgLy/npLznialcclxuICAgIEVfQ0hBVF9GQUNFX0tJTkQgIDogMywgLy/ooajmg4VcclxuICAgIEVfQ0hBVF9WT0lDRV9LSU5EIDogNCwgLy/or63pn7NcclxufSk7XHJcblxyXG53aW5kb3cuR2lmdFR5cGUgPSBjYy5FbnVtICh7XHJcbiAgICBFX1JPU0VfR0lGVDogMSwgLy/njqvnkbBcclxuICAgIEVfTE9WRV9HSUZUOiAyLCAvL+eIseW/g1xyXG4gICAgRV9GT0FNX0dJRlQ6IDMsIC8v5rOh5rKrXHJcbiAgICBFX0JJR19ST1NFX0dJRlQ6IDQsIC8v5aSn5py1546r55GwXHJcbiAgICBFX0tFVENIVVBfR0lGVDogNSwgLy/nlarojITphbFcclxufSk7XHJcblxyXG5mdW5jdGlvbiBDaGF0UmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9HQU1FX0NIQVRfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2hhdFJlcVBhY2tldC5zZW5kXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG4gICAgICAgICAgICB0b3VpZCA6IG1zZy50b3VpZCxcclxuICAgICAgICAgICAga2luZCA6IG1zZy5raW5kLFxyXG4gICAgICAgICAgICB0eXBlIDogbXNnLnR5cGUsXHJcbiAgICAgICAgICAgIHRleHQgOiBtc2cudGV4dCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDaGF0UmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcbi8qXHJcbiogdHlwZSBVU19SRVNQX0dBTUVfQ0hBVF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIHJvbVVpZCAgICB1aW50MzIgYGpzb246XCJmcm9tdWlkXCJgXHJcbiBGcm9tU2VhdElkIGludCAgICBganNvbjpcImZyb21zZWF0aWRcImAgLy/lpoLmnpzkuI3mmK/lnKjmoYzkvY3kuIpcclxuIFRvVWlkICAgICAgdWludDMyIGBqc29uOlwidG91aWRcImBcclxuIFRvU2VhdElkICAgaW50ICAgIGBqc29uOlwidG9zZWF0aWRcImBcclxuIEtpbmQgICAgICAgaW50ICAgIGBqc29uOlwia2luZFwiYFxyXG4gVHlwZSAgICAgICBpbnQgICAgYGpzb246XCJ0eXBlXCJgIC8v5YW35L2T5p+Q5Liq56S854mpb3Lmn5DkuKrooajmg4VcclxuIFRleHQgICAgICAgc3RyaW5nIGBqc29uOlwidGV4dFwiYCAvL+aWh+Wtl29y6K+t6Z+z5YaF5a65XHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gQ2hhdFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfR0FNRV9DSEFUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZnJvbXVpZCA9IG1zZy5mcm9tdWlkO1xyXG4gICAgICAgIHRoaXMuZnJvbXNlYXRpZCA9IG1zZy5mcm9tc2VhdGlkO1xyXG4gICAgICAgIHRoaXMudG91aWQgPSBtc2cudG91aWQ7XHJcbiAgICAgICAgdGhpcy50b3NlYXRpZCA9IG1zZy50b3NlYXRpZDtcclxuICAgICAgICB0aGlzLmtpbmQgPSBtc2cua2luZDtcclxuICAgICAgICB0aGlzLnR5cGUgPSBtc2cudHlwZTtcclxuICAgICAgICB0aGlzLnRleHQgPSBtc2cudGV4dDtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDaGF0UmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8xLlxyXG4gKi9cclxudmFyIHBjID0gbmV3IE9iamVjdCgpO1xyXG5wY1sn5YyX5Lqs5biCJ10gPSBuZXcgQXJyYXkoJ+acnemYs+WMuicsICfmtbfmt4DljLonLCAn6YCa5bee5Yy6JywgJ+aIv+WxseWMuicsICfkuLDlj7DljLonLCAn5piM5bmz5Yy6JywgJ+Wkp+WFtOWMuicsICfpobrkuYnljLonLCAn6KW/5Z+O5Yy6JywgJ+W7tuW6huWOvycsICfnn7Pmma/lsbHljLonLCAn5a6j5q2m5Yy6JywgJ+aAgOaflOWMuicsICfltIfmlofljLonLCAn5a+G5LqR5Y6/JywgJ+S4nOWfjuWMuicsICflubPosLfljLonLCAn6Zeo5aS05rKf5Yy6Jyk7XHJcbnBjWyflub/kuJznnIEnXSA9IG5ldyBBcnJheSgn5Lic6I6e5biCJywgJ+W5v+W3nuW4gicsICfkuK3lsbHluIInLCAn5rex5Zyz5biCJywgJ+aDoOW3nuW4gicsICfmsZ/pl6jluIInLCAn54+g5rW35biCJywgJ+axleWktOW4gicsICfkvZvlsbHluIInLCAn5rmb5rGf5biCJywgJ+ays+a6kOW4gicsICfogofluobluIInLCAn5riF6L+c5biCJywgJ+a9ruW3nuW4gicsICfpn7blhbPluIInLCAn5o+t6Ziz5biCJywgJ+mYs+axn+W4gicsICfmooXlt57luIInLCAn5LqR5rWu5biCJywgJ+iMguWQjeW4gicsICfmsZXlsL7luIInKTtcclxucGNbJ+WxseS4nOecgSddID0gbmV3IEFycmF5KCfmtY7ljZfluIInLCAn6Z2S5bKb5biCJywgJ+S4tOayguW4gicsICfmtY7lroHluIInLCAn6I+P5rO95biCJywgJ+eDn+WPsOW4gicsICfmt4TljZrluIInLCAn5rOw5a6J5biCJywgJ+a9jeWdiuW4gicsICfml6XnhafluIInLCAn5aiB5rW35biCJywgJ+a7qOW3nuW4gicsICfkuJzokKXluIInLCAn6IGK5Z+O5biCJywgJ+W+t+W3nuW4gicsICfojrHoipzluIInLCAn5p6j5bqE5biCJyk7XHJcbnBjWyfmsZ/oi4/nnIEnXSA9IG5ldyBBcnJheSgn6IuP5bee5biCJywgJ+W+kOW3nuW4gicsICfnm5Dln47luIInLCAn5peg6ZSh5biCJywgJ+WNl+S6rOW4gicsICfljZfpgJrluIInLCAn6L+e5LqR5riv5biCJywgJ+W4uOW3nuW4gicsICfplYfmsZ/luIInLCAn5oms5bee5biCJywgJ+a3ruWuieW4gicsICfms7Dlt57luIInLCAn5a6/6L+B5biCJyk7XHJcbnBjWyfmsrPljZfnnIEnXSA9IG5ldyBBcnJheSgn6YOR5bee5biCJywgJ+WNl+mYs+W4gicsICfmlrDkuaHluIInLCAn5a6J6Ziz5biCJywgJ+a0m+mYs+W4gicsICfkv6HpmLPluIInLCAn5bmz6aG25bGx5biCJywgJ+WRqOWPo+W4gicsICfllYbkuJjluIInLCAn5byA5bCB5biCJywgJ+eEpuS9nOW4gicsICfpqbvpqazlupfluIInLCAn5r+u6Ziz5biCJywgJ+S4iemXqOWzoeW4gicsICfmvK/msrPluIInLCAn6K645piM5biCJywgJ+m5pOWjgeW4gicsICfmtY7mupDluIInKTtcclxucGNbJ+S4iua1t+W4giddID0gbmV3IEFycmF5KCfmnb7msZ/ljLonLCAn5a6d5bGx5Yy6JywgJ+mHkeWxseWMuicsICflmInlrprljLonLCAn5Y2X5rGH5Yy6JywgJ+mdkua1puWMuicsICfmtabkuJzmlrDljLonLCAn5aWJ6LSk5Yy6JywgJ+W+kOaxh+WMuicsICfpnZnlronljLonLCAn6Ze16KGM5Yy6JywgJ+m7hOa1puWMuicsICfmnajmtabljLonLCAn6Jm55Y+j5Yy6JywgJ+aZrumZgOWMuicsICfpl7jljJfljLonLCAn6ZW/5a6B5Yy6JywgJ+W0h+aYjuWOvycsICfljaLmub7ljLonKTtcclxucGNbJ+ays+WMl+ecgSddID0gbmV3IEFycmF5KCfnn7PlrrbluoTluIInLCAn5ZSQ5bGx5biCJywgJ+S/neWumuW4gicsICfpgq/pg7jluIInLCAn6YKi5Y+w5biCJywgJ+ays+WMl+WMuicsJ+ayp+W3nuW4gicsICfnp6bnmoflspvluIInLCAn5byg5a625Y+j5biCJywgJ+ihoeawtOW4gicsICflu4rlnYrluIInLCAn5om/5b635biCJyk7XHJcbnBjWyfmtZnmsZ/nnIEnXSA9IG5ldyBBcnJheSgn5rip5bee5biCJywgJ+WugeazouW4gicsICfmna3lt57luIInLCAn5Y+w5bee5biCJywgJ+WYieWFtOW4gicsICfph5HljY7luIInLCAn5rmW5bee5biCJywgJ+e7jeWFtOW4gicsICfoiJ/lsbHluIInLCAn5Li95rC05biCJywgJ+ihouW3nuW4gicpO1xyXG5wY1sn6aaZ5riv54m55Yir6KGM5pS/5Yy6J10gPSBuZXcgQXJyYXkoJ+mmmea4rycpO1xyXG5wY1sn6ZmV6KW/55yBJ10gPSBuZXcgQXJyYXkoJ+ilv+WuieW4gicsICflkrjpmLPluIInLCAn5a6d6bih5biCJywgJ+axieS4reW4gicsICfmuK3ljZfluIInLCAn5a6J5bq35biCJywgJ+amhuael+W4gicsICfllYbmtJvluIInLCAn5bu25a6J5biCJywgJ+mTnOW3neW4gicpO1xyXG5wY1sn5rmW5Y2X55yBJ10gPSBuZXcgQXJyYXkoJ+mVv+aymeW4gicsICfpgrXpmLPluIInLCAn5bi45b635biCJywgJ+ihoemYs+W4gicsICfmoKrmtLLluIInLCAn5rmY5r2t5biCJywgJ+awuOW3nuW4gicsICflsrPpmLPluIInLCAn5oCA5YyW5biCJywgJ+mDtOW3nuW4gicsICflqITlupXluIInLCAn55uK6Ziz5biCJywgJ+W8oOWutueVjOW4gicsICfmuZjopb/lt54nKTtcclxucGNbJ+mHjeW6huW4giddID0gbmV3IEFycmF5KCfmsZ/ljJfljLonLCAn5rid5YyX5Yy6JywgJ+aymeWdquWdneWMuicsICfkuZ3pvpnlnaHljLonLCAn5LiH5bee5Yy6JywgJ+awuOW3neW4gicsICfljZflsrjljLonLCAn6YWJ6Ziz5Y6/JywgJ+WMl+eimuWMuicsICfmtqrpmbXljLonLCAn56eA5bGx5Y6/JywgJ+W3tOWNl+WMuicsICfmuJ3kuK3ljLonLCAn55+z5p+x5Y6/JywgJ+W/oOWOvycsICflkIjlt53luIInLCAn5aSn5rih5Y+j5Yy6JywgJ+W8gOWOvycsICfplb/lr7/ljLonLCAn6I2j5piM5Y6/JywgJ+S6kemYs+WOvycsICfmooHlubPljr8nLCAn5r285Y2X5Y6/JywgJ+axn+a0peW4gicsICflva3msLTljr8nLCAn57am5rGf5Y6/JywgJ+eSp+WxseWOvycsICfpu5TmsZ/ljLonLCAn5aSn6Laz5Y6/JywgJ+W3q+WxseWOvycsICflt6vmuqrljr8nLCAn5Z6r5rGf5Y6/JywgJ+S4sOmDveWOvycsICfmrabpmobljr8nLCAn5LiH55ub5Yy6JywgJ+mTnOaigeWOvycsICfljZflt53luIInLCAn5aWJ6IqC5Y6/JywgJ+WPjOahpeWMuicsICfln47lj6Pljr8nKTtcclxucGNbJ+emj+W7uuecgSddID0gbmV3IEFycmF5KCfmvLPlt57luIInLCAn5Y6m6Zeo5biCJywgJ+azieW3nuW4gicsICfnpo/lt57luIInLCAn6I6G55Sw5biCJywgJ+WugeW+t+W4gicsICfkuInmmI7luIInLCAn5Y2X5bmz5biCJywgJ+m+meWyqeW4gicpO1xyXG5wY1sn5aSp5rSl5biCJ10gPSBuZXcgQXJyYXkoJ+WSjOW5s+WMuicsICfljJfovrDljLonLCAn5rKz5YyX5Yy6Jywn5rKz6KW/5Yy6JywgJ+ilv+mdkuWMuicsICfmtKXljZfljLonLCAn5Lic5Li95Yy6JywgJ+atpua4heWMuicsICflrp3lnbvljLonLCAn57qi5qGl5Yy6JywgJ+Wkp+a4r+WMuicsICfmsYnmsr3ljLonLCAn6Z2Z5rW35Y6/JywgJ+WhmOayveWMuicsICflroHmsrPljr8nLCAn6JOf5Y6/JywgJ+WNl+W8gOWMuicsICfmsrPkuJzljLonKTtcclxucGNbJ+S6keWNl+ecgSddID0gbmV3IEFycmF5KCfmmIbmmI7luIInLCAn57qi5rKz5beeJywgJ+Wkp+eQhuW3nicsICfmloflsbHlt54nLCAn5b635a6P5beeJywgJ+absumdluW4gicsICfmmK3pgJrluIInLCAn5qWa6ZuE5beeJywgJ+S/neWxseW4gicsICfnjonmuqrluIInLCAn5Li95rGf5Zyw5Yy6JywgJ+S4tOayp+WcsOWMuicsICfmgJ3ojIXlnLDljLonLCAn6KW/5Y+M54mI57qz5beeJywgJ+aAkuaxn+W3nicsICfov6rluoblt54nKTtcclxucGNbJ+Wbm+W3neecgSddID0gbmV3IEFycmF5KCfmiJDpg73luIInLCAn57u16Ziz5biCJywgJ+W5v+WFg+W4gicsICfovr7lt57luIInLCAn5Y2X5YWF5biCJywgJ+W+t+mYs+W4gicsICflub/lronluIInLCAn6Zi/5Z2d5beeJywgJ+W3tOS4reW4gicsICfpgYLlroHluIInLCAn5YaF5rGf5biCJywgJ+WHieWxseW3nicsICfmlIDmnp3oirHluIInLCAn5LmQ5bGx5biCJywgJ+iHqui0oeW4gicsICfms7jlt57luIInLCAn6ZuF5a6J5biCJywgJ+WunOWuvuW4gicsICfotYTpmLPluIInLCAn55yJ5bGx5biCJywgJ+eUmOWtnOW3nicpO1xyXG5wY1sn5bm/6KW/5aOu5peP6Ieq5rK75Yy6J10gPSBuZXcgQXJyYXkoJ+i0tea4r+W4gicsICfnjonmnpfluIInLCAn5YyX5rW35biCJywgJ+WNl+WugeW4gicsICfmn7Plt57luIInLCAn5qGC5p6X5biCJywgJ+aip+W3nuW4gicsICfpkqblt57luIInLCAn5p2l5a6+5biCJywgJ+ays+axoOW4gicsICfnmb7oibLluIInLCAn6LS65bee5biCJywgJ+W0h+W3puW4gicsICfpmLLln47muK/luIInKTtcclxucGNbJ+WuieW+veecgSddID0gbmV3IEFycmF5KCfoipzmuZbluIInLCAn5ZCI6IKl5biCJywgJ+WFreWuieW4gicsICflrr/lt57luIInLCAn6Zic6Ziz5biCJywgJ+WuieW6huW4gicsICfpqazpno3lsbHluIInLCfomozln6DluIInLCAn5reu5YyX5biCJywgJ+a3ruWNl+W4gicsICflrqPln47luIInLCAn6buE5bGx5biCJywgJ+mTnOmZteW4gicsICfkurPlt57luIInLCAn5rGg5bee5biCJywgJ+W3oua5luW4gicsICfmu4Hlt57luIInKTtcclxucGNbJ+a1t+WNl+ecgSddID0gbmV3IEFycmF5KCfkuInkuprluIInLCAn5rW35Y+j5biCJywgJ+eQvOa1t+W4gicsICfmlofmmIzluIInLCAn5Lic5pa55biCJywgJ+aYjOaxn+WOvycsICfpmbXmsLTljr8nLCAn5LmQ5Lic5Y6/JywgJ+S/neS6reWOvycsICfkupTmjIflsbHluIInLCAn5r6E6L+I5Y6/JywgJ+S4h+WugeW4gicsICflhIvlt57luIInLCAn5Li06auY5Y6/JywgJ+eZveaymeWOvycsICflrprlronljr8nLCAn55C85Lit5Y6/JywgJ+Wxr+aYjOWOvycpO1xyXG5wY1sn5rGf6KW/55yBJ10gPSBuZXcgQXJyYXkoJ+WNl+aYjOW4gicsICfotaPlt57luIInLCAn5LiK6aW25biCJywgJ+WQieWuieW4gicsICfkuZ3msZ/luIInLCAn5paw5L2Z5biCJywgJ+aKmuW3nuW4gicsICflrpzmmKXluIInLCAn5pmv5b636ZWH5biCJywgJ+iQjeS5oeW4gicsICfpubDmva3luIInKTtcclxucGNbJ+a5luWMl+ecgSddID0gbmV3IEFycmF5KCfmrabmsYnluIInLCAn5a6c5piM5biCJywgJ+ilhOaoiuW4gicsICfojYblt57luIInLCAn5oGp5pa95beeJywgJ+m7hOWGiOW4gicsICflrZ3mhJ/luIInLCAn5Y2B5aCw5biCJywgJ+WSuOWugeW4gicsICfpu4Tnn7PluIInLCAn5LuZ5qGD5biCJywgJ+WkqemXqOW4gicsICfpmo/lt57luIInLCAn6I2G6Zeo5biCJywgJ+a9nOaxn+W4gicsICfphILlt57luIInLCAn56We5Yac5p625p6X5Yy6Jyk7XHJcbnBjWyflsbHopb/nnIEnXSA9IG5ldyBBcnJheSgn5aSq5Y6f5biCJywgJ+Wkp+WQjOW4gicsICfov5Dln47luIInLCAn6ZW/5rK75biCJywgJ+aZi+WfjuW4gicsICflv7vlt57luIInLCAn5Li05rG+5biCJywgJ+WQleaigeW4gicsICfmmYvkuK3luIInLCAn6Ziz5rOJ5biCJywgJ+aclOW3nuW4gicpO1xyXG5wY1sn6L695a6B55yBJ10gPSBuZXcgQXJyYXkoJ+Wkp+i/nuW4gicsICfmsojpmLPluIInLCAn5Li55Lic5biCJywgJ+i+vemYs+W4gicsICfokavoiqblspvluIInLCAn6ZSm5bee5biCJywgJ+acnemYs+W4gicsICfokKXlj6PluIInLCAn6Z6N5bGx5biCJywgJ+aKmumhuuW4gicsICfpmJzmlrDluIInLCAn55uY6ZSm5biCJywgJ+acrOa6quW4gicsICfpk4Hlsq3luIInKTtcclxucGNbJ+WPsOa5vuecgSddID0gbmV3IEFycmF5KCflj7DljJfluIInLCAn6auY6ZuE5biCJywgJ+WPsOS4reW4gicsICfmlrDnq7nluIInLCAn5Z+66ZqG5biCJywgJ+WPsOWNl+W4gicsICflmInkuYnluIInKTtcclxucGNbJ+m7kem+meaxnyddID0gbmV3IEFycmF5KCfpvZDpvZDlk4jlsJTluIInLCAn5ZOI5bCU5ruo5biCJywgJ+Wkp+W6huW4gicsICfkvbPmnKjmlq/luIInLCAn5Y+M6bit5bGx5biCJywgJ+eJoeS4ueaxn+W4gicsICfpuKHopb/luIInLCAn6buR5rKz5biCJywgJ+e7peWMluW4gicsICfpuaTlspfluIInLCAn5LyK5pil5biCJywgJ+Wkp+WFtOWuieWyreWcsOWMuicsICfkuIPlj7DmsrPluIInKTtcclxucGNbJ+WGheiSmeWPpOiHquayu+WMuiddID0gbmV3IEFycmF5KCfotaTls7DluIInLCAn5YyF5aS05biCJywgJ+mAmui+veW4gicsICflkbzlkozmtannibnluIInLCAn6YSC5bCU5aSa5pav5biCJywgJ+S5jOa1t+W4gicsICflkbzkvKbotJ3lsJTluIInLCAn5YW05a6J55ufJywgJ+W3tOW9pua3luWwlOebnycsICfkuYzlhbDlr5/luIPnm58nLCAn6ZSh5p6X6YOt5YuS55ufJywgJ+mYv+aLieWWhOebnycpO1xyXG5wY1sn5r6z6Zeo54m55Yir6KGM5pS/5Yy6J10gPSBuZXcgQXJyYXkoJ+a+s+mXqCcpO1xyXG5wY1sn6LS15bee55yBJ10gPSBuZXcgQXJyYXkoJ+i0temYs+W4gicsJ+m7lOS4nOWNl+W3nicsJ+m7lOWNl+W3nicsJ+mBteS5ieW4gicsJ+m7lOilv+WNl+W3nicsJ+avleiKguWcsOWMuicsJ+mTnOS7geWcsOWMuicsJ+WuiemhuuW4gicsJ+WFreebmOawtOW4gicpO1xyXG5wY1sn55SY6IKD55yBJ10gPSBuZXcgQXJyYXkoJ+WFsOW3nuW4gicsICflpKnmsLTluIInLCAn5bqG6Ziz5biCJywgJ+atpuWogeW4gicsICfphZLms4nluIInLCAn5byg5o6W5biCJywgJ+mZh+WNl+WcsOWMuicsICfnmb3pk7bluIInLCAn5a6a6KW/5Zyw5Yy6JywgJ+W5s+WHieW4gicsICflmInls6rlhbPluIInLCAn5Li05aSP5Zue5peP6Ieq5rK75beeJywgJ+mHkeaYjOW4gicsICfnlJjljZflt54nKTtcclxucGNbJ+mdkua1t+ecgSddID0gbmV3IEFycmF5KCfopb/lroHluIInLCAn5rW36KW/5beeJywgJ+a1t+S4nOWcsOWMuicsICfmtbfljJflt54nLCAn5p6c5rSb5beeJywgJ+eOieagkeW3nicsICfpu4TljZfol4/ml4/oh6rmsrvlt54nKTtcclxucGNbJ+aWsOeWhue7tOWQvuWwlOiHquayu+WMuiddID0gbmV3IEFycmF5KCfkuYzpsoHmnKjpvZDluIInLCAn5LyK54qB5beeJywgJ+aYjOWQieW3nicsICfnn7PmsrPlrZDluIInLCAn5ZOI5a+G5Zyw5Yy6JywgJ+mYv+WFi+iLj+WcsOWMuicsICflt7Tpn7Ppg63mpZ7lt54nLCAn5ZaA5LuA5Zyw5Yy6JywgJ+WhlOWfjuWcsOWMuicsICflhYvmi4nnjpvkvp3luIInLCAn5ZKM55Sw5Zyw5Yy6JywgJ+mYv+WLkuazsOW3nicsICflkJDpsoHnlarlnLDljLonLCAn6Zi/5ouJ5bCU5biCJywgJ+WNmuWwlOWhlOaLieW3nicsICfkupTlrrbmuKDluIInLCAn5YWL5a2c5YuS6IuP5beeJywgJ+WbvuacqOiIkuWFi+W4gicpO1xyXG5wY1sn6KW/6JeP5Yy6J10gPSBuZXcgQXJyYXkoJ+aLieiQqOW4gicsICflsbHljZflnLDljLonLCAn5p6X6Iqd5Zyw5Yy6JywgJ+aXpeWWgOWImeWcsOWMuicsICfpmL/ph4zlnLDljLonLCAn5piM6YO95Zyw5Yy6JywgJ+mCo+absuWcsOWMuicpO1xyXG5wY1sn5ZCJ5p6X55yBJ10gPSBuZXcgQXJyYXkoJ+WQieael+W4gicsICfplb/mmKXluIInLCAn55m95bGx5biCJywgJ+W7tui+ueW3nicsICfnmb3ln47luIInLCAn5p2+5Y6f5biCJywgJ+i+vea6kOW4gicsICfpgJrljJbluIInLCAn5Zub5bmz5biCJyk7XHJcbnBjWyflroHlpI/lm57ml4/oh6rmsrvljLonXSA9IG5ldyBBcnJheSgn6ZO25bed5biCJywgJ+WQtOW/oOW4gicsICfkuK3ljavluIInLCAn55+z5Zi05bGx5biCJywgJ+WbuuWOn+W4gicpOyIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJBZGRWaWV3Lm9uTG9hZCA6IHN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJBZGRWaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIk5ld0NsdWJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuU2VsZkNsdWJJZCA+IDApIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo5bey57uP5bu656uL5LqG5LiA5Liq5L+x5LmQ6YOoLOebruWJjeS4jeaUr+aMgeWkmuS4qlwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIHBvcFZpZXc6IFwiQ2x1YkFkZFZpZXdcIixcclxuICAgICAgICAgICAgICAgIGJ0bjogXCJOZXdDbHViXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHsgdGFnOiB3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOiBtZXNzYWdlIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQWRkQ2x1YlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBwb3BWaWV3OiBcIkNsdWJBZGRWaWV3XCIsXHJcbiAgICAgICAgICAgICAgICBidG46IFwiQWRkQ2x1YlwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIHsgdGFnOiB3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOiBtZXNzYWdlIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9LFxyXG5cclxuXHJcblxyXG59KTtcclxuIiwidmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgQXJlYU5hbWUgOiBjYy5MYWJlbCxcclxuICAgICAgICBCdG5GbGFnIDogY2MuU3ByaXRlLFxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBcIlwiO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBjYy5sb2coXCJDbHViQXJlYUNlbGwuY2FsbEJhY2tCdG4sQnRuTmFtZSA9IFwiICsgQnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZihCdG5OYW1lID09IFwiQnRuQ2xvc2VcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKEJ0bk5hbWUgPT0gXCJDbHViQXJlYUNlbGxcIilcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0QXJlYUNlbGxJbmZvIDogZnVuY3Rpb24gKG5hbWUsaUNvdW50KSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLkFyZWFOYW1lLnN0cmluZyA9IG5hbWU7XHJcbiAgICAgICAgaWYoaUNvdW50IDw9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkZsYWcubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbnZhciBwYyA9IG5ldyBPYmplY3QoKTtcclxucGNbJ+WMl+S6rOW4giddID0gbmV3IEFycmF5KCfmnJ3pmLPljLonLCAn5rW35reA5Yy6JywgJ+mAmuW3nuWMuicsICfmiL/lsbHljLonLCAn5Liw5Y+w5Yy6JywgJ+aYjOW5s+WMuicsICflpKflhbTljLonLCAn6aG65LmJ5Yy6JywgJ+ilv+WfjuWMuicsICflu7bluobljr8nLCAn55+z5pmv5bGx5Yy6JywgJ+Wuo+atpuWMuicsICfmgIDmn5TljLonLCAn5bSH5paH5Yy6JywgJ+WvhuS6keWOvycsICfkuJzln47ljLonLCAn5bmz6LC35Yy6JywgJ+mXqOWktOayn+WMuicpO1xyXG5wY1sn5bm/5Lic55yBJ10gPSBuZXcgQXJyYXkoJ+S4nOiOnuW4gicsICflub/lt57luIInLCAn5Lit5bGx5biCJywgJ+a3seWcs+W4gicsICfmg6Dlt57luIInLCAn5rGf6Zeo5biCJywgJ+ePoOa1t+W4gicsICfmsZXlpLTluIInLCAn5L2b5bGx5biCJywgJ+a5m+axn+W4gicsICfmsrPmupDluIInLCAn6IKH5bqG5biCJywgJ+a4hei/nOW4gicsICfmva7lt57luIInLCAn6Z+25YWz5biCJywgJ+aPremYs+W4gicsICfpmLPmsZ/luIInLCAn5qKF5bee5biCJywgJ+S6kea1ruW4gicsICfojILlkI3luIInLCAn5rGV5bC+5biCJyk7XHJcbnBjWyflsbHkuJznnIEnXSA9IG5ldyBBcnJheSgn5rWO5Y2X5biCJywgJ+mdkuWym+W4gicsICfkuLTmsoLluIInLCAn5rWO5a6B5biCJywgJ+iPj+azveW4gicsICfng5/lj7DluIInLCAn5reE5Y2a5biCJywgJ+azsOWuieW4gicsICfmvY3lnYrluIInLCAn5pel54Wn5biCJywgJ+Wogea1t+W4gicsICfmu6jlt57luIInLCAn5Lic6JCl5biCJywgJ+iBiuWfjuW4gicsICflvrflt57luIInLCAn6I6x6Iqc5biCJywgJ+aeo+W6hOW4gicpO1xyXG5wY1sn5rGf6IuP55yBJ10gPSBuZXcgQXJyYXkoJ+iLj+W3nuW4gicsICflvpDlt57luIInLCAn55uQ5Z+O5biCJywgJ+aXoOmUoeW4gicsICfljZfkuqzluIInLCAn5Y2X6YCa5biCJywgJ+i/nuS6kea4r+W4gicsICfluLjlt57luIInLCAn6ZWH5rGf5biCJywgJ+aJrOW3nuW4gicsICfmt67lronluIInLCAn5rOw5bee5biCJywgJ+Wuv+i/geW4gicpO1xyXG5wY1sn5rKz5Y2X55yBJ10gPSBuZXcgQXJyYXkoJ+mDkeW3nuW4gicsICfljZfpmLPluIInLCAn5paw5Lmh5biCJywgJ+WuiemYs+W4gicsICfmtJvpmLPluIInLCAn5L+h6Ziz5biCJywgJ+W5s+mhtuWxseW4gicsICflkajlj6PluIInLCAn5ZWG5LiY5biCJywgJ+W8gOWwgeW4gicsICfnhKbkvZzluIInLCAn6am76ams5bqX5biCJywgJ+a/rumYs+W4gicsICfkuInpl6jls6HluIInLCAn5ryv5rKz5biCJywgJ+iuuOaYjOW4gicsICfpuaTlo4HluIInLCAn5rWO5rqQ5biCJyk7XHJcbnBjWyfkuIrmtbfluIInXSA9IG5ldyBBcnJheSgn5p2+5rGf5Yy6JywgJ+WuneWxseWMuicsICfph5HlsbHljLonLCAn5ZiJ5a6a5Yy6JywgJ+WNl+axh+WMuicsICfpnZLmtabljLonLCAn5rWm5Lic5paw5Yy6JywgJ+Wliei0pOWMuicsICflvpDmsYfljLonLCAn6Z2Z5a6J5Yy6JywgJ+mXteihjOWMuicsICfpu4TmtabljLonLCAn5p2o5rWm5Yy6JywgJ+iZueWPo+WMuicsICfmma7pmYDljLonLCAn6Ze45YyX5Yy6JywgJ+mVv+WugeWMuicsICfltIfmmI7ljr8nLCAn5Y2i5rm+5Yy6Jyk7XHJcbnBjWyfmsrPljJfnnIEnXSA9IG5ldyBBcnJheSgn55+z5a625bqE5biCJywgJ+WUkOWxseW4gicsICfkv53lrprluIInLCAn6YKv6YO45biCJywgJ+mCouWPsOW4gicsICfmsrPljJfljLonLCfmsqflt57luIInLCAn56em55qH5bKb5biCJywgJ+W8oOWutuWPo+W4gicsICfooaHmsLTluIInLCAn5buK5Z2K5biCJywgJ+aJv+W+t+W4gicpO1xyXG5wY1sn5rWZ5rGf55yBJ10gPSBuZXcgQXJyYXkoJ+a4qeW3nuW4gicsICflroHms6LluIInLCAn5p2t5bee5biCJywgJ+WPsOW3nuW4gicsICflmInlhbTluIInLCAn6YeR5Y2O5biCJywgJ+a5luW3nuW4gicsICfnu43lhbTluIInLCAn6Iif5bGx5biCJywgJ+S4veawtOW4gicsICfooaLlt57luIInKTtcclxucGNbJ+mmmea4ryddID0gbmV3IEFycmF5KCfpppnmuK8nKTtcclxucGNbJ+mZleilv+ecgSddID0gbmV3IEFycmF5KCfopb/lronluIInLCAn5ZK46Ziz5biCJywgJ+Wunem4oeW4gicsICfmsYnkuK3luIInLCAn5rit5Y2X5biCJywgJ+WuieW6t+W4gicsICfmpobmnpfluIInLCAn5ZWG5rSb5biCJywgJ+W7tuWuieW4gicsICfpk5zlt53luIInKTtcclxucGNbJ+a5luWNl+ecgSddID0gbmV3IEFycmF5KCfplb/mspnluIInLCAn6YK16Ziz5biCJywgJ+W4uOW+t+W4gicsICfooaHpmLPluIInLCAn5qCq5rSy5biCJywgJ+a5mOa9reW4gicsICfmsLjlt57luIInLCAn5bKz6Ziz5biCJywgJ+aAgOWMluW4gicsICfpg7Tlt57luIInLCAn5aiE5bqV5biCJywgJ+ebiumYs+W4gicsICflvKDlrrbnlYzluIInLCAn5rmY6KW/5beeJyk7XHJcbnBjWyfph43luobluIInXSA9IG5ldyBBcnJheSgn5rGf5YyX5Yy6JywgJ+a4neWMl+WMuicsICfmspnlnarlnZ3ljLonLCAn5Lmd6b6Z5Z2h5Yy6JywgJ+S4h+W3nuWMuicsICfmsLjlt53luIInLCAn5Y2X5bK45Yy6JywgJ+mFiemYs+WOvycsICfljJfnoprljLonLCAn5raq6Zm15Yy6JywgJ+engOWxseWOvycsICflt7TljZfljLonLCAn5rid5Lit5Yy6JywgJ+efs+afseWOvycsICflv6Dljr8nLCAn5ZCI5bed5biCJywgJ+Wkp+a4oeWPo+WMuicsICflvIDljr8nLCAn6ZW/5a+/5Yy6JywgJ+iNo+aYjOWOvycsICfkupHpmLPljr8nLCAn5qKB5bmz5Y6/JywgJ+a9vOWNl+WOvycsICfmsZ/mtKXluIInLCAn5b2t5rC05Y6/JywgJ+e2puaxn+WOvycsICfnkqflsbHljr8nLCAn6buU5rGf5Yy6JywgJ+Wkp+i2s+WOvycsICflt6vlsbHljr8nLCAn5ber5rqq5Y6/JywgJ+Weq+axn+WOvycsICfkuLDpg73ljr8nLCAn5q2m6ZqG5Y6/JywgJ+S4h+ebm+WMuicsICfpk5zmooHljr8nLCAn5Y2X5bed5biCJywgJ+WlieiKguWOvycsICflj4zmoaXljLonLCAn5Z+O5Y+j5Y6/Jyk7XHJcbnBjWyfnpo/lu7rnnIEnXSA9IG5ldyBBcnJheSgn5ryz5bee5biCJywgJ+WOpumXqOW4gicsICfms4nlt57luIInLCAn56aP5bee5biCJywgJ+iOhueUsOW4gicsICflroHlvrfluIInLCAn5LiJ5piO5biCJywgJ+WNl+W5s+W4gicsICfpvpnlsqnluIInKTtcclxucGNbJ+Wkqea0peW4giddID0gbmV3IEFycmF5KCflkozlubPljLonLCAn5YyX6L6w5Yy6JywgJ+ays+WMl+WMuicsJ+ays+ilv+WMuicsICfopb/pnZLljLonLCAn5rSl5Y2X5Yy6JywgJ+S4nOS4veWMuicsICfmrabmuIXljLonLCAn5a6d5Z275Yy6JywgJ+e6ouahpeWMuicsICflpKfmuK/ljLonLCAn5rGJ5rK95Yy6JywgJ+mdmea1t+WOvycsICfloZjmsr3ljLonLCAn5a6B5rKz5Y6/JywgJ+iTn+WOvycsICfljZflvIDljLonLCAn5rKz5Lic5Yy6Jyk7XHJcbnBjWyfkupHljZfnnIEnXSA9IG5ldyBBcnJheSgn5piG5piO5biCJywgJ+e6ouays+W3nicsICflpKfnkIblt54nLCAn5paH5bGx5beeJywgJ+W+t+Wuj+W3nicsICfmm7LpnZbluIInLCAn5pit6YCa5biCJywgJ+almumbhOW3nicsICfkv53lsbHluIInLCAn546J5rqq5biCJywgJ+S4veaxn+WcsOWMuicsICfkuLTmsqflnLDljLonLCAn5oCd6IyF5Zyw5Yy6JywgJ+ilv+WPjOeJiOe6s+W3nicsICfmgJLmsZ/lt54nLCAn6L+q5bqG5beeJyk7XHJcbnBjWyflm5vlt53nnIEnXSA9IG5ldyBBcnJheSgn5oiQ6YO95biCJywgJ+e7temYs+W4gicsICflub/lhYPluIInLCAn6L6+5bee5biCJywgJ+WNl+WFheW4gicsICflvrfpmLPluIInLCAn5bm/5a6J5biCJywgJ+mYv+WdneW3nicsICflt7TkuK3luIInLCAn6YGC5a6B5biCJywgJ+WGheaxn+W4gicsICflh4nlsbHlt54nLCAn5pSA5p6d6Iqx5biCJywgJ+S5kOWxseW4gicsICfoh6rotKHluIInLCAn5rO45bee5biCJywgJ+mbheWuieW4gicsICflrpzlrr7luIInLCAn6LWE6Ziz5biCJywgJ+ecieWxseW4gicsICfnlJjlrZzlt54nKTtcclxucGNbJ+W5v+ilvyddID0gbmV3IEFycmF5KCfotLXmuK/luIInLCAn546J5p6X5biCJywgJ+WMl+a1t+W4gicsICfljZflroHluIInLCAn5p+z5bee5biCJywgJ+ahguael+W4gicsICfmoqflt57luIInLCAn6ZKm5bee5biCJywgJ+adpeWuvuW4gicsICfmsrPmsaDluIInLCAn55m+6Imy5biCJywgJ+i0uuW3nuW4gicsICfltIflt6bluIInLCAn6Ziy5Z+O5riv5biCJyk7XHJcbnBjWyflronlvr3nnIEnXSA9IG5ldyBBcnJheSgn6Iqc5rmW5biCJywgJ+WQiOiCpeW4gicsICflha3lronluIInLCAn5a6/5bee5biCJywgJ+mYnOmYs+W4gicsICflronluobluIInLCAn6ams6Z6N5bGx5biCJywn6JqM5Z+g5biCJywgJ+a3ruWMl+W4gicsICfmt67ljZfluIInLCAn5a6j5Z+O5biCJywgJ+m7hOWxseW4gicsICfpk5zpmbXluIInLCAn5Lqz5bee5biCJywgJ+axoOW3nuW4gicsICflt6LmuZbluIInLCAn5ruB5bee5biCJyk7XHJcbnBjWyfmtbfljZfnnIEnXSA9IG5ldyBBcnJheSgn5LiJ5Lqa5biCJywgJ+a1t+WPo+W4gicsICfnkLzmtbfluIInLCAn5paH5piM5biCJywgJ+S4nOaWueW4gicsICfmmIzmsZ/ljr8nLCAn6Zm15rC05Y6/JywgJ+S5kOS4nOWOvycsICfkv53kuq3ljr8nLCAn5LqU5oyH5bGx5biCJywgJ+a+hOi/iOWOvycsICfkuIflroHluIInLCAn5YSL5bee5biCJywgJ+S4tOmrmOWOvycsICfnmb3mspnljr8nLCAn5a6a5a6J5Y6/JywgJ+eQvOS4reWOvycsICflsa/mmIzljr8nKTtcclxucGNbJ+axn+ilv+ecgSddID0gbmV3IEFycmF5KCfljZfmmIzluIInLCAn6LWj5bee5biCJywgJ+S4iumltuW4gicsICflkInlronluIInLCAn5Lmd5rGf5biCJywgJ+aWsOS9meW4gicsICfmiprlt57luIInLCAn5a6c5pil5biCJywgJ+aZr+W+t+mVh+W4gicsICfokI3kuaHluIInLCAn6bmw5r2t5biCJyk7XHJcbnBjWyfmuZbljJfnnIEnXSA9IG5ldyBBcnJheSgn5q2m5rGJ5biCJywgJ+WunOaYjOW4gicsICfopYTmqIrluIInLCAn6I2G5bee5biCJywgJ+aBqeaWveW3nicsICfpu4TlhojluIInLCAn5a2d5oSf5biCJywgJ+WNgeWgsOW4gicsICflkrjlroHluIInLCAn6buE55+z5biCJywgJ+S7meahg+W4gicsICflpKnpl6jluIInLCAn6ZqP5bee5biCJywgJ+iNhumXqOW4gicsICfmvZzmsZ/luIInLCAn6YSC5bee5biCJywgJ+elnuWGnOaetuael+WMuicpO1xyXG5wY1sn5bGx6KW/55yBJ10gPSBuZXcgQXJyYXkoJ+WkquWOn+W4gicsICflpKflkIzluIInLCAn6L+Q5Z+O5biCJywgJ+mVv+ayu+W4gicsICfmmYvln47luIInLCAn5b+75bee5biCJywgJ+S4tOaxvuW4gicsICflkJXmooHluIInLCAn5pmL5Lit5biCJywgJ+mYs+azieW4gicsICfmnJTlt57luIInKTtcclxucGNbJ+i+veWugeecgSddID0gbmV3IEFycmF5KCflpKfov57luIInLCAn5rKI6Ziz5biCJywgJ+S4ueS4nOW4gicsICfovr3pmLPluIInLCAn6JGr6Iqm5bKb5biCJywgJ+mUpuW3nuW4gicsICfmnJ3pmLPluIInLCAn6JCl5Y+j5biCJywgJ+mejeWxseW4gicsICfmiprpobrluIInLCAn6Zic5paw5biCJywgJ+ebmOmUpuW4gicsICfmnKzmuqrluIInLCAn6ZOB5bKt5biCJyk7XHJcbnBjWyflj7Dmub7nnIEnXSA9IG5ldyBBcnJheSgn5Y+w5YyX5biCJywgJ+mrmOmbhOW4gicsICflj7DkuK3luIInLCAn5paw56u55biCJywgJ+WfuumahuW4gicsICflj7DljZfluIInLCAn5ZiJ5LmJ5biCJyk7XHJcbnBjWyfpu5HpvpnmsZ8nXSA9IG5ldyBBcnJheSgn6b2Q6b2Q5ZOI5bCU5biCJywgJ+WTiOWwlOa7qOW4gicsICflpKfluobluIInLCAn5L2z5pyo5pav5biCJywgJ+WPjOm4reWxseW4gicsICfniaHkuLnmsZ/luIInLCAn6bih6KW/5biCJywgJ+m7keays+W4gicsICfnu6XljJbluIInLCAn6bmk5bKX5biCJywgJ+S8iuaYpeW4gicsICflpKflhbTlronlsq3lnLDljLonLCAn5LiD5Y+w5rKz5biCJyk7XHJcbnBjWyflhoXokpnlj6QnXSA9IG5ldyBBcnJheSgn6LWk5bOw5biCJywgJ+WMheWktOW4gicsICfpgJrovr3luIInLCAn5ZG85ZKM5rWp54m55biCJywgJ+mEguWwlOWkmuaWr+W4gicsICfkuYzmtbfluIInLCAn5ZG85Lym6LSd5bCU5biCJywgJ+WFtOWuieebnycsICflt7Tlvabmt5blsJTnm58nLCAn5LmM5YWw5a+f5biD55ufJywgJ+mUoeael+mDreWLkuebnycsICfpmL/mi4nlloTnm58nKTtcclxucGNbJ+a+s+mXqCddID0gbmV3IEFycmF5KCfmvrPpl6gnKTtcclxucGNbJ+i0teW3nuecgSddID0gbmV3IEFycmF5KCfotLXpmLPluIInLCfpu5TkuJzljZflt54nLCfpu5TljZflt54nLCfpgbXkuYnluIInLCfpu5Topb/ljZflt54nLCfmr5XoioLlnLDljLonLCfpk5zku4HlnLDljLonLCflronpobrluIInLCflha3nm5jmsLTluIInKTtcclxucGNbJ+eUmOiCg+ecgSddID0gbmV3IEFycmF5KCflhbDlt57luIInLCAn5aSp5rC05biCJywgJ+W6humYs+W4gicsICfmrablqIHluIInLCAn6YWS5rOJ5biCJywgJ+W8oOaOluW4gicsICfpmYfljZflnLDljLonLCAn55m96ZO25biCJywgJ+Wumuilv+WcsOWMuicsICflubPlh4nluIInLCAn5ZiJ5bOq5YWz5biCJywgJ+S4tOWkj+WbnuaXj+iHquayu+W3nicsICfph5HmmIzluIInLCAn55SY5Y2X5beeJyk7XHJcbnBjWyfpnZLmtbfnnIEnXSA9IG5ldyBBcnJheSgn6KW/5a6B5biCJywgJ+a1t+ilv+W3nicsICfmtbfkuJzlnLDljLonLCAn5rW35YyX5beeJywgJ+aenOa0m+W3nicsICfnjonmoJHlt54nLCAn6buE5Y2X6JeP5peP6Ieq5rK75beeJyk7XHJcbnBjWyfmlrDnloYnXSA9IG5ldyBBcnJheSgn5LmM6bKB5pyo6b2Q5biCJywgJ+S8iueKgeW3nicsICfmmIzlkInlt54nLCAn55+z5rKz5a2Q5biCJywgJ+WTiOWvhuWcsOWMuicsICfpmL/lhYvoi4/lnLDljLonLCAn5be06Z+z6YOt5qWe5beeJywgJ+WWgOS7gOWcsOWMuicsICfloZTln47lnLDljLonLCAn5YWL5ouJ546b5L6d5biCJywgJ+WSjOeUsOWcsOWMuicsICfpmL/li5Lms7Dlt54nLCAn5ZCQ6bKB55Wq5Zyw5Yy6JywgJ+mYv+aLieWwlOW4gicsICfljZrlsJTloZTmi4nlt54nLCAn5LqU5a625rig5biCJywgJ+WFi+WtnOWLkuiLj+W3nicsICflm77mnKjoiJLlhYvluIInKTtcclxucGNbJ+ilv+iXj+WMuiddID0gbmV3IEFycmF5KCfmi4nokKjluIInLCAn5bGx5Y2X5Zyw5Yy6JywgJ+ael+iKneWcsOWMuicsICfml6XlloDliJnlnLDljLonLCAn6Zi/6YeM5Zyw5Yy6JywgJ+aYjOmDveWcsOWMuicsICfpgqPmm7LlnLDljLonKTtcclxucGNbJ+WQieael+ecgSddID0gbmV3IEFycmF5KCflkInmnpfluIInLCAn6ZW/5pil5biCJywgJ+eZveWxseW4gicsICflu7bovrnlt54nLCAn55m95Z+O5biCJywgJ+advuWOn+W4gicsICfovr3mupDluIInLCAn6YCa5YyW5biCJywgJ+Wbm+W5s+W4gicpO1xyXG5wY1sn5a6B5aSPJ10gPSBuZXcgQXJyYXkoJ+mTtuW3neW4gicsICflkLTlv6DluIInLCAn5Lit5Y2r5biCJywgJ+efs+WYtOWxseW4gicsICflm7rljp/luIInKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcblxyXG4gICAgICAgIHNjcm9sbHZpZXcgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgICAgIEFyZWFDZWxsIDogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm92aW5jZUFyZWEoKTtcclxuICAgICAgICB0aGlzLlByb3ZpbmNlTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5DaXR5TmFtZSA9IFwiXCI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbiAgICBjYWxsQmFja0J0biA6IGZ1bmN0aW9uIChldmVudCxDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkFyZWFWaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiXCIpXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHVwZGF0ZUNpdHlBcmVhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsdmlldy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICAgICAgdmFyIGNlbGxIZWlnaHQgPSAwO1xyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwIDsgaW5kZXggPCBwY1t0aGlzLlByb3ZpbmNlTmFtZV0ubGVuZ3RoO2luZGV4Kyspe1xyXG4gICAgICAgICAgICB2YXIgQXJlYUNlbGwgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkFyZWFDZWxsKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGx2aWV3LmNvbnRlbnQuYWRkQ2hpbGQoQXJlYUNlbGwpO1xyXG4gICAgICAgICAgICBjZWxsSGVpZ2h0ID0gQXJlYUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIEFyZWFDZWxsLnNldFBvc2l0aW9uKGNjLnAoMCwwIC0gY2VsbEhlaWdodCooaW5kZXggKyAwLjUpKSk7XHJcbiAgICAgICAgICAgIEFyZWFDZWxsLmdldENvbXBvbmVudChcIkNsdWJBcmVhQ2VsbFwiKS5zZXRBcmVhQ2VsbEluZm8ocGNbdGhpcy5Qcm92aW5jZU5hbWVdW2luZGV4XSwwKTtcclxuICAgICAgICAgICAgQXJlYUNlbGwub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJzdG9wIGV2ZW50XCIgKyBldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KFwiQ2x1YkFyZWFDZWxsXCIpLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkNsdWJBcmVhVmlld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0biA6IFwiQ2x1YkFyZWFDZWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJlYSA6IHRoaXMuUHJvdmluY2VOYW1lICsgXCIgXCIgKyBldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KFwiQ2x1YkFyZWFDZWxsXCIpLm5hbWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRyxkYXRhOm1lc3NhZ2V9KSA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVByb3ZpbmNlQXJlYSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbHZpZXcuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbih0cnVlKTtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIHZhciBjZWxsSGVpZ2h0ID0gMDtcclxuICAgICAgICBmb3IodmFyIG5hbWUgaW4gcGMpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCJDbHViQXJlYVZpZXcudXBkYXRlUHJvdmluY2VBcmVhLG5hbWUgPSBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICB2YXIgQXJlYUNlbGwgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkFyZWFDZWxsKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGx2aWV3LmNvbnRlbnQuYWRkQ2hpbGQoQXJlYUNlbGwpO1xyXG4gICAgICAgICAgICBjZWxsSGVpZ2h0ID0gQXJlYUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIEFyZWFDZWxsLnNldFBvc2l0aW9uKGNjLnAoMCwwIC0gY2VsbEhlaWdodCooaW5kZXggKyAwLjUpKSk7XHJcbiAgICAgICAgICAgIEFyZWFDZWxsLmdldENvbXBvbmVudChcIkNsdWJBcmVhQ2VsbFwiKS5zZXRBcmVhQ2VsbEluZm8obmFtZSxwY1tuYW1lXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICBBcmVhQ2VsbC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIiArIGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoXCJDbHViQXJlYUNlbGxcIikubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlByb3ZpbmNlTmFtZSA9IGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoXCJDbHViQXJlYUNlbGxcIikubmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2l0eUFyZWEoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuc2Nyb2xsdmlldy5jb250ZW50LmhlaWdodCA8IGNlbGxIZWlnaHQqKGluZGV4KSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsdmlldy5jb250ZW50LmhlaWdodCA9ICBjZWxsSGVpZ2h0KihpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBDbHViQWRkcmVzcyA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJJY29uIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIENsdWJOYW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ2x1YlByZXNvbnMgOiBjYy5MYWJlbCxcclxuICAgICAgICBDbHViQWRkcmVzczIgOiBjYy5MYWJlbCxcclxuICAgICAgICBDbHViSW50cm8gOiBjYy5MYWJlbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmluZm8gPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDbHViQ2VsbEluZm8gOiBmdW5jdGlvbiAoaW5mbykge1xyXG4gICAgICAgIC8ve1wiY2x1YmlkXCI6MTAwMDAwMTksXCJyb2xlXCI6MSxcIm93bmVydWlkXCI6MTA2ODgsXCJsZXZlbFwiOjEsXCJuYW1lXCI6XCJhc1wiLFxyXG4gICAgICAgIC8vIFwiaGVhZHVybFwiOlwiXCIsXCJhZGRyZXNzXCI6XCLlub/opb8g55m+6Imy5biCXCIsXCJpbnRyb1wiOlwiXCIsXCJlbmR0aW1lXCI6MTQ5NDMyNDE5NyxcInN0YXR1c1wiOjEsXHJcbiAgICAgICAgLy8gXCJtZW1iZXJzXCI6MSxcIm1heG1lbWJlclwiOjEwfVxyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkID09IGluZm8ub3duZXJ1aWQpIHtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLlNlbGZDbHViSWQgPSBpbmZvLmNsdWJpZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJDZWxsLnNldENsdWJDZWxsSW5mbyBjbHViaWQ9XCIsIGluZm8uY2x1YmlkLCBcIiBvd25lcnVpZD1cIiwgaW5mby5vd25lcnVpZCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5mbyAgICAgICAgICAgICAgICA9IGluZm87XHJcbiAgICAgICAgdGhpcy5DbHViQWRkcmVzcy5zdHJpbmcgID0gaW5mby5hZGRyZXNzO1xyXG4gICAgICAgIHRoaXMuQ2x1YkFkZHJlc3MyLnN0cmluZyA9IGluZm8uYWRkcmVzcztcclxuICAgICAgICB0aGlzLkNsdWJOYW1lLnN0cmluZyAgICAgPSBpbmZvLm5hbWU7XHJcbiAgICAgICAgdGhpcy5DbHViUHJlc29ucy5zdHJpbmcgID0gaW5mby5tZW1iZXJzICsgXCIvXCIgKyBpbmZvLm1heG1lbWJlcjtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkNlbGwuY2FsbEJhY2tCdG5cIik7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjMuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbi8qXHJcbiogdHlwZSBVU19SRVFfQ1JFQVRFX1RBQkxFX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBDbHViSWQgICAgICAgIGludCAgICBganNvbjpcImNsdWJpZFwiYCAgICAgICAgICAgICAgICAgICAgIC8v5L+x5LmQ6YOoaWQsIOWmguaenOeOqeWutuWIm+W7uu+8jD0wXHJcbiBDbHViTGV2ZWwgaW50ICAgIGBqc29uOlwiY2x1YmxldmVsXCJgICAgICAgICAgICAgIC8v5L+x5LmQ6YOobGV2ZWwsIOWmguaenOeOqeWutuWIm+W7uu+8jD0wXHJcbiBHYW1lSWQgICAgICB1aW50MTYgYGpzb246XCJnYW1laWRcImAgICAgICAgICAgICAgLy/mnI3liqHlmahpZCAo5YWt5Lq65qGM5oqi5bqEPTEwMSlcclxuIEdhbWVMZXZlbCB1aW50MTYgYGpzb246XCJnYW1lbGV2ZWxcImAgICAgIC8v5ri45oiP562J57qnLOaaguaXtuaXoFxyXG4gUGFyYW0gICAgICAgICAgc3RyaW5nIGBqc29uOlwicGFyYW1cImBcdFx0ICAgICAgLy9iYXNlNjTkuYvlkI7nmoTlj4LmlbBcclxuIH1cclxuIC8v5YWt5Lq654mb54mb56eB5Lq65qGM5Y+C5pWwXHJcbiB0eXBlIFNCRl9QUklWQVRFX1RBQkxFX1BBUkFNX1Qgc3RydWN0IHtcclxuIFBheU1vZGUgICBpbnQgICAgIGBqc29uOlwicGF5bW9kZVwiYCAgLy/ku5jotLnmqKHlvI8gKOm7mOiupOmSu+efsylcclxuIEdhbWVUeXBlICBpbnQzMiAgIGBqc29uOlwiZ2FtZXR5cGVcImAgLy/pl63niYzmiqLluoQs5LiJ5byg5oqi5bqEKOS6jOmAieS4gClcclxuIE1pbkFudGUgICBpbnQgICAgIGBqc29uOlwibWl4YW50ZVwiYCAgLy/mnIDlsI/kuIvms6hcclxuIExpdmVUaW1lICBpbnQ2NCAgIGBqc29uOlwibGl2ZXRpbWVcImAgLy/moYzlrZDkvb/nlKjml7bpl7Qo56eSKVxyXG4gU2VhdHMgICAgIGludDggICAgYGpzb246XCJzZWF0c1wiYCAgICAvL+W6p+S9jeaVsFxyXG4gVGFibGVOYW1lIHN0cmluZyAgYGpzb246XCJuYW1lXCJgICAgICAvL+ahjOWtkOWQjeensFxyXG4gQnVsbE11bCAgIFtdaW50MzIgYGpzb246XCJidWxsbXVsXCJgICAvL+S7juaXoOeJm+W8gOWni++8jOS8oOS4gOS4quaVsOe7hFxyXG4gfVxyXG4qICovXHJcblxyXG5mdW5jdGlvbiBDbHViQ3JlYXRlUm9vbVJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnLHR5cGUpIHtcclxuICAgICAgICBjYy5sb2coXCJDcmVhdGVSb29tUmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGNsdWJpZCA6IHR5cGUuY2x1YmlkLFxyXG4gICAgICAgICAgICBjbHVibGV2ZWwgOiB0eXBlLmNsdWJsZXZlbCxcclxuICAgICAgICAgICAgZ2FtZWlkIDogdHlwZS5nYW1laWQsXHJcbiAgICAgICAgICAgIGdhbWVsZXZlbCA6IHR5cGUuZ2FtZWxldmVsLFxyXG4gICAgICAgICAgICBwYXJhbSA6IEJBU0U2NC5lbmNvZGVyKEpTT04uc3RyaW5naWZ5KG1zZykpLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIENsdWJDcmVhdGVSb29tUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzIzLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuLypcclxuKlxyXG4qIHR5cGUgVVNfUkVTUF9DUkVBVEVfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBDbHViSWQgICAgIGludCAgICBganNvbjpcImNsdWJpZFwiYCAgICAgICAgICAgLy/lpoLmnpzmmK/mma7pgJrnjqnlrrbvvIw9MFxyXG4gQ2x1YkxldmVsICBpbnQgICAgYGpzb246XCJjbHVibGV2ZWxcImAgIC8v5L+x5LmQ6YOo562J57qnXHJcbiBQcml2YXRlSWRzIFtdaW50ICBganNvbjpcInByaXZhdGVpZHNcImAgLy/lpoLmnpxyZXRfc3VjY2VzcywgcHJpdmF0ZUlkc1swXeaYr+aWsOeUn+aIkOeahDbkvY3mlbDlgLzvvIxcclxuIC8v5aaC5p6cUkVUX0ZVTExfUFJJVkFURV9UQUJMRSA9IC00OCDku6PooajmgqjliJvlu7rnmoTnp4HkurrmoYzlt7Lnu4/ovr7liLDkuIrnur8sXHJcbiAvL1x0cHJpdmF0ZWlkc+aYr+aJgOS7peWIm+W7uui/h+eahDbkvY3mlbAsIOeVjOmdouaPkOekuueOqeWutuW3sue7j+WIm+W7uuS6huWTquS6m+engeS6uuahjFxyXG4gR2FtZUlkICAgICB1aW50MTYgYGpzb246XCJnYW1laWRcImBcclxuIEdhbWVMZXZlbCAgdWludDE2IGBqc29uOlwiZ2FtZWxldmVsXCJgXHJcbiBHYW1lU3ZjSWQgIHVpbnQzMiBganNvbjpcImdhbWVzdmNpZFwiYCAvL+a4uOaIj+acjeWKoeWZqElEXHJcbiBUYWJsZUlkICAgIGludDMyICBganNvbjpcInRhYmxlaWRcImAgICAvL+a4uOaIj+S4reafkOW8oOahjOWtkElEXHJcbiB9Ki9cclxuZnVuY3Rpb24gQ2x1YkNyZWF0ZVJvb21SZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfQ1JFQVRFX1RBQkxFX0NNRF9JRDtcclxuICAgIHRoaXMucHJpdmF0ZWlkID0gMDsgICAgICAgICAvL+WFreS9jeaVsOeahOahjOWtkElEKOaIv+mXtClcclxuICAgIHRoaXMuZ2FtZXN2Y2lkID0gMDsgICAgICAgICAvL+a4uOaIj+acjeWKoeWZqElEXHJcbiAgICB0aGlzLnRhYmxlaWQgPSAwOyAgICAgICAgICAgLy/muLjmiI/kuK3mn5DlvKDmoYzlrZBJRFxyXG4gICAgdGhpcy5nYW1lbGV2ZWwgPSAxO1xyXG4gICAgdGhpcy5nYW1laWQgPSAwO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIC8ve1wiY21kXCI6MTk2NjE2LFwic2VxXCI6MSxcInVpZFwiOjEwMDQyLFwiY29kZVwiOjAsXCJkZXNjXCI6XCLmiafooYzmiJDlip9cIixcInByaXZhdGVpZFwiOjM1NDk2NyxcImdhbWVzdmNpZFwiOjUsXCJ0YWJsZWlkXCI6MH1cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLmdhbWVpZCA9IG1zZy5nYW1laWQ7XHJcbiAgICAgICAgdGhpcy5jbHViaWQgPSBtc2cuY2x1YmlkO1xyXG4gICAgICAgIHRoaXMuY2x1YmxldmVsID0gbXNnLmNsdWJsZXZlbDtcclxuICAgICAgICB0aGlzLnByaXZhdGVpZCA9IG1zZy5wcml2YXRlaWRzO1xyXG4gICAgICAgIHRoaXMuZ2FtZXN2Y2lkID0gbXNnLmdhbWVzdmNpZDtcclxuICAgICAgICB0aGlzLnRhYmxlaWQgPSBtc2cudGFibGVpZDtcclxuICAgICAgICB0aGlzLmdhbWVsZXZlbCA9IG1zZy5nYW1lbGV2ZWw7XHJcbiAgICAgICAgdGhpcy5nYW1laWQgPSBtc2cuZ2FtZWlkO1xyXG5cclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDbHViQ3JlYXRlUm9vbVJlc3BQYWNrZXQ7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgQXJlYVZpZXcgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgQXJlYVN0cmluZyA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJOYW1lIDogY2MuRWRpdEJveCxcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuXHJcbiAgICBvblNjZW5lTXNnIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcblxyXG4gICAgICAgIGlmKG1zZy5wb3BWaWV3ID09IFwiQ2x1YkFyZWFWaWV3XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID09IFwiQ2x1YkFyZWFDZWxsXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQXJlYVN0cmluZy5zdHJpbmcgPSBtc2cuYXJlYTtcclxuICAgICAgICAgICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKFwiTG9hZGluZ1NjZW5lXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZygnQ2x1YkNyZWF0ZVZpZXcuY2FsbEJhY2tCdG4sQnRuTmFtZSA9ICcgKyBCdG5OYW1lKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmKEJ0bk5hbWUgPT0gXCJCdG5DcmVhdGVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuQXJlYVN0cmluZy5zdHJpbmcgPT0gXCJcIlxyXG4gICAgICAgICAgICAgICAgfHwgdGhpcy5DbHViTmFtZS5zdHJpbmcgPT0gXCJcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLkv7HkuZDpg6jlkI3lrZfmiJblnLDlnYDkuI3og73kuLrnqbpcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZSA6IHRoaXMuQ2x1Yk5hbWUuc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgaGVhZHVybCA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzIDogdGhpcy5BcmVhU3RyaW5nLnN0cmluZyxcclxuICAgICAgICAgICAgICAgIGxldmVsIDogMSxcclxuICAgICAgICAgICAgICAgIGludHJvIDogXCJcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0NSRUFURV9DTFVCX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQnRuUG9zaXRpb25cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBBcmVhVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQXJlYVZpZXcpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoQXJlYVZpZXcpO1xyXG4gICAgICAgICAgICBBcmVhVmlldy5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC85LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpXHJcbi8qXHJcbiogdHlwZSBDTFVCX1JFUV9PV05FUl9STV9NRU1CRVJfVCBzdHJ1Y3Qge1xyXG4gQ2x1YkhlYWRcclxuIFBhcmFtIFBBUkFNX1JFUV9PV05FUl9STV9NRU1CRVJfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFUV9PV05FUl9STV9NRU1CRVJfVCBzdHJ1Y3Qge1xyXG4gVWlkIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gfSovXHJcbmZ1bmN0aW9uIENsdWJEZWxNZW1iZXJSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuQ0xVQl9SRVFfT1dORVJfUk1fTUVNQkVSX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJEZWxNZW1iZXJSZXFQYWNrZXQuc2VuZFwiKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHVpZCA6IG1zZy51aWQsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBjbHViaWQgOiBtc2cuY2x1YmlkLFxyXG4gICAgICAgICAgICBwYXJhbSA6IGRhdGEsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ2x1YkRlbE1lbWJlclJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC85LlxyXG4gKi9cclxuLypcclxuKlxyXG4gICB0eXBlIENMVUJfUkVTUF9PV05FUl9STV9NRU1CRVJfVCBzdHJ1Y3Qge1xyXG4gICAgICAgIEpzb25IZWFkXHJcbiAgICAgICAgUmVzcEhlYWRcclxuICAgICAgICBQYXJhbSBQQVJBTV9SRVNQX09XTkVSX1JNX01FTUJFUl9UIGBqc29uOlwicGFyYW1cImBcclxuICAgIH1cclxuXHJcbiAgICB0eXBlIFBBUkFNX1JFU1BfT1dORVJfUk1fTUVNQkVSX1Qgc3RydWN0IHtcclxuICAgICAgICBDbHViSWQgICBpbnQgICAgYGpzb246XCJjbHViaWRcImBcclxuICAgICAgICBDbHViTmFtZSBzdHJpbmcgYGpzb246XCJjbHVibmFtZVwiYFxyXG4gICAgICAgIFVpZCAgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gICAgICAgIE5hbWUgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgIH1cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcbmZ1bmN0aW9uIENsdWJEZWxNZW1iZXJSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfT1dORVJfUk1fTUVNQkVSX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmFtID0gbXNnLnBhcmFtO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ2x1YkRlbE1lbWJlclJlc3BQYWNrZXQ7IiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIEVkaXRCb3ggOiBjYy5FZGl0Qm94LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSkge1xyXG5cclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKCdDbHViQ3JlYXRlVmlldy5jYWxsQmFja0J0bixCdG5OYW1lID0gJyArIEJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0bkZpbmRcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAga2V5IDogdGhpcy5FZGl0Qm94LnN0cmluZyxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfU0VBUkNIX0NMVUJfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBVdGlsVG9vbCA9IHJlcXVpcmUoJ1V0aWxUb29sJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVDYWxsT0MgPSByZXF1aXJlKCdHYW1lQ2FsbE9DJyk7XHJcbnZhciBBbGVydFZpZXcgPSByZXF1aXJlKFwiQWxlcnRWaWV3XCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ2x1YlRpdGxlICAgICAgOiBjYy5MYWJlbCwgICAgICAvL+S/seS5kOmDqFRpdGxlXHJcbiAgICAgICAgQ2x1Yk5hbWUgICAgICAgOiBjYy5MYWJlbCwgICAgICAvL+S/seS5kOmDqOWQjeensFxyXG4gICAgICAgIENsdWJQZXJzb25zICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ2x1YkhlYWQgICAgICAgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgQ2x1YkFkcmVzcyAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBDbHViT3duZXIgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJNZW1iZXJIZWFkIDogW2NjLlNwcml0ZV0sXHJcbiAgICAgICAgQ2x1Yk1lbUhlYWRCZyAgOiBbY2MuU3ByaXRlXSxcclxuICAgICAgICBDbHViT3duZXJIZWFkICA6IGNjLlNwcml0ZSxcclxuICAgICAgICBDbHViSWQgICAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJUaW1lICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ2x1YkludHJvRG9jICAgOiBjYy5SaWNoVGV4dCxcclxuICAgICAgICBDbHViTWVtYmVyICAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBDbHViU2V0VmlldyAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBTaGFyZVZpZXcgICAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBDbHViTGV2ZWwgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJMZXZlbFZpZXcgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIGNjY2NjIDogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLkNsdWJNZW1IZWFkQmdbaV0ubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAvLyB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKipOZXR3b3JrKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICAvL3RoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfRElTTUlTU19DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25EaXNtaXNzQ2x1Yk1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENMVUJfUkVTUF9HRVRfTUVNQkVSX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkdldENsdWJNZW1iZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX09XTkVSX1JNX01FTUJFUl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGVsTWVtYmVyTXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkdldENsdWJNZW1iZXIgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3QgPSBtc2cubGlzdDtcclxuICAgICAgICAgICAgdGhpcy5zZXRIZWFkVXJsTGlzdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EZWxNZW1iZXJNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3Lm9uRGVsTWVtYmVyTXNnIG1zZz1cIiwgbXNnKTtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICBpZiAobXNnLnBhcmFtLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7IC8v5aaC5p6c5piv5oiR6Ieq5bexXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJJbmZvVmlldy5vbkRpc21pc3NDbHViTXNnIG5vdGlmeSBDbHViUm9vbVZpZXdcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3BWaWV3IDogXCJDbHViSW5mb1ZpZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBidG4gICAgIDogXCJvbkRpc21pc3NDbHViTXNnXCIsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csIGRhdGE6bWVzc2FnZX0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kR2V0TWVtYmVyTGlzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkRpc21pc3NDbHViTXNnIDogZnVuY3Rpb24gKG1zZylcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViSW5mb1ZpZXcub25EaXNtaXNzQ2x1Yk1zZyBtc2c9XCIsIG1zZyk7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChtc2cucGFyYW0ucm9sZSA9PSB3aW5kb3cuQ2x1YlJvbGUuRV9DTFVCX09XTkVSX1JPTEUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIue+pOS4u1wiICsgbXNnLnBhcmFtLm5hbWUgKyBcIuino+aVo+S6hlwiICsgbXNnLnBhcmFtLmNsdWJuYW1lKSArIFwi5L+x5LmQ6YOoXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgTG9hZGluZ1ZpZXcuZGlzbWlzcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJJbmZvVmlldy5vbkRpc21pc3NDbHViTXNnIG5vdGlmeSBDbHViUm9vbVZpZXdcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3BWaWV3IDogXCJDbHViSW5mb1ZpZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBidG4gICAgIDogXCJvbkRpc21pc3NDbHViTXNnXCIsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5wYXJhbS51aWQgPT0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCkgeyAvL+WmguaenOaYr+aIkeiHquW3sVxyXG5cclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo6YCA5Ye65L+x5LmQ6YOoXCIgKyBtc2cucGFyYW0uY2x1Ym5hbWUgKyBcIuaIkOWKn1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBMb2FkaW5nVmlldy5kaXNtaXNzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3Lm9uRGlzbWlzc0NsdWJNc2cgbm90aWZ5IENsdWJSb29tVmlld1wiKTtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkNsdWJJbmZvVmlld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0biAgICAgOiBcIm9uRGlzbWlzc0NsdWJNc2dcIixcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOm1lc3NhZ2V9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8v5aaC5p6c5piv5YW25LuW546p5a62LOmHjeaWsOWIt+aWsOS4gOS4i+eUqOaIt+WktOWDj1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3cobXNnLnBhcmFtLm5hbWUgKyBcIumAgOWHuuS/seS5kOmDqFwiICsgbXNnLnBhcmFtLmNsdWJuYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEdldE1lbWJlckxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9TY2VuZS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIG9uU2NlbmVNc2cgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICBpZiAobXNnLnBvcFZpZXcgPT0gXCJDbHViU2V0Vmlld1wiIHx8IG1zZy5wb3BWaWV3ID09IFwiQ2x1Yk1lbWJlclZpZXdcIikge1xyXG4gICAgICAgICAgICBpZiAobXNnLmJ0biA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dEluZm8oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGVhZFVybExpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy9be1wiY2x1YmlkXCI6MTAwMDAwMTksXCJyb2xlXCI6MSxcIm93bmVydWlkXCI6MTA2ODgsXCJsZXZlbFwiOjEsIFwibmFtZVwiOlwiYXNcIixcclxuICAgIC8vIFwiaGVhZHVybFwiOlwiXCIsXCJhZGRyZXNzXCI6XCLlub/opb8g55m+6Imy5biCXCIsXCJpbnRyb1wiOlwiXCIsXCJlbmR0aW1lXCI6MTQ5NDMyNDE5NyxcInN0YXR1c1wiOjEsXHJcbiAgICAvLyBcIm1lbWJlcnNcIjoxLCBcIm1heG1lbWJlclwiOjEwfV1cclxuICAgIHNldFRleHRJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJJbmZvVmlldy5zZXRUZXh0SW5mbyBpbmZvPVwiLCBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8pO1xyXG5cclxuICAgICAgICB0aGlzLkNsdWJUaXRsZS5zdHJpbmcgICAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuQ2x1Yk5hbWUuc3RyaW5nICAgICAgID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLm5hbWU7XHJcbiAgICAgICAgdGhpcy5DbHViUGVyc29ucy5zdHJpbmcgICAgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubWVtYmVycyArIFwiL1wiICtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLm1heG1lbWJlcjtcclxuICAgICAgICB0aGlzLkNsdWJBZHJlc3Muc3RyaW5nICAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5hZGRyZXNzO1xyXG4gICAgICAgIHRoaXMuQ2x1Yk93bmVyLnN0cmluZyAgICAgID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLm93bmVybmFtZTtcclxuICAgICAgICB0aGlzLkNsdWJJZC5zdHJpbmcgICAgICAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5jbHViaWQ7XHJcbiAgICAgICAgdGhpcy5DbHViSW50cm9Eb2Muc3RyaW5nICAgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uaW50cm87XHJcbiAgICAgICAgLy8gdGhpcy5DbHViTWVtYmVySGVhZC5sZW5ndGggPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubWVtYmVycztcclxuICAgICAgICB0aGlzLkNsdWJUaW1lLnN0cmluZyA9IC8qXCLliJvlu7rkuo5cIiArIFV0aWxUb29sLmdldEZvcm1hdERhdGEoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNyZWF0ZXRpbWUpICsgXCIgIFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyovIFV0aWxUb29sLmdldEZvcm1hdERhdGEoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmVuZHRpbWUpICsgXCLliLDmnJ9cIjtcclxuICAgICAgICB0aGlzLkNsdWJMZXZlbC5zdHJpbmcgPSB0aGlzLmdldENsdWJMZXZlbE5hbWUoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0SGVhZFVybExpc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3Q7XHJcbiAgICAgICAgaWYgKGxpc3QgPT0gbnVsbCB8fCBsaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpID0gMDtcclxuICAgICAgICBmb3IgKDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5DbHViTWVtSGVhZEJnW2ldLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgVXBkYXRlV1hIZWFkSWNvbihsaXN0W2ldLmhlYWR1cmwsIHRoaXMuQ2x1Yk1lbWJlckhlYWRbaV0pXHJcbiAgICAgICAgICAgIGlmIChpID49IDMpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGk9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0W2ldLnJvbGUgPT0gd2luZG93LkNsdWJSb2xlLkVfQ0xVQl9PV05FUl9ST0xFKSB7XHJcbiAgICAgICAgICAgICAgICBVcGRhdGVXWEhlYWRJY29uKGxpc3RbaV0uaGVhZHVybCwgdGhpcy5DbHViT3duZXJIZWFkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0Q2x1YkluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0SW5mbygpO1xyXG4gICAgICAgIHRoaXMuc2VuZEdldE1lbWJlckxpc3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2VuZEdldE1lbWJlckxpc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3LnNlbmRHZXRNZW1iZXJMaXN0IGNsdWJpZD1cIiwgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNsdWJpZDogR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX0dFVF9NRU1CRVJfTElTVF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZygnQ2x1YkluZm9WaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSAnICsgQnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuXHJcbiAgICAgICAgaWYgKEJ0bk5hbWUgPT0gXCJCdG5DaGFuZ2VJbmZvXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgQ2x1YlNldFZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJTZXRWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKENsdWJTZXRWaWV3KTtcclxuICAgICAgICAgICAgQ2x1YlNldFZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgcG9wVmlldyA6IFwiQ2x1YkluZm9WaWV3XCIsXHJcbiAgICAgICAgICAgICAgICBidG4gICAgIDogXCJCdG5DbG9zZVwiLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csIGRhdGE6bWVzc2FnZX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKEJ0bk5hbWUgPT0gXCJCdG5NZW1iZXJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBDbHViTWVtYmVyID0gY2MuaW5zdGFudGlhdGUodGhpcy5DbHViTWVtYmVyKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKENsdWJNZW1iZXIpO1xyXG4gICAgICAgICAgICBDbHViTWVtYmVyLnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0bkRlbENsdWJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgYWxlcnQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2x1YmlkIDogR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKENMVUJfUkVRX0RJU01JU1NfQ0xVQl9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXCLliKDpmaTlubbpgIDlh7pcIik7XHJcbiAgICAgICAgICAgIGFsZXJ0LnNob3coXCLmgqjnoa7lrprmmK/lkKbliKDpmaTlubbmjqjlh7rkv7HkuZDpg6jvvJ9cIixBbGVydFZpZXdCdG5UeXBlLkVfQlROX0NBTkNMRSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0blNoYXJlQnVzaW5lc3NcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBzaGFyZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlNoYXJlVmlldyk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChzaGFyZVZpZXcpO1xyXG4gICAgICAgICAgICBzaGFyZVZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICAgICAgdmFyIHN0cmluZyA9IFwi5oiR5q2j5Zyo546p5ri45oiP77y7XCIgKyBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuZ2V0QXBwTmFtZSgpICtcIu+8vSzkv7HkuZDpg6goXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCsgXCIp5qyi6L+O5oKo55qE5Yqg5YWl77yB77yB77yBXCI7XHJcbiAgICAgICAgICAgIHNoYXJlVmlldy5nZXRDb21wb25lbnQoXCJTaGFyZVZpZXdcIikuc2V0U2hhcmVUeWVwKFNoYXJlVHlwZS5FX1NIQVJFVFlQRV9MSU5LLCBzdHJpbmcsIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5jbGllbnR1cmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKEJ0bk5hbWUgPT0gXCJCdG5DbHViTGV2ZWxcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5vd25lcnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGV2ZWxWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5DbHViTGV2ZWxWaWV3KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChsZXZlbFZpZXcpO1xyXG4gICAgICAgICAgICAgICAgbGV2ZWxWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRDbHViTGV2ZWxOYW1lIDogZnVuY3Rpb24gKGxldmVsKSB7XHJcbiAgICAgICAgc3dpdGNoIChsZXZlbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuS4gOaYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLkuozmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5LiJ5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuWbm+aYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLkupTmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5YWt5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuS4g+aYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLlhavmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5Lmd5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLljYHmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBVdGlsVG9vbCA9IHJlcXVpcmUoJ1V0aWxUb29sJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIENsdWJUaXRsZSAgIDogY2MuTGFiZWwsICAgICAgLy/kv7HkuZDpg6hUaXRsZVxyXG4gICAgICAgIENsdWJOYW1lICAgIDogY2MuTGFiZWwsICAgICAgICAvL+S/seS5kOmDqOWQjeensFxyXG4gICAgICAgIENsdWJQZXJzb25zIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ2x1YkhlYWQgICAgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgQ2x1YkFkZHJlc3MgOiBjYy5MYWJlbCxcclxuICAgICAgICBDbHViT3duZXIgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJPd25lckhlYWQgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgQ2x1YklkICAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBDbHViSW50cm9Eb2M6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zZXRUZXh0SW5mbygpO1xyXG4gICAgICAgIHRoaXMuc2V0SGVhZFVybCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqTmV0d29yayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJKb2luVmlldy5vbk1lc3NhZ2VcIik7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX0pPSU5fQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSm9pbkNsdWJNc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uSm9pbkNsdWJNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICBpZiAobXNnLnBhcmFtLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihtc2cucGFyYW0uaXNhbGxvdyA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLnvqTkuLvlkIzmhI/mgqjliqDlhaXku5bnmoTkv7HkuZDpg6hcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfQ0xVQl9MSVNUX0NNRF9JRCkuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIue+pOS4u+aLkue7neaCqOWKoOWFpeS7lueahOS/seS5kOmDqFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wVmlldyA6IFwiQ2x1YkpvaW5WaWV3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuICAgICA6IFwiUmVzcEpvaW5cIixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAge3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOm1lc3NhZ2V9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy9be1wiY2x1YmlkXCI6MTAwMDAwMTksXCJyb2xlXCI6MSxcIm93bmVydWlkXCI6MTA2ODgsXCJsZXZlbFwiOjEsIFwibmFtZVwiOlwiYXNcIixcclxuICAgIC8vIFwiaGVhZHVybFwiOlwiXCIsXCJhZGRyZXNzXCI6XCLlub/opb8g55m+6Imy5biCXCIsXCJpbnRyb1wiOlwiXCIsXCJlbmR0aW1lXCI6MTQ5NDMyNDE5NyxcInN0YXR1c1wiOjEsXHJcbiAgICAvLyBcIm1lbWJlcnNcIjoxLCBcIm1heG1lbWJlclwiOjEwfV1cclxuICAgIHNldFRleHRJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuQ2x1YlRpdGxlLnN0cmluZyAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuQ2x1Yk5hbWUuc3RyaW5nICAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5uYW1lO1xyXG4gICAgICAgIHRoaXMuQ2x1YlBlcnNvbnMuc3RyaW5nICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5tZW1iZXJzICsgXCIvXCIgK1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubWF4bWVtYmVyO1xyXG4gICAgICAgIHRoaXMuQ2x1YkFkZHJlc3Muc3RyaW5nICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5hZGRyZXNzO1xyXG4gICAgICAgIHRoaXMuQ2x1Yk93bmVyLnN0cmluZyAgICA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5vd25lcm5hbWU7XHJcbiAgICAgICAgdGhpcy5DbHViSWQuc3RyaW5nICAgICAgID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZDtcclxuICAgICAgICB0aGlzLkNsdWJJbnRyb0RvYy5zdHJpbmcgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uaW50cm87XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEhlYWRVcmwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy90aGlzLkNsdWJPd25lckhlYWRcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKCdDbHViSm9pblZpZXcuY2FsbEJhY2tCdG4sQnRuTmFtZSA9ICcgKyBCdG5OYW1lKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmIChCdG5OYW1lID09IFwiQnRuQ2xvc2VcIikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9IGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0bkpvaW5DbHViXCIpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB1aWQgICAgIDogR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCxcclxuICAgICAgICAgICAgICAgIG5hbWUgICAgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkubmFtZSxcclxuICAgICAgICAgICAgICAgIGhlYWR1cmwgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuaGVhZHVybCxcclxuICAgICAgICAgICAgICAgIHNleCAgICAgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuc2V4LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKENMVUJfUkVRX0pPSU5fQ0xVQl9DTURfSUQpLnNlbmQoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIiwidmFyIFV0aWxUb29sID0gcmVxdWlyZSgnVXRpbFRvb2wnKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIEFsZXJ0VmlldyA9IHJlcXVpcmUoJ0FsZXJ0VmlldycpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgQ2x1YkxldmVsRmxhZyA6IGNjLlNwcml0ZSxcclxuICAgICAgICBGb250TGV2ZWwgOiBjYy5MYWJlbCxcclxuICAgICAgICBGb250THZJbmZvIDogY2MuTGFiZWwsXHJcbiAgICAgICAgRm9udE5lZWREaWEgOiBjYy5MYWJlbCxcclxuICAgICAgICBMZXZlbEZsYWdGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgTGV2ZWxOdW0gOiAwLFxyXG4gICAgICAgIExldmVsQ29zdCA6IDAsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgLy97XCJsZXZlbFwiOjEsXCJsaXZldGltZVwiOjMwLFwiZGlhbW9uZFwiOjAsICAgIFwibWF4cGVvcGxlXCI6MTAsIFwibWF4dGFibGVcIjoyfSxcclxuICAgIHNldENlbGxJbmZvIDogZnVuY3Rpb24obXNnKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0Q2x1YkxldmVsKG1zZy5sZXZlbCk7XHJcbiAgICAgICAgdGhpcy5Gb250TmVlZERpYS5zdHJpbmcgPSBcIlwiKyBtc2cuZGlhbW9uZDtcclxuICAgICAgICB0aGlzLkxldmVsQ29zdCA9IG1zZy5kaWFtb25kO1xyXG4gICAgICAgIHRoaXMuRm9udEx2SW5mby5zdHJpbmcgPSBcIuaPkOmrmOS6uuaVsOS4iumZkOiHs1wiICsgbXNnLm1heHBlb3BsZSArIFwi5Lq677yM5Y+v6K6+566h55CG5ZGYXCIgKyBtc2cubGV2ZWwgKyBcIuS6uuOAguaMgee7rVwiICsgbXNnLmxpdmV0aW1lICsgXCLlpKlcIjtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldENsdWJMZXZlbCA6IGZ1bmN0aW9uIChsZXZlbCkge1xyXG4gICAgICAgIHRoaXMuTGV2ZWxOdW0gPSBsZXZlbDtcclxuICAgICAgICB0aGlzLkZvbnRMZXZlbC5zdHJpbmcgPSBVdGlsVG9vbC5nZXRDbHViTGV2ZWxOYW1lKGxldmVsKTtcclxuICAgICAgICB0aGlzLkNsdWJMZXZlbEZsYWcuc3ByaXRlRnJhbWUgPSB0aGlzLkxldmVsRmxhZ0ZyYW1lW2xldmVsLTFdO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgQ2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsIDwgdGhpcy5MZXZlbE51bSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5kaWFtb25kIDwgdGhpcy5MZXZlbENvc3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo55qE6ZK755+z5LiN6LazXCIgKyBcIizml6Dms5XotK3kubBcIiAgKyBVdGlsVG9vbC5nZXRDbHViTGV2ZWxOYW1lKHRoaXMuTGV2ZWxOdW0pICsgXCLvvIzor7fliY3lvoDllYbln47otK3kubDpkrvnn7NcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kVXBDbHViUGFja2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9LCBcIuehruiupFwiKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0LnNob3coXCLmgqjmmK/lkKbnoa7orqToirHotLlcIiAgKyB0aGlzLkxldmVsQ29zdCArIFwi5Liq6ZK755+z6LSt5LmwXCIgICsgVXRpbFRvb2wuZ2V0Q2x1YkxldmVsTmFtZSh0aGlzLkxldmVsTnVtKSxBbGVydFZpZXdCdG5UeXBlLkVfQlROX0NMT1NFKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaCqOW3sui0reS5sFwiICsgVXRpbFRvb2wuZ2V0Q2x1YkxldmVsTmFtZSh0aGlzLkxldmVsTnVtKSArIFwiLOaXoOazlemZjee6p+i0reS5sFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZW5kVXBDbHViUGFja2V0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmZvID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBjbHViaWQgIDogaW5mby5jbHViaWQsXHJcbiAgICAgICAgICAgIGhlYWR1cmwgOiBcIlwiLFxyXG4gICAgICAgICAgICBpbnRybyAgIDogXCJcIixcclxuICAgICAgICAgICAgYWRkcmVzcyA6IFwiXCIsXHJcbiAgICAgICAgICAgIGxldmVsICAgOiB0aGlzLkxldmVsTnVtLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuQ0xVQl9SRVFfTU9ESUZZX0lORk9fQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgfSxcclxuXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIENsdWJMZXZlbENlbGwgPSByZXF1aXJlKCdDbHViTGV2ZWxDZWxsJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxudmFyIFRvYXN0VmlldyA9IHJlcXVpcmUoJ1RvYXN0VmlldycpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ2x1Ykx2RmxhZyA6IGNjLlNwcml0ZSxcclxuICAgICAgICBDbHViTHZGbGFnRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIEZvbnRDdXJMZXZlbCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFRpbWVMYWJlbCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEN1ckRpYW1vbmQgOiBjYy5MYWJlbCxcclxuXHJcbiAgICAgICAgY2x1YkxldmVsQ2VsbCA6IGNjLlByZWZhYixcclxuICAgICAgICBDb250ZW50IDogY2MuTm9kZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIC8vdGhpcy5pbml0QmFzZURhdGEoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdEJhc2VEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcblxyXG5cclxuICAgIC8vIHtcImxldmVsXCI6MSxcImxpdmV0aW1lXCI6MzAsXCJkaWFtb25kXCI6MCwgICAgXCJtYXhwZW9wbGVcIjoxMCwgXCJtYXh0YWJsZVwiOjJ9LFxyXG4gICAgLy8ge1wibGV2ZWxcIjoyLFwibGl2ZXRpbWVcIjozMCxcImRpYW1vbmRcIjoxMDAwLCBcIm1heHBlb3BsZVwiOjUwLCBcIm1heHRhYmxlXCI6M30sXHJcbiAgICAvLyB7XCJsZXZlbFwiOjMsXCJsaXZldGltZVwiOjMwLFwiZGlhbW9uZFwiOjQwMDAsIFwibWF4cGVvcGxlXCI6MTAwLFwibWF4dGFibGVcIjo0fSxcclxuICAgIC8vIHtcImxldmVsXCI6NCxcImxpdmV0aW1lXCI6MzAsXCJkaWFtb25kXCI6MTAwMDAsXCJtYXhwZW9wbGVcIjoyMDAsXCJtYXh0YWJsZVwiOjl9XHJcbiAgICBpbml0QmFzZURhdGEgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdEN1ckNsdWJJbmZvKCk7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IDA7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7aW5kZXggPCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuQ2x1YlVwZ3JhZGVDb3N0Lmxlbmd0aDtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGxldmVsSXRlbSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuY2x1YkxldmVsQ2VsbCk7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IGxldmVsSXRlbS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodDtcclxuICAgICAgICAgICAgbGV2ZWxJdGVtLnNldFBvc2l0aW9uKGNjLnAoMCwwIC0gNjIwIC0gaGVpZ2h0KmluZGV4KSk7XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudC5hZGRDaGlsZChsZXZlbEl0ZW0pO1xyXG4gICAgICAgICAgICBsZXZlbEl0ZW0uZ2V0Q29tcG9uZW50KCdDbHViTGV2ZWxDZWxsJykuc2V0Q2VsbEluZm8oR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkNsdWJVcGdyYWRlQ29zdFtpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRDdXJDbHViSW5mbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkZvbnRDdXJMZXZlbC5zdHJpbmcgPSBVdGlsVG9vbC5nZXRDbHViTGV2ZWxOYW1lKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5sZXZlbCk7XHJcbiAgICAgICAgdGhpcy5DbHViTHZGbGFnLnNwcml0ZUZyYW1lID0gdGhpcy5DbHViTHZGbGFnRnJhbWVbR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsIC0gMV07XHJcbiAgICAgICAgdGhpcy5UaW1lTGFiZWwuc3RyaW5nID0gVXRpbFRvb2wuZ2V0Rm9ybWF0RGF0YShHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uZW5kdGltZSk7XHJcbiAgICAgICAgdGhpcy5DdXJEaWFtb25kLnN0cmluZyA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5kaWFtb25kO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBjYy5sb2coXCJDbHViTGV2ZWxDZWxsLm9uTWVzc2FnZSBjbWQ9XCIsIG1zZy5jbWQsIFwiIHdpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEPVwiLCB3aW5kb3cuQ0xVQl9SRVNQX01PRElGWV9JTkZPX0NNRF9JRCk7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX01PRElGWV9JTkZPX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb2RpZnlJbmZvTXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfVVNFUl9ERVRBSUxfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVc2VyRGlhbW9uZChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVVc2VyRGlhbW9uZDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJMZXZlbENlbGwudXBkYXRlVXNlckRpYW1vbmRcIik7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmdvbGQgICAgPSBtc2cuZ29sZDtcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuZGlhbW9uZCA9IG1zZy5kaWFtb25kO1xyXG4gICAgICAgIHRoaXMuaW5pdEN1ckNsdWJJbmZvKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIENsdWJJZCAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiAgICAvLyBTdGF0dXMgIGludCAgICBganNvbjpcInN0YXR1c1wiYFxyXG4gICAgLy8gTmFtZSAgICBzdHJpbmcgYGpzb246XCJuYW1lXCJgXHJcbiAgICAvLyBIZWFkVXJsIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuICAgIC8vIEFkZHJlc3Mgc3RyaW5nIGBqc29uOlwiYWRkcmVzc1wiYFxyXG4gICAgLy8gSW50cm8gICBzdHJpbmcgYGpzb246XCJpbnRyb1wiYFxyXG4gICAgLy8gTGV2ZWwgICBpbnQgICAgYGpzb246XCJsZXZlbFwiYFxyXG4gICAgLy8gRW5kVGltZSBpbnQ2NCAgYGpzb246XCJlbmR0aW1lXCJgXHJcbiAgICBvbk1vZGlmeUluZm9Nc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MgKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJMZXZlbENlbGwub25Nb2RpZnlJbmZvTXNnIGNvZGU9XCIsIG1zZy5jb2RlLCBcIiBlbmR0aW1lPVwiLCBtc2cucGFyYW0uZW5kdGltZSk7XHJcbiAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5sZXZlbCAgICAgPSBOdW1iZXIobXNnLnBhcmFtLmxldmVsKTtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmVuZHRpbWUgICA9IG1zZy5wYXJhbS5lbmR0aW1lO1xyXG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuZ2V0Q3VyTGV2ZWxJbmZvKG1zZy5wYXJhbS5sZXZlbCk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJMZXZlbENlbGwub25Nb2RpZnlJbmZvTXNnICBpbmZvPVwiLCBpbmZvKTtcclxuXHJcbiAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5tYXhtZW1iZXIgPSBpbmZvLm1heHBlb3BsZTtcclxuXHJcbiAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5Y2H57qn5oiQ5YqfOiBcIiArIFV0aWxUb29sLmdldEZvcm1hdERhdGFEZXRhaWwoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmVuZHRpbWUpICsgXCLliLDmnJ9cIiwgMik7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckRldGFpbCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRDdXJDbHViSW5mbygpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhtc2cuZGVzYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRDdXJMZXZlbEluZm8gOiBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICB2YXIgbGlzdCA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5DbHViVXBncmFkZUNvc3Q7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PSBsaXN0W2ldLmxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdFswXTtcclxuICAgIH0sXHJcblxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBNdXNpY01nciAgID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIE9wTWFuYWdlIDogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIC8vIGBqc29uOlwidWlkXCJgXHJcbiAgICAvLyBganNvbjpcIm5hbWVcImBcclxuICAgIC8vIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gICAgLy8gYGpzb246XCJzZXhcImBcclxuICAgIC8vIGBqc29uOlwicm9sZVwiYFxyXG4gICAgLy8gYGpzb246XCJsYXN0dGltZVwiYFxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmluZm8gPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24gKGluZm8pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5pbmZvID0gaW5mbztcclxuICAgICAgICBpZiAoaW5mby5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfTUFOQUdFUl9ST0xFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuT3BNYW5hZ2Uuc3RyaW5nICA9IFwi5Y+W5raI566h55CG5ZGYXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmZvLnJvbGUgPT0gd2luZG93LkNsdWJSb2xlLkVfQ0xVQl9OT1JNQUxfUk9MRSkge1xyXG4gICAgICAgICAgICB0aGlzLk9wTWFuYWdlLnN0cmluZyAgPSBcIuiuvue9rueuoeeQhuWRmFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKCdDbHViTWVtYmVyUGVybWlzc2lvblZpZXcuY2FsbEJhY2tCdG4sIEJ0bk5hbWUgPSAnICsgQnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuXHJcbiAgICAgICAgaWYgKEJ0bk5hbWUgPT0gXCJHcmF5TGF5ZXJcIikge1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYoQnRuTmFtZSA9PSBcIlBlcm1pc3Npb25PcEJnXCIpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBjbHViaWQ6IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5jbHViaWQsXHJcbiAgICAgICAgICAgICAgICB1aWQgICA6IHRoaXMuaW5mby51aWQsXHJcbiAgICAgICAgICAgICAgICByb2xlICA6IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfTUFOQUdFUl9ST0xFLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfTUFOQUdFUl9ST0xFKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnJvbGUgPSB3aW5kb3cuQ2x1YlJvbGUuRV9DTFVCX05PUk1BTF9ST0xFO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJNZW1iZXJQZXJtaXNzaW9uVmlldyBTZW5kIE1vZGlmeSBSb2xlLCBkYXRhPVwiLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoQ0xVQl9SRVFfT1dORVJfTU9ESUZZX1JPTEVfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZihCdG5OYW1lID09IFwiUGVybWlzc2lvbkRlbEJnXCIpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBjbHViaWQgOiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uY2x1YmlkLFxyXG4gICAgICAgICAgICAgICAgdWlkICAgIDogdGhpcy5pbmZvLnVpZCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShDTFVCX1JFUV9PV05FUl9STV9NRU1CRVJfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgIH1cclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgTXVzaWNNZ3IgICA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBUb2FzdFZpZXcgID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG53aW5kb3cuQ2x1YlJvbGUgPSB7XHJcbiAgICBFX0NMVUJfT1dORVJfUk9MRSAgIDogMSwgLy/nvqTkuLtcclxuICAgIEVfQ0xVQl9NQU5BR0VSX1JPTEUgOiAyLCAvL+euoeeQhuWRmFxyXG4gICAgRV9DTFVCX05PUk1BTF9ST0xFICA6IDMsIC8v5pmu6YCa5oiQ5ZGYXHJcbn07XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBUaXRsZUxhYmVsICAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBVcGdyYWRlTGFiZWwgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBFZGl0TmFtZSAgICAgICAgOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIENsdWJQZXJzb25zQ2VsbCA6IGNjLlByZWZhYixcclxuICAgICAgICBTY3JvbGxWaWV3ICAgICAgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgICAgIENsdWJVcGdyYWRWaWV3ICA6IGNjLlByZWZhYixcclxuICAgICAgICBDbHViTWVtYmVyUGVybWlzc2lvblZpZXcgOiBjYy5QcmVmYWIsXHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zaG93VGl0bGUoKTtcclxuICAgICAgICB0aGlzLnNob3dNZW1iZXJMaXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dUaXRsZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlRpdGxlTGFiZWwuc3RyaW5nID0gXCLkvJrlkZjnrqHnkIYoXCIgKyBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubWVtYmVycyArIFwiL1wiICtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLm1heG1lbWJlciArIFwiKVwiO1xyXG4gICAgICAgIGlmIChHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkICE9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5vd25lcnVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLlVwZ3JhZGVMYWJlbC5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2hvd01lbWJlckxpc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3Q7XHJcbiAgICAgICAgdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcbiAgICAgICAgdmFyIGhlaWdodCA9IDA7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7IGxpc3QgIT0gbnVsbCAmJiBpbmRleCA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuY3JlYXRlQ2x1YlBlcnNvbkNlbGwobGlzdCwgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBoZWlnaHQgKiAobGlzdC5sZW5ndGgpID4gdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0ID0gaGVpZ2h0ICogKGxpc3QubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlYXJjaE9uZU1lbWJlciA6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3Q7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwOyBsaXN0ICE9IG51bGwgJiYgaW5kZXggPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICBpZiAobGlzdFtpbmRleF0ubmFtZSAhPSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJzZWFyY2hPbmVNZW1iZXIgOiBub3QgZm91bmQgbGlzdC5uYW1lPVwiLCBsaXN0W2luZGV4XS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInNlYXJjaE9uZU1lbWJlciA6IHN1Y2Nlc3MgZm91bmQgbmFtZT1cIiwgbmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuU2Nyb2xsVmlldy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2x1YlBlcnNvbkNlbGwobGlzdCwgaW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuacquaQnOe0ouWIsOS8muWRmDogXCIgKyBuYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgY3JlYXRlQ2x1YlBlcnNvbkNlbGwgOiBmdW5jdGlvbiAobGlzdCwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgQ2x1YlBlcnNvbnNDZWxsID0gY2MuaW5zdGFudGlhdGUodGhpcy5DbHViUGVyc29uc0NlbGwpO1xyXG5cclxuICAgICAgICB0aGlzLlNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZChDbHViUGVyc29uc0NlbGwpO1xyXG4gICAgICAgIHZhciBoZWlnaHQgPSBDbHViUGVyc29uc0NlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgQ2x1YlBlcnNvbnNDZWxsLnNldFBvc2l0aW9uKGNjLnAoMCwgMCAtIGhlaWdodCooaW5kZXggKyAwLjUpKSk7XHJcblxyXG4gICAgICAgIENsdWJQZXJzb25zQ2VsbC5nZXRDb21wb25lbnQoXCJDbHViUGVyc29uc0NlbGxcIikuc2V0UGVyc29uSW5mbyhsaXN0W2luZGV4XSk7XHJcblxyXG4gICAgICAgIC8v5LiN5piv6L+Z5Liq5L+x5LmQ6YOo55qE576k5Li75rKh5pyJ5p2D6ZmQ5L+u5pS55Lya5ZGYXHJcbiAgICAgICAgaWYgKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5vd25lcnVpZCAhPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJNZW1iZXJWaWV3LmNyZWF0ZUNsdWJQZXJzb25DZWxsIG5vdCBPd25lclwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsaXN0W2luZGV4XS5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfT1dORVJfUk9MRSkge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJDbHViTWVtYmVyVmlldy5jcmVhdGVDbHViUGVyc29uQ2VsbCBvd25lciByb2xlPVwiLCBsaXN0W2luZGV4XS5yb2xlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhlaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgQ2x1YlBlcnNvbnNDZWxsLmdldENvbXBvbmVudChcIkNsdWJQZXJzb25zQ2VsbFwiKS5CdG5TZXQubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIENsdWJQZXJzb25zQ2VsbC5nZXRDb21wb25lbnQoXCJDbHViUGVyc29uc0NlbGxcIikuQnRuU2V0Lm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGNlbGwgPSBldmVudC50YXJnZXQuZ2V0UGFyZW50KCkuZ2V0Q29tcG9uZW50KCdDbHViUGVyc29uc0NlbGwnKTtcclxuICAgICAgICAgICAgdmFyIENsdWJNZW1iZXJQZXJtaXNzaW9uVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1Yk1lbWJlclBlcm1pc3Npb25WaWV3KTtcclxuICAgICAgICAgICAgc2VsZi5ub2RlLmFkZENoaWxkKENsdWJNZW1iZXJQZXJtaXNzaW9uVmlldyk7XHJcbiAgICAgICAgICAgIENsdWJNZW1iZXJQZXJtaXNzaW9uVmlldy5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgICAgICBDbHViTWVtYmVyUGVybWlzc2lvblZpZXcuZ2V0Q29tcG9uZW50KCdDbHViTWVtYmVyUGVybWlzc2lvblZpZXcnKS5zZXREYXRhKGNlbGwuaW5mbyk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjYy5sb2coXCJjcmVhdGVDbHViUGVyc29uQ2VsbC5oZWlnaHQgPSBcIiArIGhlaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIGhlaWdodDtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViTWVtYmVyVmlldy5vbk1lc3NhZ2VcIik7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX09XTkVSX1JNX01FTUJFUl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGVsTWVtYmVyTXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9HRVRfTUVNQkVSX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkdldENsdWJNZW1iZXIobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX09XTkVSX01PRElGWV9ST0xFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Nb2RpZnlNZW1iZXJSb2xlKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ2x1YlJtTWVtIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIC8vcGFyYW1cclxuICAgICAgICAvLyBDbHViSWQgICBpbnQgICAgYGpzb246XCJjbHViaWRcImBcclxuICAgICAgICAvLyBDbHViTmFtZSBzdHJpbmcgYGpzb246XCJjbHVibmFtZVwiYFxyXG4gICAgICAgIC8vIFVpZCAgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gICAgICAgIC8vIE5hbWUgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgICAgICBpZiAobXNnLnBhcmFtLnVpZCA9PSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKSB7XHJcbiAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo6KKr56e76Zmk5L+x5LmQ6YOoXCIgKyBtc2cucGFyYW0uY2x1Ym5hbWUgKyBcIihcIiArICBtc2cucGFyYW0uY2x1YmlkICsgXCIpXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KCBtc2cucGFyYW0ubmFtZSArIFwi6KKr56e76Zmk5L+x5LmQ6YOoXCIgKyBtc2cucGFyYW0uY2x1Ym5hbWUgKyBcIihcIiArICBtc2cucGFyYW0uY2x1YmlkICsgXCIpXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdHlwZSBDTFVCX1JFU1BfT1dORVJfTU9ESUZZX1JPTEVfVCBzdHJ1Y3Qge1xyXG4gICAgLy8gICAgIEpzb25IZWFkXHJcbiAgICAvLyAgICAgUmVzcEhlYWRcclxuICAgIC8vICAgICBQYXJhbSBQQVJBTV9SRVNQX09XTkVSX01PRElGWV9ST0xFX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gICAgLy8gfVxyXG4gICAgLy9cclxuICAgIC8vIHR5cGUgUEFSQU1fUkVTUF9PV05FUl9NT0RJRllfUk9MRV9UIHN0cnVjdCB7XHJcbiAgICAvLyAgICAgQ2x1YklkIGludCAgICBganNvbjpcImNsdWJpZFwiYFxyXG4gICAgLy8gICAgIFVpZCAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuICAgIC8vICAgICBSb2xlICAgdWludDggIGBqc29uOlwicm9sZVwiYFxyXG4gICAgLy8gfVxyXG4gICAgb25Nb2RpZnlNZW1iZXJSb2xlOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgLy9wYXJhbSA6IHsgY2x1YmlkLCB1aWQsIHJvbGVcclxuICAgICAgICAvLyAgICAgICAgfVxyXG4gICAgICAgIGlmIChtc2cucGFyYW0uY2x1YmlkICE9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5jbHViaWQpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiQ2x1Yk1lbWJlclZpZXcub25Nb2RpZnlNZW1iZXJSb2xlIHJlY3YgY2x1YmlkPVwiLCBtc2cucGFyYW0uY2x1YmlkLFxyXG4gICAgICAgICAgICAgICAgXCIgIT0gY3VyQ2x1YmlkPVwiLCBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uY2x1YmlkKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxpc3QgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3Q7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7IGxpc3QgIT0gbnVsbCAmJiBpbmRleCA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0W2luZGV4XS51aWQgPT0gbXNnLnBhcmFtLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJNZW1MaXN0W2luZGV4XS5yb2xlID0gbXNnLnBhcmFtLnJvbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaG93TWVtYmVyTGlzdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkRlbE1lbWJlck1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViTWVtYmVyVmlldy5vbkRlbE1lbWJlck1zZ1wiKTtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUykge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGNsdWJpZCA6IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5jbHViaWQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX0dFVF9NRU1CRVJfTElTVF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkdldENsdWJNZW1iZXIgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJNZW1MaXN0ID0gbXNnLmxpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd01lbWJlckxpc3QoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG5cclxuICAgICAgICBjYy5sb2coJ0NsdWJNZW1iZXJWaWV3LmNhbGxCYWNrQnRuLCBCdG5OYW1lPScgKyBCdG5OYW1lKTtcclxuXHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuXHJcbiAgICAgICAgaWYgKEJ0bk5hbWUgPT0gXCJCdG5DbG9zZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBwb3BWaWV3IDogXCJDbHViTWVtYmVyVmlld1wiLFxyXG4gICAgICAgICAgICAgICAgYnRuICAgICA6IFwiQnRuQ2xvc2VcIixcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZihCdG5OYW1lID09IFwiQnRuVXBncmFkZVwiKSB7XHJcbiAgICAgICAgICAgIHZhciBDbHViVXBncmFkVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1YlVwZ3JhZFZpZXcpO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoQ2x1YlVwZ3JhZFZpZXcpO1xyXG4gICAgICAgICAgICBDbHViVXBncmFkVmlldy5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoQnRuTmFtZSA9PSBcIkJ0blNlYXJjaFwiKSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5FZGl0TmFtZS5zdHJpbmc7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJNZW1iZXJWaWV3LmNhbGxCYWNrQnRuLCBuYW1lPVwiLCBuYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hPbmVNZW1iZXIobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsQmFja0VkaXROYW1lQmVnaW4gOiBmdW5jdGlvbiAoZXZlbnQsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJNZW1iZXJWaWV3LmNhbGxCYWNrRWRpdE5hbWVCZWdpblwiKTtcclxuICAgICAgICB0aGlzLkVkaXROYW1lLnN0cmluZyA9IFwiXCI7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrRWRpdE5hbWVFbmQgOiBmdW5jdGlvbiAoZXZlbnQsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBuYW1lID0gdGhpcy5FZGl0TmFtZS5zdHJpbmc7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1Yk1lbWJlclZpZXcuY2FsbEJhY2tFZGl0TmFtZUVuZCwgbmFtZT1cIiwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hPbmVNZW1iZXIobmFtZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2NlbmVNc2cgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICBpZiAobXNnLnBvcFZpZXcgPT0gXCJDbHViVXBkcmFkZVZpZXdcIikge1xyXG4gICAgICAgICAgICBpZiAobXNnLmJ0biA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1RpdGxlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZW1iZXJMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzkuXHJcbiAqL1xyXG4vKlxyXG4qIHR5cGUgQ0xVQl9SRVFfT1dORVJfQ09ORklSTV9UIHN0cnVjdCB7XHJcbiBDbHViSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVRX09XTkVSX0NPTkZJUk1fVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFUV9PV05FUl9DT05GSVJNX1Qgc3RydWN0IHtcclxuIElzQWxsb3cgaW50ICAgIGBqc29uOlwiaXNhbGxvd1wiYCAvLzE6IGFsbG93LCAwOiByZWplY3QuXHJcbiBVaWQgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gfVxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpXHJcblxyXG5mdW5jdGlvbiBDbHViT3duZXJDb25maXJtUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LkNMVUJfUkVRX09XTkVSX0NPTkZJUk1fQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnLCBjbHViaWQpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViT3duZXJDb25maXJtUmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgY2x1YmlkIDogY2x1YmlkLFxyXG4gICAgICAgICAgICBwYXJhbSA6IG1zZyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDbHViT3duZXJDb25maXJtUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzkuXHJcbiAqL1xyXG4vKlxyXG4qIHR5cGUgQ0xVQl9SRVNQX09XTkVSX0NPTkZJUk1fVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9SRVNQX09XTkVSX0NPTkZJUk1fVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFU1BfT1dORVJfQ09ORklSTV9UIHN0cnVjdCB7XHJcbiBDbHViSWQgaW50IGBqc29uOlwiY2x1YmlkXCJgXHJcbiB9Ki9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcblxyXG5mdW5jdGlvbiBDbHViT3duZXJDb25maXJtUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuQ0xVQl9SRVNQX09XTkVSX0NPTkZJUk1fQ01EX0lEO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ2x1Yk93bmVyQ29uZmlybVJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvMTUuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJylcclxuXHJcbmZ1bmN0aW9uIENsdWJPd25lck1vZGlmeVJvbGVSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuQ0xVQl9SRVFfT1dORVJfTU9ESUZZX1JPTEVfQ01EX0lEO1xyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViT3duZXJNb2RpZnlSb2xlUmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG4gICAgICAgIHZhciBwYXJhbSA9IHtcclxuICAgICAgICAgICAgdWlkICA6IG1zZy51aWQsXHJcbiAgICAgICAgICAgIHJvbGUgOiBtc2cucm9sZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGNsdWJpZCA6IG1zZy5jbHViaWQsXHJcbiAgICAgICAgICAgIHBhcmFtICA6IHBhcmFtLFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDbHViT3duZXJNb2RpZnlSb2xlUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzE1LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZSgnTWVzc2FnZVJlc3AnKTtcclxuXHJcbmZ1bmN0aW9uIENsdWJPd25lck1vZGlmeVJvbGVSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfT1dORVJfTU9ESUZZX1JPTEVfQ01EX0lEO1xyXG5cclxuXHJcbiAgICAvLyB0eXBlIENMVUJfUkVTUF9PV05FUl9NT0RJRllfUk9MRV9UIHN0cnVjdCB7XHJcbiAgICAvLyAgICAgSnNvbkhlYWRcclxuICAgIC8vICAgICBSZXNwSGVhZFxyXG4gICAgLy8gICAgIFBhcmFtIFBBUkFNX1JFU1BfT1dORVJfTU9ESUZZX1JPTEVfVCBganNvbjpcInBhcmFtXCJgXHJcbiAgICAvLyB9XHJcbiAgICAvL1xyXG4gICAgLy8gdHlwZSBQQVJBTV9SRVNQX09XTkVSX01PRElGWV9ST0xFX1Qgc3RydWN0IHtcclxuICAgIC8vICAgICBDbHViSWQgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiAgICAvLyAgICAgVWlkICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gICAgLy8gICAgIFJvbGUgICB1aW50OCAgYGpzb246XCJyb2xlXCJgXHJcbiAgICAvLyB9XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYgKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnBhcmFtID0gbXNnLnBhcmFtO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ2x1Yk93bmVyTW9kaWZ5Um9sZVJlc3BQYWNrZXQ7IiwidmFyIFV0aWxUb29sID0gcmVxdWlyZSgnVXRpbFRvb2wnKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgSGVhZCA6IGNjLlNwcml0ZSxcclxuICAgICAgICBOYW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUm9sZVNwcml0ZSA6IGNjLlNwcml0ZSxcclxuICAgICAgICBSb2xlRnJhbWUgIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBUaW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQnRuU2V0IDogY2MuQnV0dG9uLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW5mbyA9IG51bGw7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBVaWQgICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuICAgIC8vIE5hbWUgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgIC8vIEhlYWRVcmwgIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuICAgIC8vIFNleCAgICAgIGludCAgICBganNvbjpcInNleFwiYFxyXG4gICAgLy8gUm9sZSAgICAgdWludDggIGBqc29uOlwicm9sZVwiYFxyXG4gICAgLy8gTGFzdFRpbWUgaW50NjQgIGBqc29uOlwibGFzdHRpbWVcImBcclxuXHJcbiAgICBzZXRQZXJzb25JbmZvIDogZnVuY3Rpb24gKGluZm8pIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViUGVyc29uQ2VsbCBuYW1lPVwiLCBpbmZvLm5hbWUsIFwiIGhlYWR1cmw9XCIsIGluZm8uaGVhZHVybCwgXCIgcm9sZT1cIiwgaW5mby5yb2xlLCBcIiB0aW1lPVwiLCBpbmZvLmxhc3R0aW1lKTtcclxuICAgICAgICB0aGlzLmluZm8gPSBpbmZvO1xyXG4gICAgICAgIHRoaXMuTmFtZS5zdHJpbmcgPSBpbmZvLm5hbWU7XHJcbiAgICAgICAgdGhpcy5UaW1lLnN0cmluZyA9IFV0aWxUb29sLmdldEZvcm1hdERhdGEoaW5mby5sYXN0dGltZSk7XHJcbiAgICAgICAgVXBkYXRlV1hIZWFkSWNvbihpbmZvLmhlYWR1cmwsIHRoaXMuSGVhZCk7XHJcblxyXG4gICAgICAgIGlmIChpbmZvLnJvbGUgPT0gd2luZG93LkNsdWJSb2xlLkVfQ0xVQl9PV05FUl9ST0xFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuUm9sZVNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuUm9sZUZyYW1lWzBdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaW5mby5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfTUFOQUdFUl9ST0xFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuUm9sZVNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuUm9sZUZyYW1lWzFdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJQZXJzb25DZWxsLnNldFBlcnNvbkluZm8gcm9sZSA9IG5vcm1hbFwiKTtcclxuICAgICAgICAgICAgdGhpcy5Sb2xlU3ByaXRlLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoXCJCYXNlUG9wXCIpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIFNjcm9sbFZpZXcgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uKGV2ZW50ICxDdXN0b21FdmVudERhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG52YXIgTG9hZGluZ1ZpZXcgPSByZXF1aXJlKCdMb2FkaW5nVmlldycpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ2x1Yk5hbWUgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ2x1YkluZm8gIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFRhYmxlTnVtICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENyZWF0ZVJvb206IGNjLlNwcml0ZSxcclxuICAgICAgICBCdWxsZmlnaHRfQ3JlYXRlUm9vbSA6IGNjLlByZWZhYixcclxuICAgICAgICBzY3JvbGx2aWV3IDogY2MuU2Nyb2xsVmlldyxcclxuICAgICAgICBUYWJsZUNlbGwgIDogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2x1YkluZm8oKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlJvb21WaWV3Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICAvL3RoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0NMVUJfVEFCTEVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkdldENsdWJUYWJsZU1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0VOVEVSX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkVudGVyUm9vbShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfT1dORVJfUk1fTUVNQkVSX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25EZWxNZW1iZXJNc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EZWxNZW1iZXJNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3Lm9uRGVsTWVtYmVyTXNnXCIpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGlmIChtc2cucGFyYW0udWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHsgLy/lpoLmnpzmmK/miJHoh6rlt7FcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wVmlldyA6IFwiQ2x1YlJvb21WaWV3XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuICAgICA6IFwiQnRuQ2xvc2VcIixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAge3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOm1lc3NhZ2V9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25TY2VuZU1zZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJSb29tVmlldy5vblNjZW5lTXNnXCIpO1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIGlmIChtc2cucG9wVmlldyA9PSBcIkNsdWJJbmZvVmlld1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChtc2cuYnRuID09IFwiQnRuQ2xvc2VcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDbHViSW5mbygpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtc2cuYnRuID09IFwib25EaXNtaXNzQ2x1Yk1zZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJDbHViUm9vbVZpZXcub25TY2VuZU1zZyBDbHViSW5mb1ZpZXcgb25EaXNtaXNzQ2x1Yk1zZy5cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkNsdWJSb29tVmlld1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0biAgICAgOiBcIkJ0bkNsb3NlXCIsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRW50ZXJSb29tIDogZnVuY3Rpb24obXNnKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5vbkVudGVyUm9vbSx0YWJsZWlkID0gXCIgKyBtc2cubmFtZSk7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25HZXRDbHViVGFibGVNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG1zZy5saXN0ID09IG51bGwgfHwgIG1zZy5saXN0Lmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaaguacquWPkeeOsOS/seS5kOmDqOaIv+mXtFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuVGFibGVOdW0uc3RyaW5nID0gXCLniYzlsYAoXCIgKyBtc2cubGlzdC5sZW5ndGggKyBcIilcIjtcclxuXHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7bXNnLmxpc3QgIT0gbnVsbCAmJiBpbmRleCA8IG1zZy5saXN0Lmxlbmd0aCA7aW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFRhYmxlQ2VsbCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuVGFibGVDZWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsdmlldy5jb250ZW50LmFkZENoaWxkKFRhYmxlQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBUYWJsZUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBUYWJsZUNlbGwuc2V0UG9zaXRpb24oY2MucCgwLC1UYWJsZUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQvMiAtIFRhYmxlQ2VsbC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCppbmRleCkpO1xyXG4gICAgICAgICAgICAgICAgVGFibGVDZWxsLmdldENvbXBvbmVudChcIkdhbWJsaW5nSG91c2VDZWxsXCIpLnVwZGF0ZVJvb21JbmZvKG1zZy5saXN0W2luZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKFRhYmxlQ2VsbC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCptc2cubGlzdC5sZW5ndGggPiB0aGlzLnNjcm9sbHZpZXcuY29udGVudC5oZWlnaHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsdmlldy5jb250ZW50LmhlaWdodCA9IGhlaWdodCAqbXNnLmxpc3QubGVuZ3RoXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsQmFja0J0biA6IGZ1bmN0aW9uIChldmVudCAsIEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBjYy5sb2coXCJDbHViUm9vbVZpZXcuY2FsbEJhY2tCdG4sQnRuTmFtZSA9IFwiICsgQnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZihCdG5OYW1lID09IFwiQnRuQ2xvc2VcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkNsdWJSb29tVmlld1wiLFxyXG4gICAgICAgICAgICAgICAgYnRuICAgICA6IFwiQnRuQ2xvc2VcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAge3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOm1lc3NhZ2V9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQnRuQ2x1YkluZm9cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBDbHViSW5mbyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1YkluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoQ2x1YkluZm8pO1xyXG4gICAgICAgICAgICBDbHViSW5mby5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG5cclxuICAgICAgICAgICAgQ2x1YkluZm8uZ2V0Q29tcG9uZW50KFwiQ2x1YkluZm9WaWV3XCIpLnNldENsdWJJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkNyZWF0ZVJvb21cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVSb29tID0gY2MuaW5zdGFudGlhdGUodGhpcy5CdWxsZmlnaHRfQ3JlYXRlUm9vbSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChjcmVhdGVSb29tKTtcclxuICAgICAgICAgICAgY3JlYXRlUm9vbS5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgICAgICBjcmVhdGVSb29tLmdldENvbXBvbmVudChcIkJ1bGxmaWdodF9DcmVhdGVSb29tXCIpLnNldENsdWJJZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmNsdWJpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8ve1wiY2x1YmlkXCI6MTAwMDAwMTksXCJyb2xlXCI6MSxcIm93bmVydWlkXCI6MTA2ODgsXCJsZXZlbFwiOjEsXCJuYW1lXCI6XCJhc1wiLFxyXG4gICAgLy8gXCJoZWFkdXJsXCI6XCJcIixcImFkZHJlc3NcIjpcIuW5v+ilvyDnmb7oibLluIJcIixcImludHJvXCI6XCJcIixcImVuZHRpbWVcIjoxNDk0MzI0MTk3LFwic3RhdHVzXCI6MSxcclxuICAgIC8vIFwibWVtYmVyc1wiOjEsXCJtYXhtZW1iZXJcIjoxMH1cclxuXHJcbiAgICBzZXRDbHViSW5mbyA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIGluZm8gPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm87XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJSb29tVmlldy5zZXRDbHViSW5mbyBDbHViaWQ9XCIsIGluZm8uY2x1YmlkLCBcIiByb2xlPVwiLCBpbmZvLnJvbGUsIFwiIG5hbWU9XCIsIGluZm8ubmFtZSk7XHJcblxyXG4gICAgICAgIHRoaXMuQ2x1Yk5hbWUuc3RyaW5nID0gaW5mby5uYW1lO1xyXG5cclxuICAgICAgICBpZiAoaW5mby5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfTk9STUFMX1JPTEUpIHtcclxuICAgICAgICAgICAgdGhpcy5DcmVhdGVSb29tLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgY2x1YmlkIDogaW5mby5jbHViaWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfQ0xVQl9UQUJMRV9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgICAgICAgID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgVG9hc3RWaWV3ICAgICAgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIE11c2ljTWdyICAgICAgID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiAgICAgPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIEdhbWVQbGF5ZXIgICAgID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgTmFtZSAgOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIEludHJvIDogY2MuRWRpdEJveCxcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRDbHViSW5mbygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDbHViSW5mbzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlNldFZpZXcuc2V0Q2x1YkluZm9cIik7XHJcbiAgICAgICAgdGhpcy5OYW1lLnN0cmluZyAgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubmFtZTtcclxuICAgICAgICB0aGlzLkludHJvLnN0cmluZyA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5pbnRybztcclxuICAgICAgICAvL2luZm8uaGVhZHVybDtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlNldFZpZXcuY2FsbEJhY2tCdG4sIEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG5cclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG5cclxuICAgICAgICBpZiAoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBwb3BWaWV3IDogXCJDbHViU2V0Vmlld1wiLFxyXG4gICAgICAgICAgICAgICAgYnRuICAgICA6IFwiQnRuQ2xvc2VcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0blNhdmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBpbmZvID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGNsdWJpZCAgOiBpbmZvLmNsdWJpZCxcclxuICAgICAgICAgICAgICAgIGhlYWR1cmwgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgbmFtZSAgICA6IHRoaXMuTmFtZS5zdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBpbnRybyAgIDogdGhpcy5JbnRyby5zdHJpbmcsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5uYW1lID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJTZXRWaWV3LmNhbGxCYWNrQnRuIGhlYWR1cmw9XCIsIGRhdGEuaGVhZHVybCwgXCIgbmFtZT1cIiwgZGF0YS5uYW1lLCBcIiBpbnRybz1cIiwgZGF0YS5pbnRybyk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX01PRElGWV9JTkZPX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJTZXRWaWV3Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGlmeUluZm9Nc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gQ2x1YklkICBpbnQgICAgYGpzb246XCJjbHViaWRcImBcclxuICAgIC8vIFN0YXR1cyAgaW50ICAgIGBqc29uOlwic3RhdHVzXCJgXHJcbiAgICAvLyBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgIC8vIEhlYWRVcmwgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gICAgLy8gQWRkcmVzcyBzdHJpbmcgYGpzb246XCJhZGRyZXNzXCJgXHJcbiAgICAvLyBJbnRybyAgIHN0cmluZyBganNvbjpcImludHJvXCJgXHJcbiAgICAvLyBMZXZlbCAgIGludCAgICBganNvbjpcImxldmVsXCJgXHJcbiAgICAvLyBFbmRUaW1lIGludDY0ICBganNvbjpcImVuZHRpbWVcImBcclxuICAgIG9uTW9kaWZ5SW5mb01zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViU2V0Vmlldy5vbk1vZGlmeUluZm9Nc2cgY29kZT1cIiwgbXNnLmNvZGUpO1xyXG4gICAgICAgIGlmIChtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTICkge1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubmFtZSAgPSB0aGlzLk5hbWUuc3RyaW5nO1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uaW50cm8gPSB0aGlzLkludHJvLnN0cmluZztcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLkv67mlLnmiJDlip/vvIHvvIHvvIFcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3cobXNnLmRlc2MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCAgICAgICAgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNdXNpY01nciAgICAgICA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gICA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSAgICAgPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBHYW1lUGxheWVyICAgICA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIFRvYXN0VmlldyAgICAgID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBVdGlsVG9vbCAgICAgICA9IHJlcXVpcmUoJ1V0aWxUb29sJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBUaXBzTGFiZWwgICAgICAgIDogY2MuTGFiZWwsIC8v5o+Q56S6XHJcbiAgICAgICAgTGV2ZWxOdW0gICAgICAgICA6IGNjLkxhYmVsLCAvL+etiee6p1xyXG4gICAgICAgIFBlcnNvbkN1ckNvdW50ICAgOiBjYy5MYWJlbCwgLy/lvZPliY3nrYnnuqfkurrmlbBcclxuICAgICAgICBQZXJzb25UYXJnZXRDb3VudDogY2MuTGFiZWwsIC8v55uu5qCH562J57qn5Lq65pWwXHJcbiAgICAgICAgVGFibGVDdXJDb3VudCAgICA6IGNjLkxhYmVsLCAvL+W9k+WJjeahjOWtkOS6uuaVsFxyXG4gICAgICAgIFRhYmxlVGFyZ2V0Q291bnQgOiBjYy5MYWJlbCwgLy/nm67moIfmoYzlrZDkurrmlbBcclxuICAgICAgICBEaWFtb25kQ29zdCAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ3VyRGlhbW9uZCAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEJ0bkFkZCAgICAgICAgICAgOiBjYy5CdXR0b24sXHJcbiAgICAgICAgQnRuU3ViICAgICAgICAgICA6IGNjLkJ1dHRvbixcclxuXHJcbiAgICAgICAgQnRuU3ByaXRlRnJhbWUgICA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93TWF4Q2x1YkluZm8oKTtcclxuICAgICAgICB0aGlzLnNob3dDdXJDbHViSW5mbygpO1xyXG4gICAgICAgIHRoaXMuc2hvd0N1ckRpYW1vbmQoKTtcclxuICAgICAgICB0aGlzLnNob3dCdG5TcHJpdGUoR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8ge1wibGV2ZWxcIjoxLFwibGl2ZXRpbWVcIjozMCxcImRpYW1vbmRcIjowLCAgICBcIm1heHBlb3BsZVwiOjEwLCBcIm1heHRhYmxlXCI6Mn0sXHJcbiAgICAvLyB7XCJsZXZlbFwiOjIsXCJsaXZldGltZVwiOjMwLFwiZGlhbW9uZFwiOjEwMDAsIFwibWF4cGVvcGxlXCI6NTAsIFwibWF4dGFibGVcIjozfSxcclxuICAgIC8vIHtcImxldmVsXCI6MyxcImxpdmV0aW1lXCI6MzAsXCJkaWFtb25kXCI6NDAwMCwgXCJtYXhwZW9wbGVcIjoxMDAsXCJtYXh0YWJsZVwiOjR9LFxyXG4gICAgLy8ge1wibGV2ZWxcIjo0LFwibGl2ZXRpbWVcIjozMCxcImRpYW1vbmRcIjoxMDAwMCxcIm1heHBlb3BsZVwiOjIwMCxcIm1heHRhYmxlXCI6OX1cclxuICAgIGdldE1heExldmVsQ29uZiA6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaXN0ID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkNsdWJVcGdyYWRlQ29zdDtcclxuICAgICAgICB2YXIgbGV2ZWwgID0gMTtcclxuICAgICAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGV2ZWwgPCBsaXN0W2ldLmxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXZlbCA9IGxpc3RbaV0ubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxpc3RbaW5kZXhdO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRDdXJMZXZlbEluZm8gOiBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICB2YXIgbGlzdCA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5DbHViVXBncmFkZUNvc3Q7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PSBsaXN0W2ldLmxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdFswXTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd01heENsdWJJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmZvID0gdGhpcy5nZXRNYXhMZXZlbENvbmYoKTtcclxuICAgICAgICB0aGlzLlRpcHNMYWJlbC5zdHJpbmcgPSBcIuS/seS5kOmDqOS4iumZkOetiee6pzPnuqfvvIzmnInmlYjmnJ/kuLoxNeWkqe+8jOacgOmrmOS4iumZkOS4ulwiICsgaW5mby5tYXhwZW9wbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFwi5Lq677yM5ZCM5pe25Yib5bu6XCIgKyBpbmZvLm1heHRhYmxlICsgXCLlvKDniYzmoYxcIjtcclxuICAgICAgICB0aGlzLlBlcnNvblRhcmdldENvdW50LnN0cmluZyA9IGluZm8ubWF4cGVvcGxlO1xyXG4gICAgICAgIHRoaXMuVGFibGVUYXJnZXRDb3VudC5zdHJpbmcgID0gaW5mby5tYXh0YWJsZTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd0N1ckNsdWJJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJDbHViID0gR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvO1xyXG4gICAgICAgIHZhciBjdXJJbmZvID0gdGhpcy5nZXRDdXJMZXZlbEluZm8oY3VyQ2x1Yi5sZXZlbCk7XHJcbiAgICAgICAgdGhpcy5MZXZlbE51bS5zdHJpbmcgICAgICAgPSBjdXJJbmZvLmxldmVsO1xyXG4gICAgICAgIHRoaXMuUGVyc29uQ3VyQ291bnQuc3RyaW5nID0gY3VySW5mby5tYXhwZW9wbGU7XHJcbiAgICAgICAgdGhpcy5UYWJsZUN1ckNvdW50LnN0cmluZyAgPSBjdXJJbmZvLm1heHRhYmxlO1xyXG4gICAgICAgIHRoaXMuRGlhbW9uZENvc3Quc3RyaW5nICAgID0gY3VySW5mby5kaWFtb25kO1xyXG4gICAgfSxcclxuXHJcbiAgICBzaG93QnRuU3ByaXRlIDogZnVuY3Rpb24gKGxldmVsKSB7XHJcbiAgICAgICAgaWYgKGxldmVsID09IDEgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuU3ViLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLkJ0blNwcml0ZUZyYW1lWzFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxldmVsID09IDQpIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQuaW50ZXJhY3RhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQuaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZGQubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuQnRuU3ByaXRlRnJhbWVbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzaG93Q3VyRGlhbW9uZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkN1ckRpYW1vbmQuc3RyaW5nID0gXCLmi6XmnInpkrvnn7M6IFwiICsgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmRpYW1vbmQ7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBjYy5sb2coXCJDbHViVXBncmFkZVZpZXcub25NZXNzYWdlIGNtZD1cIiwgbXNnLmNtZCwgXCIgd2luZG93LkNMVUJfUkVTUF9NT0RJRllfSU5GT19DTURfSUQ9XCIsIHdpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEKTtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1vZGlmeUluZm9Nc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9VU0VSX0RFVEFJTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZXJEaWFtb25kKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVVzZXJEaWFtb25kOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlVwZ3JhZGVWaWV3LnVwZGF0ZVVzZXJEaWFtb25kXCIpO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5nb2xkICAgID0gbXNnLmdvbGQ7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmRpYW1vbmQgPSBtc2cuZGlhbW9uZDtcclxuICAgICAgICB0aGlzLnNob3dDdXJEaWFtb25kKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIENsdWJJZCAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiAgICAvLyBTdGF0dXMgIGludCAgICBganNvbjpcInN0YXR1c1wiYFxyXG4gICAgLy8gTmFtZSAgICBzdHJpbmcgYGpzb246XCJuYW1lXCJgXHJcbiAgICAvLyBIZWFkVXJsIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuICAgIC8vIEFkZHJlc3Mgc3RyaW5nIGBqc29uOlwiYWRkcmVzc1wiYFxyXG4gICAgLy8gSW50cm8gICBzdHJpbmcgYGpzb246XCJpbnRyb1wiYFxyXG4gICAgLy8gTGV2ZWwgICBpbnQgICAgYGpzb246XCJsZXZlbFwiYFxyXG4gICAgLy8gRW5kVGltZSBpbnQ2NCAgYGpzb246XCJlbmR0aW1lXCJgXHJcbiAgICBvbk1vZGlmeUluZm9Nc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MgKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJVcGdyYWRlVmlldy5vbk1vZGlmeUluZm9Nc2cgY29kZT1cIiwgbXNnLmNvZGUsIFwiIGVuZHRpbWU9XCIsIG1zZy5wYXJhbS5lbmR0aW1lKTtcclxuICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvLmxldmVsICAgICA9IE51bWJlcihtc2cucGFyYW0ubGV2ZWwpO1xyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uZW5kdGltZSAgID0gbXNnLnBhcmFtLmVuZHRpbWU7XHJcbiAgICAgICAgICAgIHZhciBpbmZvID0gdGhpcy5nZXRDdXJMZXZlbEluZm8obXNnLnBhcmFtLmxldmVsKTtcclxuICAgICAgICAgICAgY2MubG9nKFwiQ2x1YlVwZ3JhZGVWaWV3Lm9uTW9kaWZ5SW5mb01zZyAgaW5mbz1cIiwgaW5mbyk7XHJcblxyXG4gICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8ubWF4bWVtYmVyID0gaW5mby5tYXhwZW9wbGU7XHJcblxyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuWNh+e6p+aIkOWKnzogXCIgKyBVdGlsVG9vbC5nZXRGb3JtYXREYXRhRGV0YWlsKEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mby5lbmR0aW1lKSArIFwi5Yiw5pyfXCIsIDIpO1xyXG4gICAgICAgICAgICB0aGlzLmdldFVzZXJEZXRhaWwoKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgVG9hc3RWaWV3LnNob3cobXNnLmRlc2MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlVwZ3JhZGVWaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgcG9wVmlldyA6IFwiQ2x1YlVwZHJhZGVWaWV3XCIsXHJcbiAgICAgICAgICAgICAgICBidG4gICAgIDogXCJCdG5DbG9zZVwiLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csIGRhdGE6bWVzc2FnZX0pO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0blVwZ3JhZGVcIikge1xyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSBOdW1iZXIodGhpcy5MZXZlbE51bS5zdHJpbmcpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJjYWxsQmFja0J0biBCdG5VcGdyYWRlIGxldmVsPVwiLCBsZXZlbCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuZ2V0Q3VyTGV2ZWxJbmZvKGxldmVsKTtcclxuICAgICAgICAgICAgaWYgKCBpbmZvLmRpYW1vbmQgPiBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuZGlhbW9uZCkge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLmgqjpkrvnn7PkuI3otrMs6K+35Y675ZWG5Z+O6LSt5LmwXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjYy5sb2coXCJDbHViU2V0Vmlldy5jYWxsQmFja0J0biBlbmR0aW1lPVwiLCBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8uZW5kdGltZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5mbyA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mbztcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBjbHViaWQgIDogaW5mby5jbHViaWQsXHJcbiAgICAgICAgICAgICAgICBoZWFkdXJsIDogXCJcIixcclxuICAgICAgICAgICAgICAgIGludHJvICAgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzcyA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBsZXZlbCAgIDogbGV2ZWwsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX01PRElGWV9JTkZPX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICB9IGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0blN1YlwiKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGV2ZWwgPSBOdW1iZXIodGhpcy5MZXZlbE51bS5zdHJpbmcpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJjYWxsQmFja0J0biBCdG5TdWIgbGV2ZWw9XCIsIGxldmVsKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsZXZlbCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldmVsID0gbGV2ZWwgLSAxO1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLmdldEN1ckxldmVsSW5mbyhsZXZlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuTGV2ZWxOdW0uc3RyaW5nICAgICAgICAgID0gbGV2ZWw7XHJcbiAgICAgICAgICAgIHRoaXMuUGVyc29uVGFyZ2V0Q291bnQuc3RyaW5nID0gaW5mby5tYXhwZW9wbGU7XHJcbiAgICAgICAgICAgIHRoaXMuVGFibGVUYXJnZXRDb3VudC5zdHJpbmcgID0gaW5mby5tYXh0YWJsZTtcclxuICAgICAgICAgICAgdGhpcy5EaWFtb25kQ29zdC5zdHJpbmcgICAgICAgPSBpbmZvLmRpYW1vbmQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0J0blNwcml0ZShsZXZlbCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZihCdG5OYW1lID09IFwiQnRuQWRkXCIpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsZXZlbCA9IE51bWJlcih0aGlzLkxldmVsTnVtLnN0cmluZyk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcImNhbGxCYWNrQnRuIEJ0bkFkZCBsZXZlbD1cIiwgbGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxldmVsID09IDQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV2ZWwgPSBsZXZlbCArIDE7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5mbyA9IHRoaXMuZ2V0Q3VyTGV2ZWxJbmZvKGxldmVsKTtcclxuICAgICAgICAgICAgdGhpcy5MZXZlbE51bS5zdHJpbmcgICAgICAgICAgPSBsZXZlbDtcclxuICAgICAgICAgICAgdGhpcy5QZXJzb25UYXJnZXRDb3VudC5zdHJpbmcgPSBpbmZvLm1heHBlb3BsZTtcclxuICAgICAgICAgICAgdGhpcy5UYWJsZVRhcmdldENvdW50LnN0cmluZyAgPSBpbmZvLm1heHRhYmxlO1xyXG4gICAgICAgICAgICB0aGlzLkRpYW1vbmRDb3N0LnN0cmluZyAgICAgICA9IGluZm8uZGlhbW9uZDtcclxuICAgICAgICAgICAgdGhpcy5zaG93QnRuU3ByaXRlKGxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgemhvdXh1ZXNoaSBvbiAyMDE3LzUvNi5cclxuICovXHJcblxyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG5mdW5jdGlvbiBDbHViVXBncmFkZUNvc3RSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0NMVUJfVVBHUkFERV9DT1NUX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJVcGdyYWRlQ29zdFJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDbHViVXBncmFkZUNvc3RSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgemhvdXh1ZXNoaSBvbiAyMDE3LzUvNi5cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbi8vIHR5cGUgVVNfUkVTUF9DTFVCX1VQR1JBREVfQ09TVF9UIHN0cnVjdCB7XHJcbi8vICAgICBKc29uSGVhZFxyXG4vLyAgICAgUmVzcEhlYWRcclxuLy8gICAgIExpc3QgW11DTFVCX0NPU1RfVCBganNvbjpcImxpc3RcImBcclxuLy8gfVxyXG4vL1xyXG4vLyB0eXBlIENMVUJfQ09TVF9UIHN0cnVjdCB7XHJcbi8vICAgICBMZXZlbCAgICAgaW50IGBqc29uOlwibGV2ZWxcImBcclxuLy8gICAgIExpdmVUaW1lICBpbnQgYGpzb246XCJsaXZldGltZVwiYFxyXG4vLyAgICAgRGlhbW9uZCAgIGludCBganNvbjpcImRpYW1vbmRcImBcclxuLy8gICAgIE1heFBlb3BsZSBpbnQgYGpzb246XCJtYXhwZW9wbGVcImBcclxuLy8gICAgIE1heFRhYmxlICBpbnQgYGpzb246XCJtYXh0YWJsZVwiYFxyXG4vLyB9XHJcblxyXG5mdW5jdGlvbiBDbHViVXBncmFkZUNvc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0NMVUJfVVBHUkFERV9DT1NUX0NNRF9JRDtcclxuXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLnNlcSAgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkICA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gbXNnLmxpc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENsdWJVcGdyYWRlQ29zdFJlc3BQYWNrZXQ7IiwidmFyIEJhc2VQb3AgICAgICAgID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgVG9hc3RWaWV3ICAgICAgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIE11c2ljTWdyICAgICAgID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiAgICAgPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVQbGF5ZXIgICAgID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ2x1YkFkZFZpZXcgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIENsdWJDcmVhdGVWaWV3ICA6IGNjLlByZWZhYixcclxuICAgICAgICBpbml0Tm9kZSAgICAgICAgOiBjYy5Ob2RlLFxyXG4gICAgICAgIHNjcm9sbFZpZXcgICAgICA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgQ2x1YkNlbGwgICAgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIENsdWJKb2luVmlldyAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBDbHViRmluZFBvcFZpZXcgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgQ2x1YlJvb21WaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLlNlbGZDbHViSWQgPSAwO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mbyA9IG51bGw7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJNZW1MaXN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRHZXRDbHViTGlzdCgpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2VuZEdldENsdWJMaXN0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9DTFVCX0xJU1RfQ01EX0lEKS5zZW5kKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJWaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQnRuQWRkXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUFkZFZpZXcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihCdG5OYW1lID09IFwiQnRuTmV3Q2x1YlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDbHViQ3JlYXRlVmlldygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKEJ0bk5hbWUgPT0gXCJCdG5BZGRDbHViXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNlYXJjaFBvcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY3JlYXRlU2VhcmNoUG9wIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBDbHViRmluZFBvcFZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJGaW5kUG9wVmlldyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKENsdWJGaW5kUG9wVmlldyk7XHJcbiAgICAgICAgQ2x1YkZpbmRQb3BWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNyZWF0ZUFkZFZpZXcgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBDbHViQWRkVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1YkFkZFZpZXcpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChDbHViQWRkVmlldyk7XHJcbiAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgQ2x1YkFkZFZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNyZWF0ZUNsdWJDcmVhdGVWaWV3IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBDbHViQ3JlYXRlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1YkNyZWF0ZVZpZXcpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChDbHViQ3JlYXRlVmlldyk7XHJcbiAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgQ2x1YkNyZWF0ZVZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlZpZXcub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIC8vdGhpcy5fc3VwZXIoZXZlbnQpO1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIHZhciBjbWQgPSBtc2cuY21kO1xyXG4gICAgICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVVNfUkVTUF9DUkVBVEVfQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ3JlYXRlQ2x1Yk1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfQ0xVQl9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25DbHViTGlzdE1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfU0VBUkNIX0NMVUJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNlYXJjaENsdWJNc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgLy8gY2FzZSBDTFVCX1JFUV9KT0lOX0NMVUJfQ01EX0lEOlxyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5vbkpvaW5DbHViTXNnKG1zZyk7XHJcbiAgICAgICAgICAgIC8vICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfRklORF9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluZFJvb20obXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX0RJU01JU1NfQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzbWlzc0NsdWJNc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRmluZFJvb20gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EaXNtaXNzQ2x1Yk1zZyA6IGZ1bmN0aW9uIChtc2cpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YkluZm9WaWV3Lm9uRGlzbWlzc0NsdWJNc2cgbXNnPVwiLCBtc2cpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5wYXJhbS5yb2xlID09IHdpbmRvdy5DbHViUm9sZS5FX0NMVUJfT1dORVJfUk9MRSkge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLnvqTkuLtcIiArIG1zZy5wYXJhbS5uYW1lICsgXCLop6PmlaPkuoZcIiArIG1zZy5wYXJhbS5jbHVibmFtZSkgKyBcIuS/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kR2V0Q2x1Ykxpc3QoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChtc2cucGFyYW0udWlkID09IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQpIHsgLy/lpoLmnpzmmK/miJHoh6rlt7FcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KFwi5oKo6YCA5Ye65L+x5LmQ6YOoXCIgKyBtc2cucGFyYW0uY2x1Ym5hbWUgKyBcIuaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEdldENsdWJMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2VhcmNoQ2x1Yk1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZiAobXNnLmNvZGUgID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJDbHViVmlldy5vblNlYXJjaENsdWJNc2dcIik7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SW5pdE5vZGVWaXNpYmxlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpQ291bnQgPSB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5nZXRDaGlsZHJlbkNvdW50KCkgLSAodGhpcy5pbml0Tm9kZSA9PSBudWxsID8gMCA6IDEpO1xyXG4gICAgICAgICAgICB2YXIgQ2x1YkNlbGwgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJDZWxsKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuYWRkQ2hpbGQoQ2x1YkNlbGwpO1xyXG4gICAgICAgICAgICBDbHViQ2VsbC5zZXRQb3NpdGlvbihjYy5wKDAsMCAtIENsdWJDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0KihpQ291bnQgKyAwLjUpKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIENsdWJDZWxsLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiQ2x1YlZpZXcub25TZWFyY2hDbHViTXNnIFRPVUNIX0VORC5cIik7XHJcblxyXG4gICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvID0gZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudChcIkNsdWJDZWxsXCIpLmluZm87XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVDbHViT3RoZXJWaWV3KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoXCJDbHViQ2VsbFwiKS5pbmZvKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIENsdWJDZWxsLmdldENvbXBvbmVudChcIkNsdWJDZWxsXCIpLnNldENsdWJDZWxsSW5mbyhtc2cucGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldEluaXROb2RlVmlzaWJsZSA6IGZ1bmN0aW9uIChiVmlzaWJsZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmluaXROb2RlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0Tm9kZS5hY3RpdmUgPSBiVmlzaWJsZTtcclxuICAgICAgICAgICAgY2MubG9nKFwiQ2x1YlZpZXcgaW5pdE5vZGU9XCIsIGJWaXNpYmxlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ3JlYXRlQ2x1Yk1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJDbHViVmlldy5vbkNyZWF0ZUNsdWJNc2dcIik7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuS/seS5kOmDqOWIm+W7uuaIkOWKn1wiKTtcclxuICAgICAgICAgICAgdGhpcy5zZW5kR2V0Q2x1Ykxpc3QoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjcmVhdGVDbHViUm9vbVZpZXcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2x1YlZpZXcuY3JlYXRlQ2x1YlJvb21WaWV3XCIpO1xyXG4gICAgICAgIHZhciBDbHViUm9vbVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJSb29tVmlldyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKENsdWJSb29tVmlldyk7XHJcbiAgICAgICAgQ2x1YlJvb21WaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjcmVhdGVDbHViT3RoZXJWaWV3IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkNsdWJWaWV3LmNyZWF0ZUNsdWJPdGhlclZpZXdcIik7XHJcbiAgICAgICAgdmFyIENsdWJPdGhlclZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJKb2luVmlldyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKENsdWJPdGhlclZpZXcpO1xyXG4gICAgICAgIENsdWJPdGhlclZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DbHViTGlzdE1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkNsdWJWaWV3Lm9uQ2x1Ykxpc3RNc2cgbGVuZ3RoPVwiLCBtc2cubGlzdC5sZW5ndGgpO1xyXG4gICAgICAgICAgICBpZiAobXNnLmxpc3QubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRJbml0Tm9kZVZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbih0cnVlKTtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaW5kZXggPSAwOyBtc2cubGlzdCAhPSBudWxsICYmIGluZGV4IDwgbXNnLmxpc3QubGVuZ3RoOyBpbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgQ2x1YkNlbGwgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJDZWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmFkZENoaWxkKENsdWJDZWxsKTtcclxuICAgICAgICAgICAgICAgIENsdWJDZWxsLnNldFBvc2l0aW9uKGNjLnAoMCwwIC1cclxuICAgICAgICAgICAgICAgICAgICBDbHViQ2VsbC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCooaW5kZXggKyAwLjUpKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgQ2x1YkNlbGwub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJJbmZvID0gZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudChcIkNsdWJDZWxsXCIpLmluZm87XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQ2x1YlJvb21WaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gQ2x1YkNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBDbHViQ2VsbC5nZXRDb21wb25lbnQoXCJDbHViQ2VsbFwiKS5zZXRDbHViQ2VsbEluZm8obXNnLmxpc3RbaW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIGhlaWdodCAqIChtc2cubGlzdC5sZW5ndGgpID4gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQgPSBoZWlnaHQgKiAobXNnLmxpc3QubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25TY2VuZU1zZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIGlmIChtc2cucG9wVmlldyA9PSBcIkNsdWJBZGRWaWV3XCIpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5idG4gPT0gXCJOZXdDbHViXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2x1YkNyZWF0ZVZpZXcoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKG1zZy5idG4gPT0gXCJBZGRDbHViXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VhcmNoUG9wKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG1zZy5wb3BWaWV3ID09IFwiQ2x1YlJvb21WaWV3XCIpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5idG4gPT0gXCJCdG5DbG9zZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJDbHViVmlldy5vblNjZW5lTXNnIENsdWJSb29tVmlldyBCdG5DbG9zZS5cIik7XHJcbiAgICAgICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuU2VsZkNsdWJJZCA9IDA7XHJcbiAgICAgICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1YkluZm8gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLkN1ckNsdWJNZW1MaXN0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuYWRkQ2hpbGQodGhpcy5pbml0Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEluaXROb2RlVmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEdldENsdWJMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG1zZy5wb3BWaWV3ID09IFwiQ2x1YkpvaW5WaWV3XCIpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5idG4gPT0gXCJSZXNwSm9pblwiKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJDbHViVmlldy5vblNjZW5lTXNnIENsdWJKb2luVmlldyBSZXNwSm9pblwiKTtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5TZWxmQ2x1YklkID0gMDtcclxuICAgICAgICAgICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5DdXJDbHViSW5mbyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuQ3VyQ2x1Yk1lbUxpc3QgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZCh0aGlzLmluaXROb2RlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW5pdE5vZGVWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kR2V0Q2x1Ykxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxudmFyIENtZF9Db21tb24gPSByZXF1aXJlKCdDbWRfQ29tbW9uJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgICBTQkZfUkVRX1JFQURZX0NNRF9JRCAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDEsIC8v5YeG5aSHXHJcbiAgICBTQkZfUkVTUF9SRUFEWV9DTURfSUQgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDIsXHJcbiAgICBTQkZfTk9USUZZX0dBTUVfU1RBUlRfQ01EX0lEIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2IHwgMHg0LCAvL+mAmuefpeeOqeWutizmuLjmiI/lvIDlp4ss5Y+R5LiJ5byg54mMXHJcblxyXG4gICAgU0JGX1JFUV9DQUxMX0JBTktFUl9DTURfSUQgICAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDUsIC8v5oqi5bqEICjkuI3miqLvvIzmma7pgJrvvIzotoXnuqcpXHJcbiAgICBTQkZfUkVTUF9DQUxMX0JBTktFUl9DTURfSUQgICA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNiB8IDB4NiwgLy/ov5Tlm55cclxuXHJcbiAgICBTQkZfTk9USUZZX0NPTkZJUk1fQkFOS0VSX0NNRF9JRCA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNnwweDgsIC8v6YCa55+l546p5a62LOehruWumuW6hOWutlxyXG5cclxuICAgIFNCRl9SRVFfQkVUX0NPSU5fQ01EX0lEICAgIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2IHwgMHg5LCAvL+S4i+azqO+8iOS4jeeCueS4i+azqO+8jOm7mOiupOacgOWwj++8iVxyXG4gICAgU0JGX1JFU1BfQkVUX0NPSU5fQ01EX0lEICAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweGEsXHJcblxyXG4gICAgU0JGX05PVElGWV9PUEVOX0NBUkRfQ01EX0lEIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2fDB4YywgLy/pgJrnn6XnnIvniYxcclxuXHJcbiAgICBTQkZfUkVRX09QRU5fQ0FSRF9DTURfSUQgIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2IHwgMHhkLCAvL+W8gOeJjFxyXG4gICAgU0JGX1JFU1BfT1BFTl9DQVJEX0NNRF9JRCA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNiB8IDB4ZSwgLy9cclxuXHJcbiAgICBTQkZfTk9USUZZX09ORV9HQU1FX1JFU1VMVF9DTURfSUQgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDEwLCAvL+mAmuefpeS4gOWxgOe7k+adn+e7k+aenFxyXG5cclxuICAgIFNCRl9OT1RJRllfTk9UX0NBTExfQkFOS0VSX0NNRF9JRCA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNiB8IDB4MTYsIC8v6YCa55+l5pyq6YCJ5oup5oqi5bqE55qE546p5a625Li65LiN5oqiXHJcbiAgICBTQkZfTk9USUZZX05PVF9CRVRfQ09JTl9DTURfSUQgICAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDE4LCAvL+acquS4i+azqOeahOeOqeWutlxyXG5cclxuICAgIFNCRl9OT1RJRllfVE9UQUxfR0FNRV9SRVNVTFRfQ01EX0lEIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2IHwgMHgxMiwgLy/pgJrnn6XmgLvnu5PmnpxcclxuXHJcbiAgICAvL+ivt+axguahjOWtkOivpuaDhVxyXG4gICAgVVNfUkVRX1RBQkxFX0RFVEFJTF9DTURfSUQgICAgICAgICA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDE1LFxyXG4gICAgVVNfUkVTUF9UQUJMRV9ERVRBSUxfQ01EX0lEICAgICAgICA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDE2LFxyXG4gICAgLy/luK7liqks5o+Q56S65piv5ZCm5pyJ54mbXHJcbiAgICBTQkZfUkVRX0hFTFBfQ01EX0lEICAgICAgICAgICAgICAgICA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNnwweDUsXHJcbiAgICBTQkZfUkVTUF9IRUxQX0NNRF9JRCAgICAgICAgICAgICAgICA6IHdpbmRvdy5TZXJ2ZXJUeXBlLkVfU0lYX0JVTExGSUdIVF9UWVBFPDwxNnwweDYsXHJcblxyXG4gICAgVVNfUkVRX1BMQVlFUl9MSVNUX0NNRF9JRCAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxNywgLy/ojrflj5bnjqnlrrbliJfooahcclxuICAgIFVTX1JFU1BfUExBWUVSX0xJU1RfQ01EX0lEIDogd2luZG93LlNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4MTgsIC8v6I635Y+W546p5a625YiX6KGoXHJcblxyXG5cclxuICAgIC8v5omY566hXHJcbiAgICBTQkZfUkVRX0FJX0NNRF9JRCAgICAgIDogd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEU8PDE2fDB4NyxcclxuICAgIFNCRl9SRVNQX0FJX0NNRF9JRCAgICAgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTZ8MHg4LFxyXG4gICAgLy/pgJrnn6XouKLkurrvvIjnvqTkuLvkuLvliqjouKLvvIzouqvkuIrmsqHpkrHouKLvvIlcclxuICAgIFNCRl9OT1RJRllfS0lDS09VVF9DTURfSUQgOiB3aW5kb3cuU2VydmVyVHlwZS5FX1NJWF9CVUxMRklHSFRfVFlQRTw8MTYgfCAweDE0IC8v6YCa55+l6Lii5Lq6XHJcblxyXG59O1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG53aW5kb3cuU2VydmVyVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgLy9FX1VTRVJfU0VSVkVSX1RZUEUgICAgICAgICAgOiAxLFxyXG4gICAgLy9FX0NFTlRFUl9TRVJWRVJfVFlQRSAgICAgICAgOiAzLFxyXG4gICAgLy9FX0NPTU1PTl9HQU1FX1RZUEUgICAgICAgICAgOjEwMCxcclxuICAgIC8vRV9TSVhfQlVMTEZJR0hUX1RZUEUgICAgICAgIDogMTAxLCAgICAgICAvL+WFreS6uuaooeW8j1xyXG4gICAgLy9FX0JVTExGSUdIVF9IVU5EUkVEX1RZUEUgICAgOiAxMDIsICAgICAgIC8v55m+5Lq6XHJcbiAgICBFX1VOS05PV05fU0VSVkVSX1RZUEUgICAgOiAwLFxyXG4gICAgRV9VU0VSX1NFUlZFUl9UWVBFICAgICAgIDogMSwgICAvL+aOpeWFpeacjeWKoeWZqFxyXG4gICAgRV9EQl9TRVJWRVJfVFlQRSAgICAgICAgIDogMiwgICAvL+aVsOaNruacjeWKoeWZqFxyXG4gICAgRV9DRU5URVJfU0VSVkVSX1RZUEUgICAgIDogMywgICAvL+S4reW/g+acjeWKoeWZqCzopoHkv53lrZjmlbDmja7kuIDoh7TmgKcs5aaC56eB5Lq65oi/SUQsXHJcbiAgICBFX1NUQVRVU19TRVJWRVJfVFlQRSAgICAgOiA0LCAgIC8v54q25oCB5pyN5Yqh5ZmoXHJcbiAgICBFX0NMVUJfU0VSVkVSX1RZUEUgICAgICAgOiA1LCAgIC8v5L+x5LmQ6YOo5pyN5Yqh5ZmoXHJcblxyXG4gICAgRV9DT01NT05fR0FNRV9UWVBFICAgICAgIDogMTAwLCAvL+a4uOaIj+acjeexu+Wei1xyXG4gICAgRV9TSVhfQlVMTEZJR0hUX1RZUEUgICAgIDogMTAxLCAvL+WFreS6uuaooeW8j1xyXG4gICAgRV9CVUxMRklHSFRfSFVORFJFRF9UWVBFIDogMTAyLCAvL+eZvuS6ulxyXG59KTtcclxuXHJcbi8v5b+D6LezXHJcbndpbmRvdy5VU19SRVFfSEVBUlRCRUFUX0NNRF9JRCAgICAgID0gU2VydmVyVHlwZS5FX1VTRVJfU0VSVkVSX1RZUEU8PDE2IHwgMHgxOy8vKlxyXG53aW5kb3cuVVNfUkVTUF9IRUFSVEJFQVRfQ01EX0lEICAgICA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4MjsvLypcclxuLy/nlKjmiLfnmbvlvZXorqTor4Fcclxud2luZG93LlVTX1JFUV9MT0dJTl9DTURfSUQgICAgICA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4MzsvLypcclxud2luZG93LlVTX1JFU1BfTE9HSU5fQ01EX0lEICAgICA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4NDsvLypcclxuLy/mnI3liqHlmajkuLvliqjouKLkurpcclxud2luZG93LlVTX0tJQ0tfT1VUX0NNRF9JRCAgICAgICA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4NjtcclxuLy/pgJrnn6XnjqnlrrbkuYvliY3lnKjmn5DkuKrmuLjmiI/kuK1cclxud2luZG93LlVTX05PVElGWV9JTl9HQU1FX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4ODtcclxuXHJcbi8v6YCa55+l5qGM5Li757uT5p2f5o+Q56S6XHJcbndpbmRvdy5VU19OT1RGSVlfT1dORVJfVEFCTEVJTkZPX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDI7XHJcbi8v6YCa55+l5qGM5Li756Gu6K6k546p5a625piv5ZCm5YWl5bqnXHJcbndpbmRvdy5VU19OT1RJRllfT1dORVJfQ09ORklSTV9TSVRfQ01EX0lEID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDQ7XHJcbi8v5Yib5bu656eB5Lq65qGMXHJcbndpbmRvdy5VU19SRVFfQ1JFQVRFX1RBQkxFX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDc7Ly8qXHJcbndpbmRvdy5VU19SRVNQX0NSRUFURV9UQUJMRV9DTURfSUQgID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDg7IC8v6L+U5Zue57uT5p6cLy8qXHJcbi8v5p+l5om+56eB5Lq65oi/XHJcbndpbmRvdy5VU19SRVFfRklORF9UQUJMRV9DTURfSUQgICAgID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDk7XHJcbndpbmRvdy5VU19SRVNQX0ZJTkRfVEFCTEVfQ01EX0lEICAgID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweGE7XHJcblxyXG4vL+i/m+WFpea4uOaIj1xyXG53aW5kb3cuVVNfUkVRX0VOVEVSX0dBTUVfQ01EX0lEICAgICA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4MTtcclxud2luZG93LlVTX1JFU1BfRU5URVJfR0FNRV9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDI7XHJcbi8v56a75byA5ri45oiPXHJcbndpbmRvdy5VU19SRVFfTEVBVkVfR0FNRV9DTURfSUQgICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgzO1xyXG53aW5kb3cuVVNfUkVTUF9MRUFWRV9HQU1FX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4NDtcclxuXHJcbi8v6K+35rGC5Z2Q5LiLb3Lnq5notbdcclxud2luZG93LlVTX1JFUV9TSVRfRE9XTl9DTURfSUQgICAgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDU7XHJcbndpbmRvdy5VU19SRVNQX1NJVF9ET1dOX0NNRF9JRCAgICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHg2O1xyXG5cclxuXHJcbndpbmRvdy5VU19SRVFfQ0FSUllfQ09JTl9DTURfSUQgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHg3OyAvL+W4puWFpemHkeW4gVxyXG53aW5kb3cuVVNfUkVTUF9DQVJSWV9DT0lOX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4ODsgLy9cclxuXHJcbi8v5qGM5Li756Gu6K6kXHJcbndpbmRvdy5VU19SRVFfT1dORVJfQ09ORklSTV9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDk7XHJcbndpbmRvdy5VU19SRVNQX09XTkVSX0NPTkZJUk1fQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweGE7XHJcblxyXG4vL+e+pOS4u+S4u+WKqOi4ouS6ulxyXG53aW5kb3cuVVNfUkVRX09XTkVSX0tJQ0tPVVRfUExBWUVSQ01EX0lEICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHhiO1xyXG53aW5kb3cuVVNfUkVTUF9PV05FUl9LSUNLT1VUX1BMQVlFUkNNRF9JRCAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHhjO1xyXG5cclxud2luZG93LlVTX05PVElGWV9PV05FUl9LSUNLT1VUX1BMQVlFUl9DTURfSUQgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweGU7XHJcblxyXG4vL+W8gOWni+eJjOWxgC/op6PmlaNcclxud2luZG93LlVTX1JFUV9HQU1FX1NXSVRDSF9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweGY7XHJcbndpbmRvdy5VU19SRVNQX0dBTUVfU1dJVENIX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxMDtcclxuXHJcbndpbmRvdy5VU19OT1RJRllfR0FNRV9TV0lUQ0hfQ01EX0lEID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxMjtcclxuXHJcbi8v6IGK5aSpXHJcbndpbmRvdy5VU19SRVFfR0FNRV9DSEFUX0NNRF9JRCAgICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxMztcclxud2luZG93LlVTX1JFU1BfR0FNRV9DSEFUX0NNRF9JRCAgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDE0O1xyXG5cclxud2luZG93LlVTX1JFUV9GT1VORF9UQUJMRV9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4NTsgLy/lj5HnjrBcclxud2luZG93LlVTX1JFU1BfRk9VTkRfVEFCTEVfQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4NjtcclxuXHJcbndpbmRvdy5VU19SRVFfU0NPUkVfTElTVF9DTURfSUQgICAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OGI7IC8v6K+35rGC5oiY57up5YiX6KGoXHJcbi8vIOi/lOWbnuaImOe7qeWIl+ihqFxyXG53aW5kb3cuVVNfUkVTUF9TQ09SRV9MSVNUX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDhjOyAvL1xyXG5cclxud2luZG93LlVTX1JFUV9TQ09SRV9ERVRBSUxfQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4ZDsgLy/ojrflj5bmiJjnu6nor6bmg4Vcclxud2luZG93LlVTX1JFU1BfU0NPUkVfREVUQUlMX0NNRF9JRCAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4ZTsgLy9cclxuXHJcbndpbmRvdy5VU19SRVFfU0hPUF9DT05GX0NNRF9JRCAgICAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4ODk7IC8v6I635Y+W5ZWG5Zy66YWN572uXHJcbndpbmRvdy5VU19SRVNQX1NIT1BfQ09ORl9DTURfSUQgICAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OGE7XHJcblxyXG53aW5kb3cuVVNfUkVRX0NSRUFURV9DTFVCX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDgxOyAvL+WIm+W7uuS/seS5kOmDqFxyXG53aW5kb3cuVVNfUkVTUF9DUkVBVEVfQ0xVQl9DTURfSUQgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDgyOyAvL1xyXG5cclxud2luZG93LlVTX1JFUV9DTFVCX0xJU1RfQ01EX0lEICAgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4MzsgLy/ojrflj5bkv7HkuZDpg6jliJfooahcclxud2luZG93LlVTX1JFU1BfQ0xVQl9MSVNUX0NNRF9JRCAgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4NDsgLy9cclxuXHJcbndpbmRvdy5VU19SRVFfQ0xVQl9UQUJMRV9DTURfSUQgICAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4ODc7IC8v6I635Y+W5L+x5LmQ6YOo5qGM5a2Q5YiX6KGoXHJcbndpbmRvdy5VU19SRVNQX0NMVUJfVEFCTEVfQ01EX0lEICAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4ODg7XHJcblxyXG53aW5kb3cuVVNfUkVRX1NFQVJDSF9DTFVCX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDk5OyAvL+aQnOe0ouS/seS5kOmDqFxyXG53aW5kb3cuVVNfUkVTUF9TRUFSQ0hfQ0xVQl9DTURfSUQgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDlBO1xyXG5cclxud2luZG93LlVTX1JFUV9DTFVCX1VQR1JBREVfQ09TVF9DTURfSUQgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OUY7IC8v6I635Y+W5L+x5LmQ6YOo5Y2H57qn5byA6ZSAXHJcbndpbmRvdy5VU19SRVNQX0NMVUJfVVBHUkFERV9DT1NUX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweEEwO1xyXG5cclxud2luZG93LkNMVUJfUkVRX01PRElGWV9JTkZPX0NNRF9JRCAgPSBTZXJ2ZXJUeXBlLkVfQ0xVQl9TRVJWRVJfVFlQRTw8MTYgfCAweDE7IC8v5L+u5pS55L+x5LmQ6YOoXHJcbndpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEID0gU2VydmVyVHlwZS5FX0NMVUJfU0VSVkVSX1RZUEU8PDE2IHwgMHgyO1xyXG5cclxud2luZG93LkNMVUJfUkVRX0dFVF9NRU1CRVJfTElTVF9DTURfSUQgID0gU2VydmVyVHlwZS5FX0NMVUJfU0VSVkVSX1RZUEU8PDE2IHwgMHgzOyAvL+ivt+axguS/seS5kOmDqOaIkOWRmOWIl+ihqFxyXG53aW5kb3cuQ0xVQl9SRVNQX0dFVF9NRU1CRVJfTElTVF9DTURfSUQgPSBTZXJ2ZXJUeXBlLkVfQ0xVQl9TRVJWRVJfVFlQRTw8MTYgfCAweDQ7XHJcblxyXG53aW5kb3cuQ0xVQl9SRVFfSk9JTl9DTFVCX0NNRF9JRCAgICAgICAgPSBTZXJ2ZXJUeXBlLkVfQ0xVQl9TRVJWRVJfVFlQRTw8MTYgfCAweDU7IC8v6K+35rGC5Yqg5YWl5L+x5LmQ6YOoXHJcbndpbmRvdy5DTFVCX1JFU1BfSk9JTl9DTFVCX0NNRF9JRCAgICAgICA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4NjtcclxuXHJcbndpbmRvdy5DTFVCX05PVElGWV9PV05FUl9DT05GSVJNX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4NzsgLy/pgJrnn6XnvqTkuLvnoa7orqTmmK/lkKblhYHorrjliqDlhaVcclxuXHJcbndpbmRvdy5DTFVCX1JFUV9PV05FUl9DT05GSVJNX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OTsgLy/nvqTkuLvnoa7orqRcclxud2luZG93LkNMVUJfUkVTUF9PV05FUl9DT05GSVJNX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0NMVUJfU0VSVkVSX1RZUEU8PDE2IHwgMHhhO1xyXG5cclxud2luZG93LkNMVUJfUkVRX09XTkVSX1JNX01FTUJFUl9DTURfSUQgID0gU2VydmVyVHlwZS5FX0NMVUJfU0VSVkVSX1RZUEU8PDE2IHwgMHhiOyAvL+WIoOmZpOaIkOWRmFxyXG53aW5kb3cuQ0xVQl9SRVNQX09XTkVSX1JNX01FTUJFUl9DTURfSUQgPSBTZXJ2ZXJUeXBlLkVfQ0xVQl9TRVJWRVJfVFlQRTw8MTYgfCAweGM7IC8vXHJcblxyXG53aW5kb3cuQ0xVQl9SRVFfT1dORVJfTU9ESUZZX1JPTEVfQ01EX0lEICA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4ZDsgLy/kv67mlLnnjqnlrrbmnYPpmZBcclxud2luZG93LkNMVUJfUkVTUF9PV05FUl9NT0RJRllfUk9MRV9DTURfSUQgPSBTZXJ2ZXJUeXBlLkVfQ0xVQl9TRVJWRVJfVFlQRTw8MTYgfCAweGU7IC8vXHJcblxyXG53aW5kb3cuVVNfUkVRX05FV19NU0dfTlVNX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDkxOyAvL+iOt+WPluaWsOa2iOaBr+aVsOmHj1xyXG53aW5kb3cuVVNfUkVTUF9ORVdfTVNHX05VTV9DTURfSUQgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDkyO1xyXG5cclxud2luZG93LlVTX1JFUV9NU0dfTElTVF9DTURfSUQgICAgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg5MzsgLy/ojrflj5bmtojmga/liJfooahcclxud2luZG93LlVTX1JFU1BfTVNHX0xJU1RfQ01EX0lEICAgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg5NDsgLy/kuI3lkIznmoTmtojmga/nsbvlnovov5Tlm57nmoTnu5PmnpzkuI3kuIDmoLdcclxuXHJcbndpbmRvdy5VU19SRVFfU0VUX01TR19SRUFEX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OTU7IC8v6K6+572u5raI5oGv5bey6K+7XHJcbndpbmRvdy5VU19SRVNQX1NFVF9NU0dfUkVBRF9DTURfSUQgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OTY7XHJcblxyXG53aW5kb3cuVVNfUkVRX1VTRVJfREVUQUlMX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDlCOyAvL+iOt+WPlueUqOaIt+ivpuaDhVxyXG53aW5kb3cuVVNfUkVTUF9VU0VSX0RFVEFJTF9DTURfSUQgICA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDlDOyAvL1xyXG5cclxud2luZG93LlVTX1JFUV9DUkVBVEVfQ09TVF9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg5RDsgLy/ojrflj5bliJvlu7rmoYzlrZDlvIDplIBcclxud2luZG93LlVTX1JFU1BfQ1JFQVRFX0NPU1RfQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg5RTsgLy9cclxuXHJcbndpbmRvdy5DTFVCX1JFUV9ESVNNSVNTX0NMVUJfQ01EX0lEICA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4ZjsgLy/op6PmlaPkv7HkuZDpg6hcclxud2luZG93LkNMVUJfUkVTUF9ESVNNSVNTX0NMVUJfQ01EX0lEID0gU2VydmVyVHlwZS5FX0NMVUJfU0VSVkVSX1RZUEU8PDE2IHwgMHgxMDtcclxuXHJcbndpbmRvdy5DTFVCX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEICA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4MTE7IC8v5Yib5bu656eB5Lq65qGMXHJcbndpbmRvdy5DTFVCX1JFU1BfQ1JFQVRFX1RBQkxFX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9DTFVCX1NFUlZFUl9UWVBFPDwxNiB8IDB4MTI7Ly/lpoLmnpzliJvlu7rmiJDlip/vvIzlm57lub/mkq3nu5nmiYDmnInlnKjnur/nmoTkv7HkuZDpg6jnjqnlrrZcclxuXHJcbndpbmRvdy5VU19OT1RJRllfUEFZX09QRVJBVEVfQ01EX0lEICA9IFNlcnZlclR5cGUuRV9DRU5URVJfU0VSVkVSX1RZUEU8PDE2IHwgMHhjOyAvL+mAmuefpeeOqeWutuaUr+S7mOe7k+aenFxyXG5cclxuLy/ph5HluIHlhZHmjaJcclxud2luZG93LlVTX1JFUV9FWENIQU5HRV9HT0xEX0NNRF9JRCAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg4ZjsgLy/ph5HluIHlhZHmjaLljY/orq4o57uZ5a6i5oi356uv5L2/55SoKVxyXG53aW5kb3cuVVNfUkVTUF9FWENIQU5HRV9HT0xEX0NNRF9JRCA9IFNlcnZlclR5cGUuRV9EQl9TRVJWRVJfVFlQRTw8MTYgfCAweDkwO1xyXG5cclxuLy8g6Kej5pWj54mM5bGAXHJcbi8vIHdpbmRvdy5VU19SRVFfRElTTUlTU19HQU1FX0NNRF9JRCAgICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxNTtcclxuLy8gd2luZG93LlVTX1JFU1BfRElTTUlTU19HQU1FX0NNRF9JRCAgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDE2O1xyXG5cclxuLy/op6PmlaNcclxud2luZG93LlVTX1JFUV9ESVNNSVNTX1RBQkxFX0NNRF9JRCAgICAgICAgICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgyMSAvL+ivt+axguino+aVo+eJjOahjFxyXG53aW5kb3cuVVNfUlNQX0RJU01JU1NfVEFCTEVfQ01EX0lEICAgICAgICAgICAgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDIyIC8vXHJcbndpbmRvdy5VU19OT1RJRllfRElTTUlTU19UQUJMRV9DTURfSUQgICAgICAgICA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4MjMgLy/pgJrnn6VcclxuXHJcbndpbmRvdy5VU19SRVFfQ09ORklSTV9ESVNNSVNTX1RBQkxFX0NNRF9JRCAgICA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4MjQgLy/lpITnkIbop6PmlaPor7fmsYJcclxud2luZG93LlVTX1JTUF9DT05GSVJNX0RJU01JU1NfVEFCTEVfQ01EX0lEICAgID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgyNSAvL1xyXG53aW5kb3cuVVNfTk9USUZZX0NPTkZJUk1fRElTTUlTU19UQUJMRV9DTURfSUQgPSBTZXJ2ZXJUeXBlLkVfQ09NTU9OX0dBTUVfVFlQRTw8MTYgfCAweDI2IC8v6YCa55+lXHJcblxyXG4vLyDpgJrnn6Xop6PmlaPniYzlsYBcclxud2luZG93LlVTX05PVElGWV9ESVNNSVNTX0dBTUVfQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfVVNFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDEyO1xyXG5cclxuXHJcbndpbmRvdy5VU19SRVFfT1dORVJfQ09ORklSTV9TV0lUQ0hfQ01EX0lEICA9IFNlcnZlclR5cGUuRV9DT01NT05fR0FNRV9UWVBFPDwxNiB8IDB4MTUgLy/mmK/lkKblvIDlkK/lhaXluqdcclxud2luZG93LlVTX1JFU1BfT1dORVJfQ09ORklSTV9TV0lUQ0hfQ01EX0lEID0gU2VydmVyVHlwZS5FX0NPTU1PTl9HQU1FX1RZUEU8PDE2IHwgMHgxNlxyXG5cclxuLy8gLy/pgJrnn6XmoYzkuLtcclxuLy8gd2luZG93LlVTX05PVElGWV9PV05FUl9DT05GSVJNX1NJVF9DTURfSUQgICA9IFNlcnZlclR5cGUuRV9VU0VSX1NFUlZFUl9UWVBFPDwxNiB8IDB4ZTtcclxuLy/pgJrnn6Xop6PmlaPniYzlsYBcclxud2luZG93LlVTX05PVElGWV9ESVNNSVNTX0dBTUVfQ01EX0lEICAgPSBTZXJ2ZXJUeXBlLkVfVVNFUl9TRVJWRVJfVFlQRTw8MTYgfCAweDE3O1xyXG5cclxuXHJcblxyXG4vLyDor7fmsYLlub/lkYpcclxud2luZG93LlVTX1JFUV9CQU5ORVJfTElTVF9DTURfSUQgICAgPSBTZXJ2ZXJUeXBlLkVfREJfU0VSVkVSX1RZUEU8PDE2IHwgMHg5NztcclxuLy8g5bm/5ZGK6L+U5Zue5YiX6KGoXHJcbndpbmRvdy5VU19SRVNQX0JBTk5FUl9MSVNUX0NNRF9JRCAgID0gU2VydmVyVHlwZS5FX0RCX1NFUlZFUl9UWVBFPDwxNiB8IDB4OTg7XHJcblxyXG4vLyDnu5Hlrprmjqjlub/kurpcclxud2luZG93LlVTX1JFUV9CSU5EX1JFRkVSUkFMX0NNRF9JRCAgPSBTZXJ2ZXJUeXBlLkVfQ0VOVEVSX1NFUlZFUl9UWVBFPDwxNiB8IDB4RDsgLy/nu5HlrprmjqjojZDlhaVcclxuXHJcbndpbmRvdy5VU19SRVNQX0JJTkRfUkVGRVJSQUxfQ01EX0lEID0gU2VydmVyVHlwZS5FX0NFTlRFUl9TRVJWRVJfVFlQRTw8MTYgfCAweEU7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMzEuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbi8qXHJcbiogdHlwZSBVU19SRVFfQ1JFQVRFX0NMVUJfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFBhcmFtIFBBUkFNX1JFUV9DUkVBVEVfQ0xVQl9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVRX0NSRUFURV9DTFVCX1Qgc3RydWN0IHtcclxuIE5hbWUgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gSGVhZFVybCBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBBZGRyZXNzIHN0cmluZyBganNvbjpcImFkZHJlc3NcImBcclxuIExldmVsICAgaW50ICAgIGBqc29uOlwibGV2ZWxcImBcclxuIEludHJvICAgc3RyaW5nIGBqc29uOlwiaW50cm9cImBcclxuIH1cclxuKiAqL1xyXG5cclxuZnVuY3Rpb24gQ3JlYXRlQ2x1YlJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfQ1JFQVRFX0NMVUJfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ2FycnlDb2luUmVxUGFja2V0LnNlbmRcIik7XHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBwYXJhbSA6IChtc2cpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDcmVhdGVDbHViUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMxLlxyXG4gKi9cclxuLypcclxuKiB0eXBlIFVTX1JFU1BfQ1JFQVRFX0NMVUJfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9SRVNQX0NSRUFURV9DTFVCX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBQQVJBTV9SRVNQX0NSRUFURV9DTFVCX1Qgc3RydWN0IHtcclxuIENsdWJJZCAgIGludCAgICBganNvbjpcImNsdWJpZFwiYFxyXG4gT3duZXJVaWQgdWludDMyIGBqc29uOlwib3duZXJ1aWRcImBcclxuIEVuZFRpbWUgIGludDY0ICBganNvbjpcImVuZHRpbWVcImBcclxuIH0qL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG5mdW5jdGlvbiBDcmVhdGVDbHViUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9DUkVBVEVfQ0xVQl9DTURfSUQ7XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ3JlYXRlQ2x1YlJlc3BQYWNrZXQub25NZXNzc2FnZVwiKTtcclxuICAgICAgICAvL3tcImNtZFwiOjY1NTM2MDgsXCJzZXFcIjowLFwidWlkXCI6MTAwMDYsXCJjb2RlXCI6MCxcImRlc2NcIjpcIuaJp+ihjOaIkOWKn1wiLFwiY2Fycnl1aWRcIjoxMDAwNixcImNhcnJ5Y29pblwiOjEwMH1cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnBhcmFtICAgID0gbXNnLnBhcmFtO1xyXG4gICAgICAgIHRoaXMuY2x1YmlkICAgPSBtc2cucGFyYW0uY2x1YmlkO1xyXG4gICAgICAgIHRoaXMub3duZXJ1aWQgPSBtc2cucGFyYW0ub3duZXJ1aWQ7XHJcbiAgICAgICAgdGhpcy5lbmR0aW1lICA9IG1zZy5wYXJhbS5lbmR0aW1lO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ3JlYXRlQ2x1YlJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjMuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbi8qXHJcbiogdHlwZSBVU19SRVFfQ1JFQVRFX1RBQkxFX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBDbHViSWQgICAgICAgIGludCAgICBganNvbjpcImNsdWJpZFwiYCAgICAgICAgICAgICAgICAgICAgIC8v5L+x5LmQ6YOoaWQsIOWmguaenOeOqeWutuWIm+W7uu+8jD0wXHJcbiBDbHViTGV2ZWwgaW50ICAgIGBqc29uOlwiY2x1YmxldmVsXCJgICAgICAgICAgICAgIC8v5L+x5LmQ6YOobGV2ZWwsIOWmguaenOeOqeWutuWIm+W7uu+8jD0wXHJcbiBHYW1lSWQgICAgICB1aW50MTYgYGpzb246XCJnYW1laWRcImAgICAgICAgICAgICAgLy/mnI3liqHlmahpZCAo5YWt5Lq65qGM5oqi5bqEPTEwMSlcclxuIEdhbWVMZXZlbCB1aW50MTYgYGpzb246XCJnYW1lbGV2ZWxcImAgICAgIC8v5ri45oiP562J57qnLOaaguaXtuaXoFxyXG4gUGFyYW0gICAgICAgICAgc3RyaW5nIGBqc29uOlwicGFyYW1cImBcdFx0ICAgICAgLy9iYXNlNjTkuYvlkI7nmoTlj4LmlbBcclxuIH1cclxuIC8v5YWt5Lq654mb54mb56eB5Lq65qGM5Y+C5pWwXHJcbiB0eXBlIFNCRl9QUklWQVRFX1RBQkxFX1BBUkFNX1Qgc3RydWN0IHtcclxuIFBheU1vZGUgICBpbnQgICAgIGBqc29uOlwicGF5bW9kZVwiYCAgLy/ku5jotLnmqKHlvI8gKOm7mOiupOmSu+efsylcclxuIEdhbWVUeXBlICBpbnQzMiAgIGBqc29uOlwiZ2FtZXR5cGVcImAgLy/pl63niYzmiqLluoQs5LiJ5byg5oqi5bqEKOS6jOmAieS4gClcclxuIE1pbkFudGUgICBpbnQgICAgIGBqc29uOlwibWl4YW50ZVwiYCAgLy/mnIDlsI/kuIvms6hcclxuIExpdmVUaW1lICBpbnQ2NCAgIGBqc29uOlwibGl2ZXRpbWVcImAgLy/moYzlrZDkvb/nlKjml7bpl7Qo56eSKVxyXG4gU2VhdHMgICAgIGludDggICAgYGpzb246XCJzZWF0c1wiYCAgICAvL+W6p+S9jeaVsFxyXG4gVGFibGVOYW1lIHN0cmluZyAgYGpzb246XCJuYW1lXCJgICAgICAvL+ahjOWtkOWQjeensFxyXG4gQnVsbE11bCAgIFtdaW50MzIgYGpzb246XCJidWxsbXVsXCJgICAvL+S7juaXoOeJm+W8gOWni++8jOS8oOS4gOS4quaVsOe7hFxyXG4gfVxyXG4qICovXHJcblxyXG5mdW5jdGlvbiBDcmVhdGVSb29tUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnLHR5cGUpIHtcclxuICAgICAgICBjYy5sb2coXCJDcmVhdGVSb29tUmVxUGFja2V0LnNlbmRcIik7XHJcbiAgICAgICAgY2MubG9nKHR5cGUpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGNsdWJpZCA6IHR5cGUuY2x1YmlkLFxyXG4gICAgICAgICAgICBjbHVibGV2ZWwgOiB0eXBlLmNsdWJsZXZlbCxcclxuICAgICAgICAgICAgZ2FtZWlkIDogdHlwZS5nYW1laWQsXHJcbiAgICAgICAgICAgIGdhbWVsZXZlbCA6IHR5cGUuZ2FtZWxldmVsLFxyXG4gICAgICAgICAgICBwYXJhbSA6IEJBU0U2NC5lbmNvZGVyKEpTT04uc3RyaW5naWZ5KG1zZykpLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIENyZWF0ZVJvb21SZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjMuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG4vKlxyXG4qXHJcbiogdHlwZSBVU19SRVNQX0NSRUFURV9UQUJMRV9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIENsdWJJZCAgICAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgICAgICAgICAgICAvL+WmguaenOaYr+aZrumAmueOqeWutu+8jD0wXHJcbiBDbHViTGV2ZWwgIGludCAgICBganNvbjpcImNsdWJsZXZlbFwiYCAgLy/kv7HkuZDpg6jnrYnnuqdcclxuIFByaXZhdGVJZHMgW11pbnQgIGBqc29uOlwicHJpdmF0ZWlkc1wiYCAvL+WmguaenHJldF9zdWNjZXNzLCBwcml2YXRlSWRzWzBd5piv5paw55Sf5oiQ55qENuS9jeaVsOWAvO+8jFxyXG4gLy/lpoLmnpxSRVRfRlVMTF9QUklWQVRFX1RBQkxFID0gLTQ4IOS7o+ihqOaCqOWIm+W7uueahOengeS6uuahjOW3sue7j+i+vuWIsOS4iue6vyxcclxuIC8vXHRwcml2YXRlaWRz5piv5omA5Lul5Yib5bu66L+H55qENuS9jeaVsCwg55WM6Z2i5o+Q56S6546p5a625bey57uP5Yib5bu65LqG5ZOq5Lqb56eB5Lq65qGMXHJcbiBHYW1lSWQgICAgIHVpbnQxNiBganNvbjpcImdhbWVpZFwiYFxyXG4gR2FtZUxldmVsICB1aW50MTYgYGpzb246XCJnYW1lbGV2ZWxcImBcclxuIEdhbWVTdmNJZCAgdWludDMyIGBqc29uOlwiZ2FtZXN2Y2lkXCJgIC8v5ri45oiP5pyN5Yqh5ZmoSURcclxuIFRhYmxlSWQgICAgaW50MzIgIGBqc29uOlwidGFibGVpZFwiYCAgIC8v5ri45oiP5Lit5p+Q5byg5qGM5a2QSURcclxuIH0qL1xyXG5mdW5jdGlvbiBDcmVhdGVSb29tUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9DUkVBVEVfVEFCTEVfQ01EX0lEO1xyXG4gICAgdGhpcy5wcml2YXRlaWQgPSAwOyAgICAgICAgIC8v5YWt5L2N5pWw55qE5qGM5a2QSUQo5oi/6Ze0KVxyXG4gICAgdGhpcy5nYW1lc3ZjaWQgPSAwOyAgICAgICAgIC8v5ri45oiP5pyN5Yqh5ZmoSURcclxuICAgIHRoaXMudGFibGVpZCA9IDA7ICAgICAgICAgICAvL+a4uOaIj+S4reafkOW8oOahjOWtkElEXHJcbiAgICB0aGlzLmdhbWVsZXZlbCA9IDE7XHJcbiAgICB0aGlzLmdhbWVpZCA9IDA7XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgLy97XCJjbWRcIjoxOTY2MTYsXCJzZXFcIjo0LFwidWlkXCI6MTE0MDcsXCJjb2RlXCI6MCxcImRlc2NcIjpcIuaJp+ihjOaIkOWKn1wiLFxyXG4gICAgICAgIC8vIFwiY2x1YmlkXCI6MCxcImNsdWJsZXZlbFwiOjAsXCJwcml2YXRlaWRzXCI6WzkxNzQ3M10sXCJnYW1laWRcIjoxMDEsXHJcbiAgICAgICAgLy8gXCJnYW1lbGV2ZWxcIjoyLFwiZ2FtZXN2Y2lkXCI6NyxcInRhYmxlaWRcIjo5MTc0NzN9XHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5nYW1laWQgPSBtc2cuZ2FtZWlkO1xyXG4gICAgICAgIHRoaXMuY2x1YmlkID0gbXNnLmNsdWJpZDtcclxuICAgICAgICB0aGlzLmNsdWJsZXZlbCA9IG1zZy5jbHVibGV2ZWw7XHJcbiAgICAgICAgdGhpcy5wcml2YXRlaWQgPSBtc2cucHJpdmF0ZWlkcztcclxuICAgICAgICB0aGlzLmdhbWVzdmNpZCA9IG1zZy5nYW1lc3ZjaWQ7XHJcbiAgICAgICAgdGhpcy50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgdGhpcy5nYW1lbGV2ZWwgPSBtc2cuZ2FtZWxldmVsO1xyXG4gICAgICAgIHRoaXMuZ2FtZWlkID0gbXNnLmdhbWVpZDtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDcmVhdGVSb29tUmVzcFBhY2tldDtcclxuIiwidmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxuXHJcbmZ1bmN0aW9uIENyZWF0ZVRhYmxlQ29zdFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfQ1JFQVRFX0NPU1RfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ3JlYXRlVGFibGVDb3N0UmVxUGFja2V0LnNlbmRcIik7XHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgIH1cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgQ3JlYXRlVGFibGVDb3N0UmVxUGFja2V0O1xyXG4iLCIvKlxyXG5cclxuIHR5cGUgVVNfUkVTUF9DUkVBVEVfQ09TVF9UIHN0cnVjdCB7XHJcbiAgICAgSnNvbkhlYWRcclxuICAgICBSZXNwSGVhZFxyXG4gICAgIExpc3QgW11QUklWQVRFX1RBQkxFX0NPU1RfVCBganNvbjpcImxpc3RcImBcclxuIH1cclxuXHJcbiB0eXBlIFBSSVZBVEVfVEFCTEVfQ09TVF9UIHN0cnVjdCB7XHJcbiAgICAgVHlwZSAgICBpbnQgYGpzb246XCJ0eXBlXCJgICAgIC8vMTogbGl2ZSB0aW1lIDI6IG1pbiBhbnRlXHJcbiAgICAgVmFsdWUgICBpbnQgYGpzb246XCJ2YWx1ZVwiYCAgIC8vc2Vjb25kIG9yIGFudGVcclxuICAgICBEaWFtb25kIGludCBganNvbjpcImRpYW1vbmRcImAgLy/mtojogJfpkrvnn7NcclxuICAgICBHb2xkICAgIGludCBganNvbjpcImdvbGRcImAgICAgLy/mtojogJfph5HluIFcclxuIH1cclxuXHJcbiovXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG5mdW5jdGlvbiBDcmVhdGVUYWJsZUNvc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCAgPSB3aW5kb3cuVVNfUkVTUF9DUkVBVEVfQ09TVF9DTURfSUQ7XHJcbiAgICB0aGlzLmxpc3QgPSBbXTtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiQ3JlYXRlVGFibGVDb3N0UmVzcFBhY2tldC5vbk1lc3NhZ2VcIik7XHJcbiAgICAgICAgdGhpcy5zZXEgID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCAgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5saXN0ID0gbXNnLmxpc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBDcmVhdGVUYWJsZUNvc3RSZXNwUGFja2V0O1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgICAgICBXZWJWaWV3IDogY2MuV2ViVmlldyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuTGVmdEluVG8odGhpcy5ub2RlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuICAgIFxyXG4gICAgY2FsbGxiYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50LEN1c3RvbkV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBpZihCdG5OYW1lID09IFwiQnRuQ2xvc2VcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldFdlYlZpZXdVcmwgIDpmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgdGhpcy5XZWJWaWV3LnVybCA9IHVybDtcclxuICAgIH1cclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzE1LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxuXHJcbmZ1bmN0aW9uIERpc21pc3NDbHViUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LkNMVUJfUkVRX0RJU01JU1NfQ0xVQl9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJEaXNtaXNzR2FtZVJlcVBhY2tldC5zZW5kXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgY2x1YmlkIDogbXNnLmNsdWJpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBEaXNtaXNzQ2x1YlJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8xNS5cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcblxyXG4vLyBDbHViSWQgICBpbnQgICAgYGpzb246XCJjbHViaWRcImBcclxuLy8gQ2x1Yk5hbWUgc3RyaW5nIGBqc29uOlwiY2x1Ym5hbWVcImBcclxuLy8gUm9sZSAgICAgdWludDggIGBqc29uOlwicm9sZVwiYFxyXG4vLyBVaWQgICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuLy8gTmFtZSAgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG5cclxuZnVuY3Rpb24gRGlzbWlzc0NsdWJSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfRElTTUlTU19DTFVCX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxICA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5wYXJhbSA9IG1zZy5wYXJhbTtcclxuICAgICAgICBjYy5sb2coXCJEaXNtaXNzQ2x1YlJlc3BQYWNrZXQgcGFyYW09XCIsIHRoaXMucGFyYW0pO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgRGlzbWlzc0NsdWJSZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG5cclxuZnVuY3Rpb24gRGlzbWlzc0dhbWVSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0RJU01JU1NfR0FNRV9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJEaXNtaXNzR2FtZVJlcVBhY2tldC5zZW5kXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBEaXNtaXNzR2FtZVJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gRGlzbWlzc0dhbWVSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0RJU01JU1NfR0FNRV9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBEaXNtaXNzR2FtZVJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjYuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJylcclxuXHJcbmZ1bmN0aW9uIEVudGVyUm9vbVJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfRU5URVJfR0FNRV9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJFbnRlclJvb21SZXFQYWNrZXQuc2VuZCxcIisgSlNPTi5zdHJpbmdpZnkobXNnKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jYy5sb2coXCJFbnRlclJvb21SZXFQYWNrZXQsXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgRW50ZXJSb29tUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzI2LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gRW50ZXJSb29tUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9FTlRFUl9HQU1FX0NNRF9JRDtcclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcbiAgICB0aGlzLm5hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5nYW1ldHlwZSA9IDA7XHJcbiAgICB0aGlzLm1peGFudGUgPSAwO1xyXG4gICAgdGhpcy5saXZldGltZSA9IDA7XHJcbiAgICB0aGlzLnJlbWFpbnRpbWUgPSAwO1xyXG4gICAgdGhpcy5ic3RhcnQgICAgPSAwO1xyXG4gICAgdGhpcy5zZWF0cyAgICAgPSAwO1xyXG4gICAgdGhpcy5idWxsbXVsICAgPSBbXTtcclxuICAgIHRoaXMuYm93bmVyICAgID0gMDtcclxuICAgIHRoaXMuc3VwZXJjb3N0ID0gMDtcclxuICAgIHRoaXMuZ2lmdGNvc3RzID0gW107XHJcbiAgICB0aGlzLnNlYXRlcnMgPSBcIlwiO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICAvL3tcImNtZFwiOjY1NTM2MDIsXCJzZXFcIjoxOCxcInVpZFwiOjEwMDA2LFwiY29kZVwiOjAsXCJkZXNjXCI6XCJcIixcclxuICAgICAgICAvLyB7XCJ0YWJsZWlkXCI6MCxcIm5hbWVcIjpcInF3ZXFcIixcInRzdGF0dXNcIjowLFwiZ2FtZXR5cGVcIjoxLFwibWluYW50ZVwiOjEsXCJtaW5jYXJyeVwiOjUwLFxyXG4gICAgICAgIC8vIFwibGl2ZXRpbWVcIjoxODAwLFwicmVtYWludGltZVwiOjE4MDAsXCJic3RhcnRcIjowLFwic2VhdHNcIjo2LFwiYnVsbG11bFwiOlsxLDEsMSwxLDEsMSwxLDEsMiwzLDAsNCwwLDAsMCwwXSxcclxuICAgICAgICAvLyBcImJvd25lclwiOjEsXCJic2l0ZG93blwiOjAsXCJ1c3RhdHVzXCI6MCxcImdvbGRcIjoxMDAwMCxcImRpYW1vbmRcIjo5OTkyLFwic2VhdGVyc1wiOltdfVxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnBhcmFtID0gbXNnLnBhcmFtO1xyXG5cclxuICAgICAgICBpZih0aGlzLnBhcmFtICE9IFwiXCIgJiYgdGhpcy5wYXJhbSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJFbnRlclJvb21SZXNwUGFja2V0XCIgKyBCQVNFNjQuZGVjb2Rlcihtc2cucGFyYW0pKTtcclxuICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKEJBU0U2NC5kZWNvZGVyKG1zZy5wYXJhbSkpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYmxlaWQgICAgPSBqc29uLnRhYmxlaWQ7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSAgICAgICA9IGpzb24ubmFtZTtcclxuICAgICAgICAgICAgdGhpcy5nYW1ldHlwZSAgID0ganNvbi5nYW1ldHlwZTtcclxuICAgICAgICAgICAgdGhpcy5taXhhbnRlICAgID0ganNvbi5taXhhbnRlO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmV0aW1lICAgPSBqc29uLmxpdmV0aW1lO1xyXG4gICAgICAgICAgICB0aGlzLnJlbWFpbnRpbWUgPSBqc29uLnJlbWFpbnRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuYnN0YXJ0ICAgID0ganNvbi5ic3RhcnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhdHMgICAgID0ganNvbi5zZWF0cztcclxuICAgICAgICAgICAgdGhpcy5idWxsbXVsICAgPSBqc29uLmJ1bGxtdWw7XHJcbiAgICAgICAgICAgIHRoaXMuYm93bmVyICAgID0ganNvbi5ib3duZXI7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhdGVycyAgID0ganNvbi5zZWF0ZXJzO1xyXG4gICAgICAgICAgICB0aGlzLnVzdGF0dXMgICA9IGpzb24udXN0YXR1cztcclxuICAgICAgICAgICAgdGhpcy50c3RhdHVzICAgPSBqc29uLnRzdGF0dXM7XHJcbiAgICAgICAgICAgIHRoaXMuc3VwZXJjb3N0ID0ganNvbi5zdXBlcmNvc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuZ2lmdGNvc3RzID0ganNvbi5naWZ0Y29zdHM7XHJcbiAgICAgICAgICAgIHRoaXMubWluY2FycnkgPSBqc29uLm1pbmNhcnJ5O1xyXG4gICAgICAgICAgICB0aGlzLm1heGNhcnJ5ID0ganNvbi5tYXhjYXJyeTtcclxuICAgICAgICAgICAgdGhpcy50b3RhbGNhcnJ5ID0ganNvbi50b3RhbGNhcnJ5O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgKiBUYWJsZUlkICAgIGludDMyICAgICAgYGpzb246XCJ0YWJsZWlkXCJgICAgIC8v5qGM5a2QSURcclxuICAgICAgICAgVGFibGVOYW1lICBzdHJpbmcgICAgIGBqc29uOlwibmFtZVwiYCAgICAgICAvL+ahjOWtkOWQjeensFxyXG4gICAgICAgICBHYW1lVHlwZSAgIGludDMyICAgICAgYGpzb246XCJnYW1ldHlwZVwiYCAgIC8v5qGM5a2Q57G75Z6LKOmXreeJjOaKouW6hCzlm5vlvKDmiqLluoQpXHJcbiAgICAgICAgIE1peEFudGUgICAgaW50ICAgICAgICBganNvbjpcIm1peGFudGVcImAgICAgLy/mnIDlsI/kuIvms6hcclxuICAgICAgICAgTGl2ZVRpbWUgICBpbnQgICAgICAgIGBqc29uOlwibGl2ZXRpbWVcImAgICAvL+ahjOWtkOaAu+aXtumXtFxyXG4gICAgICAgICBSZW1haW5UaW1lIGludCAgICAgICAgYGpzb246XCJyZW1haW50aW1lXCJgIC8v5Ymp5L2Z5pe26Ze0XHJcbiAgICAgICAgIEJzdGFydCAgICAgaW50OCAgICAgICBganNvbjpcImJzdGFydFwiYCAgICAgLy/moYzlrZDmmK/lkKblvIDlp4tcclxuICAgICAgICAgU2VhdHMgICAgICBpbnQ4ICAgICAgYGpzb246XCJzZWF0c1wiYCAgICAgICAvL+W6p+S9jeaVsFxyXG4gICAgICAgICBCdWxsTXVsICAgIFtdaW50MzIgICAgYGpzb246XCJidWxsbXVsXCJgICAgIC8v5YCN546HXHJcbiAgICAgICAgIEJvd25lciAgICAgaW50OCAgICAgICBganNvbjpcImJvd25lclwiYCAgICAgLy/mmK/lkKbmmK/moYzkuLtcclxuICAgICAgICAgU2VhdGVycyAgICBbXVNFQVRFUl9UIGBqc29uOlwic2VhdGVyc1wiYCAgICAvL+ahjOS9jeS4iueahOeOqeWutuS/oeaBr1xyXG4gICAgICAgICogKi9cclxuXHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBFbnRlclJvb21SZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy81LzYuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJylcclxuLypcclxuKiB0eXBlIFVTX1JFUV9FWENIQU5HRV9HT0xEX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBQYXJhbSBQQVJBTV9SRVFfRVhDSEFOR0VfR09MRF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVRX0VYQ0hBTkdFX0dPTERfVCBzdHJ1Y3Qge1xyXG4gVHlwZSBpbnQgYGpzb246XCJ0eXBlXCJgIC8v5Lyg6YCS55qE5piv6I635Y+W5ZWG5Z+O6YWN572u55qEZ29sZGxpc3TkuK3nmoR0eXBlXHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gRXhjaGFuZ2VHb2xkUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9FWENIQU5HRV9HT0xEX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkV4Y2hhbmdlR29sZFJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIHBhcmFtIDogbXNnLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEV4Y2hhbmdlR29sZFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNS82LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuLypcclxuKlxyXG4qIHR5cGUgVVNfUkVTUF9FWENIQU5HRV9HT0xEX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVTUF9FWENIQU5HRV9HT0xEX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBQQVJBTV9SRVNQX0VYQ0hBTkdFX0dPTERfVCBzdHJ1Y3Qge1xyXG4gVHlwZSAgICBpbnQgYGpzb246XCJ0eXBlXCJgXHJcbiBHb2xkICAgIGludCBganNvbjpcImdvbGRcImBcclxuIERpYW1vbmQgaW50IGBqc29uOlwiZGlhbW9uZFwiYFxyXG4gfVxyXG4qICovXHJcbmZ1bmN0aW9uIEV4Y2hhbmdlR29sZFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfRVhDSEFOR0VfR09MRF9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnR5cGUgPSBtc2cucGFyYW0udHlwZTtcclxuICAgICAgICB0aGlzLmdvbGQgPSBtc2cucGFyYW0uZ29sZDtcclxuICAgICAgICB0aGlzLmRpYW1vbmQgPSBtc2cucGFyYW0uZGlhbW9uZDtcclxuICAgICAgICB0aGlzLnRpcHMgPSBtc2cucGFyYW0udGlwcztcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEV4Y2hhbmdlR29sZFJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMzAuXHJcbiAqL1xyXG4vKlxyXG4gKiB0eXBlIFVTX1JFUV9GT1VORF9UQUJMRV9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVRX0ZPVU5EX1RBQkxFX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBQQVJBTV9SRVFfRk9VTkRfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gU3RhcnQgaW50IGBqc29uOlwic3RhcnRcImBcclxuIFRvdGFsIGludCBganNvbjpcInRvdGFsXCJgXHJcbiB9XHJcblxyXG4gKiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpXHJcblxyXG5mdW5jdGlvbiBGaW5kUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9GT1VORF9UQUJMRV9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJGaW5kUm9vbVJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIHN0YXJ0IDogbXNnLnN0YXJ0LFxyXG4gICAgICAgICAgICB0b3RhbCA6IG1zZy50b3RhbCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBGaW5kUmVxUGFja2V0O1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8zMC5cclxuICovXHJcbi8qXHJcbiogdHlwZSBVU19SRVNQX0ZPVU5EX1RBQkxFX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gTGlzdCBbXVBSSVZBVEVfVEFCTEVfREVUQUlMX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcbiB0eXBlIFBSSVZBVEVfVEFCTEVfREVUQUlMX1Qgc3RydWN0IHtcclxuIE93bmVyTmFtZSAgc3RyaW5nIGBqc29uOlwib3duZXJuYW1lXCJgXHJcbiBUYWJsZU5hbWUgIHN0cmluZyBganNvbjpcInRhYmxlbmFtZVwiYFxyXG4gSGVhZFVybCAgICBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBNaW5BbnRlICAgIGludCAgICBganNvbjpcIm1pbmFudGVcImBcclxuIFJlbWFpblRpbWUgaW50ICAgIGBqc29uOlwicmVtYWludGltZVwiYFxyXG4gR2FtZVR5cGUgICBpbnQgICAgYGpzb246XCJnYW1ldHlwZVwiYFxyXG4gR2FtZUlkICAgICBpbnQgICAgYGpzb246XCJnYW1laWRcImBcclxuIEdhbWVTdmNJZCAgaW50ICAgIGBqc29uOlwiZ2FtZXN2Y2lkXCJgXHJcbiBUYWJsZUlkICAgIGludCAgICBganNvbjpcInRhYmxlaWRcImBcclxuIH1cclxuXHJcbiAqICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG5mdW5jdGlvbiBGaW5kUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9GT1VORF9UQUJMRV9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvL3tcImNtZFwiOjE5NjYxOCxcInNlcVwiOjIsXCJ1aWRcIjoxMDAzOCxcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJwcml2YXRlaWRcIjoyNDc1MjIsXCJnYW1lc3ZjaWRcIjo1LFwidGFibGVpZFwiOjF9XHJcbiAgICAgICAgdGhpcy5saXN0ID0gbXNnLmxpc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBGaW5kUmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8yNi5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKVxyXG5cclxuZnVuY3Rpb24gRmluZFJvb21SZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0ZJTkRfVEFCTEVfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiRmluZFJvb21SZXFQYWNrZXQuc2VuZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBwcml2YXRlaWQgOiBtc2cucHJpdmF0ZWlkLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEZpbmRSb29tUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzI2LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmZ1bmN0aW9uIEZpbmRSb29tUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9GSU5EX1RBQkxFX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8ve1wiY21kXCI6MTk2NjE4LFwic2VxXCI6MixcInVpZFwiOjEwMDM4LFwiY29kZVwiOjAsXCJkZXNjXCI6XCLmiafooYzmiJDlip9cIixcInByaXZhdGVpZFwiOjI0NzUyMixcImdhbWVzdmNpZFwiOjUsXCJ0YWJsZWlkXCI6MX1cclxuICAgICAgICB0aGlzLnByaXZhdGVpZCA9IG1zZy5wcml2YXRlaWQ7XHJcbiAgICAgICAgdGhpcy5nYW1lc3ZjaWQgPSBtc2cuZ2FtZXN2Y2lkO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCA9IG1zZy50YWJsZWlkO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5wcml2YXRlaWQgPSB0aGlzLnByaXZhdGVpZDtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkID0gdGhpcy5nYW1lc3ZjaWQ7XHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnRhYmxlaWQgPSB0aGlzLnRhYmxlaWQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBGaW5kUm9vbVJlc3BQYWNrZXQ7IiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBUb2FzdFZpZXcgPSByZXF1aXJlKCdUb2FzdFZpZXcnKTtcclxudmFyIEdhbWJsaW5nSG91c2VDZWxsID0gcmVxdWlyZSgnR2FtYmxpbmdIb3VzZUNlbGwnKTtcclxudmFyIEFkdmVydEl0ZW0gPSByZXF1aXJlKCdBZHZlcnRJdGVtJyk7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFRhYmxlQ2VsbCAgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgU2Nyb2xsVmlldyA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgaW5pdE5vZGUgICA6IGNjLk5vZGUsXHJcbiAgICAgICAgU2hhcmVWaWV3ICA6IGNjLlByZWZhYixcclxuXHJcbiAgICAgICAgUGFnZTEgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFBhZ2UyICA6IGNjLlNwcml0ZSxcclxuICAgICAgICBQYWdlMyAgOiBjYy5TcHJpdGUsXHJcblxyXG4gICAgICAgIGFkdmVydEl0ZW0gOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgcGFnZVZpZXcgOiBjYy5QYWdlVmlldyxcclxuICAgICAgICBwYWdlVmlld0NvbnRlbnQgOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkZpbmRWaWV3Lk9uTG9hZDJcIik7XHJcblxyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5vblNlbmRSZXFGb3VuZFRhYmxlKDAsIDUwKTtcclxuXHJcbiAgICAgICAgLy9jYy5sb2cod2luZG93LlVTX1JFUV9CQU5ORVJfTElTVF9DTURfSUQpO1xyXG4gICAgICAgIC8vTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0JBTk5FUl9MSVNUX0NNRF9JRCkuc2VuZCgpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25TZW5kUmVxRm91bmRUYWJsZSA6IGZ1bmN0aW9uKG5TdGFydCwgblRvdGFsKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0IDogblN0YXJ0LFxyXG4gICAgICAgICAgICB0b3RhbCA6IG5Ub3RhbCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9GT1VORF9UQUJMRV9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2NlbmVNc2cgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuXHJcbiAgICAgICAgaWYgKG1zZy5wb3BWaWV3ID09IFwiR2FtYmxpbmdIb3VzZUNlbGxcIikge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID09IFwiZW50ZXJSb29tXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5idG4gPT0gXCJ3aW54aW5TaGFyZWRcIikge1xyXG5cclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIkZpbmRWaWV3Lm9uU2NlbmVNc2cgYnV0PVwiICsgbXNnLmJ0bik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNoYXJlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2hhcmVWaWV3KTtcclxuICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQoc2hhcmVWaWV3KTtcclxuICAgICAgICAgICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgICAgICAgICAgc2hhcmVWaWV3LnNldFBvc2l0aW9uKGNjLnAod2luU2l6ZS53aWR0aC8yLCB3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKipOZXR3b3JrKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiRmluZFZpZXcub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIC8vdGhpcy5fc3VwZXIoZXZlbnQpO1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIHZhciBjbWQgPSBtc2cuY21kO1xyXG5cclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfRk9VTkRfVEFCTEVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZvdW5kVGFibGVNc2cobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBVU19SRVNQX0JBTk5FUl9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25TaG9wTGlzdE1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgb25TaG9wTGlzdE1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICBcdGNjLmxvZyhcIm9uU2hvcExpc3RNc2cyXCIpO1xyXG5cclxuICAgIFx0LypcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9jYy5sb2cobXNnLmJhbm5lcmxpc3QpO1xyXG5cclxuICAgICAgICAgICAgLy90aGlzLnVwZGF0ZUJhbm5lckxpc3QobXNnLmJhbm5lcmxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAqL1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgYWRkQWR2ZXJ0SXRlbSA6IGZ1bmN0aW9uIChpbmZvLGluZGV4KSB7XHJcbiAgICAgICAgLy9qdW1wdXJsIHBpY1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIHZhciBhZHZlcnRJdGVtID0gY2MuaW5zdGFudGlhdGUodGhpcy5hZHZlcnRJdGVtKTtcclxuICAgICAgICB0aGlzLnBhZ2VWaWV3LmFkZFBhZ2UoYWR2ZXJ0SXRlbSk7XHJcbiAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgYWR2ZXJ0SXRlbS5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMiArIHdpblNpemUud2lkdGgqaW5kZXgsMCkpO1xyXG4gICAgICAgIGFkdmVydEl0ZW0uZ2V0Q29tcG9uZW50KCdBZHZlcnRJdGVtJykudXBkYXRlQWR2ZXJJdGVtKGluZm8pO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVCYW5uZXJMaXN0IDogZnVuY3Rpb24gKGJhbm5lcmxpc3QpIHtcclxuICAgICAgICB0aGlzLnBhZ2VWaWV3LnJlbW92ZUFsbFBhZ2VzKCk7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgYmFubmVybGlzdC5sZW5ndGg7aW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQWR2ZXJ0SXRlbShiYW5uZXJsaXN0W2luZGV4XSxpbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoaXMuZ2V0U3ByaXRlRnJhbWUyKFwiaHR0cDovL21hbmFnZS5hcWRkcC5jbi9nZXRwaWMucGhwP3VybD1odHRwOi8vbWFuYWdlLmFxZGRwLmNuL2ZpbGVzL2Jhbm5lcjEuanBnXCIpO1xyXG4gICAgfSxcclxuXHJcblxyXG5cclxuICAgIGdldFNwcml0ZUZyYW1lMjpmdW5jdGlvbiAodXJsLHN1Y2Nlc3NDYixmYWlsdXJlQ2IsdGFyZ2V0LG90aGVyU2VuZGVyKSB7XHJcbiAgICAgICAgLy91cmwgPSB0aGlzLmt5SGVscGVyICsgdXJsO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vY2MubG9nKHBhZ2UxKTtcclxuXHJcbiAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCB4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgIHZhciBpbWcgPSBCQVNFNjQuZGVjb2RlcihyZXNwb25zZSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgLy9jYy5sb2coXCJpbWc9XCIsIGltZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBuZXcgVWludDhBcnJheShyZXNwb25zZSwgMCwgcmVzcG9uc2UubGVuZ3RoKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IEJBU0U2NC5kZWNvZGVyKHJlc3BvbnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBjYy5UZXh0dXJlMkQoKTtcclxuICAgICAgICAgICAgICAgIHRleHR1cmUuaW5pdFdpdGhJbWFnZShpbWcpOyAvL2NjLlRleHR1cmUyRC5TUkNfQUxQSEEsIDEsIDEsIGNjLnNpemUoMTA4MCwgMzAwKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmhhbmRsZUxvYWRlZFRleHR1cmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3ZnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlBhZ2UxLnNwcml0ZUZyYW1lID0gbmV3ZnJhbWU7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIChzdWNjZXNzQ2IgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHN1Y2Nlc3NDYi5hcHBseSh0YXJnZXQsIFtuZXdmcmFtZSwgb3RoZXJTZW5kZXJdKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmKGZhaWx1cmVDYiAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgLy8ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGZhaWx1cmVDYi5hcHBseSh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgeGhyLnRpbWVvdXQgPSA1MDAwO1xyXG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHVybCx0cnVlKTtcclxuICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfSxcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIG9uRm91bmRUYWJsZU1zZyA6IGZ1bmN0aW9uKG1zZylcclxuICAgIHtcclxuICAgICAgICBpZihtc2cubGlzdC5sZW5ndGggPT09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaaguacquWPkeeOsOaIv+mXtFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuaW5pdE5vZGUgIT0gbnVsbCAmJiB0aGlzLmluaXROb2RlICE9IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5pbml0Tm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGhlaWdodCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwO2luZGV4IDwgbXNnLmxpc3QubGVuZ3RoIDtpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIFRhYmxlQ2VsbCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuVGFibGVDZWxsKTtcclxuICAgICAgICAgICAgdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuYWRkQ2hpbGQoVGFibGVDZWxsKTtcclxuICAgICAgICAgICAgaGVpZ2h0ID0gVGFibGVDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICBUYWJsZUNlbGwuc2V0UG9zaXRpb24oY2MucCgwLC1UYWJsZUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQvMiAtIFRhYmxlQ2VsbC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCppbmRleCkpO1xyXG4gICAgICAgICAgICBUYWJsZUNlbGwuZ2V0Q29tcG9uZW50KFwiR2FtYmxpbmdIb3VzZUNlbGxcIikudXBkYXRlUm9vbUluZm8obXNnLmxpc3RbaW5kZXhdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggaGVpZ2h0ICogKG1zZy5saXN0Lmxlbmd0aCArIDEpID4gdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0ID0gaGVpZ2h0ICogKG1zZy5saXN0Lmxlbmd0aCArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tTY3JvbGxWaWV3OiBmdW5jdGlvbiAoc2Nyb2xsdmlldywgZXZlbnRUeXBlLCBjdXN0b21FdmVudERhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwiRmluZFZpZXcgLFwiICsgZXZlbnRUeXBlICsgXCIsXCIgKyBjdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIGlmIChldmVudFR5cGUgPT09IGNjLlNjcm9sbFZpZXcuRXZlbnRUeXBlLlNDUk9MTF9UT19UT1ApXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihldmVudFR5cGUgPT09IGNjLlNjcm9sbFZpZXcuRXZlbnRUeXBlLlNDUk9MTF9UT19CT1RUT00pXHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8yNi5cclxuICovXHJcblxyXG52YXIgU29ja2V0TWFuYWdlciA9IHJlcXVpcmUoJ1NvY2tldE1hbmFnZXInKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcblxyXG5mdW5jdGlvbiAgR2xvdWRWb2ljZSgpXHJcbntcclxuXHJcbn1cclxuXHJcbkdsb3VkVm9pY2UucHJvdG90eXBlLm9uU3RhcnRSZWNvcmQgPSBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcclxuICAgIGNjLmxvZyhcIkdsb3VkVm9pY2UucHJvdG90eXBlLm9uU3RhcnRSZWNvcmQscHJvZ3Jlc3MgPSBcIiArIHByb2dyZXNzKTtcclxuICAgIC8v5pi+56S65byA5aeL5b2V6Z+zXHJcbiAgICAvL1NvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5zdGFydFNvY2tldCgpO1xyXG59XHJcblxyXG5HbG91ZFZvaWNlLnByb3RvdHlwZS5vblN0b3BSZWNvcmRpbmcgPSBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcclxuICAgIGNjLmxvZyhcIkdsb3VkVm9pY2UucHJvdG90eXBlLm9uU3RvcFJlY29yZGluZyxwcm9ncmVzcyA9IFwiICsgcHJvZ3Jlc3MpO1xyXG4gICAgLy/lgZzmraLlvZXpn7NcclxuICAgIC8vU29ja2V0TWFuYWdlci5nZXRJbnN0YW5jZSgpLnN0YXJ0U29ja2V0KCk7XHJcblxyXG59XHJcblxyXG5HbG91ZFZvaWNlLnByb3RvdHlwZS5PblVwbG9hZEZpbGUgPSBmdW5jdGlvbiAoY29kZSwgZmlsZVBhdGgsIGZpbGVJRCkge1xyXG4gICAgY2MubG9nKFwiR2xvdWRWb2ljZS5wcm90b3R5cGUuT25VcGxvYWRGaWxlLGNvZGUgPSBcIiArIGNvZGUpO1xyXG4gICAgY2MubG9nKFwiR2xvdWRWb2ljZS5wcm90b3R5cGUuT25VcGxvYWRGaWxlLGZpbGVQYXRoID0gXCIgKyBmaWxlUGF0aCk7XHJcbiAgICBjYy5sb2coXCJHbG91ZFZvaWNlLnByb3RvdHlwZS5PblVwbG9hZEZpbGUsZmlsZUlEID0gXCIgKyBmaWxlSUQpO1xyXG4gICAgaWYgKGNvZGUgPT0gMTEpIHtcclxuICAgICAgICAvL+S4iuS8oOacjeWKoeWZqOi9rOWPkVxyXG5cclxuXHJcbiAgICAgICAgLy92YXIgZmlsZVBhdGggPSBmaWxlUGF0aCArIFwiQFwiICsgMS4wO1xyXG4gICAgICAgIHZhciB2b2ljZURhdGEgPSB7XHJcbiAgICAgICAgICAgIGZpbGVQYXRoIDogZmlsZVBhdGgsXHJcbiAgICAgICAgICAgIGZpbGVJRCA6IGZpbGVJRCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vTmV0LnNlbmRBdWRpbyhUYWJsZS5nZXRJbnN0YW5jZSgpLnJvb21faWQsIGZpbGVJZCwgZmlsZVBhdGgpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0b3VpZCA6IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQsXHJcbiAgICAgICAgICAgIGtpbmQgOiBDaGF0VHlwZS5FX0NIQVRfVk9JQ0VfS0lORCxcclxuICAgICAgICAgICAgdHlwZSA6IDAsXHJcbiAgICAgICAgICAgIHRleHQgOiBCQVNFNjQuZW5jb2RlcihKU09OLnN0cmluZ2lmeSh2b2ljZURhdGEpKSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoVVNfUkVRX0dBTUVfQ0hBVF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/mmL7npLrkuIrkvKDpgJrnn6VcclxufVxyXG5cclxuR2xvdWRWb2ljZS5wcm90b3R5cGUuT25Eb3dubG9hZEZpbGUgPSBmdW5jdGlvbiAoY29kZSwgZmlsZVBhdGgsIGZpbGVJRCkge1xyXG4gICAgY2MubG9nKFwiR2xvdWRWb2ljZS5wcm90b3R5cGUuT25Eb3dubG9hZEZpbGUsY29kZSA9IFwiICsgY29kZSk7XHJcbiAgICBjYy5sb2coXCJHbG91ZFZvaWNlLnByb3RvdHlwZS5PbkRvd25sb2FkRmlsZSxmaWxlUGF0aCA9IFwiICsgZmlsZVBhdGgpO1xyXG4gICAgY2MubG9nKFwiR2xvdWRWb2ljZS5wcm90b3R5cGUuT25Eb3dubG9hZEZpbGUsZmlsZUlEID0gXCIgKyBmaWxlSUQpO1xyXG4gICAgaWYgKGNvZGUgPT0gMTMgfHwgY29kZSA9PSAxMSkge1xyXG5cclxuICAgIH1lbHNle1xyXG4gICAgICAgIC8v5Y+W5raI5pKt5pS+O1xyXG4gICAgICAgIC8v5Y+W5raI5aOw6Z+z5pKt5pS+55WM6Z2iXHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHBvcFZpZXcgOiBcIkdsb3VkVm9pY2VcIixcclxuICAgICAgICAgICAgYnRuIDogXCJPblBsYXlSZWNvcmRlZEZpbGVcIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuR2xvdWRWb2ljZS5wcm90b3R5cGUuT25QbGF5UmVjb3JkZWRGaWxlID0gZnVuY3Rpb24gKGNvZGUsIGZpbGVQYXRoKSB7XHJcbiAgICBjYy5sb2coXCJHbG91ZFZvaWNlLnByb3RvdHlwZS5PblBsYXlSZWNvcmRlZEZpbGUsY29kZSA9IFwiICsgY29kZSk7XHJcbiAgICBjYy5sb2coXCJHbG91ZFZvaWNlLnByb3RvdHlwZS5PblBsYXlSZWNvcmRlZEZpbGUsZmlsZVBhdGggPSBcIiArIGZpbGVQYXRoKTtcclxuICAgIGlmIChjb2RlID09IDE4KSB7XHJcbiAgICAgICAgLy/lj5bmtojlo7Dpn7Pmkq3mlL7nlYzpnaJcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgcG9wVmlldyA6IFwiR2xvdWRWb2ljZVwiLFxyXG4gICAgICAgICAgICBidG4gOiBcIk9uUGxheVJlY29yZGVkRmlsZVwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRyxkYXRhOm1lc3NhZ2V9KSA7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIC8v5Y+W5raI5aOw6Z+z5pKt5pS+55WM6Z2iXHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHBvcFZpZXcgOiBcIkdsb3VkVm9pY2VcIixcclxuICAgICAgICAgICAgYnRuIDogXCJPblBsYXlSZWNvcmRlZEZpbGVcIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbnZhciBHVm9pY2VKc2IgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbnN0YW5jZSA7XHJcblxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZSgpe1xyXG4gICAgICAgIGlmKCBpbnN0YW5jZSA9PT0gdW5kZWZpbmVkICl7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEdsb3VkVm9pY2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlIDogZ2V0SW5zdGFuY2UsXHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdWb2ljZUpzYjsiLCJ2YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBBbGVydFZpZXcgPSByZXF1aXJlKCdBbGVydFZpZXcnKTtcclxudmFyIExvYWRpbmdWaWV3ID0gcmVxdWlyZSgnTG9hZGluZ1ZpZXcnKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBIZWFkIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFJvb21OYW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUHJpdmF0ZUNvZGU6IGNjLkxhYmVsLFxyXG4gICAgICAgIENyZWF0b3JOYW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgTWluQmV0IDogY2MuTGFiZWwsXHJcbiAgICAgICAgdGltZUxhYmVsIDogY2MuTGFiZWwsXHJcbiAgICAgICAgYmFua2VyTW9kZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJGbGFnIDogY2MuU3ByaXRlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdEJhc2VEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRCYXNlRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJvb21JbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy9cImxpc3RcIjpbXHJcbiAgICAvLyB7XCJvd25lcm5hbWVcIjpcIua4uOWuojEwNjg4XCIsXCJ0YWJsZW5hbWVcIjpcIua4uOWuojEwNjg4XCIsXCJoZWFkdXJsXCI6XCJcIixcclxuICAgIC8vIFwibWluYW50ZVwiOjEsXCJyZW1haW50aW1lXCI6MTgwMCxcImdhbWV0eXBlXCI6MSxcImdhbWVpZFwiOjEwMSxcImdhbWVzdmNpZFwiOjUsXCJ0YWJsZWlkXCI6MH0sXHJcbiAgICAvLyB7XCJvd25lcm5hbWVcIjpcIua4uOWuojEwNjg4XCIsXCJ0YWJsZW5hbWVcIjpcIua4uOWuojEwNjg4XCIsXCJoZWFkdXJsXCI6XCJcIixcIm1pbmFudGVcIjoxLFwicmVtYWludGltZVwiOjE4MDAsXHJcbiAgICAvLyBcImdhbWV0eXBlXCI6MSxcImdhbWVpZFwiOjEwMSxcImdhbWVzdmNpZFwiOjUsXCJ0YWJsZWlkXCI6MH1dfVxyXG5cclxuICAgIC8vY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIHVwZGF0ZVRpbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpbWUtLTtcclxuICAgICAgICB0aGlzLnRpbWVMYWJlbC5zdHJpbmcgPSBVdGlsVG9vbC5nZXRUaW1lKHRoaXMudGltZSk7XHJcbiAgICAgICAgaWYodGhpcy50aW1lIDwgMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZUxhYmVsLnN0cmluZyA9IFwi5bey57uT5p2fXCI7XHJcbiAgICAgICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc3RyTGVuZ3RoOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgdmFyIGwgPSBzdHIubGVuZ3RoO1xyXG4gICAgICAgIHZhciBibGVuID0gMDtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTxsOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKChzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmYwMCkgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYmxlbiArKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBibGVuICsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmxlbjtcclxuICAgIH0sXHJcblxyXG4gICAgc3ViTmFtZSA6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuc3RyTGVuZ3RoKG5hbWUpO1xyXG4gICAgICAgIGlmIChsZW4gPiA4KSB7XHJcbiAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsOCk7XHJcbiAgICAgICAgICAgbmFtZSArPSBcIi4uXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVSb29tSW5mbyA6IGZ1bmN0aW9uIChjZWxsTXNnKSB7XHJcbiAgICAgICAgdGhpcy5yb29tSW5mbyA9IGNlbGxNc2c7XHJcblxyXG4gICAgICAgIGNjLmxvZyhcIkdhbWJsaW5nSG91c2VDZWxsLnVwZGF0ZVJvb21JbmZvLGNlbGxNc2cgPSBcIiArIGNlbGxNc2cpO1xyXG4gICAgICAgIHRoaXMuUm9vbU5hbWUuc3RyaW5nICAgID0gdGhpcy5zdWJOYW1lKGNlbGxNc2cudGFibGVuYW1lKTtcclxuICAgICAgICBjYy5sb2coXCJHYW1ibGluZ0hvdXNlQ2VsbC51cGRhdGVSb29tSW5mbyBuYW1lPVwiLCB0aGlzLnN1Yk5hbWUoY2VsbE1zZy50YWJsZW5hbWUpKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuQ3JlYXRvck5hbWUuc3RyaW5nID0gY2VsbE1zZy5vd25lcm5hbWU7XHJcbiAgICAgICAgdGhpcy5Qcml2YXRlQ29kZS5zdHJpbmcgPSBjZWxsTXNnLnByaXZhdGVpZDtcclxuICAgICAgICB0aGlzLk1pbkJldC5zdHJpbmcgICAgICA9IGNlbGxNc2cubWluYW50ZTtcclxuICAgICAgICB0aGlzLnRpbWUgICAgICAgICAgICAgICA9IGNlbGxNc2cucmVtYWludGltZTtcclxuICAgICAgICB0aGlzLnRpbWVMYWJlbC5zdHJpbmcgICA9IFV0aWxUb29sLmdldFRpbWUoY2VsbE1zZy5yZW1haW50aW1lKTtcclxuXHJcbiAgICAgICAgaWYgKGNlbGxNc2cuc3RhcnR0aW1lID4gMCApIHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLnVwZGF0ZVRpbWUsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLk1pbkJldC5zdHJpbmcgPSBjZWxsTXNnLm1pbmFudGU7XHJcbiAgICAgICAgdGhpcy50aW1lID0gY2VsbE1zZy5yZW1haW50aW1lO1xyXG4gICAgICAgIHRoaXMudGltZUxhYmVsLnN0cmluZyA9IFV0aWxUb29sLmdldFRpbWUoY2VsbE1zZy5yZW1haW50aW1lKTtcclxuICAgICAgICBVcGRhdGVXWEhlYWRJY29uKGNlbGxNc2cuaGVhZHVybCx0aGlzLkhlYWQpO1xyXG5cclxuICAgICAgICBpZihjZWxsTXNnLmdhbWV0eXBlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmJhbmtlck1vZGUuc3RyaW5nID0gXCLpl63niYzmiqLluoRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5iYW5rZXJNb2RlLnN0cmluZyA9IFwi5LiJ5byg5oqi5bqEXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoTnVtYmVyKGNlbGxNc2cuY2x1YmlkKSA+IDAgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuQ2x1YkZsYWcubm9kZS5hY3RpdmUgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5DbHViRmxhZy5ub2RlLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiR2FtYmxpbmdIb3VzZUNlbGwuY2FsbGJhY2tCdG4sQ3VzdG9tRXZlbnREYXRhID0gXCIgKyBDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIHZhciBidG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBjYy5sb2coXCJHYW1ibGluZ0hvdXNlQ2VsbC5jYWxsYmFja0J0bixidG5OYW1lID0gXCIgKyBidG5OYW1lKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmIChidG5OYW1lID09IFwiR2FtYmxpbmdIb3VzZUNlbGxcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8ve1wib3duZXJuYW1lXCI6XCLmuLjlrqIxMDY4OFwiLFwidGFibGVuYW1lXCI6XCLmuLjlrqIxMDY4OFwiLFwiaGVhZHVybFwiOlwiXCIsXCJtaW5hbnRlXCI6MSxcInJlbWFpbnRpbWVcIjoxNDQsXHJcbiAgICAgICAgICAgIC8vIFwiZ2FtZXR5cGVcIjoxLFwiZ2FtZWlkXCI6MTAxLFwiZ2FtZXN2Y2lkXCI6NSxcInRhYmxlaWRcIjowfV1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWUgPCAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIua4uOaIj+W3sue7k+adn1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBhbGVydEV4aXQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhbGVydEV4aXQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZW50ZXJSb29tKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0RXhpdC5zaG93T25lKFwi5piv5ZCm6L+b5YWl5ri45oiP77yfXCIsIEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tHYW1lTW9kZSA6IGZ1bmN0aW9uIChldmVudCwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiR2FtYmxpbmdIb3VzZUNlbGwuY2FsbEJhY2tHYW1lTW9kZSwgYnRuTmFtZSA9IFwiICsgZXZlbnQudGFyZ2V0LmdldE5hbWUoKSk7XHJcbiAgICAgICAgY2MubG9nKFwiR2FtYmxpbmdIb3VzZUNlbGwuY2FsbEJhY2tHYW1lTW9kZSwgQ3VzdG9tRXZlbnREYXRhID0gXCIgKyBDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIGlmIChOdW1iZXIoQ3VzdG9tRXZlbnREYXRhKSA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgcG9wVmlldzogXCJHYW1ibGluZ0hvdXNlQ2VsbFwiLFxyXG4gICAgICAgICAgICAgICAgYnRuOiBcIndpbnhpblNoYXJlZFwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSwgeyB0YWc6IHdpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csIGRhdGE6IG1lc3NhZ2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBlbnRlclJvb20gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgIHBvcFZpZXc6IFwiR2FtYmxpbmdIb3VzZUNlbGxcIixcclxuICAgICAgICAgICAgYnRuOiBcImVudGVyUm9vbVwiXHJcbiAgICAgICAgfTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsIHsgdGFnOiB3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOiBtZXNzYWdlIH0pO1xyXG5cclxuICAgICAgICBMb2FkaW5nVmlldy5zaG93KFwi5q2j5Zyo6L+b5YWlLi4uXCIpO1xyXG5cclxuICAgICAgICB2YXIgZmluZFJvb21SZXEgPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfRklORF9UQUJMRV9DTURfSUQpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBwcml2YXRlaWQgOiB0aGlzLnJvb21JbmZvLnByaXZhdGVpZCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZmluZFJvb21SZXEpIHtcclxuICAgICAgICAgICAgZmluZFJvb21SZXEuc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvNy5cclxuICovXHJcbi8v6L+Z5Liq6I635Y+W55qE5pWw5o2uIOmDvei9rOWPkeWHuuWOu1xyXG5cclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcblxyXG5mdW5jdGlvbiBKU0NhbGxPQygpIHtcclxuXHJcbn1cclxuXHJcbi8v5qOA5p+l5piv5ZCm5Y+v55SoXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5jaGVja0lzQWJsZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgdmFyIHN0YXRlID0gKFxyXG4gICAgICAgIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLklQSE9ORSkgfHxcclxuICAgICAgICAoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5JUEFEKSB8fFxyXG4gICAgICAgIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLk1PQklMRV9CUk9XU0VSKSB8fFxyXG4gICAgICAgIChjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkRFU0tUT1BfQlJPV1NFUilcclxuICAgIClcclxuICAgIHJldHVybiBzdGF0ZTtcclxufVxyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLmNoZWNrQW5kcm9pZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkFORFJPSUQ7XHJcbn1cclxuXHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0RGV2aWNlTmFtZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwiZ2V0RGV2aWNlTmFtZVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXREZXZpY2VOYW1lOiVzXCIsbmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIG5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuY2hlY2tBbmRyb2lkKCkpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwid2ViXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwid2ViXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0QXBwVmVyc2lvbkNvZGUgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmIChjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcHBWZXJzaW9uID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRBcHBWZXJzaW9uQ29kZVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXRBcHBWZXJzaW9uQ29kZTolc1wiLGFwcFZlcnNpb24pO1xyXG4gICAgICAgIHJldHVybiBOdW1iZXIoYXBwVmVyc2lvbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuY2hlY2tBbmRyb2lkKCkpXHJcbiAgICB7XHJcbiAgICAgICAgLy8gdmFyIGFwcFZlcnNpb24gPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFwiY29tL2JpZ2JlYXJnYW1lL3N6bnkvSm5pSGVscGVyXCIsIFwiZ2V0QXBwVmVyc2lvbkNvZGVcIiwgXCIoKUlcIik7XHJcbiAgICAgICAgLy8gcmV0dXJuIGFwcFZlcnNpb247XHJcbiAgICAgICAgcmV0dXJuIDEwMTU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiAxMDE1O1xyXG4gICAgfVxyXG59O1xyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLmdldEFwcFZlcnNpb24gPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiB0aGlzLmNoZWNrSXNBYmxlKCkpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGFwcFZlcnNpb24gPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcImdldEFwcFZlcnNpb25cIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2MubG9nKFwiZ2V0QXBwVmVyc2lvbjolc1wiLGFwcFZlcnNpb24pO1xyXG4gICAgICAgIHJldHVybiBhcHBWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLmNoZWNrQW5kcm9pZCgpKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHZhciBhcHBWZXJzaW9uID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcImNvbS9iaWdiZWFyZ2FtZS9zem55L0puaUhlbHBlclwiLCBcImdldEFwcFZlcnNpb25OYW1lXCIsIFwiKClMamF2YS9sYW5nL1N0cmluZztcIik7XHJcbiAgICAgICAgLy8gcmV0dXJuIGFwcFZlcnNpb247XHJcbiAgICAgICAgcmV0dXJuIFwiMS4wLjE1XCI7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwiMS4wLjE1XCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0T1NWZXJzaW9uID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBPU1ZlcnNpb24gPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcImdldE9TVmVyc2lvblwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXRPU1ZlcnNpb246JXNcIixPU1ZlcnNpb24pO1xyXG4gICAgICAgIHJldHVybiBPU1ZlcnNpb247XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuY2hlY2tBbmRyb2lkKCkpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwid2ViMS4wXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwid2ViMS4wXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0QWRhcHRlclR5cGUgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiB0aGlzLmNoZWNrSXNBYmxlKCkpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGFkYXB0ZXJUeXBlID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRBZGFwdGVyVHlwZVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXRBZGFwdGVyVHlwZTolZFwiLGFkYXB0ZXJUeXBlKTtcclxuICAgICAgICByZXR1cm4gYWRhcHRlclR5cGU7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIDU7XHJcbiAgICB9XHJcblxyXG59O1xyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLmdldElPU1ZlbmRvciA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgSU9TVmVuZG9yID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRJT1NWZW5kb3JcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2MubG9nKFwiZ2V0SU9TVmVuZG9yOiVzXCIsSU9TVmVuZG9yKTtcclxuICAgICAgICByZXR1cm4gSU9TVmVuZG9yO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuVGVzdEFjY291bnQ7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0SU9TQWR2ZXJ0aXNpbmcgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiAoKGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuSVBIT05FKSB8fCAoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5JUEFEKSkpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIElPU0FkdmVydGlzaW5nID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRJT1NBZHZlcnRpc2luZ1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXRJT1NBZHZlcnRpc2luZzolc1wiLElPU0FkdmVydGlzaW5nKTtcclxuICAgICAgICByZXR1cm4gSU9TQWR2ZXJ0aXNpbmc7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5UZXN0QWNjb3VudDtcclxuICAgIH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5nZXRJT1NNYWNBZGRyZXNzID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBJT1NNYWNBZGRyZXNzID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRJT1NNYWNBZGRyZXNzXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNjLmxvZyhcImdldElPU01hY0FkZHJlc3M6JXNcIixJT1NNYWNBZGRyZXNzKTtcclxuICAgICAgICByZXR1cm4gSU9TTWFjQWRkcmVzcztcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LlRlc3RBY2NvdW50O1xyXG4gICAgfVxyXG59O1xyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLmdldElPU09wZW5VZGlkID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBJT1NPcGVuVWRpZCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwiZ2V0SU9TT3BlblVkaWRcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2MubG9nKFwiZ2V0SU9TT3BlblVkaWQ6JXNcIixJT1NPcGVuVWRpZCk7XHJcbiAgICAgICAgcmV0dXJuIElPU09wZW5VZGlkO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuVGVzdEFjY291bnQ7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZ2V0VVVJRCA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgVVVJRCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwiZ2V0VVVJRFwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJnZXRVVUlEOiVzXCIsVVVJRCk7XHJcbiAgICAgICAgcmV0dXJuIFVVSUQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMuY2hlY2tBbmRyb2lkKCkpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwiMTExMTExMTFcIjtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LlRlc3RBY2NvdW50O1xyXG4gICAgfVxyXG59O1xyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLmdldEFwcE5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcHBOYW1lID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJnZXRBcHBOYW1lXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNjLmxvZyhcImdldEFwcE5hbWU6JXNcIixhcHBOYW1lKTtcclxuICAgICAgICByZXR1cm4gYXBwTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5jaGVja0FuZHJvaWQoKSlcclxuICAgIHtcclxuXHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIFwi54mb5Y+L5ZyIXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuLy/lhYXlgLznm7jlhbNcclxuSlNDYWxsT0MucHJvdG90eXBlLnBvc3RQYXlTdWNlc3MgPSBmdW5jdGlvbigpXHJcbntcclxuICAgIGNjLmxvZyhcIkpTQ2FsbE9DIHNlbmQgdXBkYXRlIG1vbmV5XCIpO1xyXG4gICAgdmFyIG1zZyA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZUNvbW1vbk1lc3NhZ2Uod2luZG93LlVQREFURV9QTEFZRVJfTU9ORVkpO1xyXG4gICAgaWYobXNnKXtcclxuICAgICAgICBtc2cuc2VuZCgxKTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG4vL+aJk+W8gOaUr+S7mOWunVxyXG4vL2FwaWx5SWTot7PovaznlKjnmoTllK/kuIBJRFxyXG5KU0NhbGxPQy5wcm90b3R5cGUuc2VuZFBheUJ5U2luZ2xlQWxpcGF5ID0gZnVuY3Rpb24ocGF5RGF0YSxhcGlseUlkKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwic2VuZFBheUJ5U2luZ2xlQWxpcGF5OmFwaWx5SWQ6XCIsXHJcbiAgICAgICAgICAgIHBheURhdGEsXHJcbiAgICAgICAgICAgIGFwaWx5SWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy/miZPlvIDnvZHpobVcclxuSlNDYWxsT0MucHJvdG90eXBlLnNlbmRQYXlCeVdlYlZpZXcgPSBmdW5jdGlvbihwYXlVcmwscGF5RGF0YSxzaG93V2ViKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwic2VuZFBheUJ5V2ViVmlldzpwYXlEYXRhOnNob3dXZWI6XCIsXHJcbiAgICAgICAgICAgIHBheVVybCxcclxuICAgICAgICAgICAgcGF5RGF0YSxcclxuICAgICAgICAgICAgc2hvd1dlYlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vL+WGhei0reWFheWAvFxyXG5KU0NhbGxPQy5wcm90b3R5cGUuc2VuZElvc1BheSA9IGZ1bmN0aW9uKG9yZGVySWRlbnRpZmllcixjcmVhdE9yZGVyVXJsLG1pZCxwcm9kdWN0aWQsbXRrZXksdmVyc2lvbnMsZ2lkLHNpZCxtb25leSlcclxue1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcInBheUlvc1Byb2R1Y3Q6Y3JlYXRPcmRlclVybDptaWQ6cHJvZHVjdGlkOm10a2V5OnZlcnNpb25zOmdpZDpzaWQ6bW9uZXk6XCIsXHJcbiAgICAgICAgICAgIG9yZGVySWRlbnRpZmllcixcclxuICAgICAgICAgICAgY3JlYXRPcmRlclVybCxcclxuICAgICAgICAgICAgbWlkLFxyXG4gICAgICAgICAgICBwcm9kdWN0aWQsXHJcbiAgICAgICAgICAgIG10a2V5LFxyXG4gICAgICAgICAgICB2ZXJzaW9ucyxcclxuICAgICAgICAgICAgZ2lkLFxyXG4gICAgICAgICAgICBzaWQsXHJcbiAgICAgICAgICAgIG1vbmV5XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8v6LCD55So5YaF5bWM572R6aG1XHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5vcGVuVVJMSW5HYW1lID0gZnVuY3Rpb24odXJsU3RyKVxyXG57XHJcbiAgICBjYy5sb2coXCJKU0NhbGxPQy5wcm90b3R5cGUub3BlblVSTEluR2FtZSx1cmxTdHIgPSBcIiArIHVybFN0cik7XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwib3BlblVSTEluR2FtZTpcIixcclxuICAgICAgICAgICAgdXJsU3RyXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8v6LCD55So5YaF5bWM572R6aG1XHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5jdXJyZW50UG93ZXJQZXJjZW50ID0gZnVuY3Rpb24odXJsU3RyKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwiTG9jYWxJbmZvXCIsXHJcbiAgICAgICAgICAgIFwiY3VycmVudFBvd2VyUGVyY2VudFwiXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5Qb2xsID0gZnVuY3Rpb24oKVxyXG57XHJcblx0aWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKXtcclxuXHRcdFNvY2lhbFV0aWxzLlBvbGwoKTtcclxuXHR9ZWxzZXtcclxuXHRcdGlmKGNjLnN5cy5pc05hdGl2ZSAmJiB0aGlzLmNoZWNrSXNBYmxlKCkpXHJcblx0XHR7XHJcblx0XHRcdGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcblx0XHRcdFx0XCJMb2NhbEluZm9cIixcclxuXHRcdFx0XHRcIlBvbGxcIlxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5TZXRBcHBJbmZvID0gZnVuY3Rpb24ob3BlbklkKVxyXG57XHJcbiAgICBjYy5sb2coXCJKU0NhbGxPQy5wcm90b3R5cGUuU2V0QXBwSW5mbyxtc1RpbWUgPSAlc1wiLG9wZW5JZCk7XHJcblx0aWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKXtcclxuXHRcdFNvY2lhbFV0aWxzLlNldEFwcEluZm8ob3BlbklkKTtcclxuXHR9ZWxzZSB7XHJcblx0XHRpZiAoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSkge1xyXG5cdFx0XHRqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG5cdFx0XHRcdFwiTG9jYWxJbmZvXCIsXHJcblx0XHRcdFx0XCJTZXRBcHBJbmZvOlwiLFxyXG5cdFx0XHRcdG9wZW5JZFxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5TdGFydFJlY29yZCA9IGZ1bmN0aW9uKG1zVGltZSlcclxue1xyXG4gICAgY2MubG9nKFwiSlNDYWxsT0MucHJvdG90eXBlLlN0YXJ0UmVjb3JkLG1zVGltZSA9ICVkXCIsbXNUaW1lKTtcclxuXHRpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkFORFJPSUQpe1xyXG5cdFx0U29jaWFsVXRpbHMuU3RhcnRSZWNvcmQobXNUaW1lKTtcclxuXHR9ZWxzZXtcclxuXHRcdGlmKGNjLnN5cy5pc05hdGl2ZSAmJiB0aGlzLmNoZWNrSXNBYmxlKCkpXHJcblx0XHR7XHJcblx0XHRcdGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcblx0XHRcdFx0XCJMb2NhbEluZm9cIixcclxuXHRcdFx0XHRcIlN0YXJ0UmVjb3JkOlwiLFxyXG5cdFx0XHRcdG1zVGltZVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5TdG9wUmVjb3JkaW5nID0gZnVuY3Rpb24oKVxyXG57XHJcblx0aWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKXtcclxuXHRcdFNvY2lhbFV0aWxzLlN0b3BSZWNvcmRpbmcoKTtcclxuXHR9ZWxzZSB7XHJcblx0XHRpZiAoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSkge1xyXG5cdFx0XHRqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG5cdFx0XHRcdFwiTG9jYWxJbmZvXCIsXHJcblx0XHRcdFx0XCJTdG9wUmVjb3JkaW5nXCJcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLkRvd25sb2FkUmVjb3JkZWRGaWxlID0gZnVuY3Rpb24oZmlsZUlELGRvd25sb2FkRmlsZVBhdGgpXHJcbntcclxuXHRpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkFORFJPSUQpIHtcclxuXHRcdFNvY2lhbFV0aWxzLkRvd25sb2FkUmVjb3JkZWRGaWxlKGZpbGVJRCwgZG93bmxvYWRGaWxlUGF0aCk7XHJcblx0fWVsc2V7XHJcblx0XHRpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG5cdFx0e1xyXG5cdFx0XHRqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG5cdFx0XHRcdFwiTG9jYWxJbmZvXCIsXHJcblx0XHRcdFx0XCJEb3dubG9hZFJlY29yZGVkRmlsZTpkb3dubG9hZEZpbGVQYXRoOlwiLFxyXG5cdFx0XHRcdGZpbGVJRCxcclxuXHRcdFx0XHRkb3dubG9hZEZpbGVQYXRoXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuSlNDYWxsT0MucHJvdG90eXBlLlBsYXlSZWNvcmRlZEZpbGUgPSBmdW5jdGlvbihkb3dubG9hZEZpbGVQYXRoKVxyXG57XHJcblx0aWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKSB7XHJcblx0XHRTb2NpYWxVdGlscy5QbGF5UmVjb3JkZWRGaWxlKGRvd25sb2FkRmlsZVBhdGgpO1xyXG5cdH1lbHNlIHtcclxuXHRcdGlmIChjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKSB7XHJcblx0XHRcdGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcblx0XHRcdFx0XCJMb2NhbEluZm9cIixcclxuXHRcdFx0XHRcIlBsYXlSZWNvcmRlZEZpbGU6XCIsXHJcblx0XHRcdFx0ZG93bmxvYWRGaWxlUGF0aFxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5zY3JlZW5TaG90QWN0aW9uID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICBpZihjYy5zeXMuaXNOYXRpdmUgJiYgdGhpcy5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBwYXRoID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJzY3JlZW5TaG90QWN0aW9uXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNjLmxvZyhcInNjcmVlblNob3RBY3Rpb246JXNcIixwYXRoKTtcclxuICAgICAgICByZXR1cm4gcGF0aDtcclxuICAgIH1cclxufTtcclxuSlNDYWxsT0MucHJvdG90eXBlLnBheUFwcHN0b3JlID0gZnVuY3Rpb24oZ29vZGlkLG9wZW5pZClcclxue1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIHRoaXMuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgcGF0aCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcbiAgICAgICAgICAgIFwicGF5bWVudE1DUFBcIixcclxuICAgICAgICAgICAgXCJqdW1wVG9BcHBzdG9yZVBheTpvcGVuaWQ6XCIsXHJcbiAgICAgICAgICAgIGdvb2RpZCxcclxuICAgICAgICAgICAgb3BlbmlkXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJzY3JlZW5TaG90QWN0aW9uOiVzXCIscGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuZXhpdEFwcCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBjYy5kaXJlY3Rvci5lbmQoKTtcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiB0aGlzLmNoZWNrSXNBYmxlKCkpXHJcbiAgICB7XHJcbiAgICAgICAganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJleGl0QXBwXCJcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLmNoZWNrQW5kcm9pZCgpKVxyXG4gICAge1xyXG5cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuXHJcbiAgICB9XHJcbn07XHJcblxyXG5KU0NhbGxPQy5wcm90b3R5cGUuc2hvd0xvYWRpbmdWaWV3ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgTG9hZGluZ1ZpZXcuc2hvdyhzdHIpO1xyXG5cclxufTtcclxuXHJcbkpTQ2FsbE9DLnByb3RvdHlwZS5kaXNtaXNzTG9hZGluZ1ZpZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBMb2FkaW5nVmlldy5kaXNtaXNzKCk7XHJcblxyXG59O1xyXG5cclxudmFyIEdhbWVDYWxsT0MgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbnN0YW5jZSA7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKXtcclxuICAgICAgICBpZiggaW5zdGFuY2UgPT09IHVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBKU0NhbGxPQygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZSA6IGdldEluc3RhbmNlLFxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lQ2FsbE9DO1xyXG4iLCIvKipcclxuICog5YWo5bGA546v5aKD6K6+572uXHJcbiAqIEF1dGhvciAgICAgIDogZG9uZ2dhbmdcclxuICogQ3JlYXRlIFRpbWUgOiAyMDE2LjcuMjZcclxuICovXHJcbi8qKiDlpJbnvZHmtYvor5XmnI0gKi9cclxudmFyIGRlYnVnX2V4dHJhbmV0ID0ge1xyXG4gICAgZ2F0ZVNvY2tldElwICAgIDogXCIxOTIuMTY4LjEuMVwiLCAgICAgICAgICAgICAgICAgICAgLy8g572R5YWz5Zyw5Z2AXHJcbiAgICBnYXRlU29ja2V0UG9ydCAgOiAzMTAxLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g572R5YWz56uv5Y+jXHJcblxyXG4gICAgdXNlU1NMICAgICAgICAgIDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaYr+WQpuS9v+eUqGh0dHBzXHJcbiAgICB0ZXh0VXBkYXRlICAgICAgOiB0cnVlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5piv5ZCm5byA5ZCv5rWL6K+V54Ot5pu05pawXHJcbn07IFxyXG5cclxud2luZG93LmdhbWUgPSB3aW5kb3cuZ2FtZSB8fCB7fTtcclxuZ2FtZS5jb25maWcgPSBtb2R1bGUuZXhwb3J0cyA9IGRlYnVnX2V4dHJhbmV0OyBcclxuXHJcbnJlcXVpcmUoXCJIdHRwUmVxdWVzdFwiKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG52YXIgUGxheWVyID0gcmVxdWlyZSgnUGxheWVyJyk7XHJcblxyXG5mdW5jdGlvbiBHYW1lUGxheURhdGEoKVxyXG57XHJcbiAgICBQbGF5ZXIuYXBwbHkoW10sdGhpcyk7XHJcblxyXG4gICAgdGhpcy5jbHViaWQgICAgPSAwOyAgIC8v5oiR55qE5L+x5LmQ6YOoSURcclxuICAgIHRoaXMudW5pb25pZCAgID0gXCJcIjtcclxuICAgIHRoaXMub3BlbmlkICAgID0gXCJcIjtcclxuICAgIHRoaXMuc3VwZXJDb3N0ID0gMDtcclxuICAgIHRoaXMuZ2lmdENvc3QgID0gW107XHJcbiAgICB0aGlzLlNlbGZDbHViSWQgICAgID0gMDsgIC8v5oiR55qE5L+x5LmQ6YOoSURcclxuICAgIHRoaXMuQ3VyQ2x1YkluZm8gICAgPSBudWxsO1xyXG4gICAgdGhpcy5DdXJDbHViTWVtTGlzdCA9IG51bGw7XHJcblxyXG4gICAgXHJcbiAgICB0aGlzLkNvcHkgPSBmdW5jdGlvbiAocGxheWVyKSB7XHJcbiAgICAgICAgdGhpcy51aWQgICAgICAgID0gcGxheWVyLnVpZDtcclxuICAgICAgICB0aGlzLm5hbWUgICAgICAgPSBwbGF5ZXIubmFtZTtcclxuICAgICAgICB0aGlzLmhlYWR1cmwgICAgPSBwbGF5ZXIuaGVhZHVybDtcclxuICAgICAgICB0aGlzLnNleCAgICAgICAgPSBwbGF5ZXIuc2V4O1xyXG4gICAgICAgIHRoaXMuZ29sZCAgICAgICA9IHBsYXllci5nb2xkOyAgICAvL+i6q+S4iumHkeW4gVxyXG4gICAgICAgIHRoaXMuZGlhbW9uZCAgICA9IHBsYXllci5kaWFtb25kOyAvL+i6q+S4iumSu+efs1xyXG4gICAgICAgIHRoaXMuY29pbiAgICAgICA9IHBsYXllci5jb2luOyAgICAvL+aQuuW4pumHkeW4gVxyXG4gICAgICAgIHRoaXMuc2VhdGlkICAgICA9IHBsYXllci5zZWF0aWQ7XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgICAgID0gcGxheWVyLnN0YXR1cztcclxuICAgICAgICB0aGlzLndpbkdvbGQgICAgPSBwbGF5ZXIud2luR29sZDtcclxuICAgICAgICB0aGlzLlRvdGFsQ2FycnkgPSBwbGF5ZXIuVG90YWxDYXJyeTtcclxuICAgICAgICB0aGlzLlRvdGFsUm91bmQgPSBwbGF5ZXIuVG90YWxSb3VuZDtcclxuICAgICAgICB0aGlzLlRvdGFsVGFibGUgPSBwbGF5ZXIuVG90YWxUYWJsZTtcclxuICAgICAgICB0aGlzLmNhbGx0eXBlICAgPSBwbGF5ZXIuY2FsbHR5cGU7XHJcbiAgICAgICAgdGhpcy5iQmFua2VyICAgID0gcGxheWVyLmJCYW5rZXI7ICAvL+aYr+WQpuaYr+W6hOWutlxyXG4gICAgICAgIHRoaXMuYmV0Y29pbm11bCA9IHBsYXllci5iZXRjb2lubXVsOyAgLy/kuIvms6jlgI3mlbBcclxuICAgICAgICB0aGlzLmJ1bGx0eXBlICAgPSBwbGF5ZXIuYnVsbHR5cGU7XHJcbiAgICAgICAgdGhpcy5jYXJkcyAgICAgID0gcGxheWVyLmNhcmRzO1xyXG4gICAgICAgIHRoaXMuZmluYWxjb2luICA9IHBsYXllci5maW5hbGNvaW47XHJcbiAgICAgICAgdGhpcy5iT3BlbkNhcmQgID0gcGxheWVyLmJPcGVuQ2FyZDtcclxuICAgICAgICB0aGlzLnJvb21jYXJkICAgPSBwbGF5ZXIucm9vbWNhcmQ7XHJcbiAgICB9O1xyXG59XHJcblxyXG52YXIgR2FtZVBsYXllciA9IChmdW5jdGlvbigpe1xyXG4gICAgdmFyIGluc3RhbmNlIDtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZSgpe1xyXG4gICAgICAgIGlmKCBpbnN0YW5jZSA9PT0gdW5kZWZpbmVkICl7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEdhbWVQbGF5RGF0YSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2UgOiBnZXRJbnN0YW5jZSxcclxuICAgIH1cclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZVBsYXllcjsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8yMi5cclxuICovXHJcblxyXG5cclxuZnVuY3Rpb24gIEdhbWVTeXN0ZW1NYW5hZ2VyKClcclxue1xyXG4gICAgdGhpcy5iQ2xpZW50SG90VXBkYXRlID0gZmFsc2U7XHJcbiAgICB0aGlzLmRlZmF1bHRLZXkgICAgICAgPSBcInhhYDEyOS13MjMxMHUhQCMkXiYqKCFoenN4JiozMiNAXCI7XHJcbiAgICB0aGlzLmJMb2dpbiAgICAgICAgICAgPSB0cnVlO1xyXG4gICAgdGhpcy5iRmlyc3RJbkhhbGwgICAgID0gdHJ1ZTsgLy/mmK/lkKbnrKzkuIDmrKHov5vlhaXlpKfljoVcclxuICAgIHRoaXMud2ViU29ja2V0VXJsICAgICA9IFwiXCI7XHJcbiAgICB0aGlzLmJhY2tXZWJTb2NrZXRVcmwgPSBcIlwiO1xyXG4gICAgdGhpcy51c2Vya2V5ICAgICAgICAgID0gXCJcIjtcclxuICAgIHRoaXMuYWVzS2V5ICAgICAgICAgICA9IG5ldyBVaW50OEFycmF5KCk7XHJcbiAgICB0aGlzLml2ICAgICAgICAgICAgICAgPSBbMTAwLCAyMiwgMjQ1LCAyMTQsIDE1NywgOTYsIDc3LCA4MiwgMSwgMzcsIDEyMSwgOTAsIDQ3LCA2NSwgNTQsIDYzXTtcclxuICAgIHRoaXMucHJvZHVjdGlkICAgICAgICA9IDM7XHJcbiAgICB0aGlzLnZlcnNpb24gICAgICAgICAgPSAxMDE1O1xyXG4gICAgLy8gYWRkIGJ5IGphY2t5dVxyXG4gICAgdGhpcy5Wb2x1bWVTdGF0ZSA9IDA7XHJcblxyXG4gICAgdGhpcy5yZWZlcnJhbENvZGUgPSAwO1xyXG4gICAgdGhpcy5sZWRsaXN0ID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLlZlclN0YXR1c1R5cGUgICAgPSBjYy5FbnVtKHtcclxuICAgICAgICBWRVJTSU9OX1RZUEVfVEVTVCAgICAgIDogMSwgLy/mtYvor5VcclxuICAgICAgICBWRVJTSU9OX1RZUEVfQVVESVQgICAgIDogMiwgLy/lrqHmoLhcclxuICAgICAgICBWRVJTSU9OX1RZUEVfT1BFUkFUSU9OIDogMywgLy/mraPlvI9cclxuICAgIH0pO1xyXG4gICAgdGhpcy5WZXJTdGF0dXMgICAgICAgID0gdGhpcy5WZXJTdGF0dXNUeXBlLlZFUlNJT05fVFlQRV9URVNUO1xyXG5cclxuICAgIHRoaXMuY2xpZW50dXJsICAgICAgICA9IFwiXCI7IC8v5a6i5oi356uv5Y2H57qn5Zyw5Z2AXHJcblxyXG4gICAgdGhpcy5maWxldXJsICAgICAgICAgID0gXCJcIjsgLy/mlofku7blnLDlnYBcclxuXHJcbiAgICB0aGlzLndlaXhpbmNzICAgICAgICAgPSBcIlwiOyAvL+W+ruS/oeWuouacjei0puWPt1xyXG5cclxuICAgIHRoaXMucGF5dXJsICAgICAgICAgICA9IFwiXCI7IC8v5pSv5LuY5Zyw5Z2AXHJcblxyXG4gICAgdGhpcy5ub3RpY2UgICAgICAgICAgID0ge1xyXG4gICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgIGRvYzogICBcIlwiLFxyXG4gICAgICAgIHdyaXRlcjogXCJcIixcclxuICAgICAgICBwb3B1cDogIDAsXHJcbiAgICAgICAgaXNtYWludGFpbjowLFxyXG4gICAgICAgIHRpbWU6MCxcclxuICAgIH07XHJcblxyXG4gICAgLy90aGlzLnJvdXRlclVybCA9IFwiaHR0cDovL25pdXlvdXF1YW4uYmlnYmVhcmdhbWUuY29tOjE5MTkxL1wiO1xyXG4gICAgLy90aGlzLnJvdXRlclVybCA9IFwiaHR0cDovLzEyMS40MS4yNi44OjE5MTkxL1wiO1xyXG4gICAgdGhpcy5yb3V0ZXJVcmwgPSBcImh0dHA6Ly8xMjAuMjYuODEuMTUxOjE5MTkxL1wiO1xyXG5cclxuICAgIHRoaXMubG9naW50eXBlID0gMztcclxuXHJcbiAgICB0aGlzLkN1c3RvbUxvZ2luVHlwZSA9IDA7IC8v546p5a626YCJ5oup55m75b2V57G75Z6LXHJcblxyXG4gICAgdGhpcy5iUmVsb2FkSW5HYW1lID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5nYW1lc3ZjaWQgPSAwO1xyXG5cclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcblxyXG4gICAgdGhpcy5wcml2YXRlaWQgPSAwO1xyXG5cclxuICAgIHRoaXMuRW50ZXJSb29tID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLkdhbWVUeXBlID0gY2MuRW51bSh7XHJcbiAgICAgICAgR0FNRV9UWVBFX0hBTEwgOiAwLFxyXG4gICAgICAgIEdBTUVfVFlQRV9CVUxMRklHSFQgOjEsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLkN1ckdhbWVUeXBlID0gdGhpcy5HYW1lVHlwZS5HQU1FX1RZUEVfSEFMTDtcclxuXHJcbiAgICB0aGlzLkJ1bGxGaWdodFRhYmxlQ29zdCA9IFtdOyAvL+W8gOaIv+mXtOa2iOiAl1xyXG5cclxuICAgIHRoaXMuc3VwZXJDb3N0ICAgICAgID0gMDsgICAgIC8v6LaF57qn5oqi5bqE5raI6ICXXHJcblxyXG4gICAgdGhpcy5naWZ0Q29zdCAgICAgICAgPSBbXTsgICAgLy/npLznianmtojogJdcclxuXHJcbiAgICB0aGlzLkNsdWJVcGdyYWRlQ29zdCA9IFtdOyAgICAvL+S/seS5kOmDqOWNh+e6p1xyXG5cclxuICAgIHRoaXMuTmV3TXNnTnVtICAgICAgID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5yb29tTGV2ZWwgICAgICAgPSAxO1xyXG59XHJcblxyXG4vL1t7XCJ0eXBlXCI6MSxcInZhbHVlXCI6MTgwMCxcImRpYW1vbmRcIjoxLFwiZ29sZFwiOjEwMH0sXHJcbi8vIHtcInR5cGVcIjoxLFwidmFsdWVcIjozNjAwLFwiZGlhbW9uZFwiOjIsXCJnb2xkXCI6MjAwfSxcclxuLy8ge1widHlwZVwiOjEsXCJ2YWx1ZVwiOjU0MDAsXCJkaWFtb25kXCI6MyxcImdvbGRcIjozMDB9LFxyXG4vLyB7XCJ0eXBlXCI6MSxcInZhbHVlXCI6NzIwMCxcImRpYW1vbmRcIjo0LFwiZ29sZFwiOjQwMH0sXHJcbi8vIHtcInR5cGVcIjoxLFwidmFsdWVcIjo5MDAwLFwiZGlhbW9uZFwiOjUsXCJnb2xkXCI6NTAwfSxcclxuLy8ge1widHlwZVwiOjEsXCJ2YWx1ZVwiOjEwODAwLFwiZGlhbW9uZFwiOjYsXCJnb2xkXCI6NjAwfSxcclxuLy8ge1widHlwZVwiOjIsXCJ2YWx1ZVwiOjEsXCJkaWFtb25kXCI6MSxcImdvbGRcIjoxMDB9LFxyXG4vLyB7XCJ0eXBlXCI6MixcInZhbHVlXCI6NSxcImRpYW1vbmRcIjoyLFwiZ29sZFwiOjIwMH0sXHJcbi8vIHtcInR5cGVcIjoyLFwidmFsdWVcIjoxMCxcImRpYW1vbmRcIjozLFwiZ29sZFwiOjMwMH0sXHJcbi8vIHtcInR5cGVcIjoyLFwidmFsdWVcIjoyMCxcImRpYW1vbmRcIjo0LFwiZ29sZFwiOjQwMH0sXHJcbi8vIHtcInR5cGVcIjoyLFwidmFsdWVcIjo1MCxcImRpYW1vbmRcIjo1LFwiZ29sZFwiOjUwMH1dXHJcblxyXG5HYW1lU3lzdGVtTWFuYWdlci5wcm90b3R5cGUuY2FsY0dvbGRDb3N0ID0gZnVuY3Rpb24gKGxpdmVUaW1lLCBtaW5BbnRlKSB7XHJcbiAgICB2YXIgY29zdEluZm87XHJcbiAgICB2YXIgdGltZUNvc3QgPSAxO1xyXG4gICAgdmFyIGFudGVDb3N0ID0gMTtcclxuICAgIHZhciBjb3VudCA9IDA7XHJcblxyXG4gICAgY2MubG9nKFwiY2FsY0dvbGRDb3N0IGxpdmVUaW1lPVwiLCBsaXZlVGltZSwgXCIgbWluQW50ZT1cIiwgbWluQW50ZSk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLkJ1bGxGaWdodFRhYmxlQ29zdC5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICBjb3N0SW5mbyA9IHRoaXMuQnVsbEZpZ2h0VGFibGVDb3N0W2ldO1xyXG5cclxuICAgICAgICBpZiAoY29zdEluZm8udHlwZSA9PSAxICYmIGNvc3RJbmZvLnZhbHVlID09IGxpdmVUaW1lKSB7XHJcbiAgICAgICAgICAgIHRpbWVDb3N0ID0gY29zdEluZm8uZ29sZDtcclxuICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgY2MubG9nKFwiY2FsY0dvbGRDb3N0IHRpbWVDb3N0PVwiLCB0aW1lQ29zdCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb3N0SW5mby50eXBlID09IDIgJiYgY29zdEluZm8udmFsdWUgPT0gbWluQW50ZSkge1xyXG4gICAgICAgICAgICBhbnRlQ29zdCA9IGNvc3RJbmZvLmdvbGQ7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcImNhbGNHb2xkQ29zdCBhbnRlQ29zdD1cIiwgYW50ZUNvc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvdW50ID09IDIpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2MubG9nKFwiY2FsY0dvbGRDb3N0IHRvdGFsQ29zdD1cIiwgKHRpbWVDb3N0ICsgYW50ZUNvc3QpKTtcclxuICAgIHJldHVybiAodGltZUNvc3QgKyBhbnRlQ29zdCk7XHJcbn1cclxuXHJcbi8vIFRpbWUgICAgaW50IGBqc29uOlwidGltZVwiYCAgICAvL+WNleS9jeenklxyXG4vLyBEaWFtb25kIGludCBganNvbjpcImRpYW1vbmRcImAgLy/mtojogJfpkrvnn7NcclxuLy8gTGV2ZWwgICBpbnQgYGpzb246XCJsZXZlbGAgICAgLy/nrYnnuqcobGV2ZWw9MOaYrylcclxuR2FtZVN5c3RlbU1hbmFnZXIucHJvdG90eXBlLmNhbGNEaWFtb25kQ29zdCA9IGZ1bmN0aW9uKGxpdmVUaW1lLCBjbHViTGV2ZWwpIHtcclxuICAgIHZhciBjb3N0SW5mbztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuQnVsbEZpZ2h0VGFibGVDb3N0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29zdEluZm8gPSB0aGlzLkJ1bGxGaWdodFRhYmxlQ29zdFtpXTtcclxuICAgICAgICBpZihjb3N0SW5mby50aW1lID09IGxpdmVUaW1lICYmIGNvc3RJbmZvLmxldmVsID09IGNsdWJMZXZlbCkge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJjYWxjRGlhbW9uZENvc3QgbGl2ZVRpbWU9XCIsIGxpdmVUaW1lLCBcIiBjbHViTGV2ZWw9XCIsIGNsdWJMZXZlbCwgXCIgZGlhbW9uZD1cIiwgY29zdEluZm8uZGlhbW9uZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3N0SW5mby5kaWFtb25kO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNjLmxvZyhcImNhbGNEaWFtb25kQ29zdCBsaXZlVGltZT1cIiwgbGl2ZVRpbWUsIFwiIGNsdWJMZXZlbD1cIiwgY2x1YkxldmVsLCBcIiBkaWFtb25kPTBcIik7XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG5cclxuR2FtZVN5c3RlbU1hbmFnZXIucHJvdG90eXBlLmdldEN1cnJlbnRTeXN0ZW1UaW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG59XHJcblxyXG52YXIgR2FtZVN5c3RlbSA9IChmdW5jdGlvbigpe1xyXG4gICAgdmFyIGluc3RhbmNlIDtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZSgpe1xyXG4gICAgICAgIGlmKCBpbnN0YW5jZSA9PT0gdW5kZWZpbmVkICl7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEdhbWVTeXN0ZW1NYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZSA6IGdldEluc3RhbmNlLFxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lU3lzdGVtO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC83LlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKVxyXG5cclxuZnVuY3Rpb24gR2V0Q2x1Ykxpc3RSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0NMVUJfTElTVF9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJHZXRDbHViTGlzdFJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gIEdldENsdWJMaXN0UmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzcuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG4vKlxyXG4qIHR5cGUgVVNfUkVTUF9DTFVCX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBMaXN0IFtdQ0xVQl9JTkZPX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcbiB0eXBlIENMVUJfSU5GT19UIHN0cnVjdCB7XHJcbiBDbHViSWQgICAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiBSb2xlICAgICAgaW50OCAgIGBqc29uOlwicm9sZVwiYFxyXG4gT3duZXJVaWQgIHVpbnQzMiBganNvbjpcIm93bmVydWlkXCJgXHJcbiBMZXZlbCAgICAgaW50ICAgIGBqc29uOlwibGV2ZWxcImBcclxuIE5hbWUgICAgICBzdHJpbmcgYGpzb246XCJuYW1lXCJgXHJcbiBIZWFkVXJsICAgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gQWRkcmVzcyAgIHN0cmluZyBganNvbjpcImFkZHJlc3NcImBcclxuIEludHJvICAgICBzdHJpbmcgYGpzb246XCJpbnRyb1wiYFxyXG4gRW5kVGltZSAgIGludDY0ICBganNvbjpcImVuZHRpbWVcImAgLy9zXHJcbiBTdGF0dXMgICAgaW50ICAgIGBqc29uOlwic3RhdHVzXCJgXHJcbiBNZW1iZXJzICAgaW50ICAgIGBqc29uOlwibWVtYmVyc1wiYCAgIC8v5oiQ5ZGY5Lq65pWwXHJcbiBNYXhNZW1iZXIgaW50ICAgIGBqc29uOlwibWF4bWVtYmVyXCJgIC8v5pyA5aSa5aSa5bCR5Lq6XHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gR2V0Q2x1Ykxpc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0NMVUJfTElTVF9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvL3tcImNtZFwiOjE5NjYxOCxcInNlcVwiOjIsXCJ1aWRcIjoxMDAzOCxcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJwcml2YXRlaWRcIjoyNDc1MjIsXCJnYW1lc3ZjaWRcIjo1LFwidGFibGVpZFwiOjF9XHJcbiAgICAgICAgdGhpcy5saXN0ID0gbXNnLmxpc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBHZXRDbHViTGlzdFJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvOC5cclxuICovXHJcblxyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJylcclxuXHJcbmZ1bmN0aW9uIEdldENsdWJUYWJsZVJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfQ0xVQl9UQUJMRV9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJHZXRDbHViVGFibGVSZXFQYWNrZXQuc2VuZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBjbHViaWQgOiBtc2cuY2x1YmlkLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEdldENsdWJUYWJsZVJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC84LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG4vKlxyXG4qIHR5cGUgVVNfUkVTUF9DTFVCX1RBQkxFX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVTUF9DTFVCX1RBQkxFX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBQQVJBTV9SRVNQX0NMVUJfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gQ2x1YklkIGludCBganNvbjpcImNsdWJpZFwiYFxyXG4gTGlzdCBbXVBSSVZBVEVfVEFCTEVfREVUQUlMX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcblxyXG4gdHlwZSBQUklWQVRFX1RBQkxFX0RFVEFJTF9UIHN0cnVjdCB7XHJcbiBPd25lck5hbWUgIHN0cmluZyBganNvbjpcIm93bmVybmFtZVwiYFxyXG4gVGFibGVOYW1lICBzdHJpbmcgYGpzb246XCJ0YWJsZW5hbWVcImBcclxuIEhlYWRVcmwgICAgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gTWluQW50ZSAgICBpbnQgICAgYGpzb246XCJtaW5hbnRlXCJgXHJcbiBSZW1haW5UaW1lIGludCAgICBganNvbjpcInJlbWFpbnRpbWVcImBcclxuIEdhbWVUeXBlICAgaW50ICAgIGBqc29uOlwiZ2FtZXR5cGVcImBcclxuIEdhbWVJZCAgICAgaW50ICAgIGBqc29uOlwiZ2FtZWlkXCJgXHJcbiBHYW1lU3ZjSWQgIGludCAgICBganNvbjpcImdhbWVzdmNpZFwiYFxyXG4gVGFibGVJZCAgICBpbnQgICAgYGpzb246XCJ0YWJsZWlkXCJgXHJcbiB9XHJcbiogKi9cclxuZnVuY3Rpb24gR2V0Q2x1YlRhYmxlUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9DTFVCX1RBQkxFX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmFtICA9IG1zZy5wYXJhbTtcclxuICAgICAgICB0aGlzLmNsdWJpZCA9IHRoaXMucGFyYW0uY2x1YmlkO1xyXG4gICAgICAgIHRoaXMubGlzdCAgID0gdGhpcy5wYXJhbS5saXN0O1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgR2V0Q2x1YlRhYmxlUmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC85LlxyXG4gKi9cclxuLypcclxuIHR5cGUgQ0xVQl9SRVFfR0VUX01FTUJFUl9MSVNUX1Qgc3RydWN0IHtcclxuIENsdWJIZWFkXHJcbiB9XHJcblxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcblxyXG5mdW5jdGlvbiBHZXRNZW1iZXJMaXN0UmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LkNMVUJfUkVRX0dFVF9NRU1CRVJfTElTVF9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJHZXRNZW1iZXJMaXN0UmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgY2x1YmlkOm1zZy5jbHViaWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgR2V0TWVtYmVyTGlzdFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC85LlxyXG4gKi9cclxuLypcclxuKiB0eXBlIENMVUJfUkVTUF9HRVRfTUVNQkVSX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9SRVNQX0dFVF9NRU1CRVJfTElTVF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVTUF9HRVRfTUVNQkVSX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gQ2x1YklkIGludCAgICAgICAgICAgICAgICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiBMaXN0ICAgW11DTFVCX01FTUJFUl9JTkZPX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcbiB0eXBlIENMVUJfTUVNQkVSX0lORk9fVCBzdHJ1Y3Qge1xyXG4gVWlkICAgICB1aW50MzIgYGpzb246XCJ1aWRcImBcclxuIE5hbWUgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gSGVhZFVybCBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBTZXggICAgIGludCAgYGpzb246XCJzZXhcImBcclxuIFJvbGUgICAgdWludDggIGBqc29uOlwicm9sZVwiYFxyXG4gfVxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIEdldE1lbWJlckxpc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfR0VUX01FTUJFUl9MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY2x1YmlkID0gbXNnLnBhcmFtLmNsdWJpZDtcclxuICAgICAgICB0aGlzLmxpc3QgPSBtc2cucGFyYW0ubGlzdDtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBHZXRNZW1iZXJMaXN0UmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8xMy5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbi8qXHJcbiogY29uc3QgKFxyXG4gRV9TWVNURU1fTVNHX1QgPSAxXHJcbiBFX0NMVUJfTVNHX1QgICA9IDJcclxuIEVfTUFJTF9NU0dfVCAgID0gM1xyXG4gKVxyXG4gdHlwZSBVU19SRVFfTVNHX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFBhcmFtIFBBUkFNX1JFUV9NU0dfTElTVF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVRX01TR19MSVNUX1Qgc3RydWN0IHtcclxuIFR5cGUgIGludCBganNvbjpcInR5cGVcImBcclxuIFN0YXJ0IGludCBganNvbjpcInN0YXJ0XCJgXHJcbiBUb3RhbCBpbnQgYGpzb246XCJ0b3RhbFwiYFxyXG4gfVxyXG4qICovXHJcbmZ1bmN0aW9uIEdldE1zZ0xpc3RSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX01TR19MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkdldE1zZ051bVJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIHBhcmFtIDogbXNnLFxyXG4gICAgICAgIH1cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgR2V0TXNnTGlzdFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8xMy5cclxuICovXHJcbi8qXHJcbiogRV9TWVNURU1fTVNHX1QgPSAxXHJcbiB0eXBlIFVTX1JFU1BfU1lTX01TR19MSVNUX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gUGFyYW0gUEFSQU1fU1lTX01TR19UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fU1lTX01TR19UIHN0cnVjdCB7XHJcbiBUeXBlIGludCAgICAgICAgICAgICAgYGpzb246XCJ0eXBlXCJgXHJcbiBMaXN0IFtdU1lTX01TR19OT0RFX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcbiB0eXBlIFNZU19NU0dfTk9ERV9UIHN0cnVjdCB7XHJcbiBNc2cgIHN0cmluZyBganNvbjpcIm1zZ1wiYFx0XHRcdC8vYmFzZTY0XHJcbiBUaW1lIGludDY0ICBganNvbjpcInRpbWVcImBcclxuIH1cclxuXHJcbiBFX0NMVUJfTVNHX1QgICA9IDJcclxuIHR5cGUgVVNfUkVTUF9DTFVCX01TR19MSVNUX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gUGFyYW0gUEFSQU1fQ0xVQl9NU0dfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX0NMVUJfTVNHX1Qgc3RydWN0IHtcclxuIFR5cGUgaW50ICAgICAgICAgICAgICAgYGpzb246XCJ0eXBlXCJgXHJcbiBMaXN0IFtdQ0xVQl9NU0dfTk9ERV9UIGBqc29uOlwibGlzdFwiYFxyXG4gfVxyXG4gdHlwZSBDTFVCX01TR19OT0RFX1Qgc3RydWN0IHtcclxuIElkICAgICAgaW50ICAgIGBqc29uOlwiaWRcImBcclxuIENsdWJJZCAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gSXNSZWFkICBpbnQgICAgYGpzb246XCJpc3JlYWRcImBcclxuIFR5cGUgICAgaW50ICAgIGBqc29uOlwidHlwZVwiYFxyXG4gTXNnICAgICBzdHJpbmcgYGpzb246XCJtc2dcImBcdFx0Ly9iYXNlNjRcclxuIFRpbWUgICAgaW50ICAgIGBqc29uOlwidGltZVwiYFxyXG4gfVxyXG5cclxuIEVfTUFJTF9NU0dfVCAgID0gM1xyXG4gdHlwZSBVU19SRVNQX01BSUxfTVNHX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9NQUlMX01TR19UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fTUFJTF9NU0dfVCBzdHJ1Y3Qge1xyXG4gVHlwZSBpbnQgICAgICAgICAgICAgICBganNvbjpcInR5cGVcImBcclxuIExpc3QgW11NQUlMX01TR19OT0RFX1QgYGpzb246XCJsaXN0XCJgXHJcbiB9XHJcbiB0eXBlIE1BSUxfTVNHX05PREVfVCBzdHJ1Y3Qge1xyXG4gSWQgICAgIGludCAgICBganNvbjpcImlkXCJgXHJcbiBJc1JlYWQgaW50ICAgIGBqc29uOlwiaXNyZWFkXCJgXHJcbiBUeXBlICAgaW50ICAgIGBqc29uOlwidHlwZVwiYFxyXG4gTXNnICAgIHN0cmluZyBganNvbjpcIm1zZ1wiYFx0XHQvL2Jhc2U2NFxyXG4gVGltZSAgIGludCAgICBganNvbjpcInRpbWVcImBcclxuIH1cclxuKlxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIEdldE1zZ0xpc3RSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX01TR19MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IG1zZy5wYXJhbS50eXBlO1xyXG4gICAgICAgIHRoaXMubGlzdCA9IG1zZy5wYXJhbS5saXN0O1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgR2V0TXNnTGlzdFJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvMTMuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxuXHJcbmZ1bmN0aW9uIEdldE1zZ051bVJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfTkVXX01TR19OVU1fQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiR2V0TXNnTnVtUmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBHZXRNc2dOdW1SZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvMTMuXHJcbiAqL1xyXG5cclxuLypcclxuKiB0eXBlIFVTX1JFU1BfTkVXX01TR19OVU1fVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9ORVdfTVNHX05VTV9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuXHJcbiB0eXBlIFBBUkFNX05FV19NU0dfTlVNX1Qgc3RydWN0IHtcclxuIFN5c051bSAgaW50IGBqc29uOlwic3lzbnVtXCJgXHJcbiBDbHViTnVtIGludCBganNvbjpcImNsdWJudW1cImBcclxuIE1haWxOdW0gaW50IGBqc29uOlwibWFpbG51bVwiYFxyXG4gfVxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIEdldE1zZ051bVJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfTkVXX01TR19OVU1fQ01EX0lEO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5zeXNudW0gPSBtc2cucGFyYW0uc3lzbnVtO1xyXG4gICAgICAgIHRoaXMuY2x1Ym51bSA9IG1zZy5wYXJhbS5jbHVibnVtO1xyXG4gICAgICAgIHRoaXMubWFpbG51bSA9IG1zZy5wYXJhbS5tYWlsbnVtO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgR2V0TXNnTnVtUmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqIOiHquWumuS5iea2iOaBr+eahOWwgeijhVxyXG4gKiBAcGFyYW0gZXZlbnRUeXBlXHJcbiAqIEBwYXJhbSBjYWxsQmFja1xyXG4gKiBAcGFyYW0gbm9kZVxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcblxyXG5cclxuZnVuY3Rpb24gR2xvYmFsRXZlbnQgKGV2ZW50VHlwZSxjYWxsQmFjayxub2RlKSB7XHJcbiAgICB0aGlzLmV2ZW50VHlwZSA9IGV2ZW50VHlwZSA7XHJcbiAgICB0aGlzLmNhbGxCYWNrID0gY2FsbEJhY2sgO1xyXG4gICAgdGhpcy5ub2RlID0gbm9kZSA7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBFdmVudE1hbmFnZXIoKSB7XHJcblxyXG4gICAgdGhpcy5saXN0ZW5lck1hcCA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMuZXZlbnRJRCA9IDAgO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5re75Yqg55uR5ZCsXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlXHJcbiAgICAgKiBAcGFyYW0gY2FsbEJhY2tcclxuICAgICAqIEBwYXJhbSBub2RlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnRUeXBlLCBjYWxsQmFjaywgbm9kZSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IG5ldyBHbG9iYWxFdmVudChldmVudFR5cGUsY2FsbEJhY2ssbm9kZSk7XHJcblxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJNYXAuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYoZXZlbnQuZXZlbnRUeXBlID09IGV2ZW50VHlwZSAmJiBub2RlID09IGV2ZW50Lm5vZGUpe1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKFwiR2xvYmFsRXZlbnRNYW5hZ2Ugc2FtZSBhZGRFdmVudExpc3RlbmVyPVwiLCBldmVudFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRJRCsrIDtcclxuICAgICAgICB0aGlzLmxpc3RlbmVyTWFwLnNldCh0aGlzLmV2ZW50SUQsIGV2ZW50KTtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiR2xvYmFsRXZlbnRNYW5hZ2UgYWRkRXZlbnRMaXN0ZW5lcj1cIiwgZXZlbnRUeXBlLCBcIiBldmVudGlkPVwiLCB0aGlzLmV2ZW50SUQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50SUQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yig6Zmk55uR5ZCsXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRpZFxyXG4gICAgICovXHJcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gKGV2ZW50aWQpIHtcclxuICAgICAgICBjYy5sb2coXCJHbG9iYWxFdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIgZXZlbnRpZD1cIiwgZXZlbnRpZCk7XHJcbiAgICAgICAgaWYodGhpcy5saXN0ZW5lck1hcC5jb250YWluc0tleShldmVudGlkKSl7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJNYXAuZGVsZXRlKGV2ZW50aWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOi9rOWPkeS6i+S7tlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZVxyXG4gICAgICogQHBhcmFtIGRhdGFcclxuICAgICAqL1xyXG4gICAgdGhpcy5lbWl0RXZlbnQgPSBmdW5jdGlvbiAoZXZlbnRUeXBlLCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lck1hcC5mb3JFYWNoS2V5KGZ1bmN0aW9uIChpZCwgZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYoZXZlbnQuZXZlbnRUeXBlID09IGV2ZW50VHlwZSl7XHJcbiAgICAgICAgICAgICAgICBldmVudC5jYWxsQmFjayhkYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgR2xvYmFsRXZlbnRNYW5hZ2VyID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaW5zdGFuY2UgO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKCl7XHJcbiAgICAgICAgaWYoIGluc3RhbmNlID09PSB1bmRlZmluZWQgKXtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZSA6IGdldEluc3RhbmNlLFxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxud2luZG93Lkdsb2JhbEV2ZW50TWFuYWdlciA9IEdsb2JhbEV2ZW50TWFuYWdlcjtcclxuIiwidmFyIEJhc2VTY2VuZSA9IHJlcXVpcmUoXCJCYXNlU2NlbmVcIilcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEh0dHBNYW5hZ2VyID0gcmVxdWlyZSgnSHR0cE1hbmFnZXInKTtcclxudmFyIFBsYXRmb3JtID0gcmVxdWlyZSgnUGxhdGZvcm0nKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBTb2NrZXRNYW5hZ2VyID0gcmVxdWlyZSgnU29ja2V0TWFuYWdlcicpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lQ2FsbE9DID0gcmVxdWlyZSgnR2FtZUNhbGxPQycpO1xyXG52YXIgQWxlcnRWaWV3ID0gcmVxdWlyZSgnQWxlcnRWaWV3Jyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlU2NlbmUsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRvcEJnIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuU3ByaXRlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib3R0b21CZyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgICAgICB0eXBlOmNjLlNwcml0ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgSGFsbEJnOntcclxuICAgICAgICAgICAgZGVmYXVsdDpudWxsLFxyXG4gICAgICAgICAgICB0eXBlOmNjLlNwcml0ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgQnVsbGZpZ2h0X0NyZWF0ZVJvb20gOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgUm9vbUlkRWRpdEJveCA6IGNjLkVkaXRCb3gsXHJcbiAgICAgICAgUG9wTm9kZSAgICAgOiBjYy5Ob2RlLFxyXG4gICAgICAgIFNob3BWaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEZpbmRWaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFN1Y2Nlc3NWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIE1pbmVWaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIENsdWJWaWV3ICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIE5vdGljZVZpZXcgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFNob3BUb2dnbGUgIDogY2MuVG9nZ2xlLFxyXG4gICAgICAgIFNoYXJlVmlldyAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFdlYlZpZXcgICAgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFJlZFRpcHMgICAgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIEhhbGxUaXRsZSAgIDogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25Mb2FkXCIpO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5iTG9naW4gPSB0cnVlO1xyXG5cclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuQ3VyR2FtZVR5cGUgPSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuR2FtZVR5cGUuR0FNRV9UWVBFX0hBTEw7XHJcbiAgICAgICAgdGhpcy5wb3BVcE5vdGljZSgpO1xyXG4gICAgICAgIGlmICghR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJGaXJzdEluSGFsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldFVzZXJEZXRhaWwoKTsgICAvL+S7jua4uOaIj+S4remAgOWHuuWIsOWkp+WOhe+8jOmcgOimgeWIt+aWsOeOqeWutuS/oeaBr1xyXG4gICAgICAgIH1cclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYkZpcnN0SW5IYWxsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc2VuZENyZWF0ZVRhYmxlQ29zdCgpO1xyXG4gICAgICAgIHRoaXMuc2VuZENsdWJVcGdyYWRlQ29zdCgpO1xyXG4gICAgICAgIHRoaXMuc2VuZE1zZ051bSgpO1xyXG5cclxuICAgICAgICBpZiAoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJSZWxvYWRJbkdhbWUpIHtcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJSZWxvYWRJbkdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2MubG9nKFwibG9hZFNjZW5lIEJ1bGxmaWdodF9HYW1lU2NlbmVcIik7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnQnVsbGZpZ2h0X0dhbWVTY2VuZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0ICA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnB1c2hSb2xsTXNnKCk7XHJcbiAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmxlZGxpc3QgIT0gbnVsbCAmJiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdCAhPSB1bmRlZmluZWRcclxuICAgICAgICAmJiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdC5sZW5ndGggPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLnB1c2hSb2xsTXNnLCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdC5sZW5ndGgqMTAgKyAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzdG9wUm9sbE1zZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdCAhPSBudWxsICYmIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5sZWRsaXN0ICE9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAmJiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdC5sZW5ndGggPiAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMucHVzaFJvbGxNc2cpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHB1c2hSb2xsTXNnIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGlmICh0aGlzLkhhbGxUaXRsZS5zdHJpbmcgIT0gXCLlpKfnhorniZvlj4vlnIhcIikge1xyXG4gICAgICAgIC8vICAgICByZXR1cm47XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmIChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdCAhPSBudWxsICYmIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5sZWRsaXN0ICE9IHVuZGVmaW5lZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmxlZGxpc3QubGVuZ3RoO2luZGV4KyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFZpZXcgOiBcIkhhbGxTY2VuZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0biA6IFwiUm9sbE1zZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdFtpbmRleF0sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNDRU5FX01TRywgZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkRlc3Ryb3kgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG5TaGFyZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgU2hhcmVJbWFnZVBhdGggPSBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuc2NyZWVuU2hvdEFjdGlvbigpO1xyXG4gICAgICAgIHZhciBzaGFyZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlNoYXJlVmlldyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChzaGFyZVZpZXcpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIHNoYXJlVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMix3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICAgICAgc2hhcmVWaWV3LmdldENvbXBvbmVudChcIlNoYXJlVmlld1wiKS5zZXRTaGFyZVR5ZXAoU2hhcmVUeXBlLkVfU0hBUkVUWVBFX0lNQUdFLFNoYXJlSW1hZ2VQYXRoLEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5jbGllbnR1cmwpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgb25TY2VuZU1zZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIGlmKG1zZy5wb3BWaWV3ID09IFwiU2V0dGluZ1ZpZXdcIikge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID09IFwiQnRuRXhpdExvZ2luXCIpIHtcclxuICAgICAgICAgICAgICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoXCJMb2FkaW5nU2NlbmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihtc2cucG9wVmlldyA9PSBcIlByb2R1Y2VDZWxsXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID09IFwiY2FsbEJ0bkJ1eVwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgV2ViVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuV2ViVmlldyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoV2ViVmlldyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2luU2l6ZSA9IGNjLmRpcmVjdG9yLmdldFdpblNpemUoKTtcclxuICAgICAgICAgICAgICAgIFdlYlZpZXcuc2V0UG9zaXRpb24oY2MucCgtd2luU2l6ZS53aWR0aCwwKSk7XHJcbiAgICAgICAgICAgICAgICBXZWJWaWV3LmdldENvbXBvbmVudCgnQ3VzV2ViVmlldycpLnNldFdlYlZpZXdVcmwobXNnLnVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihtc2cucG9wVmlldyA9PSBcIkZpbmRWaWV3XCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cuYnRuID09IFwiQ2FsbEJhY2tCdG5cIikge1xyXG4gICAgICAgICAgICAgICAgdmFyIFdlYlZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLldlYlZpZXcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKFdlYlZpZXcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHdpblNpemUgPSBjYy5kaXJlY3Rvci5nZXRXaW5TaXplKCk7XHJcbiAgICAgICAgICAgICAgICBXZWJWaWV3LnNldFBvc2l0aW9uKGNjLnAoLXdpblNpemUud2lkdGgsMCkpO1xyXG4gICAgICAgICAgICAgICAgV2ViVmlldy5nZXRDb21wb25lbnQoJ0N1c1dlYlZpZXcnKS5zZXRXZWJWaWV3VXJsKG1zZy51cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYobXNnLnBvcFZpZXcgPT0gXCJSb29tSW5mb1ZpZXdcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG1zZy5idG4gPT0gXCJCdG5TaGFyZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxCYWNrQnRuU2hhcmUoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKGV2ZW50KTtcclxuXHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoY21kKVxyXG4gICAgICAgIHtcclxuICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0xPR0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgdGhpcy5vbkxvZ2luTXNnKG1zZyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0NSRUFURV9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX0NSRUFURV9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgIHRoaXMub25DcmVhdGVSb29tTXNnKG1zZyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0VOVEVSX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICB0aGlzLm9uRW50ZXJSb29tKG1zZyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFVTX1JFU1BfTkVXX01TR19OVU1fQ01EX0lEOlxyXG4gICAgICAgICAgICB0aGlzLnNob3dNc2dUaXBzKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYobXNnLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIExvYWRpbmdWaWV3LmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dNc2dUaXBzIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuUmVkVGlwcy5ub2RlLmFjdGl2ZSA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5OZXdNc2dOdW07XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRDcmVhdGVUYWJsZUNvc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1zZyA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9DUkVBVEVfQ09TVF9DTURfSUQpO1xyXG4gICAgICAgIGlmIChtc2cpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiSGFsbFNjZW5lLnNlbmRDcmVhdGVUYWJsZUNvc3RcIik7XHJcbiAgICAgICAgICAgIG1zZy5zZW5kKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiSGFsbFNjZW5lLnNlbmRDcmVhdGVUYWJsZUNvc3Qgbm90IGZvdW5kIFVTX1JFUV9DUkVBVEVfQ09TVF9DTURfSURcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZW5kQ2x1YlVwZ3JhZGVDb3N0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtc2cgPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfQ0xVQl9VUEdSQURFX0NPU1RfQ01EX0lEKTtcclxuICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5zZW5kQ2x1YlVwZ3JhZGVDb3N0XCIpO1xyXG4gICAgICAgICAgICBtc2cuc2VuZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLndhcm4oXCJIYWxsU2NlbmUuc2VuZENsdWJVcGdyYWRlQ29zdCBub3QgZm91bmQgVVNfUkVRX0NMVUJfVVBHUkFERV9DT1NUX0NNRF9JRFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRNc2dOdW0gOmZ1bmN0aW9uKCkge1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoVVNfUkVRX05FV19NU0dfTlVNX0NNRF9JRCkuc2VuZCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvblVzZXJEZXRhaWw6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25Vc2VyRGV0YWlsXCIpO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5nb2xkICAgID0gbXNnLmdvbGQ7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmRpYW1vbmQgPSBtc2cuZGlhbW9uZDtcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2dpbk1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25Mb2dpbk1zZ1wiKTtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uQ3JlYXRlUm9vbU1zZyA6IGZ1bmN0aW9uKG1zZylcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUub25DcmVhdGVSb29tTXNnXCIpO1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtc2cucHJpdmF0ZWlkLmxlbmd0aCA+IDEgKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5yb29tTGV2ZWwgPSBtc2cuZ2FtZWxldmVsO1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucHJpdmF0ZWlkID0gbXNnLnByaXZhdGVpZFswXTtcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCA9IG1zZy5nYW1lc3ZjaWQ7XHJcbiAgICAgICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkID0gbXNnLnRhYmxlaWQ7XHJcblxyXG4gICAgICAgICAgICBjYy5sb2coXCJvbkNyZWF0ZVJvb21Nc2dcIik7XHJcbiAgICAgICAgICAgIExvYWRpbmdWaWV3LnNob3coXCLmraPlnKjov5vlhaUuLi5cIik7XHJcbiAgICAgICAgICAgIHZhciBjcmVhdGVSb29tID0gTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX0ZJTkRfVEFCTEVfQ01EX0lEKTtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwcml2YXRlaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucHJpdmF0ZWlkLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSb29tLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGFsZXJ0ID0gQWxlcnRWaWV3LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBMb2FkaW5nVmlldy5zaG93KFwi5q2j5Zyo6L+b5YWlLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNyZWF0ZVJvb20gPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfRklORF9UQUJMRV9DTURfSUQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZWlkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnByaXZhdGVpZCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUm9vbS5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFwi6L+b5YWl5ri45oiPXCIpO1xyXG4gICAgICAgICAgICBhbGVydC5zZXROZWdhdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hhcmVWaWV3ID0gY2MuaW5zdGFudGlhdGUoc2VsZi5TaGFyZVZpZXcpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ub2RlLmFkZENoaWxkKHNoYXJlVmlldyk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdHJpbmcgPSBcIuaIkeWcqOeOqea4uOaIj++8u1wiICsgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLmdldEFwcE5hbWUoKSArXCLvvL3ph4zliJvlu7rkuobmiL/pl7QoXCIgKyBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucHJpdmF0ZWlkKyBcIiks5b+r54K55LiA6LW35p2l546p5ZCn77yB77yB77yBXCI7XHJcbiAgICAgICAgICAgICAgICBzaGFyZVZpZXcuZ2V0Q29tcG9uZW50KFwiU2hhcmVWaWV3XCIpLnNldFNoYXJlVHllcChTaGFyZVR5cGUuRV9TSEFSRVRZUEVfTElOSyxzdHJpbmcsR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmNsaWVudHVybCk7XHJcbiAgICAgICAgICAgIH0sXCLliIbkuqvmuLjmiI9cIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RyaW5nID0gXCLmiL/pl7QoXCIgKyBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucHJpdmF0ZWlkICsgXCIp5Yib5bu65oiQ5Yqf77yM5b+r54K55YiG5Lqr57uZ5aW95Y+L5byA5aeL5ri45oiP5ZCnXCI7XHJcbiAgICAgICAgICAgIGFsZXJ0LnNob3coc3RyaW5nLEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0FOQ0xFKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRW50ZXJSb29tIDogZnVuY3Rpb24obXNnKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5vbkVudGVyUm9vbSx0YWJsZWlkID0gXCIgKyBtc2cubmFtZSk7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBwb3BVcE5vdGljZSA6IGZ1bmN0aW9uICgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLm5vdGljZS5kb2MgIT0gXCJcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBOb3RpY2VWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5Ob3RpY2VWaWV3KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKE5vdGljZVZpZXcpO1xyXG4gICAgICAgICAgICBOb3RpY2VWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgICAgIE5vdGljZVZpZXcuZ2V0Q29tcG9uZW50KCdOb3RpY2VWaWV3Jykuc2V0Q29udGVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUucG9wVXBOb3RpY2UsdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipCdG5DYWxsYmFjayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIGNhbGxiYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5jYWxsYmFja0J0bixDdXN0b21FdmVudERhdGEgPSBcIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5jYWxsYmFja0J0bixidG5OYW1lID0gXCIgKyBidG5OYW1lKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmKGJ0bk5hbWUgPT0gXCJCdG5DcmVhdGVSb29tXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRvQnRuQ3JlYXRlUm9vbSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5FbnRlclJvb21cIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZG9CdG5FbnRlclJvb20oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG5OYW1lID09IFwiQ2x1YlwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kb0J0bkNsdWIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGRvQnRuU2hvcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5TaG9wXCIpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveUNoaWxkTm9kZSgpO1xyXG4gICAgICAgIHRoaXMuSGFsbFRpdGxlLnN0cmluZyA9IFwi5ri45oiP5ZWG5Z+OXCI7XHJcbiAgICAgICAgdGhpcy5Qb3BOb2RlLnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgIHZhciBzaG9wVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2hvcFZpZXcpO1xyXG4gICAgICAgIHRoaXMuUG9wTm9kZS5hZGRDaGlsZChzaG9wVmlldyk7XHJcbiAgICAgICAgc2hvcFZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuXHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgIH0sXHJcblxyXG4gICAgZG9CdG5BY3Rpdml0eSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5BY3Rpdml0eVwiKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGVzdHJveUNoaWxkTm9kZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLlBvcE5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbltpXS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3RvcFJvbGxNc2coKTtcclxuICAgIH0sXHJcblxyXG4gICAgZG9CdG5GaW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5kb0J0bkZpbmRcIik7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95Q2hpbGROb2RlKCk7XHJcbiAgICAgICAgdGhpcy5IYWxsVGl0bGUuc3RyaW5nID0gXCLlj5HnjrBcIjtcclxuICAgICAgICB0aGlzLlBvcE5vZGUucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcbiAgICAgICAgdmFyIGZpbmRWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5GaW5kVmlldyk7XHJcbiAgICAgICAgdGhpcy5Qb3BOb2RlLmFkZENoaWxkKGZpbmRWaWV3KTtcclxuICAgICAgICBmaW5kVmlldy5zZXRQb3NpdGlvbihjYy5wKDAsMCkpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGRvQnRuU3VjY2VzcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5TdWNjZXNzXCIpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveUNoaWxkTm9kZSgpO1xyXG4gICAgICAgIHRoaXMuSGFsbFRpdGxlLnN0cmluZyA9IFwi5oiY57upXCI7XHJcbiAgICAgICAgdGhpcy5Qb3BOb2RlLnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgIHZhciBzdWNjZXNzVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU3VjY2Vzc1ZpZXcpO1xyXG4gICAgICAgIHRoaXMuUG9wTm9kZS5hZGRDaGlsZChzdWNjZXNzVmlldyk7XHJcbiAgICAgICAgc3VjY2Vzc1ZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgfSxcclxuXHJcbiAgICBkb0J0bk1pbmUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiSGFsbFNjZW5lLmRvQnRuTWluZVwiKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3lDaGlsZE5vZGUoKTtcclxuICAgICAgICB0aGlzLkhhbGxUaXRsZS5zdHJpbmcgPSBcIuaIkVwiO1xyXG4gICAgICAgIHRoaXMuUG9wTm9kZS5yZW1vdmVBbGxDaGlsZHJlbih0cnVlKTtcclxuICAgICAgICB2YXIgbWluZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLk1pbmVWaWV3KTtcclxuICAgICAgICB0aGlzLlBvcE5vZGUuYWRkQ2hpbGQobWluZVZpZXcpO1xyXG4gICAgICAgIG1pbmVWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgIH0sXHJcblxyXG4gICAgZG9CdG5Nb3JlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5kb0J0bk1vcmVcIik7XHJcbiAgICB9LFxyXG5cclxuICAgIGRvQnRuTWFpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5NYWluXCIpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveUNoaWxkTm9kZSgpO1xyXG4gICAgICAgIHRoaXMuUG9wTm9kZS5yZW1vdmVBbGxDaGlsZHJlbih0cnVlKTtcclxuICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgdGhpcy5IYWxsVGl0bGUuc3RyaW5nID0gXCI1MeeJm+WPi+S8mlwiO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGRvQnRuSGVhZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5IZWFkXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBkb0J0bkVudGVyUm9vbSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLlJvb21JZEVkaXRCb3guc3RyaW5nID09IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBUb2FzdFZpZXcuc2hvdyhcIuaIv+mXtOWPt+S4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJvb21JZCA9IE51bWJlcih0aGlzLlJvb21JZEVkaXRCb3guc3RyaW5nKTtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5FbnRlclJvb20scm9vbUlkID0gXCIgKyByb29tSWQpO1xyXG4gICAgICAgIExvYWRpbmdWaWV3LnNob3coXCLmraPlnKjov5vlhaUuLi5cIik7XHJcbiAgICAgICAgdmFyIGNyZWF0ZVJvb20gPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfRklORF9UQUJMRV9DTURfSUQpO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICBwcml2YXRlaWQgOiByb29tSWQsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJvb20uc2VuZChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGRvQnRuQ3JlYXRlUm9vbSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJIYWxsU2NlbmUuZG9CdG5DcmVhdGVSb29tXCIpO1xyXG4gICAgICAgIHZhciBjcmVhdGVSb29tID0gY2MuaW5zdGFudGlhdGUodGhpcy5CdWxsZmlnaHRfQ3JlYXRlUm9vbSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKGNyZWF0ZVJvb20pO1xyXG4gICAgICAgIGNyZWF0ZVJvb20uZ2V0Q29tcG9uZW50KCdCdWxsZmlnaHRfQ3JlYXRlUm9vbScpLnNldENsdWJJZCgwLDApO1xyXG4gICAgICAgIGNyZWF0ZVJvb20uc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICAvL2NyZWF0ZVJvb20uZ2V0Q29tcG9uZW50KCdCdWxsZmlnaHRfQ3JlYXRlUm9vbScpLnNldFJvb21DYXJkVmlldygpO1xyXG5cclxuICAgICAgICB2YXIgY3JlYXRlUm9vbSA9IE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEKTtcclxuICAgICAgICBpZihjcmVhdGVSb29tKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJvb20uc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZG9CdG5DbHViIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkhhbGxTY2VuZS5kb0J0bkNsdWJcIik7XHJcbiAgICAgICAgdGhpcy5Qb3BOb2RlLnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgIHZhciBjbHViVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuQ2x1YlZpZXcpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChjbHViVmlldyk7XHJcbiAgICAgICAgY2x1YlZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8yMi5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcblxyXG5mdW5jdGlvbiBIZWFydFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfSEVBUlRCRUFUX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgSGVhcnRSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG5mdW5jdGlvbiBIZWFydFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfSEVBUlRCRUFUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgLy8gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEhlYXJ0UmVzcFBhY2tldDsiLCIvKiogXHJcbiAqIOeDreabtOaWsOeuoeeQhlxyXG4gKiBBdXRob3IgICAgICA6IGRvbmdnYW5nXHJcbiAqIENyZWF0ZSBUaW1lIDogMjAxNi43LjI5XHJcbiAqIFxyXG4gKiDpnIDmsYLor7TmmI46XHJcbiAqIDHjgIHlj6/lkI7lj7Dmm7TmlrDniYjmnKzotYTmupBcclxuICovXHJcblxyXG52YXIgQXNzZXRzTWFuYWdlciA9IHJlcXVpcmUoXCJBc3NldHNNYW5hZ2VyXCIpOyBcclxuXHJcbnZhciBhbU1hbmFnZXIgPSBjYy5DbGFzcyh7XHJcbiAgICBjdG9yIDogZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLl91cGRhdGVzICAgID0ge307ICAgICAgICAgICAgLy8g5pu05paw5qih5Z2X6ZuG5ZCIXHJcbiAgICAgICAgdGhpcy5fcXVldWUgICAgICA9IFtdOyAgICAgICAgICAgIC8vIOabtOaWsOWvueWIl1xyXG4gICAgICAgIHRoaXMuX2lzVXBkYXRpbmcgPSBmYWxzZTsgICAgICAgICAvLyDmmK/lkKbmraPlnKjmm7TmlrDkuK1cclxuICAgICAgICB0aGlzLl9jdXJyZW50ICAgID0gbnVsbDsgICAgICAgICAgLy8g5b2T5YmN5q2j5Zyo5pu05paw55qE5qih5Z2XXHJcbiAgICAgICAgdGhpcy5fbm9Db21wbGV0ZSA9IHt9OyAgICAgICAgICAgIC8vIOS4iuasoeacquWujOaIkOeahOeDreabtOmhuVxyXG4gICAgfSwgXHJcblxyXG4gICAgLyoqIFxyXG4gICAgICog6I635Y+W5qih5Z2X54mI5pys5L+h5oGvIFxyXG4gICAgICogQHBhcmFtIGxvY2FsVmVyc2lvbkNiKGZ1bmN0aW9uKSAgICDmnKzlnLDniYjmnKzkv6Hmga/liqDovb3lrozmiJBcclxuICAgICAqIEBwYXJhbSByZW1vdGVWZXJzaW9uQ2IoZnVuY3Rpb24pICAg6L+c56iL54mI5pys5L+h5oGv5Yqg6L295a6M5oiQXHJcbiAgICAgKiBcclxuICAgICAqL1xyXG4gICAgZ2V0TW9kdWxlcyA6IGZ1bmN0aW9uKHJlbW90ZVZlcnNpb25DYil7XHJcbiAgICAgICAgaWYgKCFjYy5zeXMuaXNOYXRpdmUpIHtcclxuICAgICAgICAgICAgaWYgKHJlbW90ZVZlcnNpb25DYikgcmVtb3RlVmVyc2lvbkNiKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdhbWUuYXNzZXQuY2hlY2soZnVuY3Rpb24obW9kdWxlcywgdmVyc2lvbnMpe1xyXG4gICAgICAgICAgICAgdGhpcy5tb2R1bGVzICA9IG1vZHVsZXM7XHJcbiAgICAgICAgICAgICB0aGlzLnZlcnNpb25zID0gdmVyc2lvbnM7XHJcbiAgICAgICAgICAgICBpZiAocmVtb3RlVmVyc2lvbkNiKSByZW1vdGVWZXJzaW9uQ2IoKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiog6L295YWl5rKh5pu05paw5a6M55qE5qih5Z2X54q25oCBICovXHJcbiAgICBsb2FkIDogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoIWNjLnN5cy5pc05hdGl2ZSkgcmV0dXJuOyBcclxuICAgICAgICBcclxuICAgICAgICB2YXIgZGF0YSA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVwZGF0ZV9ub19jb21wbGV0ZVwiKTtcclxuICAgICAgICBpZiAoZGF0YSl7XHJcbiAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGpzb24ubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm9Db21wbGV0ZVtqc29uW2ldXSA9IGpzb25baV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwidXBkYXRlX25vX2NvbXBsZXRlXCIpOyBcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFByb2dyZXNzIDogZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgdmFyIGFtID0gdGhpcy5fdXBkYXRlc1tuYW1lXTtcclxuICAgICAgICByZXR1cm4gYW0uZ2V0UHJvZ3Jlc3MoKTtcclxuICAgIH0sXHJcbiAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJbmm7TmlrDmqKHlnZflkI1cclxuICAgICAqIEBwYXJhbSBuYW1lKHN0cmluZykgICAgICAgICAgICAgICAgIOaooeWdl+WQjVxyXG4gICAgICogQHBhcmFtIG9uQ2hlY2tDb21wbGV0ZShmdW5jdGlvbikgICAg5qOA5p+l54mI5pys5a6M5oiQXHJcbiAgICAgKiBAcGFyYW0gb25Db21wbGV0ZShmdW5jdGlvbikgICAgICAgICDmqKHlnZflkI1cclxuICAgICAqIEBwYXJhbSBvblByb2dyZXNzKGZ1bmN0aW9uKSAgICAgICAgIOabtOaWsOWujOaIkFxyXG4gICAgICogQHBhcmFtIG9uTmV3VmVyc2lvbihmdW5jdGlvbikgICAgICAg5bey5piv5pyA5paw54mI5pysXHJcbiAgICAgKi9cclxuICAgIGluaXQgOiBmdW5jdGlvbihuYW1lLCBvbkNoZWNrQ29tcGxldGUsIG9uQ29tcGxldGUsIG9uUHJvZ3Jlc3MsIG9uTmV3VmVyc2lvbikge1xyXG4gICAgICAgIGdhbWUuQXNzZXRDb25maWcuY29uY3VycmVudCA9IDI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGFtID0gbmV3IEFzc2V0c01hbmFnZXIoKTtcclxuICAgICAgICBhbS5uYW1lID0gbmFtZTtcclxuICAgICAgICBhbS5vbihnYW1lLkFzc2V0RXZlbnQuTkVXX1ZFUlNJT04gICAgICAgICAgICAgICAgICAgICAgICwgb25OZXdWZXJzaW9uKTsgXHJcbiAgICAgICAgYW0ub24oZ2FtZS5Bc3NldEV2ZW50LlBST0dSRVNTICAgICAgICAgICAgICAgICAgICAgICAgICAsIG9uUHJvZ3Jlc3MpOyBcclxuICAgICAgICBhbS5vbihnYW1lLkFzc2V0RXZlbnQuRkFJTEQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdGhpcy5fb25GYWlsZWQuYmluZCh0aGlzKSk7IFxyXG4gICAgICAgIGFtLm9uKGdhbWUuQXNzZXRFdmVudC5ORVdfVkVSU0lPTl9GT1VORCAgICAgICAgICAgICAgICAgLCB0aGlzLl9vbkNoZWNrQ29tcGxldGUuYmluZCh0aGlzKSk7IFxyXG4gICAgICAgIGFtLm9uKGdhbWUuQXNzZXRFdmVudC5TVUNDRVNTICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB0aGlzLl9vblVwZGF0ZUNvbXBsZXRlLmJpbmQodGhpcykpOyBcclxuICAgICAgICBhbS5vbihnYW1lLkFzc2V0RXZlbnQuUkVNT1RFX1ZFUlNJT05fTUFOSUZFU1RfTE9BRF9GQUlMRCwgdGhpcy5fb25OZXRFcnJvci5iaW5kKHRoaXMpKTsgXHJcbiAgICAgICAgYW0ub24oZ2FtZS5Bc3NldEV2ZW50LlJFTU9URV9QUk9KRUNUX01BTklGRVNUX0xPQURfRkFJTEQsIHRoaXMuX29uTmV0RXJyb3IuYmluZCh0aGlzKSk7IFxyXG4gICAgICAgIGFtLm9uKGdhbWUuQXNzZXRFdmVudC5OT19ORVRXT1JLICAgICAgICAgICAgICAgICAgICAgICAgLCB0aGlzLl9vbk5ldEVycm9yLmJpbmQodGhpcykpOyBcclxuICAgICAgICBhbS5vbkNoZWNrQ29tcGxldGUgPSBvbkNoZWNrQ29tcGxldGU7XHJcbiAgICAgICAgYW0ub25Db21wbGV0ZSAgICAgID0gb25Db21wbGV0ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlc1tuYW1lXSA9IGFtO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiog5piv5ZCm5rKh5a6M5oiQICovXHJcbiAgICBpc05vQ29tcGxldGUgOiBmdW5jdGlvbihuYW1lKXtcclxuICAgICAgICBpZiAodGhpcy5fbm9Db21wbGV0ZVtuYW1lXSA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qOA5p+l54mI5pys5piv5ZCm6ZyA6KaB5pu05pawXHJcbiAgICAgKi9cclxuICAgIGNoZWNrIDogZnVuY3Rpb24obmFtZSl7XHJcbiAgICAgICAgdmFyIGFtID0gdGhpcy5fdXBkYXRlc1tuYW1lXTtcclxuICAgICAgICBhbS5jaGVjayhuYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqIOaWree9keWQjuaBouWkjeeKtuaAgSAqL1xyXG4gICAgcmVjb3ZlcnkgOiBmdW5jdGlvbihuYW1lKXtcclxuICAgICAgICBpZiAodGhpcy5fY3VycmVudCAmJiB0aGlzLl9pc1VwZGF0aW5nID09IGZhbHNlKXtcclxuICAgICAgICAgICAgdGhpcy5faXNVcGRhdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQucmVjb3ZlcnkoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9vbkZhaWxlZCA6IGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICB0aGlzLl9pc1VwZGF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNoZWNrKGV2ZW50LnRhcmdldC5uYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgX29uTmV0RXJyb3IgOiBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgdGhpcy5faXNVcGRhdGluZyA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiog5qOA5p+l54mI5pys5a6M5oiQICovXHJcbiAgICBfb25DaGVja0NvbXBsZXRlIDogZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuX3F1ZXVlLnB1c2goZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDkv53lrZjkuIvlnKjkuIvovb3nmoTmqKHlnZfnirbmgIFcclxuICAgICAgICB0aGlzLl9zYXZlTm9Db21wbGV0ZU1vZHVsZSgpO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm9uQ2hlY2tDb21wbGV0ZSkgZXZlbnQudGFyZ2V0Lm9uQ2hlY2tDb21wbGV0ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faXNVcGRhdGluZyA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50LnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX29uVXBkYXRlQ29tcGxldGUgOiBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5vbkNvbXBsZXRlKSBldmVudC50YXJnZXQub25Db21wbGV0ZSgpOyAgXHJcblxyXG4gICAgICAgIC8vIOWIoOmZpOW9k+WJjeWujOaIkOeahOabtOaWsOWvueixoVxyXG4gICAgICAgIHRoaXMuX3F1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgdGhpcy5faXNVcGRhdGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyDkv53lrZjkuIvlnKjkuIvovb3nmoTmqKHlnZfnirbmgIFcclxuICAgICAgICB0aGlzLl9zYXZlTm9Db21wbGV0ZU1vZHVsZSgpO1xyXG5cclxuICAgICAgICAvLyDmm7TmlrDlr7nliJfkuK3kuIvkuIDkuKrmm7TmlrDlr7nosaFcclxuICAgICAgICBpZiAodGhpcy5fcXVldWUubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzVXBkYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fcXVldWVbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyDkv53lrZjkuIvlnKjkuIvovb3nmoTmqKHlnZfnirbmgIFcclxuICAgIF9zYXZlTm9Db21wbGV0ZU1vZHVsZSA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIG5hbWVzID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuX3F1ZXVlLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgbmFtZXMucHVzaCh0aGlzLl9xdWV1ZVtpXS5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidXBkYXRlX25vX2NvbXBsZXRlXCIsIEpTT04uc3RyaW5naWZ5KG5hbWVzKSk7IFxyXG4gICAgfVxyXG59KTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG4vL2h0dHDmtojmga/ov5Tlm55jb2RlXHJcbndpbmRvdy5IdHRwQ29kZSA9IGNjLkVudW0oe1xyXG4gICAgSFRUUF9TVUNDRVNTICAgIDogMCxcclxuICAgIEhUVFBfSlNPTl9FUlJPUiA6IDEsIFx0Ly/lj4LmlbDplJnor69cclxuICAgIEhUVFBfTVlTUUxfRVJST1IgOiAyLCAgIC8v5pWw5o2u5bqT6ZSZ6K+vXHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIGh0dHDmtojmga9cclxuICovXHJcbndpbmRvdy5IdHRwTWVzc2FnZSA9ICAgICAgIFwiSHR0cE1lc3NhZ2VcIjtcclxuXHJcbi8vaHR0cOa2iOaBr+exu+Wei1xyXG53aW5kb3cuSHR0cE1lc3NhZ2VUeXBlID0gY2MuRW51bSh7XHJcbiAgICBIVFRQX05PVElGSUNBVElPTiA6ICAgICBcImh0dHBfbm90aWZpY2F0aW9uXCIsXHJcbiAgICBOT1RJRllfSFRUUF9SU1AgOiAgICAgICBcIm5vdGlmeV9odHRwX3JzcFwiLFxyXG4gICAgTk9USUZZX0hUVFBfUlNQX0VSUk9SIDogXCJub3RpZnlfaHR0cF9yc3BfZXJyb3JcIixcclxuICAgIE5PVElGWV9IVFRQX1JTUF9JTUcgOiAgIFwibm90aWZ5X2h0dHBfcnNwX2ltZ1wiLFxyXG4gICAgSU1BR0VfTE9BREVSIDogICAgICAgICAgXCJpbWFnZV9sb2FkZXJcIixcclxufSk7XHJcblxyXG4vKipcclxuICogaHR0cOivt+axglxyXG4gKi9cclxud2luZG93Lkh0dHBUYWcgPSB7XHJcbiAgICBIVFRQX1RBR19HRVRfUk9VVEVSOiAgICAgICAgICAgICBcIkdldFJvdXRlclwiLFxyXG4gICAgSFRUUF9UQUdfTE9HSU4gOiAgICAgICAgICAgICAgICAgXCJsb2dpblwiLFxyXG4gICAgSFRUUF9UQUdfR0FNRUNPTkZJRyA6ICAgICAgICAgICAgXCJnYW1lY29uZmlnXCIsXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmnKzlnLDmtojmga8g5Li75ZG95LukXHJcbiAqL1xyXG53aW5kb3cuTG9jYWxNZXNzYWdlID0gICAgICAgXCJMb2NhbE1lc3NhZ2VcIjtcclxuXHJcblxyXG4vKipcclxuICog5pys5Zyw5raI5oGv57G75Z6LXHJcbiAqL1xyXG53aW5kb3cuTG9jYWxNc2dUeXBlID0ge1xyXG4gICAgR2V0Um9vbUNvbmZpZyA6ICAgICAgICAgXCJnZXRyb29tY29uZmlnXCIsICAgICAgICAvL+iOt+WPluaIv+mXtOmFjee9rlxyXG4gICAgR2V0QWxsUm9vbUNvbmZpZyA6ICAgICAgXCJhbGxSb29tQ29uZmlnXCIsICAgICAgICAvL+aJgOacieaIv+mXtOmFjee9ruaVsOaNrlxyXG4gICAgR2V0TG9naW5JbmZvIDogICAgICAgICAgXCJnZXRsb2dpbkluZm9cIiwgICAgICAgICAvL+eZu+W9lee7k+aenFxyXG4gICAgRW50ZXJHYW1lIDogICAgICAgICAgICAgXCJlbnRlckdhbWVcIiwgICAgICAgICAgICAvLyDor7fmsYLov5vlhaXmiL/pl7RcclxuICAgIEVudGVyUm9vbSA6ICAgICAgICAgICAgIFwiZW50ZXJSb29tXCIsICAgICAgICAgICAgLy8g6K+35rGC6L+b5YWl5ri45oiPXHJcbiAgICBTRU5ETVNHX1RJTUVPVVQgOiAgICAgICBcInNlbmRtc2dfdGltZW91dFwiLCAgICAgIC8v5Y+R6YCB5raI5oGv5Zue5Lyg6LaF5pe2XHJcbiAgICBTRU5ETVNHX0NMT1NFU0VSVkVSIDogICBcInNlbmRtc2dfY2xvc2VzZXJ2ZXJcIixcclxuICAgIFVQREFURV9VU0VSSU5GTyA6ICAgICAgIFwidXBkYXRlX3VzZXJJbmZvXCIsICAgICAgLy/mm7TmlrDnjqnlrrbkv6Hmga9cclxuICAgIFVQREFURV9PbmxpbmVOdW0gOiAgICAgIFwiVVBEQVRFX09ubGluZU51bVwiLCAgICAgLy/lnKjnur/kurrmlbBcclxuICAgIFVQREFURUhJU1RPUlkgOiAgICAgICAgIFwidXBkYXRlaGlzdG9yeVwiLFxyXG4gICAgVVBEQVRFQkFOS0VSTElTVDogICAgICAgXCJ1cGRhdGViYW5rZXJsaXN0XCIsXHJcbiAgICBHZXRQYXNzV29yZDogICAgICAgICAgICBcImdldFBhc3NXb3JkXCIsICAgICAgICAgIC8v5om+5Zue5a+G56CBXHJcbiAgICBHZXRHYW1lU3dpdGNoTm90aWNlIDogICBcIkdldEdhbWVTd2l0Y2hOb3RpY2VcIiwgIC8v6I635Y+W5ri45oiP5byA5YWz5L+h5oGv6YCa55+lXHJcbiAgICBHZXRHYW1lRG9tYWluTm90aWNlIDogICBcIkdldEdhbWVEb21haW5Ob3RpY2VcIiwgIC8v6I635Y+W5ri45oiP6Lev55Sx5L+h5oGv6YCa55+lXHJcbiAgICBVUERBVEVfTU9ORVk6ICAgICAgICAgICBcIlVwZGF0ZU1vbmV5XCIsXHJcbiAgICAvL+i1hOa6kOabtOaWsFxyXG4gICAgVVBEQVRFX09LX01FU1NBR0U6ICAgICAgXCJVUERBVEVfT0tfTUVTU0FHRVwiLCAgICAvL+ehruWumuabtOaWsOa2iOaBr1xyXG4gICAgVVBEQVRFX0NBTkNFTF9NRVNTQUdFOiAgXCJVUERBVEVfQ0FOQ0VMX01FU1NBR0VcIiwvL+WPlua2iOabtOaWsOa2iOaBr1xyXG4gICAgVVBEQVRFX01FU1NBR0U6ICAgICAgICAgXCJVUERBVEVfTUVTU0FHRVwiLCAgICAgICAvL+abtOaWsOa2iOaBr1xyXG4gICAgVVBEQVRFX0VORF9NRVNTQUdFOiAgICAgXCJVUERBVEVfRU5EX01FU1NBR0VcIiwgICAvL+abtOaWsOWujOaIkOa2iOaBr1xyXG4gICAgVVBEQVRFX05PVF9NRVNTQUdFOiAgICAgXCJVUERBVEVfTk9UX01FU1NBR0VcIiwgICAvL+S4jemcgOimgeabtOaWsOa2iOaBr1xyXG4gICAgVVBEQVRFX05FRURfTUVTU0FHRTogICAgXCJVUERBVEVfTkVFRF9NRVNTQUdFXCIsICAvL+mcgOimgeabtOaWsOa2iOaBr1xyXG59O1xyXG5cclxudmFyIEh0dHBDb25maWcgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbnN0YW5jZSA7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKXtcclxuICAgICAgICBpZiggaW5zdGFuY2UgPT09IHVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBpbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdCgpe1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vY2lkOiAxNDEgLFxyXG4gICAgICAgICAgICAvL3BpZCA6d2luZG93LlBST0RVQ1RfSUQsXHJcbiAgICAgICAgICAgIC8vY2N0eXBlIDogMiAsXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2UgOiBnZXRJbnN0YW5jZSxcclxuICAgIH1cclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSHR0cENvbmZpZztcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMTkuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIOaooeaLnyBDKysg5bel56iL5p625p6EXHJcbiAqXHJcbiAqIOS9v+eUqOeahFhNTEh0dHBSZXF1ZXN0ICDpnIDopoHop6PlhrPot6jln5/pl67pophcclxuICog5pyN5Yqh5Zmo5Yqg5LiKaGVhZFxyXG4gKlxyXG4gKiBqUXVlcnkg572R6aG15Y+v5LulICDkvYbmmK/kuI3og73kuIrmiYvmnLpcclxuICpcclxuICovXHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5cclxuZnVuY3Rpb24gSHR0cE1lc3NhZ2UgKClcclxue1xyXG4gICAgdGhpcy5pc1N1Y2NlZWQgPSBmYWxzZTtcclxuICAgIHRoaXMudGFnID0gXCJcIjtcclxuICAgIHRoaXMuZGF0YSA9IG51bGw7XHJcbiAgICB0aGlzLmNvZGUgPSAtMTtcclxuICAgIHRoaXMuZXJyb3IgPSBcIlwiO1xyXG4gICAgdGhpcy5mbGFnID0gLTEgO1xyXG59XHJcblxyXG5mdW5jdGlvbiBIdHRwTWVzc2FnZUdldERvbWFuKClcclxue1xyXG4gICAgSHR0cE1lc3NhZ2UuYXBwbHkodGhpcyxbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG4gICAgdGhpcy5zdHJVY2VudGVyVXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBIdHRwTWVzc2FnZUdldFdsYW5JUCgpXHJcbntcclxuICAgIEh0dHBNZXNzYWdlLmFwcGx5KHRoaXMsW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxufVxyXG5cclxuZnVuY3Rpb24gSW1hZ2VIb2xkZXIoKXtcclxuXHJcbiAgICB0aGlzLmltZyA9IG51bGw7XHJcbiAgICB0aGlzLnRhZyA9IFwiXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEh0dHBSZXF1ZXN0KHRhZyAsZGF0YSx1cmwsdHlwZSxjYWxsYmFjayl7XHJcbiAgICBjYy5sb2coXCJIdHRwTWFuYWdlci5IdHRwUmVxdWVzdCx1cmwgPSBcIiArIHVybCk7XHJcbiAgICB0aGlzLnRhZyA9IHRhZztcclxuICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgdGhpcy5jYWxsQmFjayA9IGNhbGxiYWNrO1xyXG5cclxuICAgIHZhciBzZWxmID0gdGhpcyA7XHJcblxyXG4gICAgdGhpcy5zZW5kUmVxdWVzdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzIDtcclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgO1xyXG4gICAgICAgIHZhciB1cmwgPSB0aGlzLnVybCA7XHJcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xyXG4gICAgICAgICAgICAgICAgaWYoKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCA0MDApKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0IDtcclxuICAgICAgICAgICAgICAgICAgICBpZihzZWxmLmNhbGxCYWNrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsQmFjayh0aGlzLHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWNjZXNzX2pzb25wQ2FsbGJhY2soSlNPTi5wYXJzZShyZXNwb25zZSkpIDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dCA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiSHR0cE1hbmFnZXIuc2VuZFJlcXVlc3QseGhyLnN0YXR1cyA9ICVkLHJlc3BvbnNlID0gJXNcIix4aHIuc3RhdHVzLHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyBIdHRwTWVzc2FnZSgpIDtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmRhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuaXNTdWNjZWVkID0gZmFsc2UgO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93Lkh0dHBNZXNzYWdlLHt0YWc6d2luZG93Lkh0dHBNZXNzYWdlVHlwZS5IVFRQX05PVElGSUNBVElPTixtc2c6bWVzc2FnZX0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkh0dHBNYW5hZ2VyLnNlbmRSZXF1ZXN0LHhoci5yZWFkeVN0YXRlID0gJWRcIix4aHIucmVhZHlTdGF0ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgeGhyLm9wZW4odHlwZSwgdXJsICsgdGFnLCB0cnVlKTtcclxuICAgICAgICAvLyB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLFwiKlwiKTtcclxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNPTlRFTlQtVFlQRVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcclxuICAgICAgICB2YXIgcmVzdWx0ICA9IHhoci5zZW5kKGRhdGEpIDtcclxuICAgICAgICBjYy5sb2coXCJIdHRwTWFuYWdlci5zZW5kUmVxdWVzdCxyZXN1bHQgPSBcIiArIHJlc3VsdCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0aGlzLmZhaWxfanNvbnBDYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgLy/miJDlip/lm57osINcclxuICAgIHRoaXMuc3VjY2Vzc19qc29ucENhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSlcclxuICAgIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IG5ldyBIdHRwTWVzc2FnZSgpIDtcclxuICAgICAgICBtZXNzYWdlLnRhZyA9IHRhZyA7XHJcbiAgICAgICAgbWVzc2FnZS5jb2RlID0gZGF0YS5jb2RlO1xyXG4gICAgICAgIGlmKGRhdGEuY29kZSA9PSB3aW5kb3cuSHR0cENvZGUuSFRUUF9TVUNDRVNTKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgbWVzc2FnZS5pc1N1Y2NlZWQgPSB0cnVlIDtcclxuICAgICAgICAgICAgY2MubG9nKFwiaHR0cCDor7fmsYLmiJDlip8gOiAlcyA9ICVzXCIsdGFnLEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWVzc2FnZS5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgbWVzc2FnZS5pc1N1Y2NlZWQgPSBmYWxzZSA7XHJcbiAgICAgICAgICAgIGNjLndhcm4oXCJodHRwIOivt+axgui/lOWbnuW8guW4uCDpnZ5zdWNjZXNzIGZsYWcgOiAlcyA9ICVzXCIsdGFnLEpTT04uc3RyaW5naWZ5KGRhdGEpICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93Lkh0dHBNZXNzYWdlLHt0YWc6d2luZG93Lkh0dHBNZXNzYWdlVHlwZS5IVFRQX05PVElGSUNBVElPTixtc2c6bWVzc2FnZX0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBIdHRwQ29udHJvbChjYWxsYmFjayl7XHJcbiAgICB0aGlzLmNhbGxCYWNrID0gY2FsbGJhY2s7XHJcbn1cclxuXHJcbi8v5Y+R6YCB5pmu6YCa5raI5oGvXHJcbkh0dHBDb250cm9sLnByb3RvdHlwZS5zZW5kQ29tbW9uUmVxdWVzdCA9IGZ1bmN0aW9uKHRhZywgZGF0YSwgdXJsKXtcclxuICAgIGlmKHVybCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICB1cmwgPSAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLndlYnVybCArIFwiL1wiO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZW5kRGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOy8vZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KHRlc3QpKTtcclxuICAgIG5ldyBIdHRwUmVxdWVzdCh0YWcsIHNlbmREYXRhLCB1cmwsIFwicG9zdFwiKS5zZW5kUmVxdWVzdCgpO1xyXG4gICAgY2MubG9nKFwi5Y+R6YCBaHR0cOivt+axgiA9ICVzICA6ICVzIDogJXNcIiwgdGFnLCBKU09OLnN0cmluZ2lmeShkYXRhKSxzZW5kRGF0YSk7XHJcbn1cclxuXHJcbkh0dHBDb250cm9sLnByb3RvdHlwZS5zZW5kQ29tbW9uUmVxdWVzdEdldCA9IGZ1bmN0aW9uKHRhZywgZGF0YSwgdXJsKXtcclxuICAgIGlmKHVybCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICB1cmwgPSAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLndlYnVybCArIFwiL1wiO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzZW5kRGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOy8vZW5jb2RlVVJJKEpTT04uc3RyaW5naWZ5KHRlc3QpKTtcclxuICAgIG5ldyBIdHRwUmVxdWVzdCh0YWcsIHNlbmREYXRhLCB1cmwsIFwiZ2V0XCIpLnNlbmRSZXF1ZXN0KCk7XHJcbiAgICBjYy5sb2coXCLlj5HpgIFodHRw6K+35rGCID0gJXMgIDogJXMgOiAlc1wiLCB0YWcsIEpTT04uc3RyaW5naWZ5KGRhdGEpLHNlbmREYXRhKTtcclxufVxyXG5cclxuLy/mlbDmja7liqDlr4ZcclxuSHR0cENvbnRyb2wucHJvdG90eXBlLmJhc2U2NEVuY29kZURhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgbGV0IGVuY29kZWREYXRhID0gQkFTRTY0LmVuY29kZXIoZGF0YSk7XHJcblxyXG4gICAgbGV0IG1kNXN0ciAgPSBoZXhfbWQ1KGVuY29kZWREYXRhKTtcclxuXHJcbiAgICBsZXQgZW5jb2RlZERhdGEyID0gQkFTRTY0LmVuY29kZXIoZW5jb2RlZERhdGEgKyBtZDVzdHIpO1xyXG4gICAgcmV0dXJuIGVuY29kZWREYXRhMjtcclxufVxyXG5cclxuXHJcbkh0dHBDb250cm9sLnByb3RvdHlwZS5iYXNlNjREZWNvZGVEYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGxldCBlbmNvZGVkRGF0YSA9IEJBU0U2NC5kZWNvZGVyKGRhdGEpO1xyXG5cclxuICAgIGlmKGVuY29kZWREYXRhLmxlbmd0aCA+IDMyKVxyXG4gICAge1xyXG4gICAgICAgIGVuY29kZWREYXRhID0gZW5jb2RlZERhdGEuc3Vic3RyKDAsIGVuY29kZWREYXRhLmxlbmd0aCAtIDMyKTtcclxuICAgICAgICBsZXQgZW5jb2RlZERhdGEyID0gQkFTRTY0LmRlY29kZXIoZW5jb2RlZERhdGEpO1xyXG4gICAgICAgIHJldHVybiBlbmNvZGVkRGF0YTI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufVxyXG5cclxuSHR0cENvbnRyb2wucHJvdG90eXBlLnNlbmRVcGxvYWRJbWcgPSBmdW5jdGlvbiAodGFnLHVybCxkYXRhKSB7XHJcbiAgICBpZih1cmwgPSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0gXCJodHRwOi8vbWFuYWdlLmFxZGRwLmNuL0hvbWUvUGljdXBsb2FkL3VwbG9hZFwiO1xyXG4gICAgfVxyXG4gICAgLy92YXIgc2VuZERhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsvL2VuY29kZVVSSShKU09OLnN0cmluZ2lmeSh0ZXN0KSk7XHJcbiAgICBuZXcgSHR0cFJlcXVlc3QodGFnLCBkYXRhLCB1cmwsIFwicG9zdFwiKS5zZW5kUmVxdWVzdCgpO1xyXG4gICAgY2MubG9nKFwi5Y+R6YCBaHR0cOivt+axgiA9ICVzICA6ICVzIFwiLCB0YWcsIGRhdGEpO1xyXG59XHJcblxyXG4vKipcclxuICog5Yib5bu6SHR0cE1hbmFnZXLmjqXlj6NcclxuICogQG1ldGhvZCBnZXRJbnN0YW5jZVxyXG4gKi9cclxudmFyIEh0dHBNYW5hZ2VyID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaW5zdGFuY2UgO1xyXG4gICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKXtcclxuICAgICAgICBpZiggaW5zdGFuY2UgPT09IHVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBIdHRwQ29udHJvbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2UgOiBnZXRJbnN0YW5jZSxcclxuICAgIH1cclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSHR0cE1hbmFnZXI7XHJcblxyXG5cclxuXHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzE5LlxyXG4gKi9cclxuXHJcbnZhciBIdHRwUGFja2V0ID0ge1xyXG5cclxuICAgIGVuY3J5cHREYXRhIDpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICBkYXRhLnNpZyA9IFwiNWRhNTY3ZTQ1NjZjOTM2MmY4M2YyNzMwZjc1YXNkYXNkZHNhZTEzYTlcIiA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIOaUr+S7mOaWueW8j1xyXG4gICAgYnVpbGRHZXRHYW1lU3dpdGNoIDogZnVuY3Rpb24oZGF0YSx0YWcpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHBhcmFtID0ge307XHJcbiAgICAgICAgcGFyYW0ubWV0aG9kID0gdGFnO1xyXG4gICAgICAgIHBhcmFtLnByb2R1Y3RpZCA9IHdpbmRvdy5QUk9EVUNUX0lEO1xyXG4gICAgICAgIGRhdGEucGFyYW0gPSBwYXJhbTtcclxuICAgICAgICB0aGlzLmVuY3J5cHREYXRhKGRhdGEpO1xyXG4gICAgfSxcclxufSA7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEh0dHBQYWNrZXQ7IiwiLyoqIFxyXG4gKiDmuLjmiI/mnI3liqHlmajnrqHnkIZcclxuICogQXV0aG9yICAgICAgOiBkb25nZ2FuZ1xyXG4gKiBDcmVhdGUgVGltZSA6IDIwMTYuOC4xOVxyXG4gKi9cclxudmFyIEh0dHBSZXF1ZXN0ID0ge307XHJcbnZhciB1cmxzICAgICAgICA9IHt9OyAgICAgICAgICAgLy8g5b2T5YmN6K+35rGC5Zyw5Z2A6ZuG5ZCIXHJcblxyXG5nYW1lLkh0dHBFdmVudCA9IHt9O1xyXG5nYW1lLkh0dHBFdmVudC5OT19ORVRXT1JLICAgID0gXCJodHRwX3JlcXVlc3Rfbm9fbmV0d29ya1wiOyAgICAgICAgICAgICAgIC8vIOaWree9kVxyXG5nYW1lLkh0dHBFdmVudC5VTktOT1dOX0VSUk9SID0gXCJodHRwX3JlcXVlc3RfdW5rbm93bl9lcnJvclwiOyAgICAgICAgICAgIC8vIOacquefpemUmeivr1xyXG5cclxuZ2FtZS5odHRwID0gbW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEhUVFAgR0VU6K+35rGCXHJcbiAgICAgKiDkvovvvJpcclxuICAgICAqIFxyXG4gICAgICogR2V0XHJcbiAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2h0dHBiaW4ub3JnL2dldD9zaG93X2Vudj0xXCI7XHJcbiAgICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgIMKgwqDCoMKgwqDCoMKgXHJcbiAgICAgICAgICAgIGNjLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgY2MubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2FtZS5IdHRwUmVxdWVzdC5nZXQodXJsLCBjb21wbGV0ZSwgZXJyb3IpO1xyXG4gICAgKi9cclxuICAgIGdldCA6IGZ1bmN0aW9uKHVybCwgY29tcGxldGVDYWxsYmFjaywgZXJyb3JDYWxsYmFjayl7XHJcbiAgICAgICAgZ2FtZS5odHRwLnNlbmRSZXF1ZXN0KHVybCwgbnVsbCwgZmFsc2UsIGNvbXBsZXRlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spXHJcbiAgICB9LFxyXG5cclxuICAgIGdldEJ5QXJyYXlidWZmZXIgOiBmdW5jdGlvbih1cmwsIGNvbXBsZXRlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spe1xyXG4gICAgICAgIGdhbWUuaHR0cC5zZW5kUmVxdWVzdCh1cmwsIG51bGwsIGZhbHNlLCBjb21wbGV0ZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCAnYXJyYXlidWZmZXInKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0V2l0aFBhcmFtcyA6IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBjb21wbGV0ZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXtcclxuICAgICAgICBnYW1lLmh0dHAuc2VuZFJlcXVlc3QodXJsLCBwYXJhbXMsIGZhbHNlLCBjb21wbGV0ZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRXaXRoUGFyYW1zQnlBcnJheWJ1ZmZlciA6IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayl7XHJcbiAgICAgICAgZ2FtZS5odHRwLnNlbmRSZXF1ZXN0KHVybCwgcGFyYW1zLCBmYWxzZSwgY29tcGxldGVDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgJ2FycmF5YnVmZmVyJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEhUVFAgUE9TVOivt+axglxyXG4gICAgICog5L6L77yaXHJcbiAgICAgKiAgICAgIFxyXG4gICAgICogUG9zdFxyXG4gICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly8xOTIuMTY4LjEuMTg4L2FwaS9Mb2dpbk5ldy9Mb2dpbjFcIjtcclxuICAgICAgICB2YXIgcGFyYW0gPSAne1wiTG9naW5Db2RlXCI6XCJkb25nZ2FuZ19kZXZcIixcIlBhc3N3b3JkXCI6XCJlMTBhZGMzOTQ5YmE1OWFiYmU1NmUwNTdmMjBmODgzZVwifSdcclxuICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgwqDCoMKgwqDCoMKgwqDCoHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIMKgwqDCoMKgwqDCoMKgwqB2YXIgZGF0YSA9IEpTT04ucGFyc2UoanNvbkRhdGEuRGF0YSk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhkYXRhLklkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICBjYy5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnYW1lLkh0dHBSZXF1ZXN0LnBvc3QodXJsLCBwYXJhbSwgY29tcGxldGUsIGVycm9yKTtcclxuICAgICovXHJcbiAgICBwb3N0IDogZnVuY3Rpb24odXJsLCBwYXJhbXMsIGNvbXBsZXRlQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spe1xyXG4gICAgICAgIGdhbWUuaHR0cC5zZW5kUmVxdWVzdCh1cmwsIHBhcmFtcywgdHJ1ZSwgY29tcGxldGVDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5a2X56ym5Liy5b2i5byP55qE5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIF9nZXRQYXJhbVN0cmluZyA6IGZ1bmN0aW9uKHBhcmFtcyl7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgZm9yKHZhciBuYW1lIGluIHBhcmFtcyl7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSBcInswfT17MX0mXCIuZm9ybWF0KG5hbWUsIHBhcmFtc1tuYW1lXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0LnN1YnN0cigwLCByZXN1bHQubGVuZ3RoIC0gMSk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBIdHRw6K+35rGCIFxyXG4gICAgICogQHBhcmFtIHVybChzdHJpbmcpICAgICAgICAgICAgICAg6K+35rGC5Zyw5Z2AXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1zKEpTT04pICAgICAgICAgICAgICDor7fmsYLlj4LmlbBcclxuICAgICAqIEBwYXJhbSBpc1Bvc3QoYm9vbGVuKSAgICAgICAgICAgIOaYr+WQpuS4ulBPU1TmlrnlvI9cclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayhmdW5jdGlvbikgICAgICAgIOivt+axguaIkOWKn+Wbnuiwg1xyXG4gICAgICogQHBhcmFtIGVycm9yQ2FsbGJhY2soZnVuY3Rpb24pICAg6K+35rGC5aSx6LSl5Zue6LCDXHJcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2VUeXBlKHN0cmluZykgICAgICDlk43lupTnsbvlnotcclxuICAgICAqL1xyXG4gICAgc2VuZFJlcXVlc3QgOiBmdW5jdGlvbih1cmwsIHBhcmFtcywgaXNQb3N0LCBjb21wbGV0ZUNhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCByZXNwb25zZVR5cGUpe1xyXG4gICAgICAgIGlmICh1cmwgPT0gbnVsbCB8fCB1cmwgPT0gJycpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIG5ld1VybDtcclxuICAgICAgICBpZiAocGFyYW1zKSB7XHJcbiAgICAgICAgICAgIG5ld1VybCA9IHVybCArIFwiP1wiICsgdGhpcy5fZ2V0UGFyYW1TdHJpbmcocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld1VybCA9IHVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh1cmxzW25ld1VybF0gIT0gbnVsbCl7XHJcbiAgICAgICAgICAgIGNjLndhcm4oXCLlnLDlnYDjgJB7MH3jgJHlt7LmraPlnKjor7fmsYLkuK3vvIzkuI3og73ph43lpI3or7fmsYJcIi5mb3JtYXQodXJsKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOmYsumHjeWkjeivt+axguWKn+iDvVxyXG4gICAgICAgIHVybHNbbmV3VXJsXSA9IHRydWU7XHJcblxyXG4gICAgICAgIHZhciB4aHIgPSBjYy5sb2FkZXIuZ2V0WE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICBpZiAoaXNQb3N0KXtcclxuICAgICAgICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBuZXdVcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XHJcblxyXG4gICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB1cmxzW25ld1VybF07XHJcbiAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrID09IG51bGwpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDEgJiYgeGhyLnN0YXR1cyA9PSAwKXtcclxuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZ2FtZS5IdHRwRXZlbnQuTk9fTkVUV09SSyk7ICAgICAgICAgICAgICAgLy8g5pat572RXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZ2FtZS5IdHRwRXZlbnQuVU5LTk9XTl9FUlJPUik7ICAgICAgICAgICAgLy8g5pyq55+l6ZSZ6K+vXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPSA0KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgdXJsc1tuZXdVcmxdO1xyXG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgaWYoY29tcGxldGVDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZVR5cGUgPT0gJ2FycmF5YnVmZmVyJykgeyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IHJlc3BvbnNlVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYWxsYmFjayh4aHIucmVzcG9uc2UpOyAgICAgICAgICAgICAgICAgLy8g5Yqg6L296Z2e5paH5pys5qC85byPXHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVDYWxsYmFjayh4aHIucmVzcG9uc2VUZXh0KTsgICAgICAgICAgICAgLy8g5Yqg6L295paH5pys5qC85byPXHJcbiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZihlcnJvckNhbGxiYWNrKSBlcnJvckNhbGxiYWNrKHhoci5zdGF0dXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcyA9PSBudWxsIHx8IHBhcmFtcyA9PSBcIlwiKXtcclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzkuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpXHJcbi8qXHJcbipcclxuKiB0eXBlIENMVUJfUkVRX0pPSU5fQ0xVQl9UIHN0cnVjdCB7XHJcbiBDbHViSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVRX0pPSU5fVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFUV9KT0lOX1Qgc3RydWN0IHtcclxuIFVpZCAgICAgdWludDMyIGBqc29uOlwidWlkXCJgXHJcbiBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gU2V4ICAgICBpbnQgICAgYGpzb246XCJzZXhcImBcclxuIH0qL1xyXG5mdW5jdGlvbiBKb2luQ2x1YlJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFUV9KT0lOX0NMVUJfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAoY2x1YmlkLG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkpvaW5DbHViUmVxUGFja2V0LnNlbmRcIik7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgY2x1YmlkIDogY2x1YmlkLFxyXG4gICAgICAgICAgICBwYXJhbSA6IG1zZyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBKb2luQ2x1YlJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC85LlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG4vKlxyXG4qIHR5cGUgQ0xVQl9SRVNQX0pPSU5fQ0xVQl9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFBhcmFtIFBBUkFNX1JFU1BfSk9JTl9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVTUF9KT0lOX1Qgc3RydWN0IHtcclxuIENsdWJJZCAgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiBVaWQgICAgIHVpbnQzMiBganNvbjpcInVpZFwiYFxyXG4gaXNhbGxvd1xyXG4gTmFtZSAgICBzdHJpbmcgYGpzb246XCJuYW1lXCJgXHJcbiBIZWFkVXJsIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuIFNleCAgICAgaW50ICAgIGBqc29uOlwic2V4XCJgXHJcbiBSb2xlICAgIHVpbnQ4ICBganNvbjpcInJvbGVcImBcclxuIH1cclxuKiAqL1xyXG5mdW5jdGlvbiBKb2luQ2x1YlJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LkNMVUJfUkVTUF9KT0lOX0NMVUJfQ01EX0lEO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5wYXJhbSA9IG1zZy5wYXJhbTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIEpvaW5DbHViUmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8yNi5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKVxyXG5cclxuZnVuY3Rpb24gTGVhdmVHYW1lUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9MRUFWRV9HQU1FX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkxlYXZlR2FtZVJlcVBhY2tldC5zZW5kXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIExlYXZlR2FtZVJlcVBhY2tldDtcclxuXHJcbi8qXHJcbiAvL+emu+W8gOa4uOaIj1xyXG4gdHlwZSBVU19SRVFfTEVWRUxfR0FNRV9UIHN0cnVjdCB7XHJcbiBHYW1lSGVhZFxyXG4gfVxyXG5cclxuIHR5cGUgVVNfUkVTUF9MRVZFTF9HQU1FX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZFxyXG4gUGFyYW0gc3RyaW5nIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuXHJcbiAvL+ivt+axguWdkOS4i1xyXG4gY29uc3QgKFxyXG4gRV9ET1dOX1RZUEUgPSAxIC8v5Z2Q5LiLXHJcbiBFX1JJU0VfVFlQRSA9IDIgLy/nq5notbdcclxuIClcclxuXHJcbiB0eXBlIFVTX1JFUV9TSVRfRE9XTl9UIHN0cnVjdCB7XHJcbiBHYW1lSGVhZFxyXG4gU2VhdElkIGludCBganNvbjpcInNlYXRpZFwiYFxyXG4gU3RhdHVzIGludCBganNvbjpcInN0YXR1c1wiYCAvLzEuIOWdkOS4i++8jDLvvJrnq5notbdcclxuIH1cclxuXHJcbiB0eXBlIFVTX1JFU1BfU0lUX0RPV05fVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBzdHJpbmcgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG5cclxuIC8v6K+35rGC5pC65bim6YeR5biBXHJcbiB0eXBlIFVTX1JFUV9DQVJSWV9DT0lOX1Qgc3RydWN0IHtcclxuIEdhbWVIZWFkXHJcbiBDb2luIGludDY0IGBqc29uOlwiY29pblwiYFxyXG4gfVxyXG5cclxuIC8v5aaC5p6cdWlkID09IGNhcnJ5dWlkLCDmmK/oh6rlt7FcclxuIHR5cGUgVVNfUkVTUF9DQVJSWV9DT0lOX1Qgc3RydWN0IHtcclxuIEpzb25IZWFkXHJcbiBSZXNwSGVhZCAgICAgICAgIC8v5ZCM5oSP5Z2Q552A77yM5ouS57ud56uZ6LW3XHJcbiBDYXJyeVVpZCAgdWludDMyIGBqc29uOlwiY2Fycnl1aWRcImBcclxuIENhcnJ5Q29pbiBpbnQ2NCAgYGpzb246XCJjYXJyeWNvaW5cImBcclxuIH1cclxuIOWRqOWtpuWjqyBDKysgIDIwOjM1OjAxXHJcblxyXG4gLy/moYzkuLvnoa7lrprnjqnlrrbmmK/lkKblhaXlnZBcclxuIGNvbnN0IChcclxuIEVfQUxMT1dfVE9fU0lUICA9IDFcclxuIEVfUkVKRUNUX1RPX1NJVCA9IDJcclxuIClcclxuXHJcbiB0eXBlIFVTX1JFUV9PV05FUl9DT05GSVJNX1Qgc3RydWN0IHtcclxuIEdhbWVIZWFkXHJcbiBQbGF5ZXJVaWQgdWludDMyIGBqc29uOlwicGxheWVydWlkXCJgXHJcbiBSZXN1bHQgICAgaW50ICAgIGBqc29uOlwicmVzdWx0XCJgXHJcbiB9XHJcblxyXG4gdHlwZSBVU19SRVNQX09XTkVSX0NPTkZJUk1fVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiB9XHJcbipcclxuKiAqLyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzI2LlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIExlYXZlR2FtZVJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfTEVBVkVfR0FNRV9DTURfSUQ7XHJcblxyXG4gICAgdGhpcy5wYXJhbSA9IFwiXCI7XHJcbiAgICB0aGlzLnRhYmxlaWQgPSAwO1xyXG4gICAgdGhpcy5sZWF2ZXVpZCA9IDA7XHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgLy97XCJjbWRcIjo2NTUzNjA0LFwic2VxXCI6NCxcInVpZFwiOjEwMDQyLFwiY29kZVwiOjAsXCJkZXNjXCI6XCLmiafooYzmiJDlip9cIn1cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTGVhdmVHYW1lUmVzcFBhY2tldDsiLCIvKipcclxuICpcclxuICog44CA44CA44CA4pSP4pST44CA44CA44CA4pSP4pSTXHJcbiAqIOOAgOOAgOKUj+KUm+KUu+KUgeKUgeKUgeKUm+KUu+KUk1xyXG4gKiDjgIDjgIDilIPjgIDjgIDjgIDjgIDjgIDjgIAg4pSDXHJcbiAqIOOAgOOAgOKUg+OAgOOAgOOAgOKUgeOAgOOAgOOAgOKUg1xyXG4gKiDjgIDjgIDilIPjgIDilLPilJvjgIDilJfilLPjgIAgIOKUg1xyXG4gKiDjgIDjgIDilIPjgIDjgIDjgIDjgIDjgIDjgIAg4pSDXHJcbiAqIOOAgOOAgOKUg+OAgOOAgOOAgOKUu+OAgOOAgOOAgOKUg1xyXG4gKiDjgIDjgIDilIPjgIDjgIDjgIDjgIDjgIDjgIAg4pSDXHJcbiAqIOOAgOOAgOKUl+KUgeKUk+OAgOOAgOOAgOKUj+KUgeKUm0NvZGUgaXMgZmFyIGF3YXkgZnJvbSBidWcgd2l0aCB0aGUgYW5pbWFsIHByb3RlY3RpbmdcclxuICog44CA44CA44CA44CA4pSD44CA44CA44CA4pSDICAgIOelnuWFveS/neS9kSzku6PnoIHml6BidWdcclxuICog44CA44CA44CA44CA4pSD44CA44CA44CA4pSDXHJcbiAqIOOAgOOAgOOAgOOAgOKUg+OAgOOAgOOAgOKUl+KUgeKUgeKUgeKUk1xyXG4gKiDjgIDjgIDjgIDjgIDilIPjgIDjgIDjgIDjgIDjgIAg4pSj4pSTXHJcbiAqIOOAgOOAgOOAgOOAgOKUg+OAgOOAgOOAgOOAgCDilI/ilJtcclxuICog44CA44CA44CA44CA4pSX4pST4pST4pSP4pSB4pSz4pST4pSP4pSbXHJcbiAqIOOAgOOAgOOAgOOAgOOAgOKUg+KUq+KUq+OAgOKUg+KUq+KUq1xyXG4gKiDjgIDjgIDjgIDjgIDjgIDilJfilLvilJvjgIDilJfilLvilJtcclxuICpcclxuICovXHJcbnZhciBCYXNlU2NlbmUgPSByZXF1aXJlKFwiQmFzZVNjZW5lXCIpO1xyXG52YXIgSHR0cE1hbmFnZXIgPSByZXF1aXJlKCdIdHRwTWFuYWdlcicpO1xyXG52YXIgU29ja2V0TWFuYWdlciA9IHJlcXVpcmUoJ1NvY2tldE1hbmFnZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG52YXIgQWxlcnRWaWV3ICA9IHJlcXVpcmUoJ0FsZXJ0VmlldycpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBQbGF0Zm9ybSA9IHJlcXVpcmUoJ1BsYXRmb3JtJyk7XHJcbnZhciBXZUNoYXRBcGkgPSByZXF1aXJlKCdXZUNoYXRBcGknKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZUNhbGxPQyA9IHJlcXVpcmUoJ0dhbWVDYWxsT0MnKTtcclxuXHJcblxyXG5mdW5jdGlvbiBHZXRRdWVyeVN0cmluZyhuYW1lKVxyXG57XHJcbiAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChcIihefCYpXCIrIG5hbWUgK1wiPShbXiZdKikoJnwkKVwiKTtcclxuICAgIHZhciByID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkubWF0Y2gocmVnKTtcclxuICAgIGlmKHIhPW51bGwpcmV0dXJuICB1bmVzY2FwZShyWzJdKTsgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlU2NlbmUsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIExhYmVsVmVyc2lvbiAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBHYW1lTm90aWNlICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgTG9nb1Nwcml0ZSAgICAgICA6IGNjLlNwcml0ZSxcclxuICAgICAgICB3ZUNoYXRCdXR0b24gICAgIDogY2MuQnV0dG9uLFxyXG4gICAgICAgIGxvY2FsQnV0dG9uICAgICAgOiBjYy5CdXR0b24sXHJcbiAgICAgICAgSG90VXBkYXRlVGlwcyAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEhvdFVwZGF0ZVByb2dyZXNzOiBjYy5Qcm9ncmVzc0JhcixcclxuICAgICAgICBfU3RvcmFnZVBhdGggICAgIDogXCJcIixcclxuICAgICAgICBfTWFuaWZlc3RVcmwgICAgIDogXCJyZXMvcHJvamVjdC5tYW5pZmVzdFwiLFxyXG4gICAgICAgIF9mYWlsQ291bnQgICAgICAgOiAwLFxyXG4gICAgICAgIF9tYXhGYWlsQ291bnQgICAgOiAyLCAgICAgICAgICAgICAgLy/mnIDlpKfplJnor6/ph43or5XmrKHmlbBcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIGNjLmxvZyhcIkxvYWRpbmdTY2VuZS5vbkxvYWQsdmVyc2lvbnMgPSBcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS52ZXJzaW9uKTtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudmVyc2lvbiA9IEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5nZXRBcHBWZXJzaW9uQ29kZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIkxvYWRpbmdTY2VuZS5vbkxvYWROZXcsdmVyc2lvbnMgPSBcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS52ZXJzaW9uKTtcclxuXHRcclxuICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHRoaXMub25HYW1lQmFjayA9IHRydWU7XHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJMb2dpbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnNlbmRHZXRSb3V0ZXIoKTtcclxuICAgICAgICBjYy5nYW1lLmFkZFBlcnNpc3RSb290Tm9kZSh0aGlzLkdhbWVOb3RpY2Uubm9kZSk7XHJcbiAgICAgICAgdGhpcy53ZWJEZXZpY2VJRCA9IHRoaXMuZ2V0TG9jYWxJbmZvQnlXZWJVcmwoKTtcclxuICAgICAgICB3aW5kb3cuVGVzdEFjY291bnQgPSAgdGhpcy53ZWJEZXZpY2VJRDtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZU5vdGljZSA9IG51bGw7XHJcbiAgICAgICAgVXRpbFRvb2wuZ2V0Tm93Rm9ybWF0RGF0ZSgpO1xyXG4gICAgICAgIE11c2ljTWdyLmluaXRBdWRpbygpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1JlcygpO1xyXG4gICAgICAgIHRoaXMuX2ZhaWxDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5MYWJlbFZlcnNpb24uc3RyaW5nID0gXCJWZXJzaW9uOlwiICsgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLmdldEFwcFZlcnNpb24oKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DaGVja1N0YXR1czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYkNsaWVudEhvdFVwZGF0ZSB8fCAhY2Muc3lzLmlzTmF0aXZlXHJcbiAgICAgICAgfHwgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1cyA9PSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzVHlwZS5WRVJTSU9OX1RZUEVfQVVESVQpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwib25Ib3RVcGRhdGUgYkNsaWVudEhvdFVwZGF0ZSA9IFwiLCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYkNsaWVudEhvdFVwZGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ290b0dhbWUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL3RoaXMub25Ib3RVcGRhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5nb3RvR2FtZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZ290b0dhbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYkNsaWVudEhvdFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5Ib3RVcGRhdGVQcm9ncmVzcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTG9naW5CdG4oKTtcclxuICAgICAgICAvL3RoaXMuc2VuZEdldFJvdXRlcigpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkhvdFVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghY2Muc3lzLmlzTmF0aXZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ290b0dhbWUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLkhvdFVwZGF0ZVByb2dyZXNzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9TdG9yYWdlUGF0aCA9ICgoanNiLmZpbGVVdGlscyA/IGpzYi5maWxlVXRpbHMuZ2V0V3JpdGFibGVQYXRoKCkgOiAnLycpICsgXCJ0ZW1wXCIpO1xyXG4gICAgICAgIGNjLmxvZyhcIlN0b3JhZ2UgcGF0aCBmb3IgcmVtb3RlIGFzc2V0IDpcIiAsIHRoaXMuX1N0b3JhZ2VQYXRoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgeW91ciBvd24gdmVyc2lvbiBjb21wYXJlIGhhbmRsZXIsIHZlcnNpb25BIGFuZCBCIGlzIHZlcnNpb25zIGluIHN0cmluZ1xyXG4gICAgICAgIC8vIGlmIHRoZSByZXR1cm4gdmFsdWUgZ3JlYXRlciB0aGFuIDAsIHZlcnNpb25BIGlzIGdyZWF0ZXIgdGhhbiBCLFxyXG4gICAgICAgIC8vIGlmIHRoZSByZXR1cm4gdmFsdWUgZXF1YWxzIDAsIHZlcnNpb25BIGVxdWFscyB0byBCLFxyXG4gICAgICAgIC8vIGlmIHRoZSByZXR1cm4gdmFsdWUgc21hbGxlciB0aGFuIDAsIHZlcnNpb25BIGlzIHNtYWxsZXIgdGhhbiBCLlxyXG4gICAgICAgIHZhciB2ZXJzaW9uQ29tcGFyZUhhbmRsZSAgPSBmdW5jdGlvbiAodmVyc2lvbkEsIHZlcnNpb25CKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkpzIEN1c3RvbSBWZXJzaW9uIENvbXBhcmU6IHZlcnNpb25BIGlzIFwiICsgdmVyc2lvbkEsIFwiIHZlcnNpb25CIGlzXCIgKyB2ZXJzaW9uQik7XHJcbiAgICAgICAgICAgIHZhciB2QSA9IHZlcnNpb25BLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgIHZhciB2QiA9IHZlcnNpb25CLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdkEubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZhciBhID0gcGFyc2VJbnQodkFbaV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGIgPSBwYXJzZUludCh2QltpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA9PSBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhIC0gYjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodkIubGVuZ3RoID4gdkEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX2FtID0gbmV3IGpzYi5Bc3NldHNNYW5hZ2VyKHRoaXMuX01hbmlmZXN0VXJsLCB0aGlzLl9TdG9yYWdlUGF0aCwgdmVyc2lvbkNvbXBhcmVIYW5kbGUpO1xyXG4gICAgICAgIHRoaXMuX2FtLnJldGFpbigpO1xyXG4gICAgICAgIGlmICghdGhpcy5fYW0uZ2V0TG9jYWxNYW5pZmVzdCgpLmlzTG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kTG9nKFwi5Yqg6L295pys5Zyw5paH5Lu25aSx6LSlXCIpO1xyXG4gICAgICAgICAgICBjYy5sb2coXCLmnKrmib7liLDmnKzlnLBtYW5pZmVzdOaWh+S7tlwiKTtcclxuICAgICAgICAgICAgdGhpcy5nb3RvR2FtZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fYW0uc2V0VmVyaWZ5Q2FsbGJhY2soZnVuY3Rpb24gKHBhdGgsIGFzc2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb21wcmVzc2VkICAgPSBhc3NldC5jb21wcmVzc2VkO1xyXG4gICAgICAgICAgICB2YXIgZXhwZWN0ZWRNZDUgID0gYXNzZXQubWQ1O1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVQYXRoID0gYXNzZXQucGF0aDtcclxuICAgICAgICAgICAgdmFyIHNpemUgICAgICAgICA9IGFzc2V0LnNpemU7XHJcbiAgICAgICAgICAgIC8vc2VsZi5zZW5kTG9nKFwiVmVyaWZpY2F0aW9uIHBhc3NlZDpcIiArIHJlbGF0aXZlUGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGlmIChjYy5zeXMub3MgPT09IGNjLnN5cy5PU19BTkRST0lEKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FtLnNldE1heENvbmN1cnJlbnRUYXNrKDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5Ib3RVcGRhdGVQcm9ncmVzcy5wcm9ncmVzcyA9IDA7XHJcblxyXG4gICAgICAgIHZhciByZXNWZXJzaW9uID0gdGhpcy5fYW0uZ2V0TG9jYWxNYW5pZmVzdCgpLmdldFZlcnNpb24oKTtcclxuICAgICAgICB2YXIgcGFja2FnZVVybCA9IHRoaXMuX2FtLmdldExvY2FsTWFuaWZlc3QoKS5nZXRQYWNrYWdlVXJsKCk7XHJcbiAgICAgICAgdGhpcy5zZW5kTG9nKFwi5o+Q56S6OiDniYjmnKw6XCIgKyByZXNWZXJzaW9uICsgXCIsIOi3r+W+hDpcIiArIHBhY2thZ2VVcmwpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5fdXBkYXRlTGlzdGVuZXIgPSBuZXcganNiLkV2ZW50TGlzdGVuZXJBc3NldHNNYW5hZ2VyKHRoaXMuX2FtLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwiaG90VXBkYXRlQ2FsbGJhY2sgY29kZTogXCIgKyBldmVudC5nZXRFdmVudENvZGUoKSk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmdldEV2ZW50Q29kZSgpKXtcclxuICAgICAgICAgICAgICAgIGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5FUlJPUl9OT19MT0NBTF9NQU5JRkVTVDpcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJFUlJPUl9OT19MT0NBTF9NQU5JRkVTVC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kTG9nKFwi6ZSZ6K+vOiDmnKrmib7liLDmnKzlnLBtYW5pZmVzdOaWh+S7tiwg6Lez6L+H5pu05pawXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0dhbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfRE9XTkxPQURfTUFOSUZFU1Q6XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiRVJST1JfRE9XTkxPQURfTUFOSUZFU1QuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZExvZyhcIumUmeivrzog5LiL6L29bWFuaWZlc3Tmlofku7blpLHotKUsIOi3s+i/h+abtOaWsFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmdvdG9HYW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBqc2IuRXZlbnRBc3NldHNNYW5hZ2VyLkVSUk9SX1BBUlNFX01BTklGRVNUOlxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkVSUk9SX1BBUlNFX01BTklGRVNULlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRMb2coXCLplJnor686IOino+aekG1hbmlmZXN05paH5Lu25aSx6LSlLCDot7Pov4fmm7TmlrBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5nb3RvR2FtZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UganNiLkV2ZW50QXNzZXRzTWFuYWdlci5BTFJFQURZX1VQX1RPX0RBVEU6XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiQUxSRUFEWV9VUF9UT19EQVRFLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRMb2coXCLmj5DnpLrvvJrlt7Lnu4/mmK/mnIDmlrDniYjmnKwuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0dhbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuTkVXX1ZFUlNJT05fRk9VTkQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiTkVXX1ZFUlNJT05fRk9VTkQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZExvZyhcIuaPkOekuu+8muWPkeeOsOaWsOeJiOacrC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5Ib3RVcGRhdGVQcm9ncmVzcy5wcm9ncmVzcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBqc2IuRXZlbnRBc3NldHNNYW5hZ2VyLlVQREFURV9QUk9HUkVTU0lPTjpcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJnZXRQZXJjZW50PVwiICsgZXZlbnQuZ2V0UGVyY2VudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gcGFyc2VGbG9hdChwYXJzZUludChldmVudC5nZXRQZXJjZW50KCkpLzEwMC4wKTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJudW09XCIgKyBudW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuSG90VXBkYXRlVGlwcy5zdHJpbmcgPSBcIuabtOaWsOi/m+W6pu+8mlwiICsgZXZlbnQuZ2V0UGVyY2VudCgpLnRvRml4ZWQoMikgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLkhvdFVwZGF0ZVByb2dyZXNzLnByb2dyZXNzID0gbnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcInByb2dyZXNzPVwiLCBzZWxmLkhvdFVwZGF0ZVByb2dyZXNzLnByb2dyZXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmdldE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuabtOaWsOaWh+S7tjogXCIsIG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZExvZyhcIuabtOaWsOaWh+S7tjogXCIgKyBtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuVVBEQVRFX0ZJTklTSEVEOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIlVQREFURV9GSU5JU0hFRC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kTG9nKFwi5o+Q56S677ya5pu05paw5a6M5oiQLlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoR2FtZUNhbGxPQy5nZXRJbnN0YW5jZS5nZXRBcHBWZXJzaW9uQ29kZSgpID4gMTEwMClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQuc2V0UG9zaXRpdmVCdXR0b24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLmV4aXRBcHAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgXCLnoa7lrppcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0LnNob3coXCLmm7TmlrDlrozmiJAs6K+36YeN5ZCvQVBQ77yBXCIsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQcmVwZW5kIHRoZSBtYW5pZmVzdCdzIHNlYXJjaCBwYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIHNlYXJjaFBhdGhzID0ganNiLmZpbGVVdGlscy5nZXRTZWFyY2hQYXRocygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBuZXdQYXRocyA9IHNlbGYuX2FtLmdldExvY2FsTWFuaWZlc3QoKS5nZXRTZWFyY2hQYXRocygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG5ld1BhdGhzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQoc2VhcmNoUGF0aHMsIG5ld1BhdGhzKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAvLyBUaGlzIHZhbHVlIHdpbGwgYmUgcmV0cmlldmVkIGFuZCBhcHBlbmRlZCB0byB0aGUgZGVmYXVsdCBzZWFyY2ggcGF0aCBkdXJpbmcgZ2FtZSBzdGFydHVwLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vIHBsZWFzZSByZWZlciB0byBzYW1wbGVzL2pzLXRlc3RzL21haW4uanMgZm9yIGRldGFpbGVkIHVzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC8vICEhISBSZS1hZGQgdGhlIHNlYXJjaCBwYXRocyBpbiBtYWluLmpzIGlzIHZlcnkgaW1wb3J0YW50LCBvdGhlcndpc2UsIG5ldyBzY3JpcHRzIHdvbid0IHRha2UgZWZmZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnSG90VXBkYXRlU2VhcmNoUGF0aHMnLCBKU09OLnN0cmluZ2lmeShzZWFyY2hQYXRocykpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpzYi5maWxlVXRpbHMuc2V0U2VhcmNoUGF0aHMoc2VhcmNoUGF0aHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0dhbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3NlbGYuZ290b0hhbGwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuVVBEQVRFX0ZBSUxFRDpcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJVUERBVEVfRkFJTEVEOiBcIiArIGV2ZW50LmdldE1lc3NhZ2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kTG9nKFwi6ZSZ6K+vOlwiICsgZXZlbnQuZ2V0TWVzc2FnZSgpICsgXCIsIGZhaWxDb3VudD1cIiArIHRoaXMuX2ZhaWxDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZmFpbENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuX2ZhaWxDb3VudCA8IHNlbGYuX21heEZhaWxDb3VudClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VuZExvZyhcImVyciwgZG93bmxvYWRGYWlsZWRBc3NldHNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FtLmRvd25sb2FkRmFpbGVkQXNzZXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcImVyciwgUmVhY2ggbWF4aW11bSBmYWlsIGNvdW50LCBleGl0IHVwZGF0ZSBwcm9jZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRMb2coXCLplJnor686IOabtOaWsOWksei0pei2hei/hzLmrKHvvIzot7Pov4fmm7TmlrBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZhaWxDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ290b0dhbWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBqc2IuRXZlbnRBc3NldHNNYW5hZ2VyLkVSUk9SX1VQREFUSU5HOlxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkVSUk9SX1VQREFUSU5HOiBcIiArIGV2ZW50LmdldEFzc2V0SWQoKSArIFwiLCBcIiArIGV2ZW50LmdldE1lc3NhZ2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kTG9nKFwi6ZSZ6K+vLCDljYfnuqflh7rplJk6IFwiICsgZXZlbnQuZ2V0QXNzZXRJZCgpICsgXCIsIFwiICsgZXZlbnQuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIGpzYi5FdmVudEFzc2V0c01hbmFnZXIuRVJST1JfREVDT01QUkVTUzpcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJFUlJPUl9ERUNPTVBSRVNTOiBcIiArIGV2ZW50LmdldE1lc3NhZ2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kTG9nKFwi6ZSZ6K+vLCDop6PljovlpLHotKU6IFwiICsgZXZlbnQuZ2V0TWVzc2FnZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNjLmV2ZW50TWFuYWdlci5hZGRMaXN0ZW5lcih0aGlzLl91cGRhdGVMaXN0ZW5lciwgMSk7XHJcbiAgICAgICAgdGhpcy5fYW0udXBkYXRlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRMb2c6IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgICAgICBjYy5sb2codGV4dCk7XHJcbiAgICAgICAgdGhpcy5Ib3RVcGRhdGVUaXBzLnN0cmluZyA9IHRleHQ7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvYWRpbmdSZXMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXNEaXIoXCJwcmVmYWJzL0xvYWRpbmdWaWV3L0xvYWRpbmdWaWV3XCIpO1xyXG4gICAgICAgIGNjLmxvYWRlci5sb2FkUmVzRGlyKFwicHJlZmFicy9hbGVydFZpZXdcIik7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXNEaXIoXCJwcmVmYWJzL3RvYXN0Vmlld1wiKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxiYWNrQnRuTG9naW4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiTG9hZGluZ1ZpZXcuY2FsbGJhY2tCdG5Mb2dpblwiKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5DdXN0b21Mb2dpblR5cGUgPSBOdW1iZXIoQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICBpZiAoQ3VzdG9tRXZlbnREYXRhID09IDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL0dhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5TdGFydFJlY29yZCg2MDAwKTtcclxuICAgICAgICAgICAgTG9hZGluZ1ZpZXcuc2hvdyhcIuato+WcqOeZu+mZhi4uLlwiKTtcclxuICAgICAgICAgICAgY2MubG9nKFwiTG9hZGluZ1ZpZXcuY2FsbGJhY2tCdG5Mb2dpbiB3ZWl4aW5cIik7XHJcbiAgICAgICAgICAgIFdlQ2hhdEFwaS5nZXRJbnN0YW5jZSgpLnNlbmRXZUNoYXRMb2dpbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvL0dhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5TdG9wUmVjb3JkaW5nKCk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5zZW5kTG9naW4oTnVtYmVyKEN1c3RvbUV2ZW50RGF0YSkpO1xyXG4gICAgICAgICAgICBMb2FkaW5nVmlldy5zaG93KFwi5q2j5Zyo55m76ZmGLi4uXCIpO1xyXG4gICAgICAgICAgICBTb2NrZXRNYW5hZ2VyLmdldEluc3RhbmNlKCkuc3RhcnRTb2NrZXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uSHR0cFJlc3BvbnNlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKCdMb2FkaW5nVmlldy5vbkh0dHBSZXNwb25zZScpO1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICBpZihldmVudCA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYy5lcnJvcihcIkxvYWRpbmdWaWV3Lm9uSHR0cFJlc3BvbnNlLGV2ZW50ID0gdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoZXZlbnQuaXNTdWNjZWVkKXtcclxuICAgICAgICAgICAgbGV0IHRhZyA9IGV2ZW50LnRhZztcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBldmVudC5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYodGFnID09IEh0dHBUYWcuSFRUUF9UQUdfR0VUX1JPVVRFUilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy97XCJhY2Nlc3NcIjpcIi9HZXRSb3V0ZXJcIixcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJwaWRcIjoxLFwidmVyXCI6MTAwMCxcclxuICAgICAgICAgICAgICAgIC8vIFwibG9naW50eXBlXCI6MyxcImFyZWFcIjoxLFwidXJsXCI6XCJodHRwOi8vMTIwLjI2LjgxLjE1MTo4MDgwXCIsXCJzdGF0dXNcIjoxLFxyXG4gICAgICAgICAgICAgICAgLy8gXCJiYWNrdXJsXCI6XCJodHRwOi8vMTIwLjI2LjgxLjE1MTo4MDgwXCJ9XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGUgPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubG9naW50eXBlID0gTnVtYmVyKGRhdGEubG9naW50eXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1cyAgICAgICAgPSBkYXRhLnN0YXR1cztcclxuICAgICAgICAgICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkud2ViU29ja2V0VXJsICAgICA9IGRhdGEudXJsICsgXCIvZ2FtZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5iYWNrV2ViU29ja2V0VXJsID0gZGF0YS5iYWNrdXJsICsgXCIvZ2FtZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkxvYWRpbmdWaWV3Lm9uSHR0cFJlc3BvbnNlLCBsb2dpbnR5cGU9IFwiLCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubG9naW50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiB3ZWJTb2NrZXRVcmw9XCIsIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS53ZWJTb2NrZXRVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiIGJhY2tXZWJTb2NrZXRVcmw9XCIsICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYmFja1dlYlNvY2tldFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoZWNrU3RhdHVzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoZXZlbnQuZGF0YSA9PSBudWxsKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZW5kR2V0Um91dGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9LFwi6YeN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhbGVydC5zZXROZWdhdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9LFwi5Y+W5raIXCIpXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNob3cgPSBcIue9kee7nOmTvuaOpemUmeivr++8jOivt+ajgOafpeaCqOeahOe9kee7nCFcIjtcclxuICAgICAgICAgICAgICAgIGFsZXJ0LnNob3coc2hvdywgQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DQU5DTEUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlTG9naW5CdG4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5sb2dpbnR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQnV0dG9uLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5sb2dpbnR5cGUgPT0gMikge1xyXG4gICAgICAgICAgICB0aGlzLndlQ2hhdEJ1dHRvbi5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubG9naW50eXBlID09IDMpIHtcclxuICAgICAgICAgICAgdGhpcy53ZUNoYXRCdXR0b24ubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQnV0dG9uLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIkxvYWRpbmdTY2VuZS5vbk1lc3NhZ2VcIik7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0xPR0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25Mb2dpbk1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfSU5fR0FNRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJMb2FkaW5nU2NlbmUgbm90aWZ5SW5HYW1lLCBtc2dcIiArIG1zZy5nYW1lc3ZjaWQgKyBcIix0YWJsZWlkXCIgKyBtc2cudGFibGVpZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobXNnLmNvZGUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnJvb21MZXZlbCA9IG1zZy5nYW1lbGV2ZWxcclxuICAgICAgICAgICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkID0gbXNnLmdhbWVzdmNpZDtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCAgID0gbXNnLnRhYmxlaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmJSZWxvYWRJbkdhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvZ2luTXNnIDogZnVuY3Rpb24gKG1zZylcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJMb2FkaW5nU2NlbmUub25Mb2dpbk1zZyxtc2cgPSBcIiArIEpTT04uc3RyaW5naWZ5KG1zZykpO1xyXG4gICAgICAgIExvYWRpbmdWaWV3LmRpc21pc3MoKTtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPT09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYlJlbG9hZEluR2FtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkID0gMDtcclxuICAgICAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnRhYmxlaWQgICA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZ290b0hhbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGFsZXJ0RXhpdCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgYWxlcnRFeGl0LnNob3dPbmUobXNnLmRlc2MsIEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGdldERldmljZUlkIDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIkxvYWRpbmdTY2VuZS5nZXREZXZpY2VJZCx3ZWJEZXZpY2VJRCA9IFwiICsgdGhpcy53ZWJEZXZpY2VJRCk7XHJcbiAgICAgICAgaWYodGhpcy53ZWJEZXZpY2VJRCA9PSBcIlwiIHx8IHRoaXMud2ViRGV2aWNlSUQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBsYXRmb3JtLmdldEluc3RhbmNlKCkuZ2VuZXJhdGVVVUlEKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndlYkRldmljZUlEIDtcclxuICAgIH0sXHJcblxyXG4gICAgc2VuZEdldFJvdXRlciA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHBpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5wcm9kdWN0aWQsXHJcbiAgICAgICAgICAgIHZlciA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS52ZXJzaW9uLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIEh0dHBNYW5hZ2VyLmdldEluc3RhbmNlKCkuc2VuZENvbW1vblJlcXVlc3QoSHR0cFRhZy5IVFRQX1RBR19HRVRfUk9VVEVSLFxyXG4gICAgICAgICAgICBkYXRhLCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucm91dGVyVXJsKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ290b0hhbGwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiTG9hZGluZ1NjZW5lLmdvdG9IYWxsXCIpO1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnSGFsbFNjZW5lJywgdGhpcy5wb3BVcE5vdGljZSk7XHJcbiAgICAgICAgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLlNldEFwcEluZm8oXCJCdWxsZmlnaHRfXCIgKyBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKTtcclxuICAgIH0sXHJcblxyXG4gICAgcG9wVXBOb3RpY2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwiTG9hZGluZ1NjZW5lLnBvcFVwTm90aWNlXCIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRMb2NhbEluZm9CeVdlYlVybDpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/mtY/op4jlmahcclxuICAgICAgICBpZighY2Muc3lzLmlzTmF0aXZlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGRldmljZWlkID0gR2V0UXVlcnlTdHJpbmcoXCJ1aWRcIik7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIkxvYWRpbmdTY2VuZS5nZXRMb2NhbEluZm9CeVdlYlVybCxkZXZpY2VpZCA9IFwiICsgZGV2aWNlaWQpO1xyXG4gICAgICAgICAgICBpZihkZXZpY2VpZCAhPW51bGwgJiYgZGV2aWNlaWQudG9TdHJpbmcoKS5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiBkZXZpY2VpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ2V0TG9jYWxQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5nZXRTY3JpcHQoJ2h0dHA6Ly9pbnQuZHBvb2wuc2luYS5jb20uY24vaXBsb29rdXAvaXBsb29rdXAucGhwP2Zvcm1hdD1qcycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgYWxlcnQocmVtb3RlX2lwX2luZm8uY291bnRyeSk7Ly/lm73lrrZcclxuICAgICAgICAgICAgYWxlcnQocmVtb3RlX2lwX2luZm8ucHJvdmluY2UpOy8v55yB5Lu9XHJcbiAgICAgICAgICAgIGFsZXJ0KHJlbW90ZV9pcF9pbmZvLmNpdHkpOy8v5Z+O5biCXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3VwZGF0ZUxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIGNjLmV2ZW50TWFuYWdlci5yZW1vdmVMaXN0ZW5lcih0aGlzLl91cGRhdGVMaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX2FtICYmICFjYy5zeXMuRU5BQkxFX0dDX0ZPUl9OQVRJVkVfT0JKRUNUUykge1xyXG4gICAgICAgICAgICB0aGlzLl9hbS5yZWxlYXNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICB9XHJcblxyXG59KTtcclxuIiwidmFyIFRvYXN0VmlldyA9IHJlcXVpcmUoXCJUb2FzdFZpZXdcIik7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcblxyXG5cclxudmFyIExvYWRpbmdWaWV3ID0ge307XHJcblxyXG5Mb2FkaW5nVmlldy5jdXJWaWV3ID0gbnVsbCA7XHJcbkxvYWRpbmdWaWV3LnRpcFRleHQgPSBudWxsIDtcclxuTG9hZGluZ1ZpZXcudGltZW91dFRhZyA9IDA7Ly/otoXml7blm57osIPlj6Xmn4RcclxuXHJcbi8v6aKE6Ziy5pyq5Yqg6L295a6M5oiQIOiwg+eUqOWFs+mXrVxyXG5Mb2FkaW5nVmlldy5jYWxsQ2xvc2UgPSBmYWxzZSA7XHJcbkxvYWRpbmdWaWV3LmNhbGxMb2FkUHJlZmFicyA9IGZhbHNlIDtcclxuTG9hZGluZ1ZpZXcubV90aXBzID0gXCJcIiA7XHJcbkxvYWRpbmdWaWV3Lm1fYWxsb3dDTG9zZSA9IGZhbHNlIDtcclxuXHJcblxyXG5Mb2FkaW5nVmlldy5zaG93ID0gZnVuY3Rpb24gKHRpcHMscGFyZW50LCBhbGxvd0Nsb3NlKSB7XHJcbiAgICBjYy5sb2coXCJMb2FkaW5nVmlldy5zaG93LHRpcHMgPSBcIiArIHRpcHMpO1xyXG4gICAgaWYodGlwcyA9PSBcIlwiKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzIDtcclxuICAgIHRoaXMubV90aXBzID0gdGlwcztcclxuICAgIHRoaXMubV9hbGxvd0NMb3NlID0gYWxsb3dDbG9zZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhbGxvd0Nsb3NlIDtcclxuXHJcbiAgICBpZighc2VsZi5jYWxsTG9hZFByZWZhYnMpe1xyXG4gICAgICAgIHRoaXMuY2FsbExvYWRQcmVmYWJzID0gdHJ1ZSA7XHJcbiAgICAgICAgd2luZG93LmxvYWRQcmVmYWJzKFwicHJlZmFicy9Mb2FkaW5nVmlldy9Mb2FkaW5nVmlld1wiLCBmdW5jdGlvbiAobmV3Tm9kZSkge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGxMb2FkUHJlZmFicyA9IGZhbHNlIDtcclxuICAgICAgICAgICAgc2VsZi5jdXJWaWV3ID0gbmV3Tm9kZSA7XHJcbiAgICAgICAgICAgIGlmKHNlbGYuY2FsbENsb3NlKXtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGlzbWlzcygpIDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJMb2FkaW5nVmlldy5zaG93LDExMVwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYudXBkYXRlVmlldyhuZXdOb2RlLHNlbGYubV90aXBzLHBhcmVudCAsc2VsZi5tX2FsbG93Q0xvc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxwYXJlbnQpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgc2VsZi5jYWxsQ2xvc2UgPSBmYWxzZSA7XHJcbiAgICB9XHJcbn1cclxuXHJcbkxvYWRpbmdWaWV3LnVwZGF0ZVZpZXcgPSBmdW5jdGlvbiAobm9kZSwgdGlwcyxwYXJlbnQgLGFsbG93Q2xvc2UpIHtcclxuXHJcbiAgICBjYy5sb2coXCJMb2FkaW5nVmlldy51cGRhdGVWaWV3XCIpO1xyXG4gICAgbm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCxmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKSA7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRpcFRleHQgPSBjYy5maW5kKFwiQmcvTGFiZWxUZXh0XCIsbm9kZSkuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKSA7XHJcbiAgICBpZih0aXBzKXtcclxuICAgICAgICB0aGlzLnNldFRleHQodGlwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdmFyIGNsb2RlQnQgPSBjYy5maW5kKFwiY2xvc2VcIixub2RlKTtcclxuICAgIC8vXHJcbiAgICAvLyB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgLy8gY2xvZGVCdC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCxmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgc2VsZi5kaXNtaXNzKCkgO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy/lsY/olL3lhbPpl60gWVVORyBBRERcclxuICAgIHZhciBzaG93Q2xvc2UgPSBmYWxzZTsvL2FsbG93Q2xvc2UgPT09IHVuZGVmaW5lZD8gdHJ1ZSA6IGZhbHNlIDtcclxuXHJcbiAgICAvL2Nsb2RlQnQuYWN0aXZlID0gc2hvd0Nsb3NlO1xyXG4gICAgLy9cclxuICAgIC8vIHZhciBhbmlMb2FkaW5nID0gY2MuZmluZChcImFuaVwiLG5vZGUpLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pIDtcclxuICAgIC8vXHJcbiAgICAvLyB2YXIgYW5pbVN0YXRlID0gYW5pTG9hZGluZy5wbGF5KFwibG9hZGluZ2FuaVwiKTtcclxuICAgIC8vIGFuaW1TdGF0ZS53cmFwZU1vZGUgPSBjYy5XcmFwTW9kZS5Mb29wO1xyXG4gICAgLy8gYW5pbVN0YXRlLnJlcGVhdENvdW50ID0gSW5maW5pdHk7XHJcbn1cclxuXHJcbkxvYWRpbmdWaWV3LnNldFRpbWVPdXQgPSBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgY2MubG9nKFwiTG9hZGluZ1ZpZXcuc2V0VGltZU91dCx0aW1lID0gXCIgKyB0aW1lKTtcclxuICAgIGlmKHRpbWUgJiYgdGltZSA+MCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzIDtcclxuICAgICAgICB0aGlzLnRpbWVvdXRUYWcgPSB3aW5kb3cuc2V0VGltZW91dChcInJlcXVpcmUoJ0xvYWRpbmdWaWV3Jykub25UaW1lT3V0KClcIix0aW1lKjEwMDApO1xyXG4gICAgICAgIC8vIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHsvL2NvbXBvbmVudOe7hOS7tuS9v+eUqFxyXG4gICAgICAgIC8vICAgICBzZWxmLm9uVGltZU91dCgpO1xyXG4gICAgICAgIC8vIH0sdGltZSkgO1xyXG4gICAgfVxyXG59XHJcblxyXG5Mb2FkaW5nVmlldy5vblRpbWVPdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjYy5sb2coXCJMb2FkaW5nVmlldy5vblRpbWVPdXRcIik7XHJcbiAgICAvLyB0aGlzLnVuc2NoZWR1bGUodGhpcy5vblRpbWVPdXQpO1xyXG4gICAgVG9hc3RWaWV3LnNob3coXCLnvZHnu5zor7fmsYLotoXml7ZcIik7XHJcbiAgICB0aGlzLmRpc21pc3MoKTtcclxufSAsXHJcblxyXG5Mb2FkaW5nVmlldy5zZXRUZXh0ID0gZnVuY3Rpb24gKHRpcHMpIHtcclxuICAgIGNjLmxvZyhcIkxvYWRpbmdWaWV3LnNldFRleHQsdGlwcyA9IFwiICsgdGlwcyk7XHJcbiAgICBpZih0aGlzLnRpcFRleHQpe1xyXG4gICAgICAgIHRoaXMudGlwVGV4dC5zdHJpbmcgPSB0aXBzIDtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHRoaXMuc2hvdyh0aXBzKSA7XHJcbiAgICB9XHJcbn0sXHJcblxyXG5Mb2FkaW5nVmlldy5kaXNtaXNzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY2MubG9nKFwiTG9hZGluZ1ZpZXcuZGlzbWlzc1wiKTtcclxuICAgIGlmKHRoaXMudGltZW91dFRhZylcclxuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFRhZyk7XHJcbiAgICBcclxuICAgIGlmKHRoaXMuY3VyVmlldyl7XHJcbiAgICAgICAgdGhpcy5jdXJWaWV3LnJlbW92ZUZyb21QYXJlbnQodHJ1ZSkgO1xyXG4gICAgICAgIHRoaXMuY3VyVmlldyA9IG51bGwgO1xyXG4gICAgICAgIHRoaXMudGlwVGV4dCA9IG51bGwgO1xyXG4gICAgICAgIHRoaXMuY2FsbENsb3NlID0gZmFsc2UgO1xyXG4gICAgICAgIHRoaXMuY2FsbExvYWRQcmVmYWJzID0gZmFsc2UgO1xyXG4gICAgICAgIHRoaXMubV90aXBzICA9IFwiXCIgO1xyXG4gICAgICAgIHRoaXMubV9hbGxvd0NMb3NlID0gZmFsc2UgO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIC8vIGlmKCB0aGlzLmNhbGxMb2FkUHJlZmFicyl7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY2FsbENsb3NlID0gdHJ1ZSA7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMb2FkaW5nVmlldyA7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXEgPSByZXF1aXJlKFwiTWVzc2FnZVJlcVwiKTtcclxudmFyIEdhbWVQbGF5ZXIgPSByZXF1aXJlKCdHYW1lUGxheWVyJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG52YXIgUGxhdGZvcm0gPSByZXF1aXJlKCdQbGF0Zm9ybScpO1xyXG5cclxuZnVuY3Rpb24gTG9naW5SZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX0xPR0lOX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgICAgIGxvZ2ludHlwZSA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5DdXN0b21Mb2dpblR5cGUsXHJcbiAgICAgICAgICAgIHVuaW9uaWQ6ICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51bmlvbmlkLFxyXG4gICAgICAgICAgICBvcGVuaWQ6ICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkub3BlbmlkLFxyXG4gICAgICAgICAgICBuaWNrbmFtZTogICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkubmFtZSxcclxuICAgICAgICAgICAgaGVhZHVybDogICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLmhlYWR1cmwsXHJcbiAgICAgICAgICAgIHNleDogICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZXgsXHJcbiAgICAgICAgICAgIC8vIGRldmljZWlkOiAgIFwiOTI3QTc5RjctMkNFQS00NzExLUIzQTgtNTZENTJDQjkzODdGXCIsXHJcbiAgICAgICAgICAgIGRldmljZWlkICA6IFBsYXRmb3JtLmdldEluc3RhbmNlKCkuZ2VuZXJhdGVVVUlEKCksXHJcbiAgICAgICAgICAgIHByb2R1Y3RpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5wcm9kdWN0aWQsXHJcbiAgICAgICAgICAgIHBsYXRmb3JtICA6IFBsYXRmb3JtLmdldEluc3RhbmNlKCkuZ2V0UGxhdGZvcm1UeXBlKCksXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTG9naW5SZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcbnZhciBHYW1lU3lzdGVtICA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG52YXIgR2FtZVBsYXllciAgPSByZXF1aXJlKFwiR2FtZVBsYXllclwiKTtcclxuXHJcbmZ1bmN0aW9uIExvZ2luUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG5cclxuICAgIC8ve1wiY21kXCI6NjU1NDAsXCJzZXFcIjoxNSxcInVpZFwiOjExMjk4LFwiY29kZVwiOjAsXCJkZXNjXCI6XCJcIixcIm5pY2tuYW1lXCI6XCLmuLjlrqIxMTI5OFwiLFxyXG4gICAgLy8gXCJoZWFkdXJsXCI6XCJcIixcInNleFwiOjIsXCJnb2xkXCI6MTAwMDAsXCJkaWFtb25kXCI6MTAwMDAsXCJ1c2Vya2V5XCI6XCJiNzkxOTVhZGVlMzliZTA1ZDUxODlmN2ZjMTE0OWUwOFwiLFxyXG4gICAgLy8gXCJjbGllbnR1cmxcIjpcIlwiLFwiZmlsZXVybFwiOlwiaHR0cDovL21hbmFnZS5hcWRkcC5jbi9cIixcIndlaXhpbmNzXCI6XCJuaXV5b3VxdWFuMSxuaXV5b3VxdWFuMlwiLFxyXG4gICAgLy8gXCJwYXl1cmxcIjpcImh0dHA6Ly9iYWlkdS5jb20vXCIsXCJub3RpY2VcIjp7XCJ0aXRsZVwiOlwiaGVsbG9cIixcImRvY1wiOlwi5qyi6L+O5aSn5a625p2l5Yiw54mb5Y+L5ZyIXCIsXHJcbiAgICAvLyBcIndyaXRlclwiOlwieHh4XCIsXCJ0aW1lXCI6MTQ5MTQ3Njg3NSxcInBvcHVwXCI6MCxcImlzbWFpbnRhaW5cIjowfX1cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0xPR0lOX0NNRF9JRDtcclxuICAgIHRoaXMubmlja25hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5oZWFkdXJsICA9IFwiXCI7XHJcbiAgICB0aGlzLnNleCAgICAgID0gMDtcclxuICAgIHRoaXMuZ29sZCAgICAgPSAwO1xyXG4gICAgdGhpcy5kaWFtb25kICA9IDA7XHJcbiAgICB0aGlzLnVzZXJrZXkgID0gXCJcIjtcclxuICAgIHRoaXMubm90aWNlID0ge1xyXG4gICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgIGRvYzogICBcIlwiLFxyXG4gICAgICAgIHdyaXRlcjogXCJcIixcclxuICAgICAgICBwb3B1cCA6IDAsXHJcbiAgICAgICAgaXNtYWludGFpbjogMCxcclxuICAgICAgICB0aW1lOjAsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5jbGllbnR1cmwgPSBcIlwiO1xyXG4gICAgdGhpcy5maWxldXJsICAgPSBcIlwiO1xyXG4gICAgdGhpcy53ZWl4aW5jcyAgPSBcIlwiO1xyXG4gICAgdGhpcy5wYXl1cmwgICAgPSBcIlwiO1xyXG5cclxuICAgIC8vIOaOpeaUtueahOaVsOaNrlxyXG4gICAgLy8ge1wiY21kXCI6NjU1NDAsXCJzZXFcIjoxNSxcInVpZFwiOjExMjk4LFwiY29kZVwiOjAsXCJkZXNjXCI6XCJcIixcIm5pY2tuYW1lXCI6XCLmuLjlrqIxMTI5OFwiLFxyXG4gICAgLy8gXCJoZWFkdXJsXCI6XCJcIixcInNleFwiOjIsXCJnb2xkXCI6MTAwMDAsXCJkaWFtb25kXCI6MTAwMDAsXCJ1c2Vya2V5XCI6XCJiNzkxOTVhZGVlMzliZTA1ZDUxODlmN2ZjMTE0OWUwOFwiLFxyXG4gICAgLy8gXCJjbGllbnR1cmxcIjpcIlwiLFwiZmlsZXVybFwiOlwiaHR0cDovL21hbmFnZS5hcWRkcC5jbi9cIixcIndlaXhpbmNzXCI6XCJuaXV5b3VxdWFuMSxuaXV5b3VxdWFuMlwiLFxyXG4gICAgLy8gXCJwYXl1cmxcIjpcImh0dHA6Ly9iYWlkdS5jb20vXCIsXCJub3RpY2VcIjp7XCJ0aXRsZVwiOlwiaGVsbG9cIixcImRvY1wiOlwi5qyi6L+O5aSn5a625p2l5Yiw54mb5Y+L5ZyIXCIsXHJcbiAgICAvLyBcIndyaXRlclwiOlwieHh4XCIsXCJ0aW1lXCI6MTQ5MTQ3Njg3NSxcInBvcHVwXCI6MCxcImlzbWFpbnRhaW5cIjowfX1cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuc2VxICA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQgICAgID0gbXNnLnVpZDtcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkubmFtZSAgICA9IG1zZy5uaWNrbmFtZTtcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuaGVhZHVybCA9IG1zZy5oZWFkdXJsO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZXggICAgID0gbXNnLnNleDtcclxuICAgICAgICBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuZ29sZCAgICA9IG1zZy5nb2xkO1xyXG4gICAgICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5kaWFtb25kID0gbXNnLmRpYW1vbmQ7XHJcbiAgICAgICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVzZXJrZXkgPSBtc2cudXNlcmtleTtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubm90aWNlLnRpdGxlICAgICAgPSBtc2cubm90aWNlLnRpdGxlO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UuZG9jICAgICAgICA9IG1zZy5ub3RpY2UuZG9jO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2Uud3JpdGVyICAgICA9IG1zZy5ub3RpY2Uud3JpdGVyO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UucG9wdXAgICAgICA9IG1zZy5ub3RpY2UucG9wdXA7XHJcbiAgICAgICAgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLm5vdGljZS5pc21haW50YWluID0gbXNnLm5vdGljZS5pc21haW50YWluO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UudGltZSAgICAgICA9IG1zZy5ub3RpY2UudGltZTtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuY2xpZW50dXJsICAgICAgICAgPSBtc2cuY2xpZW50dXJsO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5maWxldXJsICA9IG1zZy5maWxldXJsO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS53ZWl4aW5jcyA9IG1zZy53ZWl4aW5jcztcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucGF5dXJsICAgPSBtc2cucGF5dXJsO1xyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5yZWZlcnJhbENvZGUgPSBtc2cucmVmZXJyYWxpZDtcclxuICAgICAgICBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubGVkbGlzdCA9IG1zZy5sZWRsaXN0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5hZXNLZXkgICA9IEFFUy51dGlscy51dGY4LnRvQnl0ZXMobXNnLnVzZXJrZXkpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTG9naW5SZXNwUGFja2V0OyIsInZhciBCYXNlUG9wID0gcmVxdWlyZShcIkJhc2VQb3BcIik7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ29udGVudCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFRpbWUgOiBjYy5MYWJlbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50ICwgQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgY2MubG9nKFwiTWVzc2FnZUNlbGxEZXRhaWxWaWV3LmNhbGxiYWNrQnRuLEN1c3RvbUV2ZW50RGF0YSA9IFwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiTWVzc2FnZUNlbGxEZXRhaWxWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoYnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0Q29udGVudCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLkNvbnRlbnQuc3RyaW5nID0gIEJBU0U2NC5kZWNvZGVyKG1zZy5tc2cpO1xyXG4gICAgICAgIGlmKG1zZy50eXBlID09IDEpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlIDogbXNnLnR5cGUsXHJcbiAgICAgICAgICAgIG1zZ2lkIDogbXNnLm1zZ2lkLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfU0VUX01TR19SRUFEX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgIH1cclxufSk7XHJcbiIsInZhciBVdGlsVG9vbCA9IHJlcXVpcmUoJ1V0aWxUb29sJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgICAgICBUaW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgQ29udGVudCA6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcblxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tc2cgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBzZXRNZXNzYWdlQ2VsbE1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLm1zZyA9IG1zZztcclxuICAgICAgICB0aGlzLkNvbnRlbnQuc3RyaW5nID0gQkFTRTY0LmRlY29kZXIobXNnLm1zZyk7XHJcbiAgICAgICAgdGhpcy5UaW1lLnN0cmluZyA9IFV0aWxUb29sLmdldEZvcm1hdERhdGFEZXRhaWwobXNnLnRpbWUpO1xyXG4gICAgICAgIGNjLmxvZygnTWVzc2FnZUNlbGwuc2V0TWVzc2FnZUNlbGxNc2csbXNnID0gJyArIEpTT04uc3RyaW5naWZ5KG1zZykpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VDZWxsLmNhbGxiYWNrQnRuLEN1c3RvbUV2ZW50RGF0YSA9IFwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiTWVzc2FnZUNlbGwuY2FsbGJhY2tCdG4sYnRuTmFtZSA9IFwiICsgYnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZiAoYnRuTmFtZSA9PSBcIkNsaWNrXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgc2Nyb2xsVmlldyA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgTWVzc2FnZUNlbGwgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgTWVzc2FnZUNlbGxEZXRhaWxWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFNpdFJlcUNlbGwgOiBjYy5QcmVmYWIsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqTmV0d29yayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJNZXNzYWdlRGV0YWlsVmlldy5vbk1lc3NhZ2VcIik7XHJcbiAgICAgICAgLy90aGlzLl9zdXBlcihldmVudCk7XHJcbiAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgdmFyIGNtZCA9IG1zZy5jbWQ7XHJcbiAgICAgICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgICAgICAgY2FzZSBVU19SRVNQX01TR19MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIHRoaXMub25HZXRNZXNzYWdlTGlzdChtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIENMVUJfUkVTUF9PV05FUl9DT05GSVJNX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VEZXRhaWxWaWV3Lm9uTWVzc2FnZSBDTFVCX1JFU1BfT1dORVJfQ09ORklSTV9DTURfSURcIik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRHZXRNc2dMaXN0IDogZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICB0eXBlIDogdHlwZSxcclxuICAgICAgICAgICAgc3RhcnQgOiAwLFxyXG4gICAgICAgICAgICB0b3RhbCA6IDUwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfTVNHX0xJU1RfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb25HZXRNZXNzYWdlTGlzdCA6IGZ1bmN0aW9uIChtc2cpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKG1zZy5jb2RlICE9IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1zZy5saXN0ID09IG51bGwgfHwgbXNnLmxpc3QgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtc2cudHlwZSA9PSAxKSB7IC8v57O757uf5raI5oGvXHJcbiAgICAgICAgICAgIGxldCBjZWxsSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBmb3IodmFyIGluZGV4ID0gMDsgaW5kZXggPCBtc2cubGlzdC5sZW5ndGg7aW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb24gPSBCQVNFNjQuZGVjb2Rlcihtc2cubGlzdFtpbmRleF0ubXNnKTtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VEZXRhaWxWaWV3Lm9uTXNnTGlzdCxqc29uID0gXCIgKyBqc29uKTtcclxuICAgICAgICAgICAgICAgIHZhciBNZXNzYWdlQ2VsbCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuTWVzc2FnZUNlbGwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuYWRkQ2hpbGQoTWVzc2FnZUNlbGwpO1xyXG4gICAgICAgICAgICAgICAgY2VsbEhlaWdodCA9IE1lc3NhZ2VDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUNlbGwuc2V0UG9zaXRpb24oY2MucCgwLC0gTWVzc2FnZUNlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQqKGluZGV4ICsgMC41KSkpO1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUNlbGwuZ2V0Q29tcG9uZW50KCdNZXNzYWdlQ2VsbCcpLnNldE1lc3NhZ2VDZWxsTXNnKG1zZy5saXN0W2luZGV4XSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBNZXNzYWdlQ2VsbC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudCgnTWVzc2FnZUNlbGwnKS5tc2c7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jcmVhdGVNZXNzYWdlQ2VsbERldGFpbFZpZXcobXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2VsbEhlaWdodCptc2cubGlzdC5sZW5ndGggPiB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmhlaWdodCA9IGNlbGxIZWlnaHQgKm1zZy5saXN0Lmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKG1zZy50eXBlID09IDIpIHsgLy/kv7HkuZDpg6jmtojmga9cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgICAgICBsZXQgY2VsbEhlaWdodCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbXNnLmxpc3QubGVuZ3RoOyBpbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvbiA9IEJBU0U2NC5kZWNvZGVyKG1zZy5saXN0W2luZGV4XS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgbXNnLmxpc3RbaW5kZXhdLm1zZyA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCJNZXNzYWdlVmlldy5vbk1zZ0xpc3QsbXNnLmxpc3RbaW5kZXhdLm1zZyA9IFwiLCBtc2cubGlzdFtpbmRleF0ubXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgU2l0UmVxQ2VsbCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuU2l0UmVxQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZChTaXRSZXFDZWxsKTtcclxuICAgICAgICAgICAgICAgIGNlbGxIZWlnaHQgPSBTaXRSZXFDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgU2l0UmVxQ2VsbC5zZXRQb3NpdGlvbihjYy5wKDAsLSBTaXRSZXFDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0ICogKGluZGV4ICsgMSkpKTtcclxuICAgICAgICAgICAgICAgIFNpdFJlcUNlbGwuZ2V0Q29tcG9uZW50KFwiU2l0UmVxQ2VsbFwiKS5zZXRNZXNzYWdlSW5mbyhtc2cubGlzdFtpbmRleF0sIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNlbGxIZWlnaHQgKiAobXNnLmxpc3QubGVuZ3RoICsgMSkgPiB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmhlaWdodCA9IGNlbGxIZWlnaHQgKiAobXNnLmxpc3QubGVuZ3RoICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjcmVhdGVNZXNzYWdlQ2VsbERldGFpbFZpZXcgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdmFyIE1lc3NhZ2VDZWxsRGV0YWlsVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuTWVzc2FnZUNlbGxEZXRhaWxWaWV3KTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkQ2hpbGQoTWVzc2FnZUNlbGxEZXRhaWxWaWV3KTtcclxuICAgICAgICBNZXNzYWdlQ2VsbERldGFpbFZpZXcuc2V0UG9zaXRpb24oY2MucCgwLDApKTtcclxuICAgICAgICBNZXNzYWdlQ2VsbERldGFpbFZpZXcuZ2V0Q29tcG9uZW50KCdNZXNzYWdlQ2VsbERldGFpbFZpZXcnKS5zZXRDb250ZW50KG1zZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxiYWNrQnRuIDogZnVuY3Rpb24oZXZlbnQsQ3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VEZXRhaWxWaWV3LmNhbGxiYWNrQnRuLEN1c3RvbUV2ZW50RGF0YSA9IFwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiTWVzc2FnZURldGFpbFZpZXcuY2FsbGJhY2tCdG4sYnRuTmFtZSA9IFwiICsgYnRuTmFtZSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZihidG5OYW1lID09IFwiQnRuQ2xvc2VcIikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8yLlxyXG4gKi9cclxudmFyIENtZF9CdWxsZmlnaHQgPSByZXF1aXJlKCdDbWRfQnVsbGZpZ2h0Jyk7XHJcbnZhciBCdWxsZmlnaHRfQmV0Q29pblJlc3BQYWNrZXQgPSByZXF1aXJlKCdCdWxsZmlnaHRfQmV0Q29pblJlc3BQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9DYWxsQmFua2VyUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9DYWxsQmFua2VyUmVzcFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X0hlbHBSZXNwUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0hlbHBSZXNwUGFja2V0Jyk7XHJcbnZhciBCdWxsZmlnaHRfT3BlbkNhcmRSZXNwUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X09wZW5DYXJkUmVzcFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9UYWJsZURldGFpbFJlc3BQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9CZXRDb2luUmVxUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0JldENvaW5SZXFQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9DYWxsQmFua2VyUmVxUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0NhbGxCYW5rZXJSZXFQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9IZWxwUmVxUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X0hlbHBSZXFQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9PcGVuQ2FyZFJlcVBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9PcGVuQ2FyZFJlcVBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVxUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVxUGFja2V0Jyk7XHJcbnZhciBCdWxsZmlnaHRfTm90aWZ5R2FtZU92ZXJPbmNlUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X05vdGlmeUdhbWVPdmVyT25jZVBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X05vdGlmeUdhbWVPdmVyVG90YWxQYWNrZXQgPSByZXF1aXJlKCdCdWxsZmlnaHRfTm90aWZ5R2FtZU92ZXJUb3RhbFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X1JlYWR5UmVxUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X1JlYWR5UmVxUGFja2V0Jyk7XHJcbnZhciBCdWxsZmlnaHRfUmVhZHlSZXNwUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X1JlYWR5UmVzcFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X05vdGlmeUdhbWVTdGFydFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9Ob3RpZnlHYW1lU3RhcnRQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9Ob3RpZnlTdXJlQmFua2VyUGFja2V0ID0gcmVxdWlyZSgnQnVsbGZpZ2h0X05vdGlmeVN1cmVCYW5rZXJQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9Ob3RpZnlPcGVuQ2FyZFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9Ob3RpZnlPcGVuQ2FyZFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X05vdGlmeUtpY2tPdXRQYWNrZXQgPSByZXF1aXJlKCdCdWxsZmlnaHRfTm90aWZ5S2lja091dFBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X05vdGlmeU5vdENhbGxCYW5rZXJQYWNrZXQgPSByZXF1aXJlKCdCdWxsZmlnaHRfTm90aWZ5Tm90Q2FsbEJhbmtlclBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X05vdGlmeU5vdEJldFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9Ob3RpZnlOb3RCZXRQYWNrZXQnKTtcclxudmFyIEJ1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlcVBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlcVBhY2tldCcpO1xyXG52YXIgQnVsbGZpZ2h0X0dldFBsYXllcnNMaXN0UmVzcFBhY2tldCA9IHJlcXVpcmUoJ0J1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlc3BQYWNrZXQnKTtcclxuXHJcbnZhciBNZXNzYWdlRmFjdG9yeV9CdWxsZmlnaHQgPSB7XHJcblxyXG4gICAgLy9DbGludCDor7fmsYJcclxuICAgIGNyZWF0ZU1lc3NhZ2VSZXEgOiBmdW5jdGlvbihjbWQpe1xyXG4gICAgICAgIHZhciBtc2cgPSBudWxsIDtcclxuICAgICAgICBzd2l0Y2goY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5TQkZfUkVRX0JFVF9DT0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfQmV0Q29pblJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFUV9DQUxMX0JBTktFUl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X0NhbGxCYW5rZXJSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfSEVMUF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X0hlbHBSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVFfT1BFTl9DQVJEX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfT3BlbkNhcmRSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlVTX1JFUV9UQUJMRV9ERVRBSUxfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9UYWJsZURldGFpbFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFUV9SRUFEWV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X1JlYWR5UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5VU19SRVFfUExBWUVSX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9HZXRQbGF5ZXJzTGlzdFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBTZXJ2ZXIg5Zue5bqUXHJcbiAgICBjcmVhdGVNZXNzYWdlUmVzcCA6IGZ1bmN0aW9uKGNtZCl7XHJcbiAgICAgICAgdmFyIG1zZyA9IG51bGwgO1xyXG4gICAgICAgIHN3aXRjaChjbWQpIHtcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX0JFVF9DT0lOX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfQmV0Q29pblJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX0NBTExfQkFOS0VSX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfQ2FsbEJhbmtlclJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9SRVNQX0hFTFBfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9IZWxwUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX1JFU1BfT1BFTl9DQVJEX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfT3BlbkNhcmRSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5VU19SRVNQX1RBQkxFX0RFVEFJTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X1RhYmxlRGV0YWlsUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9PTkVfR0FNRV9SRVNVTFRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9Ob3RpZnlHYW1lT3Zlck9uY2VQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDbWRfQnVsbGZpZ2h0LlNCRl9OT1RJRllfVE9UQUxfR0FNRV9SRVNVTFRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9Ob3RpZnlHYW1lT3ZlclRvdGFsUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5TQkZfUkVTUF9SRUFEWV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X1JlYWR5UmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9HQU1FX1NUQVJUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfTm90aWZ5R2FtZVN0YXJ0UGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX0NPTkZJUk1fQkFOS0VSX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfTm90aWZ5U3VyZUJhbmtlclBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9PUEVOX0NBUkRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9Ob3RpZnlPcGVuQ2FyZFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9LSUNLT1VUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCdWxsZmlnaHRfTm90aWZ5S2lja091dFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuU0JGX05PVElGWV9OT1RfQ0FMTF9CQU5LRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEJ1bGxmaWdodF9Ob3RpZnlOb3RDYWxsQmFua2VyUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ21kX0J1bGxmaWdodC5TQkZfTk9USUZZX05PVF9CRVRfQ09JTl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X05vdGlmeU5vdEJldFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENtZF9CdWxsZmlnaHQuVVNfUkVTUF9QTEFZRVJfTElTVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQnVsbGZpZ2h0X0dldFBsYXllcnNMaXN0UmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZUZhY3RvcnlfQnVsbGZpZ2h0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzE5LlxyXG4gKi9cclxuXHJcbnZhciBIZWFydFJlcVBhY2tldCA9IHJlcXVpcmUoJ0hlYXJ0UmVxUGFja2V0Jyk7XHJcbnZhciBIZWFydFJlc3BQYWNrZXQgPSByZXF1aXJlKCdIZWFydFJlc3BQYWNrZXQnKTtcclxudmFyIExvZ2luUmVxUGFja2V0ID0gcmVxdWlyZSgnTG9naW5SZXFQYWNrZXQnKTtcclxudmFyIExvZ2luUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0xvZ2luUmVzcFBhY2tldCcpO1xyXG52YXIgQ3JlYXRlUm9vbVJlcVBhY2tldCA9IHJlcXVpcmUoJ0NyZWF0ZVJvb21SZXFQYWNrZXQnKTtcclxudmFyIENyZWF0ZVJvb21SZXNwUGFja2V0ID0gcmVxdWlyZSgnQ3JlYXRlUm9vbVJlc3BQYWNrZXQnKTtcclxudmFyIEZpbmRSb29tUmVxUGFja2V0ID0gcmVxdWlyZSgnRmluZFJvb21SZXFQYWNrZXQnKTtcclxudmFyIEZpbmRSb29tUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0ZpbmRSb29tUmVzcFBhY2tldCcpO1xyXG52YXIgRW50ZXJSb29tUmVxUGFja2V0ID0gcmVxdWlyZSgnRW50ZXJSb29tUmVxUGFja2V0Jyk7XHJcbnZhciBFbnRlclJvb21SZXNwUGFja2V0ID0gcmVxdWlyZSgnRW50ZXJSb29tUmVzcFBhY2tldCcpO1xyXG52YXIgTGVhdmVHYW1lUmVxUGFja2V0ID0gcmVxdWlyZSgnTGVhdmVHYW1lUmVxUGFja2V0Jyk7XHJcbnZhciBMZWF2ZUdhbWVSZXNwUGFja2V0ID0gcmVxdWlyZSgnTGVhdmVHYW1lUmVzcFBhY2tldCcpO1xyXG52YXIgU2VydmVyS2lja091dFBhY2tldCA9IHJlcXVpcmUoJ1NlcnZlcktpY2tPdXRQYWNrZXQnKTtcclxuLy92YXIgTm90aWZ5VGFibGVPd25lclNpdFBhY2tldCA9IHJlcXVpcmUoJ05vdGlmeVRhYmxlT3duZXJTaXRQYWNrZXQnKTtcclxudmFyIE93bmVyQ29uZmlybVJlcVBhY2tldCA9IHJlcXVpcmUoJ093bmVyQ29uZmlybVJlcVBhY2tldCcpO1xyXG52YXIgT3duZXJDb25maXJtUmVzcFBhY2tldCA9IHJlcXVpcmUoJ093bmVyQ29uZmlybVJlc3BQYWNrZXQnKTtcclxudmFyIE93bmVyS2lja091dFBsYXllclJlcVBhY2tldCA9IHJlcXVpcmUoJ093bmVyS2lja091dFBsYXllclJlcVBhY2tldCcpO1xyXG52YXIgT3duZXJLaWNrT3V0UGxheWVyUmVzcFBhY2tldCA9IHJlcXVpcmUoJ093bmVyS2lja091dFBsYXllclJlc3BQYWNrZXQnKTtcclxudmFyIFN0YXJ0R2FtZVJlcVBhY2tldCA9IHJlcXVpcmUoJ1N0YXJ0R2FtZVJlcVBhY2tldCcpO1xyXG52YXIgU3RhcnRHYW1lUmVzcFBhY2tldCA9IHJlcXVpcmUoJ1N0YXJ0R2FtZVJlc3BQYWNrZXQnKTtcclxudmFyIERpc21pc3NHYW1lUmVxUGFja2V0ID0gcmVxdWlyZSgnRGlzbWlzc0dhbWVSZXFQYWNrZXQnKTtcclxuLy92YXIgRGlzbWlzc0dhbWVSZXNwUGFja2V0ID0gcmVxdWlyZSgnRGlzbWlzc0dhbWVSZXNwUGFja2V0Jyk7XHJcbnZhciBOb3RpZnlEaXNtaXNzR2FtZSA9IHJlcXVpcmUoJ05vdGlmeURpc21pc3NHYW1lJyk7XHJcbnZhciBTaXREb3duUmVxUGFja2V0ID0gcmVxdWlyZSgnU2l0RG93blJlcVBhY2tldCcpO1xyXG52YXIgU2l0RG93blJlc3BQYWNrZXQgPSByZXF1aXJlKCdTaXREb3duUmVzcFBhY2tldCcpO1xyXG52YXIgTm90aWZ5T3duZXJPdmVyUGFja2V0ID0gcmVxdWlyZSgnTm90aWZ5T3duZXJPdmVyUGFja2V0Jyk7XHJcbnZhciBDaGF0UmVxUGFja2V0ID0gcmVxdWlyZSgnQ2hhdFJlcVBhY2tldCcpO1xyXG52YXIgQ2hhdFJlc3BQYWNrZXQgPSByZXF1aXJlKCdDaGF0UmVzcFBhY2tldCcpO1xyXG52YXIgTm90aWZ5T3duZXJTaXRQYWNrZXQgPSByZXF1aXJlKFwiTm90aWZ5T3duZXJTaXRQYWNrZXRcIik7XHJcbnZhciBDYXJyeUNvaW5SZXFQYWNrZXQgPSByZXF1aXJlKCdDYXJyeUNvaW5SZXFQYWNrZXQnKTtcclxudmFyIENhcnJ5Q29pblJlc3BQYWNrZXQgPSByZXF1aXJlKCdDYXJyeUNvaW5SZXNwUGFja2V0Jyk7XHJcbnZhciBOb3RpZnlHYW1lU3RhcnRQYWNrZXQgPSByZXF1aXJlKCdOb3RpZnlHYW1lU3RhcnRQYWNrZXQnKTtcclxudmFyIEZpbmRSZXNwUGFja2V0ID0gcmVxdWlyZSgnRmluZFJlc3BQYWNrZXQnKTtcclxudmFyIEZpbmRSZXFQYWNrZXQgPSByZXF1aXJlKCdGaW5kUmVxUGFja2V0Jyk7XHJcbnZhciBTY29yZUxpc3RSZXFQYWNrZXQgPSByZXF1aXJlKCdTY29yZUxpc3RSZXFQYWNrZXQnKTtcclxudmFyIFNjb3JlTGlzdFJlc3BQYWNrZXQgPSByZXF1aXJlKCdTY29yZUxpc3RSZXNwUGFja2V0Jyk7XHJcbnZhciBTY29yZURldGFpbFJlcVBhY2tldCA9IHJlcXVpcmUoJ1Njb3JlRGV0YWlsUmVxUGFja2V0Jyk7XHJcbnZhciBTY29yZURldGFpbFJlc3BQYWNrZXQgPSByZXF1aXJlKCdTY29yZURldGFpbFJlc3BQYWNrZXQnKTtcclxudmFyIFNob3BDb25mUmVxUGFja2V0ID0gcmVxdWlyZSgnU2hvcENvbmZSZXFQYWNrZXQnKTtcclxudmFyIFNob3BDb25mUmVzcFBhY2tldCA9IHJlcXVpcmUoJ1Nob3BDb25mUmVzcFBhY2tldCcpO1xyXG52YXIgQ3JlYXRlQ2x1YlJlcVBhY2tldCA9IHJlcXVpcmUoJ0NyZWF0ZUNsdWJSZXFQYWNrZXQnKTtcclxudmFyIENyZWF0ZUNsdWJSZXNwUGFja2V0ID0gcmVxdWlyZSgnQ3JlYXRlQ2x1YlJlc3BQYWNrZXQnKTtcclxudmFyIEdldENsdWJMaXN0UmVxUGFja2V0ID0gcmVxdWlyZSgnR2V0Q2x1Ykxpc3RSZXFQYWNrZXQnKTtcclxudmFyIEdldENsdWJMaXN0UmVzcFBhY2tldCA9IHJlcXVpcmUoJ0dldENsdWJMaXN0UmVzcFBhY2tldCcpO1xyXG52YXIgR2V0Q2x1YlRhYmxlUmVxUGFja2V0ID0gcmVxdWlyZSgnR2V0Q2x1YlRhYmxlUmVxUGFja2V0Jyk7XHJcbnZhciBHZXRDbHViVGFibGVSZXNwUGFja2V0ID0gcmVxdWlyZSgnR2V0Q2x1YlRhYmxlUmVzcFBhY2tldCcpO1xyXG52YXIgU2VhcmNoQ2x1YlJlcVBhY2tldCA9IHJlcXVpcmUoJ1NlYXJjaENsdWJSZXFQYWNrZXQnKTtcclxudmFyIFNlYXJjaENsdWJSZXNwUGFja2V0ID0gcmVxdWlyZSgnU2VhcmNoQ2x1YlJlc3BQYWNrZXQnKTtcclxudmFyIE1vZGlmeUNsdWJJbmZvUmVxUGFja2V0ID0gcmVxdWlyZSgnTW9kaWZ5Q2x1YkluZm9SZXFQYWNrZXQnKTtcclxudmFyIE1vZGlmeUNsdWJJbmZvUmVzcFBhY2tldCA9IHJlcXVpcmUoJ01vZGlmeUNsdWJJbmZvUmVzcFBhY2tldCcpO1xyXG52YXIgR2V0TWVtYmVyTGlzdFJlcVBhY2tldCA9IHJlcXVpcmUoJ0dldE1lbWJlckxpc3RSZXFQYWNrZXQnKTtcclxudmFyIEdldE1lbWJlckxpc3RSZXNwUGFja2V0ID0gcmVxdWlyZSgnR2V0TWVtYmVyTGlzdFJlc3BQYWNrZXQnKTtcclxudmFyIEpvaW5DbHViUmVxUGFja2V0ID0gcmVxdWlyZSgnSm9pbkNsdWJSZXFQYWNrZXQnKTtcclxudmFyIEpvaW5DbHViUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0pvaW5DbHViUmVzcFBhY2tldCcpO1xyXG52YXIgTm90aWZ5Q2x1Yk93bmVyQ29uZmlybVBhY2tldCA9IHJlcXVpcmUoJ05vdGlmeUNsdWJPd25lckNvbmZpcm1QYWNrZXQnKTtcclxudmFyIENsdWJPd25lckNvbmZpcm1SZXFQYWNrZXQgPSByZXF1aXJlKCdDbHViT3duZXJDb25maXJtUmVxUGFja2V0Jyk7XHJcbnZhciBDbHViT3duZXJDb25maXJtUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0NsdWJPd25lckNvbmZpcm1SZXNwUGFja2V0Jyk7XHJcbnZhciBDbHViRGVsTWVtYmVyUmVxUGFja2V0ID0gcmVxdWlyZSgnQ2x1YkRlbE1lbWJlclJlcVBhY2tldCcpO1xyXG52YXIgQ2x1YkRlbE1lbWJlclJlc3BQYWNrZXQgPSByZXF1aXJlKCdDbHViRGVsTWVtYmVyUmVzcFBhY2tldCcpO1xyXG52YXIgR2V0TXNnTnVtUmVxUGFja2V0ID0gcmVxdWlyZSgnR2V0TXNnTnVtUmVxUGFja2V0Jyk7XHJcbnZhciBHZXRNc2dOdW1SZXNwUGFja2V0ID0gcmVxdWlyZSgnR2V0TXNnTnVtUmVzcFBhY2tldCcpO1xyXG52YXIgR2V0TXNnTGlzdFJlcVBhY2tldCA9IHJlcXVpcmUoJ0dldE1zZ0xpc3RSZXFQYWNrZXQnKTtcclxudmFyIEdldE1zZ0xpc3RSZXNwUGFja2V0ID0gcmVxdWlyZSgnR2V0TXNnTGlzdFJlc3BQYWNrZXQnKTtcclxudmFyIE1zZ1JlYWRSZXFQYWNrZXQgPSByZXF1aXJlKCdNc2dSZWFkUmVxUGFja2V0Jyk7XHJcbnZhciBNc2dSZWFkUmVzcFBhY2tldCA9IHJlcXVpcmUoJ01zZ1JlYWRSZXNwUGFja2V0Jyk7XHJcbnZhciBEaXNtaXNzQ2x1YlJlcVBhY2tldCA9IHJlcXVpcmUoJ0Rpc21pc3NDbHViUmVxUGFja2V0Jyk7XHJcbnZhciBEaXNtaXNzQ2x1YlJlc3BQYWNrZXQgPSByZXF1aXJlKCdEaXNtaXNzQ2x1YlJlc3BQYWNrZXQnKTtcclxudmFyIENsdWJPd25lck1vZGlmeVJvbGVSZXNwUGFja2V0ID0gcmVxdWlyZSgnQ2x1Yk93bmVyTW9kaWZ5Um9sZVJlc3BQYWNrZXQnKTtcclxudmFyIENsdWJPd25lck1vZGlmeVJvbGVSZXFQYWNrZXQgPSByZXF1aXJlKCdDbHViT3duZXJNb2RpZnlSb2xlUmVxUGFja2V0Jyk7XHJcbnZhciBDbHViQ3JlYXRlUm9vbVJlcVBhY2tldCAgID0gcmVxdWlyZSgnQ2x1YkNyZWF0ZVJvb21SZXFQYWNrZXQnKTtcclxudmFyIENsdWJDcmVhdGVSb29tUmVzcFBhY2tldCAgPSByZXF1aXJlKCdDbHViQ3JlYXRlUm9vbVJlc3BQYWNrZXQnKTtcclxudmFyIFVzZXJEZXRhaWxSZXFQYWNrZXQgICAgICAgPSByZXF1aXJlKCdVc2VyRGV0YWlsUmVxUGFja2V0Jyk7XHJcbnZhciBVc2VyRGV0YWlsUmVzcFBhY2tldCAgICAgID0gcmVxdWlyZSgnVXNlckRldGFpbFJlc3BQYWNrZXQnKTtcclxudmFyIENyZWF0ZVRhYmxlQ29zdFJlcVBhY2tldCAgPSByZXF1aXJlKCdDcmVhdGVUYWJsZUNvc3RSZXFQYWNrZXQnKTtcclxudmFyIENyZWF0ZVRhYmxlQ29zdFJlc3BQYWNrZXQgPSByZXF1aXJlKCdDcmVhdGVUYWJsZUNvc3RSZXNwUGFja2V0Jyk7XHJcbnZhciBDbHViVXBncmFkZUNvc3RSZXFQYWNrZXQgID0gcmVxdWlyZSgnQ2x1YlVwZ3JhZGVDb3N0UmVxUGFja2V0Jyk7XHJcbnZhciBDbHViVXBncmFkZUNvc3RSZXNwUGFja2V0ID0gcmVxdWlyZSgnQ2x1YlVwZ3JhZGVDb3N0UmVzcFBhY2tldCcpO1xyXG52YXIgRXhjaGFuZ2VHb2xkUmVxUGFja2V0ICA9IHJlcXVpcmUoJ0V4Y2hhbmdlR29sZFJlcVBhY2tldCcpO1xyXG52YXIgRXhjaGFuZ2VHb2xkUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0V4Y2hhbmdlR29sZFJlc3BQYWNrZXQnKTtcclxudmFyIEJhbm5lckxpc3RSZXFQYWNrZXQgICAgPSByZXF1aXJlKCdCYW5uZXJMaXN0UmVxUGFja2V0Jyk7XHJcbnZhciBCYW5uZXJMaXN0UmVzcFBhY2tldCAgID0gcmVxdWlyZSgnQmFubmVyTGlzdFJlc3BQYWNrZXQnKTtcclxudmFyIE5vdGlmeVBheU9wZXJhdGVQYWNrZXQgPSByZXF1aXJlKCdOb3RpZnlQYXlPcGVyYXRlUGFja2V0Jyk7XHJcbnZhciBOb3RpZnlJbkdhbWVSZXNwUGFja2V0ID0gcmVxdWlyZSgnTm90aWZ5SW5HYW1lUmVzcFBhY2tldCcpO1xyXG52YXIgQmluZFJlZmVycmFsUmVxUGFja2V0ICA9IHJlcXVpcmUoJ0JpbmRSZWZlcnJhbFJlcVBhY2tldCcpO1xyXG52YXIgQmluZFJlZmVycmFsUmVzcFBhY2tldCA9IHJlcXVpcmUoJ0JpbmRSZWZlcnJhbFJlc3BQYWNrZXQnKTtcclxuLypcclxudmFyIERpc21pc3NUYWJsZVJlcVBhY2tldCA9IHJlcXVpcmUoJ0Rpc21pc3NUYWJsZVJlcVBhY2tldCcpO1xyXG52YXIgQ29uZmlybURpc21pc3NUYWJsZVJlcVBhY2tldCA9IHJlcXVpcmUoJ0NvbmZpcm1EaXNtaXNzVGFibGVSZXFQYWNrZXQnKTtcclxudmFyIERpc21pc3NUYWJsZVJzcFBhY2tldCA9IHJlcXVpcmUoJ0Rpc21pc3NUYWJsZVJzcFBhY2tldCcpO1xyXG52YXIgQ29uZmlybURpc21pc3NUYWJsZVJzcFBhY2tldCA9IHJlcXVpcmUoJ0NvbmZpcm1EaXNtaXNzVGFibGVSc3BQYWNrZXQnKTtcclxudmFyIERpc21pc3NUYWJsZU5vdGlmeVBhY2tldCAgPSByZXF1aXJlKCdEaXNtaXNzVGFibGVOb3RpZnlQYWNrZXQnKTtcclxudmFyIENvbmZpcm1EaXNtaXNzVGFibGVOb3RpZnlQYWNrZXQgPSByZXF1aXJlKCdDb25maXJtRGlzbWlzc1RhYmxlTm90aWZ5UGFja2V0Jyk7XHJcbiovXHJcbnZhciBNZXNzYWdlRmFjdG9yeV9Db21tb24gPSB7XHJcblxyXG4gICAgLy9DbGludCDor7fmsYJcclxuICAgIGNyZWF0ZU1lc3NhZ2VSZXEgOiBmdW5jdGlvbihjbWQpe1xyXG4gICAgICAgIHZhciBtc2cgPSBudWxsIDtcclxuICAgICAgICBzd2l0Y2goY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9IRUFSVEJFQVRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEhlYXJ0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9MT0dJTl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTG9naW5SZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX0NSRUFURV9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ3JlYXRlUm9vbVJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfRU5URVJfR0FNRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRW50ZXJSb29tUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9GSU5EX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBGaW5kUm9vbVJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfTEVBVkVfR0FNRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTGVhdmVHYW1lUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9PV05FUl9DT05GSVJNX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBPd25lckNvbmZpcm1SZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX09XTkVSX0tJQ0tPVVRfUExBWUVSQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE93bmVyS2lja091dFBsYXllclJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfR0FNRV9TV0lUQ0hfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFN0YXJ0R2FtZVJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfU0lUX0RPV05fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFNpdERvd25SZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX0dBTUVfQ0hBVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2hhdFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfQ0FSUllfQ09JTl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2FycnlDb2luUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9GT1VORF9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRmluZFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfU0NPUkVfTElTVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU2NvcmVMaXN0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9TQ09SRV9ERVRBSUxfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFNjb3JlRGV0YWlsUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9TSE9QX0NPTkZfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFNob3BDb25mUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9DUkVBVEVfQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ3JlYXRlQ2x1YlJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfQ0xVQl9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBHZXRDbHViTGlzdFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfQ0xVQl9UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgR2V0Q2x1YlRhYmxlUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9TRUFSQ0hfQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU2VhcmNoQ2x1YlJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFUV9NT0RJRllfSU5GT19DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTW9kaWZ5Q2x1YkluZm9SZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVFfR0VUX01FTUJFUl9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBHZXRNZW1iZXJMaXN0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVRX0pPSU5fQ0xVQl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgSm9pbkNsdWJSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVFfT1dORVJfQ09ORklSTV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2x1Yk93bmVyQ29uZmlybVJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFUV9PV05FUl9STV9NRU1CRVJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENsdWJEZWxNZW1iZXJSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX05FV19NU0dfTlVNX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBHZXRNc2dOdW1SZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX01TR19MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBHZXRNc2dMaXN0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9TRVRfTVNHX1JFQURfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE1zZ1JlYWRSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVFfRElTTUlTU19DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBEaXNtaXNzQ2x1YlJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFUV9PV05FUl9NT0RJRllfUk9MRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2x1Yk93bmVyTW9kaWZ5Um9sZVJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFUV9DUkVBVEVfVEFCTEVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENsdWJDcmVhdGVSb29tUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9VU0VSX0RFVEFJTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgVXNlckRldGFpbFJlcVBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX0NSRUFURV9DT1NUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDcmVhdGVUYWJsZUNvc3RSZXFQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFUV9DTFVCX1VQR1JBREVfQ09TVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2x1YlVwZ3JhZGVDb3N0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfRVhDSEFOR0VfR09MRF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRXhjaGFuZ2VHb2xkUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVRX0JBTk5FUl9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBCYW5uZXJMaXN0UmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfQklORF9SRUZFUlJBTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQmluZFJlZmVycmFsUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfRElTTUlTU19UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRGlzbWlzc1RhYmxlUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVFfQ09ORklSTV9ESVNNSVNTX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDb25maXJtRGlzbWlzc1RhYmxlUmVxUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1zZztcclxuICAgIH0sXHJcblxyXG4gICAgLy8gU2VydmVyIOWbnuW6lFxyXG4gICAgY3JlYXRlTWVzc2FnZVJlc3AgOiBmdW5jdGlvbihjbWQpe1xyXG4gICAgICAgIHZhciBtc2cgPSBudWxsIDtcclxuICAgICAgICBzd2l0Y2goY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfSEVBUlRCRUFUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBIZWFydFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTE9HSU5fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IExvZ2luUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9DUkVBVEVfVEFCTEVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENyZWF0ZVJvb21SZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0VOVEVSX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEVudGVyUm9vbVJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9GSU5EX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBGaW5kUm9vbVJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTEVBVkVfR0FNRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTGVhdmVHYW1lUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfS0lDS19PVVRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFNlcnZlcktpY2tPdXRQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfT1dORVJfQ09ORklSTV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgT3duZXJDb25maXJtUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9PV05FUl9LSUNLT1VUX1BMQVlFUkNNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBPd25lcktpY2tPdXRQbGF5ZXJSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0dBTUVfU1dJVENIX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBTdGFydEdhbWVSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfRElTTUlTU19HQU1FX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBOb3RpZnlEaXNtaXNzR2FtZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9TSVRfRE9XTl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU2l0RG93blJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX05PVEZJWV9PV05FUl9UQUJMRUlORk9fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE5vdGlmeU93bmVyT3ZlclBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9HQU1FX0NIQVRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENoYXRSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfT1dORVJfQ09ORklSTV9TSVRfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE5vdGlmeU93bmVyU2l0UGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0NBUlJZX0NPSU5fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENhcnJ5Q29pblJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX05PVElGWV9HQU1FX1NXSVRDSF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTm90aWZ5R2FtZVN0YXJ0UGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0ZPVU5EX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBGaW5kUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9TQ09SRV9MSVNUX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBTY29yZUxpc3RSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1NDT1JFX0RFVEFJTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU2NvcmVEZXRhaWxSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1NIT1BfQ09ORl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgU2hvcENvbmZSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX0NSRUFURV9DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDcmVhdGVDbHViUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9DTFVCX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEdldENsdWJMaXN0UmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9DTFVCX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBHZXRDbHViVGFibGVSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1NFQVJDSF9DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBTZWFyY2hDbHViUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX01PRElGWV9JTkZPX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBNb2RpZnlDbHViSW5mb1Jlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9HRVRfTUVNQkVSX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEdldE1lbWJlckxpc3RSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfSk9JTl9DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBKb2luQ2x1YlJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfTk9USUZZX09XTkVSX0NPTkZJUk1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE5vdGlmeUNsdWJPd25lckNvbmZpcm1QYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9PV05FUl9DT05GSVJNX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDbHViT3duZXJDb25maXJtUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuQ0xVQl9SRVNQX09XTkVSX1JNX01FTUJFUl9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2x1YkRlbE1lbWJlclJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTkVXX01TR19OVU1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEdldE1zZ051bVJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfTVNHX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IEdldE1zZ0xpc3RSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SRVNQX1NFVF9NU0dfUkVBRF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgTXNnUmVhZFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfU0VBUkNIX0NMVUJfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IFNlYXJjaENsdWJSZXNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5DTFVCX1JFU1BfRElTTUlTU19DTFVCX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBEaXNtaXNzQ2x1YlJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9PV05FUl9NT0RJRllfUk9MRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQ2x1Yk93bmVyTW9kaWZ5Um9sZVJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LkNMVUJfUkVTUF9DUkVBVEVfVEFCTEVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENsdWJDcmVhdGVSb29tUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9VU0VSX0RFVEFJTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgVXNlckRldGFpbFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfQ1JFQVRFX0NPU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENyZWF0ZVRhYmxlQ29zdFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfQ0xVQl9VUEdSQURFX0NPU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IENsdWJVcGdyYWRlQ29zdFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfRVhDSEFOR0VfR09MRF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRXhjaGFuZ2VHb2xkUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfUkVTUF9CQU5ORVJfTElTVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQmFubmVyTGlzdFJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfTk9USUZZX1BBWV9PUEVSQVRFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBOb3RpZnlQYXlPcGVyYXRlUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG5cclxuICAgICAgICAgICAgY2FzZSB3aW5kb3cuVVNfTk9USUZZX0lOX0dBTUVfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgbXNnID0gbmV3IE5vdGlmeUluR2FtZVJlc3BQYWNrZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2Ugd2luZG93LlVTX1JFU1BfQklORF9SRUZFUlJBTF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgQmluZFJlZmVycmFsUmVzcFBhY2tldDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4vKlxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SU1BfRElTTUlTU19UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRGlzbWlzc1RhYmxlUnNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19SU1BfQ09ORklSTV9ESVNNSVNTX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDb25maXJtRGlzbWlzc1RhYmxlUnNwUGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfRElTTUlTU19UQUJMRV9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBuZXcgRGlzbWlzc1RhYmxlTm90aWZ5UGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHdpbmRvdy5VU19OT1RJRllfQ09ORklSTV9ESVNNSVNTX1RBQkxFX0NNRF9JRDpcclxuICAgICAgICAgICAgICAgIG1zZyA9IG5ldyBDb25maXJtRGlzbWlzc1RhYmxlTm90aWZ5UGFja2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAqL1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbXNnO1xyXG4gICAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZXNzYWdlRmFjdG9yeV9Db21tb247IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMTkuXHJcbiAqL1xyXG5cclxuXHJcbnZhciBNZXNzYWdlRmFjdG9yeV9Db21tb24gPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeV9Db21tb24nKSA7XHJcbnZhciBNZXNzYWdlRmFjdG9yeV9CdWxsZmlnaHQgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeV9CdWxsZmlnaHQnKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG52YXIgTWVzc2FnZUZhY3RvcnkgPVxyXG4gICAge1xyXG5cclxuICAgIH07XHJcblxyXG4vL+eUn+aIkOS4gOS4quWfuuehgOa2iOaBr1xyXG5NZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxID0gZnVuY3Rpb24oY21kKXtcclxuICAgIGNjLmxvZyhcIk1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEsY21kID0gXCIgKyBjbWQudG9TdHJpbmcoMTYpKTtcclxuICAgIHZhciBtZXNzYWdlID0gbnVsbCA7XHJcbiAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuQ3VyR2FtZVR5cGUgPT0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkdhbWVUeXBlLkdBTUVfVFlQRV9CVUxMRklHSFQpXHJcbiAgICB7XHJcbiAgICAgICAgbWVzc2FnZSA9IE1lc3NhZ2VGYWN0b3J5X0J1bGxmaWdodC5jcmVhdGVNZXNzYWdlUmVxKGNtZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8gY2MuZXJyb3IoXCJNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlLEVSUk9SLGN1ckdhbWVUeXBlID0gXCIgKyBjdXJHYW1lVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/otbDlhazlhbHljY/orq5cclxuICAgIGlmKG1lc3NhZ2UgPT0gbnVsbCl7XHJcbiAgICAgICAgbWVzc2FnZSA9IE1lc3NhZ2VGYWN0b3J5X0NvbW1vbi5jcmVhdGVNZXNzYWdlUmVxKGNtZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYobWVzc2FnZSA9PSBudWxsKXtcclxuICAgICAgICBjYy5lcnJvcihcIk1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEsbWVzc2FnZSA9IG51bGxcIik7XHJcbiAgICB9XHJcbiAgICBjYy5sb2coXCJNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxLFwiICsgbWVzc2FnZS5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgIHJldHVybiBtZXNzYWdlO1xyXG5cclxufTtcclxuXHJcbk1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXNwID0gZnVuY3Rpb24oY21kKXtcclxuICAgIGNjLmxvZyhcIk1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXNwLGNtZCA9IFwiICsgY21kLnRvU3RyaW5nKDE2KSk7XHJcbiAgICB2YXIgbWVzc2FnZSA9IG51bGwgO1xyXG4gICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLkN1ckdhbWVUeXBlID09IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5HYW1lVHlwZS5HQU1FX1RZUEVfQlVMTEZJR0hUIHx8MSlcclxuICAgIHtcclxuICAgICAgICBtZXNzYWdlID0gTWVzc2FnZUZhY3RvcnlfQnVsbGZpZ2h0LmNyZWF0ZU1lc3NhZ2VSZXNwKGNtZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICAgLy8gY2MuZXJyb3IoXCJNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlLEVSUk9SLGN1ckdhbWVUeXBlID0gXCIgKyBjdXJHYW1lVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/otbDlhazlhbHljY/orq5cclxuICAgIGlmKG1lc3NhZ2UgPT0gbnVsbCl7XHJcbiAgICAgICAgbWVzc2FnZSA9IE1lc3NhZ2VGYWN0b3J5X0NvbW1vbi5jcmVhdGVNZXNzYWdlUmVzcChjbWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKG1lc3NhZ2UgPT0gbnVsbCl7XHJcbiAgICAgICAgY2MuZXJyb3IoXCJNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVzcCxtZXNzYWdlID0gbnVsbFwiKTtcclxuICAgIH1cclxuICAgIGNjLmxvZyhcIk1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXNwLFwiICsgbWVzc2FnZS5jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgIHJldHVybiBtZXNzYWdlO1xyXG5cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZUZhY3Rvcnk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2UgPSByZXF1aXJlKCdNZXNzYWdlJyk7XHJcblxyXG5mdW5jdGlvbiBNZXNzYWdlUmVxKClcclxue1xyXG4gICAgTWVzc2FnZS5hcHBseSh0aGlzLFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5zZXEgPSBTb2NrZXRTZXErKztcclxuXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc2VuZEhlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLmNtZCA9IHRoaXMuY21kO1xyXG4gICAgICAgIHRoaXMuZGF0YS5xZXEgPSB0aGlzLnNlcTtcclxuICAgICAgICB0aGlzLmRhdGEudWlkID0gdGhpcy51aWQ7XHJcblxyXG4gICAgfTtcclxufVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVzc2FnZVJlcTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8yMi5cclxuICovXHJcbnZhciBNZXNzYWdlID0gcmVxdWlyZSgnTWVzc2FnZScpO1xyXG5cclxuZnVuY3Rpb24gTWVzc2FnZVJlc3AoKVxyXG57XHJcbiAgICBNZXNzYWdlLmFwcGx5KHRoaXMsW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNvZGUgPSAwO1xyXG4gICAgdGhpcy5kZXNjID0gXCJcIjtcclxuXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uKG1zZykge1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lc3NhZ2VSZXNwOyIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBNZXNzYWdlRGV0YWlsVmlldyA6IGNjLlByZWZhYixcclxuICAgICAgICBTY3JvbGxWaWV3ICAgICAgICA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgTm90aWNlTXNnQ2VsbCAgICAgOiBjYy5Ob2RlLFxyXG4gICAgICAgIE5vdGljZVJlZFRpcCAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBOb3RpY2VOdW0gICAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENsdWJNc2dDZWxsICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBDbHViTXNnUmVkVGlwICAgICA6IGNjLk5vZGUsXHJcbiAgICAgICAgQ2x1Yk1zZ051bSAgICAgICAgOiBjYy5MYWJlbCxcclxuICAgICAgICBTaXRSZXFDZWxsICAgICAgICA6IGNjLlByZWZhYixcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoVVNfUkVRX05FV19NU0dfTlVNX0NNRF9JRCkuc2VuZCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdEJhc2VEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRCYXNlRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkNlbGxOdW0gPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqTmV0d29yayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VWaWV3Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICAvL3RoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfTkVXX01TR19OVU1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5ld01zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfTVNHX0xJU1RfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk1zZ0xpc3QobXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBVU19SRVNQX09XTkVSX0NPTkZJUk1fQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk93bmVyQ29uZmlybShtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk93bmVyQ29uZmlybSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZiAobXNnLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VWaWV3Lm9uT3duZXJDb25maXJtXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTXNnTGlzdCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZihtc2cuY29kZSA9PSBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKSB7XHJcbiAgICAgICAgICAgIGlmKG1zZy50eXBlID09IDEpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihtc2cudHlwZSA9PSAyKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobXNnLnR5cGUgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNlbGxDb3VudCA9IHRoaXMuU2Nyb2xsVmlldy5jb250ZW50LmdldENoaWxkcmVuQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIGlmKG1zZy5saXN0ID09IG51bGwgfHwgbXNnLmxpc3QgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGluZGV4ID0gMDsgaW5kZXggPCBtc2cubGlzdC5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IEJBU0U2NC5kZWNvZGVyKG1zZy5saXN0W2luZGV4XS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1zZy5saXN0W2luZGV4XS5tc2cgPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VWaWV3Lm9uTXNnTGlzdCxqc29uID0gXCIgKyBtc2cubGlzdFtpbmRleF0ubXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIFNpdFJlcUNlbGwgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlNpdFJlcUNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2Nyb2xsVmlldy5jb250ZW50LmFkZENoaWxkKFNpdFJlcUNlbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxIZWlnaHQgPSBTaXRSZXFDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIFNpdFJlcUNlbGwuc2V0UG9zaXRpb24oY2MucCgwLCAtU2l0UmVxQ2VsbC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCooY2VsbENvdW50ICsgaW5kZXggKyAxKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIFNpdFJlcUNlbGwuZ2V0Q29tcG9uZW50KFwiU2l0UmVxQ2VsbFwiKS5zZXRNZXNzYWdlSW5mbyhtc2cubGlzdFtpbmRleF0sIG1zZy50eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2VsbEhlaWdodCAqICh0aGlzLlNjcm9sbFZpZXcuY29udGVudC5nZXRDaGlsZHJlbkNvdW50KCkgKyAxKSA+IHRoaXMuU2Nyb2xsVmlldy5jb250ZW50LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2Nyb2xsVmlldy5jb250ZW50LmhlaWdodCA9IGNlbGxIZWlnaHQgKiAodGhpcy5TY3JvbGxWaWV3LmNvbnRlbnQuZ2V0Q2hpbGRyZW5Db3VudCgpICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb25OZXdNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgaWYobXNnLmNvZGUgPT0gU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKG1zZy5zeXNudW0gPiAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk5vdGljZVJlZFRpcC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Ob3RpY2VOdW0uc3RyaW5nICAgID0gbXNnLnN5c251bTtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2VsbE51bSsrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihtc2cuY2x1Ym51bSA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ2x1Yk1zZ1JlZFRpcC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DbHViTXNnTnVtLnN0cmluZyAgICA9IG1zZy5jbHVibnVtO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DZWxsTnVtKys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdHlwZSA6IDMsXHJcbiAgICAgICAgICAgICAgICBzdGFydCA6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3RhbCA6IDUwLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKFVTX1JFUV9NU0dfTElTVF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbGJhY2tCdG4gOiBmdW5jdGlvbihldmVudCxDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICBjYy5sb2coXCJNZXNzYWdlVmlldy5jYWxsYmFja0J0bixDdXN0b21FdmVudERhdGEgPSBcIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIk1lc3NhZ2VWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcblxyXG4gICAgICAgIGlmKGJ0bk5hbWUgPT0gXCJCdG5DbG9zZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJOb3RpY2VNc2dDZWxsXCIpIHtcclxuICAgICAgICAgICAgdmFyIE1lc3NhZ2VEZXRhaWxWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5NZXNzYWdlRGV0YWlsVmlldyk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChNZXNzYWdlRGV0YWlsVmlldyk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VEZXRhaWxWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VEZXRhaWxWaWV3LmdldENvbXBvbmVudCgnTWVzc2FnZURldGFpbFZpZXcnKS5zZW5kR2V0TXNnTGlzdCgxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG5OYW1lID09IFwiQ2x1Yk1zZ0NlbGxcIikge1xyXG4gICAgICAgICAgICBjYy5sb2coXCJNZXNzYWdlVmlldy5DbHViTXNnQ2VsbFwiKTtcclxuICAgICAgICAgICAgdmFyIE1lc3NhZ2VEZXRhaWxWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5NZXNzYWdlRGV0YWlsVmlldyk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChNZXNzYWdlRGV0YWlsVmlldyk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VEZXRhaWxWaWV3LnNldFBvc2l0aW9uKGNjLnAoMCwwKSk7XHJcbiAgICAgICAgICAgIE1lc3NhZ2VEZXRhaWxWaWV3LmdldENvbXBvbmVudCgnTWVzc2FnZURldGFpbFZpZXcnKS5zZW5kR2V0TXNnTGlzdCgyKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMTkuXHJcbiAqL1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxuXHJcbmZ1bmN0aW9uIE1lc3NhZ2UoKVxyXG57XHJcbiAgICB0aGlzLmNtZCA9IDA7XHJcbiAgICB0aGlzLnNlcSA9IDA7XHJcbiAgICB0aGlzLnVpZCA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQ7XHJcblxyXG4gICAgdGhpcy5kYXRhID0gXCJcIiA7XHJcblxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbihkYXRhKVxyXG4gICAge1xyXG4gICAgfTtcclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgIH07XHJcbiAgICB0aGlzLnByb2NjZXNzID0gZnVuY3Rpb24odWkpXHJcbiAgICB7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lc3NhZ2U7IiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgQWxlcnRWaWV3ID0gcmVxdWlyZSgnQWxlcnRWaWV3Jyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBHYW1lQ2FsbE9DID0gcmVxdWlyZSgnR2FtZUNhbGxPQycpO1xyXG52YXIgVG9hc3RWaWV3ID0gcmVxdWlyZSgnVG9hc3RWaWV3Jyk7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIFVzZXJOaWNrIDogY2MuTGFiZWwsXHJcbiAgICAgICAgVXNlckhlYWQgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgVXNlclNleCA6IGNjLlNwcml0ZSxcclxuICAgICAgICBTZXhTcHJpdGVGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgVWlkTGFibGUgOiBjYy5MYWJlbCxcclxuICAgICAgICBEaWFtb25kIDogY2MuTGFiZWwsXHJcbiAgICAgICAgR29sZCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIE1lc3NhZ2VWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFJlZFRpcHMgICAgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIENsdWJWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFN1Y2Nlc3NWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFNoYXJlVmlldyA6IGNjLlByZWZhYixcclxuICAgICAgICBTZXR0aW5nVmlldyA6IGNjLlByZWZhYixcclxuICAgICAgICBOb3RpY2VWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFNob3BWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJ0blNoYXJlIDogY2MuTm9kZSxcclxuICAgICAgICBSZWZlcnJhbENvZGVWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJ0bk5vZGUgOiBbY2MuTm9kZV0sXHJcbiAgICAgICAgUm9vbUNhcmRDb3VudCA6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdEJhc2VEYXRhKCk7XHJcbiAgICAgICAgdGhpcy5SZWRUaXBzLm5vZGUuYWN0aXZlID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLk5ld01zZ051bTtcclxuXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBpbml0QmFzZURhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5Vc2VyTmljay5zdHJpbmcgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkubmFtZTtcclxuICAgICAgICB0aGlzLlVpZExhYmxlLnN0cmluZyA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS51aWQ7XHJcbiAgICAgICAgdGhpcy5EaWFtb25kLnN0cmluZyA9IEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5kaWFtb25kO1xyXG4gICAgICAgIHRoaXMuR29sZC5zdHJpbmcgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuZ29sZDtcclxuICAgICAgICB0aGlzLlJvb21DYXJkQ291bnQuc3RybmcgPSBHYW1lUGxheWVyLmdldEluc3RhbmNlKCkucm9vbWNhcmQ7XHJcbiAgICAgICAgVXBkYXRlV1hIZWFkSWNvbihHYW1lUGxheWVyLmdldEluc3RhbmNlKCkuaGVhZHVybFxyXG4gICAgICAgICAgICAsdGhpcy5Vc2VySGVhZCk7XHJcbiAgICAgICAgdGhpcy5Vc2VyU2V4LnNwcml0ZUZyYW1lID0gdGhpcy5Vc2VyU2V4W0dhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZXhdO1xyXG5cclxuICAgICAgICBpZiAoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1cyA9PSBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzVHlwZS5WRVJTSU9OX1RZUEVfQVVESVRcclxuICAgICAgICAgICAgJiYgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLmNoZWNrSXNBYmxlKCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bk5vZGVbMF0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuTm9kZVsxXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkJ0bk5vZGVbMV0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuTm9kZVswXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSlcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coXCJNaW5lVmlldy5jYWxsYmFja0J0bixDdXN0b21FdmVudERhdGEgPSBcIiArIEN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIk1pbmVWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoYnRuTmFtZSA9PSBcIkJ0bk1lc3NhZ2VcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtZXNzYWdlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuTWVzc2FnZVZpZXcpO1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmFkZENoaWxkKG1lc3NhZ2VWaWV3KTtcclxuICAgICAgICAgICAgbWVzc2FnZVZpZXcuc2V0UG9zaXRpb24oY2MucCh3aW5TaXplLndpZHRoLzIsd2luU2l6ZS5oZWlnaHQvMikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5DbHVlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgY2x1YlZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLkNsdWJWaWV3KTtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChjbHViVmlldyk7XHJcbiAgICAgICAgICAgIGNsdWJWaWV3LnNldFBvc2l0aW9uKGNjLnAod2luU2l6ZS53aWR0aC8yLHdpblNpemUuaGVpZ2h0LzIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG5OYW1lID09IFwiQnRuU3VjY2Vzc1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHN1Y2Nlc3NWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5TdWNjZXNzVmlldyk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQoc3VjY2Vzc1ZpZXcpO1xyXG4gICAgICAgICAgICBzdWNjZXNzVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMix3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuTmFtZSA9PSBcIkJ0blNoYXJlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzID09IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXNUeXBlLlZFUlNJT05fVFlQRV9BVURJVClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgVG9hc3RWaWV3LnNob3coXCLlip/og73mmoLmnKrlvIDmlL5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzaGFyZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlNoYXJlVmlldyk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQoc2hhcmVWaWV3KTtcclxuICAgICAgICAgICAgc2hhcmVWaWV3LnNldFBvc2l0aW9uKGNjLnAod2luU2l6ZS53aWR0aC8yLHdpblNpemUuaGVpZ2h0LzIpKTtcclxuICAgICAgICAgICAgdmFyIHN0cmluZyA9IFwi5oiR5q2j5Zyo546p5ri45oiP77y7XCIgKyBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuZ2V0QXBwTmFtZSgpICtcIu+8vSzlv6vngrnkuIDotbfmnaXnjqnlkKfvvIHvvIHvvIFcIjtcclxuICAgICAgICAgICAgc2hhcmVWaWV3LmdldENvbXBvbmVudChcIlNoYXJlVmlld1wiKS5zZXRTaGFyZVR5ZXAoU2hhcmVUeXBlLkVfU0hBUkVUWVBFX0xJTkssc3RyaW5nLEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5jbGllbnR1cmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5TZXJ2aWNlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgYWxlcnRFeGl0ID0gQWxlcnRWaWV3LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICBhbGVydEV4aXQuc2hvd09uZShHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkud2VpeGluY3MsIEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpO1xyXG4gICAgICAgICAgICAvLyB2YXIgc2VydmljZVZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlNlcnZpY2VWaWV3KTtcclxuICAgICAgICAgICAgLy8gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChzZXJ2aWNlVmlldyk7XHJcbiAgICAgICAgICAgIC8vIHNlcnZpY2VWaWV3LnNldFBvc2l0aW9uKGNjLnAod2luU2l6ZS53aWR0aC8yLHdpblNpemUuaGVpZ2h0LzIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG5OYW1lID09IFwiQnRuTm90aWNlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbm90aWNlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuTm90aWNlVmlldyk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQobm90aWNlVmlldyk7XHJcbiAgICAgICAgICAgIG5vdGljZVZpZXcuc2V0UG9zaXRpb24oY2MucCh3aW5TaXplLndpZHRoLzIsd2luU2l6ZS5oZWlnaHQvMikpO1xyXG4gICAgICAgICAgICBub3RpY2VWaWV3LmdldENvbXBvbmVudCgnTm90aWNlVmlldycpLnNldENvbnRlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihidG5OYW1lID09IFwiQnRuU2V0dGluZ1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNldHRpbmdWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5TZXR0aW5nVmlldyk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQoc2V0dGluZ1ZpZXcpO1xyXG4gICAgICAgICAgICBzZXR0aW5nVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMix3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5NaW5lSW5mb1wiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNob3BWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5TaG9wVmlldyk7XHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQoc2hvcFZpZXcpO1xyXG4gICAgICAgICAgICBzaG9wVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMiwgd2luU2l6ZS5oZWlnaHQvMikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5Db2RlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucmVmZXJyYWxDb2RlICE9IDApXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5jcmVhdGVSZWZlcnJhbENvZGVWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9LFwi56Gu5a6aXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzdHIgPSBcIuaCqOW3sue7j+e7keWumuS6huaOqOW5v+eggTpcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5yZWZlcnJhbENvZGU7XHJcbiAgICAgICAgICAgICAgICBhbGVydC5zaG93KHN0ciAsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZWZlcnJhbENvZGVWaWV3ID0gY2MuaW5zdGFudGlhdGUodGhpcy5SZWZlcnJhbENvZGVWaWV3KTtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChyZWZlcnJhbENvZGVWaWV3KTtcclxuICAgICAgICAgICAgcmVmZXJyYWxDb2RlVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMiwgd2luU2l6ZS5oZWlnaHQvMikpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzguXHJcbiAqL1xyXG5cclxuLypcclxuKiB0eXBlIENMVUJfUkVRX01PRElGWV9JTkZPX1Qgc3RydWN0IHtcclxuIENsdWJIZWFkXHJcbiBQYXJhbSBQQVJBTV9SRVFfTU9ESUZZX0lORk9fVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFUV9NT0RJRllfSU5GT19UIHN0cnVjdCB7XHJcbiBIZWFkVXJsIHN0cmluZyBganNvbjpcImhlYWR1cmxcImBcclxuIEFkZHJlc3Mgc3RyaW5nIGBqc29uOlwiYWRkcmVzc1wiYFxyXG4gSW50cm8gICBzdHJpbmcgYGpzb246XCJpbnRyb1wiYFxyXG4gTGV2ZWwgICBpbnQgICAgYGpzb246XCJsZXZlbFwiYFxyXG4gUmVuZXcgICBpbnQgICAgYGpzb246XCJyZW5ld1wiYCAvL+e7rei0uSwg5aaC5p6c5LiN57ut6LS55bCx5pivMFxyXG4gfVxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKVxyXG5cclxuZnVuY3Rpb24gTW9kaWZ5Q2x1YkluZm9SZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuQ0xVQl9SRVFfTU9ESUZZX0lORk9fQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiTW9kaWZ5Q2x1YkluZm9SZXFQYWNrZXQuc2VuZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQgICA6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXEgICA6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQgICA6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBjbHViaWQ6IG1zZy5jbHViaWQsXHJcbiAgICAgICAgICAgIHBhcmFtIDoge1xyXG4gICAgICAgICAgICAgICAgaGVhZHVybCA6IG1zZy5oZWFkdXJsLFxyXG4gICAgICAgICAgICAgICAgYWRkcmVzcyA6IG1zZy5hZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgbmFtZSAgICA6IG1zZy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgaW50cm8gICA6IG1zZy5pbnRybyxcclxuICAgICAgICAgICAgICAgIGxldmVsICAgOiBtc2cubGV2ZWwsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBNb2RpZnlDbHViSW5mb1JlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC84LlxyXG4gKi9cclxuLypcclxuKiB0eXBlIENMVUJfUkVTUF9NT0RJRllfSU5GT19UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFBhcmFtIFBBUkFNX1JFU1BfTU9ESUZZX0lORk9fVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1JFU1BfTU9ESUZZX0lORk9fVCBzdHJ1Y3Qge1xyXG4gQ2x1YklkICBpbnQgICAgYGpzb246XCJjbHViaWRcImBcclxuIFN0YXR1cyAgaW50ICAgIGBqc29uOlwic3RhdHVzXCJgXHJcbiBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gQWRkcmVzcyBzdHJpbmcgYGpzb246XCJhZGRyZXNzXCJgXHJcbiBJbnRybyAgIHN0cmluZyBganNvbjpcImludHJvXCJgXHJcbiBMZXZlbCAgIGludCAgICBganNvbjpcImxldmVsXCJgXHJcbiBFbmRUaW1lIGludDY0ICBganNvbjpcImVuZHRpbWVcImBcclxuIH1cclxuKiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gTW9kaWZ5Q2x1YkluZm9SZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX1JFU1BfTU9ESUZZX0lORk9fQ01EX0lEO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmICh0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5wYXJhbSA9IG1zZy5wYXJhbTtcclxuXHJcbiAgICAgICAgY2MubG9nKFwiTW9kaWZ5Q2x1YkluZm9SZXNwUGFja2V0IGNtZD1cIiwgdGhpcy5jbWQpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTW9kaWZ5Q2x1YkluZm9SZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzEzLlxyXG4gKi9cclxuLypcclxuKiB0eXBlIFVTX1JFUV9TRVRfTVNHX1JFQURfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFBhcmFtIFBBUkFNX1NFVF9NU0dfUkVBRF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuKiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG5cclxuZnVuY3Rpb24gTXNnUmVhZFJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfU0VUX01TR19SRUFEX0NNRF9JRDtcclxuXHJcbiAgICAvL+WHhuWkh+WPkemAgeeahOaVsOaNrlxyXG4gICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIkdldE1zZ051bVJlcVBhY2tldC5zZW5kXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSB7XHJcbiAgICAgICAgICAgIGNtZDogdGhpcy5jbWQsXHJcbiAgICAgICAgICAgIHNlcTogdGhpcy5zZXEsXHJcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTXNnUmVhZFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvNC8xMy5cclxuICovXHJcbi8qXHJcbiogdHlwZSBVU19SRVNQX1NFVF9NU0dfUkVBRF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFBhcmFtIFBBUkFNX1NFVF9NU0dfUkVBRF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fU0VUX01TR19SRUFEX1Qgc3RydWN0IHtcclxuIFR5cGUgIGludCBganNvbjpcInR5cGVcImBcclxuIE1zZ0lkIGludCBganNvbjpcIm1zZ2lkXCJgXHJcbiB9XHJcbiogKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gTXNnUmVhZFJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfU0VUX01TR19SRUFEX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIE1zZ1JlYWRSZXNwUGFja2V0OyIsInZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG52YXIgTXVzaWNNZ3IgPSB7XHJcbiAgICBfYXVkaW9Wb2x1bWUgOiAxLjAsXHJcbiAgICBfbXVzaWNWb2x1bWUgOiAxLjAsXHJcbiAgICBfaXNTaGFrZSA6IHRydWUsXHJcbiAgICBfYmdtaWQgOiAtMSAsXHJcbiAgICBtX2lzQXVkaW9PbiA6IHRydWUsXHJcbiAgICBtX2lzTXVzaWNPbiA6IHRydWUsXHJcblxyXG5cclxuICAgIGluaXRBdWRpbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBpbml0XHJcbiAgICAgICAgaWYgKCBjYy5zeXMubG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KFwiU0hBS0VfT1BFTlwiKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU2hha2UgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJTSEFLRV9PUEVOXCIpXHJcbiAgICAgICAgICAgIHRoaXMuX2lzU2hha2UgPSB0aGlzLl9pc1NoYWtlPT1cInRydWVcIj90cnVlOmZhbHNlIDtcclxuICAgICAgICAgICAgY2MubG9nKFwiTXVzaWNNZ3IuaW5pdEF1ZGlvLHRoaXMuX2lzU2hha2UgPSBcIiArIHRoaXMuX2lzU2hha2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYy5zeXMubG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KFwiQVVESU9fVk9MVU1FXCIpKXtcclxuICAgICAgICAgICAgdGhpcy5fYXVkaW9Wb2x1bWUgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJBVURJT19WT0xVTUVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvVm9sdW1lID0gcGFyc2VGbG9hdCh0aGlzLl9hdWRpb1ZvbHVtZSk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIk11c2ljTWdyLmluaXRBdWRpbyx0aGlzLl9hdWRpb1ZvbHVtZSA9IFwiICsgdGhpcy5fYXVkaW9Wb2x1bWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYy5zeXMubG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KFwiTVVTSUNfVk9MVU1FXCIpKXtcclxuICAgICAgICAgICAgdGhpcy5fbXVzaWNWb2x1bWUgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJNVVNJQ19WT0xVTUVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX211c2ljVm9sdW1lID0gcGFyc2VGbG9hdCh0aGlzLl9tdXNpY1ZvbHVtZSk7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIk11c2ljTWdyLmluaXRBdWRpbyx0aGlzLl9tdXNpY1ZvbHVtZSA9IFwiICsgdGhpcy5fbXVzaWNWb2x1bWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYy5zeXMubG9jYWxTdG9yYWdlLmhhc093blByb3BlcnR5KFwibV9pc0F1ZGlvT25cIikpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tX2lzQXVkaW9PbiA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1faXNBdWRpb09uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLm1faXNBdWRpb09uID0gdGhpcy5tX2lzQXVkaW9Pbj09XCJ0cnVlXCI/dHJ1ZTpmYWxzZSA7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIk11c2ljTWdyLmluaXRBdWRpbyx0aGlzLm1faXNBdWRpb09uID0gXCIgKyB0aGlzLm1faXNBdWRpb09uKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNjLnN5cy5sb2NhbFN0b3JhZ2UuaGFzT3duUHJvcGVydHkoXCJtX2lzTXVzaWNPblwiKSl7XHJcbiAgICAgICAgICAgIHRoaXMubV9pc011c2ljT24gPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtX2lzTXVzaWNPblwiKTtcclxuICAgICAgICAgICAgdGhpcy5tX2lzTXVzaWNPbiA9IHRoaXMubV9pc011c2ljT249PVwidHJ1ZVwiP3RydWU6ZmFsc2UgO1xyXG4gICAgICAgICAgICBjYy5sb2coXCJNdXNpY01nci5pbml0QXVkaW8sdGhpcy5tX2lzTXVzaWNPbiA9IFwiICsgdGhpcy5tX2lzTXVzaWNPbik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoXHJcbiAgICAgKiBAcGFyYW0gb25qcyAg5piv5ZCm5oyC5Zyo6ISa5pys5LiKXHJcbiAgICAgKi9cclxuICAgIHBsYXlCYWNrZ3JvdW5kTXVzaWMgOiBmdW5jdGlvbiAocGF0aCwgb25qcykge1xyXG4gICAgICAgIGNjLmxvZyhcIk11c2ljTWdyLnBsYXlCYWNrZ3JvdW5kTXVzaWMscGF0aCA9IFwiICsgcGF0aCk7XHJcbiAgICAgICAgaWYodGhpcy5tX2lzTXVzaWNPbiApe1xyXG5cclxuICAgICAgICAgICAgaWYodGhpcy5fYmdtaWQgPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvSUQgPSAtMSA7XHJcbiAgICAgICAgICAgICAgICBpZihvbmpzKXtcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb0lEID0gY2MuYXVkaW9FbmdpbmUucGxheSggcGF0aCwgdHJ1ZSAsdGhpcy5fbXVzaWNWb2x1bWUpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJnbSA9IGNjLnVybC5yYXcocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9JRCA9IGNjLmF1ZGlvRW5naW5lLnBsYXkoIGJnbSwgdHJ1ZSAsdGhpcy5fbXVzaWNWb2x1bWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2JnbWlkID0gYXVkaW9JRDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VtZUJhY2tncm91bmRNdXNpYygpIDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc3RvcEVmZmVjdCA6IGZ1bmN0aW9uIChhdWRpb0lEKSB7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcChhdWRpb0lEKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gYWRkIGJ5IGphY2t5dVxyXG4gICAgc2V0Vm9sdW1lUXVpdGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUuc2V0RWZmZWN0c1ZvbHVtZSgwLjEpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICBzdG9wQmFja2dyb3VuZE11c2ljIDogZnVuY3Rpb24oICl7XHJcbiAgICAgICAgbGV0IHN0YXRlID0gY2MuYXVkaW9FbmdpbmUuZ2V0U3RhdGUoIHRoaXMuX2JnbWlkKVxyXG4gICAgICAgIGlmKCBzdGF0ZSAhPSBjYy5hdWRpb0VuZ2luZS5BdWRpb1N0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnN0b3AodGhpcy5fYmdtaWQpXHJcbiAgICAgICAgICAgIHRoaXMuX2JnbWlkICA9IC0xXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBwYXVzZUJhY2tncm91bmRNdXNpYyA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCB0aGlzLl9iZ21pZCAhPSAtMSl7XHJcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnBhdXNlKCB0aGlzLl9iZ21pZClcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlc3VtZUJhY2tncm91bmRNdXNpYyA6IGZ1bmN0aW9uKCkge1xyXG4gICAgXHRcclxuICAgICAgICBpZiggdGhpcy5fYmdtaWQgIT0gLTEgJiYgdGhpcy5tX2lzTXVzaWNPbil7XHJcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnJlc3VtZSggdGhpcy5fYmdtaWQpXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNdXNpY1ZvbHVtZSA6IGZ1bmN0aW9uKCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX211c2ljVm9sdW1lID0gdmFsdWVcclxuICAgICAgICB0aGlzLm1faXNNdXNpY09uID0gdGhpcy5fbXVzaWNWb2x1bWUgPiAwO1xyXG4gICAgICAgIHRoaXMuX3NhdmVNdXNpY1ZhbHVlKCk7XHJcblxyXG5cclxuICAgICAgICBpZiggdGhpcy5fYmdtaWQgIT0gLTEpe1xyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5zZXRWb2x1bWUoIHRoaXMuX2JnbWlkLCB0aGlzLl9tdXNpY1ZvbHVtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRNdXNpY1ZvbHVtZSA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tdXNpY1ZvbHVtZVxyXG4gICAgfSxcclxuXHJcbiAgICBfc2F2ZU11c2ljVmFsdWUgOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJNVVNJQ19WT0xVTUVcIiwgdGhpcy5fbXVzaWNWb2x1bWUpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU11c2ljT04oKSA7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKip0aGlzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGhcclxuICAgICAqIEBwYXJhbSBsb2FkT25qcyAg5piv5ZCm5oyC5ZyoIOiEmuacrOS4iueahOi1hOa6kFxyXG4gICAgICovXHJcbiAgICBwbGF5RWZmZWN0IDogZnVuY3Rpb24gKHBhdGgsbG9hZE9uanMpXHJcbiAgICB7XHJcbiAgICBcdGlmKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5Wb2x1bWVTdGF0ZSA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgIFx0XHRpZih0aGlzLm1faXNBdWRpb09uKXtcclxuICAgICAgICAgICAgICAgIGlmKGxvYWRPbmpzKXtcclxuICAgICAgICAgICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KHBhdGgsZmFsc2UgLHRoaXMuX2F1ZGlvVm9sdW1lKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGlwID0gY2MudXJsLnJhdyhwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wbGF5KGNsaXAsZmFsc2UgLHRoaXMuX2F1ZGlvVm9sdW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBzZXRFZmZlY3RzVm9sdW1lIDogZnVuY3Rpb24oIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYXVkaW9Wb2x1bWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLm1faXNBdWRpb09uID0gdGhpcy5fYXVkaW9Wb2x1bWU+MDtcclxuICAgICAgICB0aGlzLl9zYXZlRWZmZWN0VmFsdWUoKTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIGdldEVmZmVjdFZvbHVtZSA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdWRpb1ZvbHVtZTtcclxuICAgIH0sXHJcblxyXG4gICAgX3NhdmVFZmZlY3RWYWx1ZSA6IGZ1bmN0aW9uKCApIHtcclxuXHJcblxyXG4gICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIkFVRElPX1ZPTFVNRVwiLCB0aGlzLl9hdWRpb1ZvbHVtZSk7XHJcbiAgICAgICAgdGhpcy5zYXZlQXVkaW9PTigpIDtcclxuICAgIH0sXHJcblxyXG4gICAgcGxheVNoYWtlIDogZnVuY3Rpb24oICl7XHJcbiAgICAgICAgY2MubG9nKCBcIumch+WKqOi/mOacquWunueOsO+8gVwiKVxyXG4gICAgfSxcclxuXHJcbiAgICBpc1NoYWtlT24gOiBmdW5jdGlvbiggKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNTaGFrZVxyXG4gICAgfSxcclxuXHJcbiAgICBpc1NoYWtlT3BlbiA6IGZ1bmN0aW9uKCApe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1NoYWtlXHJcbiAgICB9LFxyXG4gICAgc2V0U2hha2VPbiA6IGZ1bmN0aW9uKCBiRW5hYmxlKSB7XHJcbiAgICAgICAgdGhpcy5faXNTaGFrZSA9IGJFbmFibGVcclxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJTSEFLRV9PUEVOXCIsIHRoaXMuX2F1ZGlvVm9sdW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgcHJlbG9hZCA6IGZ1bmN0aW9uKCBwYXRoKSB7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucHJlbG9hZChwYXRoLGZ1bmN0aW9uICgpe30pXHJcbiAgICB9LFxyXG5cclxuICAgIHNhdmVNdXNpY09OIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1faXNNdXNpY09uXCIsIHRoaXMubV9pc011c2ljT24pO1xyXG4gICAgfSxcclxuICAgIHNhdmVBdWRpb09OIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1faXNBdWRpb09uXCIsIHRoaXMubV9pc0F1ZGlvT24pO1xyXG4gICAgfSxcclxuXHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNdXNpY01ncjsiLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhYmxlTXNnIDogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5HYW1lSW5mb0xpc3RlbmVySUQgPSAtMSA7XHJcbiAgICAgICAgdGhpcy5zb2NrZXRNZXNzYWdlTGlzdGVuZXJJRCA9IC0xIDtcclxuICAgICAgICB0aGlzLm5vZGUub3BhY2l0eSA9IDAgO1xyXG4gICAgICAgIHRoaXMudGlwc0NvdW50ID0gMCA7XHJcblxyXG4gICAgICAgIHRoaXMuaXNOZXRDb25uZWN0aW5nID0gdHJ1ZSA7XHJcblxyXG4gICAgICAgIHRoaXMuYmFzZVRpcHMgPSBcIlwiIDtcclxuXHJcbiAgICAgICAgdGhpcy5vbk5ldENoZWNrTGlzdGVuZXIoKSA7XHJcbiAgICAgICAgdGhpcy5hZGRTb2NrZXRMaXN0ZW5lcigpIDtcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLnJlbW92ZUxpc3RlbmVyKHRoaXMuR2FtZUluZm9MaXN0ZW5lcklEKTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZW1vdmVMaXN0ZW5lcih0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25OZXRDaGVja0xpc3RlbmVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzIDtcclxuICAgIHRoaXMuR2FtZUluZm9MaXN0ZW5lcklEID0gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3cuR2FtZUVuZ2luZUluZm8sXHJcbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBldmVudC50YWcgO1xyXG4gICAgICAgICAgICAgICAgaWYodGFnID09IHdpbmRvdy5HYW1lSW5mby5OZXRPbmxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaXNOZXRDb25uZWN0aW5nID0gdHJ1ZSA7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5ub2RlLm9wYWNpdHkgPSAwIDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnVuc2NoZWR1bGUoc2VsZi51cGRhdGVUaXBTaG93KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHRhZyA9PSB3aW5kb3cuR2FtZUluZm8uTmV0T2ZmbGluZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pc05ldENvbm5lY3RpbmcgPSBmYWxzZSA7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5ub2RlLm9wYWNpdHkgPSAyNTUgO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGlwc0NvdW50ID0gMCA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYmFzZVRpcHMgPSBcIue9kee7nOW8guW4uO+8jOato+WcqOmHjei/nuS4rVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGFibGVNc2cuc3RyaW5nID0gc2VsZi5iYXNlVGlwcyA7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zY2hlZHVsZShzZWxmLnVwZGF0ZVRpcFNob3csMC4zKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSx0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy9zb2NrZXTmtojmga9cclxuICAgIGFkZFNvY2tldExpc3RlbmVyOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEID0gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAgZnVuY3Rpb24oIGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoZXZlbnQgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGV2ZW50LnRhZyA7XHJcbiAgICAgICAgICAgICAgICAvL+i/nuaOpeacjeWKoeWZqOaIkOWKn1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuU09DS0VUX0NPTk5FQ1RFRClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm9uU29ja2V0Q29ubmVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aWreW8gOi/nuaOpVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5TT0NLRVRfRElTQ09OTkVDVEVEKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYub25Tb2NrZXREaXNjb25uZWN0ZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v6L+e5o6l5LitXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHR5cGUgPT0gd2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9DT05ORUNUSU5HKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/ov57mjqXlpLHotKVcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSB3aW5kb3cuTWVzc2FnZVR5cGUuTVNHX05FVFdPUktfRkFJTFVSRSlcclxuICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aUtuWIsOa2iOaBr1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZih0eXBlID09IHdpbmRvdy5NZXNzYWdlVHlwZS5TT0NLRVRfTUVTU0FHRSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSx0aGlzKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG9uU29ja2V0Q29ubmVjdGVkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyA7XHJcbiAgICAgICAgc2VsZi5ub2RlLm9wYWNpdHkgPSAwIDtcclxuICAgICAgICBzZWxmLnVuc2NoZWR1bGUoc2VsZi51cGRhdGVUaXBTaG93KTtcclxuICAgIH0sXHJcblxyXG4gICAgb25Tb2NrZXREaXNjb25uZWN0ZWQgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyA7XHJcbiAgICAgICAgc2VsZi51bnNjaGVkdWxlKHNlbGYudXBkYXRlVGlwU2hvdyk7XHJcbiAgICAgICAgaWYoc2VsZi5pc05ldENvbm5lY3Rpbmcpe1xyXG4gICAgICAgICAgICBzZWxmLm5vZGUub3BhY2l0eSA9IDI1NSA7XHJcbiAgICAgICAgICAgIHNlbGYudGlwc0NvdW50ID0gMCA7XHJcblxyXG4gICAgICAgICAgICBzZWxmLmJhc2VUaXBzID0gXCLmnI3liqHlmajov57mjqXlpLHotKXvvIzliqrlipvph43ov57kuK1cIjtcclxuICAgICAgICAgICAgc2VsZi5sYWJsZU1zZy5zdHJpbmcgPSBzZWxmLmJhc2VUaXBzIDtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuc2NoZWR1bGUoc2VsZi51cGRhdGVUaXBTaG93LDAuMyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVUaXBTaG93IDogZnVuY3Rpb24gKHRpcHMpIHtcclxuICAgICAgICB0aGlzLnRpcHNDb3VudCArKyA7XHJcbiAgICAgICAgdmFyIHRpcHMgPSB0aGlzLmJhc2VUaXBzIDtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnRpcHNDb3VudCU0IDtcclxuICAgICAgICBmb3IodmFyIGkgPTA7IGk8aW5kZXg7IGkrKyl7XHJcbiAgICAgICAgICAgIHRpcHMgKz0gXCLjgIJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJsZU1zZy5zdHJpbmcgPSB0aXBzIDtcclxuXHJcbiAgICB9XHJcblxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKFwiQmFzZVBvcFwiKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoXCJNdXNpY01nclwiKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoXCJBdWRpb19Db21tb25cIik7XHJcbnZhciBVdGlsVG9vbCAgID0gcmVxdWlyZSgnVXRpbFRvb2wnKTtcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBUaXRsZTogY2MuTGFiZWwsXHJcbiAgICAgICAgRG9jOiBjYy5MYWJlbCxcclxuICAgICAgICBXcml0ZXI6IGNjLkxhYmVsLFxyXG4gICAgICAgIFRpbWU6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIFxyXG4gICAgY2FsbGJhY2tCdG5DbG9zZSA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdOb3RpY2VWaWV3IDogY2FsbGJhY2tCdG5DbG9zZScpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldENvbnRlbnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLm5vdGljZS50aXRsZSxcclxuICAgICAgICAvLyBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkubm90aWNlLndyaXRlclxyXG4gICAgICAgIC8vIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UudGltZVxyXG4gICAgICAgIHRoaXMuVGl0bGUuc3RyaW5nID0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLm5vdGljZS50aXRsZSArIFwiOlwiO1xyXG4gICAgICAgIHRoaXMuRG9jLnN0cmluZyA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UuZG9jO1xyXG4gICAgICAgIHRoaXMuV3JpdGVyLnN0cmluZyA9IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2Uud3JpdGVyO1xyXG4gICAgICAgIHRoaXMuVGltZS5zdHJpbmcgPSBVdGlsVG9vbC5nZXRGb3JtYXREYXRhKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5ub3RpY2UudGltZSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzkuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcbi8qXHJcbiogdHlwZSBDTFVCX05PVElGWV9PV05FUl9DT05GSVJNX1Qgc3RydWN0IHtcclxuIENsdWJIZWFkXHJcbiBQYXJhbSBDTFVCX01TR19KT0lOX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBDTFVCX01TR19KT0lOX1Qgc3RydWN0IHtcclxuIFVpZCAgICAgdWludDMyIGBqc29uOlwidWlkXCJgXHJcbiBOYW1lICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gU2V4ICAgICBpbnQgICAgYGpzb246XCJzZXhcImBcclxuIH1cclxuKiAqL1xyXG5mdW5jdGlvbiBOb3RpZnlDbHViT3duZXJDb25maXJtUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5DTFVCX05PVElGWV9PV05FUl9DT05GSVJNX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuY2x1YmlkID0gbXNnLmNsdWJpZDtcclxuICAgICAgICB0aGlzLnBhcmFtICA9IG1zZy5wYXJhbTtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBOb3RpZnlDbHViT3duZXJDb25maXJtUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG5mdW5jdGlvbiBOb3RpZnlEaXNtaXNzR2FtZSgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfTk9USUZZX0RJU01JU1NfR0FNRV9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAvL0dsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBOb3RpZnlEaXNtaXNzR2FtZTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy81LlxyXG4gKi9cclxuLypcclxuKiB0eXBlIFVTX05PVElGWV9HQU1FX1NXSVRDSF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIElzU3RhcnQgICBpbnQgYGpzb246XCJpc3N0YXJ0XCJgXHJcbiBSZWFkeVRpbWUgaW50IGBqc29uOlwicmVhZHl0aW1lXCJgXHJcbiB9XHJcbiogKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcblxyXG5mdW5jdGlvbiBOb3RpZnlHYW1lU3RhcnRQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG4gICAgLy8ge1wiY21kXCI6NjU1MzYxOCxcInNlcVwiOjAsXCJ1aWRcIjoxMDAxMCxcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJpc3N0YXJ0XCI6MSxcInJlYWR5dGltZVwiOjd9XHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19OT1RJRllfR0FNRV9TV0lUQ0hfQ01EX0lEO1xyXG4gICAgdGhpcy5pc1N0YXJ0ID0gMDtcclxuICAgIHRoaXMucmVhZHlUaW1lID0gMDtcclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuaXNTdGFydCAgID0gbXNnLmlzc3RhcnQ7XHJcbiAgICAgICAgdGhpcy5yZWFkeVRpbWUgPSBtc2cucmVhZHl0aW1lO1xyXG4gICAgICAgIHRoaXMudHN0YXR1cyAgID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy51c3RhdHVzICAgPSBtc2cudXN0YXR1cztcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIE5vdGlmeUdhbWVTdGFydFBhY2tldDtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgemhvdXh1ZXNoaSBvbiAyMDE3LzUvMTQuXHJcbiAqL1xyXG5cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gTm90aWZ5SW5HYW1lUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfTk9USUZZX0lOX0dBTUVfQ01EX0lEO1xyXG4gICAgdGhpcy5nYW1lc3ZjaWQgPSAwO1xyXG4gICAgdGhpcy50YWJsZWlkICAgPSAwO1xyXG4gICAgdGhpcy5nYW1laWQgICAgPSAwO1xyXG4gICAgdGhpcy5nYW1lbGV2ZWwgPSAwO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICB0aGlzLmdhbWVzdmNpZCA9IG1zZy5nYW1lc3ZjaWQ7XHJcbiAgICAgICAgdGhpcy50YWJsZWlkICAgPSBtc2cudGFibGVpZDtcclxuICAgICAgICB0aGlzLmdhbWVpZCAgICA9IG1zZy5nYW1laWQ7XHJcbiAgICAgICAgdGhpcy5nYW1lbGV2ZWwgPSBtc2cuZ2FtZWxldmVsO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RpZnlJbkdhbWVSZXNwUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG5cclxuLypcclxuKiB0eXBlIE1BSUxfTVNHX09XTkVSX09WRVJfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gR2FtZVN2Y0lkIHVpbnQzMiBganNvbjpcImdhbWVzdmNpZFwiYFxyXG4gVGFibGVJZCAgIGludDMyICBganNvbjpcInRhYmxlaWRcImBcclxuIFByaXZhdGVJZCBpbnQgICAgYGpzb246XCJwcml2YXRlaWRcImBcclxuIFRhYmxlTmFtZSBzdHJpbmcgYGpvbnM6XCJ0YWJsZW5hbWVcImBcclxuIFJlbWFpblRpbWUgaW50ICAgYGpzb246XCJyZW1haW50aW1lXCJgIC8v56eSXHJcbiB9XHJcblxyXG4gLy/pgJrnn6XmoYzkuLvvvIzmnKzmoYzmuLjmiI/nu5PmnZ9cclxuIHR5cGUgVVNfTk9USUZZX09XTkVSX09WRVJfVEFCTEVfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFBhcmFtIE1BSUxfTVNHX09XTkVSX09WRVJfVEFCTEVfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiogKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gTm90aWZ5T3duZXJPdmVyUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19OT1RGSVlfT1dORVJfVEFCTEVJTkZPX0NNRF9JRDtcclxuICAgIHRoaXMuZ2FtZXN2Y2lkID0gMDtcclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcbiAgICB0aGlzLnByaXZhdGVpZCA9IDA7XHJcbiAgICB0aGlzLnRhYmxlbmFtZSA9IFwiXCI7XHJcbiAgICB0aGlzLnJlbWFpbnRpbWUgPSAwO1xyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5nYW1lc3ZjaWQgPSBtc2cuZ2FtZXN2Y2lkO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCA9IG1zZy50YWJsZWlkO1xyXG4gICAgICAgIHRoaXMucHJpdmF0ZWlkID0gbXNnLnByaXZhdGVpZDtcclxuICAgICAgICB0aGlzLnRhYmxlbmFtZSA9IG1zZy50YWJsZW5hbWU7XHJcbiAgICAgICAgdGhpcy5yZW1haW50aW1lID0gbXNnLnJlbWFpbnRpbWU7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBOb3RpZnlPd25lck92ZXJQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMy5cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoJ01lc3NhZ2VSZXNwJyk7XHJcblxyXG5mdW5jdGlvbiBOb3RpZnlPd25lclNpdFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfTk9USUZZX09XTkVSX0NPTkZJUk1fU0lUX0NNRF9JRDtcclxuXHJcbiAgICB0aGlzLnRhYmxlbmFtZSA9IFwiXCI7XHJcbiAgICB0aGlzLnNpdFVpZCA9IDA7XHJcbiAgICB0aGlzLm5hbWUgPSBcIlwiO1xyXG4gICAgdGhpcy5oZWFkdXJsID0gXCJcIjtcclxuICAgIHRoaXMuZ2FtZXN2Y2lkID0gMDtcclxuICAgIHRoaXMudGFibGVpZCA9IDA7XHJcbiAgICB0aGlzLnByaXZhdGVpZCA9IDA7XHJcbiAgICB0aGlzLnNlYXRpZCA9IC0xO1xyXG4gICAgdGhpcy5jb2luID0gMDtcclxuICAgIHRoaXMucGFyYW0gPSBcIlwiO1xyXG5cclxuICAgIC8v5o6l5pS255qE5pWw5o2uXHJcbiAgICB0aGlzLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMucGFyYW0gPSBtc2cucGFyYW07XHJcbiAgICAgICAgLy8gVGFibGVOYW1lICBzdHJpbmcgYGpzb246XCJ0YWJsZW5hbWVcImBcclxuICAgICAgICAvLyBTaXRVaWQgICAgIHVpbnQzMiBganNvbjpcInNpdHVpZFwiYFxyXG4gICAgICAgIC8vIE5hbWUgICAgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gICAgICAgIC8vIEhlYWRVcmwgICAgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gICAgICAgIC8vIEdhbWVTdmNJZCAgdWludDMyIGBqc29uOlwiZ2FtZXN2Y2lkXCJgXHJcbiAgICAgICAgLy8gVGFibGVJZCAgICBpbnQzMiAgYGpzb246XCJ0YWJsZWlkXCJgXHJcbiAgICAgICAgLy8gUHJpdmF0ZUlkICBpbnQgICAgYGpzb246XCJwcml2YXRlaWRcImBcclxuICAgICAgICAvLyBDcmVhdGVUaW1lIGludDY0ICBganNvbjpcImNyZWF0ZXRpbWVcImBcclxuICAgICAgICAvLyBTZWF0SWQgICAgIGludCAgICBganNvbjpcInNlYXRpZFwiYFxyXG4gICAgICAgIC8vIENvaW4gICAgICAgaW50ICAgIGBqc29uOlwiY29pblwiYFxyXG4gICAgICAgIC8vIFRpbWUgICAgICAgaW50NjQgIGBqc29uOlwidGltZVwiYFxyXG4gICAgICAgIGNjLmxvZyhcIk5vdGlmeU93bmVyU2l0UGFja2V0IHBhcmFtPVwiICsgbXNnLnBhcmFtKTtcclxuICAgICAgICB2YXIganNvbiAgICAgID0gbXNnLnBhcmFtO1xyXG4gICAgICAgIHRoaXMudGFibGVuYW1lID0ganNvbi50YWJsZW5hbWU7XHJcbiAgICAgICAgdGhpcy5zaXRVaWQgICAgPSBqc29uLnNpdHVpZDtcclxuICAgICAgICB0aGlzLm5hbWUgICAgICA9IGpzb24ubmFtZTtcclxuICAgICAgICB0aGlzLmhlYWR1cmwgICA9IGpzb24uaGVhZHVybDtcclxuICAgICAgICB0aGlzLmdhbWVzdmNpZCA9IGpzb24uZ2FtZXN2Y2lkO1xyXG4gICAgICAgIHRoaXMudGFibGVpZCAgID0ganNvbi50YWJsZWlkO1xyXG4gICAgICAgIHRoaXMucHJpdmF0ZWlkID0ganNvbi5wcml2YXRlaWQ7XHJcbiAgICAgICAgdGhpcy5zZWF0aWQgICAgPSBqc29uLnNlYXRpZDtcclxuICAgICAgICB0aGlzLmNvaW4gICAgICA9IGpzb24uY29pbjtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIE5vdGlmeU93bmVyU2l0UGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy80LzMwLlxyXG4gKi9cclxuXHJcblxyXG4vKlxyXG4gLy/pgJrnn6XnjqnlrrblhYXlgLzmiJDlip9cclxuIHR5cGUgQ1NfTk9USUZZX1BBWV9PUEVSQVRFX1Qgc3RydWN0IHtcclxuIEdhbWVIZWFkXHJcbiBQYXJhbSBSRVFfUEFZX09QRVJBVEVfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFJFUV9QQVlfT1BFUkFURV9UIHN0cnVjdCB7XHJcbiBPcFVpZCAgICAgdWludDMyIGBqc29uOlwib3B1aWRcImBcclxuIE9wVHlwZSAgICBpbnQgICAgYGpzb246XCJvcHR5cGVcImAgLy/mk43kvZznsbvlnotcclxuIE9wR29sZCAgICBpbnQgICAgYGpzb246XCJvcGdvbGRcImBcclxuIE9wRGlhbW9uZCBpbnQgICAgYGpzb246XCJvcGRpYW1vbmRcImBcclxuIE9yZGVyTnVtICBzdHJpbmcgYGpzb246XCJvcmRlcm51bVwiYCAvL+iuouWNleWPt1xyXG4gT3BUaW1lICAgIGludDY0ICBganNvbjpcIm9wdGltZVwiYFxyXG4gfVxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIE5vdGlmeVBheU9wZXJhdGVQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX05PVElGWV9QQVlfT1BFUkFURV9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnBhcmFtID0gbXNnLnBhcmFtO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgTm90aWZ5UGF5T3BlcmF0ZVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5mdW5jdGlvbiBPd25lckNvbmZpcm1SZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX09XTkVSX0NPTkZJUk1fQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogbXNnLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCAgIDogbXNnLnRhYmxlaWQsXHJcbiAgICAgICAgICAgIHBsYXllcnVpZCA6IG1zZy5wbGF5ZXJ1aWQsXHJcbiAgICAgICAgICAgIHByaXZhdGVpZCA6IG1zZy5wcml2YXRlaWQsXHJcbiAgICAgICAgICAgIHJlc3VsdCAgICA6IG1zZy5yZXN1bHQsICAgLy8gMTrlkIzmhI/vvIwyOuaLkue7nVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIE93bmVyQ29uZmlybVJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gT3duZXJDb25maXJtUmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9PV05FUl9DT05GSVJNX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgLy8gR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIE93bmVyQ29uZmlybVJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMS5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcblxyXG5mdW5jdGlvbiBPd25lcktpY2tPdXRQbGF5ZXJSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX09XTkVSX0tJQ0tPVVRfUExBWUVSQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBPd25lcktpY2tPdXRQbGF5ZXJSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMS5cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIE93bmVyS2lja091dFBsYXllclJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfT1dORVJfS0lDS09VVF9QTEFZRVJDTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgLy9HbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgT3duZXJLaWNrT3V0UGxheWVyUmVzcFBhY2tldDsiLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG53aW5kb3cuUGxhdGZvcm1fVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgRV9QTEFURk9STV9VTktPTlcgIDogMCxcclxuICAgIEVfUExBVEZPUk1fQU5EUk9JRCA6IDEsXHJcbiAgICBFX1BMQVRGT1JNX0lQSE9ORSAgOiAyLFxyXG4gICAgRV9QTEFURk9STV9JUEFEICAgIDogMyxcclxuICAgIEVfUExBVEZPUk1fTUFDICAgICA6IDQsXHJcbiAgICBFX1BMQVRGT1JNX1dJTkRPV1MgOiA1LFxyXG4gICAgRV9QTEFURk9STV9XRUIgICAgIDogNixcclxufSk7XHJcblxyXG52YXIgR2FtZUNhbGxPQyA9IHJlcXVpcmUoJ0dhbWVDYWxsT0MnKTtcclxuXHJcbmZ1bmN0aW9uICBQbGF0Zm9ybU1hbmFnZXIoKVxyXG57XHJcblxyXG59XHJcblxyXG5QbGF0Zm9ybU1hbmFnZXIucHJvdG90eXBlLmdldFBsYXRmb3JtQ29kZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNjLmxvZyhcIlBsYXRmb3JtTWFuYWdlci5wcm90b3R5cGUuZ2V0UGxhdGZvcm1UeXBlIHBsYXRmb3JtID0gXCIgKyBjYy5zeXMucGxhdGZvcm0pO1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KGNjLnN5cy5wbGF0Zm9ybSk7XHJcbn1cclxuXHJcblBsYXRmb3JtTWFuYWdlci5wcm90b3R5cGUuZ2V0T3NUeXBlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY2MubG9nKFwiUGxhdGZvcm1NYW5hZ2VyLnByb3RvdHlwZS5nZXRQbGF0Zm9ybVR5cGUgb3MgPSBcIiArIGNjLnN5cyk7XHJcbiAgICByZXR1cm4gY2Muc3lzLm9zO1xyXG59XHJcblxyXG5QbGF0Zm9ybU1hbmFnZXIucHJvdG90eXBlLmdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2V0T3NUeXBlKCk7XHJcbiAgICB2YXIgcGxhdGZvcm1Db2RlID0gdGhpcy5nZXRQbGF0Zm9ybUNvZGUoKTtcclxuICAgIGxldCBwbGF0Zm9ybSA9IHdpbmRvdy5QbGF0Zm9ybV9UeXBlLkVfUExBVEZPUk1fVU5LT05XO1xyXG4gICAgc3dpdGNoIChwbGF0Zm9ybUNvZGUpXHJcbiAgICB7XHJcbiAgICAgICAgY2FzZSBjYy5zeXMuV0lOMzI6XHJcbiAgICAgICAgY2FzZSBjYy5zeXMuV0lOUlQ6XHJcbiAgICAgICAgICAgIHBsYXRmb3JtID0gd2luZG93LlBsYXRmb3JtX1R5cGUuRV9QTEFURk9STV9XSU5ET1dTO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGNjLnN5cy5NQUNPUzpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX01BQztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBjYy5zeXMuQU5EUk9JRDpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX0FORFJPSUQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgY2Muc3lzLklQSE9ORTpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX0lQSE9ORTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBjYy5zeXMuSVBBRDpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX0lQQUQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgY2Muc3lzLk1PQklMRV9CUk9XU0VSOlxyXG4gICAgICAgIGNhc2UgY2Muc3lzLkRFU0tUT1BfQlJPV1NFUjpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX1dFQjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcGxhdGZvcm0gPSB3aW5kb3cuUGxhdGZvcm1fVHlwZS5FX1BMQVRGT1JNX1VOS09OVztcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBjYy5sb2coXCJwbGF0Zm9ybSA9IFwiICsgcGxhdGZvcm0pO1xyXG4gICAgcmV0dXJuIHBsYXRmb3JtO1xyXG59XHJcblxyXG5cclxuUGxhdGZvcm1NYW5hZ2VyLnByb3RvdHlwZS5nZXRMYW5ndWFnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNjLmxvZyhcIlBsYXRmb3JtTWFuYWdlci5nZXRMYW5ndWFnZSwgbGFuZ3VhZ2UgPSBcIiArIGNjLnN5cy5sYW5ndWFnZSk7XHJcblxyXG4gICAgcmV0dXJuIGNjLnN5cy5sYW5ndWFnZTtcclxufVxyXG5cclxuUGxhdGZvcm1NYW5hZ2VyLnByb3RvdHlwZS5nZXRQYWNrYWdlTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNjLmxvZyhcIlBsYXRmb3JtTWFuYWdlci5nZXRQYWNrYWdlTmFtZVwiKTtcclxuICAgIHZhciBwYWNrYWdlTmFtZSA9IFwiXCI7XHJcbiAgICB2YXIgb2piID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcIkpTQ2FsbEJhY2tPQ1wiLCBcImdldFBhY2thZ2VOYW1lXCIpO1xyXG4gICAgcmV0dXJuIHBhY2thZ2VOYW1lO1xyXG59XHJcblxyXG5QbGF0Zm9ybU1hbmFnZXIucHJvdG90eXBlLmdldEFwcFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdmVyc2lvbiA9IDE7XHJcblxyXG4gICAgY2MubG9nKFwiUGxhdGZvcm1NYW5hZ2VyLmdldEFwcFZlcnNpb24sdmVyc2lvbiA9IFwiICsgdmVyc2lvbik7XHJcbiAgICByZXR1cm4gdmVyc2lvbjtcclxufVxyXG5cclxuUGxhdGZvcm1NYW5hZ2VyLnByb3RvdHlwZS5nZXRCYXR0ZXJ5ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8vY2MubG9nKFwiUGxhdGZvcm1NYW5hZ2VyLmdldEJhdHRlcnksZGF0YSA9IFwiICsgSlNPTi5zdHJpbmdpZnkobmF2aWdhdG9yKSk7XHJcblxyXG4gICAgbGV0IGJhdHRlcnlMZXZlbCA9IDA7XHJcblxyXG4gICAgbmF2aWdhdG9yLmdldEJhdHRlcnkoKS50aGVuKGZ1bmN0aW9uKGJhdHRlcnkpIHtcclxuXHJcbiAgICAgICAgYmF0dGVyeUxldmVsID0gYmF0dGVyeS5sZXZlbDtcclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVMZXZlbEluZm8oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJCYXR0ZXJ5IGxldmVsOiBcIlxyXG4gICAgICAgICAgICAgICAgKyBiYXR0ZXJ5LmxldmVsICogMTAwICsgXCIlXCIpO1xyXG4gICAgICAgICAgICBiYXR0ZXJ5TGV2ZWwgPSBiYXR0ZXJ5LmxldmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVMZXZlbEluZm8oKTtcclxuXHJcbiAgICAgICAgYmF0dGVyeS5hZGRFdmVudExpc3RlbmVyKCdsZXZlbGNoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHVwZGF0ZUxldmVsSW5mbygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2MubG9nKFwiUGxhdGZvcm1NYW5hZ2VyLmdldEJhdHRlcnksIGxldmVsID0gXCIgKyBiYXR0ZXJ5TGV2ZWwpO1xyXG5cclxuICAgIHJldHVybiA7XHJcbn1cclxuXHJcblBsYXRmb3JtTWFuYWdlci5wcm90b3R5cGUuZ2V0U2lnbmFsU3RyZW5ndGggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjYy5sb2coXCJQbGF0Zm9ybU1hbmFnZXIuZ2V0U2lnbmFsU3RyZW5ndGhcIik7XHJcbn1cclxuXHJcblBsYXRmb3JtTWFuYWdlci5wcm90b3R5cGUuZ2VuZXJhdGVVVUlEID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgaWYodGhpcy5nZXRQbGF0Zm9ybVR5cGUoKSA9PSBQbGF0Zm9ybV9UeXBlLkVfUExBVEZPUk1fV0VCXHJcbiAgICB8fCB0aGlzLmdldFBsYXRmb3JtVHlwZSgpID09IFBsYXRmb3JtX1R5cGUuRV9QTEFURk9STV9BTkRST0lEKVxyXG4gICAge1xyXG4gICAgICAgIC8vd2Vi5bmz5Y+w5LiK6I635Y+W6K6+5aSHaWTnmoTmlrnms5XvvIzmmoLml7bmsqHmnInmm7Tlpb3nmoTvvIzov5nkuKrmlrnmoYjkuIvnmoTnorDmkp7njofkuI3lj4oxLzJeXjEyMizkv53lrZjlnKjmnKzlnLDmlbDmja4g5piT6KKr5Yig6ZmkXHJcbiAgICAgICAgdmFyIHV1aWQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3V1aWQnKTtcclxuICAgICAgICBjYy5sb2coXCJQbGF0Zm9ybU1hbmFnZXIuZ2VuZXJhdGVVVUlEMTExLHV1aWQgPSBcIiArIHV1aWQpO1xyXG4gICAgICAgIGlmKHV1aWQgPT0gMCB8fCB1dWlkID09IG51bGwgfHwgdXVpZCA9PSB1bmRlZmluZWQgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcclxuICAgICAgICAgICAgICAgIHZhciByID0gKGQgKyBNYXRoLnJhbmRvbSgpKjE2KSUxNiB8IDA7XHJcbiAgICAgICAgICAgICAgICBkID0gTWF0aC5mbG9vcihkLzE2KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYz09J3gnID8gciA6IChyJjB4M3wweDgpKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ1dWlkXCIsIHV1aWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYodGhpcy5nZXRQbGF0Zm9ybVR5cGUoKSA9PSBQbGF0Zm9ybV9UeXBlLkVfUExBVEZPUk1fSVBIT05FXHJcbiAgICAgICB8fCB0aGlzLmdldFBsYXRmb3JtVHlwZSgpID09IFBsYXRmb3JtX1R5cGUuRV9QTEFURk9STV9JUEFEXHJcbiAgICAgICAgfHwgdGhpcy5nZXRQbGF0Zm9ybVR5cGUoKSA9PSBQbGF0Zm9ybV9UeXBlLkVfUExBVEZPUk1fTUFDKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuZ2V0VVVJRCgpO1xyXG4gICAgfVxyXG4gICAgY2MubG9nKFwiUGxhdGZvcm1NYW5hZ2VyLmdlbmVyYXRlVVVJRCx1dWlkID0gXCIgKyB1dWlkKTtcclxuICAgIHJldHVybiB1dWlkO1xyXG59XHJcblxyXG5cclxudmFyIFBsYXRmb3JtID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaW5zdGFuY2UgO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEluc3RhbmNlKCl7XHJcbiAgICAgICAgaWYoIGluc3RhbmNlID09PSB1bmRlZmluZWQgKXtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgUGxhdGZvcm1NYW5hZ2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZSA6IGdldEluc3RhbmNlLFxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQbGF0Zm9ybTsiLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFVzZXJOYW1lICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFVpZCAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENhcnJ5Q29pbiA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFpoYW5HdW8gICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFdpblNjb3JlICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIEhlYWQgOiBjYy5TcHJpdGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL1widWlkXCI6MTEyNzksXCJuYW1lXCI6XCLmuLjlrqIxMTI3OVwiLFwiaGVhZHVybFwiOlwiIFwiLFwiY2Fycnljb2luXCI6NDAwMCxcIndpbmNvaW5cIjotOTU0XHJcbiAgICBzZXRTY29yZUluZm8gOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgVXBkYXRlV1hIZWFkSWNvbihtc2cuaGVhZHVybCx0aGlzLkhlYWQpO1xyXG5cclxuICAgICAgICB0aGlzLlVpZC5zdHJpbmcgICAgICAgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuVXNlck5hbWUuc3RyaW5nICA9IG1zZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuQ2FycnlDb2luLnN0cmluZyA9IFwi5bim5YWlXCIgKyBtc2cuY2Fycnljb2luO1xyXG5cclxuICAgICAgICB2YXIgY29pbiA9IG1zZy5jYXJyeWNvaW4gKyBtc2cud2luY29pbjtcclxuICAgICAgICB0aGlzLlpoYW5HdW8uc3RyaW5nICAgPSBcIuaImOaenFwiICsgY29pbjtcclxuXHJcbiAgICAgICAgaWYgKG1zZy53aW5jb2luID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuV2luU2NvcmUuc3RyaW5nID0gXCIrXCIgKyBtc2cud2luY29pbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobXNnLndpbmNvaW4gPT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLldpblNjb3JlLnN0cmluZyAgICAgPSBtc2cud2luY29pbjtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5zdHJpbmcgICAgID0gbXNnLndpbmNvaW47XHJcbiAgICAgICAgICAgIHRoaXMuV2luU2NvcmUubm9kZS5jb2xvciA9IGNjLkNvbG9yLkdSRUVOO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzIyLlxyXG4gKi9cclxuXHJcbmZ1bmN0aW9uIFBsYXllcigpIHtcclxuICAgIHRoaXMudWlkICAgICAgICA9IDA7XHJcbiAgICB0aGlzLm5hbWUgICAgICAgPSBcIlwiO1xyXG4gICAgdGhpcy5oZWFkdXJsICAgID0gXCJcIjtcclxuICAgIHRoaXMuc2V4ICAgICAgICA9IDA7XHJcbiAgICB0aGlzLmdvbGQgICAgICAgPSAwOyAvL+i6q+S4iumHkeW4gVxyXG4gICAgdGhpcy5kaWFtb25kICAgID0gMDsgLy/ouqvkuIrpkrvnn7NcclxuICAgIHRoaXMuY29pbiAgICAgICA9IDA7IC8v5pC65bim6YeR5biBXHJcbiAgICB0aGlzLnNlYXRpZCAgICAgPSAtMTsvL+ayoeacieWdkOS4i1xyXG4gICAgdGhpcy5zdGF0dXMgICAgID0gMDtcclxuICAgIHRoaXMuYm93bmVyICAgICA9IDA7XHJcbiAgICB0aGlzLndpbkdvbGQgICAgPSAwO1xyXG4gICAgdGhpcy5Ub3RhbENhcnJ5ID0gMDtcclxuICAgIHRoaXMuVG90YWxSb3VuZCA9IDA7XHJcbiAgICB0aGlzLlRvdGFsVGFibGUgPSAwO1xyXG4gICAgdGhpcy5maWxlSWQgICAgID0gXCJcIjtcclxuICAgIHRoaXMuY2FsbHR5cGUgICA9IDA7ICAvL+WPq+W6hOexu+Wei1xyXG4gICAgdGhpcy5iQmFua2VyICAgID0gMDsgIC8v5piv5ZCm5piv5bqE5a62XHJcbiAgICB0aGlzLmJldGNvaW5tdWwgPSAwOyAgLy/kuIvms6jlgI3mlbBcclxuICAgIHRoaXMuYk9wZW5DYXJkICA9IDA7ICAvL+aYr+WQpueci+eJjFxyXG4gICAgdGhpcy5idWxsdHlwZSAgID0gMDtcclxuICAgIHRoaXMuY2FyZHMgICAgICA9IFtdO1xyXG4gICAgdGhpcy5maW5hbGNvaW4gID0gMDtcclxuICAgIHRoaXMucm9vbWNhcmQgICA9IDA7IC8vIOaIv+WNoeaVsOmHj1xyXG59XHJcblxyXG5QbGF5ZXIuc2V0U2VhdElkID0gZnVuY3Rpb24gKHNlYXRpZCkge1xyXG4gICAgY2MubG9nKFwiUGFseWVyLnNldFNlYWRJZCxzZWF0aWQgPSBcIiArIHNlYXRpZCk7XHJcbiAgICB0aGlzLnNlYXRpZCA9IHNlYXRpZDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXI7IiwidmFyIENBUkRfVVBfUE9TID0gMjA7XHJcbnZhciBDQVJEX0NPTE9SX01BUksgPSAweGYwO1xyXG52YXIgQ0FSRF9WQUxVRV9NQVJLID0gMHgwZjtcclxuXHJcbnZhciBjYXJkRW51bSA9IFtcclxuICAgIDB4MDEsMHgwMiwweDAzLDB4MDQsMHgwNSwweDA2LDB4MDcsMHgwOCwweDA5LDB4MGEsMHgwYiwweDBjLDB4MGQsIC8v4pmg77iPXHJcbiAgICAweDExLDB4MTIsMHgxMywweDE0LDB4MTUsMHgxNiwweDE3LDB4MTgsMHgxOSwweDFhLDB4MWIsMHgxYywweDFkLCAvL+KZpe+4j1xyXG4gICAgMHgyMSwweDIyLDB4MjMsMHgyNCwweDI1LDB4MjYsMHgyNywweDI4LDB4MjksMHgyYSwweDJiLDB4MmMsMHgyZCwgLy/vuI/imaPvuI9cclxuICAgIDB4MzEsMHgzMiwweDMzLDB4MzQsMHgzNSwweDM2LDB4MzcsMHgzOCwweDM5LDB4M2EsMHgzYiwweDNjLDB4M2QsIC8v4pmmXHJcbiAgICBdOyAvL+Wkp+Wwj+eOi1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBjYXJkRGF0YSA6IDAsXHJcbiAgICAgICAgY2FyZENvbG9yIDogMCxcclxuICAgICAgICBjYXJkVmFsdWUgOiAwLFxyXG4gICAgICAgIGNhcmRTZWxlY3RlZCA6IDAsXHJcbiAgICAgICAgQ2FyZEJnSW1nIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFZhbHVlSW1nIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIENvbG9ySW1nIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFNtYWxsQ29sb3JJbWcgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgR3JheUxheWVyIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIENhcmRHcm91bmRJbWcgOiBjYy5TcHJpdGUsXHJcblxyXG4gICAgICAgIFZhbHVlQmxhY2tGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgVmFsdWVSZWRGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgQ29sb3JGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgU21hbGxGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgQ2FyZEdyb3VuZCA6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIENhcmRCZyA6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0Q2FyZCA6IGZ1bmN0aW9uKGNhcmREYXRhKXtcclxuICAgICAgICBjYy5sb2coJ1Bva2VyIDogaW5pdENhcmQsY2FyZERhdGEgPSAnICsgY2FyZERhdGEpO1xyXG4gICAgICAgIHRoaXMuY2FyZERhdGEgPSBjYXJkRGF0YTtcclxuICAgICAgICB0aGlzLmNhcmRDb2xvciA9IHRoaXMuZ2V0Q2FyZENvbG9yRnJvbURhdGEoY2FyZERhdGEpO1xyXG4gICAgICAgIHRoaXMuY2FyZFZhbHVlID0gdGhpcy5nZXRDYXJkVmFsdWVGcm9tRGF0YShjYXJkRGF0YSk7XHJcbiAgICAgICAgdGhpcy5DYXJkR3JvdW5kSW1nLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgY2MubG9nKFwiUG9rZXIgOiBpbml0Q2FyZCxjYXJkVmFsdWUgPSBcIiArIHRoaXMuY2FyZFZhbHVlKTtcclxuICAgICAgICBpZiAoY2FyZERhdGEgPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8v54mM6IOMXHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDtpbmRleCA8IHRoaXMuQ2FyZEJnSW1nLm5vZGUuY2hpbGRyZW5Db3VudDtpbmRleCsrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkNhcmRCZ0ltZy5ub2RlLmNoaWxkcmVuW2luZGV4XS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLkNhcmRCZ0ltZy5zcHJpdGVGcmFtZSA9IHRoaXMuQ2FyZEdyb3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5DYXJkQmdJbWcubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLkNvbG9ySW1nLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5WYWx1ZUltZy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuU21hbGxDb2xvckltZy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuR3JheUxheWVyLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuQ2FyZEJnSW1nLnNwcml0ZUZyYW1lID0gdGhpcy5DYXJkQmc7XHJcbiAgICAgICAgICAgIC8v54mM6Z2iXHJcbiAgICAgICAgICAgIGlmKHRoaXMuY2FyZENvbG9yID09IDAgfHwgdGhpcy5jYXJkQ29sb3IgPT0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Db2xvckltZy5zcHJpdGVGcmFtZSA9IHRoaXMuQ29sb3JGcmFtZVt0aGlzLmNhcmRDb2xvcl07XHJcbiAgICAgICAgICAgICAgICB0aGlzLlNtYWxsQ29sb3JJbWcuc3ByaXRlRnJhbWUgPSB0aGlzLlNtYWxsRnJhbWVbdGhpcy5jYXJkQ29sb3JdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5WYWx1ZUltZy5zcHJpdGVGcmFtZSA9IHRoaXMuVmFsdWVCbGFja0ZyYW1lW3RoaXMuY2FyZFZhbHVlIC0gMV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZih0aGlzLmNhcmRDb2xvciA9PSAxIHx8IHRoaXMuY2FyZENvbG9yID09IDMpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ29sb3JJbWcuc3ByaXRlRnJhbWUgPSB0aGlzLkNvbG9yRnJhbWVbdGhpcy5jYXJkQ29sb3JdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TbWFsbENvbG9ySW1nLnNwcml0ZUZyYW1lID0gdGhpcy5TbWFsbEZyYW1lW3RoaXMuY2FyZENvbG9yXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuVmFsdWVJbWcuc3ByaXRlRnJhbWUgPSB0aGlzLlZhbHVlUmVkRnJhbWVbdGhpcy5jYXJkVmFsdWUgLSAxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKHRoaXMuY2FyZENvbG9yID09PSA0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL+Wkp+Wwj+eOi1xyXG4gICAgICAgICAgICAgICAgY2MuZXJyb3IoJ1Bva2VyIDogaW5pdENhcmQsY2FyZENvbG9yIGVycm9yJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIGNjLmVycm9yKCdQb2tlciA6IGluaXRDYXJkLGNhcmRDb2xvciBlcnJvcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYy5sb2coXCJQb2tlciA6IGluaXRDYXJkLENhcmRHcm91bmRJbWcuYWN0aXZlID0gXCIgKyB0aGlzLkNhcmRHcm91bmRJbWcubm9kZS5hY3RpdmUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRWYWx1ZVN0cmluZ0Zyb21EYXRhIDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGdldENhcmRDb2xvckZyb21EYXRhIDogZnVuY3Rpb24oQ2FyZERhdGUpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIChDYXJkRGF0ZSAmIENBUkRfQ09MT1JfTUFSSyk+PjQ7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBnZXRDYXJkVmFsdWVGcm9tRGF0YSA6IGZ1bmN0aW9uKENhcmREYXRlKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiAoQ2FyZERhdGUgJiBDQVJEX1ZBTFVFX01BUkspO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgcnVuQ2FyZFNlbGVjdCA6IGZ1bmN0aW9uKFNlbGVjdClcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coJ1Bva2VyIDogcnVuQ2FyZFNlbGVjdCxiU2VsZWN0ID0gJyxTZWxlY3QpO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRTZWxlY3RlZCA9IFNlbGVjdDtcclxuICAgICAgICBpZiAodGhpcy5jYXJkU2VsZWN0ZWQgPT0gMSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IGNjLnAodGhpcy5ub2RlLmdldFBvc2l0aW9uKCkueCwgQ0FSRF9VUF9QT1MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucG9zaXRpb24gPSBjYy5wKHRoaXMubm9kZS5nZXRQb3NpdGlvbigpLngsMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRDYXJkU2VsZWN0aW5nIDogZnVuY3Rpb24oYlNlbGVjdClcclxuICAgIHtcclxuICAgICAgICBjYy5sb2coJ1Bva2VyLnNldENhcmRTZWxlY3RpbmcsYlNlbGVjdCA9ICcgKyBiU2VsZWN0KTtcclxuICAgICAgICB0aGlzLmNhcmRTZWxlY3RlZCA9IGJTZWxlY3Q7XHJcbiAgICAgICAgaWYoYlNlbGVjdCA9PSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5HcmF5TGF5ZXIubm9kZS5vcGFjaXR5ID0gMTgwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkdyYXlMYXllci5ub2RlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldEJ0bkNhcmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkU2VsZWN0ZWQgPSAodGhpcy5jYXJkU2VsZWN0ZWQgPT0gMCA/IDEgOiAwKTtcclxuICAgICAgICB0aGlzLnJ1bkNhcmRTZWxlY3QodGhpcy5jYXJkU2VsZWN0ZWQpO1xyXG4gICAgfSxcclxuXHJcbn0pO1xyXG4iLCJ2YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lQ2FsbE9DID0gcmVxdWlyZSgnR2FtZUNhbGxPQycpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIEFsZXJ0VmlldyA9IHJlcXVpcmUoJ0FsZXJ0VmlldycpO1xyXG52YXIgSHR0cE1hbmFnZXIgPSByZXF1aXJlKCdIdHRwTWFuYWdlcicpO1xyXG52YXIgV2VDaGF0QXBpID0gcmVxdWlyZSgnV2VDaGF0QXBpJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcblxyXG4gICAgICAgIFByb2R1Y2VJbWcgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgUHJvZHVjZU5hbWUgOiBjYy5MYWJlbCxcclxuICAgICAgICBQcm9kdWNlUHJpY2UgOiBjYy5MYWJlbCxcclxuICAgICAgICBQcm9kdWNlRGVzYyA6IGNjLkxhYmVsLFxyXG4gICAgICAgIE1vbmV5TGFiZWwgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUHJvZHVjZVByaWNlSW1nIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFByb2R1Y2VHb2xkRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIFByb2R1Y2VEaWFtb25kRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgICAgIFByb3BGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcbiAgICAgICAgRGlhbW9uZCA6IGNjLlNwcml0ZSxcclxuICAgICAgICBSZWZlcnJhbENvZGVWaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEFjdGl2aXR5RmxhZyA6IGNjLlNwcml0ZSxcclxuICAgICAgICBBY3Rpdml0eUZsYWdGcmFtZSA6IFtjYy5TcHJpdGVGcmFtZV0sXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vdGhpcy5pbml0RGF0YSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0RGF0YSA6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuUHJvZHVjZVR5cGUgPSAwOyAgLy8wIGdvbGQgMSBkaWFtb25kXHJcbiAgICAgICAgdGhpcy5QcmljZSA9IDA7XHJcbiAgICAgICAgdGhpcy5OYW1lID0gXCJcIjtcclxuICAgICAgICB0aGlzLmlkID0gMDtcclxuICAgICAgICB0aGlzLm1zZyA9IG51bGw7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRQcm9kdWNlRGF0YSA6IGZ1bmN0aW9uICh0eXBlLG1zZykge1xyXG4gICAgICAgIHRoaXMubXNnID0gbXNnO1xyXG4gICAgICAgIHRoaXMuUHJvZHVjZVR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuc2V0UHJvZHVjZU5hbWUobXNnLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuc2V0UHJvZHVjZVByaWNlKG1zZy5jb3N0KTtcclxuICAgICAgICB0aGlzLnNldFByb2R1Y2VUeXBlQW5kSW1nKHR5cGUsbXNnLnR5cGUpO1xyXG4gICAgICAgIHRoaXMuUHJvZHVjZURlc2Muc3RyaW5nID0gbXNnLmRlc2M7XHJcbiAgICAgICAgdGhpcy5Nb25leUxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFByb2R1Y2VEYXRhRGlhbW9uZCA6IGZ1bmN0aW9uICh0eXBlLCBtc2cpIHtcclxuICAgICAgICB0aGlzLm1zZyA9IG1zZztcclxuICAgICAgICB0aGlzLlByb2R1Y2VUeXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnNldFByb2R1Y2VOYW1lKG1zZy5uYW1lKTtcclxuICAgICAgICB0aGlzLk1vbmV5TGFiZWwubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuTW9uZXlMYWJlbC5zdHJpbmcgPSBcIuWUruS7t++8msKlXCIgKyBtc2cuY29zdDtcclxuICAgICAgICB0aGlzLlByaWNlID0gbXNnLmNvc3Q7XHJcbiAgICAgICAgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXMgPT0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1c1R5cGUuVkVSU0lPTl9UWVBFX0FVRElUXHJcbiAgICAgICAgICAgICYmIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5jaGVja0lzQWJsZSgpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Qcm9kdWNlRGVzYy5ub2RlLmFjdGl2ZSAgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Qcm9kdWNlRGVzYy5ub2RlLmFjdGl2ZSAgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLlByb2R1Y2VEZXNjLnN0cmluZyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5Qcm9kdWNlUHJpY2Uubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkRpYW1vbmQubm9kZS5hY3RpdmUgICAgICA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc2V0UHJvZHVjZVR5cGVBbmRJbWcodHlwZSwgbXNnLnR5cGUpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBtc2cuaWQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFByb2R1Y2VOYW1lIDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB0aGlzLk5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuUHJvZHVjZU5hbWUuc3RyaW5nID0gbmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0UHJvZHVjZVByaWNlIDpmdW5jdGlvbiAocHJpY2UpIHtcclxuICAgICAgICB0aGlzLlByaWNlID0gcHJpY2U7XHJcbiAgICAgICAgdGhpcy5Qcm9kdWNlUHJpY2Uuc3RyaW5nID0gcHJpY2U7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRQcm9kdWNlVHlwZUFuZEltZyA6ZnVuY3Rpb24gKHR5cGUsaW5kZXgpIHtcclxuXHJcbiAgICAgICAgaWYodHlwZSA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Qcm9kdWNlSW1nLnNwcml0ZUZyYW1lID0gdGhpcy5Qcm9wRnJhbWVbaW5kZXgtMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuUHJvZHVjZUltZy5zcHJpdGVGcmFtZSA9IHRoaXMuUHJvZHVjZURpYW1vbmRGcmFtZVtpbmRleC0xXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhY3Rpdml0eSA9IDA7XHJcbiAgICAgICAgaWYodHlwZSA9PSAxICYmIChpbmRleCA9PSA0IHx8IGluZGV4ID09IDUpKVxyXG4gICAgICAgICAgICBhY3Rpdml0eSA9IDE7XHJcbiAgICAgICAgdGhpcy5zZXRBY3Rpdml0eUZsYWcodHlwZSxhY3Rpdml0eSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRBY3Rpdml0eUZsYWcgOiBmdW5jdGlvbiAodHlwZSxhY3Rpdml0eSkge1xyXG4gICAgICAgIGlmIChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuVmVyU3RhdHVzID09IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXNUeXBlLlZFUlNJT05fVFlQRV9BVURJVFxyXG4gICAgICAgICAgICAmJiBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuY2hlY2tJc0FibGUoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQWN0aXZpdHlGbGFnLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGFjdGl2aXR5ID4gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuQWN0aXZpdHlGbGFnLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5BY3Rpdml0eUZsYWcubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY3JlYXRlUmVmZXJyYWxDb2RlVmlldyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgd2luU2l6ZSA9IGNjLmRpcmVjdG9yLmdldFdpblNpemUoKTtcclxuICAgICAgICB2YXIgcmVmZXJyYWxDb2RlVmlldyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUmVmZXJyYWxDb2RlVmlldyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChyZWZlcnJhbENvZGVWaWV3KTtcclxuICAgICAgICByZWZlcnJhbENvZGVWaWV3LnNldFBvc2l0aW9uKGNjLnAod2luU2l6ZS53aWR0aC8yLCB3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsQnRuQnV5IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIlByb2R1Y3RDZWxsLmNhbGxCdG5CdXlcIik7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICBpZih0aGlzLlByb2R1Y2VUeXBlID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkucHJvZHVjdGlkID09IDIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IEFsZXJ0Vmlldy5jcmVhdGUoKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0LnNldFBvc2l0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIH0sXCLnoa7lrppcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9IFwi6K+36IGU57O75b6u5L+h5a6i5pyN77yaW1wiICArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS53ZWl4aW5jcyArIFwiXeWFheWAvFwiO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQuc2hvdyhzdHIgLEFsZXJ0Vmlld0J0blR5cGUuRV9CVE5fQ0xPU0UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXMgPT0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1c1R5cGUuVkVSU0lPTl9UWVBFX0FVRElUXHJcbiAgICAgICAgICAgICAgICAgICAgJiYgR2FtZUNhbGxPQy5nZXRJbnN0YW5jZSgpLmNoZWNrSXNBYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkucGF5QXBwc3RvcmUodGhpcy5tc2cuaWQsR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVpZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLnJlZmVycmFsQ29kZSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsZXJ0ID0gQWxlcnRWaWV3LmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydC5zZXRQb3NpdGl2ZUJ1dHRvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVJlZmVycmFsQ29kZVZpZXcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcIue7keWumlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSBcIummluasoei0reS5sOmSu+efs+ivt+e7keWumuaOqOW5v+S6ulwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydC5zaG93KHN0ciAsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DTE9TRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlQ2hhdEFwaS5nZXRJbnN0YW5jZSgpLndlQ2hhdFBheSh0aGlzLm1zZy5pZCxHYW1lUGxheWVyLmdldEluc3RhbmNlKCkudWlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgYWxlcnQgPSBBbGVydFZpZXcuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIGFsZXJ0LnNldFBvc2l0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgOiBzZWxmLm1zZy50eXBlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfRVhDSEFOR0VfR09MRF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgIH0sXCLlhZHmjaJcIik7XHJcbiAgICAgICAgICAgIGFsZXJ0LnNldE5lZ2F0aXZlQnV0dG9uKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIH0sXCLlj5bmtohcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RyID0gXCLmgqjmmK/lkKbnoa7lrprmtojogJdcIiArIHRoaXMubXNnLmNvc3QgKyBcIuS4qumSu+efs+WFkeaNolwiICsgdGhpcy5tc2cubmFtZSArIFwiKFwiICsgdGhpcy5tc2cuZGVzYyArIFwiKVwiO1xyXG4gICAgICAgICAgICBhbGVydC5zaG93KHN0ciAsQWxlcnRWaWV3QnRuVHlwZS5FX0JUTl9DQU5DTEUpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBTbGlkZXIgOiBjYy5TbGlkZXIsXHJcbiAgICAgICAgQmFyIDogY2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgTGFiZWwgOiBjYy5MYWJlbCxcclxuICAgICAgICBNYXhMYWJlbCA6IGNjLkxhYmVsLFxyXG4gICAgICAgIE1pbkxhYmVsIDogY2MuTGFiZWwsXHJcbiAgICAgICAgaU1heCA6IDAsXHJcbiAgICAgICAgaU1pbiA6IDAsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldE51bUZyb21DdXJOdW0gOiBmdW5jdGlvbihudW0pXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHRhcmdldE51bSA9IG51bTtcclxuICAgICAgICB2YXIgbnVtMSA9IG51bSUxMDA7XHJcbiAgICAgICAgaWYgKG51bTEgPj0gNTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0YXJnZXROdW0gPSBudW0gKyAoMTAwIC0gbnVtMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRhcmdldE51bSA9IG51bSAtIG51bTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0YXJnZXROdW0gPiB0aGlzLmlNYXggKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGFyZ2V0TnVtID0gdGhpcy5pTWF4IDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0YXJnZXROdW0gPCB0aGlzLmlNaW4gKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGFyZ2V0TnVtID0gdGhpcy5pTWluIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwcm9ncmVzcyA9ICh0YXJnZXROdW0gLSB0aGlzLmlNaW4pLyh0aGlzLmlNYXggLSB0aGlzLmlNaW4pO1xyXG4gICAgICAgIHRoaXMuQmFyLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgdGhpcy5TbGlkZXIucHJvZ3Jlc3MgPSBwcm9ncmVzcztcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhcmdldE51bTtcclxuXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRNaW5BbmRNYXggOiBmdW5jdGlvbiAobWluLG1heCkge1xyXG4gICAgICAgIHRoaXMuaU1heCA9IG1heDtcclxuICAgICAgICB0aGlzLmlNaW4gPSBtaW47XHJcbiAgICAgICAgdGhpcy5NYXhMYWJlbC5zdHJpbmcgPSB0aGlzLmlNYXg7XHJcbiAgICAgICAgdGhpcy5NaW5MYWJlbC5zdHJpbmcgPSB0aGlzLmlNaW47XHJcbiAgICAgICAgdGhpcy5CYXIucHJvZ3Jlc3MgPSB0aGlzLlNsaWRlci5wcm9ncmVzcztcclxuICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQodGhpcy5pTWluICsgKHRoaXMuaU1heCAtIHRoaXMuaU1pbikqdGhpcy5TbGlkZXIucHJvZ3Jlc3MpO1xyXG4gICAgICAgIHRoaXMuQ3VyQ2FycnlOdW0gPSB0aGlzLmdldE51bUZyb21DdXJOdW0obnVtKTtcclxuICAgICAgICB0aGlzLkxhYmVsLnN0cmluZyA9ICh0aGlzLkN1ckNhcnJ5TnVtKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrU2xpZGVyIDogZnVuY3Rpb24gKHNsaWRlciwgY3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdGhpcy5CYXIucHJvZ3Jlc3MgPSB0aGlzLlNsaWRlci5wcm9ncmVzcztcclxuICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQodGhpcy5pTWluICsgKHRoaXMuaU1heCAtIHRoaXMuaU1pbikqdGhpcy5TbGlkZXIucHJvZ3Jlc3MpO1xyXG4gICAgICAgIHRoaXMuQ3VyQ2FycnlOdW0gPSB0aGlzLmdldE51bUZyb21DdXJOdW0obnVtKTtcclxuICAgICAgICB0aGlzLkxhYmVsLnN0cmluZyA9ICh0aGlzLkN1ckNhcnJ5TnVtKTtcclxuICAgICAgICB0aGlzLkxhYmVsLnN0cmluZyA9IHRoaXMuQ3VyQ2FycnlOdW07XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIFRvYXN0VmlldyA9IHJlcXVpcmUoJ1RvYXN0VmlldycpO1xyXG52YXIgTG9hZGluZ1ZpZXcgPSByZXF1aXJlKCdMb2FkaW5nVmlldycpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgUmVmZXJyYWxDb2RlICAgIDogY2MuRWRpdEJveCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuIDogZnVuY3Rpb24gKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBCdG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBjYy5sb2coXCJSZWZlcnJhbENvZGVWaWV3LmNhbGxCYWNrQnRuLEJ0bk5hbWUgPSBcIiArIEJ0bk5hbWUpO1xyXG4gICAgICAgIGlmKEJ0bk5hbWUgPT0gXCJCdG5DbG9zZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoQnRuTmFtZSA9PSBcIkJ0blN1cmVcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNjLmxvZygnUmVmZXJyYWxDb2RlVmlldy5jYWxsQmFja0J0bixSZWZlcnJhbENvZGUgPSAnICsgdGhpcy5SZWZlcnJhbENvZGUuc3RyaW5nKTtcclxuICAgICAgICAgICAgaWYodGhpcy5SZWZlcnJhbENvZGUuc3RyaW5nID09IFwiXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFRvYXN0Vmlldy5zaG93KCfmjqjojZDnoIHkuI3og73kuLrnqbrvvIEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcmVmZXJyYWxpZCA6IE51bWJlcih0aGlzLlJlZmVycmFsQ29kZS5zdHJpbmcpLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfQklORF9SRUZFUlJBTF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvKipcclxuICpcclxuICpcclxuICog5rua5Yqo5raI5oGvICDmi5blhaXlnLrmma8g5ZCOIOiHquW3seeuoeeQhuiHquW3sVxyXG4gKlxyXG4gKlxyXG4gKiDlvZPliY3niYjmnKwxLjMuMiByaWNodGV4dCDmnIlidWcgIOetieW+heWumOaWueino+WGs1xyXG4gKi9cclxuXHJcblxyXG52YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxuXHJcbi8vdmFyIFNlcnZlclNwZWFrUGFja2V0ID0gcmVxdWlyZSgnU2VydmVyU3BlYWtQYWNrZXQnKTtcclxuZnVuY3Rpb24gUm9sbE1zZ1QoKSB7XHJcbiAgICB0aGlzLnN0ck1zZyA9IFwiXCIgO1xyXG4gICAgdGhpcy5pVHlwZSA9IDAgO1xyXG59XHJcblxyXG5cclxuIGNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHNwZWFrZXI6Y2MuU3ByaXRlLFxyXG4gICAgICAgIHNwZWFrZXJUeHRIdG1sIDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgc3BlYWtlckhvbGRlciA6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKSA7XHJcblxyXG4gICAgICAgIHRoaXMucXVldWVTcGVha2VyTXNnID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dSb2xsRmluaXNoID0gdHJ1ZSA7XHJcblxyXG4gICAgICAgIHRoaXMuc3BlYWtlci5ub2RlLmFjdGl2ZSA9IGZhbHNlIDtcclxuXHJcbiAgICAgICAgdGhpcy5iYXNlWCA9IHRoaXMuc3BlYWtlclR4dEh0bWwubm9kZS54O1xyXG5cclxuICAgICAgICB0aGlzLnJlbWFpbmRXaWR0aCA9IDk2MCt0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUueDtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5yZW1vdmVMaXN0ZW5lcih0aGlzLnNvY2tldE1lc3NhZ2VMaXN0ZW5lcklEKTtcclxuICAgIH0sXHJcblxyXG4gICAgIG9uU2NlbmVNc2cgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgIGlmIChtc2cucG9wVmlldyA9PSBcIkhhbGxTY2VuZVwiKSB7XHJcbiAgICAgICAgICAgICBpZiAobXNnLmJ0biA9PSBcIlJvbGxNc2dcIikge1xyXG4gICAgICAgICAgICAgICAgIHZhciBsZWRJbmZvID0gbXNnLmRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgIHRoaXMuYWRkU3BlYWtlck1zZyhsZWRJbmZvLnRleHQsMCk7XHJcblxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgfSxcclxuXHJcbiAgICAgb25NZXNzYWdlIDpmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgdmFyIG1zZyA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgIHZhciBjbWQgPSBtc2cuY21kIDtcclxuICAgICAgICAgc3dpdGNoKGNtZClcclxuICAgICAgICAge1xyXG4gICAgICAgICAgICAgY2FzZSB3aW5kb3cuU0VSVkVSX1NQRUFLX05FV19DTUQ6XHJcblxyXG4gICAgICAgICAgICAgICAgIHRoaXMuYWRkU3BlYWtlck1zZyhtc2cudHJ1bXBldE1zZyxtc2cudHJ1bXBldFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgIGJyZWFrIDtcclxuXHJcblxyXG4gICAgICAgICB9XHJcbiAgICAgfSxcclxuXHJcbiAgICBhZGRTcGVha2VyTXNnIDogZnVuY3Rpb24gKGNvbnRlbnQsIGNvbnRlbnR0eXBlKSB7XHJcbiAgICAgICAgaWYoY29udGVudCA9PT11bmRlZmluZWQgfHwgY29udGVudCA9PSBcIlwiKXtcclxuICAgICAgICAgICAgcmV0dXJuIDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gPGNvbG9yID0gMHhGRkZGRkZGRj4g5rSq56aP6b2Q5aSpLOeOqeWutjwvY29sb3I+PGNvbG9yID0gMHgwMGI4YzhGRj7lhYPlpKfngq48L2NvbG9yPjxjb2xvciA9IDB4RkZGRkZGRkY+5Zyo54K46YeR6IqxMeWFg+Wcuui1ouWPljwvY29sb3I+PGNvbG9yID0gMHgwMGQyMzZGRj41MDAw6YeR5biBPC9jb2xvcj48Y29sb3IgPSAweEZGRkZGRkZGPizlr4znlLLkuIDmlrk8L2NvbG9yPlxyXG5cclxuXHJcbiAgICAgICAgdmFyIHNzID0gU3RyaW5nKGNvbnRlbnQpO1xyXG4gICAgICAgIHZhciByZSA9IC8weC9nO1xyXG4gICAgICAgIHZhciBuZXdDb250ZW50ID0gc3MucmVwbGFjZShyZSxcIiNcIik7XHJcbiAgICAgICAgdmFyIHJlMiA9IC9GRj4vZyA7XHJcbiAgICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZShyZTIsXCI+XCIpIDtcclxuXHJcbiAgICAgICAgdmFyIG1zZyA9IG5ldyBSb2xsTXNnVCgpO1xyXG4gICAgICAgIG1zZy5pVHlwZSA9IGNvbnRlbnR0eXBlO1xyXG4gICAgICAgIG1zZy5zdHJNc2cgPSBuZXdDb250ZW50O1xyXG5cclxuICAgICAgICB0aGlzLnF1ZXVlU3BlYWtlck1zZy5wdXNoKG1zZykgO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgc2hvd1NwZWFrZXIgOiBmdW5jdGlvbiAoY29udGVudCwgY29udGVudHR5cGUpIHtcclxuICAgICAgICBpZihjb250ZW50ID09IFwiXCIpe1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUuYWN0aXZlID0gdHJ1ZSA7XHJcbiAgICAgICAgdGhpcy5zcGVha2VyVHh0SHRtbC5ub2RlLnggPSB0aGlzLmJhc2VYO1xyXG4gICAgICAgIHRoaXMuc3BlYWtlclR4dEh0bWwubm9kZS55ID0gIHRoaXMuc3BlYWtlckhvbGRlci5oZWlnaHQqMjtcclxuICAgICAgICB0aGlzLnNwZWFrZXJUeHRIdG1sLnN0cmluZyA9IGNvbnRlbnQ7XHJcblxyXG5cclxuICAgICAgICB2YXIgc2l6ZSA9IGNjLnNpemUodGhpcy5zcGVha2VySG9sZGVyLndpZHRoLHRoaXMuc3BlYWtlckhvbGRlci5oZWlnaHQpO1xyXG5cclxuICAgICAgICB2YXIgbW92ZVRvID0gY2MubW92ZVRvKDEuMCwgY2MucCh0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUueCwwKSk7XHJcbiAgICAgICAgdmFyIGRlbGF5ID0gY2MuZGVsYXlUaW1lKDIuMCk7XHJcbiAgICAgICAgdmFyIGFjdGlvbkNhbGxCYWNrID0gY2MuY2FsbEZ1bmModGhpcy5tb3ZlRG93bkNhbGxiYWNrLHRoaXMpIDtcclxuICAgICAgICB2YXIgYWN0aW9uYWxsID0gY2Muc2VxdWVuY2UobW92ZVRvLGRlbGF5LGFjdGlvbkNhbGxCYWNrKTtcclxuICAgICAgICB0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUucnVuQWN0aW9uKGFjdGlvbmFsbCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBtb3ZlRG93bkNhbGxiYWNrIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIHZhciBjb250ZW50U2l6ZSA9IGNjLnNpemUodGhpcy5zcGVha2VyVHh0SHRtbC5fbGluZXNXaWR0aFswXSx0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgdmFyIG1vdmVYID0gMDtcclxuICAgICAgICBpZih0aGlzLnJlbWFpbmRXaWR0aCA8IChjb250ZW50U2l6ZS53aWR0aCAtIHdpblNpemUud2lkdGgpfHwgdGhpcy5zcGVha2VySG9sZGVyLndpZHRoPGNvbnRlbnRTaXplLndpZHRoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbW92ZVggPSBjb250ZW50U2l6ZS53aWR0aCAgKyB0aGlzLnJlbWFpbmRXaWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG1vdmVYIDw9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVMZWZ0Q2FsbGJhY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1vdmVCeSA9IGNjLm1vdmVCeShtb3ZlWC8zMDAsIGNjLnAobW92ZVggPiAwID8gLW1vdmVYIDogMCwwKSk7XHJcbiAgICAgICAgICAgIHZhciBkZWxheSA9IGNjLmRlbGF5VGltZSgwLjgpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uQ2FsbEJhY2sgPSBjYy5jYWxsRnVuYyh0aGlzLm1vdmVMZWZ0Q2FsbGJhY2ssdGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb25hbGwgPSBjYy5zZXF1ZW5jZShtb3ZlQnksZGVsYXksYWN0aW9uQ2FsbEJhY2spO1xyXG4gICAgICAgICAgICB0aGlzLnNwZWFrZXJUeHRIdG1sLm5vZGUucnVuQWN0aW9uKGFjdGlvbmFsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG1vdmVMZWZ0Q2FsbGJhY2sgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dSb2xsRmluaXNoID0gdHJ1ZTtcclxuICAgICAgICBpZih0aGlzLnNwZWFrZXJUeHRIdG1sKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8gc3BlYWtlclR4dEh0bWwucmVtb3ZlRnJvbVBhcmVudEFuZENsZWFudXAodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlYWtlclR4dEh0bWwubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCggdGhpcy5xdWV1ZVNwZWFrZXJNc2cubGVuZ3RoID09IDApICYmIHRoaXMuc3BlYWtlciAmJiB0aGlzLnNwZWFrZXIubm9kZS5hY3RpdmVJbkhpZXJhcmNoeSkgO1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVha2VyLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG4gICAgICAgIGlmKHNlbGYucXVldWVTcGVha2VyTXNnLmxlbmd0aCA+IDAgJiYgc2VsZi5pc1Nob3dSb2xsRmluaXNoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoc2VsZi5zcGVha2VyICYmICFzZWxmLnNwZWFrZXIubm9kZS5hY3RpdmUpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zcGVha2VyLm5vZGUuYWN0aXZlID0gdHJ1ZSAgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmlzU2hvd1JvbGxGaW5pc2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIG1zZyA9IHNlbGYucXVldWVTcGVha2VyTXNnLnBvcCgpO1xyXG4gICAgICAgICAgICBzZWxmLnNob3dTcGVha2VyKG1zZy5zdHJNc2csbXNnLmlUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuXHJcbn0pO1xyXG5cclxuXHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgTXVzaWNNZ3IgICA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcbnZhciBVdGlsVG9vbCAgID0gcmVxdWlyZSgnVXRpbFRvb2wnKTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFJvb21OYW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBHYW1lTmFtZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgR2FtZVR5cGU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIE1pbkFudGU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIExpdmVUaW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBNYXhTZWF0OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgU2VsZldpbkNvaW46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNlbGZDYXJyeUNvaW46IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNlbGZQbGF5TnVtOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZWxmV2luTnVtOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZWxmTG9zZU51bToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU2VsZlN1cGVyTnVtOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZWxmTm9ybWFsTnVtOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZWxmTm90Y2FsbE51bToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU2VsZkJhbmtlck51bToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU2VsZkdpZnROdW06IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNlbGZVc2VHb2xkOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkxhYmVsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZWxmVXNlRGlhbW9uZDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5MYWJlbFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNjcm9sbFZpZXcgICAgICA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgUGxheVNjb3JlUHJlZmFiIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIEJ0blNoYXJlIDogY2MuQnV0dG9uLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5WZXJTdGF0dXMgPT0gR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLlZlclN0YXR1c1R5cGUuVkVSU0lPTl9UWVBFX0FVRElUKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5TaGFyZS5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKk5ldHdvcmsqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICBvbk1lc3NhZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coXCJSb29tSW5mb1ZpZXcub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIC8vdGhpcy5fc3VwZXIoZXZlbnQpO1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIHZhciBjbWQgPSBtc2cuY21kO1xyXG4gICAgICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVVNfUkVTUF9TQ09SRV9ERVRBSUxfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjb3JlRGV0YWlsYk1zZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL3tcImNtZFwiOjEzMTIxNCxcInNlcVwiOjIsXCJ1aWRcIjoxMTI3OSxcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXHJcbiAgICAvLyBcInBhcmFtXCI6e1xyXG4gICAgLy8gIFwidGFibGVcIjp7XCJ0YWJsZW5hbWVcIjpcIua4uOWuojExMjc5XCIsXCJnYW1laWRcIjoxMDEsXCJtaW5hbnRlXCI6MSxcImdhbWV0eXBlXCI6MSxcImxpdmV0aW1lXCI6MTgwMCxcIm1heHNlYXRcIjoyfSxcclxuICAgIC8vICBcIm15c2VsZlwiOntcImNhcnJ5Y29pblwiOjQwMDAsXCJ3aW5jb2luXCI6LTk1NCxcIndpbm51bVwiOjYsXCJsb3NlbnVtXCI6MTAsXCJwbGF5bnVtXCI6MTYsXCJzdXBlcm51bVwiOjEwLFxyXG4gICAgLy8gICBcIm5vcm1hbG51bVwiOjMsXCJub3RjYWxsbnVtXCI6MyxcImJhbmtlcm51bVwiOjExLFwiY2hhdG51bVwiOjAsXCJnaWZ0bnVtXCI6MCxcInVzZWdvbGRcIjowLFwidXNlZGlhbW9uZFwiOjEwMH0sXHJcbiAgICAvLyBcImxpc3RcIjpbe1widWlkXCI6MTEyNzksXCJuYW1lXCI6XCLmuLjlrqIxMTI3OVwiLFwiaGVhZHVybFwiOlwiIFwiLFwiY2Fycnljb2luXCI6NDAwMCxcIndpbmNvaW5cIjotOTU0fSxcclxuICAgIC8vICAgICAgICAge1widWlkXCI6MTEzMDAsXCJuYW1lXCI6XCLmuLjlrqIxMTMwMFwiLFwiaGVhZHVybFwiOlwiXCIsXCJjYXJyeWNvaW5cIjoxMDAwLFwid2luY29pblwiOjk1NH1dfX1cclxuICAgIG9uU2NvcmVEZXRhaWxiTXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLlJvb21OYW1lLnN0cmluZyA9IG1zZy50YWJsZS50YWJsZW5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuR2FtZU5hbWUuc3RyaW5nID0gR2V0R2FtZU5hbWUobXNnLnRhYmxlLmdhbWVpZCk7XHJcbiAgICAgICAgICAgIHRoaXMuR2FtZVR5cGUuc3RyaW5nID0gR2V0R2FtZVR5cGUobXNnLnRhYmxlLmdhbWV0eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5NaW5BbnRlLnN0cmluZyAgPSBtc2cudGFibGUubWluYW50ZTtcclxuICAgICAgICAgICAgdGhpcy5MaXZlVGltZS5zdHJpbmcgPSBVdGlsVG9vbC5nZXRIb3VyVGltZShtc2cudGFibGUubGl2ZXRpbWUpO1xyXG4gICAgICAgICAgICB0aGlzLk1heFNlYXQuc3RyaW5nICA9IG1zZy50YWJsZS5tYXhzZWF0ICsgXCLkurpcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuU2VsZldpbkNvaW4uc3RyaW5nICAgID0gbXNnLm15c2VsZi53aW5jb2luO1xyXG4gICAgICAgICAgICB0aGlzLlNlbGZDYXJyeUNvaW4uc3RyaW5nICA9IG1zZy5teXNlbGYuY2Fycnljb2luO1xyXG4gICAgICAgICAgICB0aGlzLlNlbGZQbGF5TnVtLnN0cmluZyAgICA9IG1zZy5teXNlbGYucGxheW51bTtcclxuICAgICAgICAgICAgdGhpcy5TZWxmV2luTnVtLnN0cmluZyAgICAgPSBtc2cubXlzZWxmLndpbm51bTtcclxuICAgICAgICAgICAgdGhpcy5TZWxmTG9zZU51bS5zdHJpbmcgICAgPSBtc2cubXlzZWxmLmxvc2VudW07XHJcbiAgICAgICAgICAgIHRoaXMuU2VsZlN1cGVyTnVtLnN0cmluZyAgID0gbXNnLm15c2VsZi5zdXBlcm51bTtcclxuICAgICAgICAgICAgdGhpcy5TZWxmTm9ybWFsTnVtLnN0cmluZyAgPSBtc2cubXlzZWxmLm5vcm1hbG51bTtcclxuICAgICAgICAgICAgdGhpcy5TZWxmTm90Y2FsbE51bS5zdHJpbmcgPSBtc2cubXlzZWxmLm5vdGNhbGxudW07XHJcbiAgICAgICAgICAgIHRoaXMuU2VsZkJhbmtlck51bS5zdHJpbmcgID0gbXNnLm15c2VsZi5iYW5rZXJudW07XHJcbiAgICAgICAgICAgIHRoaXMuU2VsZkdpZnROdW0uc3RyaW5nICAgID0gbXNnLm15c2VsZi5naWZ0bnVtO1xyXG4gICAgICAgICAgICB0aGlzLlNlbGZVc2VHb2xkLnN0cmluZyAgICA9IG1zZy5teXNlbGYudXNlZ29sZDtcclxuICAgICAgICAgICAgdGhpcy5TZWxmVXNlRGlhbW9uZC5zdHJpbmcgPSBtc2cubXlzZWxmLnVzZWRpYW1vbmQ7XHJcblxyXG4gICAgICAgICAgICBjYy5sb2coXCJ0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQgPVwiLCB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGhlaWdodCAgICAgPSAwO1xyXG4gICAgICAgICAgICBsZXQgZGVmYXVsdFBvcyA9IDEzMjA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgbXNnLmxpc3QgIT0gbnVsbCAmJiBpbmRleCA8IG1zZy5saXN0Lmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYXlTY29yZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUGxheVNjb3JlUHJlZmFiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmFkZENoaWxkKHBsYXlTY29yZSk7XHJcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBwbGF5U2NvcmUuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBwbGF5U2NvcmUuc2V0UG9zaXRpb24oY2MucCgwLCAtZGVmYXVsdFBvcyAtIHBsYXlTY29yZS5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCAqIChpbmRleCkpKTtcclxuICAgICAgICAgICAgICAgIHBsYXlTY29yZS5nZXRDb21wb25lbnQoXCJQbGF5U2NvcmVcIikuc2V0U2NvcmVJbmZvKG1zZy5saXN0W2luZGV4XSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2MubG9nKFwiaGVpZ2h0ICogKG1zZy5saXN0Lmxlbmd0aCkgPVwiICsgaGVpZ2h0ICogKG1zZy5saXN0Lmxlbmd0aCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBoZWlnaHQgKiAobXNnLmxpc3QubGVuZ3RoKSArIGRlZmF1bHRQb3MgPiB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmhlaWdodCA9IGhlaWdodCAqIChtc2cubGlzdC5sZW5ndGgpICsgZGVmYXVsdFBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5sb2coXCJ0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQgPVwiLCB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2VuZEdldFN1Y2Nlc3NEZXRhaWwgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHByaXZhdGVpZCA6IG1zZy5wcml2YXRlaWQsXHJcbiAgICAgICAgICAgIGNyZWF0ZXRpbWUgOiBtc2cuY3JlYXRldGltZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEoVVNfUkVRX1NDT1JFX0RFVEFJTF9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0biA6IGZ1bmN0aW9uKGV2ZW50LEN1c3RvbUV2ZW50RGF0YSlcclxuICAgIHtcclxuICAgIFx0TXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICB2YXIgQnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgaWYoQnRuTmFtZSA9PSBcIkJ0bkJhY2tcIilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKEJ0bk5hbWUgPT0gXCJCdG5TaGFyZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBwb3BWaWV3IDogXCJSb29tSW5mb1ZpZXdcIixcclxuICAgICAgICAgICAgICAgIGJ0biA6IFwiQnRuU2hhcmVcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zY2FsZVRvKHRoaXMuYmcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0bkNsb3NlIDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGNjLmxvZyhcIlJ1bGVWaWV3IDogY2FsbGJhY2tCdG5DbG9zZVwiKTtcclxuICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNoZWNrRXZlbnRzUnVsZSA6IGZ1bmN0aW9uKGV2ZW50LCBjdXN0b21FdmVudERhdGEpe1xyXG4gICAgICAgIGNjLmxvZygnUnVsZVZpZXcgOiBjaGVja0V2ZW50c1J1bGUsZXZlbnQgPSAnICsgZXZlbnQgKyAnLGN1c3RvbUV2ZW50RGF0YSA9JyArIGN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMzAuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG4vKlxyXG4qIHR5cGUgVVNfUkVRX1NDT1JFX0RFVEFJTF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUGFyYW0gUEFSQU1fUkVRX1NDT1JFX0RFVEFJTF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVRX1NDT1JFX0RFVEFJTF9UIHN0cnVjdCB7XHJcbiBQcml2YXRlSWQgIGludCAgIGBqc29uOlwicHJpdmF0ZWlkXCJgXHJcbiBDcmVhdGVUaW1lIGludDY0IGBqc29uOlwiY3JlYXRldGltZVwiYFxyXG4gfVxyXG4qICovXHJcbmZ1bmN0aW9uIFNjb3JlRGV0YWlsUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9TQ09SRV9ERVRBSUxfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgcGFyYW0gOiBtc2csXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgU2NvcmVEZXRhaWxSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMzAuXHJcbiAqL1xyXG4vKipcclxuIHR5cGUgVVNfUkVTUF9TQ09SRV9ERVRBSUxfVCBzdHJ1Y3Qge1xyXG4gICAgIEpzb25IZWFkXHJcbiAgICAgUmVzcEhlYWRcclxuICAgICBQYXJhbSBQQVJBTV9SRVNQX1NDT1JFX0RFVEFJTF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuXHJcbiB0eXBlIFBBUkFNX1JFU1BfU0NPUkVfREVUQUlMX1Qgc3RydWN0IHtcclxuICAgICBUYWJsZSAgUEFSQU1fVEFCTEVfREVUQUlMX1QgYGpzb246XCJ0YWJsZVwiYFxyXG4gICAgIE15U2VsZiBQQVJBTV9NWVNFTEZfU0NPUkVfVCBganNvbjpcIm15c2VsZlwiYFxyXG4gICAgTGlzdCAgIFtdVEFCTEVfVVNFUl9TQ09SRV9UIGBqc29uOlwibGlzdFwiYFxyXG4gfVxyXG5cclxuIHR5cGUgUEFSQU1fVEFCTEVfREVUQUlMX1Qgc3RydWN0IHtcclxuICAgICBUYWJsZU5hbWUgc3RyaW5nIGBqc29uOlwidGFibGVuYW1lXCJgIC8v54mM5bGA5ZCN56ewXHJcbiAgICAgR2FtZUlkICAgIGludCAgICBganNvbjpcImdhbWVpZFwiYCAgICAvL+mAieaLqeeOqeazlSjmuLjmiI9pZClcclxuICAgICBNaW5BbnRlICAgaW50ICAgIGBqc29uOlwibWluYW50ZVwiYCAgIC8v5pyA5bCP5LiL5rOoKDEpXHJcbiAgICAgR2FtZVR5cGUgIGludCAgICBganNvbjpcImdhbWV0eXBlXCJgICAvL+aKouW6hOaooeW8j1xyXG4gICAgIExpdmVUaW1lICBpbnQ2NCAgYGpzb246XCJsaXZldGltZVwiYCAgLy/moYzlrZDml7bpl7RcclxuICAgICBNYXhTZWF0ICAgaW50ICAgIGBqc29uOlwibWF4c2VhdFwiYCAgIC8v5pys5qGM5Lq65pWwXHJcbiB9XHJcblxyXG4gdHlwZSBQQVJBTV9NWVNFTEZfU0NPUkVfVCBzdHJ1Y3Qge1xyXG4gICAgIENhcnJ5Q29pbiAgaW50IGBqc29uOlwiY2Fycnljb2luXCJgICAvL+W4puWFpemHkeW4gVxyXG4gICAgIFdpbkNvaW4gICAgaW50IGBqc29uOlwid2luY29pblwiYCAgICAvL+i+k+i1oijmnIDnu4jmiJjnu6kpXHJcbiAgICAgV2luTnVtICAgICBpbnQgYGpzb246XCJ3aW5udW1cImAgICAgIC8v6LWi54mM5qyh5pWwXHJcbiAgICAgTG9zZU51bSAgICBpbnQgYGpzb246XCJsb3NlbnVtXCJgICAgIC8v5aSx6LSl5qyh5pWwXHJcbiAgICAgUGxheU51bSAgICBpbnQgYGpzb246XCJwbGF5bnVtXCJgICAgIC8v546p54mM5qyh5pWwXHJcbiAgICAgU3VwZXJOdW0gICBpbnQgYGpzb246XCJzdXBlcm51bVwiYCAgIC8v6LaF57qn5oqi5bqE5qyh5pWwXHJcbiAgICAgTm9ybWFsTnVtICBpbnQgYGpzb246XCJub3JtYWxudW1cImAgIC8v5pmu6YCa5oqi5bqE5qyh5pWwXHJcbiAgICAgTm90Q2FsbE51bSBpbnQgYGpzb246XCJub3RjYWxsbnVtXCJgIC8v5pyq5Y+r5bqE5qyh5pWwXHJcbiAgICAgQmFua2VyTnVtICBpbnQgYGpzb246XCJiYW5rZXJudW1cImAgIC8v5Z2Q5bqE5qyh5pWwXHJcbiAgICAgQ2hhdE51bSAgICBpbnQgYGpzb246XCJjaGF0bnVtXCJgICAgIC8v6IGK5aSp5qyh5pWwXHJcbiAgICAgR2lmdE51bSAgICBpbnQgYGpzb246XCJnaWZ0bnVtXCJgICAgIC8v5Y+R6YCB56S854mp5qyh5pWwXHJcbiAgICAgVXNlR29sZCAgICBpbnQgYGpzb246XCJ1c2Vnb2xkXCJgICAgIC8v5Y+R6YCB56S854mp5raI6ICX6YeR5biBXHJcbiAgICAgVXNlRGlhbW9uZCBpbnQgYGpzb246XCJ1c2VkaWFtb25kXCJgIC8v5oqi5bqE5raI6ICX6ZK755+zXHJcbiB9XHJcblxyXG4gdHlwZSBUQUJMRV9VU0VSX1NDT1JFX1Qgc3RydWN0IHtcclxuICAgICBVaWQgICAgICAgaW50ICAgIGBqc29uOlwidWlkXCJgXHJcbiAgICAgTmFtZSAgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgICBIZWFkVXJsICAgc3RyaW5nIGBqc29uOlwiaGVhZHVybFwiYFxyXG4gICAgIENhcnJ5Q29pbiBpbnQgICAgYGpzb246XCJjYXJyeWNvaW5cImBcclxuICAgICBXaW5Db2luICAgaW50ICAgIGBqc29uOlwid2luY29pblwiYFxyXG4gfVxyXG4qICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuZnVuY3Rpb24gU2NvcmVEZXRhaWxSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX1NDT1JFX0RFVEFJTF9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuc2VxICAgID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCAgICA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlICAgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgICA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0aGlzLnBhcmFtICA9IG1zZy5wYXJhbTtcclxuICAgICAgICB0aGlzLnRhYmxlICA9IHRoaXMucGFyYW0udGFibGU7XHJcbiAgICAgICAgdGhpcy5teXNlbGYgPSB0aGlzLnBhcmFtLm15c2VsZjtcclxuICAgICAgICB0aGlzLmxpc3QgICA9IHRoaXMucGFyYW0ubGlzdDtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFNjb3JlRGV0YWlsUmVzcFBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8zMC5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbi8qXHJcbiAqIHR5cGUgVVNfUkVRX1NDT1JFX0xJU1RfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFBhcmFtIFBBUkFNX1JFUV9TQ09SRV9MSVNUX1QgYGpzb246XCJwYXJhbVwiYFxyXG4gfVxyXG4gdHlwZSBQQVJBTV9SRVFfU0NPUkVfTElTVF9UIHN0cnVjdCB7XHJcbiBJc0NyZWF0ZSBpbnQ4IGBqc29uOlwiaXNjcmVhdGVgIC8vMO+8muWPguS4jueahOeJjOWxgCwgMTog5Yib5bu655qE54mM5bGAXHJcbiBTdGFydCAgICBpbnQgIGBqc29uOlwic3RhcnRcImAgICAvL+S7juWTqumHjOW8gOWni1xyXG4gVG90YWwgICAgaW50ICBganNvbjpcInRvdGFsXCJgICAgLy/lpJrlsJHkuKpcclxuIH1cclxuIH1cclxuXHJcbiAqICovXHJcbnZhciBHYW1lU3lzdGVtID0gcmVxdWlyZShcIkdhbWVTeXN0ZW1cIik7XHJcblxyXG5mdW5jdGlvbiBTY29yZUxpc3RSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX1NDT1JFX0xJU1RfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgcGFyYW0gOiBtc2csXHJcbiAgICAgICAgICAgIC8vIGlzY3JlYXRlIDogbXNnLmlzY3JlYXRlLFxyXG4gICAgICAgICAgICAvLyBzdGFydCA6IG1zZy5zdGFydCxcclxuICAgICAgICAgICAgLy8gdG90YWwgOiBtc2cudG90YWwsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFNjb3JlTGlzdFJlcVBhY2tldDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8zMC5cclxuICovXHJcblxyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG4vKlxyXG4gKiB0eXBlIFVTX1JFU1BfU0NPUkVfTElTVF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFBhcmFtIFBBUkFNX1JFU1BfU0NPUkVfTElTVF9UIGBqc29uOlwicGFyYW1cImBcclxuIH1cclxuIHR5cGUgUEFSQU1fUkVTUF9TQ09SRV9MSVNUX1Qgc3RydWN0IHtcclxuIElzQ3JlYXRlIGludDggICAgICAgICAgIGBqc29uOlwiaXNjcmVhdGVcImAgLy8w77ya5Y+C5LiO55qE54mM5bGALCAxOiDliJvlu7rnmoTniYzlsYBcclxuIExpc3QgICAgIFtdVVNFUl9TQ09SRV9UIGBqc29uOlwibGlzdFwiYFxyXG4gfVxyXG4gdHlwZSBVU0VSX1NDT1JFX1Qgc3RydWN0IHtcclxuIFByaXZhdGVJZCAgaW50ICAgIGBqc29uOlwicHJpdmF0ZWlkXCJgXHJcbiBDcmVhdGVUaW1lIGludDY0ICBganNvbjpcImNyZWF0ZXRpbWVcImBcclxuIExpdmVUaW1lICAgaW50NjQgIGBqc29uOlwibGl2ZXRpbWVcImBcclxuIFRhYmxlTmFtZSAgc3RyaW5nIGBqc29uOlwidGFibGVuYW1lXCJgXHJcbiBPd25lck5hbWUgIHN0cmluZyBganNvbjpcIm93bmVybmFtZVwiYFxyXG4gSGVhZFVybCAgICBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBDYXJyeUNvaW4gIGludCAgICBganNvbjpcImNhcnJ5Y29pblwiYCAvL+aQuuW4plxyXG4gV2luQ29pbiAgICBpbnQgICAgYGpzb246XCJ3aW5jb2luXCJgICAgLy/ovpPotaJcclxuIH1cclxuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gU2NvcmVMaXN0UmVzcFBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXNwLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVTUF9TQ09SRV9MSVNUX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucGFyYW0gPSBtc2cucGFyYW07XHJcbiAgICAgICAgLy92YXIganNvbiA9IEpTT04ucGFyc2UoQkFTRTY0LmRlY29kZXIobXNnLnBhcmFtKSk7XHJcbiAgICAgICAgdGhpcy5pc2NyZWF0ZSA9IHRoaXMucGFyYW0uaXNjcmVhdGU7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5wYXJhbS5saXN0O1xyXG5cclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFNjb3JlTGlzdFJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvOC5cclxuICovXHJcbnZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoJ0dhbWVTeXN0ZW0nKVxyXG5cclxuZnVuY3Rpb24gU2VhcmNoQ2x1YlJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfU0VBUkNIX0NMVUJfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9nKFwiRmluZFJvb21SZXFQYWNrZXQuc2VuZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBrZXkgOiBtc2cua2V5LFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFNlYXJjaENsdWJSZXFQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzQvOC5cclxuICovXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIFNlYXJjaENsdWJSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX1NFQVJDSF9DTFVCX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucGFyYW0gPSBtc2cucGFyYW07XHJcbiAgICAgICAgLy9HbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgU2VhcmNoQ2x1YlJlc3BQYWNrZXQ7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMjIuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG5mdW5jdGlvbiBTZXJ2ZXJLaWNrT3V0UGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19LSUNLX09VVF9DTURfSUQ7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG5cclxuICAgICAgICB0aGlzLnNlcSA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgLy9HbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgU2VydmVyS2lja091dFBhY2tldDsiLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoXCJCYXNlUG9wXCIpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKFwiTXVzaWNNZ3JcIik7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKFwiQXVkaW9fQ29tbW9uXCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgQ29tbWl0TGF5b3V0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxheW91dFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgSGlzdG9yeUxheW91dCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYXlvdXRcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNlcnZpY2VPbmxpbmVMYXlvdXQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGF5b3V0XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ1NlcnZpY2VWaWV3IDogb25Mb2FkJyk7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcInN0b3AgZXZlbnRcIik7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zY2FsZVRvKHRoaXMuYmcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0bkNsb3NlIDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coXCJTZXJ2aWNlVmlldyA6IGNhbGxiYWNrQnRuQ2xvc2VcIik7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxiYWNrQnRuTGFiZWwgOiBmdW5jdGlvbih0b2dnbGUsY3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZyhcIlNlcnZpY2VWaWV3IDogY2FsbGJhY2tCdG5MYWJlbCxjdXN0b21FdmVudERhdGEgPSBcIiArIGN1c3RvbUV2ZW50RGF0YSk7XHJcbiAgICAgICAgTXVzaWNNZ3IucGxheUVmZmVjdChBdWRpb19Db21tb24uQVVESU9fQlROX0NMSUNLKTtcclxuICAgICAgICB0aGlzLnN3aXRjaExheW91dChjdXN0b21FdmVudERhdGEpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc3dpdGNoTGF5b3V0IDogZnVuY3Rpb24odHlwZSlcclxuICAgIHtcclxuICAgICAgICBpZih0eXBlID09PSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Db21taXRMYXlvdXQubm9kZS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAvL3RoaXMuQ29tbWl0TGF5b3V0Lm5vZGUub3BhY2l0eSA9IDI1NTtcclxuICAgICAgICAgICAgdGhpcy5IaXN0b3J5TGF5b3V0Lm5vZGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuU2VydmljZU9ubGluZUxheW91dC5ub2RlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHR5cGUgPT09IDIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkNvbW1pdExheW91dC5ub2RlLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAvL3RoaXMuQ29tbWl0TGF5b3V0Lm5vZGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuSGlzdG9yeUxheW91dC5ub2RlLm9wYWNpdHkgPSAyNTU7XHJcbiAgICAgICAgICAgIHRoaXMuU2VydmljZU9ubGluZUxheW91dC5ub2RlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkNvbW1pdExheW91dC5ub2RlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLkhpc3RvcnlMYXlvdXQubm9kZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5TZXJ2aWNlT25saW5lTGF5b3V0Lm5vZGUub3BhY2l0eSA9IDI1NTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KTtcclxuIiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKFwiQmFzZVBvcFwiKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZShcIk11c2ljTWdyXCIpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZShcIkF1ZGlvX0NvbW1vblwiKTtcclxudmFyIFdlQ2hhdEFwaSA9IHJlcXVpcmUoJ1dlQ2hhdEFwaScpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgICAgICBNdXNpY1N3aXRjaCA6IGNjLlRvZ2dsZSxcclxuICAgICAgICBFZmZlY3RTd2l0Y2ggOiBjYy5Ub2dnbGUsXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygnU2V0dGluZ1ZpZXcgOiBvbkxvYWQnKTtcclxuICAgICAgICAvLyB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAvLyAgICAgY2MubG9nKFwic3RvcCBldmVudFwiKTtcclxuICAgICAgICAvLyAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgLy8gfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBcclxuICAgICAgICAvL3RoaXMuc2NhbGVUbyh0aGlzLmJnKTtcclxuXHJcbiAgICAgICAgdGhpcy5NdXNpY1N3aXRjaC5pc0NoZWNrZWQgPSAoTXVzaWNNZ3IuZ2V0TXVzaWNWb2x1bWUoKSA9PSAxKTtcclxuICAgICAgICB0aGlzLkVmZmVjdFN3aXRjaC5pc0NoZWNrZWQgPSAoTXVzaWNNZ3IuZ2V0RWZmZWN0Vm9sdW1lKCkgPT0gMSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbiAgICBcclxuICAgIGNhbGxCYWNrQnRuTXVzaWMgOiBmdW5jdGlvbiAodG9nZ2xlLEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIHZhciBidG5OYW1lID0gdG9nZ2xlLnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiU2V0dGluZ1ZpZXcuY2FsbEJhY2tCdG5NdXNpYyxidG5OYW1lID0gXCIgKyBidG5OYW1lKTtcclxuICAgICAgICB2YXIgaXNDaGVjayA9IHRvZ2dsZS5pc0NoZWNrZWQ7XHJcbiAgICAgICAgY2MubG9nKFwiU2V0dGluZ1ZpZXcuY2FsbEJhY2tCdG5NdXNpYyxpc0NoZWNrID0gXCIgKyBpc0NoZWNrKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGlmKEN1c3RvbUV2ZW50RGF0YSA9PSAxKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoaXNDaGVjaylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTXVzaWNNZ3Iuc2V0RWZmZWN0c1ZvbHVtZSgxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE11c2ljTWdyLnNldEVmZmVjdHNWb2x1bWUoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihDdXN0b21FdmVudERhdGEgPT0gMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGlzQ2hlY2spXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIE11c2ljTWdyLnNldE11c2ljVm9sdW1lKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgTXVzaWNNZ3Iuc2V0TXVzaWNWb2x1bWUoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihDdXN0b21FdmVudERhdGEgPT0gMylcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGNhbGxiYWNrQnRuQ2xvc2UgIDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZygnU2V0dGluZ1ZpZXc6Y2FsbGJhY2tCdG5DbG9zZScpIDtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjYWxsYmFja0J0bkFib3V0IDogZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIGNjLmxvZygnU2V0dGluZ1ZpZXc6Y2FsbGJhY2tCdG5BYm91dCcpIDtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIC8vdGhpcy5kaXNtaXNzKCk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja0J0bkV4aXRBY2NvdXQgOiBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKCdTZXR0aW5nVmlldzpjYWxsYmFja0J0bkV4aXRBY2NvdXQnKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdIYWxsU2NlbmUnKTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgcG9wVmlldyA6IFwiU2V0dGluZ1ZpZXdcIixcclxuICAgICAgICAgICAgYnRuIDogXCJCdG5FeGl0TG9naW5cIixcclxuICAgICAgICB9O1xyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU29ja2V0TWVzc2FnZSxcclxuICAgICAgICAgICAge3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuU0NFTkVfTVNHLCBkYXRhOm1lc3NhZ2V9KSA7XHJcbiAgICAgICAgV2VDaGF0QXBpLmdldEluc3RhbmNlKCkuY2xlYXJXZUNoYXRMb2dpbigpO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG52YXIgTXVzaWNNZ3IgPSByZXF1aXJlKCdNdXNpY01ncicpO1xyXG52YXIgQXVkaW9fQ29tbW9uID0gcmVxdWlyZSgnQXVkaW9fQ29tbW9uJyk7XHJcbnZhciBXZUNoYXRBcGkgPSByZXF1aXJlKFwiV2VDaGF0QXBpXCIpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxud2luZG93LlNoYXJlVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgRV9TSEFSRVRZUEVfU1RSSU5HIDogMSxcclxuICAgIEVfU0hBUkVUWVBFX0lNQUdFIDogMixcclxuICAgIEVfU0hBUkVUWVBFX0xJTksgOiAzLFxyXG4gICAgRV9TSEFSRVRZUEVfQVBQIDogNFxyXG59KTtcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IEJhc2VQb3AsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5pbml0QmFzZURhdGEoKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRCYXNlRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlNoYXJlU3RyaW5nID0gXCJcIjtcclxuICAgICAgICB0aGlzLkltYWdlUGF0aCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5VcmwgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuU2hhcmVUeXBlID0gU2hhcmVUeXBlLkVfU0hBUkVUWVBFX1NUUklORztcclxuICAgIH0sXHJcblxyXG4gICAgY2FsbGJhY2tCdG4gOiBmdW5jdGlvbihldmVudCxDdXN0b21FdmVudERhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwiU2hhcmVWaWV3LmNhbGxiYWNrQnRuLEN1c3RvbUV2ZW50RGF0YSA9IFwiICsgQ3VzdG9tRXZlbnREYXRhKTtcclxuICAgICAgICB2YXIgYnRuTmFtZSA9IGV2ZW50LnRhcmdldC5nZXROYW1lKCk7XHJcbiAgICAgICAgY2MubG9nKFwiU2hhcmVWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoYnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoYnRuTmFtZSA9PSBcIkJ0bkZyaWVuZHNcIikge1xyXG4gICAgICAgICAgICB0aGlzLlNoYXJlQ2FsbEJhY2soMSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGJ0bk5hbWUgPT0gXCJCdG5XZWNoYXRcIikge1xyXG4gICAgICAgICAgICB0aGlzLlNoYXJlQ2FsbEJhY2soMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldFNoYXJlVHllcCA6IGZ1bmN0aW9uICh0eXBlLHN0cix1cmwpIHtcclxuICAgICAgICB0aGlzLlNoYXJlVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5TaGFyZVN0cmluZyA9IHN0cjtcclxuICAgICAgICB0aGlzLkltYWdlUGF0aCA9IHN0cjtcclxuICAgICAgICB0aGlzLlVybCA9IHVybDtcclxuICAgIH0sXHJcblxyXG4gICAgXHJcbiAgICBTaGFyZUNhbGxCYWNrIDogZnVuY3Rpb24gKHR5cGUpIHtcclxuXHJcblx0ICAgIGNjLmxvZyhcIlNoYXJlQ2FsbEJhY2ssIHR5cGU9XCIgKyB0eXBlICsgJywgU2hhcmVTdHJpbmc9JyArIHRoaXMuU2hhcmVTdHJpbmcgKyBcIiwgdXJsPVwiICsgdGhpcy5VcmwgKyBcIiwgU2hhcmVUeXBlPVwiICsgdGhpcy5TaGFyZVR5cGUpO1xyXG5cclxuICAgICAgICBpZih0aGlzLlNoYXJlVHlwZSA9PSBTaGFyZVR5cGUuRV9TSEFSRVRZUEVfU1RSSU5HKVxyXG4gICAgICAgIHtcclxuXHQgICAgICAgIGlmKGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuQU5EUk9JRCl7XHJcblx0XHRcdFx0U29jaWFsVXRpbHMuc2hhcmVUb1dlaXhpbigwLCBcIjUx54mb5Y+L5LyaXCIsIHRoaXMuU2hhcmVTdHJpbmcsIHRoaXMuVXJsKTtcclxuXHQgICAgICAgIH1lbHNle1xyXG5cdFx0ICAgICAgICBXZUNoYXRBcGkuZ2V0SW5zdGFuY2UoKS5zZW5kVGV4dENvbnRlbnQodHlwZSx0aGlzLlNoYXJlU3RyaW5nLCB0aGlzLlVybCk7XHJcblx0ICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYodGhpcy5TaGFyZVR5cGUgPT0gU2hhcmVUeXBlLkVfU0hBUkVUWVBFX0lNQUdFKVxyXG4gICAgICAgIHtcclxuXHQgICAgICAgIGlmKGNjLnN5cy5wbGF0Zm9ybSA9PSBjYy5zeXMuQU5EUk9JRCl7XHJcblx0XHQgICAgICAgIFNvY2lhbFV0aWxzLnNoYXJlVG9XZWl4aW4oMiwgXCI1MeeJm+WPi+S8mlwiLCB0aGlzLlNoYXJlU3RyaW5nLCB0aGlzLlVybCk7XHJcblx0ICAgICAgICB9ZWxzZSB7XHJcblx0XHQgICAgICAgIFdlQ2hhdEFwaS5nZXRJbnN0YW5jZSgpLnNlbmRJbWFnZUNvbnRlbnQodHlwZSwgdGhpcy5JbWFnZVBhdGgsIHRoaXMuVXJsKTtcclxuXHQgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZih0aGlzLlNoYXJlVHlwZSA9PSBTaGFyZVR5cGUuRV9TSEFSRVRZUEVfTElOSylcclxuICAgICAgICB7XHJcblx0ICAgICAgICBpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkFORFJPSUQpe1xyXG5cdFx0ICAgICAgICBTb2NpYWxVdGlscy5zaGFyZVRvV2VpeGluKDAsIFwiNTHniZvlj4vkvJpcIiwgdGhpcy5TaGFyZVN0cmluZywgdGhpcy5VcmwpO1xyXG5cdCAgICAgICAgfWVsc2Uge1xyXG5cdFx0ICAgICAgICBXZUNoYXRBcGkuZ2V0SW5zdGFuY2UoKS5zZW5kTGlua0NvbnRlbnQodHlwZSwgdGhpcy5TaGFyZVN0cmluZywgdGhpcy5VcmwpO1xyXG5cdCAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHRoaXMuU2hhcmVUeXBlID09IFNoYXJlVHlwZS5FX1NIQVJFVFlQRV9BUFApXHJcbiAgICAgICAge1xyXG5cdCAgICAgICAgaWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKXtcclxuXHRcdCAgICAgICAgU29jaWFsVXRpbHMuc2hhcmVUb1dlaXhpbih0eXBlLCBcIjUx54mb5Y+L5LyaXCIsIHRoaXMuU2hhcmVTdHJpbmcsIHRoaXMuVXJsKTtcclxuXHQgICAgICAgIH1lbHNlIHtcclxuXHRcdCAgICAgICAgV2VDaGF0QXBpLmdldEluc3RhbmNlKCkuc2VuZEFwcENvbnRlbnQodHlwZSwgdGhpcy5TaGFyZVN0cmluZywgdGhpcy5VcmwpO1xyXG5cdCAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzMvMzAuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG4vKlxyXG4gKiB0eXBlIFVTX1JFUV9TSE9QX0NPTkZfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIH1cclxuIH1cclxuICogKi9cclxuZnVuY3Rpb24gU2hvcENvbmZSZXFQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVxLmFwcGx5KHRoaXMsIFtdKTsgIC8v6ZuG5oiQ54i257G75pWw5o2uXHJcblxyXG4gICAgdGhpcy5jbWQgPSB3aW5kb3cuVVNfUkVRX1NIT1BfQ09ORl9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFNob3BDb25mUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzMwLlxyXG4gKi9cclxuXHJcbnZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbi8qXHJcbiAqIHR5cGUgVVNfUkVTUF9TSE9QX0NPTkZfVCBzdHJ1Y3Qge1xyXG4gSnNvbkhlYWRcclxuIFJlc3BIZWFkXHJcbiBQYXJhbSBQQVJBTV9TSE9QX0NPTkZfVCBganNvbjpcInBhcmFtXCJgXHJcbiB9XHJcbiB0eXBlIFBBUkFNX1NIT1BfQ09ORl9UIHN0cnVjdCB7XHJcbiBHb2xkTGlzdCAgICBbXVNIT1BfQ09ORl9UIGBqc29uOlwiZ29sZGxpc3RcImBcclxuIERpYW1vbmRMaXN0IFtdU0hPUF9DT05GX1QgYGpzb246XCJkaWFtb25kbGlzdFwiYFxyXG4gfVxyXG4gdHlwZSBTSE9QX0NPTkZfVCBzdHJ1Y3Qge1xyXG4gVHlwZSB1aW50OCAgYGpzb246XCJ0eXBlXCJgXHJcbiBQcm9wIHVpbnQzMiBganNvbjpcInByb3BcImAgLy/llYblk4Es5aaC6LSt5Lmw56aP6KKLLOiOt+W+lzYyMOmHkeW4gVxyXG4gQ29zdCB1aW50MzIgYGpzb246XCJjb3N0XCJgIC8v5raI6ICXLOWmgui0reS5sOemj+iiiyzmtojogJfpkrvnn7M76LSt5Lmw6ZK755+zLOa2iOiAl21vbmV5XHJcbiBOYW1lIHN0cmluZyBganNvbjpcIm5hbWVcImAgLy/llYblk4HlkI3np7BcclxuIERlc2Mgc3RyaW5nIGBqc29uOlwiZGVzY1wiYCAvL+aPj+i/sCznlKjkuo7pgZPlhbdcclxuIH1cclxuXHJcbiAvL+mHkeW4gemBk+WFt1xyXG4gY29uc3QgKFxyXG4gRV9HT0xEX1RZUEVfMSA9IDEgLy/npo/oootcclxuIEVfR09MRF9UWVBFXzIgPSAyIC8v6IGa5a6d55uGXHJcbiBFX0dPTERfVFlQRV8zID0gMyAvL+i0ouelnueIt1xyXG4gKVxyXG5cclxuIC8v6ZK755+z6YGT5YW3XHJcbiBjb25zdCAoXHJcbiBFX0RJQU1PTkRfVFlQRV8xID0gMVxyXG4gRV9ESUFNT05EX1RZUEVfMj0yXHJcbiBFX0RJQU1PTkRfVFlQRV8zPTNcclxuIEVfRElBTU9ORF9UWVBFXzQ9NFxyXG4gRV9ESUFNT05EX1RZUEVfNT01XHJcbiBFX0RJQU1PTkRfVFlQRV82PTZcclxuIClcclxuICovXHJcblxyXG5mdW5jdGlvbiBTaG9wQ29uZlJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfU0hPUF9DT05GX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCA9IG1zZy51aWQ7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gbXNnLmNvZGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gbXNnLmRlc2M7XHJcbiAgICAgICAgaWYodGhpcy5jb2RlIDwgU29ja2V0UmV0Q29kZS5SRVRfU1VDQ0VTUylcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMucGFyYW0gPSBtc2cucGFyYW07XHJcbiAgICAgICAgdGhpcy5nb2xkbGlzdCA9IHRoaXMucGFyYW0uZ29sZGxpc3Q7XHJcbiAgICAgICAgdGhpcy5kaWFtb25kbGlzdCA9IHRoaXMucGFyYW0uZGlhbW9uZGxpc3Q7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBTaG9wQ29uZlJlc3BQYWNrZXQ7IiwidmFyIEJhc2VQb3AgPSByZXF1aXJlKCdCYXNlUG9wJyk7XHJcbnZhciBNZXNzYWdlRmFjdG9yeSA9IHJlcXVpcmUoJ01lc3NhZ2VGYWN0b3J5Jyk7XHJcbnZhciBQcm9kdWNlQ2VsbCA9IHJlcXVpcmUoJ1Byb2R1Y2VDZWxsJyk7XHJcbnZhciBNdXNpY01nciA9IHJlcXVpcmUoJ011c2ljTWdyJyk7XHJcbnZhciBBdWRpb19Db21tb24gPSByZXF1aXJlKCdBdWRpb19Db21tb24nKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgR29sZFNjcm9sbFZpZXcgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgICAgIERpYW1vbmRTY3JvbGxWaWV3IDogY2MuU2Nyb2xsVmlldyxcclxuICAgICAgICBQcm9kdWNlQ2VsbF8wIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIFByb2R1Y2VDZWxsXzEgOiBjYy5QcmVmYWIsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfU0hPUF9DT05GX0NNRF9JRCkuc2VuZCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG5cclxuICAgIC8qKioqKioqKioqKioqKioqKioqKipOZXR3b3JrKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgb25NZXNzYWdlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgY2MubG9nKFwiU2hvcFZpZXcub25NZXNzYWdlXCIpO1xyXG4gICAgICAgIC8vdGhpcy5fc3VwZXIoZXZlbnQpO1xyXG4gICAgICAgIHZhciBtc2cgPSBldmVudC5kYXRhO1xyXG4gICAgICAgIHZhciBjbWQgPSBtc2cuY21kO1xyXG4gICAgICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVVNfUkVTUF9TSE9QX0NPTkZfQ01EX0lEOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNob3BDb25mTXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4vKlxyXG4qIHtcImNtZFwiOjEzMTIxMCxcInNlcVwiOjEsXCJ1aWRcIjoxMDY4OCxcImNvZGVcIjowLFwiZGVzY1wiOlwi5omn6KGM5oiQ5YqfXCIsXCJwYXJhbVwiOntcclxuKiBcImdvbGRsaXN0XCI6W1xyXG4qICAge1widHlwZVwiOjEsXCJwcm9wXCI6NjIwLFwiY29zdFwiOjYwLFwibmFtZVwiOlwi56aP6KKLXCIsXCJkZXNjXCI6XCLlkKs2MDDniZvluIEs6aKd5aSW6YCBMjBcIn0sXHJcbiogICB7XCJ0eXBlXCI6MixcInByb3BcIjozMjAwLFwiY29zdFwiOjMwMCxcIm5hbWVcIjpcIuiBmuWuneebhlwiLFwiZGVzY1wiOlwi5ZCrMzAwMOeJm+W4gSzpop3lpJbpgIEyMDBcIn0sXHJcbiogICB7XCJ0eXBlXCI6MyxcInByb3BcIjoxMzgwMCxcImNvc3RcIjoxMjgwLFwibmFtZVwiOlwi6LSi56We54i3XCIsXCJkZXNjXCI6XCLlkKsxMjgwMOeJm+W4gSzpop3lpJbpgIExMDAwXCJ9XHJcbiogIF0sXHJcbiogIFwiZGlhbW9uZGxpc3RcIjpbXHJcbiogICB7XCJ0eXBlXCI6MSxcInByb3BcIjo2MCxcImNvc3RcIjo2LFwibmFtZVwiOlwiNjDpkrvnn7NcIixcImRlc2NcIjpcIlxcXCJcXFwiXCJ9LFxyXG4qICAge1widHlwZVwiOjIsXCJwcm9wXCI6MzAwLFwiY29zdFwiOjMwLFwibmFtZVwiOlwiMzAw6ZK755+zXCIsXCJkZXNjXCI6XCJcXFwiXFxcIlwifSxcclxuKiAgIHtcInR5cGVcIjozLFwicHJvcFwiOjEyODAsXCJjb3N0XCI6MTI4LFwibmFtZVwiOlwiMTI4MOmSu+efs1wiLFwiZGVzY1wiOlwiXFxcIlxcXCJcIn0sXHJcbiogICB7XCJ0eXBlXCI6NCxcInByb3BcIjozMjgwLFwiY29zdFwiOjMyOCxcIm5hbWVcIjpcIjMyODDpkrvnn7NcIixcImRlc2NcIjpcIlxcXCJcXFwiXCJ9LFxyXG4qICAge1widHlwZVwiOjUsXCJwcm9wXCI6NjE4MCxcImNvc3RcIjo2MTgsXCJuYW1lXCI6XCI2MTgw6ZK755+zXCIsXCJkZXNjXCI6XCJcXFwiXFxcIlwifV19fVxyXG4qICovXHJcbiAgICBvblNob3BDb25mTXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUdvbGRMaXN0KG1zZy5nb2xkbGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGlhbW9uZExpc3QobXNnLmRpYW1vbmRsaXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICB1cGRhdGVHb2xkTGlzdCA6IGZ1bmN0aW9uIChnb2xkbGlzdCkge1xyXG5cclxuICAgICAgICB0aGlzLkdvbGRTY3JvbGxWaWV3LmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCA9IDA7aW5kZXggPCBnb2xkbGlzdC5sZW5ndGg7aW5kZXgrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBnb2xkID0gY2MuaW5zdGFudGlhdGUodGhpcy5Qcm9kdWNlQ2VsbF8wKTtcclxuICAgICAgICAgICAgdGhpcy5Hb2xkU2Nyb2xsVmlldy5jb250ZW50LmFkZENoaWxkKGdvbGQpO1xyXG4gICAgICAgICAgICBnb2xkLnNldFBvc2l0aW9uKGNjLnAoMCwwIC0gZ29sZC5nZXRDb250ZW50U2l6ZSgpLmhlaWdodCooaW5kZXggKyAwLjUpKSk7XHJcbiAgICAgICAgICAgIGdvbGQuZ2V0Q29tcG9uZW50KFwiUHJvZHVjZUNlbGxcIikuc2V0UHJvZHVjZURhdGEoMCxnb2xkbGlzdFtpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlRGlhbW9uZExpc3QgOiBmdW5jdGlvbiAoZGlhbW9uZGxpc3QpIHtcclxuXHJcbiAgICAgICAgdGhpcy5EaWFtb25kU2Nyb2xsVmlldy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKHRydWUpO1xyXG4gICAgICAgIGZvcih2YXIgaW5kZXggPSAwO2luZGV4IDwgZGlhbW9uZGxpc3QubGVuZ3RoO2luZGV4KyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgRGlhbW9uZCA9IGNjLmluc3RhbnRpYXRlKHRoaXMuUHJvZHVjZUNlbGxfMCk7XHJcbiAgICAgICAgICAgIHRoaXMuRGlhbW9uZFNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZChEaWFtb25kKTtcclxuICAgICAgICAgICAgRGlhbW9uZC5zZXRQb3NpdGlvbihjYy5wKDAsMCAtIERpYW1vbmQuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQqKGluZGV4ICsgMC41KSkpO1xyXG4gICAgICAgICAgICBEaWFtb25kLmdldENvbXBvbmVudChcIlByb2R1Y2VDZWxsXCIpLnNldFByb2R1Y2VEYXRhRGlhbW9uZCgxLCBkaWFtb25kbGlzdFtpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQgLCBDdXN0b21FdmVudERhdGEpIHtcclxuICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICBNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbEJhY2tCdG5Ub2dnbGUgOiBmdW5jdGlvbiAodG9nZ2xlLEN1c3RvbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoQ3VzdG9tRXZlbnREYXRhID09IDEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkdvbGRTY3JvbGxWaWV3Lm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5EaWFtb25kU2Nyb2xsVmlldy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLkdvbGRTY3JvbGxWaWV3Lm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuRGlhbW9uZFNjcm9sbFZpZXcubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRTY3JvbGxWaWV3IDogZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICBcclxuICAgIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMy8xLlxyXG4gKi9cclxuXHJcbi8qRV9ET1dOX1RZUEUgPSAxIC8v5Z2Q5LiLXHJcbkVfUklTRV9UWVBFID0gMiAvL+ermei1t1xyXG4qL1xyXG5cclxuLypcclxuIFNlYXRJZCBpbnQgYGpzb246XCJzZWF0aWRcImBcclxuIFN0YXR1cyBpbnQgYGpzb246XCJzdGF0dXNcImAgLy8xLiDlnZDkuIvvvIwy77ya56uZ6LW3XHJcbiovXHJcblxyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoJ01lc3NhZ2VSZXEnKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG5mdW5jdGlvbiBTaXREb3duUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9TSVRfRE9XTl9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgICAgICBnYW1lc3ZjaWQgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuZ2FtZXN2Y2lkLFxyXG4gICAgICAgICAgICB0YWJsZWlkICAgOiBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkudGFibGVpZCxcclxuICAgICAgICAgICAgc2VhdGlkICAgIDogbXNnLnNlYXRpZCxcclxuICAgICAgICAgICAgc3dpdGNoICAgIDogbXNnLnN0YXR1cyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmVtaXRFdmVudCh3aW5kb3cuU09DS0VUVF9TRU5ETUVTU0FHRSwgdGhpcyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9ICBTaXREb3duUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG5cclxuLypcclxuIHR5cGUgVVNfUkVTUF9TSVRfRE9XTl9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIFN3aXRjaCAgICBpbnQgICAgYGpzb246XCJzd2l0Y2hcImAgLy8xLiDlnZDkuIvvvIwy77ya56uZ6LW3XHJcbiBTdGF0dXMgICAgaW50ICAgIGBqc29uOlwic3RhdHVzXCJgIC8v546p5a6254q25oCBXHJcbiBTZWF0SWQgICAgaW50ICAgIGBqc29uOlwic2VhdGlkXCJgXHJcbiBTZWF0VWlkICAgdWludDMyIGBqc29uOlwic2VhdHVpZFwiYFxyXG4gTmFtZSAgICAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuIEhlYWRVcmwgICBzdHJpbmcgYGpzb246XCJoZWFkdXJsXCJgXHJcbiBTZXggICAgICAgaW50ICAgIGBqc29uOlwic2V4XCJgXHJcbiBDYXJyeVRpbWUgaW50ICAgIGBqc29uOlwiY2Fycnl0aW1lXCJgIC8v6YCJ5oup5pC65bim6YeR5biB5pe26Ze0XHJcbiBNaW5DYXJyeSAgaW50ICAgIGBqc29uOlwibWluY2FycnlcImAgIC8v5piv5ZCm6ZyA6KaB5pC65bimXHJcbiBJc0NhcnJ5ICAgaW50OCAgIGBqc29uOlwiaXNjYXJyeVwiYCAgIC8v5piv5ZCm6ZyA6KaB5pC65bim6YeR5biB77yMMe+8muesrOS4gOasoeWdkOS4i++8jOmcgOimgeaQuuW4pu+8jDDvvJrkuYvliY3lj4LkuI7ov4fvvIzov5jmnInph5HluIFcclxuIENvaW4gICAgICBpbnQgICAgYGpzb246XCJjb2luXCJgICAgICAgLy/lpoLmnpxpc2NhcnJ5PT0wLCBjb2lu5piv546p5a626YeR5biBXHJcbiB9XHJcbiogKi9cclxudmFyIE1lc3NhZ2VSZXNwID0gcmVxdWlyZShcIk1lc3NhZ2VSZXNwXCIpO1xyXG5cclxuZnVuY3Rpb24gU2l0RG93blJlc3BQYWNrZXQoKSB7XHJcbiAgICBNZXNzYWdlUmVzcC5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFU1BfU0lUX0RPV05fQ01EX0lEO1xyXG4gICAgLy90aGlzLnN0YXR1cyAgICA9IDA7XHJcbiAgICAvL3RoaXMuc2VhdGlkICAgID0gMDtcclxuICAgIC8vdGhpcy5zZWF0dWlkICAgPSAwO1xyXG4gICAgLy90aGlzLm5hbWUgICAgICA9IFwiXCI7XHJcbiAgIC8vIHRoaXMuaGVhZHVybCAgID0gXCJcIjtcclxuICAgIC8vdGhpcy5zZXggICAgICAgPSAwO1xyXG4gICAgLy8gdGhpcy5nb2xkICAgICAgPSAwO1xyXG4gICAgLy8gdGhpcy5kaWFtb25kICAgPSAwO1xyXG4gICAgLy90aGlzLmNvaW4gICAgICA9IDA7XHJcbiAgICAvL3RoaXMuY2Fycnl0aW1lID0gMDtcclxuICAgIC8vdGhpcy5taW5jYXJyeSAgPSAwO1xyXG4gICAgLy90aGlzLmlzY2FycnkgICA9IDA7XHJcbiAgICAvL3RoaXMuc3dpdGNoICAgID0gMDtcclxuICAgIC8vIHRoaXMudG90YWxyb3VuZCA9IDA7XHJcbiAgICAvLyB0aGlzLnRvdGFsdGFibGUgPSAwO1xyXG4gICAgLy90aGlzLnRzdGF0dXMgICAgPSAwO1xyXG4gICAgLy8gdGhpcy53aW4gICAgICAgID0gMDtcclxuICAgIC8vIHRoaXMudG90YWwgICAgICA9IDA7XHJcblxyXG4gICAgLy/mjqXmlLbnmoTmlbDmja5cclxuICAgIHRoaXMub25NZXNzYWdlID0gZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcIlNpdERvd25SZXNwUGFja2V0Lm9uTWVzc2FnZSwgbXNnLnRvdGFscm91bmQ9XCIsIG1zZy50b3RhbHJvdW5kLCBcIiB0b3RhbHRhYmxlPVwiLCBtc2cudG90YWx0YWJsZSk7XHJcbiAgICAgICAgdGhpcy5zZXEgPSBtc2cuc2VxO1xyXG4gICAgICAgIHRoaXMudWlkID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBtc2cuZGVzYztcclxuICAgICAgICBpZih0aGlzLmNvZGUgPCBTb2NrZXRSZXRDb2RlLlJFVF9TVUNDRVNTKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMuc3dpdGNoID0gbXNnLnN3aXRjaDtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IG1zZy5zdGF0dXM7XHJcbiAgICAgICAgdGhpcy5zZWF0aWQgPSBtc2cuc2VhdGlkO1xyXG4gICAgICAgIHRoaXMuc2VhdHVpZCA9IG1zZy5zZWF0dWlkO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG1zZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuaGVhZHVybCA9IG1zZy5oZWFkdXJsO1xyXG4gICAgICAgIHRoaXMuc2V4ID0gbXNnLnNleDtcclxuICAgICAgICB0aGlzLmNvaW4gPSBtc2cuY29pbjtcclxuICAgICAgICB0aGlzLmNhcnJ5dGltZSA9IG1zZy5jYXJyeXRpbWU7XHJcbiAgICAgICAgdGhpcy5pc2NhcnJ5ID0gbXNnLmlzY2Fycnk7XHJcbiAgICAgICAgdGhpcy50c3RhdHVzID0gbXNnLnRzdGF0dXM7XHJcbiAgICAgICAgdGhpcy50b3RhbHJvdW5kID0gbXNnLnRvdGFscm91bmQ7XHJcbiAgICAgICAgdGhpcy50b3RhbHRhYmxlID0gbXNnLnRvdGFsdGFibGU7XHJcbiAgICAgICAgdGhpcy53aW4gICAgICAgID0gbXNnLndpbjtcclxuICAgICAgICB0aGlzLnRvdGFsICAgICAgPSBtc2cudG90YWw7XHJcbiAgICAgICAgdGhpcy5nb2xkICAgICAgPSBtc2cuZ29sZDtcclxuICAgICAgICB0aGlzLmRpYW1vbmQgICA9IG1zZy5kaWFtb25kO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgU2l0RG93blJlc3BQYWNrZXQ7IiwidmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgVXRpbFRvb2wgPSByZXF1aXJlKCdVdGlsVG9vbCcpO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG52YXIgR2FtZVBsYXllciA9IHJlcXVpcmUoJ0dhbWVQbGF5ZXInKTtcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBCdG5BZ3JlZSAgICAgOiBjYy5Ob2RlLFxyXG4gICAgICAgIEJ0blJlZnVzZSAgICA6IGNjLk5vZGUsXHJcbiAgICAgICAgUmVxTXNnICAgICAgIDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgVGltZSAgICAgICAgIDogY2MuTGFiZWwsXHJcbiAgICAgICAgSGVhZCAgICAgICAgIDogY2MuU3ByaXRlLFxyXG4gICAgICAgIFRpdGxlICAgICAgICA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFJvb21JbmZvVmlldyA6IGNjLlByZWZhYixcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tc2cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubXNnVHlwZSA9IDA7IC8vIOmdnuS/seS5kOmDqOa2iOaBr1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1zZ1R5cGUgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubXNnLmRlYWwgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc2VsZi5tc2cudHlwZSA9PSAzKSB8fCAoc2VsZi5tc2cudHlwZSA9PSA0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiBzZWxmLm1zZy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnaWQ6IHNlbGYubXNnLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCJyZWFkIE1zZ0lkPVwiLCBkYXRhLm1zZ2lkLCBcIiB0eXBlPVwiLCBkYXRhLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKFVTX1JFUV9TRVRfTVNHX1JFQURfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwicmVhZCBNc2dJZD1cIiwgZGF0YS5tc2dpZCwgXCIgdHlwZT1cIiwgZGF0YS50eXBlLCBcIiBkZWFsPVwiLCBkZWFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmKHNlbGYubXNnLnR5cGUgIT0gMSlcclxuICAgICAgICAgICAgICAgIC8vIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHlwZTogc2VsZi5tc2cudHlwZSxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgbXNnaWQ6IHNlbGYubXNnLmlkLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcShVU19SRVFfU0VUX01TR19SRUFEX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNZXNzYWdlSW5mbyA6IGZ1bmN0aW9uIChtc2csIG1zZ1R5cGUpIHtcclxuICAgICAgICBjYy5sb2coXCJTaXRSZXFDZWxsLnNldE1lc3NhZ2VJbmZvLCBtc2c9IFwiICsgbXNnLm1zZyk7XHJcbiAgICAgICAgdGhpcy5tc2cgICAgID0gbXNnO1xyXG4gICAgICAgIHRoaXMubXNnVHlwZSA9IG1zZ1R5cGU7XHJcbiAgICAgICAgVXBkYXRlV1hIZWFkSWNvbihtc2cudXJsLCB0aGlzLkhlYWQpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tc2dUeXBlID09IDMpeyAgLy/kuKrkurrmtojmga9cclxuICAgICAgICAgICAgLy8gSWQgICAgICBpbnQgICAgYGpzb246XCJpZFwiYFxyXG4gICAgICAgICAgICAvLyBEZWFsICAgIGludCAgICBganNvbjpcImRlYWxcImBcclxuICAgICAgICAgICAgLy8gVHlwZSAgICBpbnQgICAgYGpzb246XCJ0eXBlXCJgXHJcbiAgICAgICAgICAgIC8vIFVybCAgICAgc3RyaW5nIGBqc29uOlwidXJsXCJgXHJcbiAgICAgICAgICAgIC8vIE5hbWUgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYFxyXG4gICAgICAgICAgICAvLyBNc2cgICAgIHN0cmluZyBganNvbjpcIm1zZ1wiYFxyXG4gICAgICAgICAgICAvLyBTZW5kVWlkIHVpbnQzMiBganNvbjpcInNlbmR1aWRcImBcclxuICAgICAgICAgICAgLy8gVGltZSAgICBpbnQgICAgYGpzb246XCJ0aW1lXCJgXHJcblxyXG4gICAgICAgICAgICBpZiAobXNnLnR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dTaXRSZXEobXNnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmKG1zZy50eXBlID09IDMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0TXNnQnV5UHJvcChtc2cpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYobXNnLnR5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dDaGFyZ2UobXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5tc2dUeXBlID09IDIpIHsgLy/kv7HkuZDpg6jmtojmga9cclxuICAgICAgICAgICAgLy8gSWQgICAgIGludCAgICBganNvbjpcImlkXCJgXHJcbiAgICAgICAgICAgIC8vIERlYWwgICBpbnQgICAgYGpzb246XCJkZWFsXCJgXHJcbiAgICAgICAgICAgIC8vIFVybCAgICBzdHJpbmcgYGpzb246XCJ1cmxcImBcclxuICAgICAgICAgICAgLy8gVHlwZSAgIGludCAgICBganNvbjpcInR5cGVcImBcclxuICAgICAgICAgICAgLy8gTmFtZSAgIHN0cmluZyBganNvbjpcIm5hbWVcImBcclxuICAgICAgICAgICAgLy8gTXNnICAgIHN0cmluZyBganNvbjpcIm1zZ1wiYFxyXG4gICAgICAgICAgICAvLyBDbHViSWQgaW50ICAgIGBqc29uOlwiY2x1YmlkXCJgXHJcbiAgICAgICAgICAgIC8vIFRpbWUgICBpbnQgICAgYGpzb246XCJ0aW1lXCJgXHJcblxyXG4gICAgICAgICAgICBpZiAobXNnLnR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dKb2luQ2x1Yihtc2cpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dDbHViT3RoZXJNc2cobXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlRpbWUuc3RyaW5nID0gVXRpbFRvb2wuZ2V0Rm9ybWF0RGF0YShtc2cudGltZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldE1zZ0pvaW5DbHViIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGNjLmxvZyhcInNldE1zZ0pvaW5DbHViIG1zZz1cIiwgbXNnKTtcclxuXHJcbiAgICAgICAgdGhpcy5UaXRsZS5zdHJpbmcgPSBcIueUs+ivt+WKoOWFpVwiO1xyXG4gICAgICAgIGlmIChtc2cuZGVhbCA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5SZXFNc2cuc3RyaW5nID0gXCI8Y29sb3I9IzY0NjQ2ND5cIiArIG1zZy5tc2cubmFtZSArIFwiKFwiICsgbXNnLm1zZy51aWQgKyBcIinnlLPor7fliqDlhaVcIiArXHJcbiAgICAgICAgICAgICAgICBcIuaCqDxjb2xvcj0jMDAwMEZGPlwiICsgbXNnLm5hbWUgKyBcIjwvYz4oXCIgKyBtc2cuY2x1YmlkICsgXCIpPC9jPlwiO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFncmVlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuQnRuUmVmdXNlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZ3JlZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5CdG5SZWZ1c2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmKG1zZy5kZWFsID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuUmVxTXNnLnN0cmluZyA9IFwiPGNvbG9yPSM2NDY0NjQ+5oKoPGNvbG9yPSNGRjAwMDA+5ZCM5oSPPC9jPlwiICsgbXNnLm1zZy5uYW1lICsgXCIoXCIgKyBtc2cubXNnLnVpZCArIFwiKeWKoOWFpVwiICtcclxuICAgICAgICAgICAgICAgICAgICBcIjxjb2xvcj0jMDAwMEZGPlwiICsgbXNnLm5hbWUgKyBcIjwvYz4oXCIgKyBtc2cuY2x1YmlkICsgXCIpPC9jPlwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5SZXFNc2cuc3RyaW5nID0gXCI8Y29sb3I9IzY0NjQ2ND7mgqg8Y29sb3I9I0ZGMDAwMD7mi5Lnu508L2M+XCIgKyBtc2cubXNnLm5hbWUgKyBcIihcIiArIG1zZy5tc2cudWlkICsgXCIp5Yqg5YWlXCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPGNvbG9yPSMwMDAwRkY+XCIgKyBtc2cubmFtZSArIFwiPC9jPihcIiArIG1zZy5jbHViaWQgKyBcIik8L2M+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldE1zZ0NsdWJPdGhlck1zZyA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuVGl0bGUuc3RyaW5nID0gXCLnlLPor7fliqDlhaVcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXRsZS5zdHJpbmcgPSBcIuWIm+W7uuS/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRpdGxlLnN0cmluZyA9IFwi6Kej5pWj5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgIHRoaXMuVGl0bGUuc3RyaW5nID0gXCLljYfnuqfkv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5UaXRsZS5zdHJpbmcgPSBcIuS/ruaUueeuoeeQhuWRmFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRpdGxlLnN0cmluZyA9IFwi5Yig6Zmk5oiQ5ZGYXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuUmVxTXNnLnN0cmluZyAgICA9IFwiPGNvbG9yPSM2NDY0NjQ+XCIgKyBtc2cubXNnLm1zZyArIFwiPC9jPlwiO1xyXG4gICAgICAgIHRoaXMuQnRuQWdyZWUuYWN0aXZlICA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuQnRuUmVmdXNlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0TXNnQ2hhcmdlIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMuVGl0bGUuc3RyaW5nICAgICAgICA9IFwi5YWF5YC85raI5oGvXCI7XHJcbiAgICAgICAgdGhpcy5SZXFNc2cuc3RyaW5nICAgICAgID0gXCI8Y29sb3I9IzY0NjQ2ND5cIiArbXNnLm1zZy5tc2cgKyBcIjwvYz5cIjtcclxuICAgICAgICB0aGlzLkJ0bkFncmVlLmFjdGl2ZSAgICAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJ0blJlZnVzZS5hY3RpdmUgICAgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0TXNnQnV5UHJvcCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLlRpdGxlLnN0cmluZyAgICAgICAgPSBcIumBk+WFt+a2iOaBr1wiO1xyXG4gICAgICAgIHRoaXMuUmVxTXNnLnN0cmluZyAgICAgICA9IFwiPGNvbG9yPSM2NDY0NjQ+XCIgK21zZy5tc2cubXNnICsgXCI8L2M+XCI7XHJcbiAgICAgICAgdGhpcy5CdG5BZ3JlZS5hY3RpdmUgICAgID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5CdG5SZWZ1c2UuYWN0aXZlICAgID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldE1zZ1NpdFJlcSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2coXCJzZXRNc2dTaXRSZXEgbXNnPVwiLCBtc2cpO1xyXG4gICAgICAgIHRoaXMuVGl0bGUuc3RyaW5nID0gXCLniYzlsYDmtojmga9cIjtcclxuICAgICAgICBpZiAobXNnLmRlYWwgPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuUmVxTXNnLnN0cmluZyA9IFwiPGNvbG9yPSM2NDY0NjQ+XCIgKyBtc2cubXNnLm5hbWUgKyBcIihcIiArIG1zZy5tc2cuc2l0dWlkICsgXCIp55Sz6K+35pC65bimPGNvbG9yPSNGRjAwMDA+XCJcclxuICAgICAgICAgICAgICAgICsgbXNnLm1zZy5jb2luKyBcIjwvYz7niZvlj4vluIHov5vlhaXmgqg8Y29sb3I9IzAwMDBGRj5cIiArIG1zZy5tc2cucHJpdmF0ZWlkICsgXCI8L2M+KFwiKyBtc2cubmFtZSArIFwiKeeJjOWxgDwvYz5cIjtcclxuICAgICAgICAgICAgdGhpcy5CdG5BZ3JlZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0blJlZnVzZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobXNnLmRlYWwgPT0gMSkge1xyXG4gICAgICAgICAgICB0aGlzLlJlcU1zZy5zdHJpbmcgPSBcIjxjb2xvcj0jNjQ2NDY0PuaCqDxjb2xvcj0jRkYwMDAwPuWQjOaEjzwvYz5cIittc2cubXNnLm5hbWUrXCIoXCIrbXNnLm1zZy5zaXR1aWQrXCIp55Sz6K+35pC65bimPGNvbG9yPSNGRjAwMDA+XCIrXHJcbiAgICAgICAgICAgICAgICBtc2cubXNnLmNvaW4rIFwiPC9jPueJm+WPi+W4gei/m+WFpeaCqDxjb2xvcj0jMDAwMEZGPlwiICsgbXNnLm1zZy5wcml2YXRlaWQgKyBcIjwvYz4oXCIrIG1zZy5uYW1lICsgXCIp54mM5bGAPC9jPlwiO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFncmVlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0blJlZnVzZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLlJlcU1zZy5zdHJpbmcgPSBcIjxjb2xvcj0jNjQ2NDY0PuaCqDxjb2xvcj0jRkYwMDAwPuaLkue7nTwvYz5cIittc2cubXNnLm5hbWUrXCIoXCIrbXNnLm1zZy5zaXR1aWQrXCIp55Sz6K+35pC65bimPGNvbG9yPSNGRjAwMDA+XCIrXHJcbiAgICAgICAgICAgICAgICBtc2cubXNnLmNvaW4rIFwiPC9jPueJm+WPi+W4gei/m+WFpeaCqDxjb2xvcj0jMDAwMEZGPlwiICsgbXNnLm1zZy5wcml2YXRlaWQgKyBcIjwvYz4oXCIrIG1zZy5uYW1lICsgXCIp54mM5bGAPC9jPlwiO1xyXG4gICAgICAgICAgICB0aGlzLkJ0bkFncmVlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLkJ0blJlZnVzZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxiYWNrQnRuIDogZnVuY3Rpb24oZXZlbnQsQ3VzdG9tRXZlbnREYXRhKVxyXG4gICAge1xyXG4gICAgXHRNdXNpY01nci5wbGF5RWZmZWN0KEF1ZGlvX0NvbW1vbi5BVURJT19CVE5fQ0xJQ0spO1xyXG4gICAgICAgIGNjLmxvZyhcIlNpdFJlcUNlbGwuY2FsbGJhY2tCdG4sQ3VzdG9tRXZlbnREYXRhID0gXCIgKyBDdXN0b21FdmVudERhdGEpO1xyXG4gICAgICAgIHZhciBidG5OYW1lID0gZXZlbnQudGFyZ2V0LmdldE5hbWUoKTtcclxuICAgICAgICBjYy5sb2coXCJTaXRSZXFDZWxsLmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIGlmIChidG5OYW1lID09IFwiQnRuQWdyZWVcIikge1xyXG4gICAgICAgICAgICBpZih0aGlzLm1zZ1R5cGUgPT0gMykgeyAvL+S4quS6uua2iOaBr1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5tc2cudHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kU2l0TWVzc2FnZSgxKTsgLy/lkIzmhI9cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1zZy5kZWFsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1zZ1NpdFJlcSh0aGlzLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLm1zZy50eXBlID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRBZGRDbHViTWVzc2FnZSgxKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1zZy5kZWFsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1zZ0pvaW5DbHViKHRoaXMubXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZihidG5OYW1lID09IFwiQnRuUmVmdXNlXCIpIHtcclxuICAgICAgICAgICAgaWYodGhpcy5tc2dUeXBlID09IDMpIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubXNnLnR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFNpdE1lc3NhZ2UoMik7IC8v5ouS57udXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tc2cuZGVhbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dTaXRSZXEodGhpcy5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5tc2cudHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kQWRkQ2x1Yk1lc3NhZ2UoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tc2cuZGVhbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNc2dKb2luQ2x1Yih0aGlzLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRBZGRDbHViTWVzc2FnZSA6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICBjYy5sb2coXCJTaXRSZXFDZWxsLnNlbmRBZGRDbHViTWVzc2FnZSBDbHViSWQ9XCIsIHRoaXMubXNnLmNsdWJpZCwgXCIgdWlkPVwiLCB0aGlzLm1zZy5tc2cudWlkLCBcIiByZXN1bHQ9XCIsIHJlc3VsdClcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgdWlkICAgICA6IHRoaXMubXNnLm1zZy51aWQsXHJcbiAgICAgICAgICAgIGlzYWxsb3cgOiByZXN1bHQsICAgLy8gMTrlkIzmhI/vvIwyOuaLkue7nVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2MubG9nKFwiQmFzZVNjZW5lLm5vdGlmeU93bmVyQ29uZmlybVNpdC5kYXRhID0gXCIsSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LkNMVUJfUkVRX09XTkVSX0NPTkZJUk1fQ01EX0lEKS5zZW5kKGRhdGEsIHRoaXMubXNnLmNsdWJpZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIFNpdFVpZCAgICAgdWludDMyIGBqc29uOlwic2l0dWlkXCJgICAgICAgLy/nlLPor7flhaXluqfnmoTnjqnlrrZ1aWRcclxuICAgIC8vIE5hbWUgICAgICAgc3RyaW5nIGBqc29uOlwibmFtZVwiYCAgICAgICAgLy/njqnlrrbmmLXnp7BcclxuICAgIC8vIFNlYXRJZCAgICAgaW50ICAgIGBqc29uOlwic2VhdGlkXCJgICAgICAgLy/nlLPor7flhaXluqfnmoTluqfkvY3lj7dcclxuICAgIC8vIENvaW4gICAgICAgaW50ICAgIGBqc29uOlwiY29pblwiYCAgICAgICAgLy/nlLPor7fmkLrluKbph5HluIFcclxuICAgIC8vIEdhbWVTdmNJZCAgdWludDMyIGBqc29uOlwiZ2FtZXN2Y2lkXCJgICAgLy/lnKjlk6rkuIDkuKrmuLjmiI/mnI3liqHlmajnlLPor7dcclxuICAgIC8vIFRhYmxlSWQgICAgaW50MzIgIGBqc29uOlwidGFibGVpZFwiYCAgICAgLy/lnKjlk6rkuIDkuKrmoYzlrZDnlLPor7dcclxuICAgIC8vIFByaXZhdGVJZCAgaW50ICAgIGBqc29uOlwicHJpdmF0ZWlkXCJgICAgLy825L2N5pWw56eB5Lq65qGMaWRcclxuICAgIC8vIENyZWF0ZVRpbWUgaW50NjQgIGBqc29uOlwiY3JlYXRldGltZVwiYCAgLy/liJvlu7rml7bpl7RcclxuICAgIHNlbmRTaXRNZXNzYWdlIDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHZhciBtc2cgPSB0aGlzLm1zZy5tc2c7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGdhbWVzdmNpZCA6IG1zZy5nYW1lc3ZjaWQsXHJcbiAgICAgICAgICAgIHRhYmxlaWQgICA6IG1zZy50YWJsZWlkLFxyXG4gICAgICAgICAgICBwbGF5ZXJ1aWQgOiBtc2cuc2l0dWlkLFxyXG4gICAgICAgICAgICBwcml2YXRlaWQgOiBtc2cucHJpdmF0ZWlkLFxyXG4gICAgICAgICAgICByZXN1bHQgICAgOiByZXN1bHQsICAgLy8gMTrlkIzmhI/vvIwyOuaLkue7nVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2MubG9nKFwic2VuZFNpdE1lc3NhZ2UuU2l0UmVxQ2VsbCBkYXRhPVwiLCBkYXRhKTtcclxuICAgICAgICBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVxKHdpbmRvdy5VU19SRVFfT1dORVJfQ09ORklSTV9DTURfSUQpLnNlbmQoZGF0YSk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc2hyaW1wIG9uIDE3LzIvMTkuXHJcbiAqL1xyXG4vL3NvY2tldCDlm57lpI3mtojmga8g5oiQ5Yqf5qCH5b+XXHJcblxyXG53aW5kb3cuU29ja2V0U2VxID0gMDtcclxuXHJcbndpbmRvdy5Tb2NrZXRSZXRDb2RlID0gY2MuRW51bSh7XHJcbiAgICBSRVRfUkVQRUFUX1JFR0lTVEVSICAgICAgICAgOiAtMTAwMCwgLy/mnI3liqHlmajph43lpI3ms6jlhowo5pyN5Yqh5Zmo5YaF6YOo5raI5oGvKVxyXG4gICAgUkVUX05PVF9DQUxMX0JBTktFUiAgICAgICAgIDogLTE5LCAgIC8v6Z2e5oqi5bqE54q25oCBXHJcbiAgICBSRVRfVVNFUl9PRkZMSU5FICAgICAgICAgICAgOiAtMTgsICAgLy/njqnlrrbnprvnur9cclxuICAgIFJFVF9OT1RfQ0xJQ0tfQUdBSU4gICAgICAgICA6IC0xNywgICAvL+ivt+WLv+mikee5geeCueWHu1xyXG4gICAgUkVUX1NFQVRfSEFWRV9QTEFZRVIgICAgICAgIDogLTE2LCAgIC8v5oKo6YCJ5oup55qE5bqn5L2N5bey57uP6KKr5Y2g6aKGLOivt+S7juaWsOmAieaLqVxyXG4gICAgUkVUX1NFQVRfTk9UX0VYSVNUICAgICAgICAgIDogLTE1LCAgIC8v5oKo6YCJ5oup55qE5bqn5L2N5LiN5a2Y5ZyoXHJcbiAgICBSRVRfUExBWUVSX0FDVElWRSAgICAgICAgICAgOiAtMTQsICAgLy/mgqjmraPlnKjmuLjmiI/kuK0s5LiN6IO956a75byAXHJcbiAgICBSRVRfUExBWUVSX0hBVkVfTEVBVkUgICAgICAgOiAtMTMsICAgLy/mgqjlt7Lnu4/nprvlvIBcclxuICAgIFJFVF9QQVJBTV9FUlJPUiAgICAgICAgICAgICA6IC0xMiwgICAvL+WPguaVsOmUmeivr1xyXG4gICAgUkVUX0RFU1RST1lFRF9QUklWQVRFX1RCQUxFIDogLTExLCAgIC8v54mM5bGA5bey6ZSA5q+BXHJcbiAgICBSRVRfVEFCTEVfRlVMTCAgICAgICAgICAgICAgOiAtMTAsICAgLy/np4HkurrmiL/niIbmu6FcclxuICAgIFJFVF9HQU1FX1BMQVlFUl9GVUxMICAgICAgICA6IC05LCAgICAvL+ahjOWtkOmHjOmdoueahOeOqeWutuW3sua7oVxyXG4gICAgUkVUX0dBTUVfVEFCTEVfRlVMTCAgICAgICAgIDogLTgsICAgIC8v5ri45oiP5pyN5Yqh5Zmo5qGM5a2Q54iG5ruhXHJcbiAgICBSRVRfREJfRVJST1IgICAgICAgICAgICAgICAgOiAtNywgICAgLy/mlbDmja7lupPplJnor69cclxuICAgIFJFVF9OT1RfRklORF9UQUJMRSAgICAgICAgICA6IC02LCAgICAvL+ahjOWtkOS4jeWtmOWcqFxyXG4gICAgUkVUX05PVF9GSU5EX0dBTUVfU0VSVkVSICAgIDogLTUsICAgIC8v5pyq5om+5Yiw5Yy56YWN5pyN5Yqh5ZmoXHJcbiAgICBSRVRfU0VSVkVSX0FCTk9STUFMICAgICAgICAgOiAtNCwgICAgLy/mnI3liqHlvILluLhcclxuICAgIFJFVF9VU0VSX1JFUEVBVF9MT0dJTiAgICAgICA6IC0zLCAgICAvL+aCqOeahOi0puWPt+W3sue7j+WcqOWFtuS7luWcsOeCueeZu+W9lVxyXG4gICAgUkVUX1VTRVJLRVlfRVJST1IgICAgICAgICAgIDogLTIsICAgIC8v55So5oi36aqM6K+B5aSx6LSlLOivt+mHjeaWsOeZu+W9lVxyXG4gICAgUkVUX0lMTEVHQUxfUkVRICAgICAgICAgICAgIDogLTEsICAgIC8v6Z2e5rOV6K+35rGCKOWmgjrlpoLmnpzlpLTpg6h1aWQs5LiN5piv6Ieq5bex55qEc29ja2V06ZO+5o6l55qEdWlk5bCx55u05o6l6L+U5ZueLOWPjea8j+a0nilcclxuICAgIFJFVF9TVUNDRVNTICAgICAgICAgICAgICAgICA6IDAsICAgIC8v5oiQ5YqfXHJcbiAgICBSRVRfQkFDS19HQU1FX1RBQkxFICAgICAgICAgOiAxLCAgICAgLy/mgqjlt7Lnu4/lnKjmuLjmiI/kuK1cclxuICAgIFJFVF9HT0xEX0xBQ0sgICAgICAgICAgICAgICA6IDIsICAgICAvL+aCqOmHkeW4geS4jei2s1xyXG4gICAgUkVUX0RJQU1PTkRfTEFDSyAgICAgICAgICAgIDogMywgICAgIC8v5oKo6ZK755+z5LiN6LazXHJcbiAgICBSRVRfQ09JTl9MQUNLICAgICAgICAgICAgICAgOiA0LCAgICAgLy/mgqjmkLrluKbph5HluIHkuI3otrNcclxuICAgIFJFVF9DT0lOX0dSRUFURVJfR09MRCAgICAgICA6IDUsICAgICAvL+aQuuW4pumHkeW4geWkp+S6jui6q+S4iumHkeW4gVxyXG4gICAgUkVUX1JFSkVDVF9TSVRfRE9XTiAgICAgICAgIDogNiwgICAgIC8v5oKo55qE6K+35rGC6KKr5ouS57udXHJcbn0pO1xyXG5cclxud2luZG93LlNvY2tldFJldERlc2MgPSBjYy5FbnVtKHtcclxuICAgIFJFVF9SRUpFQ1RfU0lUX0RPV046ICAgICAgICAgXCLmgqjnmoTor7fmsYLooqvmi5Lnu51cIixcclxuICAgIFJFVF9DT0lOX0dSRUFURVJfR09MRDogICAgICAgXCLmkLrluKbph5HluIHlpKfkuo7ouqvkuIrph5HluIFcIixcclxuICAgIFJFVF9DT0lOX0xBQ0s6ICAgICAgICAgICAgICAgXCLmgqjluKblhaXnmoTph5HluIHkuI3otrMs6K+35LuO5paw6YCJ5oup5bim5YWl6YeR5biBXCIsXHJcbiAgICBSRVRfRElBTU9ORF9MQUNLOiAgICAgICAgICAgIFwi5oKo6ZK755+z5LiN6LazXCIsXHJcbiAgICBSRVRfR09MRF9MQUNLOiAgICAgICAgICAgICAgIFwi5oKo6YeR5biB5LiN6LazXCIsXHJcbiAgICBSRVRfQkFDS19HQU1FX1RBQkxFOiAgICAgICAgIFwi5oKo5bey57uP5Zyo5ri45oiP5LitXCIsXHJcbiAgICBSRVRfU1VDQ0VTUzogICAgICAgICAgICAgICAgIFwi5omn6KGM5oiQ5YqfXCIsXHJcbiAgICBSRVRfSUxMRUdBTF9SRVE6ICAgICAgICAgICAgIFwi6Z2e5rOV6K+35rGCXCIsXHJcbiAgICBSRVRfVVNFUktFWV9FUlJPUjogICAgICAgICAgIFwi55So5oi36aqM6K+B5aSx6LSlLOivt+mHjeaWsOeZu+W9lVwiLFxyXG4gICAgUkVUX1VTRVJfUkVQRUFUX0xPR0lOOiAgICAgICBcIuaCqOeahOi0puWPt+W3sue7j+WcqOWFtuS7luWcsOeCueeZu+W9lVwiLFxyXG4gICAgUkVUX1NFUlZFUl9BQk5PUk1BTDogICAgICAgICBcIuacjeWKoeW8guW4uFwiLFxyXG4gICAgUkVUX05PVF9GSU5EX0dBTUVfU0VSVkVSOiAgICBcIuacquaJvuWIsOWMuemFjeeahOa4uOaIj+acjeWKoeWZqFwiLFxyXG4gICAgUkVUX05PVF9GSU5EX1RBQkxFOiAgICAgICAgICBcIuahjOWtkOS4jeWtmOWcqFwiLFxyXG4gICAgUkVUX0RCX0VSUk9SOiAgICAgICAgICAgICAgICBcIuaVsOaNruW6k+mUmeivr1wiLFxyXG4gICAgUkVUX0dBTUVfVEFCTEVfRlVMTDogICAgICAgICBcIua4uOaIj+acjeWKoeWZqOeIhua7oSzor7fnqI3lkI7lho3or5VcIixcclxuICAgIFJFVF9HQU1FX1BMQVlFUl9GVUxMOiAgICAgICAgXCLmoYzlrZDph4zpnaLnmoTnjqnlrrblt7Lmu6FcIixcclxuICAgIFJFVF9UQUJMRV9GVUxMOiAgICAgICAgICAgICAgXCLmiL/pl7Tlt7Lmu6Es6K+36YCJ5oup5YW25LuW5oi/6Ze0XCIsXHJcbiAgICBSRVRfREVTVFJPWUVEX1BSSVZBVEVfVEJBTEU6IFwi54mM5bGA5bey6ZSA5q+BXCIsXHJcbiAgICBSRVRfUEFSQU1fRVJST1IgIDogICAgICAgICAgIFwi5Y+C5pWw6ZSZ6K+vXCIsXHJcbiAgICBSRVRfUExBWUVSX0FDVElWRTogICAgICAgICAgIFwi5oKo5q2j5Zyo5ri45oiP5LitLOS4jeiDveemu+W8gFwiLFxyXG4gICAgUkVUX1BMQVlFUl9IQVZFX0xFQVZFOiAgICAgICBcIuaCqOW3sue7j+emu+W8gFwiLFxyXG4gICAgUkVUX1NFQVRfTk9UX0VYSVNUOiAgICAgICAgICBcIuaCqOmAieaLqeeahOW6p+S9jeS4jeWtmOWcqFwiLFxyXG4gICAgUkVUX05PVF9DTElDS19BR0FJTjogICAgICAgICBcIuivt+WLv+mikee5geeCueWHu1wiLFxyXG4gICAgUkVUX1NFQVRfSEFWRV9QTEFZRVI6ICAgICAgICBcIuaCqOmAieaLqeeahOW6p+S9jeW3sue7j+iiq+WNoOmihizor7fku47mlrDpgInmi6lcIixcclxuICAgIFJFVF9OT1RfQ0FMTF9CQU5LRVI6ICAgICAgICAgXCLpnZ7miqLluoTnirbmgIFcIixcclxuICAgIFJFVF9VU0VSX09GRkxJTkU6ICAgICAgICAgICAgXCLnjqnlrrbnprvnur9cIixcclxuICAgIFJFVF9SRVBFQVRfUkVHSVNURVI6ICAgICAgICAgXCLmnI3liqHlmajph43lpI3ms6jlhoxcIixcclxufSk7XHJcblxyXG53aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFID0gMTgsXHJcblxyXG4vL3NvY2tldOa2iOaBr1xyXG53aW5kb3cuU29ja2V0TWVzc2FnZSAgICAgID0gICBcIlNvY2tldE1lc3NhZ2VcIjtcclxuXHJcbi8qKlxyXG4gKiDlvJXmk47nirbmgIHmtojmga9cclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbndpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFID0gIFwiU2VuZE1lc3NhZ2VcIjtcclxuXHJcbi8vc29ja2V05raI5oGv57G75Z6LXHJcbndpbmRvdy5NZXNzYWdlVHlwZSA9IGNjLkVudW0oe1xyXG4gICAgU09DS0VUX01FU1NBR0UgICAgICA6ICAgXCJzb2NrZXRfbWVzc2FnZVwiLCAvL3NvY2tldCDlm57ljIVcclxuICAgIFNPQ0tFVF9DT05ORUNUSU5HICAgOiAgIFwic29ja2V0X2Nvbm5lY3RpbmdcIiwvL3NvY2tldOW8gOWni+mHjei/nlxyXG4gICAgLy9TT0NLRVRUX1NFTkRNRVNTQUdFICA6ICAgXCJTZW5kTWVzc2FnZVwiLFxyXG4gICAgTVNHX05FVFdPUktfRkFJTFVSRSA6ICAgXCJzb2NrZXRfbmV0d29ya19mYWlsdXJlXCIsXHJcbiAgICBTT0NLRVRfRElTQ09OTkVDVEVEIDogICBcInNvY2tldF9kaXNjb25uZWN0ZWRcIixcclxuICAgIFNPQ0tFVF9DT05ORUNURUQgICAgOiAgIFwic29ja2V0X2Nvbm5lY3RlZFwiLFxyXG4gICAgU0VORE1TR19USU1FT1VUICAgICA6ICAgXCJzZW5kbXNnX3RpbWVvdXRcIixcclxuICAgIFNFTkRNU0dfQ0xPU0VTRVJWRVIgOiAgIFwic2VuZG1zZ19jbG9zZXNlcnZlclwiLFxyXG4gICAgU0NFTkVfTVNHICAgICAgICAgICA6ICAgXCJTY2VuZV9Nc2dcIiwgIC8v5LiN5ZCM55WM6Z2i6Ze055qE5raI5oGv5Lyg6YCSXHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiDlvJXmk47nirbmgIHmtojmga9cclxuICogQHR5cGUge3N0cmluZ31cclxuICovXHJcbndpbmRvdy5HYW1lRW5naW5lSW5mbyA9ICBcIkdhbWVFbmdpbmVJbmZvXCI7XHJcbndpbmRvdy5HYW1lSW5mbyA9IHtcclxuXHJcbiAgICBHYW1lSGlkZSA6ICAgICAgICAgICAgICBcIkdhbWVIaWRlXCIsLy/muLjmiI/mmoLlgZxcclxuICAgIEdhbWVTaG93IDogICAgICAgICAgICAgIFwiR2FtZVNob3dcIiwvL+a4uOaIj+WUpOmGklxyXG4gICAgTmV0T25saW5lIDogICAgICAgICAgICAgXCJOZXRPbmxpbmVcIiwvL+e9kee7nOi/nuaOpVxyXG4gICAgTmV0T2ZmbGluZSA6ICAgICAgICAgICAgXCJOZXRPZmZsaW5lXCIsLy/nvZHot6/mlq3lvIBcclxuXHJcbn0gO1xyXG5cclxuXHJcbndpbmRvdy5IRUFSVF9CRUFUX1RJTUUgPSAzMDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBzaHJpbXAgb24gMTcvMi8xOS5cclxuICovXHJcblxyXG52YXIgbV9FbmNyeXB0TWFwPVxyXG4gICAgW1xyXG4gICAgICAgIDB4NTEsMHhBMSwweDlFLDB4RDcsMHgxRSwweDgzLDB4MUMsMHgyRCwweEU5LDB4NzcsMHgzRCwweDEzLDB4OTMsMHgxMCwweDQ1LDB4RkYsXHJcbiAgICAgICAgMHg2RCwweEM5LDB4MjAsMHgyRiwweDFCLDB4ODIsMHgxQSwweDdELDB4RjUsMHhDRiwweDUyLDB4QTgsMHhEMiwweEE0LDB4QjQsMHgwQixcclxuICAgICAgICAweDMxLDB4OTcsMHg1NywweDE5LDB4MzQsMHhERiwweDVCLDB4NDEsMHg1OCwweDQ5LDB4QUEsMHg1RiwweDBBLDB4RUYsMHg4OCwweDAxLFxyXG4gICAgICAgIDB4REMsMHg5NSwweEQ0LDB4QUYsMHg3QiwweEUzLDB4MTEsMHg4RSwweDlELDB4MTYsMHg2MSwweDhDLDB4ODQsMHgzQywweDFGLDB4NUFcclxuICAgIF07XHJcblxyXG5mdW5jdGlvbiBnZXR1dGY4Ynl0ZWNvdW50KGJ5dGV2YWwpXHJcbntcclxuICAgIHZhciBiQ291bnQgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDc7IGkgPj0gMDsgLS1pKVxyXG4gICAge1xyXG4gICAgICAgIGlmIChieXRldmFsICYgKDEgPDwgaSkpIHtcclxuICAgICAgICAgICAgYkNvdW50Kys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJDb3VudDtcclxufVxyXG5cclxuZnVuY3Rpb24gdXRmOHRvdW5pY29kZShjb2RlKVxyXG57XHJcbiAgICBpZiAoY29kZSA8PSAweDdmKSB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSlcclxuICAgIH1cclxuICAgIHZhciBiU3RhcnQgPSBmYWxzZTtcclxuICAgIHZhciBiQ291bnQgPSAwO1xyXG4gICAgdmFyIGJGaW5pc2ggPSBmYWxzZTtcclxuICAgIHZhciBuZXdDb2RlID0gMDtcclxuICAgIHZhciBiRmxhZyA9IGNvZGUgJiAweGZmO1xyXG4gICAgYkNvdW50ID0gZ2V0dXRmOGJ5dGVjb3VudChiRmxhZyk7XHJcbiAgICB2YXIgbmV3Q29kZSA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJDb3VudDsgKytpKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IGNvZGUgJiAoMHhmZiA8PCAoaSAqIDgpKVxyXG5cclxuICAgICAgICB2YWwgPSB2YWwgPj4+IChpICogOClcclxuICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDw9IGJDb3VudDsgKyt0KSB7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWwgJiAofigxIDw8ICg4IC0gdCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbCA9IHZhbCAmIDB4M2Y7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0NvZGUgKz0gdmFsIDw8ICg2ICogKGJDb3VudCAtIGkgLSAxKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuZXdDb2RlKVxyXG59XHJcblxyXG5mdW5jdGlvbiB1bmljb2RldG91dGY4KGNvZGUpXHJcbntcclxuICAgIGlmIChjb2RlIDw9IDB4N2YpIHsgLy8g5LiN6ZyA6KaB6L2s5o2iXHJcbiAgICAgICAgcmV0dXJuIHtjb2RlOmNvZGUsIGJ5dGVsZW46MX07O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBiQ291bnQgPSAwOyAvLyDkuozov5vliLbkvY3mlbDph49cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzI7ICsraSkge1xyXG4gICAgICAgIGlmIChjb2RlICYgKDEgPDwgaSkpIHtcclxuICAgICAgICAgICAgYkNvdW50ID0gaSArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIGJCeXRlID0gMDtcclxuICAgIC8vIHV0ZjjnvJbnoIHljaDnlKjnmoTlrZfoioLmlbBcclxuICAgIGJCeXRlID0gTWF0aC5jZWlsKGJDb3VudCAvIDYpO1xyXG5cclxuICAgIC8vIOiuoeeul+aYr+WQpuimgei/m+S9jVxyXG4gICAgdmFyIGJUbXAgPSBiQ291bnQgJSA2O1xyXG4gICAgYlRtcCA9IChiVG1wID09IDApID8gNiA6IGJUbXA7XHJcblxyXG4gICAgaWYgKGJUbXAgPiAoNyAtIGJCeXRlKSkge1xyXG4gICAgICAgIGJCeXRlKys7XHJcbiAgICB9XHJcbiAgICAvLyDloavlhYXnvJbnoIFcclxuICAgIHZhciB1dGY4Q29kZSA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJCeXRlIC0gMTsgKytpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBiVmFsdWUgPSAoY29kZSA+Pj4gKGkgKiA2KSkgJiAweDNmOyAvLyDmnIDkvY7kvY3mlL7liLDmnIDpq5jkvY1cclxuICAgICAgICBiVmFsdWUgPSAoMSA8PCA3KSArIGJWYWx1ZTtcclxuXHJcbiAgICAgICAgdXRmOENvZGUgKz0gYlZhbHVlIDw8ICgoYkJ5dGUgLSBpIC0gMSkgKiA4KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDloavlhYXmnIDlkI7liankvZnnmoTnvJbnoIFcclxuICAgIHZhciBiVmFsdWUgPSBjb2RlID4+PiAoKGJCeXRlIC0gMSkgKiA2KTtcclxuXHJcbiAgICAvLyDloavlhYXmoIfor4bnrKZcclxuICAgIHZhciBiRmxhZyA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJCeXRlOyArK2kpIHtcclxuICAgICAgICBiRmxhZyArPSAxIDw8ICg3IC0gaSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXRmOENvZGUgKz0gYkZsYWcgKyBiVmFsdWU7XHJcblxyXG4gICAgcmV0dXJuIHtjb2RlOnV0ZjhDb2RlLCBieXRlbGVuOmJCeXRlfTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXRmYnl0ZXMyc3RyaW5nKGJ5dGVzKVxyXG57XHJcbiAgICBpZiAoYnl0ZXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIHZhciByZXRTdHJpbmcgPSBcIlwiO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IClcclxuICAgIHtcclxuICAgICAgICBpZiAoYnl0ZXNbaV0gPD0gMHg3Zikge1xyXG4gICAgICAgICAgICByZXRTdHJpbmcgKz0gdXRmOHRvdW5pY29kZShieXRlc1tpXSk7XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBiQ291bnQgPSBnZXR1dGY4Ynl0ZWNvdW50KGJ5dGVzW2ldKTtcclxuICAgICAgICB2YXIgdXRmOGNvZGUgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgYkNvdW50OyArK3QpIHtcclxuICAgICAgICAgICAgdXRmOGNvZGUgKz0gYnl0ZXNbaSArIHRdIDw8ICh0ICogOClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0U3RyaW5nICs9IHV0Zjh0b3VuaWNvZGUodXRmOGNvZGUpO1xyXG4gICAgICAgIGkgKz0gYkNvdW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldFN0cmluZztcclxufVxyXG5cclxuU3RyaW5nLnByb3RvdHlwZS50b1V0ZjggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdHJMZW4gPSB0aGlzLmxlbmd0aDtcclxuICAgIHZhciBhbGxCeXRlcyA9IFtdO1xyXG4gICAgdmFyIGFsbExlbiA9IDA7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ckxlbjsgKytpKSB7XHJcbiAgICAgICAgdmFyIHVuaWNvZGUgPSB0aGlzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHVuaWNvZGV0b3V0ZjgodW5pY29kZSk7XHJcbiAgICAgICAgYWxsTGVuICs9IHJlc3VsdC5ieXRlbGVuO1xyXG4gICAgICAgIGFsbEJ5dGVzLnB1c2gocmVzdWx0KTtcclxuICAgIH1cclxuICAgIHJldHVybiB7Y29kZXM6IGFsbEJ5dGVzLCBieXRlbGVuczogYWxsTGVufTtcclxufTtcclxuXHJcblxyXG4vL2h0bO+8jOWkp+Wwj+erryAgb2Zmc2V0IOaMh+WumuS9jee9rlxyXG5mdW5jdGlvbiBpdGVtKHR5cGUsIGxlbiwgdmFsdWUsaHRsLG9mZnNldClcclxue1xyXG4gICAgdmFyIG9iaiA9IG5ldyBPYmplY3QoKTtcclxuICAgIG9iai50eXBlID0gdHlwZTtcclxuICAgIG9iai5sZW4gPSBsZW47XHJcbiAgICBvYmoudmFsdWUgPSB2YWx1ZTtcclxuICAgIHZhciBiQmlnID0gIGh0bCA9PT0gdW5kZWZpbmVkPyB0cnVlOmh0bDtcclxuICAgIG9iai5odGwgPSBiQmlnO1xyXG4gICAgb2JqLm9mZnNldCA9IG9mZnNldDtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBTb2NrZXREYXRhKGFycmF5YnVmZmVyKVxyXG57XHJcbiAgICB0aGlzLm9mZnNldCA9IDA7XHJcbiAgICB0aGlzLndyaXRlTWFwID0gW107XHJcblxyXG4gICAgdGhpcy5tX25CdWZQb3MgPSB3aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFO1xyXG4gICAgdGhpcy5tX25QYWNrZXRTaXplID0gd2luZG93LlBBQ0tFVF9IRUFERVJfU0laRTtcclxuXHJcbiAgICB0aGlzLmFEYXRhQXJyYXkgPSBudWxsIDtcclxuICAgIGlmIChhcnJheWJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuYURhdGFBcnJheSA9IG5ldyBEYXRhVmlldyhhcnJheWJ1ZmZlcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0t5YyF5aS054m55q6KXHJcblxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5fd3JpdGVIZWFkZXJCeXRlID0gZnVuY3Rpb24odmFsdWUsb2Zmc2V0KSB7XHJcbiAgICB0aGlzLndyaXRlTWFwLnB1c2goaXRlbShcImhlYWRieXRlXCIsIDEsIHZhbHVlLHRydWUsb2Zmc2V0KSk7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLl9yZWFkSGVhZGVyQnl0ZSA9IGZ1bmN0aW9uKG9mZnNldCkge1xyXG4gICAgdmFyIHZhbHVlID0gIHRoaXMuYURhdGFBcnJheS5nZXRVaW50OChvZmZzZXQsdHJ1ZSlcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuX3dyaXRlSGVhZGVyU2hvcnQgPSBmdW5jdGlvbih2YWx1ZSxvZmZzZXQpIHtcclxuICAgIHRoaXMud3JpdGVNYXAucHVzaChpdGVtKFwiaGVhZHNob3J0XCIsIDIsIHZhbHVlLGZhbHNlLG9mZnNldCkpO1xyXG59XHJcblxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5fcmVhZEhlYWRlclNob3J0ID0gZnVuY3Rpb24ob2Zmc2V0KSB7XHJcbiAgICB2YXIgdmFsdWUgPSAgdGhpcy5hRGF0YUFycmF5LmdldEludDE2KG9mZnNldCxmYWxzZSlcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuX3dyaXRlSGVhZGVySW50ID0gZnVuY3Rpb24odmFsdWUsb2Zmc2V0KSB7XHJcbiAgICB0aGlzLndyaXRlTWFwLnB1c2goaXRlbShcImhlYWRpbnRcIiwgNCwgdmFsdWUsZmFsc2Usb2Zmc2V0KSk7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLl9yZWFkSGVhZGVySW50ID0gZnVuY3Rpb24ob2Zmc2V0KSB7XHJcbiAgICB2YXIgdmFsdWUgPSAgdGhpcy5hRGF0YUFycmF5LmdldEludDMyKG9mZnNldCxmYWxzZSlcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWJ5dGUtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLldyaXRlQnl0ZSA9IGZ1bmN0aW9uKHZhbHVlLGJCaWcpIHtcclxuICAgIHRoaXMud3JpdGVNYXAucHVzaChpdGVtKFwiaW50OFwiLCAxLCB2YWx1ZSxiQmlnKSk7XHJcbn1cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuUmVhZEJ5dGUgPSBmdW5jdGlvbihiQmlnKSB7XHJcbiAgICBpZih0aGlzLmNoZWNrUmVhZE91dCgxKSl7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHVuZGVmaW5lZD8gdHJ1ZTpiQmlnO1xyXG4gICAgdmFyIHZhbHVlID0gdGhpcy5hRGF0YUFycmF5LmdldFVpbnQ4KHRoaXMub2Zmc2V0LCBodGwpXHJcbiAgICB0aGlzLm9mZnNldCArPSAxXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1zaG9ydC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuV3JpdGVTaG9ydCA9IGZ1bmN0aW9uKHZhbHVlLGJCaWcpIHtcclxuICAgIHZhciBodGwgPSAgYkJpZyA9PT0gdW5kZWZpbmVkPyBmYWxzZTpiQmlnO1xyXG4gICAgdGhpcy53cml0ZU1hcC5wdXNoKGl0ZW0oXCJpbnQxNlwiLCAyLCB2YWx1ZSxodGwpKTtcclxufVxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5SZWFkU2hvcnQgPSBmdW5jdGlvbihiQmlnKSB7XHJcbiAgICBpZih0aGlzLmNoZWNrUmVhZE91dCgyKSl7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHVuZGVmaW5lZD8gZmFsc2U6aHRsO1xyXG4gICAgdmFyIHZhbHVlID0gdGhpcy5hRGF0YUFycmF5LmdldEludDE2KHRoaXMub2Zmc2V0LCBodGwpXHJcbiAgICB0aGlzLm9mZnNldCArPSAyXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1pbnQtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLldyaXRlSW50ID0gZnVuY3Rpb24odmFsdWUsYkJpZykge1xyXG4gICAgdmFyIGh0bCA9ICBiQmlnID09PSB1bmRlZmluZWQ/IGZhbHNlOmJCaWc7XHJcbiAgICB0aGlzLndyaXRlTWFwLnB1c2goaXRlbShcImludDMyXCIsIDQsIHZhbHVlLGh0bCkpO1xyXG59XHJcblNvY2tldERhdGEucHJvdG90eXBlLlJlYWRJbnQgPSBmdW5jdGlvbihiQmlnKSB7XHJcbiAgICBpZih0aGlzLmNoZWNrUmVhZE91dCg0KSl7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHVuZGVmaW5lZD8gZmFsc2U6YkJpZztcclxuICAgIHZhciB2YWx1ZSA9IHRoaXMuYURhdGFBcnJheS5nZXRJbnQzMih0aGlzLm9mZnNldCwgaHRsKVxyXG4gICAgdGhpcy5vZmZzZXQgKz0gNFxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWludDY0LS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblNvY2tldERhdGEucHJvdG90eXBlLldyaXRlSW50NjQgPSBmdW5jdGlvbih2YWx1ZSxiQmlnKSB7XHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHVuZGVmaW5lZD8gZmFsc2U6YkJpZztcclxuICAgIHRoaXMud3JpdGVNYXAucHVzaChpdGVtKFwiaW50NjRcIiwgOCwgdmFsdWUsaHRsKSk7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLlJlYWRJbnQ2NCA9IGZ1bmN0aW9uKGJCaWcpIHtcclxuICAgIGlmKHRoaXMuY2hlY2tSZWFkT3V0KDgpKXtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogYkJpZztcclxuICAgIHZhciBsb3cgPSB0aGlzLmFEYXRhQXJyYXkuZ2V0VWludDMyKHRoaXMub2Zmc2V0LCBodGwpXHJcbiAgICB0aGlzLm9mZnNldCArPSA0XHJcbiAgICB2YXIgaGlndCA9IHRoaXMuYURhdGFBcnJheS5nZXRVaW50MzIodGhpcy5vZmZzZXQsIGh0bClcclxuICAgIHRoaXMub2Zmc2V0ICs9IDRcclxuICAgIHZhciBsb25nVmFsID0gbmV3IExvbmcoaGlndCxsb3csIGZhbHNlKTtcclxuICAgIHJldHVybiBsb25nVmFsLnRvTnVtYmVyKCk7XHJcbn1cclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1zdHJpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLldyaXRlU3RyaW5nID0gZnVuY3Rpb24odmFsdWUsYkJpZykge1xyXG4gICAgdmFyIGh0bCA9ICBiQmlnID09PSB1bmRlZmluZWQ/IGZhbHNlOmJCaWc7XHJcbiAgICB2YXIgcmVzdWx0ID0gdmFsdWUudG9VdGY4KCk7XHJcbiAgICB0aGlzLndyaXRlTWFwLnB1c2goaXRlbShcInN0cmluZ1wiLCByZXN1bHQuYnl0ZWxlbnMgKyA0ICsgMSwgcmVzdWx0LGh0bCkpOyAvLyArNCDmmK/lm6DkuLrlrZfnrKbkuLLliY3pnaLopoHlhpnlhaXkuIDkuKrplb/luqZcclxufVxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5SZWFkU3RyaW5nID0gZnVuY3Rpb24oYkJpZykge1xyXG5cclxuICAgIGlmKHRoaXMuY2hlY2tSZWFkT3V0KDQpKXtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaHRsID0gIGJCaWcgPT09IHRydWU/IGZhbHNlOmJCaWc7XHJcbiAgICB2YXIgbGVuID0gdGhpcy5hRGF0YUFycmF5LmdldEludDMyKHRoaXMub2Zmc2V0KTtcclxuICAgIHRoaXMub2Zmc2V0ICs9IDQ7XHJcbiAgICB2YXIgYnl0ZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGIgPSB0aGlzLlJlYWRCeXRlKCk7XHJcbiAgICAgICAgLy8gdmFyIGIgPSB0aGlzLmFEYXRhQXJyYXkuZ2V0VWludDgodGhpcy5vZmZzZXQpO1xyXG4gICAgICAgIGJ5dGVzLnB1c2goYik7XHJcbiAgICAgICAgLy8gdGhpcy5vZmZzZXQgKz0gMTtcclxuICAgIH1cclxuICAgIHJldHVybiB1dGZieXRlczJzdHJpbmcoYnl0ZXMpO1xyXG59XHJcblxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuZ2V0QWxsTGVuZ3RoID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYWxsTGVuID13aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLndyaXRlTWFwLmxlbmd0aDsgKytpKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHRoaXMud3JpdGVNYXBbaV0udHlwZS5pbmRleE9mKFwiaGVhZFwiKSA9PSAtMSl7XHJcbiAgICAgICAgICAgIGFsbExlbiArPSB0aGlzLndyaXRlTWFwW2ldLmxlblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWxsTGVuO1xyXG59XHJcblxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuY2hlY2tSZWFkT3V0ID0gZnVuY3Rpb24gKGxlbmd0aCkge1xyXG4gICAgaWYoKHRoaXMub2Zmc2V0ICtsZW5ndGgpID4gIHRoaXMuYURhdGFBcnJheS5ieXRlTGVuZ3RoICl7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2UgO1xyXG59XHJcblxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuX2dldGJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBhbGxMZW4gPSB0aGlzLmdldEFsbExlbmd0aCgpO1xyXG5cclxuICAgIHZhciBhcnJheWJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihhbGxMZW4pO1xyXG5cclxuICAgIHRoaXMuYURhdGFBcnJheSA9IG5ldyBEYXRhVmlldyhhcnJheWJ1ZmZlcik7XHJcblxyXG4gICAgdmFyIG9mZnNldCA9IHdpbmRvdy5QQUNLRVRfSEVBREVSX1NJWkU7O1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy53cml0ZU1hcC5sZW5ndGg7ICsraSlcclxuICAgIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLndyaXRlTWFwW2ldLnZhbHVlIDtcclxuICAgICAgICB2YXIgaHRsID0gdGhpcy53cml0ZU1hcFtpXS5odGxcclxuICAgICAgICBzd2l0Y2ggKHRoaXMud3JpdGVNYXBbaV0udHlwZSlcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiaGVhZGJ5dGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRVaW50OCh0aGlzLndyaXRlTWFwW2ldLm9mZnNldCwgdmFsdWUsaHRsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrIDtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJoZWFkc2hvcnRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRJbnQxNih0aGlzLndyaXRlTWFwW2ldLm9mZnNldCwgdmFsdWUsaHRsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrIDtcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJoZWFkaW50XCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFEYXRhQXJyYXkuc2V0SW50MzIodGhpcy53cml0ZU1hcFtpXS5vZmZzZXQsIHZhbHVlLGh0bCk7XHJcbiAgICAgICAgICAgICAgICBicmVhayA7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiaW50OFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hRGF0YUFycmF5LnNldFVpbnQ4KG9mZnNldCwgdmFsdWUsaHRsKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIFwiaW50MTZcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRJbnQxNihvZmZzZXQsIHZhbHVlLGh0bCk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSBcImludDMyXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFEYXRhQXJyYXkuc2V0SW50MzIob2Zmc2V0LCB2YWx1ZSxodGwpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcclxuICAgICAgICAgICAgICAgIC8vIOWGmeWFpemVv+W6plxyXG4gICAgICAgICAgICAgICAgdGhpcy5hRGF0YUFycmF5LnNldEludDMyKG9mZnNldCwgdGhpcy53cml0ZU1hcFtpXS52YWx1ZS5ieXRlbGVucysxLGh0bCk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDlhpnlhaXlrZfoioLmlbDmja5cclxuICAgICAgICAgICAgICAgIHZhciBjb2RlcyA9IHRoaXMud3JpdGVNYXBbaV0udmFsdWUuY29kZXM7Zm9yICh2YXIgbiA9IDA7IG4gPCBjb2Rlcy5sZW5ndGg7ICsrbilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBjb2Rlc1tuXS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGNvZGVzW25dLmJ5dGVsZW47XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IGxlbjsgKyt0KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gKGNvZGUgPj4gKHQgKiA4KSkgJiAweGZmO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRVaW50OChvZmZzZXQsIGIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRVaW50OChvZmZzZXQsIDApO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgXCJpbnQ2NFwiOlxyXG4gICAgICAgICAgICAgICAgdmFyIGxhbmdWYWx1ZSA9IExvbmcuZnJvbVZhbHVlKHRoaXMud3JpdGVNYXBbaV0udmFsdWUsaHRsKTtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlcyA9IGxhbmdWYWx1ZS50b0J5dGVzQkUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGJ5dGVzLmxlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYURhdGFBcnJheS5zZXRVaW50OChvZmZzZXQgKyBqLCBieXRlc1tqXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLm1fblBhY2tldFNpemUgPSBvZmZzZXQ7XHJcbiAgICByZXR1cm4gYXJyYXlidWZmZXI7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLnNldE9mZnNldCA9IGZ1bmN0aW9uKG9mZnNldCl7XHJcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldCA7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLiBfcmVzZXQgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5vZmZzZXQgPSAwO1xyXG4gICAgdGhpcy53cml0ZU1hcCA9IFtdO1xyXG4gICAgdGhpcy5tX25CdWZQb3MgPSB3aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFO1xyXG4gICAgdGhpcy5tX25QYWNrZXRTaXplID0gd2luZG93LlBBQ0tFVF9IRUFERVJfU0laRTtcclxuICAgIHRoaXMubV9pc0NoZWNrQ29kZSA9IGZhbHNlO1xyXG59XHJcblxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuQmVnaW4gPWZ1bmN0aW9uKCBuQ29tbWFuZCwgIHVpZCAsICBjVmVyc2lvbiApe1xyXG4gICAgdGhpcy5fYmVnaW4obkNvbW1hbmQsIHVpZCwgY1ZlcnNpb24pO1xyXG4gICAgdGhpcy5tX2lzQ2hlY2tDb2RlID0gZmFsc2U7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLl9iZWdpbiA9IGZ1bmN0aW9uICggbkNvbW1hbmQsICB1aWQsICBjVmVyc2lvbil7XHJcbiAgICB0aGlzLl9yZXNldCgpO1xyXG4gICAgdmFyIGNtZCA9IG5Db21tYW5kO1xyXG4gICAgdmFyIHVpZCA9IHVpZDtcclxuICAgIHZhciBzb3VyY2UgPSB3aW5kb3cuU09VUkNFX1RZUEU7XHJcblxyXG4gICAgdGhpcy5fd3JpdGVIZWFkZXJCeXRlKGNWZXJzaW9uLDQpOyAvLyDniYjmnKzlj7dcclxuICAgIHRoaXMuX3dyaXRlSGVhZGVyU2hvcnQoY21kLDUpOyAvLyDlkb3ku6TnoIFcclxuICAgIHRoaXMuX3dyaXRlSGVhZGVyQnl0ZShzb3VyY2UsMTEpOyAvLyDmtojmga/mnaXmupBcclxuXHJcbiAgICB2YXIgdHlwZSA9IHdpbmRvdy5HQU1FX0lEO1xyXG4gICAgdGhpcy4gX3dyaXRlSGVhZGVyQnl0ZSh0eXBlLDEyKTtcclxuICAgIHRoaXMuIF93cml0ZUhlYWRlckludCh1aWQsMTMpO1xyXG59O1xyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuU2V0T3B0VHlwZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICB0aGlzLl93cml0ZUhlYWRlckJ5dGUodmFsdWUsIDEyKTtcclxufTtcclxuXHJcblxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5FbmQgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5tX2lzQ2hlY2tDb2RlID0gZmFsc2U7XHJcbiAgICB0aGlzLl9lbmQoKTtcclxufVxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuX2VuZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbkJvZHkgPSB0aGlzLmdldEFsbExlbmd0aCgpIC0gNCA7XHQvL+aVsOaNruWMhemVv+W6puWMheaLrOWRveS7pOWktOWSjGJvZHksNOS4quWtl+iKguaYr+aVsOaNruWMhemVv+W6plxyXG4gICAgdmFyIGxlbiA9IG5Cb2R5O1xyXG4gICAgdGhpcy5fd3JpdGVIZWFkZXJJbnQobGVuLDApO1x0Ly8g5YyF5q2j5paH6ZW/5bqmXHJcbiAgICB2YXIgY29kZSA9IDA7XHJcbiAgICB0aGlzLl93cml0ZUhlYWRlckJ5dGUoY29kZSwgMTcpO1x0Ly/mlYjpqoznoIFcclxufTtcclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLklzV3JpdGVDaGVja0NvZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMubV9pc0NoZWNrQ29kZTtcclxufTtcclxuXHJcblxyXG5cclxuLyrmlbTkuKrljIXnmoTplb/luqYqL1xyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS4gR2V0Qm9keUxlbmd0aCA9IGZ1bmN0aW9uICgpXHJcbntcclxuICAgIHZhciBuTGVuO1xyXG4gICAgbkxlbiA9ICB0aGlzLl9yZWFkSGVhZGVySW50KCAwKTtcclxuICAgIHJldHVybiBuTGVuO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5FbmNyeXB0QnVmZmVyID0gZnVuY3Rpb24oKXtcclxuICAgIGlmKHRoaXMuSXNXcml0ZUNoZWNrQ29kZSgpKVxyXG4gICAgICAgIHJldHVybiA7XHJcblxyXG4gICAgdGhpcy5fZ2V0YnVmZmVyKCk7XHJcblxyXG4gICAgdmFyIHdEYXRhU2l6ZSA9IHRoaXMuR2V0Qm9keUxlbmd0aCgpIC0gd2luZG93LlBBQ0tFVF9IRUFERVJfU0laRSArIDQ7XHJcbiAgICB2YXIgRW5Db2RlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5NQVhfRU5DUllQVF9NQVApKVxyXG4gICAgRW5Db2RlID0gMCA7XHJcbiAgICB2YXIgRW5Db2RlTnVtID0gbV9FbmNyeXB0TWFwW0VuQ29kZV07XHJcbiAgICB2YXIgQ2hlY2tDb2RlPTA7XHJcblxyXG4gICAgZm9yICggdmFyIGkgPSAwIDsgaSA8IHdEYXRhU2l6ZSA7IGkrKyApXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmFEYXRhQXJyYXkuZ2V0VWludDgod2luZG93LlBBQ0tFVF9IRUFERVJfU0laRSAraSx0cnVlKTtcclxuICAgICAgICBDaGVja0NvZGUgKz0gZGF0YTtcclxuICAgICAgICBDaGVja0NvZGUgJj0gMHhmZjtcclxuICAgICAgICBkYXRhIF49IEVuQ29kZU51bTtcclxuICAgICAgICBkYXRhICY9IDB4ZmY7XHJcbiAgICAgICAgdGhpcy5hRGF0YUFycmF5LnNldFVpbnQ4KHdpbmRvdy5QQUNLRVRfSEVBREVSX1NJWkUgK2ksIGRhdGEsdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5TZXRFbkNvZGUoRW5Db2RlKTtcclxuICAgIHRoaXMuV3JpdGVDaGVja0NvZGUoKH5DaGVja0NvZGUrMSkgJiAweGZmKTtcclxuXHJcbiAgICByZXR1cm4gIHRoaXMuYURhdGFBcnJheS5idWZmZXI7XHJcbn1cclxuXHJcblxyXG5Tb2NrZXREYXRhLnByb3RvdHlwZS5DcmV2YXNzZUJ1ZmZlciA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHdEYXRhU2l6ZSA9IHRoaXMuR2V0Qm9keUxlbmd0aCgpLSB3aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFICs0O1xyXG4gICAgdmFyIEVuQ29kZSA9IHRoaXMuR2V0RW5Db2RlKCk7XHJcbiAgICBpZihFbkNvZGUgPj0gd2luZG93Lk1BWF9FTkNSWVBUX01BUClcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gLTEgO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBFbkNvZGVOdW0gPSBtX0VuY3J5cHRNYXBbRW5Db2RlXTtcclxuICAgIHZhciBDaGVja0NvZGUgPSB0aGlzLkdldENoZWNrQ29kZSgpO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDAgOyBpIDwgd0RhdGFTaXplOyBpKysgKXtcclxuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuYURhdGFBcnJheS5nZXRVaW50OCh3aW5kb3cuUEFDS0VUX0hFQURFUl9TSVpFICtpLHRydWUpO1xyXG4gICAgICAgIGRhdGEgJj0gMHhmZjtcclxuICAgICAgICBkYXRhIF49IEVuQ29kZU51bTtcclxuXHJcbiAgICAgICAgQ2hlY2tDb2RlICY9IDB4ZmY7XHJcbiAgICAgICAgQ2hlY2tDb2RlICs9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5hRGF0YUFycmF5LnNldFVpbnQ4KHdpbmRvdy5QQUNLRVRfSEVBREVSX1NJWkUgK2ksIGRhdGEsdHJ1ZSk7XHJcblxyXG4gICAgfVxyXG4gICAgaWYoKENoZWNrQ29kZSAmIDB4ZmYpIT0wKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gd0RhdGFTaXplO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5Tb2NrZXREYXRhLiBwcm90b3R5cGUuU2V0RW5Db2RlID0gZnVuY3Rpb24oaSlcclxue1xyXG4gICAgLy8gdGhpcy5fd3JpdGVIZWFkZXJCeXRlKGksIDgpO1xyXG4gICAgdGhpcy5hRGF0YUFycmF5LnNldFVpbnQ4KDgsIGksdHJ1ZSk7XHJcbn1cclxuXHJcblNvY2tldERhdGEucHJvdG90eXBlLkdldEVuQ29kZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZW5jb2RlID0gdGhpcy5fcmVhZEhlYWRlckJ5dGUoOCk7XHJcbiAgICByZXR1cm4gZW5jb2RlIDtcclxufVxyXG5cclxuXHJcblNvY2tldERhdGEuIHByb3RvdHlwZS5Xcml0ZUNoZWNrQ29kZSA9IGZ1bmN0aW9uICggblZhbHVlKVxyXG57XHJcbiAgICAvLyB0aGlzLl93cml0ZUhlYWRlckJ5dGUoblZhbHVlLDE3KTtcclxuICAgIHRoaXMuYURhdGFBcnJheS5zZXRVaW50OCgxNywgblZhbHVlLHRydWUpO1xyXG4gICAgdGhpcy5tX2lzQ2hlY2tDb2RlID0gdHJ1ZTtcclxufVxyXG5cclxuXHJcblNvY2tldERhdGEuIHByb3RvdHlwZS4gR2V0Q2hlY2tDb2RlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgICB2YXIgY29kZSA9IHRoaXMuX3JlYWRIZWFkZXJCeXRlKDE3KTtcclxuICAgIHJldHVybiBjb2RlO1xyXG59XHJcblxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbigpe1xyXG4gICAgdGhpcy5fcmVzZXQoKTtcclxufVxyXG5cclxuU29ja2V0RGF0YS5wcm90b3R5cGUuR2V0Q21kVHlwZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gICAgdmFyIG5DbWRUeXBlID0gdGhpcy5fcmVhZEhlYWRlclNob3J0KDUpO1xyXG4gICAgcmV0dXJuIG5DbWRUeXBlO1xyXG59XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTb2NrZXREYXRhOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzE5LlxyXG4gKi9cclxudmFyIEdhbWVTeXN0ZW0gID0gcmVxdWlyZSgnR2FtZVN5c3RlbScpO1xyXG52YXIgU29ja2V0RGF0YSAgPSByZXF1aXJlKCdTb2NrZXREYXRhJykgO1xyXG52YXIgTWVzc2FnZUZhY3RvcnkgPSByZXF1aXJlKCdNZXNzYWdlRmFjdG9yeScpO1xyXG5cclxuZnVuY3Rpb24gR2FtZVdlYlNvY2tldCgpe1xyXG4gICAgdGhpcy5tX3NvY2tldCA9IG51bGw7XHJcbiAgICB0aGlzLmlzU29ja2V0Q29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnNvY2tldExpc3RlbmVySUQgPSAtMTtcclxuICAgIHRoaXMubmV0Q29ubmVjdGVkID0gdHJ1ZTtcclxuICAgIHRoaXMub25MaXN0ZW5NZXNzYWdlVG9TZW5kKCk7XHJcbiAgICB0aGlzLm9uTmV0Q2hlY2tMaXN0ZW5lcigpO1xyXG59XHJcblxyXG4vL+i/nuaOpXNvY2tldFxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5zdGFydFNvY2tldCA9IGZ1bmN0aW9uKHVybClcclxue1xyXG4gICAgY2MubG9nKFwiU29ja2V0TWFuYWdlci5zdGFydFNvY2tldCx1cmwgPSBcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS53ZWJTb2NrZXRVcmwpO1xyXG4gICAgdGhpcy5pc1NvY2tldENvbm5lY3RlZCA9IGZhbHNlIDtcclxuICAgIHRoaXMuY29ubmVjdFNvY2tldChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkud2ViU29ja2V0VXJsKSA7XHJcbn0sXHJcblxyXG4vL+mHjei/nuacjeWKoeWZqFxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5yZVN0YXJ0U29ja2V0ID0gZnVuY3Rpb24oKXtcclxuICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIucmVTdGFydFNvY2tldCx1cmwgPSBcIiArIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS53ZWJTb2NrZXRVcmwpO1xyXG4gICAgdGhpcy5pc1NvY2tldENvbm5lY3RlZCA9IGZhbHNlIDtcclxuICAgIHRoaXMuY29ubmVjdFNvY2tldChHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkud2ViU29ja2V0VXJsKSA7XHJcbn0sXHJcblxyXG4vL+etieW+heeOqeWutuWPkemAgeaVsOaNrlxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5vbkxpc3Rlbk1lc3NhZ2VUb1NlbmQgPSBmdW5jdGlvbigpe1xyXG4gICAgY2MubG9nKFwiU29ja2V0TWFuYWdlci5vbkxpc3Rlbk1lc3NhZ2VUb1NlbmRcIik7XHJcbiAgICBpZiAodGhpcy5zb2NrZXRMaXN0ZW5lcklEID09IC0xKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuc29ja2V0TGlzdGVuZXJJRCA9IEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICggZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIub25MaXN0ZW5NZXNzYWdlVG9TZW5kIGV2ZW50IGxpc3RlbmVyLlwiKTtcclxuICAgICAgICAgICAgICAgIGlmKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbmRNZXNzYWdlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgdGhpcyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5vbk5ldENoZWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjYy5sb2coXCJTb2NrZXRNYW5hZ2VyLm9uTmV0Q2hlY2tMaXN0ZW5lclwiICk7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXMgO1xyXG5cclxuICAgIEdsb2JhbEV2ZW50TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LkdhbWVFbmdpbmVJbmZvLFxyXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xyXG5cclxuICAgICAgICAgICAgaWYoZXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9IGV2ZW50LnRhZyA7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGFnID09IHdpbmRvdy5HYW1lSW5mby5OZXRPbmxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubmV0Q29ubmVjdGVkID0gdHJ1ZSA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHRhZyA9PSB3aW5kb3cuR2FtZUluZm8uTmV0T2ZmbGluZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXRDb25uZWN0ZWQgPSBmYWxzZSA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSx0aGlzKTtcclxufVxyXG5cclxuXHJcbi8v5bu656uL6ZO+5o6lXHJcbkdhbWVXZWJTb2NrZXQucHJvdG90eXBlLmNvbm5lY3RTb2NrZXQgPSBmdW5jdGlvbih1cmwpe1xyXG4gICAgY2MubG9nKFwiU29ja2V0TWFuYWdlci5jb25uZWN0U29ja2V0LCB1cmwgPSBcIiArIHVybCApO1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5hZXNLZXkgPSBBRVMudXRpbHMudXRmOC50b0J5dGVzKEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS5kZWZhdWx0S2V5KTtcclxuICAgIHRoaXMubV9zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCkgO1xyXG4gICAgdGhpcy5tX3NvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xyXG5cclxuICAgIC8v5bu656uL6ZO+5o6lXHJcbiAgICB0aGlzLm1fc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICBzZWxmLmlzU29ja2V0Q29ubmVjdGVkID0gdHJ1ZSA7XHJcbiAgICAgICAgY2MubG9nKFwiU29ja2V0TWFuYWdlci5jb25uZWN0U29ja2V0LHNvY2tldCBjb25uZWN0ZWRcIik7XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9DT05ORUNURUQsfSkgO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy/lpLHotKUg5pat5byA6ZO+5o6lXHJcbiAgICB0aGlzLm1fc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgc2VsZi5pc1NvY2tldENvbm5lY3RlZCA9IGZhbHNlIDtcclxuICAgICAgICBjYy53YXJuKFwiU29ja2V0TWFuYWdlci5jb25uZWN0U29ja2V0LHNvY2tldCBlcnJvclwiKTtcclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNvY2tldE1lc3NhZ2Use3RhZzp3aW5kb3cuTWVzc2FnZVR5cGUuTVNHX05FVFdPUktfRkFJTFVSRSx9KSA7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvL+mTvuaOpeaWreW8gFxyXG4gICAgdGhpcy5tX3NvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICBzZWxmLmlzU29ja2V0Q29ubmVjdGVkID0gZmFsc2UgO1xyXG4gICAgICAgIGNjLndhcm4oXCJTb2NrZXRNYW5hZ2VyLmNvbm5lY3RTb2NrZXQsc29ja2V0IGRpc2Nvbm5lY3RcIik7XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9ESVNDT05ORUNURUQsfSkgO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLy/mjqXmlLbmnI3liqHlmajliLDmtojmga9cclxuICAgIHRoaXMubV9zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpe1xyXG5cclxuICAgICAgICB2YXIgZGVjU3RyID0gQWVzRGVjb2RlKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIuY29ubmVjdFNvY2tldCAsc29ja2V0IHJlYyBtZXNzYWdlLCBkYXRhID0gXCIsZGVjU3RyKTtcclxuICAgICAgICB2YXIgcGFja2V0ID0gSlNPTi5wYXJzZShkZWNTdHIpO1xyXG5cclxuICAgICAgICB2YXIgY21kID0gcGFja2V0LmNtZDtcclxuXHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBNZXNzYWdlRmFjdG9yeS5jcmVhdGVNZXNzYWdlUmVzcChjbWQpO1xyXG5cclxuICAgICAgICBpZihtZXNzYWdlID09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGNjLndhcm4oXCJTb2NrZXRNYW5hZ2VyLmNvbm5lY3RTb2NrZXQgLCBtZXNzYWdlID0gdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+ino+aekOaVsOaNrlxyXG4gICAgICAgIG1lc3NhZ2Uub25NZXNzYWdlKHBhY2tldCk7XHJcbiAgICAgICAgLy8gLy/pgJrnn6Ug5pyJ5paw5raI5oGv5YiwXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLHt0YWc6d2luZG93Lk1lc3NhZ2VUeXBlLlNPQ0tFVF9NRVNTQUdFLGRhdGE6bWVzc2FnZX0pIDtcclxuICAgIH07XHJcbn07XHJcblxyXG4vL+WFs+mXremTvuaOpVxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oKXtcclxuICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIuY29ubmVjdFNvY2tldCBcIik7XHJcbiAgICAvL+ajgOa1i+aYr+aciei/nuaOpVxyXG4gICAgaWYodGhpcy5tX3NvY2tldCAmJiB0aGlzLmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5uZXRDb25uZWN0ZWQpe1xyXG4gICAgICAgIHRoaXMubV9zb2NrZXQuY2xvc2UoKSA7XHJcbiAgICAgICAgdGhpcy5tX3NvY2tldCA9IG51bGwgO1xyXG4gICAgICAgIHRoaXMuaXNTb2NrZXRDb25uZWN0ZWQgPSBmYWxzZSA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuLy/lj5HpgIHmtojmga9cclxuR2FtZVdlYlNvY2tldC5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbihkYXRhKXtcclxuICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UgXCIpO1xyXG4gICAgaWYoIXRoaXMubmV0Q29ubmVjdGVkKXtcclxuICAgICAgICAvLyBUb2FzdFZpZXcuc2hvdyhcIuivt+ajgOafpee9kee7nFwiKSA7XHJcbiAgICAgICAgY2Mud2FybihcIm9ja2V0TWFuYWdlci5zZW5kTWVzc2FnZSznvZHnu5zlsJrmnKrov57mjqUgc29ja2V05Y+R6YCB5aSx6LSlXCIpO1xyXG4gICAgICAgIHJldHVybiA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIXRoaXMuaXNTb2NrZXRDb25uZWN0ZWQgKXtcclxuICAgICAgICBjYy53YXJuKFwib2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlLHNvY2tldCDlsJrmnKrov57mjqXkuIpcIik7XHJcbiAgICAgICAgLy9Ub2FzdFZpZXcuc2hvdyhcIuacjeWKoeWZqOi/nuaOpeWksei0pVwiKSA7XHJcbiAgICAgICAgcmV0dXJuIDtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLm1fc29ja2V0ID09IG51bGwpe1xyXG4gICAgICAgIGNjLndhcm4oXCJvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2Us5rKh5pyJ5Yib5bu6c29ja2V0XCIpO1xyXG4gICAgICAgIHJldHVybiA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubV9zb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pXHJcbiAgICB7XHJcbiAgICAgICAgY2MubG9nKFwiU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZSxjbWQgPT0gMHgwJXNcIiwgZGF0YS5kYXRhLmNtZC50b1N0cmluZygxNikpO1xyXG4gICAgICAgIHZhciBzdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhLmRhdGEpO1xyXG4gICAgICAgIGNjLmxvZyhcIlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2Usc3RyID0gJXNcIiwgc3RyLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHZhciBlbmMgPSBBZXNFbmNvZGUoc3RyKVxyXG4gICAgICAgICB0aGlzLm1fc29ja2V0LnNlbmQoZW5jKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICAvL1RvYXN0Vmlldy5zaG93KFwi5pyN5Yqh5Zmo6L+e5o6l5aSx6LSlXCIpIDtcclxuICAgICAgICBjYy53YXJuKFwib2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlLHNvY2tldCDnirbmgIHlhbPpl61cIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBBZXNFbmNvZGUoc3RyKSB7XHJcbiAgICB2YXIgdGV4dEJ5dGVzID0gQUVTLnV0aWxzLnV0ZjgudG9CeXRlcyhzdHIpO1xyXG4gICAgdmFyIGFlc09mYiA9IG5ldyBBRVMuTW9kZU9mT3BlcmF0aW9uLm9mYihHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuYWVzS2V5LCBHYW1lU3lzdGVtLmdldEluc3RhbmNlKCkuaXYpO1xyXG4gICAgdmFyIGVuY3J5cHRlZEJ5dGVzID0gYWVzT2ZiLmVuY3J5cHQodGV4dEJ5dGVzKTtcclxuICAgIHJldHVybiBlbmNyeXB0ZWRCeXRlcztcclxufVxyXG5cclxuZnVuY3Rpb24gQWVzRGVjb2RlKGRhdGEpIHtcclxuICAgIC8vIGNjLmxvZyhcIkFlc0RlY29kZSxhZXNLZXkgPSBcIiArIEFycmF5LmZyb20oR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmFlc0tleSkgKyBcIixpdiA9IFwiICsgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLml2KTtcclxuICAgIHZhciBhZXNPZmIgPSBuZXcgQUVTLk1vZGVPZk9wZXJhdGlvbi5vZmIoR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmFlc0tleSwgR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLml2KTtcclxuICAgIC8vIGNjLmxvZyhcIkFlc0RlY29kZSxkYXRhID0gXCIgKyBkYXRhKTtcclxuICAgIC8vIGNjLmxvZyhcIkFlc0RlY29kZSxidWZmZXJMZW5ndGggPSBcIiArIGRhdGEuYnl0ZUxlbmd0aCk7XHJcbiAgICB2YXIgdGV4dCA9IG5ldyBVaW50OEFycmF5KGRhdGEsIDAsIGRhdGEuYnl0ZUxlbmd0aCk7XHJcbiAgICAvLyBjYy5sb2coXCJBZXNEZWNvZGUsdGV4dCA9IFwiICsgdGV4dCk7XHJcbiAgICB2YXIgZGVzYyA9IGFlc09mYi5kZWNyeXB0KHRleHQpO1xyXG4gICAgLy8gY2MubG9nKFwiQWVzRGVjb2RlLGRlc2MgPSBcIiArIGRlc2MpO1xyXG4gICAgdmFyIHN0ciAgPSBBRVMudXRpbHMudXRmOC5mcm9tQnl0ZXMoZGVzYyk7XHJcbiAgICAvLyBjYy5sb2coXCJBZXNEZWNvZGUsc3RyID0gXCIgKyBzdHIpO1xyXG4gICAgcmV0dXJuIHN0cjtcclxufVxyXG5cclxuXHJcbi8v5piv5ZCm6L+e5o6lXHJcbkdhbWVXZWJTb2NrZXQucHJvdG90eXBlLmlzQ29ubmVjdGVkID0gZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiB0aGlzLmlzU29ja2V0Q29ubmVjdGVkIDtcclxufTtcclxuXHJcblxyXG5HYW1lV2ViU29ja2V0LnByb3RvdHlwZS5iYXNlNjRTdHJpbmcgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgcmV0dXJuIEJBU0U2NC5lbmNvZGVyKGRhdGEpO1xyXG59O1xyXG5cclxudmFyIFNvY2tldE1hbmFnZXIgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbnN0YW5jZSA7XHJcbiAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZSgpe1xyXG4gICAgICAgIGlmKGluc3RhbmNlID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBHYW1lV2ViU29ja2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGdldEluc3RhbmNlIDogZ2V0SW5zdGFuY2UsXHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBTb2NrZXRNYW5hZ2VyOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlcSA9IHJlcXVpcmUoXCJNZXNzYWdlUmVxXCIpO1xyXG4vKlxyXG4qIC8v5ri45oiP5byA5YWzXHJcbiBjb25zdCAoXHJcbiBFX1NUT1BfR0FNRSAgPSAwXHJcbiBFX1NUQVJUX0dBTUUgPSAxXHJcbiApXHJcblxyXG4gdHlwZSBVU19SRVFfR0FNRV9TV0lUQ0hfVCBzdHJ1Y3Qge1xyXG4gR2FtZUhlYWRcclxuIElzU3RhcnQgaW50IGBqc29uOlwiaXNzdGFydFwiYCAvLzE6IHN0YXJ0IDA6IHN0b3BcclxuIH1cclxuXHJcbiogKi9cclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKFwiR2FtZVN5c3RlbVwiKTtcclxuXHJcbmZ1bmN0aW9uIFN0YXJ0R2FtZVJlcVBhY2tldCgpIHtcclxuICAgIE1lc3NhZ2VSZXEuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVFfR0FNRV9TV0lUQ0hfQ01EX0lEO1xyXG5cclxuICAgIC8v5YeG5aSH5Y+R6YCB55qE5pWw5o2uXHJcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZGF0YSA9IHtcclxuICAgICAgICAgICAgY21kOiB0aGlzLmNtZCxcclxuICAgICAgICAgICAgc2VxOiB0aGlzLnNlcSxcclxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcclxuICAgICAgICAgICAgZ2FtZXN2Y2lkIDogR2FtZVN5c3RlbS5nZXRJbnN0YW5jZSgpLmdhbWVzdmNpZCxcclxuICAgICAgICAgICAgdGFibGVpZCA6IEdhbWVTeXN0ZW0uZ2V0SW5zdGFuY2UoKS50YWJsZWlkLFxyXG4gICAgICAgICAgICBpc3N0YXJ0IDogbXNnLmlzc3RhcnQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBHbG9iYWxFdmVudE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5lbWl0RXZlbnQod2luZG93LlNPQ0tFVFRfU0VORE1FU1NBR0UsIHRoaXMpO1xyXG4gICAgfTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSAgU3RhcnRHYW1lUmVxUGFja2V0OyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8zLzEuXHJcbiAqL1xyXG52YXIgTWVzc2FnZVJlc3AgPSByZXF1aXJlKFwiTWVzc2FnZVJlc3BcIik7XHJcblxyXG4vKlxyXG4qIHR5cGUgVVNfUkVTUF9HQU1FX1NXSVRDSF9UIHN0cnVjdCB7XHJcbiBKc29uSGVhZFxyXG4gUmVzcEhlYWRcclxuIH1cclxuICovXHJcblxyXG5mdW5jdGlvbiBTdGFydEdhbWVSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCA9IHdpbmRvdy5VU19SRVNQX0dBTUVfU1dJVENIX0NNRF9JRDtcclxuXHJcbiAgICAvL+aOpeaUtueahOaVsOaNrlxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VxICAgICA9IG1zZy5zZXE7XHJcbiAgICAgICAgdGhpcy51aWQgICAgID0gbXNnLnVpZDtcclxuICAgICAgICB0aGlzLmNvZGUgICAgPSBtc2cuY29kZTtcclxuICAgICAgICB0aGlzLmRlc2MgICAgPSBtc2cuZGVzYztcclxuICAgICAgICB0aGlzLmlzc3RhcnQgPSBtc2cuaXNzdGFydDtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFN0YXJ0R2FtZVJlc3BQYWNrZXQ7IiwidmFyIFV0aWxUb29sID0gcmVxdWlyZSgnVXRpbFRvb2wnKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgZGF5TGFiZWwgOiBjYy5MYWJlbCxcclxuICAgICAgICBtb250aExhYmVsIDogY2MuTGFiZWwsXHJcbiAgICAgICAgdGltZUxhYmVsIDogY2MuTGFiZWwsXHJcbiAgICAgICAgUm9vbU5hbWUgOiBjYy5MYWJlbCxcclxuICAgICAgICBVc2VyTmFtZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgIENhcnJ5Q29pbiA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFJvb21UaW1lIDogY2MuTGFiZWwsXHJcbiAgICAgICAgV2luU2NvcmUgOiBjYy5MYWJlbCxcclxuICAgICAgICBIZWFkIDogY2MuU3ByaXRlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubXNnID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0Q2VsbEluZm8gOiBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIHRoaXMubXNnID0gbXNnO1xyXG4gICAgICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBuZXdEYXRlLnNldFRpbWUobXNnLmNyZWF0ZXRpbWUgKiAxMDAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5kYXlMYWJlbC5zdHJpbmcgICA9IG5ld0RhdGUuZ2V0RGF0ZSgpICsgXCLml6VcIjtcclxuICAgICAgICB0aGlzLm1vbnRoTGFiZWwuc3RyaW5nID0gKG5ld0RhdGUuZ2V0TW9udGgoKSArIDEpICsgXCLmnIhcIjtcclxuICAgICAgICB0aGlzLnRpbWVMYWJlbC5zdHJpbmcgID0gVXRpbFRvb2wuZ2V0VGltZURhdGEobmV3RGF0ZS5nZXRIb3VycygpKSArIFwiOlwiICsgVXRpbFRvb2wuZ2V0VGltZURhdGEobmV3RGF0ZS5nZXRNaW51dGVzKCkpXHJcbiAgICAgICAgdGhpcy5Sb29tTmFtZS5zdHJpbmcgICA9IG1zZy5wcml2YXRlaWQgKyBcIiAoXCIgKyBtc2cudGFibGVuYW1lICsgXCIpXCI7XHJcbiAgICAgICAgdGhpcy5Sb29tTmFtZS5mb250U2l6ZSA9IDQwO1xyXG4gICAgICAgIHRoaXMuVXNlck5hbWUuc3RyaW5nID0gbXNnLm93bmVybmFtZTtcclxuICAgICAgICB0aGlzLkNhcnJ5Q29pbi5zdHJpbmcgPSBcIuW4puWFpVwiICsgbXNnLmNhcnJ5Y29pbjtcclxuICAgICAgICBpZihtc2cubGl2ZXRpbWUgPCAxODAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Sb29tVGltZS5zdHJpbmcgPSAobXNnLmxpdmV0aW1lLzYwKSArIFwi5YiG6ZKf5bGAXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuUm9vbVRpbWUuc3RyaW5nID0gKG1zZy5saXZldGltZS8zNjAwKSArIFwi5bCP5pe25bGAXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVwZGF0ZVdYSGVhZEljb24obXNnLmhlYWR1cmwsdGhpcy5IZWFkKTtcclxuICAgICAgICBpZihtc2cud2luY29pbiA+IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLldpblNjb3JlLnN0cmluZyA9IFwiK1wiICsgbXNnLndpbmNvaW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG1zZy53aW5jb2luID09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5zdHJpbmcgPSBtc2cud2luY29pbjtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5ub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNCwgMTYwLCA0MSwgMjU1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5zdHJpbmcgPSBtc2cud2luY29pbjtcclxuICAgICAgICAgICAgdGhpcy5XaW5TY29yZS5ub2RlLmNvbG9yID0gY2MuQ29sb3IuR1JFRU47Ly9cIiMwMEZGMDBcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgY2FsbEJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICB9LFxyXG4gICAgXHJcbn0pO1xyXG4iLCJ2YXIgQmFzZVBvcCA9IHJlcXVpcmUoJ0Jhc2VQb3AnKTtcclxudmFyIE1lc3NhZ2VGYWN0b3J5ID0gcmVxdWlyZSgnTWVzc2FnZUZhY3RvcnknKTtcclxudmFyIE11c2ljTWdyID0gcmVxdWlyZSgnTXVzaWNNZ3InKTtcclxudmFyIEF1ZGlvX0NvbW1vbiA9IHJlcXVpcmUoJ0F1ZGlvX0NvbW1vbicpO1xyXG52YXIgR2FtZVN5c3RlbSA9IHJlcXVpcmUoXCJHYW1lU3lzdGVtXCIpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogQmFzZVBvcCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgU3VjY2Vzc0NlbGwgIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIHNjcm9sbFZpZXcgICA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgUm9vbUluZm9WaWV3IDogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGlzY3JlYXRlIDogMCxcclxuICAgICAgICAgICAgc3RhcnQgOiAwLFxyXG4gICAgICAgICAgICB0b3RhbCA6IDUwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgTWVzc2FnZUZhY3RvcnkuY3JlYXRlTWVzc2FnZVJlcSh3aW5kb3cuVVNfUkVRX1NDT1JFX0xJU1RfQ01EX0lEKS5zZW5kKGRhdGEpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKioqKioqTmV0d29yayoqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIG9uTWVzc2FnZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmxvZyhcIlN1Y2Nlc3NWaWV3Lm9uTWVzc2FnZVwiKTtcclxuICAgICAgICAvL3RoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB2YXIgbXNnID0gZXZlbnQuZGF0YTtcclxuICAgICAgICB2YXIgY21kID0gbXNnLmNtZDtcclxuICAgICAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICAgICAgICBjYXNlIFVTX1JFU1BfU0NPUkVfTElTVF9DTURfSUQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2NvcmVMaXN0TXNnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIG9uU2NvcmVMaXN0TXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKG1zZy5jb2RlID09IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgY2VsbEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgbXNnLmxpc3QgIT0gbnVsbCAmJiBpbmRleCA8IG1zZy5saXN0Lmxlbmd0aDsgaW5kZXgrKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIFN1Y2Nlc3NDZWxsID0gY2MuaW5zdGFudGlhdGUodGhpcy5TdWNjZXNzQ2VsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZChTdWNjZXNzQ2VsbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2VsbEhlaWdodCA9IFN1Y2Nlc3NDZWxsLmdldENvbnRlbnRTaXplKCkuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIFN1Y2Nlc3NDZWxsLnNldFBvc2l0aW9uKGNjLnAoMCwwIC0gU3VjY2Vzc0NlbGwuZ2V0Q29udGVudFNpemUoKS5oZWlnaHQqKGluZGV4ICsgMC41KSkpO1xyXG4gICAgICAgICAgICAgICAgU3VjY2Vzc0NlbGwuZ2V0Q29tcG9uZW50KFwiU3VjY2Vzc0NlbGxcIikuc2V0Q2VsbEluZm8obXNnLmxpc3RbaW5kZXhdKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBTdWNjZXNzQ2VsbC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZVN1Y2Nlc3NDZWxsVmlldyhldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KFwiU3VjY2Vzc0NlbGxcIikubXNnKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBjaGlsZENvdW50ID0gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuZ2V0Q2hpbGRyZW5Db3VudCgpICsgMTtcclxuICAgICAgICAgICAgaWYgKGNlbGxIZWlnaHQgKiBjaGlsZENvdW50ID4gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQgPSBjZWxsSGVpZ2h0ICogY2hpbGRDb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgY3JlYXRlU3VjY2Vzc0NlbGxWaWV3IDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHZhciBSb29tSW5mb1ZpZXcgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLlJvb21JbmZvVmlldyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZChSb29tSW5mb1ZpZXcpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIFJvb21JbmZvVmlldy5zZXRQb3NpdGlvbihjYy5wKHdpblNpemUud2lkdGgvMix3aW5TaXplLmhlaWdodC8yKSk7XHJcbiAgICAgICAgUm9vbUluZm9WaWV3LmdldENvbXBvbmVudCgnUm9vbUluZm9WaWV3Jykuc2VuZEdldFN1Y2Nlc3NEZXRhaWwobXNnKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIFxyXG4gICAgY2FsbGJhY2tCdG4gOiBmdW5jdGlvbihldmVudCxDdXN0b21FdmVudERhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGNjLmxvZyhcIlN1Y2Nlc3NWaWV3LmNhbGxiYWNrQnRuLGJ0bk5hbWUgPSBcIiArIGJ0bk5hbWUpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2MuZGlyZWN0b3IuZ2V0V2luU2l6ZSgpO1xyXG4gICAgICAgIE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgaWYoYnRuTmFtZSA9PSBcIkJ0bkNsb3NlXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsYmFja1RvZ2dsZSA6IGZ1bmN0aW9uICh0b2dnbGUsQ3VzdG9tRXZlbnREYXRhKSB7XHJcbiAgICBcdE11c2ljTWdyLnBsYXlFZmZlY3QoQXVkaW9fQ29tbW9uLkFVRElPX0JUTl9DTElDSyk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4odHJ1ZSk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGlzY3JlYXRlIDogTnVtYmVyKEN1c3RvbUV2ZW50RGF0YSksXHJcbiAgICAgICAgICAgIHN0YXJ0IDogMCxcclxuICAgICAgICAgICAgdG90YWwgOiAyMCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIE1lc3NhZ2VGYWN0b3J5LmNyZWF0ZU1lc3NhZ2VSZXEod2luZG93LlVTX1JFUV9TQ09SRV9MSVNUX0NNRF9JRCkuc2VuZChkYXRhKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iLCJcclxuXHJcbnZhciBUdmlldyA9IGNjLkNsYXNzKCB7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRpcFRleHQgOiBudWxsICxcclxuICAgICAgICB2aWV3Tm9kZTogbnVsbCAsXHJcbiAgICB9LFxyXG5cclxuICAgIHNob3cgOiBmdW5jdGlvbih0aXBzLCBkZWxheVRpbWUpe1xyXG5cclxuICAgICAgICBpZih0aXBzID09IFwiXCIpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyA7XHJcblxyXG4gICAgICAgIHdpbmRvdy5sb2FkUHJlZmFicyhcInByZWZhYnMvdG9hc3RWaWV3XCIsIGZ1bmN0aW9uIChuZXdOb2RlKSB7XHJcbiAgICAgICAgICAgIHNlbGYudXBkYXRlVmlldyhuZXdOb2RlLCB0aXBzLCBkZWxheVRpbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVWaWV3IDogZnVuY3Rpb24obmV3Tm9kZSx0aXBzLGRlbGF5VGltZSl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzIDtcclxuICAgICAgICBpZihkZWxheVRpbWUgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGRlbGF5VGltZSA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmlld05vZGUgPSBuZXdOb2RlO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy50aXBUZXh0ID0gY2MuZmluZChcInR4dFwiLG5ld05vZGUpLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgdmFyIGJnID0gY2MuZmluZChcImJnXCIsbmV3Tm9kZSk7XHJcbiAgICAgICAgdmFyIGxhYmxlVGV4dCA9IGNjLmZpbmQoXCJ0eHRcIixuZXdOb2RlKTtcclxuICAgICAgICB0aGlzLnRpcFRleHQuc3RyaW5nID0gdGlwcyA7XHJcblxyXG5cclxuICAgICAgICB2YXIgd2lkdGggPSBsYWJsZVRleHQud2lkdGgrNDAgPCBiZy53aWR0aCA/IGJnLndpZHRoIDogbGFibGVUZXh0LndpZHRoKzQwO1xyXG5cclxuICAgICAgICB2YXIgaGVpZ2h0ID0gbGFibGVUZXh0LmhlaWdodCszMCA8IGJnLmhlaWdodCA/IGJnLmhlaWdodCA6IGxhYmxlVGV4dC5oZWlnaHQrMzA7XHJcblxyXG4gICAgICAgIC8vIG5ld05vZGUuc2NhbGVYID0gd2lkdGgvYmcud2lkdGg7XHJcbiAgICAgICAgLy8gbmV3Tm9kZS5zY2FsZVkgPSBoZWlnaHQvYmcuaGVpZ2h0O1xyXG4gICAgICAgIGJnLnNldENvbnRlbnRTaXplKHdpZHRoLGhlaWdodCk7XHJcbiAgICAgICAgLy8gYmcud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAvLyBiZy5oZWlnaHQgPSBoZWlnaHQgO1xyXG5cclxuICAgICAgICB2YXIgZmFkZUluID0gY2MuZmFkZUluKDAuNSk7XHJcbiAgICAgICAgdmFyIGRlbGF5ID0gY2MuZGVsYXlUaW1lKGRlbGF5VGltZSk7XHJcbiAgICAgICAgdmFyIGZhZGVPdXQgPSBjYy5mYWRlT3V0KDAuNSk7XHJcblxyXG4gICAgICAgIHZhciBhY3Rpb25hbGwgPSBjYy5zZXF1ZW5jZShmYWRlSW4sZGVsYXksZmFkZU91dCxjYy5jYWxsRnVuYyh0aGlzLmRpc21pc3MsIHRoaXMpKTtcclxuICAgICAgICB0aGlzLnZpZXdOb2RlLnJ1bkFjdGlvbihhY3Rpb25hbGwpO1xyXG5cclxuICAgICAgICB3aW5kb3cuc2NhbGVUbyhuZXdOb2RlKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldFRpcHMgOiBmdW5jdGlvbih0aXBzKXtcclxuICAgICAgICBpZih0aGlzLnRpcFRleHQgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy50aXBUZXh0LnN0cmluZyA9IHRpcHMgO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgZGlzbWlzcyA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYodGhpcy52aWV3Tm9kZSAhPSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy52aWV3Tm9kZS5yZW1vdmVGcm9tUGFyZW50KHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdOb2RlID0gbnVsbCA7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHJlbW92ZUZyb21QYXJlbnQgOiBmdW5jdGlvbiAoZmxhZykge1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgfVxyXG5cclxufSk7XHJcblxyXG52YXIgVG9hc3RWaWV3ID0ge1xyXG5cclxuICAgIHNob3cgOmZ1bmN0aW9uICh0aXBzLCBkZWxheVRpbWUpIHtcclxuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVHZpZXcoKTtcclxuICAgICAgICB0aGlzLnZpZXcuc2hvdyh0aXBzLGRlbGF5VGltZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldztcclxuICAgIH0sXHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUb2FzdFZpZXc7XHJcblxyXG5cclxuXHJcblxyXG4iLCJcclxudmFyIEdhbWVTeXN0ZW0gPSByZXF1aXJlKCdHYW1lU3lzdGVtJyk7XHJcblxyXG5cclxuLy/lhoXlrrnnvKnmlL5cclxud2luZG93LnNjYWxlVG8gPSBmdW5jdGlvbiggbm9kZSwgZmxhZyl7XHJcbiAgICBub2RlLnNldFNjYWxlKDAuNik7XHJcbiAgICB2YXIgc2NhbGVUMCA9ICBudWxsO1xyXG5cclxuICAgIHNjYWxlVDAgPSAgY2Muc2NhbGVUbygwLjIsMS4wKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSkgO1xyXG4gICAgLy8gaWYoZmxhZyB8fCAxKXtcclxuICAgIC8vICAgICBzY2FsZVQwID0gIGNjLnNjYWxlVG8oMC4yLDEuMCkuZWFzaW5nKGNjLmVhc2VCYWNrT3V0KCkpIDtcclxuICAgIC8vIH1lbHNle1xyXG4gICAgLy8gICAgIHNjYWxlVDAgPSAgY2Muc2NhbGVUbygwLjIsMC44KS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSkgO1xyXG4gICAgLy8gfVxyXG4gICAgbm9kZS5ydW5BY3Rpb24oc2NhbGVUMCk7XHJcbn07XHJcblxyXG53aW5kb3cubW92ZVZpZXdJbiA9IGZ1bmN0aW9uKCBub2RlLCBmbGFnKXtcclxuXHJcbiAgICBub2RlLnNldFBvc2l0aW9uKGNjLnAoMCwgLTU0MCkpO1xyXG5cclxuICAgIHZhciBtb3ZldG8gPSAgY2MubW92ZVRvKDAuMixjYy5wKDAsMCkpOy8vLmVhc2luZyhjYy5lYXNlQmFja091dCgpKSA7XHJcblxyXG4gICAgbm9kZS5ydW5BY3Rpb24obW92ZXRvKTtcclxufTtcclxuXHJcblxyXG4vL+WKoOi9veacrOWcsOmihOWItuS9k1xyXG52YXIgcHJlZmFic01hcHMgPSBuZXcgTWFwKCk7XHJcbndpbmRvdy5sb2FkUHJlZmFicyA9IGZ1bmN0aW9uIChyZXNQYXRoLCBjYWxsYmFjaywgcGFyZW50KSB7XHJcbiAgICBwYXJlbnQgPSBwYXJlbnQgPT09IHVuZGVmaW5lZCA/IDEgOiBwYXJlbnQgO1xyXG4gICAgLy/pooTpmLLlkIzkuKroioLngrnph43lpI3liqDovb1cclxuICAgIHZhciBoYXNMb2FkID0gcHJlZmFic01hcHMuY29udGFpbnNLZXkocmVzUGF0aCkgO1xyXG4gICAgLy8gY2Mud2FybihcImhhc0xvYWQgPSAlc1wiICxoYXNMb2FkKSA7XHJcblxyXG4gICAgaWYoaGFzTG9hZCl7XHJcbiAgICAgICAgaWYocHJlZmFic01hcHMuZ2V0KHJlc1BhdGgpLnAgPT0gcGFyZW50KXtcclxuICAgICAgICAgICAgY2MubG9nKFwiJXMs5bey57uP5Yqg6L295LitXCIscmVzUGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByZWZhYnNNYXBzLnNldChyZXNQYXRoLHtwOnBhcmVudH0pIDtcclxuICAgIGNjLmxvYWRlci5sb2FkUmVzKHJlc1BhdGgsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgIHByZWZhYnNNYXBzLmRlbGV0ZShyZXNQYXRoKTtcclxuICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICBjYy5lcnJvcihyZXNQYXRoICtcIiDliqDovb3lpLHotKVcIik7XHJcbiAgICAgICAgICAgIC8vIGNhbGxiYWNrKG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHZpZXcgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgIGlmKHBhcmVudCAhPSAxICl7XHJcbiAgICAgICAgICAgIHBhcmVudC5hZGRDaGlsZCh2aWV3KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5hZGRDaGlsZCh2aWV3KSA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZihjYWxsYmFjayl7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHZpZXcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vL+WKoOi9veacrOWcsOWbvueJh1xyXG53aW5kb3cubG9hZEltZyA9IGZ1bmN0aW9uIChyZXNQYXRoLGNhbGxCYWNrLHNwcnRlVHlwZSkge1xyXG4gICAgdmFyIHR5cGUgPSBzcHJ0ZVR5cGUgPT09IHVuZGVmaW5lZCA/IGNjLlNwcml0ZUZyYW1lIDogc3BydGVUeXBlIDtcclxuXHJcbiAgICBjYy5sb2FkZXIubG9hZFJlcyhyZXNQYXRoLCB0eXBlLGZ1bmN0aW9uIChlcnIsIHNwcml0ZUZyYW1lKSB7XHJcblxyXG4gICAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAgIGNjLmVycm9yKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiK3Jlc1BhdGggK1wiIOi1hOa6kOWKoOi9veWksei0pS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYWxsQmFjayl7XHJcbiAgICAgICAgICAgIGNhbGxCYWNrKHNwcml0ZUZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8v5qOA5rWL5pWw5a2X5ZKM5pWw5a2XXHJcbndpbmRvdy5DaGVja1BlckNoYXIgPSBmdW5jdGlvbihjZWxsKVxyXG57XHJcbiAgICBpZigoY2VsbCA+PTQ4ICYmIGNlbGw8PTU3KSAgICAgIC8vIOaVsOWtl1xyXG4gICAgICAgfHwoY2VsbD49NjQgJiYgY2VsbDw9OTApICAgICAvLyDlpKflhplcclxuICAgICAgIHx8KGNlbGw+PTk3ICYmIGNlbGw8PTEyMilcclxuICAgICAgIHx8Y2VsbD09J18nKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LkMxID0gODU3NDI7XHJcbndpbmRvdy5DMiA9IDc2MzQzO1xyXG53aW5kb3cuS0VZID0gMzk2NTtcclxuXHJcbi8v5qOA5rWL5a+G56CB5piv5ZCm5ZCI5rOVXHJcbndpbmRvdy5DaGVja0FjY1B3ZCA9IGZ1bmN0aW9uKHN0clB3ZCkge1xyXG4gICAgZm9yKHZhciBpID0gMCA7IGk8c3RyUHdkLmxlbmd0aCA7IGkrKylcclxuICAgIHtcclxuICAgICAgICB2YXIgYyA9IHN0clB3ZFtpXS5jaGFyQ29kZUF0KCk7XHJcbiAgICAgICAgaWYoIUNoZWNrUGVyQ2hhcihjKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy/otKblj7fmnKzlnLDlrZjlgqjliqDlr4blrZfnrKbkuLJcclxud2luZG93LkVuY3J5cHQgPSBmdW5jdGlvbihTLCBLZXkpIHtcclxuXHJcbiAgICB2YXIgbmV3U3RyID0gXCJcIjtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBTLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBzdHIgPSBTLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgc3RyID0gc3RyXihLZXk+PjgpO1xyXG4gICAgICAgIHN0ciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RyKTtcclxuXHJcbiAgICAgICAgLy8gS2V5ID0gKHN0ci5jaGFyQ29kZUF0KDApK0tleSkqQzErQzI7XHJcblxyXG4gICAgICAgIG5ld1N0ciA9IG5ld1N0ciArIHN0cjtcclxuICAgIH1cclxuXHJcbiAgICBTID0gbmV3U3RyO1xyXG4gICAgbmV3U3RyID0gXCJcIjtcclxuICAgIGZvcihpID0gMDsgaSA8IFMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGogPSBTLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgc3RyID0gXCIxMlwiO1xyXG4gICAgICAgIHZhciBzdHIxID0gIDY1ICsgTWF0aC5mbG9vcihqLzI2KTtcclxuICAgICAgICB2YXIgc3RyMiA9IDY1ICsgaiUyNjtcclxuICAgICAgICBuZXdTdHIgPSBuZXdTdHIgKyAgU3RyaW5nLmZyb21DaGFyQ29kZShzdHIxKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoc3RyMik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3U3RyO1xyXG5cclxufVxyXG5cclxuLy/or7vlj5bmnKzlnLDlrZjlgqjotKblj7fop6Plr4blrZfnrKbkuLJcclxud2luZG93LkRlY3J5cHQgPSBmdW5jdGlvbihTLCBLZXkpIHtcclxuXHJcbiAgICB2YXIgUmVzdWx0ID0gXCJcIjtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBTLmxlbmd0aC8yOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGogPSAoUy5jaGFyQ29kZUF0KGkqMikgLSA2NSkqMjY7XHJcbiAgICAgICAgaiArPSBTLmNoYXJDb2RlQXQoaSoyICsgMSkgLSA2NTtcclxuICAgICAgICB2YXIgc3RyID0gU3RyaW5nLmZyb21DaGFyQ29kZShqKTtcclxuICAgICAgICBSZXN1bHQgKz0gc3RyO1xyXG4gICAgfVxyXG5cclxuICAgIFMgPSBSZXN1bHQ7XHJcbiAgICB2YXIgbmV3U3RyID0gXCJcIjtcclxuICAgIGZvcihpID0gMDsgaSA8IFMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHN0ciA9IFMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBzdHIgPSBzdHJeKEtleT4+OCk7XHJcbiAgICAgICAgc3RyID0gU3RyaW5nLmZyb21DaGFyQ29kZShzdHIpO1xyXG5cclxuICAgICAgICAvLyBLZXkgPSAoc3RyLmNoYXJDb2RlQXQoMCkrS2V5KSpDMStDMjtcclxuXHJcbiAgICAgICAgbmV3U3RyID0gbmV3U3RyICsgc3RyO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXdTdHI7XHJcblxyXG59XHJcblxyXG4vL+abtOaWsOWktOWDj1xyXG53aW5kb3cuVXBkYXRlSGVhZEljb24gPSBmdW5jdGlvbihzcHJJY29uLHBsYXllcikge1xyXG4gICAgdmFyIHRhZyA9IHBsYXllci5pY29uSUQ7XHJcbiAgICBpZih0YWc9PTApXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGlzTWFuID0gKHBsYXllci5zZXggPT0gMSk7XHJcbiAgICAgICAgdmFyIGljb24gPSBpc01hbiA/IFwiaGFsbC91c2VyQ2VudGVyVmlldy9oZWFkSWNvbi91c2VyX2hlYWRpY29uM1wiIDogXCJoYWxsL3VzZXJDZW50ZXJWaWV3L2hlYWRJY29uL3VzZXJfaGVhZGljb24wXCI7XHJcbiAgICAgICAgd2luZG93LmxvYWRJbWcoaWNvbixmdW5jdGlvbihzcHJpdGVmcmFtZSkge1xyXG4gICAgICAgICAgICBzcHJJY29uLnNwcml0ZUZyYW1lID0gc3ByaXRlZnJhbWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRhZyA+MCAmJiB0YWc8PTYpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGljb24gPSBcImhhbGwvdXNlckNlbnRlclZpZXcvaGVhZEljb24vdXNlcl9oZWFkaWNvbiVkXCI7XHJcbiAgICAgICAgaWNvbiA9IGljb24ucmVwbGFjZSgvJWQvLHRhZy0xKTtcclxuICAgICAgICB3aW5kb3cubG9hZEltZyhpY29uLGZ1bmN0aW9uKHNwcml0ZWZyYW1lKSB7XHJcbiAgICAgICAgICAgIHNwckljb24uc3ByaXRlRnJhbWUgPSBzcHJpdGVmcmFtZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICAvLyDnvZHnu5zkuIvovb1cclxuICAgICAgICAvLyBzdGQ6OnN0cmluZyBoZWFkdGFnID0gU3RyaW5nOjpjcmVhdGVXaXRoRm9ybWF0KFwiaGVhZEljb24lZFwiLHAtPnVpZCktPmdldENTdHJpbmcoKTtcclxuICAgICAgICAvLyBIdHRwTWFuYWdlcjo6Z2V0SW5zdGFuY2UoKS0+c2VuZERvd25Mb2FkSW1hZ2UoaGVhZHRhZyxwLT5oZWFkVXJsKTtcclxuICAgIH1cclxufVxyXG5cclxud2luZG93LlVwZGF0ZVdYSGVhZEljb24gPSBmdW5jdGlvbih1cmwsIG5vZGUpXHJcbntcclxuICAgIGlmKHVybCA9PSBcIlwiIHx8IHVybCA9PSBcIiBcIiApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgY2MubG9hZGVyLmxvYWQodXJsLFxyXG4gICAgICAgIGZ1bmN0aW9uKGVycm9yLHRleHR1cmUpe1xyXG4gICAgICAgICAgICBjYy5sb2coJ1VwZGF0ZVdYSGVhZEljb24sZXJyb3IgPSAnICsgZXJyb3IpO1xyXG4gICAgICAgICAgICBjYy5sb2coJ1VwZGF0ZVdYSGVhZEljb24sdGV4dHVyZSA9ICcgKyB0ZXh0dXJlKTtcclxuICAgICAgICAgICAgdmFyIHNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgICAgICBub2RlLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlrp7kvovlr7nosaHlv4XpobvmjILovb3lnKjohJrmnKzkuIpcclxuICogQHBhcmFtIHBhdGhcclxuICovXHJcbndpbmRvdy5wbGF5QW5pT25jZSA9IGZ1bmN0aW9uIChwYXRoLHBhcmVudCkge1xyXG4gICAgdmFyIHZpZXcgPSBjYy5pbnN0YW50aWF0ZShwYXRoKTtcclxuICAgIGlmKHBhcmVudCl7XHJcbiAgICAgICAgcGFyZW50LmFkZENoaWxkKHZpZXcpO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQodmlldykgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZpZXc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5blrZfnrKbkuLLplb/luqZcclxuICogQHBhcmFtIHBhdGhcclxuICovXHJcbndpbmRvdy5nZXREaXNwbGF5U3RyaW5nTGVudGggPSBmdW5jdGlvbihzdHJOaWNrTmFtZSlcclxue1xyXG4gICAgaWYoKHN0ck5pY2tOYW1lID09IHVuZGVmaW5lZCkgfHwgKHN0ck5pY2tOYW1lID09IFwiXCIpKVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIFxyXG4gICAgdmFyICB1blNpemUgPSAwO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7aSA8IHN0ck5pY2tOYW1lLmxlbmd0aDspXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHN0ck5pY2tOYW1lW2ldIDwgMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGkgKz0gMztcclxuICAgICAgICAgICAgdW5TaXplICs9IDIgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpICs9IDE7XHJcbiAgICAgICAgICAgICsrdW5TaXplO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1blNpemU7XHJcbn1cclxuXHJcblxyXG53aW5kb3cuYXNzZXJ0ID0gZnVuY3Rpb24gKGZsYWcpIHtcclxuICAgIGlmKCFmbGFnKXtcclxuICAgICAgICBjYy5lcnJvcihcIiEhISEhISEhISEhISEhIGFzc2VydCBlcnJvcu+8ge+8ge+8ge+8ge+8ge+8ge+8ge+8ge+8ge+8ge+8gVwiKSA7XHJcbiAgICB9XHJcbn1cclxuXHJcbndpbmRvdy5GaW5kTm9kZSA9IGZ1bmN0aW9uIChub2RlLHBhdGgpXHJcbntcclxuICAgIHJldHVybiBjYy5maW5kKHBhdGgsbm9kZSk7XHJcbn1cclxuXHJcblxyXG53aW5kb3cuc3BsaXRTdHJpbmcgPSBmdW5jdGlvbiAobXNnLGZvbnRTaXplLG1heFdpZHRoKSB7XHJcbiAgICBsZXQgYXJyYXlTdHJpbmcgPSBbXTtcclxuICAgIGxldCBzdHJpbmdMZW5ndGggPSBtc2cubGVuZ3RoO1xyXG4gICAgbGV0IGFycmF5Q291bnQgPSAwIDtcclxuICAgIGxldCBlbmRJbmRleCA9IDAgO1xyXG4gICAgbGV0IHN0YXJ0SW5kZXggPTA7XHJcbiAgICBsZXQgY3VyU3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICAvLyBsZXQgYXJyYXlJbmRleCA9IDAgO1xyXG4gICAgZm9yKGxldCBpPTA7IGk8c3RyaW5nTGVuZ3RoOyBpKyspe1xyXG5cclxuICAgICAgICBsZXQgY3VyV2lkdGggPSBhcnJheUNvdW50ICogZm9udFNpemU7XHJcblxyXG4gICAgICAgIGlmKChjdXJXaWR0aCArIGZvbnRTaXplKSA+IG1heFdpZHRoKXtcclxuICAgICAgICAgICAgZW5kSW5kZXggPSBpO1xyXG4gICAgICAgICAgICBjdXJTdHJpbmcgPSAgbXNnLnNsaWNlKHN0YXJ0SW5kZXgsZW5kSW5kZXgpO1xyXG4gICAgICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXg7XHJcbiAgICAgICAgICAgIGFycmF5Q291bnQgPSAwO1xyXG4gICAgICAgICAgICBhcnJheVN0cmluZy5wdXNoKGN1clN0cmluZyk7XHJcbiAgICAgICAgfWVsc2UgaWYoIGkgPT0gc3RyaW5nTGVuZ3RoLTEpe1xyXG4gICAgICAgICAgICBlbmRJbmRleCA9IGkgKyAxO1xyXG4gICAgICAgICAgICBjdXJTdHJpbmcgPSAgbXNnLnNsaWNlKHN0YXJ0SW5kZXgsZW5kSW5kZXgpO1xyXG4gICAgICAgICAgICBhcnJheVN0cmluZy5wdXNoKGN1clN0cmluZyk7XHJcbiAgICAgICAgICAgIGFycmF5Q291bnQgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXJyYXlDb3VudCArKyA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFycmF5U3RyaW5nO1xyXG5cclxufVxyXG5cclxud2luZG93LlJlYWRNb25leSA9IGZ1bmN0aW9uIChudW0pIHtcclxuICAgIGxldCBzdHJOdW0gPSBudW0gK1wiXCI7XHJcbiAgICBsZXQgYXJyU3RyID0gW107XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgZm9yKGxldCBpPXN0ck51bS5sZW5ndGggLTE7IGk+PTA7IGktLSl7XHJcbiAgICAgICAgaW5kZXggKysgO1xyXG4gICAgICAgIGFyclN0ci5wdXNoKHN0ck51bS5jaGFyQXQoaSkpO1xyXG4gICAgICAgIGlmKGluZGV4ID09MyAmJiBpICE9ICgwKSl7XHJcbiAgICAgICAgICAgIGFyclN0ci5wdXNoKFwiLFwiKTtcclxuICAgICAgICAgICAgaW5kZXggPSAwIDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgbmV3U3RyaW5nID0gXCJcIjtcclxuICAgIGZvcihsZXQgaSA9IGFyclN0ci5sZW5ndGggLTE7IGkgPj0wOyBpLS0pe1xyXG4gICAgICAgIG5ld1N0cmluZyArPSBhcnJTdHJbaV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld1N0cmluZztcclxufVxyXG5cclxud2luZG93LkdldEdhbWVOYW1lID0gZnVuY3Rpb24gKGdhbWVtb2RlKSB7XHJcbiAgICBpZiAoZ2FtZW1vZGUgPT0gd2luZG93LlNlcnZlclR5cGUuRV9TSVhfQlVMTEZJR0hUX1RZUEUpIHtcclxuICAgICAgICByZXR1cm4gXCLlha3kurrmlpfniZtcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIua4uOaIj1wiO1xyXG59XHJcblxyXG53aW5kb3cuR2V0R2FtZVR5cGUgPSBmdW5jdGlvbiAoZ2FtZXR5cGUpIHtcclxuICAgIGlmIChnYW1ldHlwZSA9PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIFwi6Zet54mM5oqi5bqEXCI7XHJcbiAgICB9IGVsc2UgaWYgKGdhbWV0eXBlID09IDIpIHtcclxuICAgICAgICByZXR1cm4gXCIz5byg5oqi5bqEXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufSIsInZhciBNZXNzYWdlUmVxID0gcmVxdWlyZShcIk1lc3NhZ2VSZXFcIik7XHJcblxyXG5mdW5jdGlvbiBVc2VyRGV0YWlsUmVxUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlcS5hcHBseSh0aGlzLCBbXSk7ICAvL+mbhuaIkOeItuexu+aVsOaNrlxyXG5cclxuICAgIHRoaXMuY21kID0gd2luZG93LlVTX1JFUV9VU0VSX0RFVEFJTF9DTURfSUQ7XHJcblxyXG4gICAgLy/lh4blpIflj5HpgIHnmoTmlbDmja5cclxuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgdGhpcy5kYXRhID0ge1xyXG4gICAgICAgICAgICBjbWQ6IHRoaXMuY21kLFxyXG4gICAgICAgICAgICBzZXE6IHRoaXMuc2VxLFxyXG4gICAgICAgICAgICB1aWQ6IHRoaXMudWlkLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5TT0NLRVRUX1NFTkRNRVNTQUdFLCB0aGlzKTtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIFVzZXJEZXRhaWxSZXFQYWNrZXQ7XHJcbiIsInZhciBNZXNzYWdlUmVzcCA9IHJlcXVpcmUoXCJNZXNzYWdlUmVzcFwiKTtcclxuXHJcbmZ1bmN0aW9uIFVzZXJEZXRhaWxSZXNwUGFja2V0KCkge1xyXG4gICAgTWVzc2FnZVJlc3AuYXBwbHkodGhpcywgW10pOyAgLy/pm4bmiJDniLbnsbvmlbDmja5cclxuXHJcbiAgICB0aGlzLmNtZCAgICAgICAgPSB3aW5kb3cuVVNfUkVTUF9VU0VSX0RFVEFJTF9DTURfSUQ7XHJcbiAgICB0aGlzLmdvbGQgICAgICAgPSAwO1xyXG4gICAgdGhpcy5kaWFtb25kICAgID0gMDtcclxuICAgIHRoaXMucGxheWNvdW50ICA9IDA7XHJcbiAgICB0aGlzLndpbmNvdW50ICAgPSAwO1xyXG4gICAgdGhpcy5sb3NlY291bnQgID0gMDtcclxuICAgIHRoaXMudGFibGVjb3VudCA9IDA7XHJcblxyXG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5zZXEgID0gbXNnLnNlcTtcclxuICAgICAgICB0aGlzLnVpZCAgPSBtc2cudWlkO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IG1zZy5jb2RlO1xyXG4gICAgICAgIHRoaXMuZGVzYyA9IG1zZy5kZXNjO1xyXG4gICAgICAgIGlmKHRoaXMuY29kZSA8IFNvY2tldFJldENvZGUuUkVUX1NVQ0NFU1MpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5nb2xkICAgICAgID0gbXNnLmdvbGQ7XHJcbiAgICAgICAgdGhpcy5kaWFtb25kICAgID0gbXNnLmRpYW1vbmQ7XHJcbiAgICAgICAgdGhpcy5wbGF5Y291bnQgID0gbXNnLnBsYXljb3VudDtcclxuICAgICAgICB0aGlzLndpbmNvdW50ICAgPSBtc2cud2luY291bnQ7XHJcbiAgICAgICAgdGhpcy5sb3NlY291bnQgID0gbXNnLmxvc2Vjb3VudDtcclxuICAgICAgICB0aGlzLnRhYmxlY291bnQgPSBtc2cudGFibGVjb3VudDtcclxuICAgIH07XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXNlckRldGFpbFJlc3BQYWNrZXQ7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHNocmltcCBvbiAxNy8yLzIzLlxyXG4gKi9cclxuXHJcbnZhciBVdGlsVG9vbCA9IHtcclxuICAgIC8v6I635Y+W57O757uf5pe26Ze0XHJcbiAgICBnZXROb3dGb3JtYXREYXRlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICB2YXIgc2VwZXJhdG9yMSA9IFwiLVwiO1xyXG4gICAgICAgIHZhciBzZXBlcmF0b3IyID0gXCI6XCI7XHJcbiAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICB2YXIgc3RyRGF0ZSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGlmIChtb250aCA+PSAxICYmIG1vbnRoIDw9IDkpIHtcclxuICAgICAgICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RyRGF0ZSA+PSAwICYmIHN0ckRhdGUgPD0gOSkge1xyXG4gICAgICAgICAgICBzdHJEYXRlID0gXCIwXCIgKyBzdHJEYXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VycmVudGRhdGUgPSBkYXRlLmdldEZ1bGxZZWFyKCkgKyBzZXBlcmF0b3IxICsgbW9udGggKyBzZXBlcmF0b3IxICsgc3RyRGF0ZVxyXG4gICAgICAgICAgICArIFwiIFwiICsgZGF0ZS5nZXRIb3VycygpICsgc2VwZXJhdG9yMiArIGRhdGUuZ2V0TWludXRlcygpXHJcbiAgICAgICAgICAgICsgc2VwZXJhdG9yMiArIGRhdGUuZ2V0U2Vjb25kcygpO1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IGRhdGUuZ2V0SG91cnMoKSArIHNlcGVyYXRvcjIgKyBkYXRlLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgICAgICArIHNlcGVyYXRvcjIgKyBkYXRlLmdldFNlY29uZHMoKVxyXG5cclxuICAgICAgICBjYy5sb2coXCJVdGlsVG9vbC5nZXROb3dGb3JtYXREYXRlLGRhdGUgPSBcIiArIHRlbXAgKyBcIiBcIiArIGN1cnJlbnRkYXRlKTtcclxuICAgICAgICByZXR1cm4gY3VycmVudGRhdGU7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEZvcm1hdERhdGEgOiBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBuZXdEYXRlLnNldFRpbWUodGltZSAqIDEwMDApXHJcbiAgICAgICAgcmV0dXJuIG5ld0RhdGUuZ2V0RnVsbFllYXIoKSArIFwiLVwiICsgKG5ld0RhdGUuZ2V0TW9udGgoKSArIDEpICsgXCItXCIgKyBuZXdEYXRlLmdldERhdGUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Rm9ybWF0RGF0YURldGFpbCA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIG5ld0RhdGUuc2V0VGltZSh0aW1lICogMTAwMClcclxuICAgICAgICByZXR1cm4gbmV3RGF0ZS5nZXRGdWxsWWVhcigpICsgXCIvXCIgKyAobmV3RGF0ZS5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIG5ld0RhdGUuZ2V0RGF0ZSgpICsgXCIgIFwiXHJcbiAgICAgICAgICAgICsgdGhpcy5nZXRUaW1lRGF0YShuZXdEYXRlLmdldEhvdXJzKCkpICsgXCI6XCIgKyB0aGlzLmdldFRpbWVEYXRhKG5ld0RhdGUuZ2V0TWludXRlcygpKVxyXG4gICAgICAgICAgICArIFwiOlwiICsgdGhpcy5nZXRUaW1lRGF0YShuZXdEYXRlLmdldFNlY29uZHMoKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5L+d55WZ5Lik5L2N5pyJ5pWI5pWw5a2XXHJcbiAgICBnZXRUaW1lRGF0YSA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIChBcnJheSgyKS5qb2luKDApK3RpbWUpLnNsaWNlKC0yKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FwdHVyZVNjcmVlbiA6ZnVuY3Rpb24ocGljTmFtZSxjYW52YXMsZnVuYykge1xyXG4gICAgICAgIGNjLmxvZyhcIlV0aWxUb29sLnNjcmVlblNob3RcIik7XHJcbiAgICAgICAgaWYgKCFjYy5zeXMuaXNOYXRpdmUpIHJldHVybjtcclxuICAgICAgICBsZXQgZGlycGF0aCA9IGpzYi5maWxlVXRpbHMuZ2V0V3JpdGFibGVQYXRoKCkgKyAnU2NyZWVuU2hvb3QvJztcclxuICAgICAgICBpZiggIWpzYi5maWxlVXRpbHMuaXNEaXJlY3RvcnlFeGlzdChkaXJwYXRoKSl7XHJcbiAgICAgICAgICAgIGpzYi5maWxlVXRpbHMuY3JlYXRlRGlyZWN0b3J5KGRpcnBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbmFtZSA9ICdTY3JlZW5TaG9vdC0nICsgKG5ldyBEYXRlKCkpLnZhbHVlT2YoKSArICcucG5nJztcclxuICAgICAgICBsZXQgZmlsZXBhdGggPSBkaXJwYXRoICsgcGljTmFtZTtcclxuICAgICAgICBsZXQgc2l6ZSA9IGNjLndpblNpemU7XHJcbiAgICAgICAgbGV0IHJ0ID0gY2MuUmVuZGVyVGV4dHVyZS5jcmVhdGUoc2l6ZS53aWR0aCwgc2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgIC8vY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5fc2dOb2RlLmFkZENoaWxkKHJ0KTtcclxuICAgICAgICAvL3J0LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIHJ0LmJlZ2luKCk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5fc2dOb2RlLnZpc2l0KCk7XHJcbiAgICAgICAgcnQuZW5kKCk7XHJcblxyXG4gICAgICAgIHJ0LnNhdmVUb0ZpbGUoJ1NjcmVlblNob290LycgKyBwaWNOYW1lLCBjYy5JTUFHRV9GT1JNQVRfUE5HLCB0cnVlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2MubG9nKCdzYXZlIHN1Y2MnKTtcclxuICAgICAgICAgICAgLy9ydC5yZW1vdmVGcm9tUGFyZW50KCk7XHJcbiAgICAgICAgICAgIGlmIChmdW5jKSB7XHJcbiAgICAgICAgICAgICAgICBmdW5jKGZpbGVwYXRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNjLmxvZyhcImZpbGVwYXRoID0gXCIgKyBmaWxlcGF0aCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgKiDlm77niYfljovnvKnvvIzpu5jorqTlkIzmr5TkvovljovnvKlcclxuICAgICogQHBhcmFtIHtPYmplY3R9IHBhdGhcclxuICAgICogICBwY+err+S8oOWFpeeahOi3r+W+hOWPr+S7peS4uuebuOWvuei3r+W+hO+8jOS9huaYr+WcqOenu+WKqOerr+S4iuW/hemhu+S8oOWFpeeahOi3r+W+hOaYr+eFp+ebuOWbvueJh+WCqOWtmOeahOe7neWvuei3r+W+hFxyXG4gICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXHJcbiAgICAqICAgb2JqIOWvueixoSDmnIkgd2lkdGjvvIwgaGVpZ2h077yMIHF1YWxpdHkoMC0xKVxyXG4gICAgKiBAcGFyYW0ge09iamVjdH0gY2FsbGJhY2tcclxuICAgICogICDlm57osIPlh73mlbDmnInkuIDkuKrlj4LmlbDvvIxiYXNlNjTnmoTlrZfnrKbkuLLmlbDmja5cclxuICAgICovXHJcbiAgICAgZGVhbEltYWdlIDogZnVuY3Rpb24ocGF0aCwgb2JqLCBjYWxsYmFjayl7XHJcbiAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIGltZy5zcmMgPSBwYXRoO1xyXG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICAgIC8vIOm7mOiupOaMieavlOS+i+WOi+e8qVxyXG4gICAgICAgICAgICB2YXIgdyA9IHRoYXQud2lkdGgsXHJcbiAgICAgICAgICAgIGggPSB0aGF0LmhlaWdodCxcclxuICAgICAgICAgICAgc2NhbGUgPSB3IC8gaDtcclxuICAgICAgICAgICAgdyA9IG9iai53aWR0aCB8fCB3O1xyXG4gICAgICAgICAgICBoID0gb2JqLmhlaWdodCB8fCAodyAvIHNjYWxlKTtcclxuICAgICAgICAgICAgdmFyIHF1YWxpdHkgPSAwLjc7ICAvLyDpu5jorqTlm77niYfotKjph4/kuLowLjdcclxuICAgICAgICAgICAgLy/nlJ/miJBjYW52YXNcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgICAgIC8vIOWIm+W7uuWxnuaAp+iKgueCuVxyXG4gICAgICAgICAgICB2YXIgYW53ID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwid2lkdGhcIik7XHJcbiAgICAgICAgICAgIGFudy5ub2RlVmFsdWUgPSB3O1xyXG4gICAgICAgICAgICB2YXIgYW5oID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwiaGVpZ2h0XCIpO1xyXG4gICAgICAgICAgICBhbmgubm9kZVZhbHVlID0gaDtcclxuICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZU5vZGUoYW53KTtcclxuICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZU5vZGUoYW5oKTtcclxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGF0LCAwLCAwLCB3LCBoKTtcclxuICAgICAgICAgICAgLy8g5Zu+5YOP6LSo6YePXHJcbiAgICAgICAgICAgIGlmKG9iai5xdWFsaXR5ICYmIG9iai5xdWFsaXR5IDw9IDEgJiYgb2JqLnF1YWxpdHkgPiAwKXtcclxuICAgICAgICAgICAgICAgIHF1YWxpdHkgPSBvYmoucXVhbGl0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5sb2coXCJxdWFsaXR5ID0gXCIscXVhbGl0eSk7XHJcbiAgICAgICAgICAgIC8vIHF1YWxpdHnlgLzotorlsI/vvIzmiYDnu5jliLblh7rnmoTlm77lg4/otormqKHns4pcclxuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycsIHF1YWxpdHkgKTtcclxuICAgICAgICAgICAgLy8g5Zue6LCD5Ye95pWw6L+U5ZueYmFzZTY055qE5YC8XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGJhc2U2NCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2ltZy5zYXZlVG9GaWxlKFwiYS5wbmdcIix0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0VGltZSA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdmFyIGhvdXIgPSBwYXJzZUludCh0aW1lLzYwLzYwKTtcclxuICAgICAgICB2YXIgbWluID0gcGFyc2VJbnQoKHRpbWUgLSAzNjAwKmhvdXIpLzYwKTtcclxuICAgICAgICB2YXIgc2Vjb25kID0gdGltZSAtIDM2MDAqaG91ciAtIDYwKm1pbjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGltZURhdGEoaG91cikgKyBcIjpcIiArIHRoaXMuZ2V0VGltZURhdGEobWluKSArIFwiOlwiICsgdGhpcy5nZXRUaW1lRGF0YShzZWNvbmQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRIb3VyVGltZTogZnVuY3Rpb24gKHRpbWUpIHtcclxuICAgICAgICAgaWYodGltZSA8IDE4MDApXHJcbiAgICAgICAgIHtcclxuICAgICAgICAgICAgIHZhciB0aW1lID0gcGFyc2VGbG9hdCh0aW1lLzYwKTtcclxuICAgICAgICAgICAgIHJldHVybiB0aW1lICsgXCJtaW5cIjtcclxuICAgICAgICAgfVxyXG4gICAgICAgIHZhciBob3VyID0gcGFyc2VGbG9hdCh0aW1lLzYwLzYwKTtcclxuICAgICAgICByZXR1cm4gaG91ciArIFwiaFwiO1xyXG4gICAgfSxcclxuICAgIGdldENsdWJMZXZlbE5hbWUgOiBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICBzd2l0Y2ggKGxldmVsKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuS4gOaYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLkuozmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5LiJ5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuWbm+aYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLkupTmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5YWt5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIuS4g+aYn+S/seS5kOmDqFwiO1xyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLlhavmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwi5Lmd5pif5L+x5LmQ6YOoXCI7XHJcbiAgICAgICAgICAgIGNhc2UgMTA6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCLljYHmmJ/kv7HkuZDpg6hcIjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVdGlsVG9vbDsiLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICAgICAgVGltZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgIFZvaWNlVmFsdWUgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgVm9pY2VWYWx1ZUZyYW1lIDogW2NjLlNwcml0ZUZyYW1lXSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuc2V0VGltZSgwKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuICAgIFxyXG4gICAgc2V0VGltZSA6IGZ1bmN0aW9uICh0aW1lKSB7XHJcbiAgICAgICAgdGhpcy50aW1lID0gdGltZTtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMudXBkYXRlVGltZSwxKTtcclxuICAgIH0sXHJcblxyXG4gICAgdXBkYXRlVGltZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpbWUrKztcclxuICAgICAgICBpZih0aGlzLnRpbWUgPCAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMudXBkYXRlVGltZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLlRpbWUuc3RyaW5nID0gdGhpcy50aW1lICsgJ1wiJztcclxuICAgICAgICB0aGlzLnVwZGF0ZVZvaWNlVmFsdWUoKTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRpbWUgPiAzMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHVwZGF0ZVZvaWNlVmFsdWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5Wb2ljZVZhbHVlLnNwcml0ZUZyYW1lID0gdGhpcy5Wb2ljZVZhbHVlRnJhbWVbdGhpcy50aW1lJTNdO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZGlzbWlzcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgcG9wVmlldyA6IFwiVm9pY2VQbGF5Vmlld1wiLFxyXG4gICAgICAgICAgICBidG4gOiBcImRpc21pc3NcIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgR2xvYmFsRXZlbnRNYW5hZ2VyLmdldEluc3RhbmNlKCkuZW1pdEV2ZW50KHdpbmRvdy5Tb2NrZXRNZXNzYWdlLFxyXG4gICAgICAgICAgICB7dGFnOndpbmRvdy5NZXNzYWdlVHlwZS5TQ0VORV9NU0csZGF0YTptZXNzYWdlfSkgO1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnVwZGF0ZVRpbWUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5yZW1vdmVGcm9tUGFyZW50KHRydWUpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBHYW1lQ2FsbE9DID0gcmVxdWlyZSgnR2FtZUNhbGxPQycpO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIFRpbWUgOiBjYy5MYWJlbCxcclxuICAgICAgICBWb2ljZVZhbHVlIDogW2NjLlNwcml0ZV0sXHJcbiAgICAgICAgLy9Wb2ljZVZhbHVlRnJhbWUgOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudGltZSA9IDMwO1xyXG4gICAgICAgIHRoaXMuc3RhcnRWb2ljZVRpbWUoKTtcclxuICAgICAgICBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuU3RhcnRSZWNvcmQoMzAwMDApO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc3RhcnRWb2ljZVRpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSh0aGlzLnVwZGF0ZVZvaWNlVGltZSwgMSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICB1cGRhdGVWb2ljZVRpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy50aW1lLS07XHJcbiAgICAgICAgdGhpcy5UaW1lLnN0cmluZyA9IHRoaXMudGltZSArICdcIic7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWb2ljZVZhbHVlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNldFZvaWNlVmFsdWUgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgMztpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Wb2ljZVZhbHVlW2luZGV4XS5ub2RlLmFjdGl2ZSA9IChpbmRleCA8IHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZVZvaWNlVmFsdWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwO2luZGV4IDwgMztpbmRleCsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5Wb2ljZVZhbHVlW2luZGV4XS5ub2RlLmFjdGl2ZSA9IChpbmRleCA8PSB0aGlzLnRpbWUlMyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgZGlzbWlzcyA6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICBjYy5sb2coXCJkaXNtaXNzXCIpO1xyXG4gICAgICAgIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5TdG9wUmVjb3JkaW5nKCk7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMudXBkYXRlVm9pY2VUaW1lKTtcclxuICAgICAgICB0aGlzLm5vZGUucmVtb3ZlRnJvbVBhcmVudCh0cnVlKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGxpeGlhb2ZlaSBvbiAxNy8zLzEyLlxyXG4gKi9cclxudmFyIEdhbWVDYWxsT0MgPSByZXF1aXJlKCdHYW1lQ2FsbE9DJyk7XHJcbnZhciBMb2FkaW5nVmlldyA9IHJlcXVpcmUoJ0xvYWRpbmdWaWV3Jyk7XHJcbnZhciBIdHRwTWFuYWdlciA9IHJlcXVpcmUoJ0h0dHBNYW5hZ2VyJyk7XHJcbnZhciBQbGF0Zm9ybSA9IHJlcXVpcmUoJ1BsYXRmb3JtJyk7XHJcbnZhciBHYW1lUGxheWVyID0gcmVxdWlyZSgnR2FtZVBsYXllcicpO1xyXG52YXIgU29ja2V0TWFuYWdlciA9IHJlcXVpcmUoJ1NvY2tldE1hbmFnZXInKTtcclxuXHJcbmZ1bmN0aW9uICB3eEFwaSgpXHJcbntcclxuXHJcbn1cclxuXHJcbnd4QXBpLnByb3RvdHlwZS5zZW5kV2VDaGF0TG9naW4gPSBmdW5jdGlvbiAoKSB7XHJcblx0Y2MubG9nKFwid3hBcGkucHJvdG90eXBlLnNlbmRUZXh0Q29udGVudCBcIik7XHJcblx0aWYoY2Muc3lzLnBsYXRmb3JtID09IGNjLnN5cy5BTkRST0lEKXsgXHJcblx0XHRTb2NpYWxVdGlscy5sb2dpbldlaXhpbigpO1xyXG5cdH1lbHNle1xyXG5cdFx0aWYoY2Muc3lzLmlzTmF0aXZlICYmIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5jaGVja0lzQWJsZSgpKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgcmV0ID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuXHRcdFx0XHRcIkxvY2FsSW5mb1wiLFxyXG5cdFx0XHRcdFwic2VuZFdlQ2hhdExvZ2luXCJcclxuXHRcdFx0KTtcclxuXHRcdFx0Y2MubG9nKFwicmV0OiVzXCIscmV0KTtcclxuXHRcdFx0cmV0dXJuIHJldDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbnd4QXBpLnByb3RvdHlwZS5zZW5kVGV4dENvbnRlbnQgPSBmdW5jdGlvbiAodHlwZSxzdHJpbmcsdXJsKSB7XHJcbiAgICBjYy5sb2coXCJ3eEFwaS5wcm90b3R5cGUuc2VuZFRleHRDb250ZW50IFwiKTtcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgcmV0ID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJzZW5kVGV4dENvbnRlbnQ6ZGVzYzp1cmw6XCIsXHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIHN0cmluZyxcclxuICAgICAgICAgICAgdXJsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJyZXQ6JXNcIixyZXQpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbnd4QXBpLnByb3RvdHlwZS5zZW5kSW1hZ2VDb250ZW50ID0gZnVuY3Rpb24gKHR5cGUsc3RyaW5nLHVybCkge1xyXG4gICAgY2MubG9nKFwid3hBcGkucHJvdG90eXBlLnNlbmRJbWFnZUNvbnRlbnQgXCIpO1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciByZXQgPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcInNlbmRJbWFnZUNvbnRlbnQ6ZGVzYzp1cmw6XCIsXHJcbiAgICAgICAgICAgIHR5cGUsXHJcbiAgICAgICAgICAgIHN0cmluZyxcclxuICAgICAgICAgICAgdXJsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjYy5sb2coXCJyZXQ6JXNcIixyZXQpO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbnd4QXBpLnByb3RvdHlwZS5zZW5kTGlua0NvbnRlbnQgPSBmdW5jdGlvbiAodHlwZSxzdHJpbmcsdXJsKSB7XHJcbiAgICBjYy5sb2coXCJ3eEFwaS5wcm90b3R5cGUuc2VuZExpbmtDb250ZW50IFwiICsgdHlwZSArIFwiLFwiICsgc3RyaW5nICsgXCIsXCIgKyB1cmwpO1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciByZXQgPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcInNlbmRMaW5rQ29udGVudDpkZXNjOnVybDpcIixcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgc3RyaW5nLFxyXG4gICAgICAgICAgICB1cmxcclxuICAgICAgICApO1xyXG4gICAgICAgIGNjLmxvZyhcInJldDolc1wiLHJldCk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxufVxyXG5cclxud3hBcGkucHJvdG90eXBlLnNlbmRBcHBDb250ZW50ID0gZnVuY3Rpb24gKHR5cGUsc3RyaW5nLHVybCkge1xyXG4gICAgY2MubG9nKFwid3hBcGkucHJvdG90eXBlLnNlbmRBcHBDb250ZW50IFwiICsgdHlwZSArIFwiLFwiICsgc3RyaW5nICsgXCIsXCIgKyB1cmwpO1xyXG4gICAgaWYoY2Muc3lzLmlzTmF0aXZlICYmIEdhbWVDYWxsT0MuZ2V0SW5zdGFuY2UoKS5jaGVja0lzQWJsZSgpKVxyXG4gICAge1xyXG4gICAgICAgIHZhciByZXQgPSBqc2IucmVmbGVjdGlvbi5jYWxsU3RhdGljTWV0aG9kKFxyXG4gICAgICAgICAgICBcIkxvY2FsSW5mb1wiLFxyXG4gICAgICAgICAgICBcInNlbmRBcHBDb250ZW50OmRlc2M6dXJsOlwiLFxyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBzdHJpbmcsXHJcbiAgICAgICAgICAgIHVybFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY2MubG9nKFwicmV0OiVzXCIscmV0KTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG59XHJcblxyXG53eEFwaS5wcm90b3R5cGUuY2xlYXJXZUNoYXRMb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNjLmxvZyhcInd4QXBpLnByb3RvdHlwZS5jbGVhcldlQ2hhdExvZ2luIFwiKTtcclxuICAgIGlmKGNjLnN5cy5pc05hdGl2ZSAmJiBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuY2hlY2tJc0FibGUoKSlcclxuICAgIHtcclxuICAgICAgICB2YXIgcmV0ID0ganNiLnJlZmxlY3Rpb24uY2FsbFN0YXRpY01ldGhvZChcclxuICAgICAgICAgICAgXCJMb2NhbEluZm9cIixcclxuICAgICAgICAgICAgXCJjbGVhcldlQ2hhdExvZ2luXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNjLmxvZyhcInJldDolc1wiLHJldCk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxufVxyXG5cclxud3hBcGkucHJvdG90eXBlLndlQ2hhdFBheSA9IGZ1bmN0aW9uIChnb29kaWQsb3BlbmlkKSB7XHJcbiAgICBjYy5sb2coXCJ3eEFwaS5wcm90b3R5cGUud2VDaGF0UGF5LCBnb29kaWQ9XCIgKyBnb29kaWQgKyBcIiwgb3BlbmlkPVwiICsgb3BlbmlkKTtcclxuXHRpZihjYy5zeXMucGxhdGZvcm0gPT0gY2Muc3lzLkFORFJPSUQpe1xyXG5cdFx0V2VDaGF0QXBpLmdldEluc3RhbmNlKCkud2VDaGF0UGF5Rm9yQW5kcm9pZChnb29kaWQsb3BlbmlkKTtcclxuXHR9ZWxzZXtcclxuXHRcdGlmKGNjLnN5cy5pc05hdGl2ZSAmJiBHYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuY2hlY2tJc0FibGUoKSlcclxuXHRcdHtcclxuXHRcdFx0dmFyIHJldCA9IGpzYi5yZWZsZWN0aW9uLmNhbGxTdGF0aWNNZXRob2QoXHJcblx0XHRcdFx0XCJMb2NhbEluZm9cIixcclxuXHRcdFx0XHRcIndlQ2hhdFBheTpvcGVuaWQ6XCIsXHJcblx0XHRcdFx0Z29vZGlkLFxyXG5cdFx0XHRcdG9wZW5pZFxyXG5cdFx0XHQpO1xyXG5cdFx0XHRjYy5sb2coXCJyZXQ6JXNcIixyZXQpO1xyXG5cdFx0XHRyZXR1cm4gcmV0O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxud3hBcGkucHJvdG90eXBlLndlQ2hhdFBheUZvckFuZHJvaWQgPSBmdW5jdGlvbiAoZ29vZGlkLCB1aWQpIHtcclxuXHRjYy5sb2coXCJ3ZUNoYXRQYXlGb3JBbmRyb2lkLCBnb29pZD1cIiArIGdvb2RpZCArICcsIHVpZD0nICsgdWlkKTtcclxuXHR2YXIgdXJsID0gXCJodHRwOi8vbWFuYWdlLmFxZGRwLmNuL3d4cGF5L2V4YW1wbGUvcGF5LnBocD9nb29kX2lkPVwiICsgZ29vZGlkICsgXCImb3BlbmlkPVwiICsgdWlkO1xyXG5cdHZhciB4aHIgPSBjYy5sb2FkZXIuZ2V0WE1MSHR0cFJlcXVlc3QoKTtcclxuXHR4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG5cdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyMDcpKSB7XHJcblx0XHRcdHZhciBkYXRhID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuXHRcdFx0aWYoZGF0YVtcImNvZGVcIl0gPT0gMCl7XHJcblx0XHRcdFx0dmFyIG9yZGVyX251bSA9IGRhdGFbJ29yZGVyJ11bJ29yZGVyX251bSddO1xyXG5cdFx0XHRcdHZhciBhcHBpZCA9IGRhdGFbJ29yZGVyJ11bJ2FwcGlkJ107XHJcblx0XHRcdFx0dmFyIHBhcnRuZXJJZCA9IGRhdGFbJ29yZGVyJ11bJ29yZGVyaW5mbyddWydwYXJ0bmVySWQnXTtcclxuXHRcdFx0XHR2YXIgcHJlcGF5SWQgPSBkYXRhWydvcmRlciddWydvcmRlcmluZm8nXVsncHJlcGF5SWQnXTtcclxuXHRcdFx0XHR2YXIgbm9uY2VTdHIgPSBkYXRhWydvcmRlciddWydvcmRlcmluZm8nXVsnbm9uY2VTdHInXTtcclxuXHRcdFx0XHR2YXIgdGltZVN0YW1wID0gZGF0YVsnb3JkZXInXVsnb3JkZXJpbmZvJ11bJ3RpbWVTdGFtcCddO1xyXG5cdFx0XHRcdHZhciBzaWduID0gZGF0YVsnb3JkZXInXVsnb3JkZXJpbmZvJ11bJ3NpZ24nXTtcclxuXHRcdFx0XHQvL3ZhciBwYWNrYWdlTmFtZSA9IGRhdGFbJ29yZGVyJ11bJ29yZGVyaW5mbyddWydwYWNrYWdlJ107XHJcblxyXG5cdFx0XHRcdGNjLmxvZyhcImFwcGlkPVwiICsgYXBwaWQpO1xyXG5cdFx0XHRcdGNjLmxvZyhcInBhcnRuZXJJZD1cIiArIHBhcnRuZXJJZCk7XHJcblx0XHRcdFx0Y2MubG9nKFwicHJlcGF5SWQ9XCIgKyBwcmVwYXlJZCk7XHJcblx0XHRcdFx0Y2MubG9nKFwibm9uY2VTdHI9XCIgKyBub25jZVN0cik7XHJcblx0XHRcdFx0Y2MubG9nKFwidGltZVN0YW1wPVwiICsgdGltZVN0YW1wKTtcclxuXHRcdFx0XHRjYy5sb2coXCJzaWduPVwiICsgc2lnbik7XHJcblxyXG5cdFx0XHRcdFNvY2lhbFV0aWxzLnBheVdlaXhpbihwYXJ0bmVySWQsIHByZXBheUlkLCBub25jZVN0ciwgdGltZVN0YW1wLCBzaWduKTtcclxuXHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0Y2MuZXJyb3IoXCJlcnJvciBjb2RlPVwiICsgZGF0YVtcImNvZGVcIl0pO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcImVycm9yIHJlYWR5U3RhdGU9XCIgKyB4aHIucmVhZHlTdGF0ZSk7XHJcblx0XHR9XHJcblx0fS5iaW5kKHRoaXMpO1xyXG5cdHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJ0aW1lb3V0XCIpO1xyXG5cdH07XHJcblx0eGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcImVycm9yXCIpO1xyXG5cdH07XHJcblx0eGhyLnNlbmQoKTtcclxufVxyXG5cclxud3hBcGkucHJvdG90eXBlLnd4TG9naW5TdWNjZXNzID0gZnVuY3Rpb24gKG9wZW5pZCx1bmlvbmlkLCBuYW1lLCBoZWFkaW1ndXJsLHNleCkge1xyXG4gICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLnVuaW9uaWQgID0gdW5pb25pZDtcclxuICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5vcGVuaWQgID0gb3BlbmlkO1xyXG4gICAgR2FtZVBsYXllci5nZXRJbnN0YW5jZSgpLm5hbWUgICAgID0gbmFtZTtcclxuICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5oZWFkdXJsICA9IGhlYWRpbWd1cmwgKyBcIi5wbmdcIjtcclxuICAgIEdhbWVQbGF5ZXIuZ2V0SW5zdGFuY2UoKS5zZXggICAgICA9IE51bWJlcihzZXgpO1xyXG4gICAgLy9HYW1lQ2FsbE9DLmdldEluc3RhbmNlKCkuU2V0QXBwSW5mbyh1bmlvbmlkKTtcclxuICAgIFNvY2tldE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5zdGFydFNvY2tldCgpO1xyXG59XHJcblxyXG53eEFwaS5wcm90b3R5cGUud3hHZXRDb2RlID0gZnVuY3Rpb24gKHN1Y2Nlc3MsIGNvZGUpIHtcclxuXHRjYy5sb2coXCJvbkdldENvZGUsIHN1Y2Nlc3M9XCIgKyBzdWNjZXNzICsgXCIsIGNvZGU9XCIgKyBjb2RlKTtcclxuXHR2YXIgdXJsID0gXCJodHRwczovL2FwaS53ZWl4aW4ucXEuY29tL3Nucy9vYXV0aDIvYWNjZXNzX3Rva2VuP2FwcGlkPXd4ZDBkOTRiOWZmNmMyODk0ZCZzZWNyZXQ9NmEzYjcwNmE2MjgzM2FlOGM0NjE1OGMwMWUyZWUwZGImY29kZT1cIitjb2RlK1wiJmdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlXCI7XHJcblx0dmFyIHhociA9IGNjLmxvYWRlci5nZXRYTUxIdHRwUmVxdWVzdCgpO1xyXG5cdHhoci5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XHJcblx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDIwNykpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJ4aHIucmVzcG9uc2VUZXh0PVwiICsgeGhyLnJlc3BvbnNlVGV4dCk7XHJcblxyXG5cdFx0XHR2YXIgZGF0YSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcblxyXG5cdFx0XHR2YXIgYWNjZXNzX3Rva2VuID0gZGF0YVsnYWNjZXNzX3Rva2VuJ107XHJcblx0XHRcdHZhciBvcGVuaWQgPSBkYXRhWydvcGVuaWQnXTtcclxuXHRcdFx0dmFyIHVuaW9uaWQgPSBkYXRhWyd1bmlvbmlkJ107XHJcblxyXG5cdFx0XHRjYy5sb2coXCJhY2Nlc3NfdG9rZW49XCIgKyBhY2Nlc3NfdG9rZW4pO1xyXG5cdFx0XHRjYy5sb2coXCJvcGVuaWQ9XCIgKyBvcGVuaWQpO1xyXG5cdFx0XHRjYy5sb2coXCJ1bmlvbmlkPVwiICsgdW5pb25pZCk7XHJcblxyXG5cdFx0XHR2YXIgaW5mb191cmwgPSBcImh0dHBzOi8vYXBpLndlaXhpbi5xcS5jb20vc25zL3VzZXJpbmZvP2FjY2Vzc190b2tlbj1cIiArIGFjY2Vzc190b2tlbiArIFwiJm9wZW5pZD1cIiArIG9wZW5pZDtcclxuXHRcdFx0dmFyIHhocjIgPSBjYy5sb2FkZXIuZ2V0WE1MSHR0cFJlcXVlc3QoKTtcclxuXHRcdFx0eGhyMi5vcGVuKFwiR0VUXCIsIGluZm9fdXJsLCB0cnVlKTtcclxuXHRcdFx0eGhyMi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0aWYgKHhocjIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIyLnN0YXR1cyA+PSAyMDAgJiYgeGhyMi5zdGF0dXMgPD0gMjA3KSkge1xyXG5cdFx0XHRcdFx0Y2MubG9nKFwieGhyMi5yZXNwb25zZVRleHQ9XCIgKyB4aHIyLnJlc3BvbnNlVGV4dCk7XHJcblx0XHRcdFx0XHR2YXIgZGF0YTIgPSBKU09OLnBhcnNlKHhocjIucmVzcG9uc2VUZXh0KTtcclxuXHRcdFx0XHRcdC8vdG9kby4g5YGa5o+Q56S6XHJcblx0XHRcdFx0XHRpZihkYXRhMltcIm5pY2tuYW1lXCJdID09IHVuZGVmaW5lZCB8fCBkYXRhMlsnaGVhZGltZ3VybCddID09IHVuZGVmaW5lZCl7XHJcblx0XHRcdFx0XHRcdGNjLmVycm9yKFwiZXJyb3JcIik7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFdlQ2hhdEFwaS5nZXRJbnN0YW5jZSgpLnd4TG9naW5TdWNjZXNzKG9wZW5pZCx1bmlvbmlkLCBkYXRhMlsnbmlja25hbWUnXSwgZGF0YTJbJ2hlYWRpbWd1cmwnXSwgZGF0YTJbJ3NleCddKTtcclxuXHRcdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0uYmluZCh0aGlzKTtcclxuXHRcdFx0eGhyMi5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwidGltZW91dFwiKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0eGhyMi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XHJcblx0XHRcdH07XHJcblx0XHRcdHhocjIuc2VuZCgpO1xyXG5cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3IgcmVhZHlTdGF0ZT1cIiArIHhoci5yZWFkeVN0YXRlKTtcclxuXHRcdH1cclxuXHR9LmJpbmQodGhpcyk7XHJcblx0eGhyLm9udGltZW91dCA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcInRpbWVvdXRcIik7XHJcblx0fTtcclxuXHR4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XHJcblx0fTtcclxuXHR4aHIuc2VuZCgpO1xyXG5cclxufVxyXG5cclxuLy/lvIDlp4vov5vooYzlvq7kv6HmlK/ku5hcclxud3hBcGkucHJvdG90eXBlLm9uV1hQYXkgPSBmdW5jdGlvbigpe1xyXG5cdGNjLmxvZyhcIm9uV1hQYXlcIik7XHJcblxyXG59XHJcblxyXG4vL+W+ruS/oeaUr+S7mOWbnuiwg1xyXG53eEFwaS5wcm90b3R5cGUub25XWFBheVJlc3BvbnNlID0gZnVuY3Rpb24gKGNvZGUpIHtcclxuXHRjYy5sb2coXCJvbldYUGF5UmVzcG9uc2UsIGNvZGU9XCIgKyBjb2RlKTtcclxuXHJcbn1cclxuXHJcbnZhciBXZUNoYXRBcGkgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBpbnN0YW5jZSA7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SW5zdGFuY2UoKXtcclxuICAgICAgICBpZiggaW5zdGFuY2UgPT09IHVuZGVmaW5lZCApe1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyB3eEFwaSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2UgOiBnZXRJbnN0YW5jZSxcclxuICAgIH1cclxufSkoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV2VDaGF0QXBpOyIsInZhciBCYXNlUG9wID0gcmVxdWlyZSgnQmFzZVBvcCcpO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBCYXNlUG9wLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgICAgIFdlYlZpZXcgOiBjYy5XZWJWaWV3LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5MZWZ0SW5Ubyh0aGlzLm5vZGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBjYWxsbGJhY2tCdG4gOiBmdW5jdGlvbiAoZXZlbnQsQ3VzdG9uRXZlbnREYXRhKSB7XHJcbiAgICAgICAgdmFyIEJ0bk5hbWUgPSBldmVudC50YXJnZXQuZ2V0TmFtZSgpO1xyXG4gICAgICAgIGlmKEJ0bk5hbWUgPT0gXCJCdG5DbG9zZVwiKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2V0V2ViVmlld1VybCAgOmZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB0aGlzLldlYlZpZXcudXJsID0gdXJsO1xyXG4gICAgfVxyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==